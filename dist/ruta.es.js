function t(t,e){const n=Object.create(null),r=t.split(",");for(let o=0;o<r.length;o++)n[r[o]]=!0;return e?t=>!!n[t.toLowerCase()]:t=>!!n[t]}const e=t("itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly");function n(t){return!!t||""===t}function r(t){if(x(t)){const e={};for(let n=0;n<t.length;n++){const o=t[n],s=D(o)?i(o):r(o);if(s)for(const t in s)e[t]=s[t]}return e}return D(t)||N(t)?t:void 0}const o=/;(?![^(]*\))/g,s=/:(.+)/;function i(t){const e={};return t.split(o).forEach((t=>{if(t){const n=t.split(s);n.length>1&&(e[n[0].trim()]=n[1].trim())}})),e}function a(t){let e="";if(D(t))e=t;else if(x(t))for(let n=0;n<t.length;n++){const r=a(t[n]);r&&(e+=r+" ")}else if(N(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}const l=t=>null==t?"":x(t)||N(t)&&(t.toString===A||!k(t.toString))?JSON.stringify(t,c,2):String(t),c=(t,e)=>e&&e.__v_isRef?c(t,e.value):w(e)?{[`Map(${e.size})`]:[...e.entries()].reduce(((t,[e,n])=>(t[`${e} =>`]=n,t)),{})}:I(e)?{[`Set(${e.size})`]:[...e.values()]}:!N(e)||x(e)||O(e)?e:String(e),u={},f=[],p=()=>{},d=()=>!1,h=/^on[^a-z]/,g=t=>h.test(t),v=t=>t.startsWith("onUpdate:"),m=Object.assign,y=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},b=Object.prototype.hasOwnProperty,_=(t,e)=>b.call(t,e),x=Array.isArray,w=t=>"[object Map]"===E(t),I=t=>"[object Set]"===E(t),k=t=>"function"==typeof t,D=t=>"string"==typeof t,S=t=>"symbol"==typeof t,N=t=>null!==t&&"object"==typeof t,C=t=>N(t)&&k(t.then)&&k(t.catch),A=Object.prototype.toString,E=t=>A.call(t),O=t=>"[object Object]"===E(t),T=t=>D(t)&&"NaN"!==t&&"-"!==t[0]&&""+parseInt(t,10)===t,P=t(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),$=t=>{const e=Object.create(null);return n=>e[n]||(e[n]=t(n))},M=/-(\w)/g,R=$((t=>t.replace(M,((t,e)=>e?e.toUpperCase():"")))),j=/\B([A-Z])/g,V=$((t=>t.replace(j,"-$1").toLowerCase())),L=$((t=>t.charAt(0).toUpperCase()+t.slice(1))),F=$((t=>t?`on${L(t)}`:"")),U=(t,e)=>!Object.is(t,e),B=(t,e)=>{for(let n=0;n<t.length;n++)t[n](e)},K=(t,e,n)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,value:n})},H=t=>{const e=parseFloat(t);return isNaN(e)?t:e};let W;let q;const z=[];class X{constructor(t=!1){this.active=!0,this.effects=[],this.cleanups=[],!t&&q&&(this.parent=q,this.index=(q.scopes||(q.scopes=[])).push(this)-1)}run(t){if(this.active)try{return this.on(),t()}finally{this.off()}}on(){this.active&&(z.push(this),q=this)}off(){this.active&&(z.pop(),q=z[z.length-1])}stop(t){if(this.active){if(this.effects.forEach((t=>t.stop())),this.cleanups.forEach((t=>t())),this.scopes&&this.scopes.forEach((t=>t.stop(!0))),this.parent&&!t){const t=this.parent.scopes.pop();t&&t!==this&&(this.parent.scopes[this.index]=t,t.index=this.index)}this.active=!1}}}const Y=t=>{const e=new Set(t);return e.w=0,e.n=0,e},G=t=>(t.w&tt)>0,J=t=>(t.n&tt)>0,Z=new WeakMap;let Q=0,tt=1;const et=[];let nt;const rt=Symbol(""),ot=Symbol("");class st{constructor(t,e=null,n){this.fn=t,this.scheduler=e,this.active=!0,this.deps=[],function(t,e){(e=e||q)&&e.active&&e.effects.push(t)}(this,n)}run(){if(!this.active)return this.fn();if(!et.includes(this))try{return et.push(nt=this),lt.push(at),at=!0,tt=1<<++Q,Q<=30?(({deps:t})=>{if(t.length)for(let e=0;e<t.length;e++)t[e].w|=tt})(this):it(this),this.fn()}finally{Q<=30&&(t=>{const{deps:e}=t;if(e.length){let n=0;for(let r=0;r<e.length;r++){const o=e[r];G(o)&&!J(o)?o.delete(t):e[n++]=o,o.w&=~tt,o.n&=~tt}e.length=n}})(this),tt=1<<--Q,ut(),et.pop();const t=et.length;nt=t>0?et[t-1]:void 0}}stop(){this.active&&(it(this),this.onStop&&this.onStop(),this.active=!1)}}function it(t){const{deps:e}=t;if(e.length){for(let n=0;n<e.length;n++)e[n].delete(t);e.length=0}}let at=!0;const lt=[];function ct(){lt.push(at),at=!1}function ut(){const t=lt.pop();at=void 0===t||t}function ft(t,e,n){if(!pt())return;let r=Z.get(t);r||Z.set(t,r=new Map);let o=r.get(n);o||r.set(n,o=Y()),dt(o)}function pt(){return at&&void 0!==nt}function dt(t,e){let n=!1;Q<=30?J(t)||(t.n|=tt,n=!G(t)):n=!t.has(nt),n&&(t.add(nt),nt.deps.push(t))}function ht(t,e,n,r,o,s){const i=Z.get(t);if(!i)return;let a=[];if("clear"===e)a=[...i.values()];else if("length"===n&&x(t))i.forEach(((t,e)=>{("length"===e||e>=r)&&a.push(t)}));else switch(void 0!==n&&a.push(i.get(n)),e){case"add":x(t)?T(n)&&a.push(i.get("length")):(a.push(i.get(rt)),w(t)&&a.push(i.get(ot)));break;case"delete":x(t)||(a.push(i.get(rt)),w(t)&&a.push(i.get(ot)));break;case"set":w(t)&&a.push(i.get(rt))}if(1===a.length)a[0]&&gt(a[0]);else{const t=[];for(const e of a)e&&t.push(...e);gt(Y(t))}}function gt(t,e){for(const n of x(t)?t:[...t])(n!==nt||n.allowRecurse)&&(n.scheduler?n.scheduler():n.run())}const vt=t("__proto__,__v_isRef,__isVue"),mt=new Set(Object.getOwnPropertyNames(Symbol).map((t=>Symbol[t])).filter(S)),yt=It(),bt=It(!1,!0),_t=It(!0),xt=wt();function wt(){const t={};return["includes","indexOf","lastIndexOf"].forEach((e=>{t[e]=function(...t){const n=ie(this);for(let e=0,o=this.length;e<o;e++)ft(n,0,e+"");const r=n[e](...t);return-1===r||!1===r?n[e](...t.map(ie)):r}})),["push","pop","shift","unshift","splice"].forEach((e=>{t[e]=function(...t){ct();const n=ie(this)[e].apply(this,t);return ut(),n}})),t}function It(t=!1,e=!1){return function(n,r,o){if("__v_isReactive"===r)return!t;if("__v_isReadonly"===r)return t;if("__v_raw"===r&&o===(t?e?Zt:Jt:e?Gt:Yt).get(n))return n;const s=x(n);if(!t&&s&&_(xt,r))return Reflect.get(xt,r,o);const i=Reflect.get(n,r,o);if(S(r)?mt.has(r):vt(r))return i;if(t||ft(n,0,r),e)return i;if(ue(i)){return!s||!T(r)?i.value:i}return N(i)?t?ee(i):te(i):i}}function kt(t=!1){return function(e,n,r,o){let s=e[n];if(!t&&!oe(r)&&(r=ie(r),s=ie(s),!x(e)&&ue(s)&&!ue(r)))return s.value=r,!0;const i=x(e)&&T(n)?Number(n)<e.length:_(e,n),a=Reflect.set(e,n,r,o);return e===ie(o)&&(i?U(r,s)&&ht(e,"set",n,r):ht(e,"add",n,r)),a}}const Dt={get:yt,set:kt(),deleteProperty:function(t,e){const n=_(t,e);t[e];const r=Reflect.deleteProperty(t,e);return r&&n&&ht(t,"delete",e,void 0),r},has:function(t,e){const n=Reflect.has(t,e);return S(e)&&mt.has(e)||ft(t,0,e),n},ownKeys:function(t){return ft(t,0,x(t)?"length":rt),Reflect.ownKeys(t)}},St={get:_t,set:(t,e)=>!0,deleteProperty:(t,e)=>!0},Nt=m({},Dt,{get:bt,set:kt(!0)}),Ct=t=>t,At=t=>Reflect.getPrototypeOf(t);function Et(t,e,n=!1,r=!1){const o=ie(t=t.__v_raw),s=ie(e);e!==s&&!n&&ft(o,0,e),!n&&ft(o,0,s);const{has:i}=At(o),a=r?Ct:n?ce:le;return i.call(o,e)?a(t.get(e)):i.call(o,s)?a(t.get(s)):void(t!==o&&t.get(e))}function Ot(t,e=!1){const n=this.__v_raw,r=ie(n),o=ie(t);return t!==o&&!e&&ft(r,0,t),!e&&ft(r,0,o),t===o?n.has(t):n.has(t)||n.has(o)}function Tt(t,e=!1){return t=t.__v_raw,!e&&ft(ie(t),0,rt),Reflect.get(t,"size",t)}function Pt(t){t=ie(t);const e=ie(this);return At(e).has.call(e,t)||(e.add(t),ht(e,"add",t,t)),this}function $t(t,e){e=ie(e);const n=ie(this),{has:r,get:o}=At(n);let s=r.call(n,t);s||(t=ie(t),s=r.call(n,t));const i=o.call(n,t);return n.set(t,e),s?U(e,i)&&ht(n,"set",t,e):ht(n,"add",t,e),this}function Mt(t){const e=ie(this),{has:n,get:r}=At(e);let o=n.call(e,t);o||(t=ie(t),o=n.call(e,t)),r&&r.call(e,t);const s=e.delete(t);return o&&ht(e,"delete",t,void 0),s}function Rt(){const t=ie(this),e=0!==t.size,n=t.clear();return e&&ht(t,"clear",void 0,void 0),n}function jt(t,e){return function(n,r){const o=this,s=o.__v_raw,i=ie(s),a=e?Ct:t?ce:le;return!t&&ft(i,0,rt),s.forEach(((t,e)=>n.call(r,a(t),a(e),o)))}}function Vt(t,e,n){return function(...r){const o=this.__v_raw,s=ie(o),i=w(s),a="entries"===t||t===Symbol.iterator&&i,l="keys"===t&&i,c=o[t](...r),u=n?Ct:e?ce:le;return!e&&ft(s,0,l?ot:rt),{next(){const{value:t,done:e}=c.next();return e?{value:t,done:e}:{value:a?[u(t[0]),u(t[1])]:u(t),done:e}},[Symbol.iterator](){return this}}}}function Lt(t){return function(...e){return"delete"!==t&&this}}function Ft(){const t={get(t){return Et(this,t)},get size(){return Tt(this)},has:Ot,add:Pt,set:$t,delete:Mt,clear:Rt,forEach:jt(!1,!1)},e={get(t){return Et(this,t,!1,!0)},get size(){return Tt(this)},has:Ot,add:Pt,set:$t,delete:Mt,clear:Rt,forEach:jt(!1,!0)},n={get(t){return Et(this,t,!0)},get size(){return Tt(this,!0)},has(t){return Ot.call(this,t,!0)},add:Lt("add"),set:Lt("set"),delete:Lt("delete"),clear:Lt("clear"),forEach:jt(!0,!1)},r={get(t){return Et(this,t,!0,!0)},get size(){return Tt(this,!0)},has(t){return Ot.call(this,t,!0)},add:Lt("add"),set:Lt("set"),delete:Lt("delete"),clear:Lt("clear"),forEach:jt(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach((o=>{t[o]=Vt(o,!1,!1),n[o]=Vt(o,!0,!1),e[o]=Vt(o,!1,!0),r[o]=Vt(o,!0,!0)})),[t,n,e,r]}const[Ut,Bt,Kt,Ht]=Ft();function Wt(t,e){const n=e?t?Ht:Kt:t?Bt:Ut;return(e,r,o)=>"__v_isReactive"===r?!t:"__v_isReadonly"===r?t:"__v_raw"===r?e:Reflect.get(_(n,r)&&r in e?n:e,r,o)}const qt={get:Wt(!1,!1)},zt={get:Wt(!1,!0)},Xt={get:Wt(!0,!1)},Yt=new WeakMap,Gt=new WeakMap,Jt=new WeakMap,Zt=new WeakMap;function Qt(t){return t.__v_skip||!Object.isExtensible(t)?0:function(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}((t=>E(t).slice(8,-1))(t))}function te(t){return t&&t.__v_isReadonly?t:ne(t,!1,Dt,qt,Yt)}function ee(t){return ne(t,!0,St,Xt,Jt)}function ne(t,e,n,r,o){if(!N(t))return t;if(t.__v_raw&&(!e||!t.__v_isReactive))return t;const s=o.get(t);if(s)return s;const i=Qt(t);if(0===i)return t;const a=new Proxy(t,2===i?r:n);return o.set(t,a),a}function re(t){return oe(t)?re(t.__v_raw):!(!t||!t.__v_isReactive)}function oe(t){return!(!t||!t.__v_isReadonly)}function se(t){return re(t)||oe(t)}function ie(t){const e=t&&t.__v_raw;return e?ie(e):t}function ae(t){return K(t,"__v_skip",!0),t}const le=t=>N(t)?te(t):t,ce=t=>N(t)?ee(t):t;function ue(t){return Boolean(t&&!0===t.__v_isRef)}const fe={get:(t,e,n)=>{return ue(r=Reflect.get(t,e,n))?r.value:r;var r},set:(t,e,n,r)=>{const o=t[e];return ue(o)&&!ue(n)?(o.value=n,!0):Reflect.set(t,e,n,r)}};function pe(t){return re(t)?t:new Proxy(t,fe)}class de{constructor(t,e,n){this._setter=e,this.dep=void 0,this._dirty=!0,this.__v_isRef=!0,this.effect=new st(t,(()=>{var t;this._dirty||(this._dirty=!0,(t=ie(t=this)).dep&&gt(t.dep))})),this.__v_isReadonly=n}get value(){const t=ie(this);var e;return e=t,pt()&&((e=ie(e)).dep||(e.dep=Y()),dt(e.dep)),t._dirty&&(t._dirty=!1,t._value=t.effect.run()),t._value}set value(t){this._setter(t)}}function he(t,e){let n,r;const o=k(t);o?(n=t,r=p):(n=t.get,r=t.set);return new de(n,r,o||!r)}function ge(t,e,...n){const r=t.vnode.props||u;let o=n;const s=e.startsWith("update:"),i=s&&e.slice(7);if(i&&i in r){const t=`${"modelValue"===i?"model":i}Modifiers`,{number:e,trim:s}=r[t]||u;s?o=n.map((t=>t.trim())):e&&(o=n.map(H))}let a,l=r[a=F(e)]||r[a=F(R(e))];!l&&s&&(l=r[a=F(V(e))]),l&&vr(l,t,6,o);const c=r[a+"Once"];if(c){if(t.emitted){if(t.emitted[a])return}else t.emitted={};t.emitted[a]=!0,vr(c,t,6,o)}}function ve(t,e,n=!1){const r=e.emitsCache,o=r.get(t);if(void 0!==o)return o;const s=t.emits;let i={},a=!1;if(!k(t)){const r=t=>{const n=ve(t,e,!0);n&&(a=!0,m(i,n))};!n&&e.mixins.length&&e.mixins.forEach(r),t.extends&&r(t.extends),t.mixins&&t.mixins.forEach(r)}return s||a?(x(s)?s.forEach((t=>i[t]=null)):m(i,s),r.set(t,i),i):(r.set(t,null),null)}function me(t,e){return!(!t||!g(e))&&(e=e.slice(2).replace(/Once$/,""),_(t,e[0].toLowerCase()+e.slice(1))||_(t,V(e))||_(t,e))}Promise.resolve();let ye=null,be=null;function _e(t){const e=ye;return ye=t,be=t&&t.type.__scopeId||null,e}function xe(t){const{type:e,vnode:n,proxy:r,withProxy:o,props:s,propsOptions:[i],slots:a,attrs:l,emit:c,render:u,renderCache:f,data:p,setupState:d,ctx:h,inheritAttrs:g}=t;let m,y;const b=_e(t);try{if(4&n.shapeFlag){const t=o||r;m=Yn(u.call(t,t,f,s,d,p,h)),y=l}else{const t=e;0,m=Yn(t.length>1?t(s,{attrs:l,slots:a,emit:c}):t(s,null)),y=e.props?l:we(l)}}catch(x){On.length=0,mr(x,t,1),m=Wn(An)}let _=m;if(y&&!1!==g){const t=Object.keys(y),{shapeFlag:e}=_;t.length&&7&e&&(i&&t.some(v)&&(y=Ie(y,i)),_=qn(_,y))}return n.dirs&&(_.dirs=_.dirs?_.dirs.concat(n.dirs):n.dirs),n.transition&&(_.transition=n.transition),m=_,_e(b),m}const we=t=>{let e;for(const n in t)("class"===n||"style"===n||g(n))&&((e||(e={}))[n]=t[n]);return e},Ie=(t,e)=>{const n={};for(const r in t)v(r)&&r.slice(9)in e||(n[r]=t[r]);return n};function ke(t,e,n){const r=Object.keys(e);if(r.length!==Object.keys(t).length)return!0;for(let o=0;o<r.length;o++){const s=r[o];if(e[s]!==t[s]&&!me(n,s))return!0}return!1}function De(t,e,n=!1){const r=ar||ye;if(r){const o=null==r.parent?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides;if(o&&t in o)return o[t];if(arguments.length>1)return n&&k(e)?e.call(r.proxy):e}}const Se=t=>!!t.type.__asyncLoader,Ne=t=>t.type.__isKeepAlive;function Ce(t,e){Ee(t,"a",e)}function Ae(t,e){Ee(t,"da",e)}function Ee(t,e,n=ar){const r=t.__wdc||(t.__wdc=()=>{let e=n;for(;e;){if(e.isDeactivated)return;e=e.parent}return t()});if(Te(e,r,n),n){let t=n.parent;for(;t&&t.parent;)Ne(t.parent.vnode)&&Oe(r,e,n,t),t=t.parent}}function Oe(t,e,n,r){const o=Te(e,t,r,!0);Le((()=>{y(r[e],o)}),n)}function Te(t,e,n=ar,r=!1){if(n){const o=n[t]||(n[t]=[]),s=e.__weh||(e.__weh=(...r)=>{if(n.isUnmounted)return;ct(),lr(n);const o=vr(e,n,t,r);return cr(),ut(),o});return r?o.unshift(s):o.push(s),s}}const Pe=t=>(e,n=ar)=>(!fr||"sp"===t)&&Te(t,e,n),$e=Pe("bm"),Me=Pe("m"),Re=Pe("bu"),je=Pe("u"),Ve=Pe("bum"),Le=Pe("um"),Fe=Pe("sp"),Ue=Pe("rtg"),Be=Pe("rtc");function Ke(t,e=ar){Te("ec",t,e)}let He=!0;function We(t){const e=Xe(t),n=t.proxy,r=t.ctx;He=!1,e.beforeCreate&&qe(e.beforeCreate,t,"bc");const{data:o,computed:s,methods:i,watch:a,provide:l,inject:c,created:u,beforeMount:f,mounted:d,beforeUpdate:h,updated:g,activated:v,deactivated:m,beforeDestroy:y,beforeUnmount:b,destroyed:_,unmounted:w,render:I,renderTracked:D,renderTriggered:S,errorCaptured:C,serverPrefetch:A,expose:E,inheritAttrs:O,components:T,directives:P,filters:$}=e;if(c&&function(t,e,n=p,r=!1){x(t)&&(t=Ze(t));for(const o in t){const n=t[o];let s;s=N(n)?"default"in n?De(n.from||o,n.default,!0):De(n.from||o):De(n),ue(s)&&r?Object.defineProperty(e,o,{enumerable:!0,configurable:!0,get:()=>s.value,set:t=>s.value=t}):e[o]=s}}(c,r,null,t.appContext.config.unwrapInjectedRef),i)for(const p in i){const t=i[p];k(t)&&(r[p]=t.bind(n))}if(o){const e=o.call(n,n);N(e)&&(t.data=te(e))}if(He=!0,s)for(const x in s){const t=s[x],e=he({get:k(t)?t.bind(n,n):k(t.get)?t.get.bind(n,n):p,set:!k(t)&&k(t.set)?t.set.bind(n):p});Object.defineProperty(r,x,{enumerable:!0,configurable:!0,get:()=>e.value,set:t=>e.value=t})}if(a)for(const p in a)ze(a[p],r,n,p);if(l){const t=k(l)?l.call(n):l;Reflect.ownKeys(t).forEach((e=>{!function(t,e){if(ar){let n=ar.provides;const r=ar.parent&&ar.parent.provides;r===n&&(n=ar.provides=Object.create(r)),n[t]=e}}(e,t[e])}))}function M(t,e){x(e)?e.forEach((e=>t(e.bind(n)))):e&&t(e.bind(n))}if(u&&qe(u,t,"c"),M($e,f),M(Me,d),M(Re,h),M(je,g),M(Ce,v),M(Ae,m),M(Ke,C),M(Be,D),M(Ue,S),M(Ve,b),M(Le,w),M(Fe,A),x(E))if(E.length){const e=t.exposed||(t.exposed={});E.forEach((t=>{Object.defineProperty(e,t,{get:()=>n[t],set:e=>n[t]=e})}))}else t.exposed||(t.exposed={});I&&t.render===p&&(t.render=I),null!=O&&(t.inheritAttrs=O),T&&(t.components=T),P&&(t.directives=P)}function qe(t,e,n){vr(x(t)?t.map((t=>t.bind(e.proxy))):t.bind(e.proxy),e,n)}function ze(t,e,n,r){const o=r.includes(".")?Kr(n,r):()=>n[r];if(D(t)){const n=e[t];k(n)&&Fr(o,n)}else if(k(t))Fr(o,t.bind(n));else if(N(t))if(x(t))t.forEach((t=>ze(t,e,n,r)));else{const r=k(t.handler)?t.handler.bind(n):e[t.handler];k(r)&&Fr(o,r,t)}}function Xe(t){const e=t.type,{mixins:n,extends:r}=e,{mixins:o,optionsCache:s,config:{optionMergeStrategies:i}}=t.appContext,a=s.get(e);let l;return a?l=a:o.length||n||r?(l={},o.length&&o.forEach((t=>Ye(l,t,i,!0))),Ye(l,e,i)):l=e,s.set(e,l),l}function Ye(t,e,n,r=!1){const{mixins:o,extends:s}=e;s&&Ye(t,s,n,!0),o&&o.forEach((e=>Ye(t,e,n,!0)));for(const i in e)if(r&&"expose"===i);else{const r=Ge[i]||n&&n[i];t[i]=r?r(t[i],e[i]):e[i]}return t}const Ge={data:Je,props:tn,emits:tn,methods:tn,computed:tn,beforeCreate:Qe,created:Qe,beforeMount:Qe,mounted:Qe,beforeUpdate:Qe,updated:Qe,beforeDestroy:Qe,beforeUnmount:Qe,destroyed:Qe,unmounted:Qe,activated:Qe,deactivated:Qe,errorCaptured:Qe,serverPrefetch:Qe,components:tn,directives:tn,watch:function(t,e){if(!t)return e;if(!e)return t;const n=m(Object.create(null),t);for(const r in e)n[r]=Qe(t[r],e[r]);return n},provide:Je,inject:function(t,e){return tn(Ze(t),Ze(e))}};function Je(t,e){return e?t?function(){return m(k(t)?t.call(this,this):t,k(e)?e.call(this,this):e)}:e:t}function Ze(t){if(x(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function Qe(t,e){return t?[...new Set([].concat(t,e))]:e}function tn(t,e){return t?m(m(Object.create(null),t),e):e}function en(t,e,n,r=!1){const o={},s={};K(s,Un,1),t.propsDefaults=Object.create(null),nn(t,e,o,s);for(const i in t.propsOptions[0])i in o||(o[i]=void 0);n?t.props=r?o:ne(o,!1,Nt,zt,Gt):t.type.props?t.props=o:t.props=s,t.attrs=s}function nn(t,e,n,r){const[o,s]=t.propsOptions;let i,a=!1;if(e)for(let l in e){if(P(l))continue;const c=e[l];let u;o&&_(o,u=R(l))?s&&s.includes(u)?(i||(i={}))[u]=c:n[u]=c:me(t.emitsOptions,l)||l in r&&c===r[l]||(r[l]=c,a=!0)}if(s){const e=ie(n),r=i||u;for(let i=0;i<s.length;i++){const a=s[i];n[a]=rn(o,e,a,r[a],t,!_(r,a))}}return a}function rn(t,e,n,r,o,s){const i=t[n];if(null!=i){const t=_(i,"default");if(t&&void 0===r){const t=i.default;if(i.type!==Function&&k(t)){const{propsDefaults:s}=o;n in s?r=s[n]:(lr(o),r=s[n]=t.call(null,e),cr())}else r=t}i[0]&&(s&&!t?r=!1:!i[1]||""!==r&&r!==V(n)||(r=!0))}return r}function on(t,e,n=!1){const r=e.propsCache,o=r.get(t);if(o)return o;const s=t.props,i={},a=[];let l=!1;if(!k(t)){const r=t=>{l=!0;const[n,r]=on(t,e,!0);m(i,n),r&&a.push(...r)};!n&&e.mixins.length&&e.mixins.forEach(r),t.extends&&r(t.extends),t.mixins&&t.mixins.forEach(r)}if(!s&&!l)return r.set(t,f),f;if(x(s))for(let f=0;f<s.length;f++){const t=R(s[f]);sn(t)&&(i[t]=u)}else if(s)for(const u in s){const t=R(u);if(sn(t)){const e=s[u],n=i[t]=x(e)||k(e)?{type:e}:e;if(n){const e=cn(Boolean,n.type),r=cn(String,n.type);n[0]=e>-1,n[1]=r<0||e<r,(e>-1||_(n,"default"))&&a.push(t)}}}const c=[i,a];return r.set(t,c),c}function sn(t){return"$"!==t[0]}function an(t){const e=t&&t.toString().match(/^\s*function (\w+)/);return e?e[1]:null===t?"null":""}function ln(t,e){return an(t)===an(e)}function cn(t,e){return x(e)?e.findIndex((e=>ln(e,t))):k(e)&&ln(e,t)?0:-1}const un=t=>"_"===t[0]||"$stable"===t,fn=t=>x(t)?t.map(Yn):[Yn(t)],pn=(t,e,n)=>{const r=function(t,e=ye,n){if(!e)return t;if(t._n)return t;const r=(...n)=>{r._d&&Mn(-1);const o=_e(e),s=t(...n);return _e(o),r._d&&Mn(1),s};return r._n=!0,r._c=!0,r._d=!0,r}(((...t)=>fn(e(...t))),n);return r._c=!1,r},dn=(t,e,n)=>{const r=t._ctx;for(const o in t){if(un(o))continue;const n=t[o];if(k(n))e[o]=pn(0,n,r);else if(null!=n){const t=fn(n);e[o]=()=>t}}},hn=(t,e)=>{const n=fn(e);t.slots.default=()=>n};function gn(t,e,n,r){const o=t.dirs,s=e&&e.dirs;for(let i=0;i<o.length;i++){const a=o[i];s&&(a.oldValue=s[i].value);let l=a.dir[r];l&&(ct(),vr(l,n,8,[t.el,a,t,e]),ut())}}function vn(){return{app:null,config:{isNativeTag:d,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let mn=0;function yn(t,e){return function(n,r=null){null==r||N(r)||(r=null);const o=vn(),s=new Set;let i=!1;const a=o.app={_uid:mn++,_component:n,_props:r,_container:null,_context:o,_instance:null,version:Wr,get config(){return o.config},set config(t){},use:(t,...e)=>(s.has(t)||(t&&k(t.install)?(s.add(t),t.install(a,...e)):k(t)&&(s.add(t),t(a,...e))),a),mixin:t=>(o.mixins.includes(t)||o.mixins.push(t),a),component:(t,e)=>e?(o.components[t]=e,a):o.components[t],directive:(t,e)=>e?(o.directives[t]=e,a):o.directives[t],mount(s,l,c){if(!i){const u=Wn(n,r);return u.appContext=o,l&&e?e(u,s):t(u,s,c),i=!0,a._container=s,s.__vue_app__=a,hr(u.component)||u.component.proxy}},unmount(){i&&(t(null,a._container),delete a._container.__vue_app__)},provide:(t,e)=>(o.provides[t]=e,a)};return a}}function bn(t,e,n,r,o=!1){if(x(t))return void t.forEach(((t,s)=>bn(t,e&&(x(e)?e[s]:e),n,r,o)));if(Se(r)&&!o)return;const s=4&r.shapeFlag?hr(r.component)||r.component.proxy:r.el,i=o?null:s,{i:a,r:l}=t,c=e&&e.r,f=a.refs===u?a.refs={}:a.refs,p=a.setupState;if(null!=c&&c!==l&&(D(c)?(f[c]=null,_(p,c)&&(p[c]=null)):ue(c)&&(c.value=null)),k(l))gr(l,a,12,[i,f]);else{const e=D(l),r=ue(l);if(e||r){const r=()=>{if(t.f){const n=e?f[l]:l.value;o?x(n)&&y(n,s):x(n)?n.includes(s)||n.push(s):e?f[l]=[s]:(l.value=[s],t.k&&(f[t.k]=l.value))}else e?(f[l]=i,_(p,l)&&(p[l]=i)):ue(l)&&(l.value=i,t.k&&(f[t.k]=i))};i?(r.id=-1,_n(r,n)):r()}}}const _n=function(t,e){e&&e.pendingBranch?x(t)?e.effects.push(...t):e.effects.push(t):$r(t,Sr,Dr,Nr)};function xn(t){return function(t,e){(W||(W="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{})).__VUE__=!0;const{insert:n,remove:r,patchProp:o,createElement:s,createText:i,createComment:a,setText:l,setElementText:c,parentNode:d,nextSibling:h,setScopeId:g=p,cloneNode:v,insertStaticContent:y}=t,b=(t,e,n,r=null,o=null,s=null,i=!1,a=null,l=!!e.dynamicChildren)=>{if(t===e)return;t&&!Fn(t,e)&&(r=nt(t),J(t,o,s,!0),t=null),-2===e.patchFlag&&(l=!1,e.dynamicChildren=null);const{type:c,ref:u,shapeFlag:f}=e;switch(c){case Cn:x(t,e,n,r);break;case An:w(t,e,n,r);break;case En:null==t&&I(e,n,r,i);break;case Nn:M(t,e,n,r,o,s,i,a,l);break;default:1&f?S(t,e,n,r,o,s,i,a,l):6&f?j(t,e,n,r,o,s,i,a,l):(64&f||128&f)&&c.process(t,e,n,r,o,s,i,a,l,ot)}null!=u&&o&&bn(u,t&&t.ref,s,e||t,!e)},x=(t,e,r,o)=>{if(null==t)n(e.el=i(e.children),r,o);else{const n=e.el=t.el;e.children!==t.children&&l(n,e.children)}},w=(t,e,r,o)=>{null==t?n(e.el=a(e.children||""),r,o):e.el=t.el},I=(t,e,n,r)=>{[t.el,t.anchor]=y(t.children,e,n,r)},k=({el:t,anchor:e},r,o)=>{let s;for(;t&&t!==e;)s=h(t),n(t,r,o),t=s;n(e,r,o)},D=({el:t,anchor:e})=>{let n;for(;t&&t!==e;)n=h(t),r(t),t=n;r(e)},S=(t,e,n,r,o,s,i,a,l)=>{i=i||"svg"===e.type,null==t?N(e,n,r,o,s,i,a,l):O(t,e,o,s,i,a,l)},N=(t,e,r,i,a,l,u,f)=>{let p,d;const{type:h,props:g,shapeFlag:m,transition:y,patchFlag:b,dirs:_}=t;if(t.el&&void 0!==v&&-1===b)p=t.el=v(t.el);else{if(p=t.el=s(t.type,l,g&&g.is,g),8&m?c(p,t.children):16&m&&E(t.children,p,null,i,a,l&&"foreignObject"!==h,u,f),_&&gn(t,null,i,"created"),g){for(const e in g)"value"===e||P(e)||o(p,e,null,g[e],l,t.children,i,a,et);"value"in g&&o(p,"value",null,g.value),(d=g.onVnodeBeforeMount)&&Zn(d,i,t)}A(p,t,t.scopeId,u,i)}_&&gn(t,null,i,"beforeMount");const x=(!a||a&&!a.pendingBranch)&&y&&!y.persisted;x&&y.beforeEnter(p),n(p,e,r),((d=g&&g.onVnodeMounted)||x||_)&&_n((()=>{d&&Zn(d,i,t),x&&y.enter(p),_&&gn(t,null,i,"mounted")}),a)},A=(t,e,n,r,o)=>{if(n&&g(t,n),r)for(let s=0;s<r.length;s++)g(t,r[s]);if(o){if(e===o.subTree){const e=o.vnode;A(t,e,e.scopeId,e.slotScopeIds,o.parent)}}},E=(t,e,n,r,o,s,i,a,l=0)=>{for(let c=l;c<t.length;c++){const l=t[c]=a?Gn(t[c]):Yn(t[c]);b(null,l,e,n,r,o,s,i,a)}},O=(t,e,n,r,s,i,a)=>{const l=e.el=t.el;let{patchFlag:f,dynamicChildren:p,dirs:d}=e;f|=16&t.patchFlag;const h=t.props||u,g=e.props||u;let v;n&&wn(n,!1),(v=g.onVnodeBeforeUpdate)&&Zn(v,n,e,t),d&&gn(e,t,n,"beforeUpdate"),n&&wn(n,!0);const m=s&&"foreignObject"!==e.type;if(p?T(t.dynamicChildren,p,l,n,r,m,i):a||q(t,e,l,null,n,r,m,i,!1),f>0){if(16&f)$(l,e,h,g,n,r,s);else if(2&f&&h.class!==g.class&&o(l,"class",null,g.class,s),4&f&&o(l,"style",h.style,g.style,s),8&f){const i=e.dynamicProps;for(let e=0;e<i.length;e++){const a=i[e],c=h[a],u=g[a];u===c&&"value"!==a||o(l,a,c,u,s,t.children,n,r,et)}}1&f&&t.children!==e.children&&c(l,e.children)}else a||null!=p||$(l,e,h,g,n,r,s);((v=g.onVnodeUpdated)||d)&&_n((()=>{v&&Zn(v,n,e,t),d&&gn(e,t,n,"updated")}),r)},T=(t,e,n,r,o,s,i)=>{for(let a=0;a<e.length;a++){const l=t[a],c=e[a],u=l.el&&(l.type===Nn||!Fn(l,c)||70&l.shapeFlag)?d(l.el):n;b(l,c,u,null,r,o,s,i,!0)}},$=(t,e,n,r,s,i,a)=>{if(n!==r){for(const l in r){if(P(l))continue;const c=r[l],u=n[l];c!==u&&"value"!==l&&o(t,l,u,c,a,e.children,s,i,et)}if(n!==u)for(const l in n)P(l)||l in r||o(t,l,n[l],null,a,e.children,s,i,et);"value"in r&&o(t,"value",n.value,r.value)}},M=(t,e,r,o,s,a,l,c,u)=>{const f=e.el=t?t.el:i(""),p=e.anchor=t?t.anchor:i("");let{patchFlag:d,dynamicChildren:h,slotScopeIds:g}=e;g&&(c=c?c.concat(g):g),null==t?(n(f,r,o),n(p,r,o),E(e.children,r,p,s,a,l,c,u)):d>0&&64&d&&h&&t.dynamicChildren?(T(t.dynamicChildren,h,r,s,a,l,c),(null!=e.key||s&&e===s.subTree)&&In(t,e,!0)):q(t,e,r,p,s,a,l,c,u)},j=(t,e,n,r,o,s,i,a,l)=>{e.slotScopeIds=a,null==t?512&e.shapeFlag?o.ctx.activate(e,n,r,i,l):L(e,n,r,o,s,i,l):F(t,e,l)},L=(t,e,n,r,o,s,i)=>{const a=t.component=function(t,e,n){const r=t.type,o=(e?e.appContext:t.appContext)||sr,s={uid:ir++,vnode:t,type:r,parent:e,appContext:o,root:null,next:null,subTree:null,effect:null,update:null,scope:new X(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(o.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:on(r,o),emitsOptions:ve(r,o),emit:null,emitted:null,propsDefaults:u,inheritAttrs:r.inheritAttrs,ctx:u,data:u,props:u,attrs:u,slots:u,refs:u,setupState:u,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};s.ctx={_:s},s.root=e?e.root:s,s.emit=ge.bind(null,s),t.ce&&t.ce(s);return s}(t,r,o);if(Ne(t)&&(a.ctx.renderer=ot),function(t,e=!1){fr=e;const{props:n,children:r}=t.vnode,o=ur(t);en(t,n,o,e),((t,e)=>{if(32&t.vnode.shapeFlag){const n=e._;n?(t.slots=ie(e),K(e,"_",n)):dn(e,t.slots={})}else t.slots={},e&&hn(t,e);K(t.slots,Un,1)})(t,r);const s=o?function(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=ae(new Proxy(t.ctx,or));const{setup:r}=n;if(r){const n=t.setupContext=r.length>1?function(t){const e=e=>{t.exposed=e||{}};let n;return{get attrs(){return n||(n=function(t){return new Proxy(t.attrs,{get:(e,n)=>(ft(t,0,"$attrs"),e[n])})}(t))},slots:t.slots,emit:t.emit,expose:e}}(t):null;lr(t),ct();const o=gr(r,t,0,[t.props,n]);if(ut(),cr(),C(o)){if(o.then(cr,cr),e)return o.then((n=>{pr(t,n,e)})).catch((e=>{mr(e,t,0)}));t.asyncDep=o}else pr(t,o,e)}else dr(t,e)}(t,e):void 0;fr=!1}(a),a.asyncDep){if(o&&o.registerDep(a,U),!t.el){const t=a.subTree=Wn(An);w(null,t,e,n)}}else U(a,t,e,n,o,s,i)},F=(t,e,n)=>{const r=e.component=t.component;if(function(t,e,n){const{props:r,children:o,component:s}=t,{props:i,children:a,patchFlag:l}=e,c=s.emitsOptions;if(e.dirs||e.transition)return!0;if(!(n&&l>=0))return!(!o&&!a||a&&a.$stable)||r!==i&&(r?!i||ke(r,i,c):!!i);if(1024&l)return!0;if(16&l)return r?ke(r,i,c):!!i;if(8&l){const t=e.dynamicProps;for(let e=0;e<t.length;e++){const n=t[e];if(i[n]!==r[n]&&!me(c,n))return!0}}return!1}(t,e,n)){if(r.asyncDep&&!r.asyncResolved)return void H(r,e,n);r.next=e,function(t){const e=_r.indexOf(t);e>xr&&_r.splice(e,1)}(r.update),r.update()}else e.component=t.component,e.el=t.el,r.vnode=e},U=(t,e,n,r,o,s,i)=>{const a=()=>{if(t.isMounted){let e,{next:n,bu:r,u:a,parent:l,vnode:c}=t,u=n;wn(t,!1),n?(n.el=c.el,H(t,n,i)):n=c,r&&B(r),(e=n.props&&n.props.onVnodeBeforeUpdate)&&Zn(e,l,n,c),wn(t,!0);const f=xe(t),p=t.subTree;t.subTree=f,b(p,f,d(p.el),nt(p),t,o,s),n.el=f.el,null===u&&function({vnode:t,parent:e},n){for(;e&&e.subTree===t;)(t=e.vnode).el=n,e=e.parent}(t,f.el),a&&_n(a,o),(e=n.props&&n.props.onVnodeUpdated)&&_n((()=>Zn(e,l,n,c)),o)}else{let i;const{el:a,props:l}=e,{bm:c,m:u,parent:f}=t,p=Se(e);if(wn(t,!1),c&&B(c),!p&&(i=l&&l.onVnodeBeforeMount)&&Zn(i,f,e),wn(t,!0),a&&at){const n=()=>{t.subTree=xe(t),at(a,t.subTree,t,o,null)};p?e.type.__asyncLoader().then((()=>!t.isUnmounted&&n())):n()}else{const i=t.subTree=xe(t);b(null,i,n,r,t,o,s),e.el=i.el}if(u&&_n(u,o),!p&&(i=l&&l.onVnodeMounted)){const t=e;_n((()=>Zn(i,f,t)),o)}256&e.shapeFlag&&t.a&&_n(t.a,o),t.isMounted=!0,e=n=r=null}},l=t.effect=new st(a,(()=>Tr(t.update)),t.scope),c=t.update=l.run.bind(l);c.id=t.uid,wn(t,!0),c()},H=(t,e,n)=>{e.component=t;const r=t.vnode.props;t.vnode=e,t.next=null,function(t,e,n,r){const{props:o,attrs:s,vnode:{patchFlag:i}}=t,a=ie(o),[l]=t.propsOptions;let c=!1;if(!(r||i>0)||16&i){let r;nn(t,e,o,s)&&(c=!0);for(const s in a)e&&(_(e,s)||(r=V(s))!==s&&_(e,r))||(l?!n||void 0===n[s]&&void 0===n[r]||(o[s]=rn(l,a,s,void 0,t,!0)):delete o[s]);if(s!==a)for(const t in s)e&&_(e,t)||(delete s[t],c=!0)}else if(8&i){const n=t.vnode.dynamicProps;for(let r=0;r<n.length;r++){let i=n[r];const u=e[i];if(l)if(_(s,i))u!==s[i]&&(s[i]=u,c=!0);else{const e=R(i);o[e]=rn(l,a,e,u,t,!1)}else u!==s[i]&&(s[i]=u,c=!0)}}c&&ht(t,"set","$attrs")}(t,e.props,r,n),((t,e,n)=>{const{vnode:r,slots:o}=t;let s=!0,i=u;if(32&r.shapeFlag){const t=e._;t?n&&1===t?s=!1:(m(o,e),n||1!==t||delete o._):(s=!e.$stable,dn(e,o)),i=e}else e&&(hn(t,e),i={default:1});if(s)for(const a in o)un(a)||a in i||delete o[a]})(t,e.children,n),ct(),Mr(void 0,t.update),ut()},q=(t,e,n,r,o,s,i,a,l=!1)=>{const u=t&&t.children,f=t?t.shapeFlag:0,p=e.children,{patchFlag:d,shapeFlag:h}=e;if(d>0){if(128&d)return void Y(u,p,n,r,o,s,i,a,l);if(256&d)return void z(u,p,n,r,o,s,i,a,l)}8&h?(16&f&&et(u,o,s),p!==u&&c(n,p)):16&f?16&h?Y(u,p,n,r,o,s,i,a,l):et(u,o,s,!0):(8&f&&c(n,""),16&h&&E(p,n,r,o,s,i,a,l))},z=(t,e,n,r,o,s,i,a,l)=>{e=e||f;const c=(t=t||f).length,u=e.length,p=Math.min(c,u);let d;for(d=0;d<p;d++){const r=e[d]=l?Gn(e[d]):Yn(e[d]);b(t[d],r,n,null,o,s,i,a,l)}c>u?et(t,o,s,!0,!1,p):E(e,n,r,o,s,i,a,l,p)},Y=(t,e,n,r,o,s,i,a,l)=>{let c=0;const u=e.length;let p=t.length-1,d=u-1;for(;c<=p&&c<=d;){const r=t[c],u=e[c]=l?Gn(e[c]):Yn(e[c]);if(!Fn(r,u))break;b(r,u,n,null,o,s,i,a,l),c++}for(;c<=p&&c<=d;){const r=t[p],c=e[d]=l?Gn(e[d]):Yn(e[d]);if(!Fn(r,c))break;b(r,c,n,null,o,s,i,a,l),p--,d--}if(c>p){if(c<=d){const t=d+1,f=t<u?e[t].el:r;for(;c<=d;)b(null,e[c]=l?Gn(e[c]):Yn(e[c]),n,f,o,s,i,a,l),c++}}else if(c>d)for(;c<=p;)J(t[c],o,s,!0),c++;else{const h=c,g=c,v=new Map;for(c=g;c<=d;c++){const t=e[c]=l?Gn(e[c]):Yn(e[c]);null!=t.key&&v.set(t.key,c)}let m,y=0;const _=d-g+1;let x=!1,w=0;const I=new Array(_);for(c=0;c<_;c++)I[c]=0;for(c=h;c<=p;c++){const r=t[c];if(y>=_){J(r,o,s,!0);continue}let u;if(null!=r.key)u=v.get(r.key);else for(m=g;m<=d;m++)if(0===I[m-g]&&Fn(r,e[m])){u=m;break}void 0===u?J(r,o,s,!0):(I[u-g]=c+1,u>=w?w=u:x=!0,b(r,e[u],n,null,o,s,i,a,l),y++)}const k=x?function(t){const e=t.slice(),n=[0];let r,o,s,i,a;const l=t.length;for(r=0;r<l;r++){const l=t[r];if(0!==l){if(o=n[n.length-1],t[o]<l){e[r]=o,n.push(r);continue}for(s=0,i=n.length-1;s<i;)a=s+i>>1,t[n[a]]<l?s=a+1:i=a;l<t[n[s]]&&(s>0&&(e[r]=n[s-1]),n[s]=r)}}s=n.length,i=n[s-1];for(;s-- >0;)n[s]=i,i=e[i];return n}(I):f;for(m=k.length-1,c=_-1;c>=0;c--){const t=g+c,f=e[t],p=t+1<u?e[t+1].el:r;0===I[c]?b(null,f,n,p,o,s,i,a,l):x&&(m<0||c!==k[m]?G(f,n,p,2):m--)}}},G=(t,e,r,o,s=null)=>{const{el:i,type:a,transition:l,children:c,shapeFlag:u}=t;if(6&u)return void G(t.component.subTree,e,r,o);if(128&u)return void t.suspense.move(e,r,o);if(64&u)return void a.move(t,e,r,ot);if(a===Nn){n(i,e,r);for(let t=0;t<c.length;t++)G(c[t],e,r,o);return void n(t.anchor,e,r)}if(a===En)return void k(t,e,r);if(2!==o&&1&u&&l)if(0===o)l.beforeEnter(i),n(i,e,r),_n((()=>l.enter(i)),s);else{const{leave:t,delayLeave:o,afterLeave:s}=l,a=()=>n(i,e,r),c=()=>{t(i,(()=>{a(),s&&s()}))};o?o(i,a,c):c()}else n(i,e,r)},J=(t,e,n,r=!1,o=!1)=>{const{type:s,props:i,ref:a,children:l,dynamicChildren:c,shapeFlag:u,patchFlag:f,dirs:p}=t;if(null!=a&&bn(a,null,n,t,!0),256&u)return void e.ctx.deactivate(t);const d=1&u&&p,h=!Se(t);let g;if(h&&(g=i&&i.onVnodeBeforeUnmount)&&Zn(g,e,t),6&u)tt(t.component,n,r);else{if(128&u)return void t.suspense.unmount(n,r);d&&gn(t,null,e,"beforeUnmount"),64&u?t.type.remove(t,e,n,o,ot,r):c&&(s!==Nn||f>0&&64&f)?et(c,e,n,!1,!0):(s===Nn&&384&f||!o&&16&u)&&et(l,e,n),r&&Z(t)}(h&&(g=i&&i.onVnodeUnmounted)||d)&&_n((()=>{g&&Zn(g,e,t),d&&gn(t,null,e,"unmounted")}),n)},Z=t=>{const{type:e,el:n,anchor:o,transition:s}=t;if(e===Nn)return void Q(n,o);if(e===En)return void D(t);const i=()=>{r(n),s&&!s.persisted&&s.afterLeave&&s.afterLeave()};if(1&t.shapeFlag&&s&&!s.persisted){const{leave:e,delayLeave:r}=s,o=()=>e(n,i);r?r(t.el,i,o):o()}else i()},Q=(t,e)=>{let n;for(;t!==e;)n=h(t),r(t),t=n;r(e)},tt=(t,e,n)=>{const{bum:r,scope:o,update:s,subTree:i,um:a}=t;r&&B(r),o.stop(),s&&(s.active=!1,J(i,t,e,n)),a&&_n(a,e),_n((()=>{t.isUnmounted=!0}),e),e&&e.pendingBranch&&!e.isUnmounted&&t.asyncDep&&!t.asyncResolved&&t.suspenseId===e.pendingId&&(e.deps--,0===e.deps&&e.resolve())},et=(t,e,n,r=!1,o=!1,s=0)=>{for(let i=s;i<t.length;i++)J(t[i],e,n,r,o)},nt=t=>6&t.shapeFlag?nt(t.component.subTree):128&t.shapeFlag?t.suspense.next():h(t.anchor||t.el),rt=(t,e,n)=>{null==t?e._vnode&&J(e._vnode,null,null,!0):b(e._vnode||null,t,e,null,null,null,n),Rr(),e._vnode=t},ot={p:b,um:J,m:G,r:Z,mt:L,mc:E,pc:q,pbc:T,n:nt,o:t};let it,at;e&&([it,at]=e(ot));return{render:rt,hydrate:it,createApp:yn(rt,it)}}(t)}function wn({effect:t,update:e},n){t.allowRecurse=e.allowRecurse=n}function In(t,e,n=!1){const r=t.children,o=e.children;if(x(r)&&x(o))for(let s=0;s<r.length;s++){const t=r[s];let e=o[s];1&e.shapeFlag&&!e.dynamicChildren&&((e.patchFlag<=0||32===e.patchFlag)&&(e=o[s]=Gn(o[s]),e.el=t.el),n||In(t,e))}}function kn(t,e){return function(t,e,n=!0,r=!1){const o=ye||ar;if(o){const n=o.type;if("components"===t){const t=function(t){return k(t)&&t.displayName||t.name}(n);if(t&&(t===e||t===R(e)||t===L(R(e))))return n}const s=Sn(o[t]||n[t],e)||Sn(o.appContext[t],e);return!s&&r?n:s}}("components",t,!0,e)||t}const Dn=Symbol();function Sn(t,e){return t&&(t[e]||t[R(e)]||t[L(R(e))])}const Nn=Symbol(void 0),Cn=Symbol(void 0),An=Symbol(void 0),En=Symbol(void 0),On=[];let Tn=null;function Pn(t=!1){On.push(Tn=t?null:[])}let $n=1;function Mn(t){$n+=t}function Rn(t){return t.dynamicChildren=$n>0?Tn||f:null,On.pop(),Tn=On[On.length-1]||null,$n>0&&Tn&&Tn.push(t),t}function jn(t,e,n,r,o,s){return Rn(Hn(t,e,n,r,o,s,!0))}function Vn(t,e,n,r,o){return Rn(Wn(t,e,n,r,o,!0))}function Ln(t){return!!t&&!0===t.__v_isVNode}function Fn(t,e){return t.type===e.type&&t.key===e.key}const Un="__vInternal",Bn=({key:t})=>null!=t?t:null,Kn=({ref:t,ref_key:e,ref_for:n})=>null!=t?D(t)||ue(t)||k(t)?{i:ye,r:t,k:e,f:!!n}:t:null;function Hn(t,e=null,n=null,r=0,o=null,s=(t===Nn?0:1),i=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&Bn(e),ref:e&&Kn(e),scopeId:be,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:s,patchFlag:r,dynamicProps:o,dynamicChildren:null,appContext:null};return a?(Jn(l,n),128&s&&t.normalize(l)):n&&(l.shapeFlag|=D(n)?8:16),$n>0&&!i&&Tn&&(l.patchFlag>0||6&s)&&32!==l.patchFlag&&Tn.push(l),l}const Wn=function(t,e=null,n=null,o=0,s=null,i=!1){t&&t!==Dn||(t=An);if(Ln(t)){const r=qn(t,e,!0);return n&&Jn(r,n),r}l=t,k(l)&&"__vccOpts"in l&&(t=t.__vccOpts);var l;if(e){e=function(t){return t?se(t)||Un in t?m({},t):t:null}(e);let{class:t,style:n}=e;t&&!D(t)&&(e.class=a(t)),N(n)&&(se(n)&&!x(n)&&(n=m({},n)),e.style=r(n))}const c=D(t)?1:(t=>t.__isSuspense)(t)?128:(t=>t.__isTeleport)(t)?64:N(t)?4:k(t)?2:0;return Hn(t,e,n,o,s,c,i,!0)};function qn(t,e,n=!1){const{props:o,ref:s,patchFlag:i,children:l}=t,c=e?function(...t){const e={};for(let n=0;n<t.length;n++){const o=t[n];for(const t in o)if("class"===t)e.class!==o.class&&(e.class=a([e.class,o.class]));else if("style"===t)e.style=r([e.style,o.style]);else if(g(t)){const n=e[t],r=o[t];n===r||x(n)&&n.includes(r)||(e[t]=n?[].concat(n,r):r)}else""!==t&&(e[t]=o[t])}return e}(o||{},e):o;return{__v_isVNode:!0,__v_skip:!0,type:t.type,props:c,key:c&&Bn(c),ref:e&&e.ref?n&&s?x(s)?s.concat(Kn(e)):[s,Kn(e)]:Kn(e):s,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:l,target:t.target,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==Nn?-1===i?16:16|i:i,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:t.transition,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&qn(t.ssContent),ssFallback:t.ssFallback&&qn(t.ssFallback),el:t.el,anchor:t.anchor}}function zn(t=" ",e=0){return Wn(Cn,null,t,e)}function Xn(t="",e=!1){return e?(Pn(),Vn(An,null,t)):Wn(An,null,t)}function Yn(t){return null==t||"boolean"==typeof t?Wn(An):x(t)?Wn(Nn,null,t.slice()):"object"==typeof t?Gn(t):Wn(Cn,null,String(t))}function Gn(t){return null===t.el||t.memo?t:qn(t)}function Jn(t,e){let n=0;const{shapeFlag:r}=t;if(null==e)e=null;else if(x(e))n=16;else if("object"==typeof e){if(65&r){const n=e.default;return void(n&&(n._c&&(n._d=!1),Jn(t,n()),n._c&&(n._d=!0)))}{n=32;const r=e._;r||Un in e?3===r&&ye&&(1===ye.slots._?e._=1:(e._=2,t.patchFlag|=1024)):e._ctx=ye}}else k(e)?(e={default:e,_ctx:ye},n=32):(e=String(e),64&r?(n=16,e=[zn(e)]):n=8);t.children=e,t.shapeFlag|=n}function Zn(t,e,n,r=null){vr(t,e,7,[n,r])}function Qn(t,e,n,r){let o;const s=n&&n[r];if(x(t)||D(t)){o=new Array(t.length);for(let n=0,r=t.length;n<r;n++)o[n]=e(t[n],n,void 0,s&&s[n])}else if("number"==typeof t){o=new Array(t);for(let n=0;n<t;n++)o[n]=e(n+1,n,void 0,s&&s[n])}else if(N(t))if(t[Symbol.iterator])o=Array.from(t,((t,n)=>e(t,n,void 0,s&&s[n])));else{const n=Object.keys(t);o=new Array(n.length);for(let r=0,i=n.length;r<i;r++){const i=n[r];o[r]=e(t[i],i,r,s&&s[r])}}else o=[];return n&&(n[r]=o),o}function tr(t,e,n={},r,o){if(ye.isCE)return Wn("slot","default"===e?null:{name:e},r&&r());let s=t[e];s&&s._c&&(s._d=!1),Pn();const i=s&&er(s(n)),a=Vn(Nn,{key:n.key||`_${e}`},i||(r?r():[]),i&&1===t._?64:-2);return!o&&a.scopeId&&(a.slotScopeIds=[a.scopeId+"-s"]),s&&s._c&&(s._d=!0),a}function er(t){return t.some((t=>!Ln(t)||t.type!==An&&!(t.type===Nn&&!er(t.children))))?t:null}const nr=t=>t?ur(t)?hr(t)||t.proxy:nr(t.parent):null,rr=m(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>nr(t.parent),$root:t=>nr(t.root),$emit:t=>t.emit,$options:t=>Xe(t),$forceUpdate:t=>()=>Tr(t.update),$nextTick:t=>Or.bind(t.proxy),$watch:t=>Br.bind(t)}),or={get({_:t},e){const{ctx:n,setupState:r,data:o,props:s,accessCache:i,type:a,appContext:l}=t;let c;if("$"!==e[0]){const a=i[e];if(void 0!==a)switch(a){case 1:return r[e];case 2:return o[e];case 4:return n[e];case 3:return s[e]}else{if(r!==u&&_(r,e))return i[e]=1,r[e];if(o!==u&&_(o,e))return i[e]=2,o[e];if((c=t.propsOptions[0])&&_(c,e))return i[e]=3,s[e];if(n!==u&&_(n,e))return i[e]=4,n[e];He&&(i[e]=0)}}const f=rr[e];let p,d;return f?("$attrs"===e&&ft(t,0,e),f(t)):(p=a.__cssModules)&&(p=p[e])?p:n!==u&&_(n,e)?(i[e]=4,n[e]):(d=l.config.globalProperties,_(d,e)?d[e]:void 0)},set({_:t},e,n){const{data:r,setupState:o,ctx:s}=t;if(o!==u&&_(o,e))o[e]=n;else if(r!==u&&_(r,e))r[e]=n;else if(_(t.props,e))return!1;return("$"!==e[0]||!(e.slice(1)in t))&&(s[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:r,appContext:o,propsOptions:s}},i){let a;return!!n[i]||t!==u&&_(t,i)||e!==u&&_(e,i)||(a=s[0])&&_(a,i)||_(r,i)||_(rr,i)||_(o.config.globalProperties,i)}},sr=vn();let ir=0;let ar=null;const lr=t=>{ar=t,t.scope.on()},cr=()=>{ar&&ar.scope.off(),ar=null};function ur(t){return 4&t.vnode.shapeFlag}let fr=!1;function pr(t,e,n){k(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:N(e)&&(t.setupState=pe(e)),dr(t,n)}function dr(t,e,n){const r=t.type;t.render||(t.render=r.render||p),lr(t),ct(),We(t),ut(),cr()}function hr(t){if(t.exposed)return t.exposeProxy||(t.exposeProxy=new Proxy(pe(ae(t.exposed)),{get:(e,n)=>n in e?e[n]:n in rr?rr[n](t):void 0}))}function gr(t,e,n,r){let o;try{o=r?t(...r):t()}catch(s){mr(s,e,n)}return o}function vr(t,e,n,r){if(k(t)){const o=gr(t,e,n,r);return o&&C(o)&&o.catch((t=>{mr(t,e,n)})),o}const o=[];for(let s=0;s<t.length;s++)o.push(vr(t[s],e,n,r));return o}function mr(t,e,n,r=!0){e&&e.vnode;if(e){let r=e.parent;const o=e.proxy,s=n;for(;r;){const e=r.ec;if(e)for(let n=0;n<e.length;n++)if(!1===e[n](t,o,s))return;r=r.parent}const i=e.appContext.config.errorHandler;if(i)return void gr(i,null,10,[t,o,s])}!function(t,e,n,r=!0){console.error(t)}(t,0,0,r)}let yr=!1,br=!1;const _r=[];let xr=0;const wr=[];let Ir=null,kr=0;const Dr=[];let Sr=null,Nr=0;const Cr=Promise.resolve();let Ar=null,Er=null;function Or(t){const e=Ar||Cr;return t?e.then(this?t.bind(this):t):e}function Tr(t){_r.length&&_r.includes(t,yr&&t.allowRecurse?xr+1:xr)||t===Er||(null==t.id?_r.push(t):_r.splice(function(t){let e=xr+1,n=_r.length;for(;e<n;){const r=e+n>>>1;jr(_r[r])<t?e=r+1:n=r}return e}(t.id),0,t),Pr())}function Pr(){yr||br||(br=!0,Ar=Cr.then(Vr))}function $r(t,e,n,r){x(t)?n.push(...t):e&&e.includes(t,t.allowRecurse?r+1:r)||n.push(t),Pr()}function Mr(t,e=null){if(wr.length){for(Er=e,Ir=[...new Set(wr)],wr.length=0,kr=0;kr<Ir.length;kr++)Ir[kr]();Ir=null,kr=0,Er=null,Mr(t,e)}}function Rr(t){if(Dr.length){const t=[...new Set(Dr)];if(Dr.length=0,Sr)return void Sr.push(...t);for(Sr=t,Sr.sort(((t,e)=>jr(t)-jr(e))),Nr=0;Nr<Sr.length;Nr++)Sr[Nr]();Sr=null,Nr=0}}const jr=t=>null==t.id?1/0:t.id;function Vr(t){br=!1,yr=!0,Mr(t),_r.sort(((t,e)=>jr(t)-jr(e)));try{for(xr=0;xr<_r.length;xr++){const t=_r[xr];t&&!1!==t.active&&gr(t,null,14)}}finally{xr=0,_r.length=0,Rr(),yr=!1,Ar=null,(_r.length||wr.length||Dr.length)&&Vr(t)}}const Lr={};function Fr(t,e,n){return Ur(t,e,n)}function Ur(t,e,{immediate:n,deep:r,flush:o,onTrack:s,onTrigger:i}=u){const a=ar;let l,c,f=!1,d=!1;if(ue(t)?(l=()=>t.value,f=!!t._shallow):re(t)?(l=()=>t,r=!0):x(t)?(d=!0,f=t.some(re),l=()=>t.map((t=>ue(t)?t.value:re(t)?Hr(t):k(t)?gr(t,a,2):void 0))):l=k(t)?e?()=>gr(t,a,2):()=>{if(!a||!a.isUnmounted)return c&&c(),vr(t,a,3,[h])}:p,e&&r){const t=l;l=()=>Hr(t())}let h=t=>{c=b.onStop=()=>{gr(t,a,4)}};if(fr)return h=p,e?n&&vr(e,a,3,[l(),d?[]:void 0,h]):l(),p;let g=d?[]:Lr;const v=()=>{if(b.active)if(e){const t=b.run();(r||f||(d?t.some(((t,e)=>U(t,g[e]))):U(t,g)))&&(c&&c(),vr(e,a,3,[t,g===Lr?void 0:g,h]),g=t)}else b.run()};let m;v.allowRecurse=!!e,m="sync"===o?v:"post"===o?()=>_n(v,a&&a.suspense):()=>{!a||a.isMounted?function(t){$r(t,Ir,wr,kr)}(v):v()};const b=new st(l,m);return e?n?v():g=b.run():"post"===o?_n(b.run.bind(b),a&&a.suspense):b.run(),()=>{b.stop(),a&&a.scope&&y(a.scope.effects,b)}}function Br(t,e,n){const r=this.proxy,o=D(t)?t.includes(".")?Kr(r,t):()=>r[t]:t.bind(r,r);let s;k(e)?s=e:(s=e.handler,n=e);const i=ar;lr(this);const a=Ur(o,s.bind(r),n);return i?lr(i):cr(),a}function Kr(t,e){const n=e.split(".");return()=>{let e=t;for(let t=0;t<n.length&&e;t++)e=e[n[t]];return e}}function Hr(t,e){if(!N(t)||t.__v_skip)return t;if((e=e||new Set).has(t))return t;if(e.add(t),ue(t))Hr(t.value,e);else if(x(t))for(let n=0;n<t.length;n++)Hr(t[n],e);else if(I(t)||w(t))t.forEach((t=>{Hr(t,e)}));else if(O(t))for(const n in t)Hr(t[n],e);return t}const Wr="3.2.26",qr="undefined"!=typeof document?document:null,zr=new Map,Xr={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,r)=>{const o=e?qr.createElementNS("http://www.w3.org/2000/svg",t):qr.createElement(t,n?{is:n}:void 0);return"select"===t&&r&&null!=r.multiple&&o.setAttribute("multiple",r.multiple),o},createText:t=>qr.createTextNode(t),createComment:t=>qr.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>qr.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},cloneNode(t){const e=t.cloneNode(!0);return"_value"in t&&(e._value=t._value),e},insertStaticContent(t,e,n,r){const o=n?n.previousSibling:e.lastChild;let s=zr.get(t);if(!s){const e=qr.createElement("template");if(e.innerHTML=r?`<svg>${t}</svg>`:t,s=e.content,r){const t=s.firstChild;for(;t.firstChild;)s.appendChild(t.firstChild);s.removeChild(t)}zr.set(t,s)}return e.insertBefore(s.cloneNode(!0),n),[o?o.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}};const Yr=/\s*!important$/;function Gr(t,e,n){if(x(n))n.forEach((n=>Gr(t,e,n)));else if(e.startsWith("--"))t.setProperty(e,n);else{const r=function(t,e){const n=Zr[e];if(n)return n;let r=R(e);if("filter"!==r&&r in t)return Zr[e]=r;r=L(r);for(let o=0;o<Jr.length;o++){const n=Jr[o]+r;if(n in t)return Zr[e]=n}return e}(t,e);Yr.test(n)?t.setProperty(V(r),n.replace(Yr,""),"important"):t[r]=n}}const Jr=["Webkit","Moz","ms"],Zr={};const Qr="http://www.w3.org/1999/xlink";let to=Date.now,eo=!1;if("undefined"!=typeof window){to()>document.createEvent("Event").timeStamp&&(to=()=>performance.now());const t=navigator.userAgent.match(/firefox\/(\d+)/i);eo=!!(t&&Number(t[1])<=53)}let no=0;const ro=Promise.resolve(),oo=()=>{no=0};function so(t,e,n,r,o=null){const s=t._vei||(t._vei={}),i=s[e];if(r&&i)i.value=r;else{const[n,a]=function(t){let e;if(io.test(t)){let n;for(e={};n=t.match(io);)t=t.slice(0,t.length-n[0].length),e[n[0].toLowerCase()]=!0}return[V(t.slice(2)),e]}(e);if(r){!function(t,e,n,r){t.addEventListener(e,n,r)}(t,n,s[e]=function(t,e){const n=t=>{const r=t.timeStamp||to();(eo||r>=n.attached-1)&&vr(function(t,e){if(x(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map((t=>e=>!e._stopped&&t(e)))}return e}(t,n.value),e,5,[t])};return n.value=t,n.attached=(()=>no||(ro.then(oo),no=to()))(),n}(r,o),a)}else i&&(!function(t,e,n,r){t.removeEventListener(e,n,r)}(t,n,i,a),s[e]=void 0)}}const io=/(?:Once|Passive|Capture)$/;const ao=/^on[a-z]/;const lo=m({patchProp:(t,r,o,s,i=!1,a,l,c,u)=>{"class"===r?function(t,e,n){const r=t._vtc;r&&(e=(e?[e,...r]:[...r]).join(" ")),null==e?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}(t,s,i):"style"===r?function(t,e,n){const r=t.style,o=D(n);if(n&&!o){for(const t in n)Gr(r,t,n[t]);if(e&&!D(e))for(const t in e)null==n[t]&&Gr(r,t,"")}else{const s=r.display;o?e!==n&&(r.cssText=n):e&&t.removeAttribute("style"),"_vod"in t&&(r.display=s)}}(t,o,s):g(r)?v(r)||so(t,r,0,s,l):("."===r[0]?(r=r.slice(1),1):"^"===r[0]?(r=r.slice(1),0):function(t,e,n,r){if(r)return"innerHTML"===e||"textContent"===e||!!(e in t&&ao.test(e)&&k(n));if("spellcheck"===e||"draggable"===e)return!1;if("form"===e)return!1;if("list"===e&&"INPUT"===t.tagName)return!1;if("type"===e&&"TEXTAREA"===t.tagName)return!1;if(ao.test(e)&&D(n))return!1;return e in t}(t,r,s,i))?function(t,e,r,o,s,i,a){if("innerHTML"===e||"textContent"===e)return o&&a(o,s,i),void(t[e]=null==r?"":r);if("value"===e&&"PROGRESS"!==t.tagName&&!t.tagName.includes("-")){t._value=r;const n=null==r?"":r;return t.value===n&&"OPTION"!==t.tagName||(t.value=n),void(null==r&&t.removeAttribute(e))}if(""===r||null==r){const o=typeof t[e];if("boolean"===o)return void(t[e]=n(r));if(null==r&&"string"===o)return t[e]="",void t.removeAttribute(e);if("number"===o){try{t[e]=0}catch(l){}return void t.removeAttribute(e)}}try{t[e]=r}catch(c){}}(t,r,s,a,l,c,u):("true-value"===r?t._trueValue=s:"false-value"===r&&(t._falseValue=s),function(t,r,o,s,i){if(s&&r.startsWith("xlink:"))null==o?t.removeAttributeNS(Qr,r.slice(6,r.length)):t.setAttributeNS(Qr,r,o);else{const s=e(r);null==o||s&&!n(o)?t.removeAttribute(r):t.setAttribute(r,s?"":o)}}(t,r,s,i))}},Xr);let co;const uo=(...t)=>{const e=(co||(co=xn(lo))).createApp(...t),{mount:n}=e;return e.mount=t=>{const r=function(t){if(D(t)){return document.querySelector(t)}return t}(t);if(!r)return;const o=e._component;k(o)||o.render||o.template||(o.template=r.innerHTML),r.innerHTML="";const s=n(r,!1,r instanceof SVGElement);return r instanceof Element&&(r.removeAttribute("v-cloak"),r.setAttribute("data-v-app","")),s},e};function fo(t){return t[t.length-1]}console.assert=(t,e)=>{t||console.log(new Error(e))};const po="0987654321abcdefghijklmnoprstuvyz";function ho(t){return function(t=4){const e=po.length,n=Math.pow(e,t);let r=Math.floor(Math.random()*n);const o=[];for(let s=0;s<t;s+=1)o.push(po[r%e]),r=Math.floor(r/e);return o.join("")}()}function go(t){if(t||(t=document.getSelection()),!(t instanceof Selection))return t;if(t.isCollapsed){const e={node:t.anchorNode,offset:t.anchorOffset};return{start:e,end:e,backwards:!1,collapsed:!0,selection:t}}const e=function(t){if(t.isCollapsed)return!1;if(t.anchorNode===t.focusNode)return t.anchorOffset>t.focusOffset;const e=[t.anchorNode];let n=t.anchorNode;for(;n&&n!=document.body;)n=n.parentNode,e.push(n);for(n=t.focusNode;n&&n!=document.body;){const t=n;let r;n=n.parentNode;for(const o of e){if(n===o)for(const e of o.childNodes){if(e===r)return!1;if(e===t)return!0}r=o}}}(t);return{start:{node:e?t.focusNode:t.anchorNode,offset:e?t.focusOffset:t.anchorOffset},end:{node:e?t.anchorNode:t.focusNode,offset:e?t.anchorOffset:t.focusOffset},backwards:e,collapsed:!1,selection:t}}function vo(t,e,n=[]){if(t&&t.nodeType==Node.TEXT_NODE&&(t=t.parentNode),t&&t.nodeType==Node.ELEMENT_NODE&&(!e||t.nodeName===e)){const e={};for(const r of n){const n=t.attributes["data-"+r];n&&(e[r]=n.nodeValue)}return{node:t,attrs:e}}return{}}function mo(t){return t.nodeType===Node.ELEMENT_NODE?t.childNodes.length>0?t.childNodes[0]:t:t.nodeType===Node.TEXT_NODE?t:void 0}function yo(t,e){const n=e.querySelector(`div[data-id="${t.paragraphID}"]`+(t.spanID?` > span[data-id="${t.spanID}"]`:""));return t.node=n,t}function bo(t,e,n){const r=mo(e.node||yo(e,t).node),o=n&&mo(n.node||yo(n,t).node),s=document.getSelection();s.empty();const i=new Range;i.setStart(r,e.offset),n?i.setEnd(o,n.offset):i.collapse(!0),s.addRange(i)}function _o(t){return t.spans}function xo(t,e){return t.spans=e}function wo(t=""){return{id:ho(),text:t,format:{}}}function Io(t){return{id:ho(),spans:"number"==typeof t?Array.from(Array(t),(()=>wo())):t||[]}}function ko(t,...e){return Object.assign({},t,{format:Object.assign({},t.format||{})},...e)}function Do(t,e,{newid:n,splitTime:r}={newid:ho,splitTime:!1}){const o={id:n(t.id),text:t.text.substr(0,e),format:Object.assign({},t.format)},s={id:n(t.id),text:t.text.substr(e),format:Object.assign({},t.format)};if(r){const e=t.text.replace(/\s*/g,"").length;t.duration>0&&(o.duration=o.text.replace(/\s*/g,"").length*t.duration/e,s.duration=s.text.replace(/\s*/g,"").length*t.duration/e,t.time>=0&&(o.time=t.time,s.time=t.time+o.duration))}else o.time=t.time,s.time=t.time,o.duration=t.duration,s.duration=t.duration,t.group&&t.group.length>0?(o.group=t.group,s.group=t.group):(o.group=t.id,s.group=t.id);return{left:o,right:s}}function So(t,e,n){console.assert(void 0!==t,"data not specified"),console.assert(void 0!==e,"paragraphID not specified");const r=t=>-1===t?void 0:t,o=t;console.assert(void 0!==o,"no paragraphs");const s=r(o.findIndex((t=>t.id===e))),i=void 0!==s&&-1!==s&&o[s]||void 0,a=i&&r(_o(i).findIndex((t=>t.id===n)));return{paragraph:i,paragraphIndex:s,span:void 0!==a&&-1!==a&&_o(i)[a]||void 0,spanIndex:a}}function No(t,e,n){const r=e>=0&&t[e]||void 0,o=r&&_o(r);return{paragraph:r,span:o&&void 0!==n&&o[-1===n||n>=o.length?o.length-1:n]||void 0}}function Co(t,e){console.assert(void 0!==t,"data not specified"),console.assert(void 0!==e,"pointer not specified");const{spanAttrs:n,paragraphAttrs:r}=function(t){let e,n,r,o,s=t;for(;s&&!n;){const{node:t,attrs:i}=vo(s,void 0,["id","time","duration","confidence"]);if(!n&&!e&&t&&"SPAN"===t.nodeName&&i.id)e=i,r=t;else if(!n&&t&&"DIV"===t.nodeName&&i.id){n=i,o=t;break}t&&(s=t),s=s.parentNode}return{spanNode:r,spanAttrs:e,paragraphNode:o,paragraphAttrs:n}}(e.node),o=r&&r.id,s=n&&n.id,i=t,{paragraphIndex:a,paragraph:l,spanIndex:c,span:u}=i&&So(t,o,s)||{};return{node:e.node,spanAttrs:n,paragraphAttrs:r,paragraphID:o,spanID:s,paragraphIndex:a,paragraph:l,spanIndex:c,span:u,offset:e.offset}}function Ao(t,e){!function(t,e){if(e.spanID&&e.paragraphID)return e.node;if(e.paragraphID){const{node:t}=vo(e.node,"DIV",["id"]);return t}}(t,e);let n,r,o,s,{node:i,offset:a}=e;if(i.nodeType===Node.ELEMENT_NODE){a=0;for(let t=e.offset-1;t>=0&&t<i.childNodes.length;t--)a+=i.childNodes.textContent&&i.childNodes[t].textConent.length||0}for(;i&&i!=t;){if(i.nodeType===Node.ELEMENT_NODE){if("SPAN"===i.nodeName){n=i.attributes["data-id"].nodeValue}if("DIV"===i.nodeName){r=i.attributes["data-id"].nodeValue}}let t=i;for(;t=t.previousSibling;){if(!o&&"SPAN"===t.nodeName){if(o=t.attributes["data-id"].nodeValue,!n&&!r)break}if(!s&&"DIV"===t.nodeName){if(s=t.attributes["data-id"].nodeValue,!n&&!r)break}n||r||t.textConent&&(a+=t.textConent.length)}i=i.parentNode}return e.spanID=n,e.paragraphID=r,e.offset=a,e.leftSpanID=o,e.leftParagraphID=s,e}function Eo(t,e){if(console.assert(void 0!==t,"data not specified"),console.assert(void 0!==e,"pointer not specified"),void 0===e.paragraphID&&(void 0===e.paragraphIndex||-1===e.paragraphIndex))return console.assert(void 0!==e.node,"invalid pointer, no paragraph info and no node"),Object.assign(e,Co(t,e));if(void 0===e.paragraphID||void 0!==e.paragraphIndex&&-1!==e.paragraphIndex){if(void 0===e.paragraphID&&(void 0!==e.paragraphIndex||-1!==e.paragraphIndex)){const{paragraph:n,span:r}=No(t,e.paragraphIndex,e.spanIndex);console.assert(n,"paragraph not resolved"),console.assert(void 0!==e.spanIndex&&r||void 0===e.spanIndex||0===_o(t[e.paragraphIndex]).length,"span not resolved, but span index is setZ"),Object.assign(e,{paragraph:n,paragraphID:n.id}),!r||void 0!==e.span&&void 0!==e.spanID||Object.assign(e,{span:r,spanID:r.id})}}else{const{paragraphIndex:n,paragraph:r,spanIndex:o,span:s}=So(t,e.paragraphID,e.spanID);console.assert(r,"paragraph not resolved"),console.assert(e.spanID&&s||void 0===e.spanID,"span not resolved, but span id is set"),Object.assign(e,{paragraphIndex:n,paragraph:r}),void 0!==e.span&&(e.span=s)}if(void 0===e.spanID&&void 0===e.spanIndex){if(e.node)return Object.assign(e,Co(t,e))}else if(void 0!==e.spanID&&void 0===e.spanIndex)Object.assign(e,So(t,e.paragraphID,e.spanID)),console.assert(e.paragraph,"paragraph not resolved"),console.assert(void 0!==e.spanIndex&&e.span,"span not resolved, but span id is setY");else if(void 0===e.spanID&&void 0!==e.spanIndex){const{paragraph:n,span:r}=No(t,e.paragraphIndex,e.spanIndex),o=_o(n);e.spanIndex>=o.length&&o.length>0&&(e.spanIndex=o.length-1,e.offset=o[o.length-1].text.length),console.assert(e.paragraph,"paragraph not resolved"),console.assert(r||0===_o(t[e.paragraphIndex]).length,"span not resolved, but span index is set"),Object.assign(e,{paragraph:n,paragraphID:n.id,span:r,spanID:r&&r.id,spanIndex:r&&e.spanIndex})}if(null!=e.paragraphIndex&&-1!=e.paragraphIndex&&null!=e.spanIndex){const n=_o(t[e.paragraphIndex]);n.length>0&&(-1===e.spanIndex&&(e.spanIndex=n.length-1),e.offset<0&&(e.offset=n[e.spanIndex].text.length+1+e.offset))}return e}function Oo(t,e,n){console.assert(void 0!==t,"data not set"),console.assert(e.paragraphIndex>=0,"pointer paragraphIndex missing or invalid");const r=t;let o=e.paragraphIndex,s=e.spanIndex;if(void 0!==s&&-1!==s)if(s<_o(r[o]).length-1)s++;else{if(!(o<r.length-1))return;o++,s=_o(r[o]).length>0?0:void 0}else{if(!(o<r.length-1))return;o++,s=_o(r[o]).length>0?0:void 0}return void 0===n&&(n=0),Eo(t,{paragraphIndex:o,spanIndex:s,offset:n})}const To=Object.freeze({Remove:1,InPlace:2,Copy:3});function Po(t,e,n,r,o,s=To.Remove){null==e&&(e=0),(null==n||n<0)&&(n=0),(null==r||r>=t.length)&&(r=t.length-1);const i=t[r].text.length;if((void 0===o||o>i)&&(o=i),o<0&&(o=0),n>t[e].text.length&&(n=t[e].text.length),e===r){if(o<n&&(o=n),s===To.Remove){const r=t[e],s=r.text.substring(n,o);r.text=r.text.substring(0,n)+r.text.substring(o);const i=[];return s.length>0&&i.push(ko(r,{text:s})),{spans:i,splitIndex:e,splitOffset:n,removedSpanText:s}}if(s===To.InPlace){const r=t[e];if(0===n&&o>=r.text.length)return{spans:[r],splitIndex:e,splitOffset:n};if(n===o){if(0===n)return{right:r,spans:[],splitIndex:e,splitOffset:n};if(o>=r.text.length)return{left:r,spans:[],splitIndex:e+1,splitOffset:0};{let{left:o,right:s}=Do(r,n);return t.splice(e,1,...[o,s].filter((t=>t.text.length>0))),{left:o,right:s,spans:[],splitIndex:e+1,splitOffset:0}}}if(0===n){let{left:s,right:i}=Do(r,o);return t.splice(e,1,...[s,i].filter((t=>t.text.length>0))),{right:i,spans:[s],splitIndex:e,splitOffset:n}}if(o>=r.text.length){let{left:o,right:s}=Do(r,n);return t.splice(e,1,...[o,s].filter((t=>t.text.length>0))),{left:o,spans:[s],splitIndex:e+1,splitOffset:n}}let{left:s,right:i}=Do(r,n),{left:a,right:l}=Do(i,o-n);return t.splice(e,1,...[s,a,l].filter((t=>t.text.length>0))),{left:s,right:l,spans:[a],splitIndex:e+1,splitOffset:0}}if(s===To.Copy){const r=t[e],s=r.text.substring(n,o),i=[];return s.length>0&&i.push(ko(r,{text:s,group:r.id})),{spans:i,splitIndex:e,splitOffset:n}}}if(r===e+1&&0===o&&n>=t[e].text.length)return{spans:[],splitIndex:e,splitOffset:n};const a=0===n?e:e+1,l=o>=i?r:r-1;if(s===To.Remove){const s=t.splice(a,l+1-a);if(e<a){const r=t[e],{left:o,right:i}=Do(r,n);i.text.length>0&&s.unshift(ko(r,i)),Object.assign(r,o)}if(l<r){const e=t[a],{left:n,right:r}=Do(e,o);n.text.length>0&&s.push(ko(e,n)),Object.assign(e,r)}return{spans:s,splitIndex:e,splitOffset:n}}if(s===To.InPlace){const s=t.slice(a,l+1);if(l<r){const e=t[r];if(o>0&&o<e.text.length){console.log("end offset middle");const{left:n,right:i}=Do(e,o);t.splice(r,1,...[n,i].filter((t=>t.text.length>0))),s.push(n)}else o>0&&s.push(e)}if(e<a){const r=t[e];if(n>0&&n<r.text.length){console.log("start offset middle");const{left:o,right:i}=Do(r,n);s.unshift(i),t.splice(e,1,...[o,i].filter((t=>t.text.length>0))),e++}else 0===n?s.unshift(r):e++}return{spans:s,splitIndex:e,splitOffset:n}}if(s===To.Copy){const s=t.slice(a,l+1);if(e<a){const r=t[e],{left:o,right:i}=Do(r,n);i.text.length>0&&s.unshift(ko(r,i))}if(l<r){const e=t[r],{left:n,right:i}=Do(e,o);n.text.length>0&&s.push(ko(e,n))}return{spans:s,splitIndex:e,splitOffset:n}}}function $o(t,e,n,r=To.Remove){const o=t,s=[];let i;for(let a=e.paragraphIndex;a<o.length&&a<=n.paragraphIndex;){const t=o[a];if(t.id===e.paragraphID&&(i=t),t.id===e.paragraphID&&t.id===n.paragraphID){if(_o(t).length>0){if(r===To.Remove){const o=Po(_o(t),e.spanIndex,e.offset,n.spanIndex,n.offset,r);o.spans.length>0&&s.push({id:t.id,spans:o.spans,partial:e.spanIndex>0||e.offset>0||n.spanIndex<_o(t).length-1||_o(t).length>0&&n.offset<fo(_o(t)).text.length})}else if(r===To.Copy){const o=Po(_o(t),e.spanIndex,e.offset,n.spanIndex,n.offset,r);o.spans.length>0&&s.push({id:t.id,spans:o.spans,partial:e.spanIndex>0||e.offset>0||n.spanIndex<_o(t).length-1||n.offset<fo(_o(t)).text.length})}else if(r===To.InPlace){const o=Po(_o(t),e.spanIndex,e.offset,n.spanIndex,n.offset,r);o.spans.length>0&&s.push({id:t.id,spans:o.spans,partial:e.spanIndex>0||e.offset>0||n.spanIndex<_o(t).length-1||n.offset<fo(_o(t)).text.length})}}else r===To.Remove?(o.splice(a,1),s.push(Object.assign({},t,{partial:!1}))):r===To.Copy?s.push(Object.assign({},t,{partial:!1})):r===To.InPlace&&(o.splice(a,1),s.push(t));break}if(t.id===e.paragraphID&&_o(t).length>0){const n=Po(_o(t),e.spanIndex,e.offset,void 0,void 0,r);0===_o(t).length&&r===To.Remove?o.splice(a,1):a++,n.spans.length>0&&s.push({id:t.id,spans:n.spans,partial:_o(t).length>0})}else{if(t.id===n.paragraphID&&_o(t).length>0){const e=Po(_o(t),0,0,n.spanIndex,n.offset,r);e.spans.length>0&&s.push({id:t.id,spans:e.spans,partial:_o(t).length>0}),_o(i).length>0&&r===To.Remove&&(_o(i).splice(_o(i).length,0,..._o(t)),o.splice(a,1));break}if(t.id===n.paragraphID){r===To.Remove&&o.splice(a,1),s.push(Object.assign({},t,{partial:!1}));break}r===To.Remove?o.splice(a,1):a++,s.push(Object.assign({},t,{partial:!1}))}}return s}function Mo(t,e,n){const r=t,o=n;if(0===o.length)return;if(0===r.length){r.splice(0,0,...n);const e=fo(n);return{start:Eo(t,{paragraphIndex:0,spanIndex:0,offset:0}),end:Eo(t,{paragraphIndex:n.length-1,spanIndex:e.spans.length-1,offset:fo(e.spans).text.length})}}if(1===o.length){const n=_o(o[0]),s=r[e.paragraphIndex];let i,a;if(0===e.offset)_o(s).splice(e.spanIndex,0,...n),i=Eo(t,{paragraphID:e.paragraphID,spanIndex:e.spanIndex,offset:0}),a=Eo(t,{paragraphID:e.paragraphID,spanIndex:e.spanIndex+n.length-1,offset:-1});else if(e.offset===_o(s)[e.spanIndex].text.length)_o(s).splice(e.spanIndex+1,0,...n),i=Eo(t,{paragraphID:e.paragraphID,spanIndex:e.spanIndex+1,offset:0}),a=Eo(t,{paragraphID:e.paragraphID,spanIndex:e.spanIndex+1+n.length-1,offset:-1});else{const{left:r,right:o}=Do(_o(s)[e.spanIndex],e.offset);_o(s).splice(e.spanIndex+1,0,ko(_o(s)[e.spanIndex],o)),Object.assign(_o(s)[e.spanIndex],r),_o(s).splice(e.spanIndex+1,0,...n),i=Eo(t,{paragraphID:e.paragraphID,spanIndex:e.spanIndex+1,offset:0}),a=Eo(t,{paragraphID:e.paragraphID,spanIndex:e.spanIndex+1+n.length-1,offset:-1})}return{start:i,end:a,spans:n}}const s=r[e.paragraphIndex],i=Io();let a,l;if(null!=e.spanIndex&&-1!=e.spanIndex&&_o(s).length>0)if(0===e.offset){xo(i,_o(s).splice(e.spanIndex))}else if(e.offset===_o(s)[e.spanIndex].text.length){xo(i,_o(s).splice(e.spanIndex+1))}else{const t=_o(s).splice(e.spanIndex+1),{left:n,right:r}=Do(_o(s)[e.spanIndex],e.offset);xo(i,t),_o(i).unshift(ko(_o(s)[e.spanIndex],r)),Object.assign(_o(s)[e.spanIndex],n)}_o(o[0]).length>0&&(a={paragraphID:s.id,spanIndex:_o(r[e.paragraphIndex]).length,offset:0}),_o(r[e.paragraphIndex]).splice(_o(r[e.paragraphIndex]).length,0,..._o(o[0]));let c=e.paragraphIndex+1;o.length>2&&(r.splice(c,0,...o.slice(1,o.length-1)),c+=o.length-2),_o(i).splice(0,0,..._o(o[o.length-1])),r.splice(c,0,i),a||(a={paragraphIndex:e.paragraphIndex+1,spanIndex:0,offset:0}),l=Eo(t,{paragraphID:i.id,spanIndex:_o(o[o.length-1]).length-1,offset:-1}),a=Eo(t,a);return{start:a,end:l,spans:n.reduce(((t,e)=>t.concat(_o(e))),[])}}function Ro(t,e){let n=0;for(const r of e)if(n<t.length&&t[n].id===r.id)t[n].text=r.text,n++;else{let e=!1;for(let o=n;o<t.length;o++)if(t[o].id===r.id){t.splice(n,o-n),t[n].text=r.text,n++,e=!0;break}e||(t.splice(n,0,r),n++)}return t.length>n&&t.splice(n),t}function*jo(t,e,n){let r=void 0===e;for(const o of t)if(r||o.id!==e||(r=!0),r&&(yield o,void 0!==n&&o.id===n))return}const Vo={props:{modelValue:Object,time:Number,editable:{type:Boolean,default:!0},showConfidence:{type:Boolean,default:!1}},data:()=>({paragraphs:[],enabled:!0,kk:1}),mounted(){const t=function(t,e,n){let r;return{now(e,...o){if(r=null,!n)return t.apply(e,o)},debounced(o,...s){const i=n&&!r;clearTimeout(r),r=setTimeout((()=>{this.now(o,...s)}),e),i&&t.apply(o,s)}}}(this.applyViewChangesNow,200);this.applyViewChangesNow=(...e)=>t.now(this,...e),this.applyViewChanges=(...e)=>t.debounced(this,...e),this.$options.watch.modelValue.call(this,this.modelValue)},watch:{modelValue(t){this.paragraphs=t.paragraphs||[]},time(t){}},beforeMount(t,e,n,r){},methods:{reset(){console.debug("resetting"),this._.subTree=null,this.$nextTick((()=>{}))},save(){this.$emit("update:modelValue",Object.assign({},this.modelValue,{paragraphs:this.paragraphs}))},download(t,e,n="text/plain"){let r=document.createElement("a");r.setAttribute("href",`data:${n};charset=utf-8,`+encodeURIComponent(e)),r.setAttribute("download",t),r.style.display="none",document.body.appendChild(r),r.click(),document.body.removeChild(r)},asHTML(t){t||(t=this.paragraphs);const e=[];for(const n of t){let t=[];for(const e of n.spans){let n="span";e.format&&(e.format.bold?n="strong":e.format.italic?n="em":e.format.underline?n="u":e.format.subscript?n="sub":e.format.superscript&&(n="sup")),t.push(`<${n}>${e.text}</${n}>`)}t=t.join(""),n.bullet?e.push(`<li>${t}</li>`):e.push(`<p>${t}</p>`)}return e.join("\n")},exportWord(t="document.doc"){const e=`<html xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:w="urn:schemas-microsoft-com:office:word" xmlns="http://www.w3.org/TR/REC-html40">\n      <head><meta charset='utf-8'><title>RUTA exported document</title></head>\n      <body>${this.asHTML()}</body>\n      </html>`;this.download(t,e,"application/vnd.ms-word")},spanSelected(t,e){document.getSelection().isCollapsed&&(console.debug("span selected",t),this.$emit("update:time",t.time))},selectStart(t){console.debug("select start",t)},selectEnd(t){{const t=this.paragraphs,e=go();Eo(t,e.start);if(Eo(t,e.end),e.collapsed)this.$emit("selected");else{const t=e.start.span.time,n=void 0!==e.end.span.time?e.end.span.time+e.end.span.duration||0:void 0;this.$emit("selected",{start:t,end:n})}return}},getSpanSelection(t){const e=this.paragraphs;return Eo(e,(t=go(t)).start),Eo(e,t.end),Array.from(function*(t,e,n){const r=t;let o=!1;for(const s of r){if(e||(o=!0),e&&s.id===e.paragraphID&&n&&s.id===n.paragraphID)return void(yield{paragraph:s,spans:Array.from(jo(s.spans,e.spanID,n.spanID))});if(e&&s.id===e.paragraphID)o=!0,yield{paragraph:s,spans:Array.from(jo(s.spans,e.spanID))};else{if(n&&s.id===n.paragraphID)return void(o&&(yield{paragraph:s,spans:Array.from(jo(s.spans,void 0,n.spanID))}));o&&(yield{paragraph:s,spans:Array.from(s.spans)})}}}(this.paragraphs,t.start,t.end))},toggleStyle(t,e){const n=this.paragraphs;if(e||(e=go()),e.isCollapsed)return;const r=e.start;Eo(n,r);const o=e.end;Eo(n,o);const s=$o(n,r,o,To.InPlace);let i,a,l=!0;for(const c of s)for(const e of c.spans)if(e.format&&e.format[t]){l=!1;break}"subscript"===t?(i="superscript",a=!1):"superscript"===t&&(i="subscript",a=!1);for(const c of s)for(const e of c.spans)Object.assign(e,{format:Object.assign(e.format||{},{[t]:l},i&&{[i]:a}||{}),id:ho()})},toggleBullet(){const t=document.getSelection(),e=this.getSpanSelection(t);let n=!0;for(const r of e)if(r.paragraph.bullet){n=!1;break}for(const r of e)r.paragraph.bullet=n},mapContainerOffsetPointerToData(t,e){if(!e.paragraphID){let n=0;for(const r of t)if(e.leftParagraphID&&r.id===e.leftParagraphID)n=0;else{for(const t of r.spans){if(n<=e.offset&&e.offset<n+t.text.length){e.paragraphID=r.id,e.paragraph=r,e.spanID=t.id,e.span=t,e.offset-=n;break}n+=t.text.length}if(e.offset===n&&r.spans.length>0){e.paragraphID=r.id;const t=r.spans[r.spans.length-1];e.spanID=t.id,e.span=t,e.offset=t.text.length}if(e.paragraphID)break}}if(e.paragraphID&&!e.spanID)for(const n of t){if(n.id!==e.paragraphID)continue;let t=0;for(const r of n.spans)if(e.leftSpanID&&r.id===e.leftSpanID)t=0;else{if(t<=e.offset&&e.offset<t+r.text.length){e.spanID=r.id,e.span=r,e.offset-=t;break}t+=r.text.length}if(e.offset===t&&n.spans.length>0){const t=n.spans[n.spans.length-1];e.spanID=t.id,e.span=t,e.offset=t.text.length}break}return e.node=void 0,Eo(t,e),e},parseDOM(t){let e=this.paragraphs;const n=go(),r=Co(e,n.start),o=Co(e,n.end);r.spanID&&r.paragraphID||Ao(this.$refs.container,r),o.spanID&&o.paragraphID||Ao(this.$refs.container,o);const s=function(t){const e=(t,e)=>{let n=t;return void 0!==n&&(n=n.nodeValue),void 0!==n&&void 0!==e&&(n=e(n)),n},n=[];let r=!1;for(const o of t.childNodes)if(o.nodeType===Node.ELEMENT_NODE)if("DIV"===o.nodeName&&o.attributes["data-id"]){r=!0;const t=[],s={id:o.attributes["data-id"].nodeValue,spans:t};let i;n.push(s);const a=o;for(const n of a.childNodes)if(n.nodeType===Node.ELEMENT_NODE)if("SPAN"===n.nodeName&&n.attributes["data-id"]){const r=n.attributes["data-id"].nodeValue;let o=n.innerText;i&&i.length>0&&(o=i+o,i=void 0);const s=e(n.attributes["data-time"],parseInt),a=e(n.attributes["data-duration"],parseInt),l=e(n.attributes["data-confidence"],parseFloat);t.push({id:r,text:o,time:s,duration:a,confidence:l})}else n.nodeName;else n.nodeType===Node.TEXT_NODE&&(n.nodeValue.length>0&&(t.length>0?t[t.length-1].text+=n.nodeValue.length:i=n.nodeValue),n.nodeValue="");0===t.length&&i&&i.length>0&&t.push(wo(i))}else"BR"===o.nodeName?(console.log("br",o),r=!1,o.remove()):o.remove();else if(o.nodeType===Node.TEXT_NODE&&o.nodeValue.length>0){let t=n.length>0&&r&&n[n.length-1];t||(t={id:ho(),spans:[]},n.push(t)),t.spans.push({id:ho(),text:o.nodeValue}),o.remove()}return n}(this.$refs.container),i=function(t,e){let n=0;for(const r of e)if(n<t.length&&t[n].id===r.id)Ro(_o(t[n]),_o(r)),n++;else{let e=!1;for(let o=n;o<t.length;o++)if(t[o].id===r.id){t.splice(n,o-n),t[n].text=r.text,n++,e=!0;break}e||(t.splice(n,0,r),n++)}return t.length>n&&t.splice(n),t}(this.paragraphs||[],s);return this.paragraphs=i,e=i,this.mapContainerOffsetPointerToData(e,r),this.mapContainerOffsetPointerToData(e,o),t&&this.$nextTick((()=>{bo(this.$refs.container,Eo(e,r),n.collapsed?null:Eo(e,o))})),{paragraphs:i,start:r,end:o,collapsed:n.collapsed}},applyViewChangesNow(t=!0){const{paragraphs:e,start:n,end:r,collapsed:o}=this.parseDOM(t);return this.paragraphs=e,console.debug("debounced",JSON.parse(JSON.stringify(this.paragraphs))),this.save(),{start:n,end:r,collapsed:o}},onInput(t){this.applyViewChanges()},onKeypress(t){},errorCaptured(t,e,n){console.debug("ERROR captured:",t,e,n)},async onKeydown(t){if(console.debug("editable-spans keydown:",t),(t.metaKey||t.ctrlKey)&&"z"===t.key)return t.stopPropagation(),void t.preventDefault();if((t.metaKey||t.ctrlKey)&&("c"===t.key||"v"===t.key||"x"===t.key||"r"===t.key||"Meta"===t.key||"Control"===t.key))return;if("Escape"===t.code||"Tab"===t.code)return;if("ArrowLeft"===t.key||"ArrowRight"===t.key||"ArrowUp"===t.key||"ArrowDown"===t.key)return void t.shiftKey;if("Dead"===t.key)return;let e=document.getSelection();if(!e.isCollapsed&&!t.ctrlKey&&!t.metaKey&&"Alt"!=t.key&&"Shift"!=t.key){"Delete"!==t.key&&"Backspace"!==t.key&&"Enter"!==t.key||(t.stopPropagation(),t.preventDefault());const n=this.paragraphs;e=go(e);const r=e.start;Eo(n,r);const o=e.end;return Eo(n,o),$o(n,r,o),"Enter"===t.key?(Mo(n,r,[Io(),Io()]),void this.$nextTick((()=>{bo(this.$refs.container,yo(Oo(n,r),this.$refs.container))}))):void this.$nextTick((()=>{r.spanID=void 0,r.node=void 0,bo(this.$refs.container,Eo(n,r))}))}if("KeyL"===t.code&&(!0===t.metaKey||!0===t.ctrlKey))return this.toggleBullet(),t.stopPropagation(),t.preventDefault(),!1;if(("KeyL"===t.code||"KeyB"===t.code||"KeyI"===t.code||"KeyU"===t.code||"Digit6"===t.code&&!0===t.shiftKey||"Minus"===t.code&&!0===t.shiftKey)&&(!0===t.ctrlKey||!0===t.metaKey)){let e;"KeyB"===t.code?e="bold":"KeyI"===t.code?e="italic":"KeyU"===t.code?e="underline":"Digit6"===t.code?e="superscript":"Minus"===t.code&&(e="subscript");const n=go();if(!n.collapsed){const t=this.paragraphs;!function(t,e){Eo(t,e.start),Eo(t,e.end),e.start.offsetLeft=e.start.offset,0===e.start.spanIndex||e.start.spanIndex>0&&(e.start.leftSpanIndex=e.start.spanIndex-1,e.start.leftSpanID=_o(e.start.paragraph)[e.start.spanIndex-1].id),e.end.offsetRight=e.end.span.text.length-e.end.offset,e.end.spanIndex>=_o(e.end.paragraph).length||e.end.spanIndex<_o(e.end.paragraph).length-1&&(e.end.rightSpanIndex=e.end.spanIndex+1,e.end.rightSpanID=_o(e.end.paragraph)[e.end.spanIndex+1].id)}(t,n),this.toggleStyle(e,n),n.start.node=void 0,n.end.node=void 0,function(t,e){if(void 0!==e.start.offsetLeft){let t=0;const n=_o(e.start.paragraph);for(let r=void 0===e.start.leftSpanIndex?0:e.start.leftSpanIndex+1;r<n.length;r++){const o=n[r];if(e.start.offsetLeft>=t&&e.start.offsetLeft<=t+o.text.length){e.start.spanIndex=r,e.start.span=o,e.start.spanID=o.id,e.start.offset=e.start.offsetLeft-t;break}t+=o.text.length}delete e.start.offsetLeft,delete e.start.leftSpanIndex,delete e.start.leftSpanID}if(void 0!==e.end.offsetRight){let t=0;const n=_o(e.end.paragraph);for(let r=void 0===e.end.rightSpanIndex?n.length-1:e.end.rightSpanIndex-1;r>=0;r--){const o=n[r];if(e.end.offsetRight>=t&&e.end.offsetRight<=t+o.text.length){e.end.spanIndex=r,e.end.span=o,e.end.spanID=o.id,e.end.offset=o.text.length-(e.end.offsetRight-t);break}t+=o.text.length}delete e.end.offsetRight,delete e.start.rightSpanIndex,delete e.start.rightSpanID}}(0,n),this.$nextTick((()=>{bo(this.$refs.container,n.start,n.end)}))}return t.stopPropagation(),t.preventDefault(),!1}if("Enter"===t.key){if(t.stopPropagation(),t.preventDefault(),this.applyViewChangesNow(),!this.paragraphs)return this.paragraphs=[Io(),Io()],this.applyViewChangesNow(!1),void this.$nextTick((()=>{bo(this.$refs.container,yo(Eo(this.paragraphs,{paragraphIndex:1,offset:0}),this.$refs.container))}));this.$nextTick((()=>{const t=this.paragraphs,e=go();e.collapsed&&(Eo(t,e.start),Mo(t,e.start,[Io(),Io()]),this.$nextTick((()=>{bo(this.$refs.container,yo(Oo(t,e.start),this.$refs.container))})))}))}else if("Backspace"===t.key){const{start:e,end:n,collapsed:r}=this.applyViewChangesNow();if(!r)return void console.debug("warning: range backspace had to be handler elsewhere");if(e.offset>0||e.spanIndex>0)return;t.stopPropagation(),t.preventDefault(),this.$nextTick((()=>{const t=this.paragraphs;this.paragraphs;const e=go().start;Eo(t,e);const n=Eo(t,{paragraphIndex:e.paragraphIndex,spanIndex:0,offset:0});if(e.paragraphIndex>0){const t=this.paragraphs,r=function(t,e,n){console.assert(void 0!==t,"data not set"),console.assert(e.paragraphIndex>=0,"pointer paragraphIndex missing or invalid");const r=t;let o=e.paragraphIndex,s=e.spanIndex;if(void 0!==s&&-1!==s)if(s>0)s--;else{if(!(o>0))return;o--,s=_o(r[o]).length>0?_o(r[o]).length-1:void 0}else{if(!(o>0))return;o--,s=_o(r[o]).length>0?_o(r[o]).length-1:void 0}return void 0===n&&(n=-1),Eo(t,{paragraphIndex:o,spanIndex:s,offset:n})}(t,n),o=$o(t,r,e),s=o.length>0&&o[0].id===r.paragraphID?e:r;this.$nextTick((()=>{s.node=void 0,bo(this.$refs.container,s)}))}}))}else if("Delete"===t.key){const{start:e,end:n,collapsed:r}=this.applyViewChangesNow();if(!r)return console.debug("warning: range deletes must be handled elsewhere"),t.stopPropagation(),void t.preventDefault();if(!e||e.spanIndex<e.paragraph.spans.length-1||e.span&&e.offset<e.span.text.length)return;t.stopPropagation(),t.preventDefault(),this.$nextTick((()=>{const t=this.paragraphs,n=this.paragraphs;if(r){const r=n[e.paragraphIndex].spans,o=Eo(t,{paragraphIndex:e.paragraphIndex,spanIndex:r.length-1,offset:-1});if(e.paragraphIndex<n.length-1){const t=this.paragraphs;0===e.paragraph.spans.length?(t.splice(e.paragraphIndex,1),e.spanIndex=0,e.paragraphID=0):($o(t,e,Oo(t,o)),void 0===e.spanIndex&&void 0===e.spanID&&(e.spanIndex=0)),this.$nextTick((()=>{e.node=void 0,Eo(t,e),bo(this.$refs.container,e)}))}}}))}else if((t.ctrlKey||t.metaKey)&&t.shiftKey&&"KeyH"===t.code){const e=this.getSpanSelection();console.debug("remove highlighting from spans",e);for(const t of e)for(const e of t.spans)e.highlighted=!1;t.preventDefault(),t.stopPropagation()}else if((t.ctrlKey||t.metaKey)&&"KeyH"===t.code){const e=this.getSpanSelection();console.debug("highlight spans",e);for(const t of e)for(const e of t.spans)e.highlighted=!0;t.preventDefault(),t.stopPropagation()}else e.isCollapsed||(console.debug("PREVENT RANGE REPLACE"),t.preventDefault(),t.stopPropagation());return!0},onDragStart(t){t.stopPropagation(),t.preventDefault()},onPaste(t){console.debug("editable-spans paste",t),t.stopPropagation(),t.preventDefault();const{start:e,end:n,collapsed:r}=this.applyViewChangesNow();console.debug("PASTE | DATA",this.paragraphs);const o=t.clipboardData.getData("application/ruta"),s=t.clipboardData.getData("text/html"),i=t.clipboardData.getData("text/plain");if(0===o.length&&0===s.length&&0===i.length)return;const a=this.paragraphs;if(Eo(a,e),!r){const t=this.paragraphs;Eo(t,e),Eo(t,n),$o(t,e,n)}if(o.length>0){const t=JSON.parse(o);for(const e of t){e.id=ho();for(const t of e.spans)t.id=ho()}const n=Mo(a,e,t);this.$nextTick((()=>{bo(this.$refs.container,n.end)}))}else if(s.length>0){const t=document.createElement("html");t.innerHTML=s,console.debug(s);const e=t.querySelector("head > style");if(e){document.implementation.createHTMLDocument("").body.appendChild(e)}const n=t.querySelector("body");console.debug(n);const r=function(t,e){let n=[];if(e)for(const u of e)if(-1===u.selectorText.search(/[#:\[\]>]/g)&&"underline"===u.style.textDecorationLine){const t=u.selectorText.split(",");for(const e of t){const t=e.split(":")[0].split(".");t.shift(),n=t}}const r=[],o=[];let s,i,a={},l=t,c=0;for(;l;){const t=l.childNodes;for(i=t.length;c<i;c++){const e=t[c];if(e.nodeType===Node.TEXT_NODE&&e.nodeValue.length>0){if(0===e.nodeValue.trim().length)continue;s||(s={spans:[],id:ho()},o.push(s)),s.spans.push({text:e.nodeValue,format:Object.assign({},a),id:ho()})}else if(e.nodeType===Node.ELEMENT_NODE){Object.assign({},a);const t=Object.assign({},a);if("B"===e.nodeName||"STRONG"===e.nodeName)a.bold=!0;else if("I"===e.nodeName||"EM"===e.nodeName)a.italic=!0;else if("U"===e.nodeName)a.underline=!0;else if("SUP"===e.nodeName)a.superscript=!0;else if("SUB"===e.nodeName)a.subscript=!0;else if("SPAN"===e.nodeName){for(const r of e.classList)if(-1!==n.indexOf(r)){a.underline=!0;break}}else"P"===e.nodeName?(s={spans:[],id:ho()},o.push(s)):"LI"===e.nodeName&&(s={spans:[],id:ho(),bullet:!0},o.push(s));if(l.childNodes&&l.childNodes.length>0){r.push({node:l,i:c+1,fmt:Object.assign({},t)}),c=0,l=e,i=l.childNodes.length;break}}}if(c>=i){if(!(r.length>0)){l=null;break}{"P"!==l.nodeName&&"LI"!==l.nodeName||(s=void 0);const t=r.pop();c=t.i,l=t.node,a=t.fmt}}}return o}(n,e&&e.sheet.cssRules);console.debug(JSON.stringify(r,void 0,2));const o=go(),i=this.paragraphs,a=o.start;if(Eo(i,a),!o.collapsed){const t=this.paragraphs,e=go(),n=e.start;Eo(t,n);const r=e.end;Eo(t,r),$o(t,n,r)}for(const s of r){s.id=ho();for(const t of s.spans)t.id=ho()}console.debug(i,a,r),Mo(i,a,r)}else i.length>0&&document.execCommand("insertHTML",!1,i)},onCut(t){this.onCopy(t);if(!document.getSelection().isCollapsed){const t=this.paragraphs,e=go(),n=e.start;Eo(t,n);const r=e.end;Eo(t,r),$o(t,n,r)}},onCopy(t){const e=this.paragraphs,n=go();if(!n.isCollapsed){const r=n.start;Eo(e,r);const o=n.end;Eo(e,o);const s=$o(e,r,o,To.Copy);t.clipboardData.setData("application/ruta",JSON.stringify(s));const i=[];for(const t of s){const e=[];for(const n of t.spans)e.push(n.text);i.push(e.join(""))}t.clipboardData.setData("text/plain",i.join("\n")),console.debug("COPY HTML",this.asHTML(s)),t.clipboardData.setData("text/html",this.asHTML(s))}t.stopPropagation(),t.preventDefault()}},errorCaptured:(t,e,n)=>(console.debug("EDITOR ERROR CAPTURED",t,e,n),!0)},Lo=["contenteditable"],Fo=["data-id","contenteditable"],Uo=["data-first","data-last","contenteditable","data-id","data-time","data-duration","data-confidence","onClick","title"];Vo.render=function(t,e,n,o,s,i){return Pn(),jn("div",{style:{border:"1px solid #ccc"},contenteditable:this.editable,spellcheck:"false",v_if:"enabled",key:s.kk,onInput:e[0]||(e[0]=(...t)=>i.onInput&&i.onInput(...t)),onKeydown:e[1]||(e[1]=(...t)=>i.onKeydown&&i.onKeydown(...t)),onPaste:e[2]||(e[2]=(...t)=>i.onPaste&&i.onPaste(...t)),onCut:e[3]||(e[3]=(...t)=>i.onCut&&i.onCut(...t)),onCopy:e[4]||(e[4]=(...t)=>i.onCopy&&i.onCopy(...t)),onSelectstart:e[5]||(e[5]=(...t)=>i.selectStart&&i.selectStart(...t)),onMouseup:e[6]||(e[6]=(...t)=>i.selectEnd&&i.selectEnd(...t)),onDragstart:e[7]||(e[7]=(...t)=>i.onDragStart&&i.onDragStart(...t)),ref:"container",class:"transcript"},[(Pn(!0),jn(Nn,null,Qn(s.paragraphs,((t,e)=>(Pn(),jn("div",{"data-id":t.id,key:t.id,contenteditable:this.editable,class:a([{"list-item":t.bullet},"paragraph"])},[(Pn(!0),jn(Nn,null,Qn(t.spans,((e,o)=>(Pn(),jn("span",{key:e.id,"data-first":0==o,"data-last":o>=t.spans.length-1,contenteditable:this.editable,v_text:"span.text",v_if:"paragraph && paragraph.spans.length > 0","data-id":e.id,"data-time":e.time,"data-duration":e.duration,"data-confidence":e.confidence,class:a(["span token",{selected:e.time<=n.time&&n.time<e.time+e.duration,past:e.time+e.duration<=n.time,highlighted:e.highlighted,bold:e.format&&e.format.bold,italic:e.format&&e.format.italic,underline:e.format&&e.format.underline,superscript:e.format&&e.format.superscript,subscript:e.format&&e.format.subscript}]),onClick:t=>i.spanSelected(e,t),style:r(this.showConfidence?`opacity: ${Math.pow(e.confidence,.5)/2+.5};`:""),title:this.showConfidence?`Confidence: ${e.confidence}`:""},l(e.text),15,Uo)))),128))],10,Fo)))),128))],40,Lo)},Vo.__scopeId="data-v-f246ea9c";var Bo={value:()=>{}};function Ko(){for(var t,e=0,n=arguments.length,r={};e<n;++e){if(!(t=arguments[e]+"")||t in r||/[\s.]/.test(t))throw new Error("illegal type: "+t);r[t]=[]}return new Ho(r)}function Ho(t){this._=t}function Wo(t,e){return t.trim().split(/^|\s+/).map((function(t){var n="",r=t.indexOf(".");if(r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),t&&!e.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:n}}))}function qo(t,e){for(var n,r=0,o=t.length;r<o;++r)if((n=t[r]).name===e)return n.value}function zo(t,e,n){for(var r=0,o=t.length;r<o;++r)if(t[r].name===e){t[r]=Bo,t=t.slice(0,r).concat(t.slice(r+1));break}return null!=n&&t.push({name:e,value:n}),t}Ho.prototype=Ko.prototype={constructor:Ho,on:function(t,e){var n,r=this._,o=Wo(t+"",r),s=-1,i=o.length;if(!(arguments.length<2)){if(null!=e&&"function"!=typeof e)throw new Error("invalid callback: "+e);for(;++s<i;)if(n=(t=o[s]).type)r[n]=zo(r[n],t.name,e);else if(null==e)for(n in r)r[n]=zo(r[n],t.name,null);return this}for(;++s<i;)if((n=(t=o[s]).type)&&(n=qo(r[n],t.name)))return n},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new Ho(t)},call:function(t,e){if((n=arguments.length-2)>0)for(var n,r,o=new Array(n),s=0;s<n;++s)o[s]=arguments[s+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(s=0,n=(r=this._[t]).length;s<n;++s)r[s].value.apply(e,o)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],o=0,s=r.length;o<s;++o)r[o].value.apply(e,n)}};var Xo="http://www.w3.org/1999/xhtml",Yo={svg:"http://www.w3.org/2000/svg",xhtml:Xo,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Go(t){var e=t+="",n=e.indexOf(":");return n>=0&&"xmlns"!==(e=t.slice(0,n))&&(t=t.slice(n+1)),Yo.hasOwnProperty(e)?{space:Yo[e],local:t}:t}function Jo(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===Xo&&e.documentElement.namespaceURI===Xo?e.createElement(t):e.createElementNS(n,t)}}function Zo(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function Qo(t){var e=Go(t);return(e.local?Zo:Jo)(e)}function ts(){}function es(t){return null==t?ts:function(){return this.querySelector(t)}}function ns(t){return null==t?[]:Array.isArray(t)?t:Array.from(t)}function rs(){return[]}function os(t){return null==t?rs:function(){return this.querySelectorAll(t)}}function ss(t){return function(){return this.matches(t)}}function is(t){return function(e){return e.matches(t)}}var as=Array.prototype.find;function ls(){return this.firstElementChild}var cs=Array.prototype.filter;function us(){return Array.from(this.children)}function fs(t){return new Array(t.length)}function ps(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}function ds(t){return function(){return t}}function hs(t,e,n,r,o,s){for(var i,a=0,l=e.length,c=s.length;a<c;++a)(i=e[a])?(i.__data__=s[a],r[a]=i):n[a]=new ps(t,s[a]);for(;a<l;++a)(i=e[a])&&(o[a]=i)}function gs(t,e,n,r,o,s,i){var a,l,c,u=new Map,f=e.length,p=s.length,d=new Array(f);for(a=0;a<f;++a)(l=e[a])&&(d[a]=c=i.call(l,l.__data__,a,e)+"",u.has(c)?o[a]=l:u.set(c,l));for(a=0;a<p;++a)c=i.call(t,s[a],a,s)+"",(l=u.get(c))?(r[a]=l,l.__data__=s[a],u.delete(c)):n[a]=new ps(t,s[a]);for(a=0;a<f;++a)(l=e[a])&&u.get(d[a])===l&&(o[a]=l)}function vs(t){return t.__data__}function ms(t){return"object"==typeof t&&"length"in t?t:Array.from(t)}function ys(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function bs(t){return function(){this.removeAttribute(t)}}function _s(t){return function(){this.removeAttributeNS(t.space,t.local)}}function xs(t,e){return function(){this.setAttribute(t,e)}}function ws(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function Is(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttribute(t):this.setAttribute(t,n)}}function ks(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function Ds(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function Ss(t){return function(){this.style.removeProperty(t)}}function Ns(t,e,n){return function(){this.style.setProperty(t,e,n)}}function Cs(t,e,n){return function(){var r=e.apply(this,arguments);null==r?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function As(t,e){return t.style.getPropertyValue(e)||Ds(t).getComputedStyle(t,null).getPropertyValue(e)}function Es(t){return function(){delete this[t]}}function Os(t,e){return function(){this[t]=e}}function Ts(t,e){return function(){var n=e.apply(this,arguments);null==n?delete this[t]:this[t]=n}}function Ps(t){return t.trim().split(/^|\s+/)}function $s(t){return t.classList||new Ms(t)}function Ms(t){this._node=t,this._names=Ps(t.getAttribute("class")||"")}function Rs(t,e){for(var n=$s(t),r=-1,o=e.length;++r<o;)n.add(e[r])}function js(t,e){for(var n=$s(t),r=-1,o=e.length;++r<o;)n.remove(e[r])}function Vs(t){return function(){Rs(this,t)}}function Ls(t){return function(){js(this,t)}}function Fs(t,e){return function(){(e.apply(this,arguments)?Rs:js)(this,t)}}function Us(){this.textContent=""}function Bs(t){return function(){this.textContent=t}}function Ks(t){return function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}}function Hs(){this.innerHTML=""}function Ws(t){return function(){this.innerHTML=t}}function qs(t){return function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}}function zs(){this.nextSibling&&this.parentNode.appendChild(this)}function Xs(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Ys(){return null}function Gs(){var t=this.parentNode;t&&t.removeChild(this)}function Js(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Zs(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Qs(t){return t.trim().split(/^|\s+/).map((function(t){var e="",n=t.indexOf(".");return n>=0&&(e=t.slice(n+1),t=t.slice(0,n)),{type:t,name:e}}))}function ti(t){return function(){var e=this.__on;if(e){for(var n,r=0,o=-1,s=e.length;r<s;++r)n=e[r],t.type&&n.type!==t.type||n.name!==t.name?e[++o]=n:this.removeEventListener(n.type,n.listener,n.options);++o?e.length=o:delete this.__on}}}function ei(t,e,n){return function(){var r,o=this.__on,s=function(t){return function(e){t.call(this,e,this.__data__)}}(e);if(o)for(var i=0,a=o.length;i<a;++i)if((r=o[i]).type===t.type&&r.name===t.name)return this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=s,r.options=n),void(r.value=e);this.addEventListener(t.type,s,n),r={type:t.type,name:t.name,value:e,listener:s,options:n},o?o.push(r):this.__on=[r]}}function ni(t,e,n){var r=Ds(t),o=r.CustomEvent;"function"==typeof o?o=new o(e,n):(o=r.document.createEvent("Event"),n?(o.initEvent(e,n.bubbles,n.cancelable),o.detail=n.detail):o.initEvent(e,!1,!1)),t.dispatchEvent(o)}function ri(t,e){return function(){return ni(this,t,e)}}function oi(t,e){return function(){return ni(this,t,e.apply(this,arguments))}}ps.prototype={constructor:ps,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}},Ms.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};var si=[null];function ii(t,e){this._groups=t,this._parents=e}function ai(){return new ii([[document.documentElement]],si)}function li(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function ci(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function ui(){}ii.prototype=ai.prototype={constructor:ii,select:function(t){"function"!=typeof t&&(t=es(t));for(var e=this._groups,n=e.length,r=new Array(n),o=0;o<n;++o)for(var s,i,a=e[o],l=a.length,c=r[o]=new Array(l),u=0;u<l;++u)(s=a[u])&&(i=t.call(s,s.__data__,u,a))&&("__data__"in s&&(i.__data__=s.__data__),c[u]=i);return new ii(r,this._parents)},selectAll:function(t){t="function"==typeof t?function(t){return function(){return ns(t.apply(this,arguments))}}(t):os(t);for(var e=this._groups,n=e.length,r=[],o=[],s=0;s<n;++s)for(var i,a=e[s],l=a.length,c=0;c<l;++c)(i=a[c])&&(r.push(t.call(i,i.__data__,c,a)),o.push(i));return new ii(r,o)},selectChild:function(t){return this.select(null==t?ls:function(t){return function(){return as.call(this.children,t)}}("function"==typeof t?t:is(t)))},selectChildren:function(t){return this.selectAll(null==t?us:function(t){return function(){return cs.call(this.children,t)}}("function"==typeof t?t:is(t)))},filter:function(t){"function"!=typeof t&&(t=ss(t));for(var e=this._groups,n=e.length,r=new Array(n),o=0;o<n;++o)for(var s,i=e[o],a=i.length,l=r[o]=[],c=0;c<a;++c)(s=i[c])&&t.call(s,s.__data__,c,i)&&l.push(s);return new ii(r,this._parents)},data:function(t,e){if(!arguments.length)return Array.from(this,vs);var n=e?gs:hs,r=this._parents,o=this._groups;"function"!=typeof t&&(t=ds(t));for(var s=o.length,i=new Array(s),a=new Array(s),l=new Array(s),c=0;c<s;++c){var u=r[c],f=o[c],p=f.length,d=ms(t.call(u,u&&u.__data__,c,r)),h=d.length,g=a[c]=new Array(h),v=i[c]=new Array(h),m=l[c]=new Array(p);n(u,f,g,v,m,d,e);for(var y,b,_=0,x=0;_<h;++_)if(y=g[_]){for(_>=x&&(x=_+1);!(b=v[x])&&++x<h;);y._next=b||null}}return(i=new ii(i,r))._enter=a,i._exit=l,i},enter:function(){return new ii(this._enter||this._groups.map(fs),this._parents)},exit:function(){return new ii(this._exit||this._groups.map(fs),this._parents)},join:function(t,e,n){var r=this.enter(),o=this,s=this.exit();return"function"==typeof t?(r=t(r))&&(r=r.selection()):r=r.append(t+""),null!=e&&(o=e(o))&&(o=o.selection()),null==n?s.remove():n(s),r&&o?r.merge(o).order():o},merge:function(t){for(var e=t.selection?t.selection():t,n=this._groups,r=e._groups,o=n.length,s=r.length,i=Math.min(o,s),a=new Array(o),l=0;l<i;++l)for(var c,u=n[l],f=r[l],p=u.length,d=a[l]=new Array(p),h=0;h<p;++h)(c=u[h]||f[h])&&(d[h]=c);for(;l<o;++l)a[l]=n[l];return new ii(a,this._parents)},selection:function(){return this},order:function(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r,o=t[e],s=o.length-1,i=o[s];--s>=0;)(r=o[s])&&(i&&4^r.compareDocumentPosition(i)&&i.parentNode.insertBefore(r,i),i=r);return this},sort:function(t){function e(e,n){return e&&n?t(e.__data__,n.__data__):!e-!n}t||(t=ys);for(var n=this._groups,r=n.length,o=new Array(r),s=0;s<r;++s){for(var i,a=n[s],l=a.length,c=o[s]=new Array(l),u=0;u<l;++u)(i=a[u])&&(c[u]=i);c.sort(e)}return new ii(o,this._parents).order()},call:function(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},nodes:function(){return Array.from(this)},node:function(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],o=0,s=r.length;o<s;++o){var i=r[o];if(i)return i}return null},size:function(){let t=0;for(const e of this)++t;return t},empty:function(){return!this.node()},each:function(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var o,s=e[n],i=0,a=s.length;i<a;++i)(o=s[i])&&t.call(o,o.__data__,i,s);return this},attr:function(t,e){var n=Go(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((null==e?n.local?_s:bs:"function"==typeof e?n.local?ks:Is:n.local?ws:xs)(n,e))},style:function(t,e,n){return arguments.length>1?this.each((null==e?Ss:"function"==typeof e?Cs:Ns)(t,e,null==n?"":n)):As(this.node(),t)},property:function(t,e){return arguments.length>1?this.each((null==e?Es:"function"==typeof e?Ts:Os)(t,e)):this.node()[t]},classed:function(t,e){var n=Ps(t+"");if(arguments.length<2){for(var r=$s(this.node()),o=-1,s=n.length;++o<s;)if(!r.contains(n[o]))return!1;return!0}return this.each(("function"==typeof e?Fs:e?Vs:Ls)(n,e))},text:function(t){return arguments.length?this.each(null==t?Us:("function"==typeof t?Ks:Bs)(t)):this.node().textContent},html:function(t){return arguments.length?this.each(null==t?Hs:("function"==typeof t?qs:Ws)(t)):this.node().innerHTML},raise:function(){return this.each(zs)},lower:function(){return this.each(Xs)},append:function(t){var e="function"==typeof t?t:Qo(t);return this.select((function(){return this.appendChild(e.apply(this,arguments))}))},insert:function(t,e){var n="function"==typeof t?t:Qo(t),r=null==e?Ys:"function"==typeof e?e:es(e);return this.select((function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)}))},remove:function(){return this.each(Gs)},clone:function(t){return this.select(t?Zs:Js)},datum:function(t){return arguments.length?this.property("__data__",t):this.node().__data__},on:function(t,e,n){var r,o,s=Qs(t+""),i=s.length;if(!(arguments.length<2)){for(a=e?ei:ti,r=0;r<i;++r)this.each(a(s[r],e,n));return this}var a=this.node().__on;if(a)for(var l,c=0,u=a.length;c<u;++c)for(r=0,l=a[c];r<i;++r)if((o=s[r]).type===l.type&&o.name===l.name)return l.value},dispatch:function(t,e){return this.each(("function"==typeof e?oi:ri)(t,e))},[Symbol.iterator]:function*(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r,o=t[e],s=0,i=o.length;s<i;++s)(r=o[s])&&(yield r)}};var fi=1/.7,pi="\\s*([+-]?\\d+)\\s*",di="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",hi="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",gi=/^#([0-9a-f]{3,8})$/,vi=new RegExp("^rgb\\("+[pi,pi,pi]+"\\)$"),mi=new RegExp("^rgb\\("+[hi,hi,hi]+"\\)$"),yi=new RegExp("^rgba\\("+[pi,pi,pi,di]+"\\)$"),bi=new RegExp("^rgba\\("+[hi,hi,hi,di]+"\\)$"),_i=new RegExp("^hsl\\("+[di,hi,hi]+"\\)$"),xi=new RegExp("^hsla\\("+[di,hi,hi,di]+"\\)$"),wi={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function Ii(){return this.rgb().formatHex()}function ki(){return this.rgb().formatRgb()}function Di(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=gi.exec(t))?(n=e[1].length,e=parseInt(e[1],16),6===n?Si(e):3===n?new Ei(e>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):8===n?Ni(e>>24&255,e>>16&255,e>>8&255,(255&e)/255):4===n?Ni(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|240&e,((15&e)<<4|15&e)/255):null):(e=vi.exec(t))?new Ei(e[1],e[2],e[3],1):(e=mi.exec(t))?new Ei(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=yi.exec(t))?Ni(e[1],e[2],e[3],e[4]):(e=bi.exec(t))?Ni(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=_i.exec(t))?$i(e[1],e[2]/100,e[3]/100,1):(e=xi.exec(t))?$i(e[1],e[2]/100,e[3]/100,e[4]):wi.hasOwnProperty(t)?Si(wi[t]):"transparent"===t?new Ei(NaN,NaN,NaN,0):null}function Si(t){return new Ei(t>>16&255,t>>8&255,255&t,1)}function Ni(t,e,n,r){return r<=0&&(t=e=n=NaN),new Ei(t,e,n,r)}function Ci(t){return t instanceof ui||(t=Di(t)),t?new Ei((t=t.rgb()).r,t.g,t.b,t.opacity):new Ei}function Ai(t,e,n,r){return 1===arguments.length?Ci(t):new Ei(t,e,n,null==r?1:r)}function Ei(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}function Oi(){return"#"+Pi(this.r)+Pi(this.g)+Pi(this.b)}function Ti(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===t?")":", "+t+")")}function Pi(t){return((t=Math.max(0,Math.min(255,Math.round(t)||0)))<16?"0":"")+t.toString(16)}function $i(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new Ri(t,e,n,r)}function Mi(t){if(t instanceof Ri)return new Ri(t.h,t.s,t.l,t.opacity);if(t instanceof ui||(t=Di(t)),!t)return new Ri;if(t instanceof Ri)return t;var e=(t=t.rgb()).r/255,n=t.g/255,r=t.b/255,o=Math.min(e,n,r),s=Math.max(e,n,r),i=NaN,a=s-o,l=(s+o)/2;return a?(i=e===s?(n-r)/a+6*(n<r):n===s?(r-e)/a+2:(e-n)/a+4,a/=l<.5?s+o:2-s-o,i*=60):a=l>0&&l<1?0:i,new Ri(i,a,l,t.opacity)}function Ri(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}function ji(t,e,n){return 255*(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)}li(ui,Di,{copy:function(t){return Object.assign(new this.constructor,this,t)},displayable:function(){return this.rgb().displayable()},hex:Ii,formatHex:Ii,formatHsl:function(){return Mi(this).formatHsl()},formatRgb:ki,toString:ki}),li(Ei,Ai,ci(ui,{brighter:function(t){return t=null==t?fi:Math.pow(fi,t),new Ei(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new Ei(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Oi,formatHex:Oi,formatRgb:Ti,toString:Ti})),li(Ri,(function(t,e,n,r){return 1===arguments.length?Mi(t):new Ri(t,e,n,null==r?1:r)}),ci(ui,{brighter:function(t){return t=null==t?fi:Math.pow(fi,t),new Ri(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new Ri(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,o=2*n-r;return new Ei(ji(t>=240?t-240:t+120,o,r),ji(t,o,r),ji(t<120?t+240:t-120,o,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===t?")":", "+t+")")}}));var Vi=t=>()=>t;function Li(t){return 1==(t=+t)?Fi:function(e,n){return n-e?function(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}(e,n,t):Vi(isNaN(e)?n:e)}}function Fi(t,e){var n=e-t;return n?function(t,e){return function(n){return t+n*e}}(t,n):Vi(isNaN(t)?e:t)}var Ui=function t(e){var n=Li(e);function r(t,e){var r=n((t=Ai(t)).r,(e=Ai(e)).r),o=n(t.g,e.g),s=n(t.b,e.b),i=Fi(t.opacity,e.opacity);return function(e){return t.r=r(e),t.g=o(e),t.b=s(e),t.opacity=i(e),t+""}}return r.gamma=t,r}(1);function Bi(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}var Ki=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Hi=new RegExp(Ki.source,"g");function Wi(t,e){var n,r,o,s=Ki.lastIndex=Hi.lastIndex=0,i=-1,a=[],l=[];for(t+="",e+="";(n=Ki.exec(t))&&(r=Hi.exec(e));)(o=r.index)>s&&(o=e.slice(s,o),a[i]?a[i]+=o:a[++i]=o),(n=n[0])===(r=r[0])?a[i]?a[i]+=r:a[++i]=r:(a[++i]=null,l.push({i:i,x:Bi(n,r)})),s=Hi.lastIndex;return s<e.length&&(o=e.slice(s),a[i]?a[i]+=o:a[++i]=o),a.length<2?l[0]?function(t){return function(e){return t(e)+""}}(l[0].x):function(t){return function(){return t}}(e):(e=l.length,function(t){for(var n,r=0;r<e;++r)a[(n=l[r]).i]=n.x(t);return a.join("")})}var qi,zi=180/Math.PI,Xi={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Yi(t,e,n,r,o,s){var i,a,l;return(i=Math.sqrt(t*t+e*e))&&(t/=i,e/=i),(l=t*n+e*r)&&(n-=t*l,r-=e*l),(a=Math.sqrt(n*n+r*r))&&(n/=a,r/=a,l/=a),t*r<e*n&&(t=-t,e=-e,l=-l,i=-i),{translateX:o,translateY:s,rotate:Math.atan2(e,t)*zi,skewX:Math.atan(l)*zi,scaleX:i,scaleY:a}}function Gi(t,e,n,r){function o(t){return t.length?t.pop()+" ":""}return function(s,i){var a=[],l=[];return s=t(s),i=t(i),function(t,r,o,s,i,a){if(t!==o||r!==s){var l=i.push("translate(",null,e,null,n);a.push({i:l-4,x:Bi(t,o)},{i:l-2,x:Bi(r,s)})}else(o||s)&&i.push("translate("+o+e+s+n)}(s.translateX,s.translateY,i.translateX,i.translateY,a,l),function(t,e,n,s){t!==e?(t-e>180?e+=360:e-t>180&&(t+=360),s.push({i:n.push(o(n)+"rotate(",null,r)-2,x:Bi(t,e)})):e&&n.push(o(n)+"rotate("+e+r)}(s.rotate,i.rotate,a,l),function(t,e,n,s){t!==e?s.push({i:n.push(o(n)+"skewX(",null,r)-2,x:Bi(t,e)}):e&&n.push(o(n)+"skewX("+e+r)}(s.skewX,i.skewX,a,l),function(t,e,n,r,s,i){if(t!==n||e!==r){var a=s.push(o(s)+"scale(",null,",",null,")");i.push({i:a-4,x:Bi(t,n)},{i:a-2,x:Bi(e,r)})}else 1===n&&1===r||s.push(o(s)+"scale("+n+","+r+")")}(s.scaleX,s.scaleY,i.scaleX,i.scaleY,a,l),s=i=null,function(t){for(var e,n=-1,r=l.length;++n<r;)a[(e=l[n]).i]=e.x(t);return a.join("")}}}var Ji,Zi,Qi=Gi((function(t){const e=new("function"==typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?Xi:Yi(e.a,e.b,e.c,e.d,e.e,e.f)}),"px, ","px)","deg)"),ta=Gi((function(t){return null==t?Xi:(qi||(qi=document.createElementNS("http://www.w3.org/2000/svg","g")),qi.setAttribute("transform",t),(t=qi.transform.baseVal.consolidate())?Yi((t=t.matrix).a,t.b,t.c,t.d,t.e,t.f):Xi)}),", ",")",")"),ea=0,na=0,ra=0,oa=0,sa=0,ia=0,aa="object"==typeof performance&&performance.now?performance:Date,la="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function ca(){return sa||(la(ua),sa=aa.now()+ia)}function ua(){sa=0}function fa(){this._call=this._time=this._next=null}function pa(t,e,n){var r=new fa;return r.restart(t,e,n),r}function da(){sa=(oa=aa.now())+ia,ea=na=0;try{!function(){ca(),++ea;for(var t,e=Ji;e;)(t=sa-e._time)>=0&&e._call.call(void 0,t),e=e._next;--ea}()}finally{ea=0,function(){var t,e,n=Ji,r=1/0;for(;n;)n._call?(r>n._time&&(r=n._time),t=n,n=n._next):(e=n._next,n._next=null,n=t?t._next=e:Ji=e);Zi=t,ga(r)}(),sa=0}}function ha(){var t=aa.now(),e=t-oa;e>1e3&&(ia-=e,oa=t)}function ga(t){ea||(na&&(na=clearTimeout(na)),t-sa>24?(t<1/0&&(na=setTimeout(da,t-aa.now()-ia)),ra&&(ra=clearInterval(ra))):(ra||(oa=aa.now(),ra=setInterval(ha,1e3)),ea=1,la(da)))}function va(t,e,n){var r=new fa;return e=null==e?0:+e,r.restart((n=>{r.stop(),t(n+e)}),e,n),r}fa.prototype=pa.prototype={constructor:fa,restart:function(t,e,n){if("function"!=typeof t)throw new TypeError("callback is not a function");n=(null==n?ca():+n)+(null==e?0:+e),this._next||Zi===this||(Zi?Zi._next=this:Ji=this,Zi=this),this._call=t,this._time=n,ga()},stop:function(){this._call&&(this._call=null,this._time=1/0,ga())}};var ma=Ko("start","end","cancel","interrupt"),ya=[];function ba(t,e,n,r,o,s){var i=t.__transition;if(i){if(n in i)return}else t.__transition={};!function(t,e,n){var r,o=t.__transition;function s(t){n.state=1,n.timer.restart(i,n.delay,n.time),n.delay<=t&&i(t-n.delay)}function i(s){var c,u,f,p;if(1!==n.state)return l();for(c in o)if((p=o[c]).name===n.name){if(3===p.state)return va(i);4===p.state?(p.state=6,p.timer.stop(),p.on.call("interrupt",t,t.__data__,p.index,p.group),delete o[c]):+c<e&&(p.state=6,p.timer.stop(),p.on.call("cancel",t,t.__data__,p.index,p.group),delete o[c])}if(va((function(){3===n.state&&(n.state=4,n.timer.restart(a,n.delay,n.time),a(s))})),n.state=2,n.on.call("start",t,t.__data__,n.index,n.group),2===n.state){for(n.state=3,r=new Array(f=n.tween.length),c=0,u=-1;c<f;++c)(p=n.tween[c].value.call(t,t.__data__,n.index,n.group))&&(r[++u]=p);r.length=u+1}}function a(e){for(var o=e<n.duration?n.ease.call(null,e/n.duration):(n.timer.restart(l),n.state=5,1),s=-1,i=r.length;++s<i;)r[s].call(t,o);5===n.state&&(n.on.call("end",t,t.__data__,n.index,n.group),l())}function l(){for(var r in n.state=6,n.timer.stop(),delete o[e],o)return;delete t.__transition}o[e]=n,n.timer=pa(s,0,n.time)}(t,n,{name:e,index:r,group:o,on:ma,tween:ya,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:0})}function _a(t,e){var n=wa(t,e);if(n.state>0)throw new Error("too late; already scheduled");return n}function xa(t,e){var n=wa(t,e);if(n.state>3)throw new Error("too late; already running");return n}function wa(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function Ia(t,e){var n,r;return function(){var o=xa(this,t),s=o.tween;if(s!==n)for(var i=0,a=(r=n=s).length;i<a;++i)if(r[i].name===e){(r=r.slice()).splice(i,1);break}o.tween=r}}function ka(t,e,n){var r,o;if("function"!=typeof n)throw new Error;return function(){var s=xa(this,t),i=s.tween;if(i!==r){o=(r=i).slice();for(var a={name:e,value:n},l=0,c=o.length;l<c;++l)if(o[l].name===e){o[l]=a;break}l===c&&o.push(a)}s.tween=o}}function Da(t,e,n){var r=t._id;return t.each((function(){var t=xa(this,r);(t.value||(t.value={}))[e]=n.apply(this,arguments)})),function(t){return wa(t,r).value[e]}}function Sa(t,e){var n;return("number"==typeof e?Bi:e instanceof Di?Ui:(n=Di(e))?(e=n,Ui):Wi)(t,e)}function Na(t){return function(){this.removeAttribute(t)}}function Ca(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Aa(t,e,n){var r,o,s=n+"";return function(){var i=this.getAttribute(t);return i===s?null:i===r?o:o=e(r=i,n)}}function Ea(t,e,n){var r,o,s=n+"";return function(){var i=this.getAttributeNS(t.space,t.local);return i===s?null:i===r?o:o=e(r=i,n)}}function Oa(t,e,n){var r,o,s;return function(){var i,a,l=n(this);if(null!=l)return(i=this.getAttribute(t))===(a=l+"")?null:i===r&&a===o?s:(o=a,s=e(r=i,l));this.removeAttribute(t)}}function Ta(t,e,n){var r,o,s;return function(){var i,a,l=n(this);if(null!=l)return(i=this.getAttributeNS(t.space,t.local))===(a=l+"")?null:i===r&&a===o?s:(o=a,s=e(r=i,l));this.removeAttributeNS(t.space,t.local)}}function Pa(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function $a(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function Ma(t,e){var n,r;function o(){var o=e.apply(this,arguments);return o!==r&&(n=(r=o)&&$a(t,o)),n}return o._value=e,o}function Ra(t,e){var n,r;function o(){var o=e.apply(this,arguments);return o!==r&&(n=(r=o)&&Pa(t,o)),n}return o._value=e,o}function ja(t,e){return function(){_a(this,t).delay=+e.apply(this,arguments)}}function Va(t,e){return e=+e,function(){_a(this,t).delay=e}}function La(t,e){return function(){xa(this,t).duration=+e.apply(this,arguments)}}function Fa(t,e){return e=+e,function(){xa(this,t).duration=e}}function Ua(t,e){if("function"!=typeof e)throw new Error;return function(){xa(this,t).ease=e}}function Ba(t,e,n){var r,o,s=function(t){return(t+"").trim().split(/^|\s+/).every((function(t){var e=t.indexOf(".");return e>=0&&(t=t.slice(0,e)),!t||"start"===t}))}(e)?_a:xa;return function(){var i=s(this,t),a=i.on;a!==r&&(o=(r=a).copy()).on(e,n),i.on=o}}var Ka=ai.prototype.constructor;function Ha(t){return function(){this.style.removeProperty(t)}}function Wa(t,e,n){return function(r){this.style.setProperty(t,e.call(this,r),n)}}function qa(t,e,n){var r,o;function s(){var s=e.apply(this,arguments);return s!==o&&(r=(o=s)&&Wa(t,s,n)),r}return s._value=e,s}function za(t){return function(e){this.textContent=t.call(this,e)}}function Xa(t){var e,n;function r(){var r=t.apply(this,arguments);return r!==n&&(e=(n=r)&&za(r)),e}return r._value=t,r}var Ya=0;function Ga(t,e,n,r){this._groups=t,this._parents=e,this._name=n,this._id=r}function Ja(){return++Ya}var Za=ai.prototype;Ga.prototype={constructor:Ga,select:function(t){var e=this._name,n=this._id;"function"!=typeof t&&(t=es(t));for(var r=this._groups,o=r.length,s=new Array(o),i=0;i<o;++i)for(var a,l,c=r[i],u=c.length,f=s[i]=new Array(u),p=0;p<u;++p)(a=c[p])&&(l=t.call(a,a.__data__,p,c))&&("__data__"in a&&(l.__data__=a.__data__),f[p]=l,ba(f[p],e,n,p,f,wa(a,n)));return new Ga(s,this._parents,e,n)},selectAll:function(t){var e=this._name,n=this._id;"function"!=typeof t&&(t=os(t));for(var r=this._groups,o=r.length,s=[],i=[],a=0;a<o;++a)for(var l,c=r[a],u=c.length,f=0;f<u;++f)if(l=c[f]){for(var p,d=t.call(l,l.__data__,f,c),h=wa(l,n),g=0,v=d.length;g<v;++g)(p=d[g])&&ba(p,e,n,g,d,h);s.push(d),i.push(l)}return new Ga(s,i,e,n)},selectChild:Za.selectChild,selectChildren:Za.selectChildren,filter:function(t){"function"!=typeof t&&(t=ss(t));for(var e=this._groups,n=e.length,r=new Array(n),o=0;o<n;++o)for(var s,i=e[o],a=i.length,l=r[o]=[],c=0;c<a;++c)(s=i[c])&&t.call(s,s.__data__,c,i)&&l.push(s);return new Ga(r,this._parents,this._name,this._id)},merge:function(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,r=e.length,o=n.length,s=Math.min(r,o),i=new Array(r),a=0;a<s;++a)for(var l,c=e[a],u=n[a],f=c.length,p=i[a]=new Array(f),d=0;d<f;++d)(l=c[d]||u[d])&&(p[d]=l);for(;a<r;++a)i[a]=e[a];return new Ga(i,this._parents,this._name,this._id)},selection:function(){return new Ka(this._groups,this._parents)},transition:function(){for(var t=this._name,e=this._id,n=Ja(),r=this._groups,o=r.length,s=0;s<o;++s)for(var i,a=r[s],l=a.length,c=0;c<l;++c)if(i=a[c]){var u=wa(i,e);ba(i,t,n,c,a,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new Ga(r,this._parents,t,n)},call:Za.call,nodes:Za.nodes,node:Za.node,size:Za.size,empty:Za.empty,each:Za.each,on:function(t,e){var n=this._id;return arguments.length<2?wa(this.node(),n).on.on(t):this.each(Ba(n,t,e))},attr:function(t,e){var n=Go(t),r="transform"===n?ta:Sa;return this.attrTween(t,"function"==typeof e?(n.local?Ta:Oa)(n,r,Da(this,"attr."+t,e)):null==e?(n.local?Ca:Na)(n):(n.local?Ea:Aa)(n,r,e))},attrTween:function(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==e)return this.tween(n,null);if("function"!=typeof e)throw new Error;var r=Go(t);return this.tween(n,(r.local?Ma:Ra)(r,e))},style:function(t,e,n){var r="transform"==(t+="")?Qi:Sa;return null==e?this.styleTween(t,function(t,e){var n,r,o;return function(){var s=As(this,t),i=(this.style.removeProperty(t),As(this,t));return s===i?null:s===n&&i===r?o:o=e(n=s,r=i)}}(t,r)).on("end.style."+t,Ha(t)):"function"==typeof e?this.styleTween(t,function(t,e,n){var r,o,s;return function(){var i=As(this,t),a=n(this),l=a+"";return null==a&&(this.style.removeProperty(t),l=a=As(this,t)),i===l?null:i===r&&l===o?s:(o=l,s=e(r=i,a))}}(t,r,Da(this,"style."+t,e))).each(function(t,e){var n,r,o,s,i="style."+e,a="end."+i;return function(){var l=xa(this,t),c=l.on,u=null==l.value[i]?s||(s=Ha(e)):void 0;c===n&&o===u||(r=(n=c).copy()).on(a,o=u),l.on=r}}(this._id,t)):this.styleTween(t,function(t,e,n){var r,o,s=n+"";return function(){var i=As(this,t);return i===s?null:i===r?o:o=e(r=i,n)}}(t,r,e),n).on("end.style."+t,null)},styleTween:function(t,e,n){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(null==e)return this.tween(r,null);if("function"!=typeof e)throw new Error;return this.tween(r,qa(t,e,null==n?"":n))},text:function(t){return this.tween("text","function"==typeof t?function(t){return function(){var e=t(this);this.textContent=null==e?"":e}}(Da(this,"text",t)):function(t){return function(){this.textContent=t}}(null==t?"":t+""))},textTween:function(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(null==t)return this.tween(e,null);if("function"!=typeof t)throw new Error;return this.tween(e,Xa(t))},remove:function(){return this.on("end.remove",(t=this._id,function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}));var t},tween:function(t,e){var n=this._id;if(t+="",arguments.length<2){for(var r,o=wa(this.node(),n).tween,s=0,i=o.length;s<i;++s)if((r=o[s]).name===t)return r.value;return null}return this.each((null==e?Ia:ka)(n,t,e))},delay:function(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?ja:Va)(e,t)):wa(this.node(),e).delay},duration:function(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?La:Fa)(e,t)):wa(this.node(),e).duration},ease:function(t){var e=this._id;return arguments.length?this.each(Ua(e,t)):wa(this.node(),e).ease},easeVarying:function(t){if("function"!=typeof t)throw new Error;return this.each(function(t,e){return function(){var n=e.apply(this,arguments);if("function"!=typeof n)throw new Error;xa(this,t).ease=n}}(this._id,t))},end:function(){var t,e,n=this,r=n._id,o=n.size();return new Promise((function(s,i){var a={value:i},l={value:function(){0==--o&&s()}};n.each((function(){var n=xa(this,r),o=n.on;o!==t&&((e=(t=o).copy())._.cancel.push(a),e._.interrupt.push(a),e._.end.push(l)),n.on=e})),0===o&&s()}))},[Symbol.iterator]:Za[Symbol.iterator]};var Qa={time:null,delay:0,duration:250,ease:function(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}};function tl(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}ai.prototype.interrupt=function(t){return this.each((function(){!function(t,e){var n,r,o,s=t.__transition,i=!0;if(s){for(o in e=null==e?null:e+"",s)(n=s[o]).name===e?(r=n.state>2&&n.state<5,n.state=6,n.timer.stop(),n.on.call(r?"interrupt":"cancel",t,t.__data__,n.index,n.group),delete s[o]):i=!1;i&&delete t.__transition}}(this,t)}))},ai.prototype.transition=function(t){var e,n;t instanceof Ga?(e=t._id,t=t._name):(e=Ja(),(n=Qa).time=ca(),t=null==t?null:t+"");for(var r=this._groups,o=r.length,s=0;s<o;++s)for(var i,a=r[s],l=a.length,c=0;c<l;++c)(i=a[c])&&ba(i,t,e,c,a,n||tl(i,e));return new Ga(r,this._parents,t,e)};const el={props:{modelValue:[Int16Array,Int32Array,Array],time:Number,duration:Number,selection:Object},data:()=>({waveform:void 0,svg:void 0,data:void 0}),async mounted(){this.$options.watch.modelValue.call(this,this.modelValue),this.resizeCheckInterval=setInterval((()=>{null==this.currentWidth||null==this.currentHeight||!this.$refs.svg||this.currentWidth==this.$refs.svg.clientWidth&&this.currentHeight==this.$refs.svg.clientHeight||this.draw()}),2e3)},watch:{modelValue(t){if(t)if(t instanceof Int16Array){const e=new Float32Array(t);this.data=e.map((t=>t/32768))}else t instanceof Float32Array||t instanceof Array&&t.length>0&&"number"==typeof t[0]&&t[0]>=-1&&t[0]<=1?this.data=t:this.data=void 0;else this.data=void 0;this.draw()},time(t){}},methods:{click(t){const e=t.offsetX/this.$refs.svg.clientWidth*this.duration;this.$emit("update:time",e)},draw(t,e){const n=this.data;t=t||this.$refs.svg.clientWidth,e=e||this.$refs.svg.clientHeight,this.currentWidth=t,this.currentHeight=e;const r="string"==typeof(o=this.$refs.svg)?new ii([[document.querySelector(o)]],[document.documentElement]):new ii([[o]],si);var o;if(!n)return void r.selectAll("*").remove();r.attr("height",e).attr("width",t);const s=function(t,e){var n=Math.round(t.length/e),r=[];const o=Math.min(n,1e3);for(var s=0;s<e;s++){for(var i=0,a=0,l=0;l<o&&!(s*n+l>=t.length);l++){var c=t[s*n+l];c>0?i+=c:a+=c}r.push([a/o,i/o])}return r}(n,1200);let i=0;for(const c of s)i+=-c[0]+c[1];i/=2*s.length;const a=.1*e/i,l=t/s.length;r.selectAll("rect").data(s).attr("x",(function(e,n){return n/s.length*t})).attr("y",(function(t,n){return.5*e-a*t[1]})).attr("width",l).attr("height",(function(t){return a*(t[1]-t[0])})).enter().append("rect").style("stroke","#342a40").style("stroke-width","0").style("fill","rgba(0,0,0,0.3)").attr("x",(function(e,n){return n/s.length*t})).attr("y",(function(t,n){return.5*e-a*t[1]})).attr("width",l).attr("height",(function(t){return a*(t[1]-t[0])})).exit().remove()}}},nl={ref:"svg",style:{"-border":"1px solid red",width:"100%",height:"100%"}};el.render=function(t,e,n,o,s,i){return Pn(),jn("div",{onClick:e[0]||(e[0]=(...t)=>i.click&&i.click(...t))},[(Pn(),jn("svg",nl,null,512)),n.selection?(Pn(),jn("div",{key:0,style:r([{position:"absolute",top:"0px",height:"100%",left:"0px","background-color":"#fffb","pointer-events":"none","border-left":"1px solid blue","border-right":"1px solid blue"},{left:n.selection.start/n.duration*100+"%",width:(n.selection.end-n.selection.start)/n.duration*100+"%"}])},null,4)):Xn("",!0),Hn("div",{style:r([{position:"absolute",top:"0px",height:"100%",width:"0px",border:"1px solid red",left:"0px"},{left:n.time/n.duration*100+"%"}]),ref:"head"},null,4)])},el.__scopeId="data-v-af4cf048";class rl{constructor(t){this.init(t)}init(t){this.close(),this.context=new AudioContext,this.context.onstatechange=t?()=>{t(this)}:()=>{t&&t||this.onstatechange(this)}}close(){this.context&&(this.context.close(),this.context=void 0)}resume(){this.context.resume()}get suspended(){return"suspended"===this.context.state}onstatechange(t){console.log("audio context state changed:",t.context.state)}async decodeAudioFileData(t){const e=await this.decodeAudioFileBuffer(t),n=this.bufferData(e);return{data:this.Float32ArrayToInt16Array(n),sampleRate:e.sampleRate,length:e.length,duration:e.duration,numberOfChannels:e.numberOfChannels}}async fetchAndDecodeAudioFile(t){const e=await this.fetchAudioFileAndDecode(t),n=this.bufferData(e);return{data:this.Float32ArrayToInt16Array(n),sampleRate:e.sampleRate,length:e.length,duration:e.duration,numberOfChannels:e.numberOfChannels}}async fetchAudioFileAndDecode(t){const e=await fetch(t);return await this.decodeAudioFileBuffer(await e.arrayBuffer())}async decodeAudioFileBuffer(t){const e=this.context;return await e.decodeAudioData(t)}Float32ArrayToInt16Array(t){return Int16Array.from(t.map((t=>32768*t)))}bufferData(t,{channel:e=0}={}){return t.getChannelData(e)}}var ol={components:{TranscriptEditor:Vo,Waveform:el},props:{transcript:{type:Object,default:{paragraphs:{}}},duration:{type:Number},url:{type:String},name:{},waveform:[Int16Array,Int32Array,Array,String],previewVideo:{type:Boolean,default:!0},onSave:{type:Function,default:async()=>console.log("onSave not implemented")},editable:{type:Boolean,default:!0}},data:()=>({position:0,selected:void 0,playing:!1,loaded:!1,isVideo:!1,_url:void 0,_duration:void 0,_waveform:void 0,pending_waveform:void 0,pending_duration:void 0,video_duration:void 0,saving:!1,version:0,lastSavedVersion:0,autosave:!1,decoderSuspended:!1,decodingAudio:!1,showConfidence:!1}),async mounted(){this.$options.watch.waveform.call(this,this.waveform),window.setInterval(this.saveAuto,5e3),window.addEventListener("keydown",this.onGlobalKeydown),this.decoder=new rl((t=>{this.decoderSuspended=this.decoder.suspended,this.decoder.suspended&&console.log("audio decoder suspended")})),this.decoderSuspended=this.decoder.suspended},beforeUnmount(){window.clearInterval(this.saveAuto),window.removeEventListener("keydown",this.onGlobalKeydown)},watch:{position(t){},transcript:{handler(t,e){},deep:!0},duration(t){this._duration=t},url(t){this._url=t},async waveform(t){if("string"==typeof t){const{data:e,duration:n}=await this.decodeAudioWaveform(t);this._waveform=e}else if(t instanceof File){const{data:e,duration:n}=await this.decoder.decodeAudioFileData(await t.arrayBuffer());this._waveform=e}else this._waveform=t}},computed:{synced(){return this.lastSavedVersion===this.version}},methods:{msToTime:function(t,{ms:e=!1,hours:n=!0}={}){if(null==t)return e?"--:--:--.---":"--:--:--";function r(t,e){return("00"+t).slice(-(e=e||2))}var o=t%1e3,s=(t=(t-o)/1e3)%60,i=(t=(t-s)/60)%60,a=(t-i)/60;return(a||n?r(a)+":":"")+r(i)+":"+r(s)+(e?"."+r(o,3):"")},toggleAutoSave(){this.autosave=!this.autosave},async save(){if(this.onSave){const t=this.version;this.saving=!0,await this.onSave(this.transcript),console.log("saved",this.transcript),this.lastSavedVersion=t,setTimeout((()=>{this.saving=!1}),100)}},saveAuto(){this.autosave&&this.save()},async decodeAudioWaveform(t){try{return this.decodingAudio=!0,this.decoder.suspended&&await this.decoder.resume(),t instanceof File?await this.decoder.decodeAudioFileData(await t.arrayBuffer()):await this.decoder.fetchAndDecodeAudioFile(t)}catch(e){throw e}finally{this.decodingAudio=!1}},async load({url:t,waveform:e,duration:n}){"string"==typeof e||e instanceof File?this.pending_waveform=(async()=>{const{data:t,duration:n}=await this.decodeAudioWaveform(e);return t})():null===e?this._waveform=[]:this.pending_waveform=(async()=>e)(),n&&(this.pending_duration=n),this._url=t,t&&0!==t.length||(this.video_duration=void 0)},waveformLoading(){this._waveform=void 0,this.loaded=!1},onPlay(){this.playing=!0,this.animationFrameID=requestAnimationFrame(this.updatePosition)},onPause(){this.playing=!1,this.animationFrameID&&(cancelAnimationFrame(this.animationFrameID),this.animationFrameID=void 0)},onEnded(){this.onPause()},updatePosition(t){this.position=1e3*this.$refs.video.currentTime,this.animationFrameID=requestAnimationFrame(this.updatePosition)},durationChanged(){const t=this.$refs.video;this._duration=1e3*t.duration,this.video_duration=1e3*t.duration},async onDataLoaded(){const t=this.$refs.video;t&&(this.isVideo=t.videoWidth>0&&t.videoHeight>0),this.pending_duration&&(this.pending_duration=void 0),this.pending_waveform&&(this._waveform=await this.pending_waveform,this.pending_waveform=void 0),this.loaded=!0},onEmpty(){this.loaded=!1,this.isVideo=!1},onGlobalKeydown(t){"s"!==t.key||!0!==t.ctrlKey&&!0!==t.metaKey||(t.preventDefault(),this.save()),("Space"===t.code&&!0===t.ctrlKey||"Escape"==t.code)&&(t.preventDefault(),this.$refs.video.paused?this.$refs.video.play():this.$refs.video.pause())},transcriptUpdated(t){this.version+=1},setPosition(t){void 0!==t&&(this.$refs.video.currentTime=t/1e3)},timeUpdate(t){this.position=1e3*this.$refs.video.currentTime},toggleShowConfidence(){this.showConfidence=!this.showConfidence}}};const sl=t=>(be="data-v-391121ff",t=t(),be=null,t),il={class:"editor-wrapper"},al={key:0,class:"header"},ll={class:"btn-group me-2",role:"group"},cl={key:0,class:"spinner-border spinner-border-sm",role:"status"},ul={key:1,class:"bi bi-check-lg",title:"Saglabāts"},fl={key:2,class:"bi bi-asterisk",title:"Ir nesaglabātas izmaiņas"},pl=zn(" Saglabāt "),dl=zn(" 5s "),hl={class:"btn-group me-2",role:"group"},gl=[sl((()=>Hn("i",{class:"bi bi-type-bold"},null,-1)))],vl=[sl((()=>Hn("i",{class:"bi bi-type-italic"},null,-1)))],ml=[sl((()=>Hn("i",{class:"bi bi-type-underline"},null,-1)))],yl=[sl((()=>Hn("i",{class:"bi"},[zn("x"),Hn("sup",null,"2")],-1)))],bl=[sl((()=>Hn("i",{class:"bi"},[zn("x"),Hn("sub",null,"2")],-1)))],_l=[sl((()=>Hn("i",{class:"bi bi-list-ul"},null,-1)))],xl={class:"footer"},wl=["src"],Il={class:"waveform-and-buttons"},kl={key:1,class:"waveform-loading"},Dl=[sl((()=>Hn("div",{class:"text-center",style:{position:"relative",top:"calc(50% - 1rem)"}},[Hn("div",{class:"spinner-grow",role:"status"}),Hn("div",{style:{position:"relative",display:"inline-block",top:"-0.5rem",left:"0.5rem"}}," Loading... ")],-1)))],Sl={class:"controls"},Nl={key:0,class:"btn-group pe-2",role:"group"},Cl=[sl((()=>Hn("i",{class:"bi bi-play-fill"},null,-1)))],Al=[sl((()=>Hn("i",{class:"bi bi-pause-fill"},null,-1)))],El={style:{"font-variant-numeric":"tabular-nums"}};async function Ol(t){const e=await async function(t){const e=new AudioContext,n=await e.decodeAudioData(t);return e.close(),n}(t),n=function(t,{channel:e=0}={}){return t.getChannelData(e)}(e);return{data:(r=n,Int16Array.from(r.map((t=>32768*t)))),sampleRate:e.sampleRate,length:e.length,duration:e.duration,numberOfChannels:e.numberOfChannels};var r}ol.render=function(t,e,n,r,o,s){const i=kn("TranscriptEditor"),c=kn("Waveform");return Pn(),jn("div",il,[tr(t.$slots,"default",{},void 0,!0),this.editable?(Pn(),jn("div",al,[Hn("div",ll,[Hn("button",{class:"btn btn-outline-primary",onClick:e[0]||(e[0]=t=>s.save())},[o.saving?(Pn(),jn("div",cl)):s.synced?(Pn(),jn("i",ul)):(Pn(),jn("i",fl)),pl]),Hn("button",{class:a("btn "+(o.autosave?"btn-primary":"btn-outline-primary")),onClick:e[1]||(e[1]=(...t)=>s.toggleAutoSave&&s.toggleAutoSave(...t)),title:"Automātiski sagalabāt katras 5s"},[Hn("i",{class:a("bi bi-toggle-"+(o.autosave?"on":"off"))},null,2),dl],2)]),Hn("div",hl,[Hn("button",{class:"btn btn-outline-primary",onClick:e[2]||(e[2]=e=>t.$refs.transcript.toggleStyle("bold"))},gl),Hn("button",{class:"btn btn-outline-primary",onClick:e[3]||(e[3]=e=>t.$refs.transcript.toggleStyle("italic"))},vl),Hn("button",{class:"btn btn-outline-primary",onClick:e[4]||(e[4]=e=>t.$refs.transcript.toggleStyle("underline"))},ml),Hn("button",{class:"btn btn-outline-primary",onClick:e[5]||(e[5]=e=>t.$refs.transcript.toggleStyle("superscript"))},yl),Hn("button",{class:"btn btn-outline-primary",onClick:e[6]||(e[6]=e=>t.$refs.transcript.toggleStyle("subscript"))},bl),Hn("button",{class:"btn btn-outline-primary",onClick:e[7]||(e[7]=e=>t.$refs.transcript.toggleBullet())},_l)])])):Xn("",!0),Wn(i,{class:"main transcript-editor",ref:"transcript",modelValue:n.transcript,"onUpdate:modelValue":[e[8]||(e[8]=t=>n.transcript=t),s.transcriptUpdated],time:o.position,"onUpdate:time":s.setPosition,onSelected:e[9]||(e[9]=t=>o.selected=t),editable:n.editable,"show-confidence":this.showConfidence},null,8,["modelValue","onUpdate:modelValue","time","onUpdate:time","editable","show-confidence"]),Hn("div",xl,[Hn("div",{class:a(["media-panel",{video:o.isVideo&&n.previewVideo}])},[Hn("video",{playsinline:"",src:o._url,ref:"video",onTimeupdate:e[10]||(e[10]=(...t)=>s.timeUpdate&&s.timeUpdate(...t)),onLoadeddata:e[11]||(e[11]=(...t)=>s.onDataLoaded&&s.onDataLoaded(...t)),onLoadstart:e[12]||(e[12]=(...t)=>s.onDataLoaded&&s.onDataLoaded(...t)),onEmptied:e[13]||(e[13]=(...t)=>s.onEmpty&&s.onEmpty(...t)),onDurationchange:e[14]||(e[14]=(...t)=>s.durationChanged&&s.durationChanged(...t)),onPlay:e[15]||(e[15]=(...t)=>s.onPlay&&s.onPlay(...t)),onPause:e[16]||(e[16]=(...t)=>s.onPause&&s.onPause(...t)),onEnded:e[17]||(e[17]=(...t)=>s.onEnded&&s.onEnded(...t))},null,40,wl),Hn("div",Il,[Hn("div",null,[null!=o._waveform?(Pn(),Vn(c,{key:0,class:"waveform",modelValue:o._waveform,"onUpdate:modelValue":e[18]||(e[18]=t=>o._waveform=t),time:o.position,"onUpdate:time":[e[19]||(e[19]=t=>o.position=t),s.setPosition],duration:o._duration,selection:o.selected},null,8,["modelValue","time","onUpdate:time","duration","selection"])):(Pn(),jn("div",kl,Dl))]),Hn("div",Sl,[o.loaded?(Pn(),jn("div",Nl,[o.playing?(Pn(),jn("button",{key:1,class:"btn btn-primary",onClick:e[21]||(e[21]=e=>t.$refs.video.pause())},Al)):(Pn(),jn("button",{key:0,class:"btn btn-primary",onClick:e[20]||(e[20]=e=>t.$refs.video.play())},Cl))])):Xn("",!0),Hn("span",El,l(s.msToTime(o.position))+" / "+l(s.msToTime(o.video_duration)),1)])])],2)])])},ol.__scopeId="data-v-391121ff";var Tl={components:{Editor:ol},props:{},data:()=>({transcript:{},waveform:[],duration:0,url:void 0}),async mounted(){},unmounted(){this.url&&this.url.length>0&&this.url.startsWith("blob:")&&URL.revokeObjectURL(this.url)},watch:{},methods:{async load({audio:t,transcript:e,file:n}){if("string"==typeof t){this.$refs.editor.waveformLoading(),this.url&&this.url.length>0&&this.url.startsWith("blob:")&&URL.revokeObjectURL(this.url);const e=t;this.$refs.editor.load({url:e,waveform:t})}else if(t instanceof File){this.$refs.editor.waveformLoading(),this.url&&this.url.length>0&&this.url.startsWith("blob:")&&URL.revokeObjectURL(this.url);const e=URL.createObjectURL(t);this.$refs.editor.load({url:e,waveform:t})}else if(t instanceof ArrayBuffer){this.$refs.editor.waveformLoading();const e=URL.createObjectURL(n||new Blob([t])),r=await Ol(t);this.$refs.editor.load({url:e,waveform:r.data,duration:1e3*r.duration})}else null===t&&(this.url&&this.url.length>0&&this.url.startsWith("blob:")&&URL.revokeObjectURL(this.url),this.$refs.editor.load({url:"",waveform:null,duration:0}));if(e)if("string"==typeof e){const t=await fetch(e);this.transcript=await t.json()}else e instanceof File?this.transcript=JSON.parse(await e.text()):this.transcript=e},async onSave(t){console.log("on save transcript:",t)},async save(t){console.log("save transcript not implemented, transcript:",t)}}};Tl.render=function(t,e,n,r,o,s){const i=kn("Editor");return Pn(),Vn(i,{class:"",transcript:o.transcript,waveform:o.waveform,duration:o.duration,url:o.url,onSave:s.onSave,ref:"editor"},null,8,["transcript","waveform","duration","url","onSave"])};function Pl(t="#app"){return uo(Tl).mount(t)}export default Pl;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicnV0YS5lcy5qcyIsInNvdXJjZXMiOlsiLi4vLi4vbm9kZV9tb2R1bGVzL0B2dWUvc2hhcmVkL2Rpc3Qvc2hhcmVkLmVzbS1idW5kbGVyLmpzIiwiLi4vLi4vbm9kZV9tb2R1bGVzL0B2dWUvcmVhY3Rpdml0eS9kaXN0L3JlYWN0aXZpdHkuZXNtLWJ1bmRsZXIuanMiLCIuLi8uLi9ub2RlX21vZHVsZXMvQHZ1ZS9ydW50aW1lLWNvcmUvZGlzdC9ydW50aW1lLWNvcmUuZXNtLWJ1bmRsZXIuanMiLCIuLi8uLi9ub2RlX21vZHVsZXMvQHZ1ZS9ydW50aW1lLWRvbS9kaXN0L3J1bnRpbWUtZG9tLmVzbS1idW5kbGVyLmpzIiwiLi4vLi4vc3JjL2NvbXBvbmVudHMvZWRpdG9yLmpzIiwiLi4vLi4vc3JjL2NvbXBvbmVudHMvVHJhbnNjcmlwdEVkaXRvci52dWUiLCIuLi8uLi9ub2RlX21vZHVsZXMvZDMtZGlzcGF0Y2gvc3JjL2Rpc3BhdGNoLmpzIiwiLi4vLi4vbm9kZV9tb2R1bGVzL2QzLXNlbGVjdGlvbi9zcmMvbmFtZXNwYWNlcy5qcyIsIi4uLy4uL25vZGVfbW9kdWxlcy9kMy1zZWxlY3Rpb24vc3JjL25hbWVzcGFjZS5qcyIsIi4uLy4uL25vZGVfbW9kdWxlcy9kMy1zZWxlY3Rpb24vc3JjL2NyZWF0b3IuanMiLCIuLi8uLi9ub2RlX21vZHVsZXMvZDMtc2VsZWN0aW9uL3NyYy9zZWxlY3Rvci5qcyIsIi4uLy4uL25vZGVfbW9kdWxlcy9kMy1zZWxlY3Rpb24vc3JjL2FycmF5LmpzIiwiLi4vLi4vbm9kZV9tb2R1bGVzL2QzLXNlbGVjdGlvbi9zcmMvc2VsZWN0b3JBbGwuanMiLCIuLi8uLi9ub2RlX21vZHVsZXMvZDMtc2VsZWN0aW9uL3NyYy9tYXRjaGVyLmpzIiwiLi4vLi4vbm9kZV9tb2R1bGVzL2QzLXNlbGVjdGlvbi9zcmMvc2VsZWN0aW9uL3NlbGVjdENoaWxkLmpzIiwiLi4vLi4vbm9kZV9tb2R1bGVzL2QzLXNlbGVjdGlvbi9zcmMvc2VsZWN0aW9uL3NlbGVjdENoaWxkcmVuLmpzIiwiLi4vLi4vbm9kZV9tb2R1bGVzL2QzLXNlbGVjdGlvbi9zcmMvc2VsZWN0aW9uL3NwYXJzZS5qcyIsIi4uLy4uL25vZGVfbW9kdWxlcy9kMy1zZWxlY3Rpb24vc3JjL3NlbGVjdGlvbi9lbnRlci5qcyIsIi4uLy4uL25vZGVfbW9kdWxlcy9kMy1zZWxlY3Rpb24vc3JjL2NvbnN0YW50LmpzIiwiLi4vLi4vbm9kZV9tb2R1bGVzL2QzLXNlbGVjdGlvbi9zcmMvc2VsZWN0aW9uL2RhdGEuanMiLCIuLi8uLi9ub2RlX21vZHVsZXMvZDMtc2VsZWN0aW9uL3NyYy9zZWxlY3Rpb24vc29ydC5qcyIsIi4uLy4uL25vZGVfbW9kdWxlcy9kMy1zZWxlY3Rpb24vc3JjL3NlbGVjdGlvbi9hdHRyLmpzIiwiLi4vLi4vbm9kZV9tb2R1bGVzL2QzLXNlbGVjdGlvbi9zcmMvd2luZG93LmpzIiwiLi4vLi4vbm9kZV9tb2R1bGVzL2QzLXNlbGVjdGlvbi9zcmMvc2VsZWN0aW9uL3N0eWxlLmpzIiwiLi4vLi4vbm9kZV9tb2R1bGVzL2QzLXNlbGVjdGlvbi9zcmMvc2VsZWN0aW9uL3Byb3BlcnR5LmpzIiwiLi4vLi4vbm9kZV9tb2R1bGVzL2QzLXNlbGVjdGlvbi9zcmMvc2VsZWN0aW9uL2NsYXNzZWQuanMiLCIuLi8uLi9ub2RlX21vZHVsZXMvZDMtc2VsZWN0aW9uL3NyYy9zZWxlY3Rpb24vdGV4dC5qcyIsIi4uLy4uL25vZGVfbW9kdWxlcy9kMy1zZWxlY3Rpb24vc3JjL3NlbGVjdGlvbi9odG1sLmpzIiwiLi4vLi4vbm9kZV9tb2R1bGVzL2QzLXNlbGVjdGlvbi9zcmMvc2VsZWN0aW9uL3JhaXNlLmpzIiwiLi4vLi4vbm9kZV9tb2R1bGVzL2QzLXNlbGVjdGlvbi9zcmMvc2VsZWN0aW9uL2xvd2VyLmpzIiwiLi4vLi4vbm9kZV9tb2R1bGVzL2QzLXNlbGVjdGlvbi9zcmMvc2VsZWN0aW9uL2luc2VydC5qcyIsIi4uLy4uL25vZGVfbW9kdWxlcy9kMy1zZWxlY3Rpb24vc3JjL3NlbGVjdGlvbi9yZW1vdmUuanMiLCIuLi8uLi9ub2RlX21vZHVsZXMvZDMtc2VsZWN0aW9uL3NyYy9zZWxlY3Rpb24vY2xvbmUuanMiLCIuLi8uLi9ub2RlX21vZHVsZXMvZDMtc2VsZWN0aW9uL3NyYy9zZWxlY3Rpb24vb24uanMiLCIuLi8uLi9ub2RlX21vZHVsZXMvZDMtc2VsZWN0aW9uL3NyYy9zZWxlY3Rpb24vZGlzcGF0Y2guanMiLCIuLi8uLi9ub2RlX21vZHVsZXMvZDMtc2VsZWN0aW9uL3NyYy9zZWxlY3Rpb24vaW5kZXguanMiLCIuLi8uLi9ub2RlX21vZHVsZXMvZDMtY29sb3Ivc3JjL2RlZmluZS5qcyIsIi4uLy4uL25vZGVfbW9kdWxlcy9kMy1jb2xvci9zcmMvY29sb3IuanMiLCIuLi8uLi9ub2RlX21vZHVsZXMvZDMtc2VsZWN0aW9uL3NyYy9zZWxlY3Rpb24vc2VsZWN0LmpzIiwiLi4vLi4vbm9kZV9tb2R1bGVzL2QzLXNlbGVjdGlvbi9zcmMvc2VsZWN0aW9uL3NlbGVjdEFsbC5qcyIsIi4uLy4uL25vZGVfbW9kdWxlcy9kMy1zZWxlY3Rpb24vc3JjL3NlbGVjdGlvbi9maWx0ZXIuanMiLCIuLi8uLi9ub2RlX21vZHVsZXMvZDMtc2VsZWN0aW9uL3NyYy9zZWxlY3Rpb24vZXhpdC5qcyIsIi4uLy4uL25vZGVfbW9kdWxlcy9kMy1zZWxlY3Rpb24vc3JjL3NlbGVjdGlvbi9qb2luLmpzIiwiLi4vLi4vbm9kZV9tb2R1bGVzL2QzLXNlbGVjdGlvbi9zcmMvc2VsZWN0aW9uL21lcmdlLmpzIiwiLi4vLi4vbm9kZV9tb2R1bGVzL2QzLXNlbGVjdGlvbi9zcmMvc2VsZWN0aW9uL29yZGVyLmpzIiwiLi4vLi4vbm9kZV9tb2R1bGVzL2QzLXNlbGVjdGlvbi9zcmMvc2VsZWN0aW9uL2NhbGwuanMiLCIuLi8uLi9ub2RlX21vZHVsZXMvZDMtc2VsZWN0aW9uL3NyYy9zZWxlY3Rpb24vbm9kZXMuanMiLCIuLi8uLi9ub2RlX21vZHVsZXMvZDMtc2VsZWN0aW9uL3NyYy9zZWxlY3Rpb24vbm9kZS5qcyIsIi4uLy4uL25vZGVfbW9kdWxlcy9kMy1zZWxlY3Rpb24vc3JjL3NlbGVjdGlvbi9zaXplLmpzIiwiLi4vLi4vbm9kZV9tb2R1bGVzL2QzLXNlbGVjdGlvbi9zcmMvc2VsZWN0aW9uL2VtcHR5LmpzIiwiLi4vLi4vbm9kZV9tb2R1bGVzL2QzLXNlbGVjdGlvbi9zcmMvc2VsZWN0aW9uL2VhY2guanMiLCIuLi8uLi9ub2RlX21vZHVsZXMvZDMtc2VsZWN0aW9uL3NyYy9zZWxlY3Rpb24vYXBwZW5kLmpzIiwiLi4vLi4vbm9kZV9tb2R1bGVzL2QzLXNlbGVjdGlvbi9zcmMvc2VsZWN0aW9uL2RhdHVtLmpzIiwiLi4vLi4vbm9kZV9tb2R1bGVzL2QzLXNlbGVjdGlvbi9zcmMvc2VsZWN0aW9uL2l0ZXJhdG9yLmpzIiwiLi4vLi4vbm9kZV9tb2R1bGVzL2QzLWludGVycG9sYXRlL3NyYy9jb25zdGFudC5qcyIsIi4uLy4uL25vZGVfbW9kdWxlcy9kMy1pbnRlcnBvbGF0ZS9zcmMvY29sb3IuanMiLCIuLi8uLi9ub2RlX21vZHVsZXMvZDMtaW50ZXJwb2xhdGUvc3JjL3JnYi5qcyIsIi4uLy4uL25vZGVfbW9kdWxlcy9kMy1pbnRlcnBvbGF0ZS9zcmMvbnVtYmVyLmpzIiwiLi4vLi4vbm9kZV9tb2R1bGVzL2QzLWludGVycG9sYXRlL3NyYy9zdHJpbmcuanMiLCIuLi8uLi9ub2RlX21vZHVsZXMvZDMtaW50ZXJwb2xhdGUvc3JjL3RyYW5zZm9ybS9kZWNvbXBvc2UuanMiLCIuLi8uLi9ub2RlX21vZHVsZXMvZDMtaW50ZXJwb2xhdGUvc3JjL3RyYW5zZm9ybS9wYXJzZS5qcyIsIi4uLy4uL25vZGVfbW9kdWxlcy9kMy1pbnRlcnBvbGF0ZS9zcmMvdHJhbnNmb3JtL2luZGV4LmpzIiwiLi4vLi4vbm9kZV9tb2R1bGVzL2QzLXRpbWVyL3NyYy90aW1lci5qcyIsIi4uLy4uL25vZGVfbW9kdWxlcy9kMy10aW1lci9zcmMvdGltZW91dC5qcyIsIi4uLy4uL25vZGVfbW9kdWxlcy9kMy10cmFuc2l0aW9uL3NyYy90cmFuc2l0aW9uL3NjaGVkdWxlLmpzIiwiLi4vLi4vbm9kZV9tb2R1bGVzL2QzLXRyYW5zaXRpb24vc3JjL3RyYW5zaXRpb24vdHdlZW4uanMiLCIuLi8uLi9ub2RlX21vZHVsZXMvZDMtdHJhbnNpdGlvbi9zcmMvdHJhbnNpdGlvbi9pbnRlcnBvbGF0ZS5qcyIsIi4uLy4uL25vZGVfbW9kdWxlcy9kMy10cmFuc2l0aW9uL3NyYy90cmFuc2l0aW9uL2F0dHIuanMiLCIuLi8uLi9ub2RlX21vZHVsZXMvZDMtdHJhbnNpdGlvbi9zcmMvdHJhbnNpdGlvbi9hdHRyVHdlZW4uanMiLCIuLi8uLi9ub2RlX21vZHVsZXMvZDMtdHJhbnNpdGlvbi9zcmMvdHJhbnNpdGlvbi9kZWxheS5qcyIsIi4uLy4uL25vZGVfbW9kdWxlcy9kMy10cmFuc2l0aW9uL3NyYy90cmFuc2l0aW9uL2R1cmF0aW9uLmpzIiwiLi4vLi4vbm9kZV9tb2R1bGVzL2QzLXRyYW5zaXRpb24vc3JjL3RyYW5zaXRpb24vZWFzZS5qcyIsIi4uLy4uL25vZGVfbW9kdWxlcy9kMy10cmFuc2l0aW9uL3NyYy90cmFuc2l0aW9uL29uLmpzIiwiLi4vLi4vbm9kZV9tb2R1bGVzL2QzLXRyYW5zaXRpb24vc3JjL3RyYW5zaXRpb24vc2VsZWN0aW9uLmpzIiwiLi4vLi4vbm9kZV9tb2R1bGVzL2QzLXRyYW5zaXRpb24vc3JjL3RyYW5zaXRpb24vc3R5bGUuanMiLCIuLi8uLi9ub2RlX21vZHVsZXMvZDMtdHJhbnNpdGlvbi9zcmMvdHJhbnNpdGlvbi9zdHlsZVR3ZWVuLmpzIiwiLi4vLi4vbm9kZV9tb2R1bGVzL2QzLXRyYW5zaXRpb24vc3JjL3RyYW5zaXRpb24vdGV4dFR3ZWVuLmpzIiwiLi4vLi4vbm9kZV9tb2R1bGVzL2QzLXRyYW5zaXRpb24vc3JjL3RyYW5zaXRpb24vaW5kZXguanMiLCIuLi8uLi9ub2RlX21vZHVsZXMvZDMtdHJhbnNpdGlvbi9zcmMvdHJhbnNpdGlvbi9zZWxlY3QuanMiLCIuLi8uLi9ub2RlX21vZHVsZXMvZDMtdHJhbnNpdGlvbi9zcmMvdHJhbnNpdGlvbi9zZWxlY3RBbGwuanMiLCIuLi8uLi9ub2RlX21vZHVsZXMvZDMtdHJhbnNpdGlvbi9zcmMvdHJhbnNpdGlvbi9maWx0ZXIuanMiLCIuLi8uLi9ub2RlX21vZHVsZXMvZDMtdHJhbnNpdGlvbi9zcmMvdHJhbnNpdGlvbi9tZXJnZS5qcyIsIi4uLy4uL25vZGVfbW9kdWxlcy9kMy10cmFuc2l0aW9uL3NyYy90cmFuc2l0aW9uL3RyYW5zaXRpb24uanMiLCIuLi8uLi9ub2RlX21vZHVsZXMvZDMtdHJhbnNpdGlvbi9zcmMvdHJhbnNpdGlvbi90ZXh0LmpzIiwiLi4vLi4vbm9kZV9tb2R1bGVzL2QzLXRyYW5zaXRpb24vc3JjL3RyYW5zaXRpb24vcmVtb3ZlLmpzIiwiLi4vLi4vbm9kZV9tb2R1bGVzL2QzLXRyYW5zaXRpb24vc3JjL3RyYW5zaXRpb24vZWFzZVZhcnlpbmcuanMiLCIuLi8uLi9ub2RlX21vZHVsZXMvZDMtdHJhbnNpdGlvbi9zcmMvdHJhbnNpdGlvbi9lbmQuanMiLCIuLi8uLi9ub2RlX21vZHVsZXMvZDMtdHJhbnNpdGlvbi9zcmMvc2VsZWN0aW9uL3RyYW5zaXRpb24uanMiLCIuLi8uLi9ub2RlX21vZHVsZXMvZDMtZWFzZS9zcmMvY3ViaWMuanMiLCIuLi8uLi9ub2RlX21vZHVsZXMvZDMtdHJhbnNpdGlvbi9zcmMvc2VsZWN0aW9uL2luZGV4LmpzIiwiLi4vLi4vbm9kZV9tb2R1bGVzL2QzLXRyYW5zaXRpb24vc3JjL3NlbGVjdGlvbi9pbnRlcnJ1cHQuanMiLCIuLi8uLi9ub2RlX21vZHVsZXMvZDMtdHJhbnNpdGlvbi9zcmMvaW50ZXJydXB0LmpzIiwiLi4vLi4vc3JjL2NvbXBvbmVudHMvV2F2ZWZvcm0udnVlIiwiLi4vLi4vbm9kZV9tb2R1bGVzL2QzLXNlbGVjdGlvbi9zcmMvc2VsZWN0LmpzIiwiLi4vLi4vc3JjL2NvbXBvbmVudHMvYXVkaW8uanMiLCIuLi8uLi9zcmMvY29tcG9uZW50cy9FZGl0b3IudnVlIiwiLi4vLi4vc3JjL2NvbXBvbmVudHMvdXRpbHMuanMiLCIuLi8uLi9zcmMvYXVkaW8uanMiLCIuLi8uLi9zcmMvRWRpdG9yV2l0aE1lZGlhTG9hZGVyLnZ1ZSIsIi4uLy4uL3NyYy9saWIuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXHJcbiAqIE1ha2UgYSBtYXAgYW5kIHJldHVybiBhIGZ1bmN0aW9uIGZvciBjaGVja2luZyBpZiBhIGtleVxyXG4gKiBpcyBpbiB0aGF0IG1hcC5cclxuICogSU1QT1JUQU5UOiBhbGwgY2FsbHMgb2YgdGhpcyBmdW5jdGlvbiBtdXN0IGJlIHByZWZpeGVkIHdpdGhcclxuICogXFwvXFwqI1xcX1xcX1BVUkVcXF9cXF9cXCpcXC9cclxuICogU28gdGhhdCByb2xsdXAgY2FuIHRyZWUtc2hha2UgdGhlbSBpZiBuZWNlc3NhcnkuXHJcbiAqL1xyXG5mdW5jdGlvbiBtYWtlTWFwKHN0ciwgZXhwZWN0c0xvd2VyQ2FzZSkge1xyXG4gICAgY29uc3QgbWFwID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcclxuICAgIGNvbnN0IGxpc3QgPSBzdHIuc3BsaXQoJywnKTtcclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbGlzdC5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgIG1hcFtsaXN0W2ldXSA9IHRydWU7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gZXhwZWN0c0xvd2VyQ2FzZSA/IHZhbCA9PiAhIW1hcFt2YWwudG9Mb3dlckNhc2UoKV0gOiB2YWwgPT4gISFtYXBbdmFsXTtcclxufVxuXG4vKipcclxuICogZGV2IG9ubHkgZmxhZyAtPiBuYW1lIG1hcHBpbmdcclxuICovXHJcbmNvbnN0IFBhdGNoRmxhZ05hbWVzID0ge1xyXG4gICAgWzEgLyogVEVYVCAqL106IGBURVhUYCxcclxuICAgIFsyIC8qIENMQVNTICovXTogYENMQVNTYCxcclxuICAgIFs0IC8qIFNUWUxFICovXTogYFNUWUxFYCxcclxuICAgIFs4IC8qIFBST1BTICovXTogYFBST1BTYCxcclxuICAgIFsxNiAvKiBGVUxMX1BST1BTICovXTogYEZVTExfUFJPUFNgLFxyXG4gICAgWzMyIC8qIEhZRFJBVEVfRVZFTlRTICovXTogYEhZRFJBVEVfRVZFTlRTYCxcclxuICAgIFs2NCAvKiBTVEFCTEVfRlJBR01FTlQgKi9dOiBgU1RBQkxFX0ZSQUdNRU5UYCxcclxuICAgIFsxMjggLyogS0VZRURfRlJBR01FTlQgKi9dOiBgS0VZRURfRlJBR01FTlRgLFxyXG4gICAgWzI1NiAvKiBVTktFWUVEX0ZSQUdNRU5UICovXTogYFVOS0VZRURfRlJBR01FTlRgLFxyXG4gICAgWzUxMiAvKiBORUVEX1BBVENIICovXTogYE5FRURfUEFUQ0hgLFxyXG4gICAgWzEwMjQgLyogRFlOQU1JQ19TTE9UUyAqL106IGBEWU5BTUlDX1NMT1RTYCxcclxuICAgIFsyMDQ4IC8qIERFVl9ST09UX0ZSQUdNRU5UICovXTogYERFVl9ST09UX0ZSQUdNRU5UYCxcclxuICAgIFstMSAvKiBIT0lTVEVEICovXTogYEhPSVNURURgLFxyXG4gICAgWy0yIC8qIEJBSUwgKi9dOiBgQkFJTGBcclxufTtcblxuLyoqXHJcbiAqIERldiBvbmx5XHJcbiAqL1xyXG5jb25zdCBzbG90RmxhZ3NUZXh0ID0ge1xyXG4gICAgWzEgLyogU1RBQkxFICovXTogJ1NUQUJMRScsXHJcbiAgICBbMiAvKiBEWU5BTUlDICovXTogJ0RZTkFNSUMnLFxyXG4gICAgWzMgLyogRk9SV0FSREVEICovXTogJ0ZPUldBUkRFRCdcclxufTtcblxuY29uc3QgR0xPQkFMU19XSElURV9MSVNURUQgPSAnSW5maW5pdHksdW5kZWZpbmVkLE5hTixpc0Zpbml0ZSxpc05hTixwYXJzZUZsb2F0LHBhcnNlSW50LGRlY29kZVVSSSwnICtcclxuICAgICdkZWNvZGVVUklDb21wb25lbnQsZW5jb2RlVVJJLGVuY29kZVVSSUNvbXBvbmVudCxNYXRoLE51bWJlcixEYXRlLEFycmF5LCcgK1xyXG4gICAgJ09iamVjdCxCb29sZWFuLFN0cmluZyxSZWdFeHAsTWFwLFNldCxKU09OLEludGwsQmlnSW50JztcclxuY29uc3QgaXNHbG9iYWxseVdoaXRlbGlzdGVkID0gLyojX19QVVJFX18qLyBtYWtlTWFwKEdMT0JBTFNfV0hJVEVfTElTVEVEKTtcblxuY29uc3QgcmFuZ2UgPSAyO1xyXG5mdW5jdGlvbiBnZW5lcmF0ZUNvZGVGcmFtZShzb3VyY2UsIHN0YXJ0ID0gMCwgZW5kID0gc291cmNlLmxlbmd0aCkge1xyXG4gICAgLy8gU3BsaXQgdGhlIGNvbnRlbnQgaW50byBpbmRpdmlkdWFsIGxpbmVzIGJ1dCBjYXB0dXJlIHRoZSBuZXdsaW5lIHNlcXVlbmNlXHJcbiAgICAvLyB0aGF0IHNlcGFyYXRlZCBlYWNoIGxpbmUuIFRoaXMgaXMgaW1wb3J0YW50IGJlY2F1c2UgdGhlIGFjdHVhbCBzZXF1ZW5jZSBpc1xyXG4gICAgLy8gbmVlZGVkIHRvIHByb3Blcmx5IHRha2UgaW50byBhY2NvdW50IHRoZSBmdWxsIGxpbmUgbGVuZ3RoIGZvciBvZmZzZXRcclxuICAgIC8vIGNvbXBhcmlzb25cclxuICAgIGxldCBsaW5lcyA9IHNvdXJjZS5zcGxpdCgvKFxccj9cXG4pLyk7XHJcbiAgICAvLyBTZXBhcmF0ZSB0aGUgbGluZXMgYW5kIG5ld2xpbmUgc2VxdWVuY2VzIGludG8gc2VwYXJhdGUgYXJyYXlzIGZvciBlYXNpZXIgcmVmZXJlbmNpbmdcclxuICAgIGNvbnN0IG5ld2xpbmVTZXF1ZW5jZXMgPSBsaW5lcy5maWx0ZXIoKF8sIGlkeCkgPT4gaWR4ICUgMiA9PT0gMSk7XHJcbiAgICBsaW5lcyA9IGxpbmVzLmZpbHRlcigoXywgaWR4KSA9PiBpZHggJSAyID09PSAwKTtcclxuICAgIGxldCBjb3VudCA9IDA7XHJcbiAgICBjb25zdCByZXMgPSBbXTtcclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbGluZXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICBjb3VudCArPVxyXG4gICAgICAgICAgICBsaW5lc1tpXS5sZW5ndGggK1xyXG4gICAgICAgICAgICAgICAgKChuZXdsaW5lU2VxdWVuY2VzW2ldICYmIG5ld2xpbmVTZXF1ZW5jZXNbaV0ubGVuZ3RoKSB8fCAwKTtcclxuICAgICAgICBpZiAoY291bnQgPj0gc3RhcnQpIHtcclxuICAgICAgICAgICAgZm9yIChsZXQgaiA9IGkgLSByYW5nZTsgaiA8PSBpICsgcmFuZ2UgfHwgZW5kID4gY291bnQ7IGorKykge1xyXG4gICAgICAgICAgICAgICAgaWYgKGogPCAwIHx8IGogPj0gbGluZXMubGVuZ3RoKVxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgbGluZSA9IGogKyAxO1xyXG4gICAgICAgICAgICAgICAgcmVzLnB1c2goYCR7bGluZX0keycgJy5yZXBlYXQoTWF0aC5tYXgoMyAtIFN0cmluZyhsaW5lKS5sZW5ndGgsIDApKX18ICAke2xpbmVzW2pdfWApO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgbGluZUxlbmd0aCA9IGxpbmVzW2pdLmxlbmd0aDtcclxuICAgICAgICAgICAgICAgIGNvbnN0IG5ld0xpbmVTZXFMZW5ndGggPSAobmV3bGluZVNlcXVlbmNlc1tqXSAmJiBuZXdsaW5lU2VxdWVuY2VzW2pdLmxlbmd0aCkgfHwgMDtcclxuICAgICAgICAgICAgICAgIGlmIChqID09PSBpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gcHVzaCB1bmRlcmxpbmVcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBwYWQgPSBzdGFydCAtIChjb3VudCAtIChsaW5lTGVuZ3RoICsgbmV3TGluZVNlcUxlbmd0aCkpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGxlbmd0aCA9IE1hdGgubWF4KDEsIGVuZCA+IGNvdW50ID8gbGluZUxlbmd0aCAtIHBhZCA6IGVuZCAtIHN0YXJ0KTtcclxuICAgICAgICAgICAgICAgICAgICByZXMucHVzaChgICAgfCAgYCArICcgJy5yZXBlYXQocGFkKSArICdeJy5yZXBlYXQobGVuZ3RoKSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIGlmIChqID4gaSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChlbmQgPiBjb3VudCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBsZW5ndGggPSBNYXRoLm1heChNYXRoLm1pbihlbmQgLSBjb3VudCwgbGluZUxlbmd0aCksIDEpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXMucHVzaChgICAgfCAgYCArICdeJy5yZXBlYXQobGVuZ3RoKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGNvdW50ICs9IGxpbmVMZW5ndGggKyBuZXdMaW5lU2VxTGVuZ3RoO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiByZXMuam9pbignXFxuJyk7XHJcbn1cblxuLyoqXHJcbiAqIE9uIHRoZSBjbGllbnQgd2Ugb25seSBuZWVkIHRvIG9mZmVyIHNwZWNpYWwgY2FzZXMgZm9yIGJvb2xlYW4gYXR0cmlidXRlcyB0aGF0XHJcbiAqIGhhdmUgZGlmZmVyZW50IG5hbWVzIGZyb20gdGhlaXIgY29ycmVzcG9uZGluZyBkb20gcHJvcGVydGllczpcclxuICogLSBpdGVtc2NvcGUgLT4gTi9BXHJcbiAqIC0gYWxsb3dmdWxsc2NyZWVuIC0+IGFsbG93RnVsbHNjcmVlblxyXG4gKiAtIGZvcm1ub3ZhbGlkYXRlIC0+IGZvcm1Ob1ZhbGlkYXRlXHJcbiAqIC0gaXNtYXAgLT4gaXNNYXBcclxuICogLSBub21vZHVsZSAtPiBub01vZHVsZVxyXG4gKiAtIG5vdmFsaWRhdGUgLT4gbm9WYWxpZGF0ZVxyXG4gKiAtIHJlYWRvbmx5IC0+IHJlYWRPbmx5XHJcbiAqL1xyXG5jb25zdCBzcGVjaWFsQm9vbGVhbkF0dHJzID0gYGl0ZW1zY29wZSxhbGxvd2Z1bGxzY3JlZW4sZm9ybW5vdmFsaWRhdGUsaXNtYXAsbm9tb2R1bGUsbm92YWxpZGF0ZSxyZWFkb25seWA7XHJcbmNvbnN0IGlzU3BlY2lhbEJvb2xlYW5BdHRyID0gLyojX19QVVJFX18qLyBtYWtlTWFwKHNwZWNpYWxCb29sZWFuQXR0cnMpO1xyXG4vKipcclxuICogVGhlIGZ1bGwgbGlzdCBpcyBuZWVkZWQgZHVyaW5nIFNTUiB0byBwcm9kdWNlIHRoZSBjb3JyZWN0IGluaXRpYWwgbWFya3VwLlxyXG4gKi9cclxuY29uc3QgaXNCb29sZWFuQXR0ciA9IC8qI19fUFVSRV9fKi8gbWFrZU1hcChzcGVjaWFsQm9vbGVhbkF0dHJzICtcclxuICAgIGAsYXN5bmMsYXV0b2ZvY3VzLGF1dG9wbGF5LGNvbnRyb2xzLGRlZmF1bHQsZGVmZXIsZGlzYWJsZWQsaGlkZGVuLGAgK1xyXG4gICAgYGxvb3Asb3BlbixyZXF1aXJlZCxyZXZlcnNlZCxzY29wZWQsc2VhbWxlc3MsYCArXHJcbiAgICBgY2hlY2tlZCxtdXRlZCxtdWx0aXBsZSxzZWxlY3RlZGApO1xyXG4vKipcclxuICogQm9vbGVhbiBhdHRyaWJ1dGVzIHNob3VsZCBiZSBpbmNsdWRlZCBpZiB0aGUgdmFsdWUgaXMgdHJ1dGh5IG9yICcnLlxyXG4gKiBlLmcuIGA8c2VsZWN0IG11bHRpcGxlPmAgY29tcGlsZXMgdG8gYHsgbXVsdGlwbGU6ICcnIH1gXHJcbiAqL1xyXG5mdW5jdGlvbiBpbmNsdWRlQm9vbGVhbkF0dHIodmFsdWUpIHtcclxuICAgIHJldHVybiAhIXZhbHVlIHx8IHZhbHVlID09PSAnJztcclxufVxyXG5jb25zdCB1bnNhZmVBdHRyQ2hhclJFID0gL1s+Lz1cIidcXHUwMDA5XFx1MDAwYVxcdTAwMGNcXHUwMDIwXS87XHJcbmNvbnN0IGF0dHJWYWxpZGF0aW9uQ2FjaGUgPSB7fTtcclxuZnVuY3Rpb24gaXNTU1JTYWZlQXR0ck5hbWUobmFtZSkge1xyXG4gICAgaWYgKGF0dHJWYWxpZGF0aW9uQ2FjaGUuaGFzT3duUHJvcGVydHkobmFtZSkpIHtcclxuICAgICAgICByZXR1cm4gYXR0clZhbGlkYXRpb25DYWNoZVtuYW1lXTtcclxuICAgIH1cclxuICAgIGNvbnN0IGlzVW5zYWZlID0gdW5zYWZlQXR0ckNoYXJSRS50ZXN0KG5hbWUpO1xyXG4gICAgaWYgKGlzVW5zYWZlKSB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcihgdW5zYWZlIGF0dHJpYnV0ZSBuYW1lOiAke25hbWV9YCk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gKGF0dHJWYWxpZGF0aW9uQ2FjaGVbbmFtZV0gPSAhaXNVbnNhZmUpO1xyXG59XHJcbmNvbnN0IHByb3BzVG9BdHRyTWFwID0ge1xyXG4gICAgYWNjZXB0Q2hhcnNldDogJ2FjY2VwdC1jaGFyc2V0JyxcclxuICAgIGNsYXNzTmFtZTogJ2NsYXNzJyxcclxuICAgIGh0bWxGb3I6ICdmb3InLFxyXG4gICAgaHR0cEVxdWl2OiAnaHR0cC1lcXVpdidcclxufTtcclxuLyoqXHJcbiAqIENTUyBwcm9wZXJ0aWVzIHRoYXQgYWNjZXB0IHBsYWluIG51bWJlcnNcclxuICovXHJcbmNvbnN0IGlzTm9Vbml0TnVtZXJpY1N0eWxlUHJvcCA9IC8qI19fUFVSRV9fKi8gbWFrZU1hcChgYW5pbWF0aW9uLWl0ZXJhdGlvbi1jb3VudCxib3JkZXItaW1hZ2Utb3V0c2V0LGJvcmRlci1pbWFnZS1zbGljZSxgICtcclxuICAgIGBib3JkZXItaW1hZ2Utd2lkdGgsYm94LWZsZXgsYm94LWZsZXgtZ3JvdXAsYm94LW9yZGluYWwtZ3JvdXAsY29sdW1uLWNvdW50LGAgK1xyXG4gICAgYGNvbHVtbnMsZmxleCxmbGV4LWdyb3csZmxleC1wb3NpdGl2ZSxmbGV4LXNocmluayxmbGV4LW5lZ2F0aXZlLGZsZXgtb3JkZXIsYCArXHJcbiAgICBgZ3JpZC1yb3csZ3JpZC1yb3ctZW5kLGdyaWQtcm93LXNwYW4sZ3JpZC1yb3ctc3RhcnQsZ3JpZC1jb2x1bW4sYCArXHJcbiAgICBgZ3JpZC1jb2x1bW4tZW5kLGdyaWQtY29sdW1uLXNwYW4sZ3JpZC1jb2x1bW4tc3RhcnQsZm9udC13ZWlnaHQsbGluZS1jbGFtcCxgICtcclxuICAgIGBsaW5lLWhlaWdodCxvcGFjaXR5LG9yZGVyLG9ycGhhbnMsdGFiLXNpemUsd2lkb3dzLHotaW5kZXgsem9vbSxgICtcclxuICAgIC8vIFNWR1xyXG4gICAgYGZpbGwtb3BhY2l0eSxmbG9vZC1vcGFjaXR5LHN0b3Atb3BhY2l0eSxzdHJva2UtZGFzaGFycmF5LHN0cm9rZS1kYXNob2Zmc2V0LGAgK1xyXG4gICAgYHN0cm9rZS1taXRlcmxpbWl0LHN0cm9rZS1vcGFjaXR5LHN0cm9rZS13aWR0aGApO1xyXG4vKipcclxuICogS25vd24gYXR0cmlidXRlcywgdGhpcyBpcyB1c2VkIGZvciBzdHJpbmdpZmljYXRpb24gb2YgcnVudGltZSBzdGF0aWMgbm9kZXNcclxuICogc28gdGhhdCB3ZSBkb24ndCBzdHJpbmdpZnkgYmluZGluZ3MgdGhhdCBjYW5ub3QgYmUgc2V0IGZyb20gSFRNTC5cclxuICogRG9uJ3QgYWxzbyBmb3JnZXQgdG8gYWxsb3cgYGRhdGEtKmAgYW5kIGBhcmlhLSpgIVxyXG4gKiBHZW5lcmF0ZWQgZnJvbSBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9IVE1ML0F0dHJpYnV0ZXNcclxuICovXHJcbmNvbnN0IGlzS25vd25IdG1sQXR0ciA9IC8qI19fUFVSRV9fKi8gbWFrZU1hcChgYWNjZXB0LGFjY2VwdC1jaGFyc2V0LGFjY2Vzc2tleSxhY3Rpb24sYWxpZ24sYWxsb3csYWx0LGFzeW5jLGAgK1xyXG4gICAgYGF1dG9jYXBpdGFsaXplLGF1dG9jb21wbGV0ZSxhdXRvZm9jdXMsYXV0b3BsYXksYmFja2dyb3VuZCxiZ2NvbG9yLGAgK1xyXG4gICAgYGJvcmRlcixidWZmZXJlZCxjYXB0dXJlLGNoYWxsZW5nZSxjaGFyc2V0LGNoZWNrZWQsY2l0ZSxjbGFzcyxjb2RlLGAgK1xyXG4gICAgYGNvZGViYXNlLGNvbG9yLGNvbHMsY29sc3Bhbixjb250ZW50LGNvbnRlbnRlZGl0YWJsZSxjb250ZXh0bWVudSxjb250cm9scyxgICtcclxuICAgIGBjb29yZHMsY3Jvc3NvcmlnaW4sY3NwLGRhdGEsZGF0ZXRpbWUsZGVjb2RpbmcsZGVmYXVsdCxkZWZlcixkaXIsZGlybmFtZSxgICtcclxuICAgIGBkaXNhYmxlZCxkb3dubG9hZCxkcmFnZ2FibGUsZHJvcHpvbmUsZW5jdHlwZSxlbnRlcmtleWhpbnQsZm9yLGZvcm0sYCArXHJcbiAgICBgZm9ybWFjdGlvbixmb3JtZW5jdHlwZSxmb3JtbWV0aG9kLGZvcm1ub3ZhbGlkYXRlLGZvcm10YXJnZXQsaGVhZGVycyxgICtcclxuICAgIGBoZWlnaHQsaGlkZGVuLGhpZ2gsaHJlZixocmVmbGFuZyxodHRwLWVxdWl2LGljb24saWQsaW1wb3J0YW5jZSxpbnRlZ3JpdHksYCArXHJcbiAgICBgaXNtYXAsaXRlbXByb3Asa2V5dHlwZSxraW5kLGxhYmVsLGxhbmcsbGFuZ3VhZ2UsbG9hZGluZyxsaXN0LGxvb3AsbG93LGAgK1xyXG4gICAgYG1hbmlmZXN0LG1heCxtYXhsZW5ndGgsbWlubGVuZ3RoLG1lZGlhLG1pbixtdWx0aXBsZSxtdXRlZCxuYW1lLG5vdmFsaWRhdGUsYCArXHJcbiAgICBgb3BlbixvcHRpbXVtLHBhdHRlcm4scGluZyxwbGFjZWhvbGRlcixwb3N0ZXIscHJlbG9hZCxyYWRpb2dyb3VwLHJlYWRvbmx5LGAgK1xyXG4gICAgYHJlZmVycmVycG9saWN5LHJlbCxyZXF1aXJlZCxyZXZlcnNlZCxyb3dzLHJvd3NwYW4sc2FuZGJveCxzY29wZSxzY29wZWQsYCArXHJcbiAgICBgc2VsZWN0ZWQsc2hhcGUsc2l6ZSxzaXplcyxzbG90LHNwYW4sc3BlbGxjaGVjayxzcmMsc3JjZG9jLHNyY2xhbmcsc3Jjc2V0LGAgK1xyXG4gICAgYHN0YXJ0LHN0ZXAsc3R5bGUsc3VtbWFyeSx0YWJpbmRleCx0YXJnZXQsdGl0bGUsdHJhbnNsYXRlLHR5cGUsdXNlbWFwLGAgK1xyXG4gICAgYHZhbHVlLHdpZHRoLHdyYXBgKTtcclxuLyoqXHJcbiAqIEdlbmVyYXRlZCBmcm9tIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL1NWRy9BdHRyaWJ1dGVcclxuICovXHJcbmNvbnN0IGlzS25vd25TdmdBdHRyID0gLyojX19QVVJFX18qLyBtYWtlTWFwKGB4bWxucyxhY2NlbnQtaGVpZ2h0LGFjY3VtdWxhdGUsYWRkaXRpdmUsYWxpZ25tZW50LWJhc2VsaW5lLGFscGhhYmV0aWMsYW1wbGl0dWRlLGAgK1xyXG4gICAgYGFyYWJpYy1mb3JtLGFzY2VudCxhdHRyaWJ1dGVOYW1lLGF0dHJpYnV0ZVR5cGUsYXppbXV0aCxiYXNlRnJlcXVlbmN5LGAgK1xyXG4gICAgYGJhc2VsaW5lLXNoaWZ0LGJhc2VQcm9maWxlLGJib3gsYmVnaW4sYmlhcyxieSxjYWxjTW9kZSxjYXAtaGVpZ2h0LGNsYXNzLGAgK1xyXG4gICAgYGNsaXAsY2xpcFBhdGhVbml0cyxjbGlwLXBhdGgsY2xpcC1ydWxlLGNvbG9yLGNvbG9yLWludGVycG9sYXRpb24sYCArXHJcbiAgICBgY29sb3ItaW50ZXJwb2xhdGlvbi1maWx0ZXJzLGNvbG9yLXByb2ZpbGUsY29sb3ItcmVuZGVyaW5nLGAgK1xyXG4gICAgYGNvbnRlbnRTY3JpcHRUeXBlLGNvbnRlbnRTdHlsZVR5cGUsY3Jvc3NvcmlnaW4sY3Vyc29yLGN4LGN5LGQsZGVjZWxlcmF0ZSxgICtcclxuICAgIGBkZXNjZW50LGRpZmZ1c2VDb25zdGFudCxkaXJlY3Rpb24sZGlzcGxheSxkaXZpc29yLGRvbWluYW50LWJhc2VsaW5lLGR1cixkeCxgICtcclxuICAgIGBkeSxlZGdlTW9kZSxlbGV2YXRpb24sZW5hYmxlLWJhY2tncm91bmQsZW5kLGV4cG9uZW50LGZpbGwsZmlsbC1vcGFjaXR5LGAgK1xyXG4gICAgYGZpbGwtcnVsZSxmaWx0ZXIsZmlsdGVyUmVzLGZpbHRlclVuaXRzLGZsb29kLWNvbG9yLGZsb29kLW9wYWNpdHksYCArXHJcbiAgICBgZm9udC1mYW1pbHksZm9udC1zaXplLGZvbnQtc2l6ZS1hZGp1c3QsZm9udC1zdHJldGNoLGZvbnQtc3R5bGUsYCArXHJcbiAgICBgZm9udC12YXJpYW50LGZvbnQtd2VpZ2h0LGZvcm1hdCxmcm9tLGZyLGZ4LGZ5LGcxLGcyLGdseXBoLW5hbWUsYCArXHJcbiAgICBgZ2x5cGgtb3JpZW50YXRpb24taG9yaXpvbnRhbCxnbHlwaC1vcmllbnRhdGlvbi12ZXJ0aWNhbCxnbHlwaFJlZixgICtcclxuICAgIGBncmFkaWVudFRyYW5zZm9ybSxncmFkaWVudFVuaXRzLGhhbmdpbmcsaGVpZ2h0LGhyZWYsaHJlZmxhbmcsaG9yaXotYWR2LXgsYCArXHJcbiAgICBgaG9yaXotb3JpZ2luLXgsaWQsaWRlb2dyYXBoaWMsaW1hZ2UtcmVuZGVyaW5nLGluLGluMixpbnRlcmNlcHQsayxrMSxrMixrMyxgICtcclxuICAgIGBrNCxrZXJuZWxNYXRyaXgsa2VybmVsVW5pdExlbmd0aCxrZXJuaW5nLGtleVBvaW50cyxrZXlTcGxpbmVzLGtleVRpbWVzLGAgK1xyXG4gICAgYGxhbmcsbGVuZ3RoQWRqdXN0LGxldHRlci1zcGFjaW5nLGxpZ2h0aW5nLWNvbG9yLGxpbWl0aW5nQ29uZUFuZ2xlLGxvY2FsLGAgK1xyXG4gICAgYG1hcmtlci1lbmQsbWFya2VyLW1pZCxtYXJrZXItc3RhcnQsbWFya2VySGVpZ2h0LG1hcmtlclVuaXRzLG1hcmtlcldpZHRoLGAgK1xyXG4gICAgYG1hc2ssbWFza0NvbnRlbnRVbml0cyxtYXNrVW5pdHMsbWF0aGVtYXRpY2FsLG1heCxtZWRpYSxtZXRob2QsbWluLG1vZGUsYCArXHJcbiAgICBgbmFtZSxudW1PY3RhdmVzLG9mZnNldCxvcGFjaXR5LG9wZXJhdG9yLG9yZGVyLG9yaWVudCxvcmllbnRhdGlvbixvcmlnaW4sYCArXHJcbiAgICBgb3ZlcmZsb3csb3ZlcmxpbmUtcG9zaXRpb24sb3ZlcmxpbmUtdGhpY2tuZXNzLHBhbm9zZS0xLHBhaW50LW9yZGVyLHBhdGgsYCArXHJcbiAgICBgcGF0aExlbmd0aCxwYXR0ZXJuQ29udGVudFVuaXRzLHBhdHRlcm5UcmFuc2Zvcm0scGF0dGVyblVuaXRzLHBpbmcsYCArXHJcbiAgICBgcG9pbnRlci1ldmVudHMscG9pbnRzLHBvaW50c0F0WCxwb2ludHNBdFkscG9pbnRzQXRaLHByZXNlcnZlQWxwaGEsYCArXHJcbiAgICBgcHJlc2VydmVBc3BlY3RSYXRpbyxwcmltaXRpdmVVbml0cyxyLHJhZGl1cyxyZWZlcnJlclBvbGljeSxyZWZYLHJlZlkscmVsLGAgK1xyXG4gICAgYHJlbmRlcmluZy1pbnRlbnQscmVwZWF0Q291bnQscmVwZWF0RHVyLHJlcXVpcmVkRXh0ZW5zaW9ucyxyZXF1aXJlZEZlYXR1cmVzLGAgK1xyXG4gICAgYHJlc3RhcnQscmVzdWx0LHJvdGF0ZSxyeCxyeSxzY2FsZSxzZWVkLHNoYXBlLXJlbmRlcmluZyxzbG9wZSxzcGFjaW5nLGAgK1xyXG4gICAgYHNwZWN1bGFyQ29uc3RhbnQsc3BlY3VsYXJFeHBvbmVudCxzcGVlZCxzcHJlYWRNZXRob2Qsc3RhcnRPZmZzZXQsYCArXHJcbiAgICBgc3RkRGV2aWF0aW9uLHN0ZW1oLHN0ZW12LHN0aXRjaFRpbGVzLHN0b3AtY29sb3Isc3RvcC1vcGFjaXR5LGAgK1xyXG4gICAgYHN0cmlrZXRocm91Z2gtcG9zaXRpb24sc3RyaWtldGhyb3VnaC10aGlja25lc3Msc3RyaW5nLHN0cm9rZSxgICtcclxuICAgIGBzdHJva2UtZGFzaGFycmF5LHN0cm9rZS1kYXNob2Zmc2V0LHN0cm9rZS1saW5lY2FwLHN0cm9rZS1saW5lam9pbixgICtcclxuICAgIGBzdHJva2UtbWl0ZXJsaW1pdCxzdHJva2Utb3BhY2l0eSxzdHJva2Utd2lkdGgsc3R5bGUsc3VyZmFjZVNjYWxlLGAgK1xyXG4gICAgYHN5c3RlbUxhbmd1YWdlLHRhYmluZGV4LHRhYmxlVmFsdWVzLHRhcmdldCx0YXJnZXRYLHRhcmdldFksdGV4dC1hbmNob3IsYCArXHJcbiAgICBgdGV4dC1kZWNvcmF0aW9uLHRleHQtcmVuZGVyaW5nLHRleHRMZW5ndGgsdG8sdHJhbnNmb3JtLHRyYW5zZm9ybS1vcmlnaW4sYCArXHJcbiAgICBgdHlwZSx1MSx1Mix1bmRlcmxpbmUtcG9zaXRpb24sdW5kZXJsaW5lLXRoaWNrbmVzcyx1bmljb2RlLHVuaWNvZGUtYmlkaSxgICtcclxuICAgIGB1bmljb2RlLXJhbmdlLHVuaXRzLXBlci1lbSx2LWFscGhhYmV0aWMsdi1oYW5naW5nLHYtaWRlb2dyYXBoaWMsYCArXHJcbiAgICBgdi1tYXRoZW1hdGljYWwsdmFsdWVzLHZlY3Rvci1lZmZlY3QsdmVyc2lvbix2ZXJ0LWFkdi15LHZlcnQtb3JpZ2luLXgsYCArXHJcbiAgICBgdmVydC1vcmlnaW4teSx2aWV3Qm94LHZpZXdUYXJnZXQsdmlzaWJpbGl0eSx3aWR0aCx3aWR0aHMsd29yZC1zcGFjaW5nLGAgK1xyXG4gICAgYHdyaXRpbmctbW9kZSx4LHgtaGVpZ2h0LHgxLHgyLHhDaGFubmVsU2VsZWN0b3IseGxpbms6YWN0dWF0ZSx4bGluazphcmNyb2xlLGAgK1xyXG4gICAgYHhsaW5rOmhyZWYseGxpbms6cm9sZSx4bGluazpzaG93LHhsaW5rOnRpdGxlLHhsaW5rOnR5cGUseG1sOmJhc2UseG1sOmxhbmcsYCArXHJcbiAgICBgeG1sOnNwYWNlLHkseTEseTIseUNoYW5uZWxTZWxlY3Rvcix6LHpvb21BbmRQYW5gKTtcblxuZnVuY3Rpb24gbm9ybWFsaXplU3R5bGUodmFsdWUpIHtcclxuICAgIGlmIChpc0FycmF5KHZhbHVlKSkge1xyXG4gICAgICAgIGNvbnN0IHJlcyA9IHt9O1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdmFsdWUubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgY29uc3QgaXRlbSA9IHZhbHVlW2ldO1xyXG4gICAgICAgICAgICBjb25zdCBub3JtYWxpemVkID0gaXNTdHJpbmcoaXRlbSlcclxuICAgICAgICAgICAgICAgID8gcGFyc2VTdHJpbmdTdHlsZShpdGVtKVxyXG4gICAgICAgICAgICAgICAgOiBub3JtYWxpemVTdHlsZShpdGVtKTtcclxuICAgICAgICAgICAgaWYgKG5vcm1hbGl6ZWQpIHtcclxuICAgICAgICAgICAgICAgIGZvciAoY29uc3Qga2V5IGluIG5vcm1hbGl6ZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXNba2V5XSA9IG5vcm1hbGl6ZWRba2V5XTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gcmVzO1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZiAoaXNTdHJpbmcodmFsdWUpKSB7XHJcbiAgICAgICAgcmV0dXJuIHZhbHVlO1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZiAoaXNPYmplY3QodmFsdWUpKSB7XHJcbiAgICAgICAgcmV0dXJuIHZhbHVlO1xyXG4gICAgfVxyXG59XHJcbmNvbnN0IGxpc3REZWxpbWl0ZXJSRSA9IC87KD8hW14oXSpcXCkpL2c7XHJcbmNvbnN0IHByb3BlcnR5RGVsaW1pdGVyUkUgPSAvOiguKykvO1xyXG5mdW5jdGlvbiBwYXJzZVN0cmluZ1N0eWxlKGNzc1RleHQpIHtcclxuICAgIGNvbnN0IHJldCA9IHt9O1xyXG4gICAgY3NzVGV4dC5zcGxpdChsaXN0RGVsaW1pdGVyUkUpLmZvckVhY2goaXRlbSA9PiB7XHJcbiAgICAgICAgaWYgKGl0ZW0pIHtcclxuICAgICAgICAgICAgY29uc3QgdG1wID0gaXRlbS5zcGxpdChwcm9wZXJ0eURlbGltaXRlclJFKTtcclxuICAgICAgICAgICAgdG1wLmxlbmd0aCA+IDEgJiYgKHJldFt0bXBbMF0udHJpbSgpXSA9IHRtcFsxXS50cmltKCkpO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG4gICAgcmV0dXJuIHJldDtcclxufVxyXG5mdW5jdGlvbiBzdHJpbmdpZnlTdHlsZShzdHlsZXMpIHtcclxuICAgIGxldCByZXQgPSAnJztcclxuICAgIGlmICghc3R5bGVzIHx8IGlzU3RyaW5nKHN0eWxlcykpIHtcclxuICAgICAgICByZXR1cm4gcmV0O1xyXG4gICAgfVxyXG4gICAgZm9yIChjb25zdCBrZXkgaW4gc3R5bGVzKSB7XHJcbiAgICAgICAgY29uc3QgdmFsdWUgPSBzdHlsZXNba2V5XTtcclxuICAgICAgICBjb25zdCBub3JtYWxpemVkS2V5ID0ga2V5LnN0YXJ0c1dpdGgoYC0tYCkgPyBrZXkgOiBoeXBoZW5hdGUoa2V5KTtcclxuICAgICAgICBpZiAoaXNTdHJpbmcodmFsdWUpIHx8XHJcbiAgICAgICAgICAgICh0eXBlb2YgdmFsdWUgPT09ICdudW1iZXInICYmIGlzTm9Vbml0TnVtZXJpY1N0eWxlUHJvcChub3JtYWxpemVkS2V5KSkpIHtcclxuICAgICAgICAgICAgLy8gb25seSByZW5kZXIgdmFsaWQgdmFsdWVzXHJcbiAgICAgICAgICAgIHJldCArPSBgJHtub3JtYWxpemVkS2V5fToke3ZhbHVlfTtgO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiByZXQ7XHJcbn1cclxuZnVuY3Rpb24gbm9ybWFsaXplQ2xhc3ModmFsdWUpIHtcclxuICAgIGxldCByZXMgPSAnJztcclxuICAgIGlmIChpc1N0cmluZyh2YWx1ZSkpIHtcclxuICAgICAgICByZXMgPSB2YWx1ZTtcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKGlzQXJyYXkodmFsdWUpKSB7XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB2YWx1ZS5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBjb25zdCBub3JtYWxpemVkID0gbm9ybWFsaXplQ2xhc3ModmFsdWVbaV0pO1xyXG4gICAgICAgICAgICBpZiAobm9ybWFsaXplZCkge1xyXG4gICAgICAgICAgICAgICAgcmVzICs9IG5vcm1hbGl6ZWQgKyAnICc7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmIChpc09iamVjdCh2YWx1ZSkpIHtcclxuICAgICAgICBmb3IgKGNvbnN0IG5hbWUgaW4gdmFsdWUpIHtcclxuICAgICAgICAgICAgaWYgKHZhbHVlW25hbWVdKSB7XHJcbiAgICAgICAgICAgICAgICByZXMgKz0gbmFtZSArICcgJztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiByZXMudHJpbSgpO1xyXG59XHJcbmZ1bmN0aW9uIG5vcm1hbGl6ZVByb3BzKHByb3BzKSB7XHJcbiAgICBpZiAoIXByb3BzKVxyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgbGV0IHsgY2xhc3M6IGtsYXNzLCBzdHlsZSB9ID0gcHJvcHM7XHJcbiAgICBpZiAoa2xhc3MgJiYgIWlzU3RyaW5nKGtsYXNzKSkge1xyXG4gICAgICAgIHByb3BzLmNsYXNzID0gbm9ybWFsaXplQ2xhc3Moa2xhc3MpO1xyXG4gICAgfVxyXG4gICAgaWYgKHN0eWxlKSB7XHJcbiAgICAgICAgcHJvcHMuc3R5bGUgPSBub3JtYWxpemVTdHlsZShzdHlsZSk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gcHJvcHM7XHJcbn1cblxuLy8gVGhlc2UgdGFnIGNvbmZpZ3MgYXJlIHNoYXJlZCBiZXR3ZWVuIGNvbXBpbGVyLWRvbSBhbmQgcnVudGltZS1kb20sIHNvIHRoZXlcclxuLy8gaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvSFRNTC9FbGVtZW50XHJcbmNvbnN0IEhUTUxfVEFHUyA9ICdodG1sLGJvZHksYmFzZSxoZWFkLGxpbmssbWV0YSxzdHlsZSx0aXRsZSxhZGRyZXNzLGFydGljbGUsYXNpZGUsZm9vdGVyLCcgK1xyXG4gICAgJ2hlYWRlcixoMSxoMixoMyxoNCxoNSxoNixuYXYsc2VjdGlvbixkaXYsZGQsZGwsZHQsZmlnY2FwdGlvbiwnICtcclxuICAgICdmaWd1cmUscGljdHVyZSxocixpbWcsbGksbWFpbixvbCxwLHByZSx1bCxhLGIsYWJicixiZGksYmRvLGJyLGNpdGUsY29kZSwnICtcclxuICAgICdkYXRhLGRmbixlbSxpLGtiZCxtYXJrLHEscnAscnQscnVieSxzLHNhbXAsc21hbGwsc3BhbixzdHJvbmcsc3ViLHN1cCwnICtcclxuICAgICd0aW1lLHUsdmFyLHdicixhcmVhLGF1ZGlvLG1hcCx0cmFjayx2aWRlbyxlbWJlZCxvYmplY3QscGFyYW0sc291cmNlLCcgK1xyXG4gICAgJ2NhbnZhcyxzY3JpcHQsbm9zY3JpcHQsZGVsLGlucyxjYXB0aW9uLGNvbCxjb2xncm91cCx0YWJsZSx0aGVhZCx0Ym9keSx0ZCwnICtcclxuICAgICd0aCx0cixidXR0b24sZGF0YWxpc3QsZmllbGRzZXQsZm9ybSxpbnB1dCxsYWJlbCxsZWdlbmQsbWV0ZXIsb3B0Z3JvdXAsJyArXHJcbiAgICAnb3B0aW9uLG91dHB1dCxwcm9ncmVzcyxzZWxlY3QsdGV4dGFyZWEsZGV0YWlscyxkaWFsb2csbWVudSwnICtcclxuICAgICdzdW1tYXJ5LHRlbXBsYXRlLGJsb2NrcXVvdGUsaWZyYW1lLHRmb290JztcclxuLy8gaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvU1ZHL0VsZW1lbnRcclxuY29uc3QgU1ZHX1RBR1MgPSAnc3ZnLGFuaW1hdGUsYW5pbWF0ZU1vdGlvbixhbmltYXRlVHJhbnNmb3JtLGNpcmNsZSxjbGlwUGF0aCxjb2xvci1wcm9maWxlLCcgK1xyXG4gICAgJ2RlZnMsZGVzYyxkaXNjYXJkLGVsbGlwc2UsZmVCbGVuZCxmZUNvbG9yTWF0cml4LGZlQ29tcG9uZW50VHJhbnNmZXIsJyArXHJcbiAgICAnZmVDb21wb3NpdGUsZmVDb252b2x2ZU1hdHJpeCxmZURpZmZ1c2VMaWdodGluZyxmZURpc3BsYWNlbWVudE1hcCwnICtcclxuICAgICdmZURpc3RhbmNlTGlnaHQsZmVEcm9wU2hhZG93LGZlRmxvb2QsZmVGdW5jQSxmZUZ1bmNCLGZlRnVuY0csZmVGdW5jUiwnICtcclxuICAgICdmZUdhdXNzaWFuQmx1cixmZUltYWdlLGZlTWVyZ2UsZmVNZXJnZU5vZGUsZmVNb3JwaG9sb2d5LGZlT2Zmc2V0LCcgK1xyXG4gICAgJ2ZlUG9pbnRMaWdodCxmZVNwZWN1bGFyTGlnaHRpbmcsZmVTcG90TGlnaHQsZmVUaWxlLGZlVHVyYnVsZW5jZSxmaWx0ZXIsJyArXHJcbiAgICAnZm9yZWlnbk9iamVjdCxnLGhhdGNoLGhhdGNocGF0aCxpbWFnZSxsaW5lLGxpbmVhckdyYWRpZW50LG1hcmtlcixtYXNrLCcgK1xyXG4gICAgJ21lc2gsbWVzaGdyYWRpZW50LG1lc2hwYXRjaCxtZXNocm93LG1ldGFkYXRhLG1wYXRoLHBhdGgscGF0dGVybiwnICtcclxuICAgICdwb2x5Z29uLHBvbHlsaW5lLHJhZGlhbEdyYWRpZW50LHJlY3Qsc2V0LHNvbGlkY29sb3Isc3RvcCxzd2l0Y2gsc3ltYm9sLCcgK1xyXG4gICAgJ3RleHQsdGV4dFBhdGgsdGl0bGUsdHNwYW4sdW5rbm93bix1c2Usdmlldyc7XHJcbmNvbnN0IFZPSURfVEFHUyA9ICdhcmVhLGJhc2UsYnIsY29sLGVtYmVkLGhyLGltZyxpbnB1dCxsaW5rLG1ldGEscGFyYW0sc291cmNlLHRyYWNrLHdicic7XHJcbmNvbnN0IGlzSFRNTFRhZyA9IC8qI19fUFVSRV9fKi8gbWFrZU1hcChIVE1MX1RBR1MpO1xyXG5jb25zdCBpc1NWR1RhZyA9IC8qI19fUFVSRV9fKi8gbWFrZU1hcChTVkdfVEFHUyk7XHJcbmNvbnN0IGlzVm9pZFRhZyA9IC8qI19fUFVSRV9fKi8gbWFrZU1hcChWT0lEX1RBR1MpO1xuXG5jb25zdCBlc2NhcGVSRSA9IC9bXCInJjw+XS87XHJcbmZ1bmN0aW9uIGVzY2FwZUh0bWwoc3RyaW5nKSB7XHJcbiAgICBjb25zdCBzdHIgPSAnJyArIHN0cmluZztcclxuICAgIGNvbnN0IG1hdGNoID0gZXNjYXBlUkUuZXhlYyhzdHIpO1xyXG4gICAgaWYgKCFtYXRjaCkge1xyXG4gICAgICAgIHJldHVybiBzdHI7XHJcbiAgICB9XHJcbiAgICBsZXQgaHRtbCA9ICcnO1xyXG4gICAgbGV0IGVzY2FwZWQ7XHJcbiAgICBsZXQgaW5kZXg7XHJcbiAgICBsZXQgbGFzdEluZGV4ID0gMDtcclxuICAgIGZvciAoaW5kZXggPSBtYXRjaC5pbmRleDsgaW5kZXggPCBzdHIubGVuZ3RoOyBpbmRleCsrKSB7XHJcbiAgICAgICAgc3dpdGNoIChzdHIuY2hhckNvZGVBdChpbmRleCkpIHtcclxuICAgICAgICAgICAgY2FzZSAzNDogLy8gXCJcclxuICAgICAgICAgICAgICAgIGVzY2FwZWQgPSAnJnF1b3Q7JztcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIDM4OiAvLyAmXHJcbiAgICAgICAgICAgICAgICBlc2NhcGVkID0gJyZhbXA7JztcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIDM5OiAvLyAnXHJcbiAgICAgICAgICAgICAgICBlc2NhcGVkID0gJyYjMzk7JztcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIDYwOiAvLyA8XHJcbiAgICAgICAgICAgICAgICBlc2NhcGVkID0gJyZsdDsnO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgNjI6IC8vID5cclxuICAgICAgICAgICAgICAgIGVzY2FwZWQgPSAnJmd0Oyc7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAobGFzdEluZGV4ICE9PSBpbmRleCkge1xyXG4gICAgICAgICAgICBodG1sICs9IHN0ci5zbGljZShsYXN0SW5kZXgsIGluZGV4KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgbGFzdEluZGV4ID0gaW5kZXggKyAxO1xyXG4gICAgICAgIGh0bWwgKz0gZXNjYXBlZDtcclxuICAgIH1cclxuICAgIHJldHVybiBsYXN0SW5kZXggIT09IGluZGV4ID8gaHRtbCArIHN0ci5zbGljZShsYXN0SW5kZXgsIGluZGV4KSA6IGh0bWw7XHJcbn1cclxuLy8gaHR0cHM6Ly93d3cudzMub3JnL1RSL2h0bWw1Mi9zeW50YXguaHRtbCNjb21tZW50c1xyXG5jb25zdCBjb21tZW50U3RyaXBSRSA9IC9eLT8+fDwhLS18LS0+fC0tIT58PCEtJC9nO1xyXG5mdW5jdGlvbiBlc2NhcGVIdG1sQ29tbWVudChzcmMpIHtcclxuICAgIHJldHVybiBzcmMucmVwbGFjZShjb21tZW50U3RyaXBSRSwgJycpO1xyXG59XG5cbmZ1bmN0aW9uIGxvb3NlQ29tcGFyZUFycmF5cyhhLCBiKSB7XHJcbiAgICBpZiAoYS5sZW5ndGggIT09IGIubGVuZ3RoKVxyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIGxldCBlcXVhbCA9IHRydWU7XHJcbiAgICBmb3IgKGxldCBpID0gMDsgZXF1YWwgJiYgaSA8IGEubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICBlcXVhbCA9IGxvb3NlRXF1YWwoYVtpXSwgYltpXSk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gZXF1YWw7XHJcbn1cclxuZnVuY3Rpb24gbG9vc2VFcXVhbChhLCBiKSB7XHJcbiAgICBpZiAoYSA9PT0gYilcclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIGxldCBhVmFsaWRUeXBlID0gaXNEYXRlKGEpO1xyXG4gICAgbGV0IGJWYWxpZFR5cGUgPSBpc0RhdGUoYik7XHJcbiAgICBpZiAoYVZhbGlkVHlwZSB8fCBiVmFsaWRUeXBlKSB7XHJcbiAgICAgICAgcmV0dXJuIGFWYWxpZFR5cGUgJiYgYlZhbGlkVHlwZSA/IGEuZ2V0VGltZSgpID09PSBiLmdldFRpbWUoKSA6IGZhbHNlO1xyXG4gICAgfVxyXG4gICAgYVZhbGlkVHlwZSA9IGlzQXJyYXkoYSk7XHJcbiAgICBiVmFsaWRUeXBlID0gaXNBcnJheShiKTtcclxuICAgIGlmIChhVmFsaWRUeXBlIHx8IGJWYWxpZFR5cGUpIHtcclxuICAgICAgICByZXR1cm4gYVZhbGlkVHlwZSAmJiBiVmFsaWRUeXBlID8gbG9vc2VDb21wYXJlQXJyYXlzKGEsIGIpIDogZmFsc2U7XHJcbiAgICB9XHJcbiAgICBhVmFsaWRUeXBlID0gaXNPYmplY3QoYSk7XHJcbiAgICBiVmFsaWRUeXBlID0gaXNPYmplY3QoYik7XHJcbiAgICBpZiAoYVZhbGlkVHlwZSB8fCBiVmFsaWRUeXBlKSB7XHJcbiAgICAgICAgLyogaXN0YW5idWwgaWdub3JlIGlmOiB0aGlzIGlmIHdpbGwgcHJvYmFibHkgbmV2ZXIgYmUgY2FsbGVkICovXHJcbiAgICAgICAgaWYgKCFhVmFsaWRUeXBlIHx8ICFiVmFsaWRUeXBlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgYUtleXNDb3VudCA9IE9iamVjdC5rZXlzKGEpLmxlbmd0aDtcclxuICAgICAgICBjb25zdCBiS2V5c0NvdW50ID0gT2JqZWN0LmtleXMoYikubGVuZ3RoO1xyXG4gICAgICAgIGlmIChhS2V5c0NvdW50ICE9PSBiS2V5c0NvdW50KSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gYSkge1xyXG4gICAgICAgICAgICBjb25zdCBhSGFzS2V5ID0gYS5oYXNPd25Qcm9wZXJ0eShrZXkpO1xyXG4gICAgICAgICAgICBjb25zdCBiSGFzS2V5ID0gYi5oYXNPd25Qcm9wZXJ0eShrZXkpO1xyXG4gICAgICAgICAgICBpZiAoKGFIYXNLZXkgJiYgIWJIYXNLZXkpIHx8XHJcbiAgICAgICAgICAgICAgICAoIWFIYXNLZXkgJiYgYkhhc0tleSkgfHxcclxuICAgICAgICAgICAgICAgICFsb29zZUVxdWFsKGFba2V5XSwgYltrZXldKSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIFN0cmluZyhhKSA9PT0gU3RyaW5nKGIpO1xyXG59XHJcbmZ1bmN0aW9uIGxvb3NlSW5kZXhPZihhcnIsIHZhbCkge1xyXG4gICAgcmV0dXJuIGFyci5maW5kSW5kZXgoaXRlbSA9PiBsb29zZUVxdWFsKGl0ZW0sIHZhbCkpO1xyXG59XG5cbi8qKlxyXG4gKiBGb3IgY29udmVydGluZyB7eyBpbnRlcnBvbGF0aW9uIH19IHZhbHVlcyB0byBkaXNwbGF5ZWQgc3RyaW5ncy5cclxuICogQHByaXZhdGVcclxuICovXHJcbmNvbnN0IHRvRGlzcGxheVN0cmluZyA9ICh2YWwpID0+IHtcclxuICAgIHJldHVybiB2YWwgPT0gbnVsbFxyXG4gICAgICAgID8gJydcclxuICAgICAgICA6IGlzQXJyYXkodmFsKSB8fFxyXG4gICAgICAgICAgICAoaXNPYmplY3QodmFsKSAmJlxyXG4gICAgICAgICAgICAgICAgKHZhbC50b1N0cmluZyA9PT0gb2JqZWN0VG9TdHJpbmcgfHwgIWlzRnVuY3Rpb24odmFsLnRvU3RyaW5nKSkpXHJcbiAgICAgICAgICAgID8gSlNPTi5zdHJpbmdpZnkodmFsLCByZXBsYWNlciwgMilcclxuICAgICAgICAgICAgOiBTdHJpbmcodmFsKTtcclxufTtcclxuY29uc3QgcmVwbGFjZXIgPSAoX2tleSwgdmFsKSA9PiB7XHJcbiAgICAvLyBjYW4ndCB1c2UgaXNSZWYgaGVyZSBzaW5jZSBAdnVlL3NoYXJlZCBoYXMgbm8gZGVwc1xyXG4gICAgaWYgKHZhbCAmJiB2YWwuX192X2lzUmVmKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcGxhY2VyKF9rZXksIHZhbC52YWx1ZSk7XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmIChpc01hcCh2YWwpKSB7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgW2BNYXAoJHt2YWwuc2l6ZX0pYF06IFsuLi52YWwuZW50cmllcygpXS5yZWR1Y2UoKGVudHJpZXMsIFtrZXksIHZhbF0pID0+IHtcclxuICAgICAgICAgICAgICAgIGVudHJpZXNbYCR7a2V5fSA9PmBdID0gdmFsO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGVudHJpZXM7XHJcbiAgICAgICAgICAgIH0sIHt9KVxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmIChpc1NldCh2YWwpKSB7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgW2BTZXQoJHt2YWwuc2l6ZX0pYF06IFsuLi52YWwudmFsdWVzKCldXHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKGlzT2JqZWN0KHZhbCkgJiYgIWlzQXJyYXkodmFsKSAmJiAhaXNQbGFpbk9iamVjdCh2YWwpKSB7XHJcbiAgICAgICAgcmV0dXJuIFN0cmluZyh2YWwpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHZhbDtcclxufTtcblxuY29uc3QgRU1QVFlfT0JKID0gKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpXHJcbiAgICA/IE9iamVjdC5mcmVlemUoe30pXHJcbiAgICA6IHt9O1xyXG5jb25zdCBFTVBUWV9BUlIgPSAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgPyBPYmplY3QuZnJlZXplKFtdKSA6IFtdO1xyXG5jb25zdCBOT09QID0gKCkgPT4geyB9O1xyXG4vKipcclxuICogQWx3YXlzIHJldHVybiBmYWxzZS5cclxuICovXHJcbmNvbnN0IE5PID0gKCkgPT4gZmFsc2U7XHJcbmNvbnN0IG9uUkUgPSAvXm9uW15hLXpdLztcclxuY29uc3QgaXNPbiA9IChrZXkpID0+IG9uUkUudGVzdChrZXkpO1xyXG5jb25zdCBpc01vZGVsTGlzdGVuZXIgPSAoa2V5KSA9PiBrZXkuc3RhcnRzV2l0aCgnb25VcGRhdGU6Jyk7XHJcbmNvbnN0IGV4dGVuZCA9IE9iamVjdC5hc3NpZ247XHJcbmNvbnN0IHJlbW92ZSA9IChhcnIsIGVsKSA9PiB7XHJcbiAgICBjb25zdCBpID0gYXJyLmluZGV4T2YoZWwpO1xyXG4gICAgaWYgKGkgPiAtMSkge1xyXG4gICAgICAgIGFyci5zcGxpY2UoaSwgMSk7XHJcbiAgICB9XHJcbn07XHJcbmNvbnN0IGhhc093blByb3BlcnR5ID0gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eTtcclxuY29uc3QgaGFzT3duID0gKHZhbCwga2V5KSA9PiBoYXNPd25Qcm9wZXJ0eS5jYWxsKHZhbCwga2V5KTtcclxuY29uc3QgaXNBcnJheSA9IEFycmF5LmlzQXJyYXk7XHJcbmNvbnN0IGlzTWFwID0gKHZhbCkgPT4gdG9UeXBlU3RyaW5nKHZhbCkgPT09ICdbb2JqZWN0IE1hcF0nO1xyXG5jb25zdCBpc1NldCA9ICh2YWwpID0+IHRvVHlwZVN0cmluZyh2YWwpID09PSAnW29iamVjdCBTZXRdJztcclxuY29uc3QgaXNEYXRlID0gKHZhbCkgPT4gdmFsIGluc3RhbmNlb2YgRGF0ZTtcclxuY29uc3QgaXNGdW5jdGlvbiA9ICh2YWwpID0+IHR5cGVvZiB2YWwgPT09ICdmdW5jdGlvbic7XHJcbmNvbnN0IGlzU3RyaW5nID0gKHZhbCkgPT4gdHlwZW9mIHZhbCA9PT0gJ3N0cmluZyc7XHJcbmNvbnN0IGlzU3ltYm9sID0gKHZhbCkgPT4gdHlwZW9mIHZhbCA9PT0gJ3N5bWJvbCc7XHJcbmNvbnN0IGlzT2JqZWN0ID0gKHZhbCkgPT4gdmFsICE9PSBudWxsICYmIHR5cGVvZiB2YWwgPT09ICdvYmplY3QnO1xyXG5jb25zdCBpc1Byb21pc2UgPSAodmFsKSA9PiB7XHJcbiAgICByZXR1cm4gaXNPYmplY3QodmFsKSAmJiBpc0Z1bmN0aW9uKHZhbC50aGVuKSAmJiBpc0Z1bmN0aW9uKHZhbC5jYXRjaCk7XHJcbn07XHJcbmNvbnN0IG9iamVjdFRvU3RyaW5nID0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZztcclxuY29uc3QgdG9UeXBlU3RyaW5nID0gKHZhbHVlKSA9PiBvYmplY3RUb1N0cmluZy5jYWxsKHZhbHVlKTtcclxuY29uc3QgdG9SYXdUeXBlID0gKHZhbHVlKSA9PiB7XHJcbiAgICAvLyBleHRyYWN0IFwiUmF3VHlwZVwiIGZyb20gc3RyaW5ncyBsaWtlIFwiW29iamVjdCBSYXdUeXBlXVwiXHJcbiAgICByZXR1cm4gdG9UeXBlU3RyaW5nKHZhbHVlKS5zbGljZSg4LCAtMSk7XHJcbn07XHJcbmNvbnN0IGlzUGxhaW5PYmplY3QgPSAodmFsKSA9PiB0b1R5cGVTdHJpbmcodmFsKSA9PT0gJ1tvYmplY3QgT2JqZWN0XSc7XHJcbmNvbnN0IGlzSW50ZWdlcktleSA9IChrZXkpID0+IGlzU3RyaW5nKGtleSkgJiZcclxuICAgIGtleSAhPT0gJ05hTicgJiZcclxuICAgIGtleVswXSAhPT0gJy0nICYmXHJcbiAgICAnJyArIHBhcnNlSW50KGtleSwgMTApID09PSBrZXk7XHJcbmNvbnN0IGlzUmVzZXJ2ZWRQcm9wID0gLyojX19QVVJFX18qLyBtYWtlTWFwKFxyXG4vLyB0aGUgbGVhZGluZyBjb21tYSBpcyBpbnRlbnRpb25hbCBzbyBlbXB0eSBzdHJpbmcgXCJcIiBpcyBhbHNvIGluY2x1ZGVkXHJcbicsa2V5LHJlZixyZWZfZm9yLHJlZl9rZXksJyArXHJcbiAgICAnb25Wbm9kZUJlZm9yZU1vdW50LG9uVm5vZGVNb3VudGVkLCcgK1xyXG4gICAgJ29uVm5vZGVCZWZvcmVVcGRhdGUsb25Wbm9kZVVwZGF0ZWQsJyArXHJcbiAgICAnb25Wbm9kZUJlZm9yZVVubW91bnQsb25Wbm9kZVVubW91bnRlZCcpO1xyXG5jb25zdCBjYWNoZVN0cmluZ0Z1bmN0aW9uID0gKGZuKSA9PiB7XHJcbiAgICBjb25zdCBjYWNoZSA9IE9iamVjdC5jcmVhdGUobnVsbCk7XHJcbiAgICByZXR1cm4gKChzdHIpID0+IHtcclxuICAgICAgICBjb25zdCBoaXQgPSBjYWNoZVtzdHJdO1xyXG4gICAgICAgIHJldHVybiBoaXQgfHwgKGNhY2hlW3N0cl0gPSBmbihzdHIpKTtcclxuICAgIH0pO1xyXG59O1xyXG5jb25zdCBjYW1lbGl6ZVJFID0gLy0oXFx3KS9nO1xyXG4vKipcclxuICogQHByaXZhdGVcclxuICovXHJcbmNvbnN0IGNhbWVsaXplID0gY2FjaGVTdHJpbmdGdW5jdGlvbigoc3RyKSA9PiB7XHJcbiAgICByZXR1cm4gc3RyLnJlcGxhY2UoY2FtZWxpemVSRSwgKF8sIGMpID0+IChjID8gYy50b1VwcGVyQ2FzZSgpIDogJycpKTtcclxufSk7XHJcbmNvbnN0IGh5cGhlbmF0ZVJFID0gL1xcQihbQS1aXSkvZztcclxuLyoqXHJcbiAqIEBwcml2YXRlXHJcbiAqL1xyXG5jb25zdCBoeXBoZW5hdGUgPSBjYWNoZVN0cmluZ0Z1bmN0aW9uKChzdHIpID0+IHN0ci5yZXBsYWNlKGh5cGhlbmF0ZVJFLCAnLSQxJykudG9Mb3dlckNhc2UoKSk7XHJcbi8qKlxyXG4gKiBAcHJpdmF0ZVxyXG4gKi9cclxuY29uc3QgY2FwaXRhbGl6ZSA9IGNhY2hlU3RyaW5nRnVuY3Rpb24oKHN0cikgPT4gc3RyLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgc3RyLnNsaWNlKDEpKTtcclxuLyoqXHJcbiAqIEBwcml2YXRlXHJcbiAqL1xyXG5jb25zdCB0b0hhbmRsZXJLZXkgPSBjYWNoZVN0cmluZ0Z1bmN0aW9uKChzdHIpID0+IHN0ciA/IGBvbiR7Y2FwaXRhbGl6ZShzdHIpfWAgOiBgYCk7XHJcbi8vIGNvbXBhcmUgd2hldGhlciBhIHZhbHVlIGhhcyBjaGFuZ2VkLCBhY2NvdW50aW5nIGZvciBOYU4uXHJcbmNvbnN0IGhhc0NoYW5nZWQgPSAodmFsdWUsIG9sZFZhbHVlKSA9PiAhT2JqZWN0LmlzKHZhbHVlLCBvbGRWYWx1ZSk7XHJcbmNvbnN0IGludm9rZUFycmF5Rm5zID0gKGZucywgYXJnKSA9PiB7XHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGZucy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgIGZuc1tpXShhcmcpO1xyXG4gICAgfVxyXG59O1xyXG5jb25zdCBkZWYgPSAob2JqLCBrZXksIHZhbHVlKSA9PiB7XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHtcclxuICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXHJcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXHJcbiAgICAgICAgdmFsdWVcclxuICAgIH0pO1xyXG59O1xyXG5jb25zdCB0b051bWJlciA9ICh2YWwpID0+IHtcclxuICAgIGNvbnN0IG4gPSBwYXJzZUZsb2F0KHZhbCk7XHJcbiAgICByZXR1cm4gaXNOYU4obikgPyB2YWwgOiBuO1xyXG59O1xyXG5sZXQgX2dsb2JhbFRoaXM7XHJcbmNvbnN0IGdldEdsb2JhbFRoaXMgPSAoKSA9PiB7XHJcbiAgICByZXR1cm4gKF9nbG9iYWxUaGlzIHx8XHJcbiAgICAgICAgKF9nbG9iYWxUaGlzID1cclxuICAgICAgICAgICAgdHlwZW9mIGdsb2JhbFRoaXMgIT09ICd1bmRlZmluZWQnXHJcbiAgICAgICAgICAgICAgICA/IGdsb2JhbFRoaXNcclxuICAgICAgICAgICAgICAgIDogdHlwZW9mIHNlbGYgIT09ICd1bmRlZmluZWQnXHJcbiAgICAgICAgICAgICAgICAgICAgPyBzZWxmXHJcbiAgICAgICAgICAgICAgICAgICAgOiB0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJ1xyXG4gICAgICAgICAgICAgICAgICAgICAgICA/IHdpbmRvd1xyXG4gICAgICAgICAgICAgICAgICAgICAgICA6IHR5cGVvZiBnbG9iYWwgIT09ICd1bmRlZmluZWQnXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IGdsb2JhbFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgOiB7fSkpO1xyXG59O1xuXG5leHBvcnQgeyBFTVBUWV9BUlIsIEVNUFRZX09CSiwgTk8sIE5PT1AsIFBhdGNoRmxhZ05hbWVzLCBjYW1lbGl6ZSwgY2FwaXRhbGl6ZSwgZGVmLCBlc2NhcGVIdG1sLCBlc2NhcGVIdG1sQ29tbWVudCwgZXh0ZW5kLCBnZW5lcmF0ZUNvZGVGcmFtZSwgZ2V0R2xvYmFsVGhpcywgaGFzQ2hhbmdlZCwgaGFzT3duLCBoeXBoZW5hdGUsIGluY2x1ZGVCb29sZWFuQXR0ciwgaW52b2tlQXJyYXlGbnMsIGlzQXJyYXksIGlzQm9vbGVhbkF0dHIsIGlzRGF0ZSwgaXNGdW5jdGlvbiwgaXNHbG9iYWxseVdoaXRlbGlzdGVkLCBpc0hUTUxUYWcsIGlzSW50ZWdlcktleSwgaXNLbm93bkh0bWxBdHRyLCBpc0tub3duU3ZnQXR0ciwgaXNNYXAsIGlzTW9kZWxMaXN0ZW5lciwgaXNOb1VuaXROdW1lcmljU3R5bGVQcm9wLCBpc09iamVjdCwgaXNPbiwgaXNQbGFpbk9iamVjdCwgaXNQcm9taXNlLCBpc1Jlc2VydmVkUHJvcCwgaXNTU1JTYWZlQXR0ck5hbWUsIGlzU1ZHVGFnLCBpc1NldCwgaXNTcGVjaWFsQm9vbGVhbkF0dHIsIGlzU3RyaW5nLCBpc1N5bWJvbCwgaXNWb2lkVGFnLCBsb29zZUVxdWFsLCBsb29zZUluZGV4T2YsIG1ha2VNYXAsIG5vcm1hbGl6ZUNsYXNzLCBub3JtYWxpemVQcm9wcywgbm9ybWFsaXplU3R5bGUsIG9iamVjdFRvU3RyaW5nLCBwYXJzZVN0cmluZ1N0eWxlLCBwcm9wc1RvQXR0ck1hcCwgcmVtb3ZlLCBzbG90RmxhZ3NUZXh0LCBzdHJpbmdpZnlTdHlsZSwgdG9EaXNwbGF5U3RyaW5nLCB0b0hhbmRsZXJLZXksIHRvTnVtYmVyLCB0b1Jhd1R5cGUsIHRvVHlwZVN0cmluZyB9O1xuIiwiaW1wb3J0IHsgZXh0ZW5kLCBpc0FycmF5LCBpc01hcCwgaXNJbnRlZ2VyS2V5LCBpc1N5bWJvbCwgaGFzT3duLCBpc09iamVjdCwgaGFzQ2hhbmdlZCwgbWFrZU1hcCwgY2FwaXRhbGl6ZSwgdG9SYXdUeXBlLCBkZWYsIGlzRnVuY3Rpb24sIE5PT1AgfSBmcm9tICdAdnVlL3NoYXJlZCc7XG5cbmZ1bmN0aW9uIHdhcm4obXNnLCAuLi5hcmdzKSB7XHJcbiAgICBjb25zb2xlLndhcm4oYFtWdWUgd2Fybl0gJHttc2d9YCwgLi4uYXJncyk7XHJcbn1cblxubGV0IGFjdGl2ZUVmZmVjdFNjb3BlO1xyXG5jb25zdCBlZmZlY3RTY29wZVN0YWNrID0gW107XHJcbmNsYXNzIEVmZmVjdFNjb3BlIHtcclxuICAgIGNvbnN0cnVjdG9yKGRldGFjaGVkID0gZmFsc2UpIHtcclxuICAgICAgICB0aGlzLmFjdGl2ZSA9IHRydWU7XHJcbiAgICAgICAgdGhpcy5lZmZlY3RzID0gW107XHJcbiAgICAgICAgdGhpcy5jbGVhbnVwcyA9IFtdO1xyXG4gICAgICAgIGlmICghZGV0YWNoZWQgJiYgYWN0aXZlRWZmZWN0U2NvcGUpIHtcclxuICAgICAgICAgICAgdGhpcy5wYXJlbnQgPSBhY3RpdmVFZmZlY3RTY29wZTtcclxuICAgICAgICAgICAgdGhpcy5pbmRleCA9XHJcbiAgICAgICAgICAgICAgICAoYWN0aXZlRWZmZWN0U2NvcGUuc2NvcGVzIHx8IChhY3RpdmVFZmZlY3RTY29wZS5zY29wZXMgPSBbXSkpLnB1c2godGhpcykgLSAxO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJ1bihmbikge1xyXG4gICAgICAgIGlmICh0aGlzLmFjdGl2ZSkge1xyXG4gICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5vbigpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZuKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZmluYWxseSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm9mZigpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSkge1xyXG4gICAgICAgICAgICB3YXJuKGBjYW5ub3QgcnVuIGFuIGluYWN0aXZlIGVmZmVjdCBzY29wZS5gKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBvbigpIHtcclxuICAgICAgICBpZiAodGhpcy5hY3RpdmUpIHtcclxuICAgICAgICAgICAgZWZmZWN0U2NvcGVTdGFjay5wdXNoKHRoaXMpO1xyXG4gICAgICAgICAgICBhY3RpdmVFZmZlY3RTY29wZSA9IHRoaXM7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgb2ZmKCkge1xyXG4gICAgICAgIGlmICh0aGlzLmFjdGl2ZSkge1xyXG4gICAgICAgICAgICBlZmZlY3RTY29wZVN0YWNrLnBvcCgpO1xyXG4gICAgICAgICAgICBhY3RpdmVFZmZlY3RTY29wZSA9IGVmZmVjdFNjb3BlU3RhY2tbZWZmZWN0U2NvcGVTdGFjay5sZW5ndGggLSAxXTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBzdG9wKGZyb21QYXJlbnQpIHtcclxuICAgICAgICBpZiAodGhpcy5hY3RpdmUpIHtcclxuICAgICAgICAgICAgdGhpcy5lZmZlY3RzLmZvckVhY2goZSA9PiBlLnN0b3AoKSk7XHJcbiAgICAgICAgICAgIHRoaXMuY2xlYW51cHMuZm9yRWFjaChjbGVhbnVwID0+IGNsZWFudXAoKSk7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLnNjb3Blcykge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zY29wZXMuZm9yRWFjaChlID0+IGUuc3RvcCh0cnVlKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy8gbmVzdGVkIHNjb3BlLCBkZXJlZmVyZW5jZSBmcm9tIHBhcmVudCB0byBhdm9pZCBtZW1vcnkgbGVha3NcclxuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50ICYmICFmcm9tUGFyZW50KSB7XHJcbiAgICAgICAgICAgICAgICAvLyBvcHRpbWl6ZWQgTygxKSByZW1vdmFsXHJcbiAgICAgICAgICAgICAgICBjb25zdCBsYXN0ID0gdGhpcy5wYXJlbnQuc2NvcGVzLnBvcCgpO1xyXG4gICAgICAgICAgICAgICAgaWYgKGxhc3QgJiYgbGFzdCAhPT0gdGhpcykge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGFyZW50LnNjb3Blc1t0aGlzLmluZGV4XSA9IGxhc3Q7XHJcbiAgICAgICAgICAgICAgICAgICAgbGFzdC5pbmRleCA9IHRoaXMuaW5kZXg7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5hY3RpdmUgPSBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuZnVuY3Rpb24gZWZmZWN0U2NvcGUoZGV0YWNoZWQpIHtcclxuICAgIHJldHVybiBuZXcgRWZmZWN0U2NvcGUoZGV0YWNoZWQpO1xyXG59XHJcbmZ1bmN0aW9uIHJlY29yZEVmZmVjdFNjb3BlKGVmZmVjdCwgc2NvcGUpIHtcclxuICAgIHNjb3BlID0gc2NvcGUgfHwgYWN0aXZlRWZmZWN0U2NvcGU7XHJcbiAgICBpZiAoc2NvcGUgJiYgc2NvcGUuYWN0aXZlKSB7XHJcbiAgICAgICAgc2NvcGUuZWZmZWN0cy5wdXNoKGVmZmVjdCk7XHJcbiAgICB9XHJcbn1cclxuZnVuY3Rpb24gZ2V0Q3VycmVudFNjb3BlKCkge1xyXG4gICAgcmV0dXJuIGFjdGl2ZUVmZmVjdFNjb3BlO1xyXG59XHJcbmZ1bmN0aW9uIG9uU2NvcGVEaXNwb3NlKGZuKSB7XHJcbiAgICBpZiAoYWN0aXZlRWZmZWN0U2NvcGUpIHtcclxuICAgICAgICBhY3RpdmVFZmZlY3RTY29wZS5jbGVhbnVwcy5wdXNoKGZuKTtcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSkge1xyXG4gICAgICAgIHdhcm4oYG9uU2NvcGVEaXNwb3NlKCkgaXMgY2FsbGVkIHdoZW4gdGhlcmUgaXMgbm8gYWN0aXZlIGVmZmVjdCBzY29wZWAgK1xyXG4gICAgICAgICAgICBgIHRvIGJlIGFzc29jaWF0ZWQgd2l0aC5gKTtcclxuICAgIH1cclxufVxuXG5jb25zdCBjcmVhdGVEZXAgPSAoZWZmZWN0cykgPT4ge1xyXG4gICAgY29uc3QgZGVwID0gbmV3IFNldChlZmZlY3RzKTtcclxuICAgIGRlcC53ID0gMDtcclxuICAgIGRlcC5uID0gMDtcclxuICAgIHJldHVybiBkZXA7XHJcbn07XHJcbmNvbnN0IHdhc1RyYWNrZWQgPSAoZGVwKSA9PiAoZGVwLncgJiB0cmFja09wQml0KSA+IDA7XHJcbmNvbnN0IG5ld1RyYWNrZWQgPSAoZGVwKSA9PiAoZGVwLm4gJiB0cmFja09wQml0KSA+IDA7XHJcbmNvbnN0IGluaXREZXBNYXJrZXJzID0gKHsgZGVwcyB9KSA9PiB7XHJcbiAgICBpZiAoZGVwcy5sZW5ndGgpIHtcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGRlcHMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgZGVwc1tpXS53IHw9IHRyYWNrT3BCaXQ7IC8vIHNldCB3YXMgdHJhY2tlZFxyXG4gICAgICAgIH1cclxuICAgIH1cclxufTtcclxuY29uc3QgZmluYWxpemVEZXBNYXJrZXJzID0gKGVmZmVjdCkgPT4ge1xyXG4gICAgY29uc3QgeyBkZXBzIH0gPSBlZmZlY3Q7XHJcbiAgICBpZiAoZGVwcy5sZW5ndGgpIHtcclxuICAgICAgICBsZXQgcHRyID0gMDtcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGRlcHMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgY29uc3QgZGVwID0gZGVwc1tpXTtcclxuICAgICAgICAgICAgaWYgKHdhc1RyYWNrZWQoZGVwKSAmJiAhbmV3VHJhY2tlZChkZXApKSB7XHJcbiAgICAgICAgICAgICAgICBkZXAuZGVsZXRlKGVmZmVjdCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBkZXBzW3B0cisrXSA9IGRlcDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyBjbGVhciBiaXRzXHJcbiAgICAgICAgICAgIGRlcC53ICY9IH50cmFja09wQml0O1xyXG4gICAgICAgICAgICBkZXAubiAmPSB+dHJhY2tPcEJpdDtcclxuICAgICAgICB9XHJcbiAgICAgICAgZGVwcy5sZW5ndGggPSBwdHI7XHJcbiAgICB9XHJcbn07XG5cbmNvbnN0IHRhcmdldE1hcCA9IG5ldyBXZWFrTWFwKCk7XHJcbi8vIFRoZSBudW1iZXIgb2YgZWZmZWN0cyBjdXJyZW50bHkgYmVpbmcgdHJhY2tlZCByZWN1cnNpdmVseS5cclxubGV0IGVmZmVjdFRyYWNrRGVwdGggPSAwO1xyXG5sZXQgdHJhY2tPcEJpdCA9IDE7XHJcbi8qKlxyXG4gKiBUaGUgYml0d2lzZSB0cmFjayBtYXJrZXJzIHN1cHBvcnQgYXQgbW9zdCAzMCBsZXZlbHMgb2YgcmVjdXJzaW9uLlxyXG4gKiBUaGlzIHZhbHVlIGlzIGNob3NlbiB0byBlbmFibGUgbW9kZXJuIEpTIGVuZ2luZXMgdG8gdXNlIGEgU01JIG9uIGFsbCBwbGF0Zm9ybXMuXHJcbiAqIFdoZW4gcmVjdXJzaW9uIGRlcHRoIGlzIGdyZWF0ZXIsIGZhbGwgYmFjayB0byB1c2luZyBhIGZ1bGwgY2xlYW51cC5cclxuICovXHJcbmNvbnN0IG1heE1hcmtlckJpdHMgPSAzMDtcclxuY29uc3QgZWZmZWN0U3RhY2sgPSBbXTtcclxubGV0IGFjdGl2ZUVmZmVjdDtcclxuY29uc3QgSVRFUkFURV9LRVkgPSBTeW1ib2woKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpID8gJ2l0ZXJhdGUnIDogJycpO1xyXG5jb25zdCBNQVBfS0VZX0lURVJBVEVfS0VZID0gU3ltYm9sKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSA/ICdNYXAga2V5IGl0ZXJhdGUnIDogJycpO1xyXG5jbGFzcyBSZWFjdGl2ZUVmZmVjdCB7XHJcbiAgICBjb25zdHJ1Y3Rvcihmbiwgc2NoZWR1bGVyID0gbnVsbCwgc2NvcGUpIHtcclxuICAgICAgICB0aGlzLmZuID0gZm47XHJcbiAgICAgICAgdGhpcy5zY2hlZHVsZXIgPSBzY2hlZHVsZXI7XHJcbiAgICAgICAgdGhpcy5hY3RpdmUgPSB0cnVlO1xyXG4gICAgICAgIHRoaXMuZGVwcyA9IFtdO1xyXG4gICAgICAgIHJlY29yZEVmZmVjdFNjb3BlKHRoaXMsIHNjb3BlKTtcclxuICAgIH1cclxuICAgIHJ1bigpIHtcclxuICAgICAgICBpZiAoIXRoaXMuYWN0aXZlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmZuKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICghZWZmZWN0U3RhY2suaW5jbHVkZXModGhpcykpIHtcclxuICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgIGVmZmVjdFN0YWNrLnB1c2goKGFjdGl2ZUVmZmVjdCA9IHRoaXMpKTtcclxuICAgICAgICAgICAgICAgIGVuYWJsZVRyYWNraW5nKCk7XHJcbiAgICAgICAgICAgICAgICB0cmFja09wQml0ID0gMSA8PCArK2VmZmVjdFRyYWNrRGVwdGg7XHJcbiAgICAgICAgICAgICAgICBpZiAoZWZmZWN0VHJhY2tEZXB0aCA8PSBtYXhNYXJrZXJCaXRzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaW5pdERlcE1hcmtlcnModGhpcyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBjbGVhbnVwRWZmZWN0KHRoaXMpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZm4oKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBmaW5hbGx5IHtcclxuICAgICAgICAgICAgICAgIGlmIChlZmZlY3RUcmFja0RlcHRoIDw9IG1heE1hcmtlckJpdHMpIHtcclxuICAgICAgICAgICAgICAgICAgICBmaW5hbGl6ZURlcE1hcmtlcnModGhpcyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB0cmFja09wQml0ID0gMSA8PCAtLWVmZmVjdFRyYWNrRGVwdGg7XHJcbiAgICAgICAgICAgICAgICByZXNldFRyYWNraW5nKCk7XHJcbiAgICAgICAgICAgICAgICBlZmZlY3RTdGFjay5wb3AoKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IG4gPSBlZmZlY3RTdGFjay5sZW5ndGg7XHJcbiAgICAgICAgICAgICAgICBhY3RpdmVFZmZlY3QgPSBuID4gMCA/IGVmZmVjdFN0YWNrW24gLSAxXSA6IHVuZGVmaW5lZDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHN0b3AoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuYWN0aXZlKSB7XHJcbiAgICAgICAgICAgIGNsZWFudXBFZmZlY3QodGhpcyk7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLm9uU3RvcCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5vblN0b3AoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLmFjdGl2ZSA9IGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5mdW5jdGlvbiBjbGVhbnVwRWZmZWN0KGVmZmVjdCkge1xyXG4gICAgY29uc3QgeyBkZXBzIH0gPSBlZmZlY3Q7XHJcbiAgICBpZiAoZGVwcy5sZW5ndGgpIHtcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGRlcHMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgZGVwc1tpXS5kZWxldGUoZWZmZWN0KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZGVwcy5sZW5ndGggPSAwO1xyXG4gICAgfVxyXG59XHJcbmZ1bmN0aW9uIGVmZmVjdChmbiwgb3B0aW9ucykge1xyXG4gICAgaWYgKGZuLmVmZmVjdCkge1xyXG4gICAgICAgIGZuID0gZm4uZWZmZWN0LmZuO1xyXG4gICAgfVxyXG4gICAgY29uc3QgX2VmZmVjdCA9IG5ldyBSZWFjdGl2ZUVmZmVjdChmbik7XHJcbiAgICBpZiAob3B0aW9ucykge1xyXG4gICAgICAgIGV4dGVuZChfZWZmZWN0LCBvcHRpb25zKTtcclxuICAgICAgICBpZiAob3B0aW9ucy5zY29wZSlcclxuICAgICAgICAgICAgcmVjb3JkRWZmZWN0U2NvcGUoX2VmZmVjdCwgb3B0aW9ucy5zY29wZSk7XHJcbiAgICB9XHJcbiAgICBpZiAoIW9wdGlvbnMgfHwgIW9wdGlvbnMubGF6eSkge1xyXG4gICAgICAgIF9lZmZlY3QucnVuKCk7XHJcbiAgICB9XHJcbiAgICBjb25zdCBydW5uZXIgPSBfZWZmZWN0LnJ1bi5iaW5kKF9lZmZlY3QpO1xyXG4gICAgcnVubmVyLmVmZmVjdCA9IF9lZmZlY3Q7XHJcbiAgICByZXR1cm4gcnVubmVyO1xyXG59XHJcbmZ1bmN0aW9uIHN0b3AocnVubmVyKSB7XHJcbiAgICBydW5uZXIuZWZmZWN0LnN0b3AoKTtcclxufVxyXG5sZXQgc2hvdWxkVHJhY2sgPSB0cnVlO1xyXG5jb25zdCB0cmFja1N0YWNrID0gW107XHJcbmZ1bmN0aW9uIHBhdXNlVHJhY2tpbmcoKSB7XHJcbiAgICB0cmFja1N0YWNrLnB1c2goc2hvdWxkVHJhY2spO1xyXG4gICAgc2hvdWxkVHJhY2sgPSBmYWxzZTtcclxufVxyXG5mdW5jdGlvbiBlbmFibGVUcmFja2luZygpIHtcclxuICAgIHRyYWNrU3RhY2sucHVzaChzaG91bGRUcmFjayk7XHJcbiAgICBzaG91bGRUcmFjayA9IHRydWU7XHJcbn1cclxuZnVuY3Rpb24gcmVzZXRUcmFja2luZygpIHtcclxuICAgIGNvbnN0IGxhc3QgPSB0cmFja1N0YWNrLnBvcCgpO1xyXG4gICAgc2hvdWxkVHJhY2sgPSBsYXN0ID09PSB1bmRlZmluZWQgPyB0cnVlIDogbGFzdDtcclxufVxyXG5mdW5jdGlvbiB0cmFjayh0YXJnZXQsIHR5cGUsIGtleSkge1xyXG4gICAgaWYgKCFpc1RyYWNraW5nKCkpIHtcclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICBsZXQgZGVwc01hcCA9IHRhcmdldE1hcC5nZXQodGFyZ2V0KTtcclxuICAgIGlmICghZGVwc01hcCkge1xyXG4gICAgICAgIHRhcmdldE1hcC5zZXQodGFyZ2V0LCAoZGVwc01hcCA9IG5ldyBNYXAoKSkpO1xyXG4gICAgfVxyXG4gICAgbGV0IGRlcCA9IGRlcHNNYXAuZ2V0KGtleSk7XHJcbiAgICBpZiAoIWRlcCkge1xyXG4gICAgICAgIGRlcHNNYXAuc2V0KGtleSwgKGRlcCA9IGNyZWF0ZURlcCgpKSk7XHJcbiAgICB9XHJcbiAgICBjb25zdCBldmVudEluZm8gPSAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJylcclxuICAgICAgICA/IHsgZWZmZWN0OiBhY3RpdmVFZmZlY3QsIHRhcmdldCwgdHlwZSwga2V5IH1cclxuICAgICAgICA6IHVuZGVmaW5lZDtcclxuICAgIHRyYWNrRWZmZWN0cyhkZXAsIGV2ZW50SW5mbyk7XHJcbn1cclxuZnVuY3Rpb24gaXNUcmFja2luZygpIHtcclxuICAgIHJldHVybiBzaG91bGRUcmFjayAmJiBhY3RpdmVFZmZlY3QgIT09IHVuZGVmaW5lZDtcclxufVxyXG5mdW5jdGlvbiB0cmFja0VmZmVjdHMoZGVwLCBkZWJ1Z2dlckV2ZW50RXh0cmFJbmZvKSB7XHJcbiAgICBsZXQgc2hvdWxkVHJhY2sgPSBmYWxzZTtcclxuICAgIGlmIChlZmZlY3RUcmFja0RlcHRoIDw9IG1heE1hcmtlckJpdHMpIHtcclxuICAgICAgICBpZiAoIW5ld1RyYWNrZWQoZGVwKSkge1xyXG4gICAgICAgICAgICBkZXAubiB8PSB0cmFja09wQml0OyAvLyBzZXQgbmV3bHkgdHJhY2tlZFxyXG4gICAgICAgICAgICBzaG91bGRUcmFjayA9ICF3YXNUcmFja2VkKGRlcCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgLy8gRnVsbCBjbGVhbnVwIG1vZGUuXHJcbiAgICAgICAgc2hvdWxkVHJhY2sgPSAhZGVwLmhhcyhhY3RpdmVFZmZlY3QpO1xyXG4gICAgfVxyXG4gICAgaWYgKHNob3VsZFRyYWNrKSB7XHJcbiAgICAgICAgZGVwLmFkZChhY3RpdmVFZmZlY3QpO1xyXG4gICAgICAgIGFjdGl2ZUVmZmVjdC5kZXBzLnB1c2goZGVwKTtcclxuICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmIGFjdGl2ZUVmZmVjdC5vblRyYWNrKSB7XHJcbiAgICAgICAgICAgIGFjdGl2ZUVmZmVjdC5vblRyYWNrKE9iamVjdC5hc3NpZ24oe1xyXG4gICAgICAgICAgICAgICAgZWZmZWN0OiBhY3RpdmVFZmZlY3RcclxuICAgICAgICAgICAgfSwgZGVidWdnZXJFdmVudEV4dHJhSW5mbykpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5mdW5jdGlvbiB0cmlnZ2VyKHRhcmdldCwgdHlwZSwga2V5LCBuZXdWYWx1ZSwgb2xkVmFsdWUsIG9sZFRhcmdldCkge1xyXG4gICAgY29uc3QgZGVwc01hcCA9IHRhcmdldE1hcC5nZXQodGFyZ2V0KTtcclxuICAgIGlmICghZGVwc01hcCkge1xyXG4gICAgICAgIC8vIG5ldmVyIGJlZW4gdHJhY2tlZFxyXG4gICAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIGxldCBkZXBzID0gW107XHJcbiAgICBpZiAodHlwZSA9PT0gXCJjbGVhclwiIC8qIENMRUFSICovKSB7XHJcbiAgICAgICAgLy8gY29sbGVjdGlvbiBiZWluZyBjbGVhcmVkXHJcbiAgICAgICAgLy8gdHJpZ2dlciBhbGwgZWZmZWN0cyBmb3IgdGFyZ2V0XHJcbiAgICAgICAgZGVwcyA9IFsuLi5kZXBzTWFwLnZhbHVlcygpXTtcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKGtleSA9PT0gJ2xlbmd0aCcgJiYgaXNBcnJheSh0YXJnZXQpKSB7XHJcbiAgICAgICAgZGVwc01hcC5mb3JFYWNoKChkZXAsIGtleSkgPT4ge1xyXG4gICAgICAgICAgICBpZiAoa2V5ID09PSAnbGVuZ3RoJyB8fCBrZXkgPj0gbmV3VmFsdWUpIHtcclxuICAgICAgICAgICAgICAgIGRlcHMucHVzaChkZXApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgICAvLyBzY2hlZHVsZSBydW5zIGZvciBTRVQgfCBBREQgfCBERUxFVEVcclxuICAgICAgICBpZiAoa2V5ICE9PSB2b2lkIDApIHtcclxuICAgICAgICAgICAgZGVwcy5wdXNoKGRlcHNNYXAuZ2V0KGtleSkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBhbHNvIHJ1biBmb3IgaXRlcmF0aW9uIGtleSBvbiBBREQgfCBERUxFVEUgfCBNYXAuU0VUXHJcbiAgICAgICAgc3dpdGNoICh0eXBlKSB7XHJcbiAgICAgICAgICAgIGNhc2UgXCJhZGRcIiAvKiBBREQgKi86XHJcbiAgICAgICAgICAgICAgICBpZiAoIWlzQXJyYXkodGFyZ2V0KSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGRlcHMucHVzaChkZXBzTWFwLmdldChJVEVSQVRFX0tFWSkpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChpc01hcCh0YXJnZXQpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlcHMucHVzaChkZXBzTWFwLmdldChNQVBfS0VZX0lURVJBVEVfS0VZKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoaXNJbnRlZ2VyS2V5KGtleSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBuZXcgaW5kZXggYWRkZWQgdG8gYXJyYXkgLT4gbGVuZ3RoIGNoYW5nZXNcclxuICAgICAgICAgICAgICAgICAgICBkZXBzLnB1c2goZGVwc01hcC5nZXQoJ2xlbmd0aCcpKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIFwiZGVsZXRlXCIgLyogREVMRVRFICovOlxyXG4gICAgICAgICAgICAgICAgaWYgKCFpc0FycmF5KHRhcmdldCkpIHtcclxuICAgICAgICAgICAgICAgICAgICBkZXBzLnB1c2goZGVwc01hcC5nZXQoSVRFUkFURV9LRVkpKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoaXNNYXAodGFyZ2V0KSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkZXBzLnB1c2goZGVwc01hcC5nZXQoTUFQX0tFWV9JVEVSQVRFX0tFWSkpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIFwic2V0XCIgLyogU0VUICovOlxyXG4gICAgICAgICAgICAgICAgaWYgKGlzTWFwKHRhcmdldCkpIHtcclxuICAgICAgICAgICAgICAgICAgICBkZXBzLnB1c2goZGVwc01hcC5nZXQoSVRFUkFURV9LRVkpKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGNvbnN0IGV2ZW50SW5mbyA9IChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKVxyXG4gICAgICAgID8geyB0YXJnZXQsIHR5cGUsIGtleSwgbmV3VmFsdWUsIG9sZFZhbHVlLCBvbGRUYXJnZXQgfVxyXG4gICAgICAgIDogdW5kZWZpbmVkO1xyXG4gICAgaWYgKGRlcHMubGVuZ3RoID09PSAxKSB7XHJcbiAgICAgICAgaWYgKGRlcHNbMF0pIHtcclxuICAgICAgICAgICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSkge1xyXG4gICAgICAgICAgICAgICAgdHJpZ2dlckVmZmVjdHMoZGVwc1swXSwgZXZlbnRJbmZvKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRyaWdnZXJFZmZlY3RzKGRlcHNbMF0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgY29uc3QgZWZmZWN0cyA9IFtdO1xyXG4gICAgICAgIGZvciAoY29uc3QgZGVwIG9mIGRlcHMpIHtcclxuICAgICAgICAgICAgaWYgKGRlcCkge1xyXG4gICAgICAgICAgICAgICAgZWZmZWN0cy5wdXNoKC4uLmRlcCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSkge1xyXG4gICAgICAgICAgICB0cmlnZ2VyRWZmZWN0cyhjcmVhdGVEZXAoZWZmZWN0cyksIGV2ZW50SW5mbyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICB0cmlnZ2VyRWZmZWN0cyhjcmVhdGVEZXAoZWZmZWN0cykpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5mdW5jdGlvbiB0cmlnZ2VyRWZmZWN0cyhkZXAsIGRlYnVnZ2VyRXZlbnRFeHRyYUluZm8pIHtcclxuICAgIC8vIHNwcmVhZCBpbnRvIGFycmF5IGZvciBzdGFiaWxpemF0aW9uXHJcbiAgICBmb3IgKGNvbnN0IGVmZmVjdCBvZiBpc0FycmF5KGRlcCkgPyBkZXAgOiBbLi4uZGVwXSkge1xyXG4gICAgICAgIGlmIChlZmZlY3QgIT09IGFjdGl2ZUVmZmVjdCB8fCBlZmZlY3QuYWxsb3dSZWN1cnNlKSB7XHJcbiAgICAgICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgJiYgZWZmZWN0Lm9uVHJpZ2dlcikge1xyXG4gICAgICAgICAgICAgICAgZWZmZWN0Lm9uVHJpZ2dlcihleHRlbmQoeyBlZmZlY3QgfSwgZGVidWdnZXJFdmVudEV4dHJhSW5mbykpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChlZmZlY3Quc2NoZWR1bGVyKSB7XHJcbiAgICAgICAgICAgICAgICBlZmZlY3Quc2NoZWR1bGVyKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBlZmZlY3QucnVuKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cblxuY29uc3QgaXNOb25UcmFja2FibGVLZXlzID0gLyojX19QVVJFX18qLyBtYWtlTWFwKGBfX3Byb3RvX18sX192X2lzUmVmLF9faXNWdWVgKTtcclxuY29uc3QgYnVpbHRJblN5bWJvbHMgPSBuZXcgU2V0KE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKFN5bWJvbClcclxuICAgIC5tYXAoa2V5ID0+IFN5bWJvbFtrZXldKVxyXG4gICAgLmZpbHRlcihpc1N5bWJvbCkpO1xyXG5jb25zdCBnZXQgPSAvKiNfX1BVUkVfXyovIGNyZWF0ZUdldHRlcigpO1xyXG5jb25zdCBzaGFsbG93R2V0ID0gLyojX19QVVJFX18qLyBjcmVhdGVHZXR0ZXIoZmFsc2UsIHRydWUpO1xyXG5jb25zdCByZWFkb25seUdldCA9IC8qI19fUFVSRV9fKi8gY3JlYXRlR2V0dGVyKHRydWUpO1xyXG5jb25zdCBzaGFsbG93UmVhZG9ubHlHZXQgPSAvKiNfX1BVUkVfXyovIGNyZWF0ZUdldHRlcih0cnVlLCB0cnVlKTtcclxuY29uc3QgYXJyYXlJbnN0cnVtZW50YXRpb25zID0gLyojX19QVVJFX18qLyBjcmVhdGVBcnJheUluc3RydW1lbnRhdGlvbnMoKTtcclxuZnVuY3Rpb24gY3JlYXRlQXJyYXlJbnN0cnVtZW50YXRpb25zKCkge1xyXG4gICAgY29uc3QgaW5zdHJ1bWVudGF0aW9ucyA9IHt9O1xyXG4gICAgWydpbmNsdWRlcycsICdpbmRleE9mJywgJ2xhc3RJbmRleE9mJ10uZm9yRWFjaChrZXkgPT4ge1xyXG4gICAgICAgIGluc3RydW1lbnRhdGlvbnNba2V5XSA9IGZ1bmN0aW9uICguLi5hcmdzKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGFyciA9IHRvUmF3KHRoaXMpO1xyXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMCwgbCA9IHRoaXMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICB0cmFjayhhcnIsIFwiZ2V0XCIgLyogR0VUICovLCBpICsgJycpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vIHdlIHJ1biB0aGUgbWV0aG9kIHVzaW5nIHRoZSBvcmlnaW5hbCBhcmdzIGZpcnN0ICh3aGljaCBtYXkgYmUgcmVhY3RpdmUpXHJcbiAgICAgICAgICAgIGNvbnN0IHJlcyA9IGFycltrZXldKC4uLmFyZ3MpO1xyXG4gICAgICAgICAgICBpZiAocmVzID09PSAtMSB8fCByZXMgPT09IGZhbHNlKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBpZiB0aGF0IGRpZG4ndCB3b3JrLCBydW4gaXQgYWdhaW4gdXNpbmcgcmF3IHZhbHVlcy5cclxuICAgICAgICAgICAgICAgIHJldHVybiBhcnJba2V5XSguLi5hcmdzLm1hcCh0b1JhdykpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlcztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICB9KTtcclxuICAgIFsncHVzaCcsICdwb3AnLCAnc2hpZnQnLCAndW5zaGlmdCcsICdzcGxpY2UnXS5mb3JFYWNoKGtleSA9PiB7XHJcbiAgICAgICAgaW5zdHJ1bWVudGF0aW9uc1trZXldID0gZnVuY3Rpb24gKC4uLmFyZ3MpIHtcclxuICAgICAgICAgICAgcGF1c2VUcmFja2luZygpO1xyXG4gICAgICAgICAgICBjb25zdCByZXMgPSB0b1Jhdyh0aGlzKVtrZXldLmFwcGx5KHRoaXMsIGFyZ3MpO1xyXG4gICAgICAgICAgICByZXNldFRyYWNraW5nKCk7XHJcbiAgICAgICAgICAgIHJldHVybiByZXM7XHJcbiAgICAgICAgfTtcclxuICAgIH0pO1xyXG4gICAgcmV0dXJuIGluc3RydW1lbnRhdGlvbnM7XHJcbn1cclxuZnVuY3Rpb24gY3JlYXRlR2V0dGVyKGlzUmVhZG9ubHkgPSBmYWxzZSwgc2hhbGxvdyA9IGZhbHNlKSB7XHJcbiAgICByZXR1cm4gZnVuY3Rpb24gZ2V0KHRhcmdldCwga2V5LCByZWNlaXZlcikge1xyXG4gICAgICAgIGlmIChrZXkgPT09IFwiX192X2lzUmVhY3RpdmVcIiAvKiBJU19SRUFDVElWRSAqLykge1xyXG4gICAgICAgICAgICByZXR1cm4gIWlzUmVhZG9ubHk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKGtleSA9PT0gXCJfX3ZfaXNSZWFkb25seVwiIC8qIElTX1JFQURPTkxZICovKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBpc1JlYWRvbmx5O1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChrZXkgPT09IFwiX192X3Jhd1wiIC8qIFJBVyAqLyAmJlxyXG4gICAgICAgICAgICByZWNlaXZlciA9PT1cclxuICAgICAgICAgICAgICAgIChpc1JlYWRvbmx5XHJcbiAgICAgICAgICAgICAgICAgICAgPyBzaGFsbG93XHJcbiAgICAgICAgICAgICAgICAgICAgICAgID8gc2hhbGxvd1JlYWRvbmx5TWFwXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDogcmVhZG9ubHlNYXBcclxuICAgICAgICAgICAgICAgICAgICA6IHNoYWxsb3dcclxuICAgICAgICAgICAgICAgICAgICAgICAgPyBzaGFsbG93UmVhY3RpdmVNYXBcclxuICAgICAgICAgICAgICAgICAgICAgICAgOiByZWFjdGl2ZU1hcCkuZ2V0KHRhcmdldCkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRhcmdldDtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgdGFyZ2V0SXNBcnJheSA9IGlzQXJyYXkodGFyZ2V0KTtcclxuICAgICAgICBpZiAoIWlzUmVhZG9ubHkgJiYgdGFyZ2V0SXNBcnJheSAmJiBoYXNPd24oYXJyYXlJbnN0cnVtZW50YXRpb25zLCBrZXkpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBSZWZsZWN0LmdldChhcnJheUluc3RydW1lbnRhdGlvbnMsIGtleSwgcmVjZWl2ZXIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCByZXMgPSBSZWZsZWN0LmdldCh0YXJnZXQsIGtleSwgcmVjZWl2ZXIpO1xyXG4gICAgICAgIGlmIChpc1N5bWJvbChrZXkpID8gYnVpbHRJblN5bWJvbHMuaGFzKGtleSkgOiBpc05vblRyYWNrYWJsZUtleXMoa2V5KSkge1xyXG4gICAgICAgICAgICByZXR1cm4gcmVzO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoIWlzUmVhZG9ubHkpIHtcclxuICAgICAgICAgICAgdHJhY2sodGFyZ2V0LCBcImdldFwiIC8qIEdFVCAqLywga2V5KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHNoYWxsb3cpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHJlcztcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGlzUmVmKHJlcykpIHtcclxuICAgICAgICAgICAgLy8gcmVmIHVud3JhcHBpbmcgLSBkb2VzIG5vdCBhcHBseSBmb3IgQXJyYXkgKyBpbnRlZ2VyIGtleS5cclxuICAgICAgICAgICAgY29uc3Qgc2hvdWxkVW53cmFwID0gIXRhcmdldElzQXJyYXkgfHwgIWlzSW50ZWdlcktleShrZXkpO1xyXG4gICAgICAgICAgICByZXR1cm4gc2hvdWxkVW53cmFwID8gcmVzLnZhbHVlIDogcmVzO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoaXNPYmplY3QocmVzKSkge1xyXG4gICAgICAgICAgICAvLyBDb252ZXJ0IHJldHVybmVkIHZhbHVlIGludG8gYSBwcm94eSBhcyB3ZWxsLiB3ZSBkbyB0aGUgaXNPYmplY3QgY2hlY2tcclxuICAgICAgICAgICAgLy8gaGVyZSB0byBhdm9pZCBpbnZhbGlkIHZhbHVlIHdhcm5pbmcuIEFsc28gbmVlZCB0byBsYXp5IGFjY2VzcyByZWFkb25seVxyXG4gICAgICAgICAgICAvLyBhbmQgcmVhY3RpdmUgaGVyZSB0byBhdm9pZCBjaXJjdWxhciBkZXBlbmRlbmN5LlxyXG4gICAgICAgICAgICByZXR1cm4gaXNSZWFkb25seSA/IHJlYWRvbmx5KHJlcykgOiByZWFjdGl2ZShyZXMpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gcmVzO1xyXG4gICAgfTtcclxufVxyXG5jb25zdCBzZXQgPSAvKiNfX1BVUkVfXyovIGNyZWF0ZVNldHRlcigpO1xyXG5jb25zdCBzaGFsbG93U2V0ID0gLyojX19QVVJFX18qLyBjcmVhdGVTZXR0ZXIodHJ1ZSk7XHJcbmZ1bmN0aW9uIGNyZWF0ZVNldHRlcihzaGFsbG93ID0gZmFsc2UpIHtcclxuICAgIHJldHVybiBmdW5jdGlvbiBzZXQodGFyZ2V0LCBrZXksIHZhbHVlLCByZWNlaXZlcikge1xyXG4gICAgICAgIGxldCBvbGRWYWx1ZSA9IHRhcmdldFtrZXldO1xyXG4gICAgICAgIGlmICghc2hhbGxvdyAmJiAhaXNSZWFkb25seSh2YWx1ZSkpIHtcclxuICAgICAgICAgICAgdmFsdWUgPSB0b1Jhdyh2YWx1ZSk7XHJcbiAgICAgICAgICAgIG9sZFZhbHVlID0gdG9SYXcob2xkVmFsdWUpO1xyXG4gICAgICAgICAgICBpZiAoIWlzQXJyYXkodGFyZ2V0KSAmJiBpc1JlZihvbGRWYWx1ZSkgJiYgIWlzUmVmKHZhbHVlKSkge1xyXG4gICAgICAgICAgICAgICAgb2xkVmFsdWUudmFsdWUgPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IGhhZEtleSA9IGlzQXJyYXkodGFyZ2V0KSAmJiBpc0ludGVnZXJLZXkoa2V5KVxyXG4gICAgICAgICAgICA/IE51bWJlcihrZXkpIDwgdGFyZ2V0Lmxlbmd0aFxyXG4gICAgICAgICAgICA6IGhhc093bih0YXJnZXQsIGtleSk7XHJcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gUmVmbGVjdC5zZXQodGFyZ2V0LCBrZXksIHZhbHVlLCByZWNlaXZlcik7XHJcbiAgICAgICAgLy8gZG9uJ3QgdHJpZ2dlciBpZiB0YXJnZXQgaXMgc29tZXRoaW5nIHVwIGluIHRoZSBwcm90b3R5cGUgY2hhaW4gb2Ygb3JpZ2luYWxcclxuICAgICAgICBpZiAodGFyZ2V0ID09PSB0b1JhdyhyZWNlaXZlcikpIHtcclxuICAgICAgICAgICAgaWYgKCFoYWRLZXkpIHtcclxuICAgICAgICAgICAgICAgIHRyaWdnZXIodGFyZ2V0LCBcImFkZFwiIC8qIEFERCAqLywga2V5LCB2YWx1ZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSBpZiAoaGFzQ2hhbmdlZCh2YWx1ZSwgb2xkVmFsdWUpKSB7XHJcbiAgICAgICAgICAgICAgICB0cmlnZ2VyKHRhcmdldCwgXCJzZXRcIiAvKiBTRVQgKi8sIGtleSwgdmFsdWUsIG9sZFZhbHVlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgfTtcclxufVxyXG5mdW5jdGlvbiBkZWxldGVQcm9wZXJ0eSh0YXJnZXQsIGtleSkge1xyXG4gICAgY29uc3QgaGFkS2V5ID0gaGFzT3duKHRhcmdldCwga2V5KTtcclxuICAgIGNvbnN0IG9sZFZhbHVlID0gdGFyZ2V0W2tleV07XHJcbiAgICBjb25zdCByZXN1bHQgPSBSZWZsZWN0LmRlbGV0ZVByb3BlcnR5KHRhcmdldCwga2V5KTtcclxuICAgIGlmIChyZXN1bHQgJiYgaGFkS2V5KSB7XHJcbiAgICAgICAgdHJpZ2dlcih0YXJnZXQsIFwiZGVsZXRlXCIgLyogREVMRVRFICovLCBrZXksIHVuZGVmaW5lZCwgb2xkVmFsdWUpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHJlc3VsdDtcclxufVxyXG5mdW5jdGlvbiBoYXModGFyZ2V0LCBrZXkpIHtcclxuICAgIGNvbnN0IHJlc3VsdCA9IFJlZmxlY3QuaGFzKHRhcmdldCwga2V5KTtcclxuICAgIGlmICghaXNTeW1ib2woa2V5KSB8fCAhYnVpbHRJblN5bWJvbHMuaGFzKGtleSkpIHtcclxuICAgICAgICB0cmFjayh0YXJnZXQsIFwiaGFzXCIgLyogSEFTICovLCBrZXkpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHJlc3VsdDtcclxufVxyXG5mdW5jdGlvbiBvd25LZXlzKHRhcmdldCkge1xyXG4gICAgdHJhY2sodGFyZ2V0LCBcIml0ZXJhdGVcIiAvKiBJVEVSQVRFICovLCBpc0FycmF5KHRhcmdldCkgPyAnbGVuZ3RoJyA6IElURVJBVEVfS0VZKTtcclxuICAgIHJldHVybiBSZWZsZWN0Lm93bktleXModGFyZ2V0KTtcclxufVxyXG5jb25zdCBtdXRhYmxlSGFuZGxlcnMgPSB7XHJcbiAgICBnZXQsXHJcbiAgICBzZXQsXHJcbiAgICBkZWxldGVQcm9wZXJ0eSxcclxuICAgIGhhcyxcclxuICAgIG93bktleXNcclxufTtcclxuY29uc3QgcmVhZG9ubHlIYW5kbGVycyA9IHtcclxuICAgIGdldDogcmVhZG9ubHlHZXQsXHJcbiAgICBzZXQodGFyZ2V0LCBrZXkpIHtcclxuICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUud2FybihgU2V0IG9wZXJhdGlvbiBvbiBrZXkgXCIke1N0cmluZyhrZXkpfVwiIGZhaWxlZDogdGFyZ2V0IGlzIHJlYWRvbmx5LmAsIHRhcmdldCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfSxcclxuICAgIGRlbGV0ZVByb3BlcnR5KHRhcmdldCwga2V5KSB7XHJcbiAgICAgICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSkge1xyXG4gICAgICAgICAgICBjb25zb2xlLndhcm4oYERlbGV0ZSBvcGVyYXRpb24gb24ga2V5IFwiJHtTdHJpbmcoa2V5KX1cIiBmYWlsZWQ6IHRhcmdldCBpcyByZWFkb25seS5gLCB0YXJnZXQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH1cclxufTtcclxuY29uc3Qgc2hhbGxvd1JlYWN0aXZlSGFuZGxlcnMgPSAvKiNfX1BVUkVfXyovIGV4dGVuZCh7fSwgbXV0YWJsZUhhbmRsZXJzLCB7XHJcbiAgICBnZXQ6IHNoYWxsb3dHZXQsXHJcbiAgICBzZXQ6IHNoYWxsb3dTZXRcclxufSk7XHJcbi8vIFByb3BzIGhhbmRsZXJzIGFyZSBzcGVjaWFsIGluIHRoZSBzZW5zZSB0aGF0IGl0IHNob3VsZCBub3QgdW53cmFwIHRvcC1sZXZlbFxyXG4vLyByZWZzIChpbiBvcmRlciB0byBhbGxvdyByZWZzIHRvIGJlIGV4cGxpY2l0bHkgcGFzc2VkIGRvd24pLCBidXQgc2hvdWxkXHJcbi8vIHJldGFpbiB0aGUgcmVhY3Rpdml0eSBvZiB0aGUgbm9ybWFsIHJlYWRvbmx5IG9iamVjdC5cclxuY29uc3Qgc2hhbGxvd1JlYWRvbmx5SGFuZGxlcnMgPSAvKiNfX1BVUkVfXyovIGV4dGVuZCh7fSwgcmVhZG9ubHlIYW5kbGVycywge1xyXG4gICAgZ2V0OiBzaGFsbG93UmVhZG9ubHlHZXRcclxufSk7XG5cbmNvbnN0IHRvU2hhbGxvdyA9ICh2YWx1ZSkgPT4gdmFsdWU7XHJcbmNvbnN0IGdldFByb3RvID0gKHYpID0+IFJlZmxlY3QuZ2V0UHJvdG90eXBlT2Yodik7XHJcbmZ1bmN0aW9uIGdldCQxKHRhcmdldCwga2V5LCBpc1JlYWRvbmx5ID0gZmFsc2UsIGlzU2hhbGxvdyA9IGZhbHNlKSB7XHJcbiAgICAvLyAjMTc3MjogcmVhZG9ubHkocmVhY3RpdmUoTWFwKSkgc2hvdWxkIHJldHVybiByZWFkb25seSArIHJlYWN0aXZlIHZlcnNpb25cclxuICAgIC8vIG9mIHRoZSB2YWx1ZVxyXG4gICAgdGFyZ2V0ID0gdGFyZ2V0W1wiX192X3Jhd1wiIC8qIFJBVyAqL107XHJcbiAgICBjb25zdCByYXdUYXJnZXQgPSB0b1Jhdyh0YXJnZXQpO1xyXG4gICAgY29uc3QgcmF3S2V5ID0gdG9SYXcoa2V5KTtcclxuICAgIGlmIChrZXkgIT09IHJhd0tleSkge1xyXG4gICAgICAgICFpc1JlYWRvbmx5ICYmIHRyYWNrKHJhd1RhcmdldCwgXCJnZXRcIiAvKiBHRVQgKi8sIGtleSk7XHJcbiAgICB9XHJcbiAgICAhaXNSZWFkb25seSAmJiB0cmFjayhyYXdUYXJnZXQsIFwiZ2V0XCIgLyogR0VUICovLCByYXdLZXkpO1xyXG4gICAgY29uc3QgeyBoYXMgfSA9IGdldFByb3RvKHJhd1RhcmdldCk7XHJcbiAgICBjb25zdCB3cmFwID0gaXNTaGFsbG93ID8gdG9TaGFsbG93IDogaXNSZWFkb25seSA/IHRvUmVhZG9ubHkgOiB0b1JlYWN0aXZlO1xyXG4gICAgaWYgKGhhcy5jYWxsKHJhd1RhcmdldCwga2V5KSkge1xyXG4gICAgICAgIHJldHVybiB3cmFwKHRhcmdldC5nZXQoa2V5KSk7XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmIChoYXMuY2FsbChyYXdUYXJnZXQsIHJhd0tleSkpIHtcclxuICAgICAgICByZXR1cm4gd3JhcCh0YXJnZXQuZ2V0KHJhd0tleSkpO1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZiAodGFyZ2V0ICE9PSByYXdUYXJnZXQpIHtcclxuICAgICAgICAvLyAjMzYwMiByZWFkb25seShyZWFjdGl2ZShNYXApKVxyXG4gICAgICAgIC8vIGVuc3VyZSB0aGF0IHRoZSBuZXN0ZWQgcmVhY3RpdmUgYE1hcGAgY2FuIGRvIHRyYWNraW5nIGZvciBpdHNlbGZcclxuICAgICAgICB0YXJnZXQuZ2V0KGtleSk7XHJcbiAgICB9XHJcbn1cclxuZnVuY3Rpb24gaGFzJDEoa2V5LCBpc1JlYWRvbmx5ID0gZmFsc2UpIHtcclxuICAgIGNvbnN0IHRhcmdldCA9IHRoaXNbXCJfX3ZfcmF3XCIgLyogUkFXICovXTtcclxuICAgIGNvbnN0IHJhd1RhcmdldCA9IHRvUmF3KHRhcmdldCk7XHJcbiAgICBjb25zdCByYXdLZXkgPSB0b1JhdyhrZXkpO1xyXG4gICAgaWYgKGtleSAhPT0gcmF3S2V5KSB7XHJcbiAgICAgICAgIWlzUmVhZG9ubHkgJiYgdHJhY2socmF3VGFyZ2V0LCBcImhhc1wiIC8qIEhBUyAqLywga2V5KTtcclxuICAgIH1cclxuICAgICFpc1JlYWRvbmx5ICYmIHRyYWNrKHJhd1RhcmdldCwgXCJoYXNcIiAvKiBIQVMgKi8sIHJhd0tleSk7XHJcbiAgICByZXR1cm4ga2V5ID09PSByYXdLZXlcclxuICAgICAgICA/IHRhcmdldC5oYXMoa2V5KVxyXG4gICAgICAgIDogdGFyZ2V0LmhhcyhrZXkpIHx8IHRhcmdldC5oYXMocmF3S2V5KTtcclxufVxyXG5mdW5jdGlvbiBzaXplKHRhcmdldCwgaXNSZWFkb25seSA9IGZhbHNlKSB7XHJcbiAgICB0YXJnZXQgPSB0YXJnZXRbXCJfX3ZfcmF3XCIgLyogUkFXICovXTtcclxuICAgICFpc1JlYWRvbmx5ICYmIHRyYWNrKHRvUmF3KHRhcmdldCksIFwiaXRlcmF0ZVwiIC8qIElURVJBVEUgKi8sIElURVJBVEVfS0VZKTtcclxuICAgIHJldHVybiBSZWZsZWN0LmdldCh0YXJnZXQsICdzaXplJywgdGFyZ2V0KTtcclxufVxyXG5mdW5jdGlvbiBhZGQodmFsdWUpIHtcclxuICAgIHZhbHVlID0gdG9SYXcodmFsdWUpO1xyXG4gICAgY29uc3QgdGFyZ2V0ID0gdG9SYXcodGhpcyk7XHJcbiAgICBjb25zdCBwcm90byA9IGdldFByb3RvKHRhcmdldCk7XHJcbiAgICBjb25zdCBoYWRLZXkgPSBwcm90by5oYXMuY2FsbCh0YXJnZXQsIHZhbHVlKTtcclxuICAgIGlmICghaGFkS2V5KSB7XHJcbiAgICAgICAgdGFyZ2V0LmFkZCh2YWx1ZSk7XHJcbiAgICAgICAgdHJpZ2dlcih0YXJnZXQsIFwiYWRkXCIgLyogQUREICovLCB2YWx1ZSwgdmFsdWUpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHRoaXM7XHJcbn1cclxuZnVuY3Rpb24gc2V0JDEoa2V5LCB2YWx1ZSkge1xyXG4gICAgdmFsdWUgPSB0b1Jhdyh2YWx1ZSk7XHJcbiAgICBjb25zdCB0YXJnZXQgPSB0b1Jhdyh0aGlzKTtcclxuICAgIGNvbnN0IHsgaGFzLCBnZXQgfSA9IGdldFByb3RvKHRhcmdldCk7XHJcbiAgICBsZXQgaGFkS2V5ID0gaGFzLmNhbGwodGFyZ2V0LCBrZXkpO1xyXG4gICAgaWYgKCFoYWRLZXkpIHtcclxuICAgICAgICBrZXkgPSB0b1JhdyhrZXkpO1xyXG4gICAgICAgIGhhZEtleSA9IGhhcy5jYWxsKHRhcmdldCwga2V5KTtcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSkge1xyXG4gICAgICAgIGNoZWNrSWRlbnRpdHlLZXlzKHRhcmdldCwgaGFzLCBrZXkpO1xyXG4gICAgfVxyXG4gICAgY29uc3Qgb2xkVmFsdWUgPSBnZXQuY2FsbCh0YXJnZXQsIGtleSk7XHJcbiAgICB0YXJnZXQuc2V0KGtleSwgdmFsdWUpO1xyXG4gICAgaWYgKCFoYWRLZXkpIHtcclxuICAgICAgICB0cmlnZ2VyKHRhcmdldCwgXCJhZGRcIiAvKiBBREQgKi8sIGtleSwgdmFsdWUpO1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZiAoaGFzQ2hhbmdlZCh2YWx1ZSwgb2xkVmFsdWUpKSB7XHJcbiAgICAgICAgdHJpZ2dlcih0YXJnZXQsIFwic2V0XCIgLyogU0VUICovLCBrZXksIHZhbHVlLCBvbGRWYWx1ZSk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gdGhpcztcclxufVxyXG5mdW5jdGlvbiBkZWxldGVFbnRyeShrZXkpIHtcclxuICAgIGNvbnN0IHRhcmdldCA9IHRvUmF3KHRoaXMpO1xyXG4gICAgY29uc3QgeyBoYXMsIGdldCB9ID0gZ2V0UHJvdG8odGFyZ2V0KTtcclxuICAgIGxldCBoYWRLZXkgPSBoYXMuY2FsbCh0YXJnZXQsIGtleSk7XHJcbiAgICBpZiAoIWhhZEtleSkge1xyXG4gICAgICAgIGtleSA9IHRvUmF3KGtleSk7XHJcbiAgICAgICAgaGFkS2V5ID0gaGFzLmNhbGwodGFyZ2V0LCBrZXkpO1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpKSB7XHJcbiAgICAgICAgY2hlY2tJZGVudGl0eUtleXModGFyZ2V0LCBoYXMsIGtleSk7XHJcbiAgICB9XHJcbiAgICBjb25zdCBvbGRWYWx1ZSA9IGdldCA/IGdldC5jYWxsKHRhcmdldCwga2V5KSA6IHVuZGVmaW5lZDtcclxuICAgIC8vIGZvcndhcmQgdGhlIG9wZXJhdGlvbiBiZWZvcmUgcXVldWVpbmcgcmVhY3Rpb25zXHJcbiAgICBjb25zdCByZXN1bHQgPSB0YXJnZXQuZGVsZXRlKGtleSk7XHJcbiAgICBpZiAoaGFkS2V5KSB7XHJcbiAgICAgICAgdHJpZ2dlcih0YXJnZXQsIFwiZGVsZXRlXCIgLyogREVMRVRFICovLCBrZXksIHVuZGVmaW5lZCwgb2xkVmFsdWUpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHJlc3VsdDtcclxufVxyXG5mdW5jdGlvbiBjbGVhcigpIHtcclxuICAgIGNvbnN0IHRhcmdldCA9IHRvUmF3KHRoaXMpO1xyXG4gICAgY29uc3QgaGFkSXRlbXMgPSB0YXJnZXQuc2l6ZSAhPT0gMDtcclxuICAgIGNvbnN0IG9sZFRhcmdldCA9IChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKVxyXG4gICAgICAgID8gaXNNYXAodGFyZ2V0KVxyXG4gICAgICAgICAgICA/IG5ldyBNYXAodGFyZ2V0KVxyXG4gICAgICAgICAgICA6IG5ldyBTZXQodGFyZ2V0KVxyXG4gICAgICAgIDogdW5kZWZpbmVkO1xyXG4gICAgLy8gZm9yd2FyZCB0aGUgb3BlcmF0aW9uIGJlZm9yZSBxdWV1ZWluZyByZWFjdGlvbnNcclxuICAgIGNvbnN0IHJlc3VsdCA9IHRhcmdldC5jbGVhcigpO1xyXG4gICAgaWYgKGhhZEl0ZW1zKSB7XHJcbiAgICAgICAgdHJpZ2dlcih0YXJnZXQsIFwiY2xlYXJcIiAvKiBDTEVBUiAqLywgdW5kZWZpbmVkLCB1bmRlZmluZWQsIG9sZFRhcmdldCk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gcmVzdWx0O1xyXG59XHJcbmZ1bmN0aW9uIGNyZWF0ZUZvckVhY2goaXNSZWFkb25seSwgaXNTaGFsbG93KSB7XHJcbiAgICByZXR1cm4gZnVuY3Rpb24gZm9yRWFjaChjYWxsYmFjaywgdGhpc0FyZykge1xyXG4gICAgICAgIGNvbnN0IG9ic2VydmVkID0gdGhpcztcclxuICAgICAgICBjb25zdCB0YXJnZXQgPSBvYnNlcnZlZFtcIl9fdl9yYXdcIiAvKiBSQVcgKi9dO1xyXG4gICAgICAgIGNvbnN0IHJhd1RhcmdldCA9IHRvUmF3KHRhcmdldCk7XHJcbiAgICAgICAgY29uc3Qgd3JhcCA9IGlzU2hhbGxvdyA/IHRvU2hhbGxvdyA6IGlzUmVhZG9ubHkgPyB0b1JlYWRvbmx5IDogdG9SZWFjdGl2ZTtcclxuICAgICAgICAhaXNSZWFkb25seSAmJiB0cmFjayhyYXdUYXJnZXQsIFwiaXRlcmF0ZVwiIC8qIElURVJBVEUgKi8sIElURVJBVEVfS0VZKTtcclxuICAgICAgICByZXR1cm4gdGFyZ2V0LmZvckVhY2goKHZhbHVlLCBrZXkpID0+IHtcclxuICAgICAgICAgICAgLy8gaW1wb3J0YW50OiBtYWtlIHN1cmUgdGhlIGNhbGxiYWNrIGlzXHJcbiAgICAgICAgICAgIC8vIDEuIGludm9rZWQgd2l0aCB0aGUgcmVhY3RpdmUgbWFwIGFzIGB0aGlzYCBhbmQgM3JkIGFyZ1xyXG4gICAgICAgICAgICAvLyAyLiB0aGUgdmFsdWUgcmVjZWl2ZWQgc2hvdWxkIGJlIGEgY29ycmVzcG9uZGluZyByZWFjdGl2ZS9yZWFkb25seS5cclxuICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrLmNhbGwodGhpc0FyZywgd3JhcCh2YWx1ZSksIHdyYXAoa2V5KSwgb2JzZXJ2ZWQpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxufVxyXG5mdW5jdGlvbiBjcmVhdGVJdGVyYWJsZU1ldGhvZChtZXRob2QsIGlzUmVhZG9ubHksIGlzU2hhbGxvdykge1xyXG4gICAgcmV0dXJuIGZ1bmN0aW9uICguLi5hcmdzKSB7XHJcbiAgICAgICAgY29uc3QgdGFyZ2V0ID0gdGhpc1tcIl9fdl9yYXdcIiAvKiBSQVcgKi9dO1xyXG4gICAgICAgIGNvbnN0IHJhd1RhcmdldCA9IHRvUmF3KHRhcmdldCk7XHJcbiAgICAgICAgY29uc3QgdGFyZ2V0SXNNYXAgPSBpc01hcChyYXdUYXJnZXQpO1xyXG4gICAgICAgIGNvbnN0IGlzUGFpciA9IG1ldGhvZCA9PT0gJ2VudHJpZXMnIHx8IChtZXRob2QgPT09IFN5bWJvbC5pdGVyYXRvciAmJiB0YXJnZXRJc01hcCk7XHJcbiAgICAgICAgY29uc3QgaXNLZXlPbmx5ID0gbWV0aG9kID09PSAna2V5cycgJiYgdGFyZ2V0SXNNYXA7XHJcbiAgICAgICAgY29uc3QgaW5uZXJJdGVyYXRvciA9IHRhcmdldFttZXRob2RdKC4uLmFyZ3MpO1xyXG4gICAgICAgIGNvbnN0IHdyYXAgPSBpc1NoYWxsb3cgPyB0b1NoYWxsb3cgOiBpc1JlYWRvbmx5ID8gdG9SZWFkb25seSA6IHRvUmVhY3RpdmU7XHJcbiAgICAgICAgIWlzUmVhZG9ubHkgJiZcclxuICAgICAgICAgICAgdHJhY2socmF3VGFyZ2V0LCBcIml0ZXJhdGVcIiAvKiBJVEVSQVRFICovLCBpc0tleU9ubHkgPyBNQVBfS0VZX0lURVJBVEVfS0VZIDogSVRFUkFURV9LRVkpO1xyXG4gICAgICAgIC8vIHJldHVybiBhIHdyYXBwZWQgaXRlcmF0b3Igd2hpY2ggcmV0dXJucyBvYnNlcnZlZCB2ZXJzaW9ucyBvZiB0aGVcclxuICAgICAgICAvLyB2YWx1ZXMgZW1pdHRlZCBmcm9tIHRoZSByZWFsIGl0ZXJhdG9yXHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgLy8gaXRlcmF0b3IgcHJvdG9jb2xcclxuICAgICAgICAgICAgbmV4dCgpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHsgdmFsdWUsIGRvbmUgfSA9IGlubmVySXRlcmF0b3IubmV4dCgpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGRvbmVcclxuICAgICAgICAgICAgICAgICAgICA/IHsgdmFsdWUsIGRvbmUgfVxyXG4gICAgICAgICAgICAgICAgICAgIDoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogaXNQYWlyID8gW3dyYXAodmFsdWVbMF0pLCB3cmFwKHZhbHVlWzFdKV0gOiB3cmFwKHZhbHVlKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZG9uZVxyXG4gICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIC8vIGl0ZXJhYmxlIHByb3RvY29sXHJcbiAgICAgICAgICAgIFtTeW1ib2wuaXRlcmF0b3JdKCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgfTtcclxufVxyXG5mdW5jdGlvbiBjcmVhdGVSZWFkb25seU1ldGhvZCh0eXBlKSB7XHJcbiAgICByZXR1cm4gZnVuY3Rpb24gKC4uLmFyZ3MpIHtcclxuICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGtleSA9IGFyZ3NbMF0gPyBgb24ga2V5IFwiJHthcmdzWzBdfVwiIGAgOiBgYDtcclxuICAgICAgICAgICAgY29uc29sZS53YXJuKGAke2NhcGl0YWxpemUodHlwZSl9IG9wZXJhdGlvbiAke2tleX1mYWlsZWQ6IHRhcmdldCBpcyByZWFkb25seS5gLCB0b1Jhdyh0aGlzKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0eXBlID09PSBcImRlbGV0ZVwiIC8qIERFTEVURSAqLyA/IGZhbHNlIDogdGhpcztcclxuICAgIH07XHJcbn1cclxuZnVuY3Rpb24gY3JlYXRlSW5zdHJ1bWVudGF0aW9ucygpIHtcclxuICAgIGNvbnN0IG11dGFibGVJbnN0cnVtZW50YXRpb25zID0ge1xyXG4gICAgICAgIGdldChrZXkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGdldCQxKHRoaXMsIGtleSk7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBnZXQgc2l6ZSgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHNpemUodGhpcyk7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBoYXM6IGhhcyQxLFxyXG4gICAgICAgIGFkZCxcclxuICAgICAgICBzZXQ6IHNldCQxLFxyXG4gICAgICAgIGRlbGV0ZTogZGVsZXRlRW50cnksXHJcbiAgICAgICAgY2xlYXIsXHJcbiAgICAgICAgZm9yRWFjaDogY3JlYXRlRm9yRWFjaChmYWxzZSwgZmFsc2UpXHJcbiAgICB9O1xyXG4gICAgY29uc3Qgc2hhbGxvd0luc3RydW1lbnRhdGlvbnMgPSB7XHJcbiAgICAgICAgZ2V0KGtleSkge1xyXG4gICAgICAgICAgICByZXR1cm4gZ2V0JDEodGhpcywga2V5LCBmYWxzZSwgdHJ1ZSk7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBnZXQgc2l6ZSgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHNpemUodGhpcyk7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBoYXM6IGhhcyQxLFxyXG4gICAgICAgIGFkZCxcclxuICAgICAgICBzZXQ6IHNldCQxLFxyXG4gICAgICAgIGRlbGV0ZTogZGVsZXRlRW50cnksXHJcbiAgICAgICAgY2xlYXIsXHJcbiAgICAgICAgZm9yRWFjaDogY3JlYXRlRm9yRWFjaChmYWxzZSwgdHJ1ZSlcclxuICAgIH07XHJcbiAgICBjb25zdCByZWFkb25seUluc3RydW1lbnRhdGlvbnMgPSB7XHJcbiAgICAgICAgZ2V0KGtleSkge1xyXG4gICAgICAgICAgICByZXR1cm4gZ2V0JDEodGhpcywga2V5LCB0cnVlKTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGdldCBzaXplKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gc2l6ZSh0aGlzLCB0cnVlKTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGhhcyhrZXkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGhhcyQxLmNhbGwodGhpcywga2V5LCB0cnVlKTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGFkZDogY3JlYXRlUmVhZG9ubHlNZXRob2QoXCJhZGRcIiAvKiBBREQgKi8pLFxyXG4gICAgICAgIHNldDogY3JlYXRlUmVhZG9ubHlNZXRob2QoXCJzZXRcIiAvKiBTRVQgKi8pLFxyXG4gICAgICAgIGRlbGV0ZTogY3JlYXRlUmVhZG9ubHlNZXRob2QoXCJkZWxldGVcIiAvKiBERUxFVEUgKi8pLFxyXG4gICAgICAgIGNsZWFyOiBjcmVhdGVSZWFkb25seU1ldGhvZChcImNsZWFyXCIgLyogQ0xFQVIgKi8pLFxyXG4gICAgICAgIGZvckVhY2g6IGNyZWF0ZUZvckVhY2godHJ1ZSwgZmFsc2UpXHJcbiAgICB9O1xyXG4gICAgY29uc3Qgc2hhbGxvd1JlYWRvbmx5SW5zdHJ1bWVudGF0aW9ucyA9IHtcclxuICAgICAgICBnZXQoa2V5KSB7XHJcbiAgICAgICAgICAgIHJldHVybiBnZXQkMSh0aGlzLCBrZXksIHRydWUsIHRydWUpO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZ2V0IHNpemUoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBzaXplKHRoaXMsIHRydWUpO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgaGFzKGtleSkge1xyXG4gICAgICAgICAgICByZXR1cm4gaGFzJDEuY2FsbCh0aGlzLCBrZXksIHRydWUpO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgYWRkOiBjcmVhdGVSZWFkb25seU1ldGhvZChcImFkZFwiIC8qIEFERCAqLyksXHJcbiAgICAgICAgc2V0OiBjcmVhdGVSZWFkb25seU1ldGhvZChcInNldFwiIC8qIFNFVCAqLyksXHJcbiAgICAgICAgZGVsZXRlOiBjcmVhdGVSZWFkb25seU1ldGhvZChcImRlbGV0ZVwiIC8qIERFTEVURSAqLyksXHJcbiAgICAgICAgY2xlYXI6IGNyZWF0ZVJlYWRvbmx5TWV0aG9kKFwiY2xlYXJcIiAvKiBDTEVBUiAqLyksXHJcbiAgICAgICAgZm9yRWFjaDogY3JlYXRlRm9yRWFjaCh0cnVlLCB0cnVlKVxyXG4gICAgfTtcclxuICAgIGNvbnN0IGl0ZXJhdG9yTWV0aG9kcyA9IFsna2V5cycsICd2YWx1ZXMnLCAnZW50cmllcycsIFN5bWJvbC5pdGVyYXRvcl07XHJcbiAgICBpdGVyYXRvck1ldGhvZHMuZm9yRWFjaChtZXRob2QgPT4ge1xyXG4gICAgICAgIG11dGFibGVJbnN0cnVtZW50YXRpb25zW21ldGhvZF0gPSBjcmVhdGVJdGVyYWJsZU1ldGhvZChtZXRob2QsIGZhbHNlLCBmYWxzZSk7XHJcbiAgICAgICAgcmVhZG9ubHlJbnN0cnVtZW50YXRpb25zW21ldGhvZF0gPSBjcmVhdGVJdGVyYWJsZU1ldGhvZChtZXRob2QsIHRydWUsIGZhbHNlKTtcclxuICAgICAgICBzaGFsbG93SW5zdHJ1bWVudGF0aW9uc1ttZXRob2RdID0gY3JlYXRlSXRlcmFibGVNZXRob2QobWV0aG9kLCBmYWxzZSwgdHJ1ZSk7XHJcbiAgICAgICAgc2hhbGxvd1JlYWRvbmx5SW5zdHJ1bWVudGF0aW9uc1ttZXRob2RdID0gY3JlYXRlSXRlcmFibGVNZXRob2QobWV0aG9kLCB0cnVlLCB0cnVlKTtcclxuICAgIH0pO1xyXG4gICAgcmV0dXJuIFtcclxuICAgICAgICBtdXRhYmxlSW5zdHJ1bWVudGF0aW9ucyxcclxuICAgICAgICByZWFkb25seUluc3RydW1lbnRhdGlvbnMsXHJcbiAgICAgICAgc2hhbGxvd0luc3RydW1lbnRhdGlvbnMsXHJcbiAgICAgICAgc2hhbGxvd1JlYWRvbmx5SW5zdHJ1bWVudGF0aW9uc1xyXG4gICAgXTtcclxufVxyXG5jb25zdCBbbXV0YWJsZUluc3RydW1lbnRhdGlvbnMsIHJlYWRvbmx5SW5zdHJ1bWVudGF0aW9ucywgc2hhbGxvd0luc3RydW1lbnRhdGlvbnMsIHNoYWxsb3dSZWFkb25seUluc3RydW1lbnRhdGlvbnNdID0gLyogI19fUFVSRV9fKi8gY3JlYXRlSW5zdHJ1bWVudGF0aW9ucygpO1xyXG5mdW5jdGlvbiBjcmVhdGVJbnN0cnVtZW50YXRpb25HZXR0ZXIoaXNSZWFkb25seSwgc2hhbGxvdykge1xyXG4gICAgY29uc3QgaW5zdHJ1bWVudGF0aW9ucyA9IHNoYWxsb3dcclxuICAgICAgICA/IGlzUmVhZG9ubHlcclxuICAgICAgICAgICAgPyBzaGFsbG93UmVhZG9ubHlJbnN0cnVtZW50YXRpb25zXHJcbiAgICAgICAgICAgIDogc2hhbGxvd0luc3RydW1lbnRhdGlvbnNcclxuICAgICAgICA6IGlzUmVhZG9ubHlcclxuICAgICAgICAgICAgPyByZWFkb25seUluc3RydW1lbnRhdGlvbnNcclxuICAgICAgICAgICAgOiBtdXRhYmxlSW5zdHJ1bWVudGF0aW9ucztcclxuICAgIHJldHVybiAodGFyZ2V0LCBrZXksIHJlY2VpdmVyKSA9PiB7XHJcbiAgICAgICAgaWYgKGtleSA9PT0gXCJfX3ZfaXNSZWFjdGl2ZVwiIC8qIElTX1JFQUNUSVZFICovKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAhaXNSZWFkb25seTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoa2V5ID09PSBcIl9fdl9pc1JlYWRvbmx5XCIgLyogSVNfUkVBRE9OTFkgKi8pIHtcclxuICAgICAgICAgICAgcmV0dXJuIGlzUmVhZG9ubHk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKGtleSA9PT0gXCJfX3ZfcmF3XCIgLyogUkFXICovKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0YXJnZXQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBSZWZsZWN0LmdldChoYXNPd24oaW5zdHJ1bWVudGF0aW9ucywga2V5KSAmJiBrZXkgaW4gdGFyZ2V0XHJcbiAgICAgICAgICAgID8gaW5zdHJ1bWVudGF0aW9uc1xyXG4gICAgICAgICAgICA6IHRhcmdldCwga2V5LCByZWNlaXZlcik7XHJcbiAgICB9O1xyXG59XHJcbmNvbnN0IG11dGFibGVDb2xsZWN0aW9uSGFuZGxlcnMgPSB7XHJcbiAgICBnZXQ6IC8qI19fUFVSRV9fKi8gY3JlYXRlSW5zdHJ1bWVudGF0aW9uR2V0dGVyKGZhbHNlLCBmYWxzZSlcclxufTtcclxuY29uc3Qgc2hhbGxvd0NvbGxlY3Rpb25IYW5kbGVycyA9IHtcclxuICAgIGdldDogLyojX19QVVJFX18qLyBjcmVhdGVJbnN0cnVtZW50YXRpb25HZXR0ZXIoZmFsc2UsIHRydWUpXHJcbn07XHJcbmNvbnN0IHJlYWRvbmx5Q29sbGVjdGlvbkhhbmRsZXJzID0ge1xyXG4gICAgZ2V0OiAvKiNfX1BVUkVfXyovIGNyZWF0ZUluc3RydW1lbnRhdGlvbkdldHRlcih0cnVlLCBmYWxzZSlcclxufTtcclxuY29uc3Qgc2hhbGxvd1JlYWRvbmx5Q29sbGVjdGlvbkhhbmRsZXJzID0ge1xyXG4gICAgZ2V0OiAvKiNfX1BVUkVfXyovIGNyZWF0ZUluc3RydW1lbnRhdGlvbkdldHRlcih0cnVlLCB0cnVlKVxyXG59O1xyXG5mdW5jdGlvbiBjaGVja0lkZW50aXR5S2V5cyh0YXJnZXQsIGhhcywga2V5KSB7XHJcbiAgICBjb25zdCByYXdLZXkgPSB0b1JhdyhrZXkpO1xyXG4gICAgaWYgKHJhd0tleSAhPT0ga2V5ICYmIGhhcy5jYWxsKHRhcmdldCwgcmF3S2V5KSkge1xyXG4gICAgICAgIGNvbnN0IHR5cGUgPSB0b1Jhd1R5cGUodGFyZ2V0KTtcclxuICAgICAgICBjb25zb2xlLndhcm4oYFJlYWN0aXZlICR7dHlwZX0gY29udGFpbnMgYm90aCB0aGUgcmF3IGFuZCByZWFjdGl2ZSBgICtcclxuICAgICAgICAgICAgYHZlcnNpb25zIG9mIHRoZSBzYW1lIG9iamVjdCR7dHlwZSA9PT0gYE1hcGAgPyBgIGFzIGtleXNgIDogYGB9LCBgICtcclxuICAgICAgICAgICAgYHdoaWNoIGNhbiBsZWFkIHRvIGluY29uc2lzdGVuY2llcy4gYCArXHJcbiAgICAgICAgICAgIGBBdm9pZCBkaWZmZXJlbnRpYXRpbmcgYmV0d2VlbiB0aGUgcmF3IGFuZCByZWFjdGl2ZSB2ZXJzaW9ucyBgICtcclxuICAgICAgICAgICAgYG9mIGFuIG9iamVjdCBhbmQgb25seSB1c2UgdGhlIHJlYWN0aXZlIHZlcnNpb24gaWYgcG9zc2libGUuYCk7XHJcbiAgICB9XHJcbn1cblxuY29uc3QgcmVhY3RpdmVNYXAgPSBuZXcgV2Vha01hcCgpO1xyXG5jb25zdCBzaGFsbG93UmVhY3RpdmVNYXAgPSBuZXcgV2Vha01hcCgpO1xyXG5jb25zdCByZWFkb25seU1hcCA9IG5ldyBXZWFrTWFwKCk7XHJcbmNvbnN0IHNoYWxsb3dSZWFkb25seU1hcCA9IG5ldyBXZWFrTWFwKCk7XHJcbmZ1bmN0aW9uIHRhcmdldFR5cGVNYXAocmF3VHlwZSkge1xyXG4gICAgc3dpdGNoIChyYXdUeXBlKSB7XHJcbiAgICAgICAgY2FzZSAnT2JqZWN0JzpcclxuICAgICAgICBjYXNlICdBcnJheSc6XHJcbiAgICAgICAgICAgIHJldHVybiAxIC8qIENPTU1PTiAqLztcclxuICAgICAgICBjYXNlICdNYXAnOlxyXG4gICAgICAgIGNhc2UgJ1NldCc6XHJcbiAgICAgICAgY2FzZSAnV2Vha01hcCc6XHJcbiAgICAgICAgY2FzZSAnV2Vha1NldCc6XHJcbiAgICAgICAgICAgIHJldHVybiAyIC8qIENPTExFQ1RJT04gKi87XHJcbiAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgcmV0dXJuIDAgLyogSU5WQUxJRCAqLztcclxuICAgIH1cclxufVxyXG5mdW5jdGlvbiBnZXRUYXJnZXRUeXBlKHZhbHVlKSB7XHJcbiAgICByZXR1cm4gdmFsdWVbXCJfX3Zfc2tpcFwiIC8qIFNLSVAgKi9dIHx8ICFPYmplY3QuaXNFeHRlbnNpYmxlKHZhbHVlKVxyXG4gICAgICAgID8gMCAvKiBJTlZBTElEICovXHJcbiAgICAgICAgOiB0YXJnZXRUeXBlTWFwKHRvUmF3VHlwZSh2YWx1ZSkpO1xyXG59XHJcbmZ1bmN0aW9uIHJlYWN0aXZlKHRhcmdldCkge1xyXG4gICAgLy8gaWYgdHJ5aW5nIHRvIG9ic2VydmUgYSByZWFkb25seSBwcm94eSwgcmV0dXJuIHRoZSByZWFkb25seSB2ZXJzaW9uLlxyXG4gICAgaWYgKHRhcmdldCAmJiB0YXJnZXRbXCJfX3ZfaXNSZWFkb25seVwiIC8qIElTX1JFQURPTkxZICovXSkge1xyXG4gICAgICAgIHJldHVybiB0YXJnZXQ7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gY3JlYXRlUmVhY3RpdmVPYmplY3QodGFyZ2V0LCBmYWxzZSwgbXV0YWJsZUhhbmRsZXJzLCBtdXRhYmxlQ29sbGVjdGlvbkhhbmRsZXJzLCByZWFjdGl2ZU1hcCk7XHJcbn1cclxuLyoqXHJcbiAqIFJldHVybiBhIHNoYWxsb3dseS1yZWFjdGl2ZSBjb3B5IG9mIHRoZSBvcmlnaW5hbCBvYmplY3QsIHdoZXJlIG9ubHkgdGhlIHJvb3RcclxuICogbGV2ZWwgcHJvcGVydGllcyBhcmUgcmVhY3RpdmUuIEl0IGFsc28gZG9lcyBub3QgYXV0by11bndyYXAgcmVmcyAoZXZlbiBhdCB0aGVcclxuICogcm9vdCBsZXZlbCkuXHJcbiAqL1xyXG5mdW5jdGlvbiBzaGFsbG93UmVhY3RpdmUodGFyZ2V0KSB7XHJcbiAgICByZXR1cm4gY3JlYXRlUmVhY3RpdmVPYmplY3QodGFyZ2V0LCBmYWxzZSwgc2hhbGxvd1JlYWN0aXZlSGFuZGxlcnMsIHNoYWxsb3dDb2xsZWN0aW9uSGFuZGxlcnMsIHNoYWxsb3dSZWFjdGl2ZU1hcCk7XHJcbn1cclxuLyoqXHJcbiAqIENyZWF0ZXMgYSByZWFkb25seSBjb3B5IG9mIHRoZSBvcmlnaW5hbCBvYmplY3QuIE5vdGUgdGhlIHJldHVybmVkIGNvcHkgaXMgbm90XHJcbiAqIG1hZGUgcmVhY3RpdmUsIGJ1dCBgcmVhZG9ubHlgIGNhbiBiZSBjYWxsZWQgb24gYW4gYWxyZWFkeSByZWFjdGl2ZSBvYmplY3QuXHJcbiAqL1xyXG5mdW5jdGlvbiByZWFkb25seSh0YXJnZXQpIHtcclxuICAgIHJldHVybiBjcmVhdGVSZWFjdGl2ZU9iamVjdCh0YXJnZXQsIHRydWUsIHJlYWRvbmx5SGFuZGxlcnMsIHJlYWRvbmx5Q29sbGVjdGlvbkhhbmRsZXJzLCByZWFkb25seU1hcCk7XHJcbn1cclxuLyoqXHJcbiAqIFJldHVybnMgYSByZWFjdGl2ZS1jb3B5IG9mIHRoZSBvcmlnaW5hbCBvYmplY3QsIHdoZXJlIG9ubHkgdGhlIHJvb3QgbGV2ZWxcclxuICogcHJvcGVydGllcyBhcmUgcmVhZG9ubHksIGFuZCBkb2VzIE5PVCB1bndyYXAgcmVmcyBub3IgcmVjdXJzaXZlbHkgY29udmVydFxyXG4gKiByZXR1cm5lZCBwcm9wZXJ0aWVzLlxyXG4gKiBUaGlzIGlzIHVzZWQgZm9yIGNyZWF0aW5nIHRoZSBwcm9wcyBwcm94eSBvYmplY3QgZm9yIHN0YXRlZnVsIGNvbXBvbmVudHMuXHJcbiAqL1xyXG5mdW5jdGlvbiBzaGFsbG93UmVhZG9ubHkodGFyZ2V0KSB7XHJcbiAgICByZXR1cm4gY3JlYXRlUmVhY3RpdmVPYmplY3QodGFyZ2V0LCB0cnVlLCBzaGFsbG93UmVhZG9ubHlIYW5kbGVycywgc2hhbGxvd1JlYWRvbmx5Q29sbGVjdGlvbkhhbmRsZXJzLCBzaGFsbG93UmVhZG9ubHlNYXApO1xyXG59XHJcbmZ1bmN0aW9uIGNyZWF0ZVJlYWN0aXZlT2JqZWN0KHRhcmdldCwgaXNSZWFkb25seSwgYmFzZUhhbmRsZXJzLCBjb2xsZWN0aW9uSGFuZGxlcnMsIHByb3h5TWFwKSB7XHJcbiAgICBpZiAoIWlzT2JqZWN0KHRhcmdldCkpIHtcclxuICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUud2FybihgdmFsdWUgY2Fubm90IGJlIG1hZGUgcmVhY3RpdmU6ICR7U3RyaW5nKHRhcmdldCl9YCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0YXJnZXQ7XHJcbiAgICB9XHJcbiAgICAvLyB0YXJnZXQgaXMgYWxyZWFkeSBhIFByb3h5LCByZXR1cm4gaXQuXHJcbiAgICAvLyBleGNlcHRpb246IGNhbGxpbmcgcmVhZG9ubHkoKSBvbiBhIHJlYWN0aXZlIG9iamVjdFxyXG4gICAgaWYgKHRhcmdldFtcIl9fdl9yYXdcIiAvKiBSQVcgKi9dICYmXHJcbiAgICAgICAgIShpc1JlYWRvbmx5ICYmIHRhcmdldFtcIl9fdl9pc1JlYWN0aXZlXCIgLyogSVNfUkVBQ1RJVkUgKi9dKSkge1xyXG4gICAgICAgIHJldHVybiB0YXJnZXQ7XHJcbiAgICB9XHJcbiAgICAvLyB0YXJnZXQgYWxyZWFkeSBoYXMgY29ycmVzcG9uZGluZyBQcm94eVxyXG4gICAgY29uc3QgZXhpc3RpbmdQcm94eSA9IHByb3h5TWFwLmdldCh0YXJnZXQpO1xyXG4gICAgaWYgKGV4aXN0aW5nUHJveHkpIHtcclxuICAgICAgICByZXR1cm4gZXhpc3RpbmdQcm94eTtcclxuICAgIH1cclxuICAgIC8vIG9ubHkgYSB3aGl0ZWxpc3Qgb2YgdmFsdWUgdHlwZXMgY2FuIGJlIG9ic2VydmVkLlxyXG4gICAgY29uc3QgdGFyZ2V0VHlwZSA9IGdldFRhcmdldFR5cGUodGFyZ2V0KTtcclxuICAgIGlmICh0YXJnZXRUeXBlID09PSAwIC8qIElOVkFMSUQgKi8pIHtcclxuICAgICAgICByZXR1cm4gdGFyZ2V0O1xyXG4gICAgfVxyXG4gICAgY29uc3QgcHJveHkgPSBuZXcgUHJveHkodGFyZ2V0LCB0YXJnZXRUeXBlID09PSAyIC8qIENPTExFQ1RJT04gKi8gPyBjb2xsZWN0aW9uSGFuZGxlcnMgOiBiYXNlSGFuZGxlcnMpO1xyXG4gICAgcHJveHlNYXAuc2V0KHRhcmdldCwgcHJveHkpO1xyXG4gICAgcmV0dXJuIHByb3h5O1xyXG59XHJcbmZ1bmN0aW9uIGlzUmVhY3RpdmUodmFsdWUpIHtcclxuICAgIGlmIChpc1JlYWRvbmx5KHZhbHVlKSkge1xyXG4gICAgICAgIHJldHVybiBpc1JlYWN0aXZlKHZhbHVlW1wiX192X3Jhd1wiIC8qIFJBVyAqL10pO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuICEhKHZhbHVlICYmIHZhbHVlW1wiX192X2lzUmVhY3RpdmVcIiAvKiBJU19SRUFDVElWRSAqL10pO1xyXG59XHJcbmZ1bmN0aW9uIGlzUmVhZG9ubHkodmFsdWUpIHtcclxuICAgIHJldHVybiAhISh2YWx1ZSAmJiB2YWx1ZVtcIl9fdl9pc1JlYWRvbmx5XCIgLyogSVNfUkVBRE9OTFkgKi9dKTtcclxufVxyXG5mdW5jdGlvbiBpc1Byb3h5KHZhbHVlKSB7XHJcbiAgICByZXR1cm4gaXNSZWFjdGl2ZSh2YWx1ZSkgfHwgaXNSZWFkb25seSh2YWx1ZSk7XHJcbn1cclxuZnVuY3Rpb24gdG9SYXcob2JzZXJ2ZWQpIHtcclxuICAgIGNvbnN0IHJhdyA9IG9ic2VydmVkICYmIG9ic2VydmVkW1wiX192X3Jhd1wiIC8qIFJBVyAqL107XHJcbiAgICByZXR1cm4gcmF3ID8gdG9SYXcocmF3KSA6IG9ic2VydmVkO1xyXG59XHJcbmZ1bmN0aW9uIG1hcmtSYXcodmFsdWUpIHtcclxuICAgIGRlZih2YWx1ZSwgXCJfX3Zfc2tpcFwiIC8qIFNLSVAgKi8sIHRydWUpO1xyXG4gICAgcmV0dXJuIHZhbHVlO1xyXG59XHJcbmNvbnN0IHRvUmVhY3RpdmUgPSAodmFsdWUpID0+IGlzT2JqZWN0KHZhbHVlKSA/IHJlYWN0aXZlKHZhbHVlKSA6IHZhbHVlO1xyXG5jb25zdCB0b1JlYWRvbmx5ID0gKHZhbHVlKSA9PiBpc09iamVjdCh2YWx1ZSkgPyByZWFkb25seSh2YWx1ZSkgOiB2YWx1ZTtcblxuZnVuY3Rpb24gdHJhY2tSZWZWYWx1ZShyZWYpIHtcclxuICAgIGlmIChpc1RyYWNraW5nKCkpIHtcclxuICAgICAgICByZWYgPSB0b1JhdyhyZWYpO1xyXG4gICAgICAgIGlmICghcmVmLmRlcCkge1xyXG4gICAgICAgICAgICByZWYuZGVwID0gY3JlYXRlRGVwKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykpIHtcclxuICAgICAgICAgICAgdHJhY2tFZmZlY3RzKHJlZi5kZXAsIHtcclxuICAgICAgICAgICAgICAgIHRhcmdldDogcmVmLFxyXG4gICAgICAgICAgICAgICAgdHlwZTogXCJnZXRcIiAvKiBHRVQgKi8sXHJcbiAgICAgICAgICAgICAgICBrZXk6ICd2YWx1ZSdcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICB0cmFja0VmZmVjdHMocmVmLmRlcCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbmZ1bmN0aW9uIHRyaWdnZXJSZWZWYWx1ZShyZWYsIG5ld1ZhbCkge1xyXG4gICAgcmVmID0gdG9SYXcocmVmKTtcclxuICAgIGlmIChyZWYuZGVwKSB7XHJcbiAgICAgICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSkge1xyXG4gICAgICAgICAgICB0cmlnZ2VyRWZmZWN0cyhyZWYuZGVwLCB7XHJcbiAgICAgICAgICAgICAgICB0YXJnZXQ6IHJlZixcclxuICAgICAgICAgICAgICAgIHR5cGU6IFwic2V0XCIgLyogU0VUICovLFxyXG4gICAgICAgICAgICAgICAga2V5OiAndmFsdWUnLFxyXG4gICAgICAgICAgICAgICAgbmV3VmFsdWU6IG5ld1ZhbFxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHRyaWdnZXJFZmZlY3RzKHJlZi5kZXApO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5mdW5jdGlvbiBpc1JlZihyKSB7XHJcbiAgICByZXR1cm4gQm9vbGVhbihyICYmIHIuX192X2lzUmVmID09PSB0cnVlKTtcclxufVxyXG5mdW5jdGlvbiByZWYodmFsdWUpIHtcclxuICAgIHJldHVybiBjcmVhdGVSZWYodmFsdWUsIGZhbHNlKTtcclxufVxyXG5mdW5jdGlvbiBzaGFsbG93UmVmKHZhbHVlKSB7XHJcbiAgICByZXR1cm4gY3JlYXRlUmVmKHZhbHVlLCB0cnVlKTtcclxufVxyXG5mdW5jdGlvbiBjcmVhdGVSZWYocmF3VmFsdWUsIHNoYWxsb3cpIHtcclxuICAgIGlmIChpc1JlZihyYXdWYWx1ZSkpIHtcclxuICAgICAgICByZXR1cm4gcmF3VmFsdWU7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gbmV3IFJlZkltcGwocmF3VmFsdWUsIHNoYWxsb3cpO1xyXG59XHJcbmNsYXNzIFJlZkltcGwge1xyXG4gICAgY29uc3RydWN0b3IodmFsdWUsIF9zaGFsbG93KSB7XHJcbiAgICAgICAgdGhpcy5fc2hhbGxvdyA9IF9zaGFsbG93O1xyXG4gICAgICAgIHRoaXMuZGVwID0gdW5kZWZpbmVkO1xyXG4gICAgICAgIHRoaXMuX192X2lzUmVmID0gdHJ1ZTtcclxuICAgICAgICB0aGlzLl9yYXdWYWx1ZSA9IF9zaGFsbG93ID8gdmFsdWUgOiB0b1Jhdyh2YWx1ZSk7XHJcbiAgICAgICAgdGhpcy5fdmFsdWUgPSBfc2hhbGxvdyA/IHZhbHVlIDogdG9SZWFjdGl2ZSh2YWx1ZSk7XHJcbiAgICB9XHJcbiAgICBnZXQgdmFsdWUoKSB7XHJcbiAgICAgICAgdHJhY2tSZWZWYWx1ZSh0aGlzKTtcclxuICAgICAgICByZXR1cm4gdGhpcy5fdmFsdWU7XHJcbiAgICB9XHJcbiAgICBzZXQgdmFsdWUobmV3VmFsKSB7XHJcbiAgICAgICAgbmV3VmFsID0gdGhpcy5fc2hhbGxvdyA/IG5ld1ZhbCA6IHRvUmF3KG5ld1ZhbCk7XHJcbiAgICAgICAgaWYgKGhhc0NoYW5nZWQobmV3VmFsLCB0aGlzLl9yYXdWYWx1ZSkpIHtcclxuICAgICAgICAgICAgdGhpcy5fcmF3VmFsdWUgPSBuZXdWYWw7XHJcbiAgICAgICAgICAgIHRoaXMuX3ZhbHVlID0gdGhpcy5fc2hhbGxvdyA/IG5ld1ZhbCA6IHRvUmVhY3RpdmUobmV3VmFsKTtcclxuICAgICAgICAgICAgdHJpZ2dlclJlZlZhbHVlKHRoaXMsIG5ld1ZhbCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbmZ1bmN0aW9uIHRyaWdnZXJSZWYocmVmKSB7XHJcbiAgICB0cmlnZ2VyUmVmVmFsdWUocmVmLCAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgPyByZWYudmFsdWUgOiB2b2lkIDApO1xyXG59XHJcbmZ1bmN0aW9uIHVucmVmKHJlZikge1xyXG4gICAgcmV0dXJuIGlzUmVmKHJlZikgPyByZWYudmFsdWUgOiByZWY7XHJcbn1cclxuY29uc3Qgc2hhbGxvd1Vud3JhcEhhbmRsZXJzID0ge1xyXG4gICAgZ2V0OiAodGFyZ2V0LCBrZXksIHJlY2VpdmVyKSA9PiB1bnJlZihSZWZsZWN0LmdldCh0YXJnZXQsIGtleSwgcmVjZWl2ZXIpKSxcclxuICAgIHNldDogKHRhcmdldCwga2V5LCB2YWx1ZSwgcmVjZWl2ZXIpID0+IHtcclxuICAgICAgICBjb25zdCBvbGRWYWx1ZSA9IHRhcmdldFtrZXldO1xyXG4gICAgICAgIGlmIChpc1JlZihvbGRWYWx1ZSkgJiYgIWlzUmVmKHZhbHVlKSkge1xyXG4gICAgICAgICAgICBvbGRWYWx1ZS52YWx1ZSA9IHZhbHVlO1xyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiBSZWZsZWN0LnNldCh0YXJnZXQsIGtleSwgdmFsdWUsIHJlY2VpdmVyKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn07XHJcbmZ1bmN0aW9uIHByb3h5UmVmcyhvYmplY3RXaXRoUmVmcykge1xyXG4gICAgcmV0dXJuIGlzUmVhY3RpdmUob2JqZWN0V2l0aFJlZnMpXHJcbiAgICAgICAgPyBvYmplY3RXaXRoUmVmc1xyXG4gICAgICAgIDogbmV3IFByb3h5KG9iamVjdFdpdGhSZWZzLCBzaGFsbG93VW53cmFwSGFuZGxlcnMpO1xyXG59XHJcbmNsYXNzIEN1c3RvbVJlZkltcGwge1xyXG4gICAgY29uc3RydWN0b3IoZmFjdG9yeSkge1xyXG4gICAgICAgIHRoaXMuZGVwID0gdW5kZWZpbmVkO1xyXG4gICAgICAgIHRoaXMuX192X2lzUmVmID0gdHJ1ZTtcclxuICAgICAgICBjb25zdCB7IGdldCwgc2V0IH0gPSBmYWN0b3J5KCgpID0+IHRyYWNrUmVmVmFsdWUodGhpcyksICgpID0+IHRyaWdnZXJSZWZWYWx1ZSh0aGlzKSk7XHJcbiAgICAgICAgdGhpcy5fZ2V0ID0gZ2V0O1xyXG4gICAgICAgIHRoaXMuX3NldCA9IHNldDtcclxuICAgIH1cclxuICAgIGdldCB2YWx1ZSgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fZ2V0KCk7XHJcbiAgICB9XHJcbiAgICBzZXQgdmFsdWUobmV3VmFsKSB7XHJcbiAgICAgICAgdGhpcy5fc2V0KG5ld1ZhbCk7XHJcbiAgICB9XHJcbn1cclxuZnVuY3Rpb24gY3VzdG9tUmVmKGZhY3RvcnkpIHtcclxuICAgIHJldHVybiBuZXcgQ3VzdG9tUmVmSW1wbChmYWN0b3J5KTtcclxufVxyXG5mdW5jdGlvbiB0b1JlZnMob2JqZWN0KSB7XHJcbiAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmICFpc1Byb3h5KG9iamVjdCkpIHtcclxuICAgICAgICBjb25zb2xlLndhcm4oYHRvUmVmcygpIGV4cGVjdHMgYSByZWFjdGl2ZSBvYmplY3QgYnV0IHJlY2VpdmVkIGEgcGxhaW4gb25lLmApO1xyXG4gICAgfVxyXG4gICAgY29uc3QgcmV0ID0gaXNBcnJheShvYmplY3QpID8gbmV3IEFycmF5KG9iamVjdC5sZW5ndGgpIDoge307XHJcbiAgICBmb3IgKGNvbnN0IGtleSBpbiBvYmplY3QpIHtcclxuICAgICAgICByZXRba2V5XSA9IHRvUmVmKG9iamVjdCwga2V5KTtcclxuICAgIH1cclxuICAgIHJldHVybiByZXQ7XHJcbn1cclxuY2xhc3MgT2JqZWN0UmVmSW1wbCB7XHJcbiAgICBjb25zdHJ1Y3Rvcihfb2JqZWN0LCBfa2V5LCBfZGVmYXVsdFZhbHVlKSB7XHJcbiAgICAgICAgdGhpcy5fb2JqZWN0ID0gX29iamVjdDtcclxuICAgICAgICB0aGlzLl9rZXkgPSBfa2V5O1xyXG4gICAgICAgIHRoaXMuX2RlZmF1bHRWYWx1ZSA9IF9kZWZhdWx0VmFsdWU7XHJcbiAgICAgICAgdGhpcy5fX3ZfaXNSZWYgPSB0cnVlO1xyXG4gICAgfVxyXG4gICAgZ2V0IHZhbHVlKCkge1xyXG4gICAgICAgIGNvbnN0IHZhbCA9IHRoaXMuX29iamVjdFt0aGlzLl9rZXldO1xyXG4gICAgICAgIHJldHVybiB2YWwgPT09IHVuZGVmaW5lZCA/IHRoaXMuX2RlZmF1bHRWYWx1ZSA6IHZhbDtcclxuICAgIH1cclxuICAgIHNldCB2YWx1ZShuZXdWYWwpIHtcclxuICAgICAgICB0aGlzLl9vYmplY3RbdGhpcy5fa2V5XSA9IG5ld1ZhbDtcclxuICAgIH1cclxufVxyXG5mdW5jdGlvbiB0b1JlZihvYmplY3QsIGtleSwgZGVmYXVsdFZhbHVlKSB7XHJcbiAgICBjb25zdCB2YWwgPSBvYmplY3Rba2V5XTtcclxuICAgIHJldHVybiBpc1JlZih2YWwpXHJcbiAgICAgICAgPyB2YWxcclxuICAgICAgICA6IG5ldyBPYmplY3RSZWZJbXBsKG9iamVjdCwga2V5LCBkZWZhdWx0VmFsdWUpO1xyXG59XG5cbmNsYXNzIENvbXB1dGVkUmVmSW1wbCB7XHJcbiAgICBjb25zdHJ1Y3RvcihnZXR0ZXIsIF9zZXR0ZXIsIGlzUmVhZG9ubHkpIHtcclxuICAgICAgICB0aGlzLl9zZXR0ZXIgPSBfc2V0dGVyO1xyXG4gICAgICAgIHRoaXMuZGVwID0gdW5kZWZpbmVkO1xyXG4gICAgICAgIHRoaXMuX2RpcnR5ID0gdHJ1ZTtcclxuICAgICAgICB0aGlzLl9fdl9pc1JlZiA9IHRydWU7XHJcbiAgICAgICAgdGhpcy5lZmZlY3QgPSBuZXcgUmVhY3RpdmVFZmZlY3QoZ2V0dGVyLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGlmICghdGhpcy5fZGlydHkpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX2RpcnR5ID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIHRyaWdnZXJSZWZWYWx1ZSh0aGlzKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXNbXCJfX3ZfaXNSZWFkb25seVwiIC8qIElTX1JFQURPTkxZICovXSA9IGlzUmVhZG9ubHk7XHJcbiAgICB9XHJcbiAgICBnZXQgdmFsdWUoKSB7XHJcbiAgICAgICAgLy8gdGhlIGNvbXB1dGVkIHJlZiBtYXkgZ2V0IHdyYXBwZWQgYnkgb3RoZXIgcHJveGllcyBlLmcuIHJlYWRvbmx5KCkgIzMzNzZcclxuICAgICAgICBjb25zdCBzZWxmID0gdG9SYXcodGhpcyk7XHJcbiAgICAgICAgdHJhY2tSZWZWYWx1ZShzZWxmKTtcclxuICAgICAgICBpZiAoc2VsZi5fZGlydHkpIHtcclxuICAgICAgICAgICAgc2VsZi5fZGlydHkgPSBmYWxzZTtcclxuICAgICAgICAgICAgc2VsZi5fdmFsdWUgPSBzZWxmLmVmZmVjdC5ydW4oKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHNlbGYuX3ZhbHVlO1xyXG4gICAgfVxyXG4gICAgc2V0IHZhbHVlKG5ld1ZhbHVlKSB7XHJcbiAgICAgICAgdGhpcy5fc2V0dGVyKG5ld1ZhbHVlKTtcclxuICAgIH1cclxufVxyXG5mdW5jdGlvbiBjb21wdXRlZChnZXR0ZXJPck9wdGlvbnMsIGRlYnVnT3B0aW9ucykge1xyXG4gICAgbGV0IGdldHRlcjtcclxuICAgIGxldCBzZXR0ZXI7XHJcbiAgICBjb25zdCBvbmx5R2V0dGVyID0gaXNGdW5jdGlvbihnZXR0ZXJPck9wdGlvbnMpO1xyXG4gICAgaWYgKG9ubHlHZXR0ZXIpIHtcclxuICAgICAgICBnZXR0ZXIgPSBnZXR0ZXJPck9wdGlvbnM7XHJcbiAgICAgICAgc2V0dGVyID0gKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpXHJcbiAgICAgICAgICAgID8gKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS53YXJuKCdXcml0ZSBvcGVyYXRpb24gZmFpbGVkOiBjb21wdXRlZCB2YWx1ZSBpcyByZWFkb25seScpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIDogTk9PUDtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICAgIGdldHRlciA9IGdldHRlck9yT3B0aW9ucy5nZXQ7XHJcbiAgICAgICAgc2V0dGVyID0gZ2V0dGVyT3JPcHRpb25zLnNldDtcclxuICAgIH1cclxuICAgIGNvbnN0IGNSZWYgPSBuZXcgQ29tcHV0ZWRSZWZJbXBsKGdldHRlciwgc2V0dGVyLCBvbmx5R2V0dGVyIHx8ICFzZXR0ZXIpO1xyXG4gICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSAmJiBkZWJ1Z09wdGlvbnMpIHtcclxuICAgICAgICBjUmVmLmVmZmVjdC5vblRyYWNrID0gZGVidWdPcHRpb25zLm9uVHJhY2s7XHJcbiAgICAgICAgY1JlZi5lZmZlY3Qub25UcmlnZ2VyID0gZGVidWdPcHRpb25zLm9uVHJpZ2dlcjtcclxuICAgIH1cclxuICAgIHJldHVybiBjUmVmO1xyXG59XG5cbnZhciBfYTtcclxuY29uc3QgdGljayA9IFByb21pc2UucmVzb2x2ZSgpO1xyXG5jb25zdCBxdWV1ZSA9IFtdO1xyXG5sZXQgcXVldWVkID0gZmFsc2U7XHJcbmNvbnN0IHNjaGVkdWxlciA9IChmbikgPT4ge1xyXG4gICAgcXVldWUucHVzaChmbik7XHJcbiAgICBpZiAoIXF1ZXVlZCkge1xyXG4gICAgICAgIHF1ZXVlZCA9IHRydWU7XHJcbiAgICAgICAgdGljay50aGVuKGZsdXNoKTtcclxuICAgIH1cclxufTtcclxuY29uc3QgZmx1c2ggPSAoKSA9PiB7XHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHF1ZXVlLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgcXVldWVbaV0oKTtcclxuICAgIH1cclxuICAgIHF1ZXVlLmxlbmd0aCA9IDA7XHJcbiAgICBxdWV1ZWQgPSBmYWxzZTtcclxufTtcclxuY2xhc3MgRGVmZXJyZWRDb21wdXRlZFJlZkltcGwge1xyXG4gICAgY29uc3RydWN0b3IoZ2V0dGVyKSB7XHJcbiAgICAgICAgdGhpcy5kZXAgPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgdGhpcy5fZGlydHkgPSB0cnVlO1xyXG4gICAgICAgIHRoaXMuX192X2lzUmVmID0gdHJ1ZTtcclxuICAgICAgICB0aGlzW19hXSA9IHRydWU7XHJcbiAgICAgICAgbGV0IGNvbXBhcmVUYXJnZXQ7XHJcbiAgICAgICAgbGV0IGhhc0NvbXBhcmVUYXJnZXQgPSBmYWxzZTtcclxuICAgICAgICBsZXQgc2NoZWR1bGVkID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5lZmZlY3QgPSBuZXcgUmVhY3RpdmVFZmZlY3QoZ2V0dGVyLCAoY29tcHV0ZWRUcmlnZ2VyKSA9PiB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmRlcCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKGNvbXB1dGVkVHJpZ2dlcikge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbXBhcmVUYXJnZXQgPSB0aGlzLl92YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICBoYXNDb21wYXJlVGFyZ2V0ID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKCFzY2hlZHVsZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCB2YWx1ZVRvQ29tcGFyZSA9IGhhc0NvbXBhcmVUYXJnZXQgPyBjb21wYXJlVGFyZ2V0IDogdGhpcy5fdmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgc2NoZWR1bGVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICBoYXNDb21wYXJlVGFyZ2V0ID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgc2NoZWR1bGVyKCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuZWZmZWN0LmFjdGl2ZSAmJiB0aGlzLl9nZXQoKSAhPT0gdmFsdWVUb0NvbXBhcmUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyaWdnZXJSZWZWYWx1ZSh0aGlzKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzY2hlZHVsZWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIC8vIGNoYWluZWQgdXBzdHJlYW0gY29tcHV0ZWRzIGFyZSBub3RpZmllZCBzeW5jaHJvbm91c2x5IHRvIGVuc3VyZVxyXG4gICAgICAgICAgICAgICAgLy8gdmFsdWUgaW52YWxpZGF0aW9uIGluIGNhc2Ugb2Ygc3luYyBhY2Nlc3M7IG5vcm1hbCBlZmZlY3RzIGFyZVxyXG4gICAgICAgICAgICAgICAgLy8gZGVmZXJyZWQgdG8gYmUgdHJpZ2dlcmVkIGluIHNjaGVkdWxlci5cclxuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgZSBvZiB0aGlzLmRlcCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChlLmNvbXB1dGVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGUuc2NoZWR1bGVyKHRydWUgLyogY29tcHV0ZWRUcmlnZ2VyICovKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5fZGlydHkgPSB0cnVlO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMuZWZmZWN0LmNvbXB1dGVkID0gdHJ1ZTtcclxuICAgIH1cclxuICAgIF9nZXQoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuX2RpcnR5KSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2RpcnR5ID0gZmFsc2U7XHJcbiAgICAgICAgICAgIHJldHVybiAodGhpcy5fdmFsdWUgPSB0aGlzLmVmZmVjdC5ydW4oKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzLl92YWx1ZTtcclxuICAgIH1cclxuICAgIGdldCB2YWx1ZSgpIHtcclxuICAgICAgICB0cmFja1JlZlZhbHVlKHRoaXMpO1xyXG4gICAgICAgIC8vIHRoZSBjb21wdXRlZCByZWYgbWF5IGdldCB3cmFwcGVkIGJ5IG90aGVyIHByb3hpZXMgZS5nLiByZWFkb25seSgpICMzMzc2XHJcbiAgICAgICAgcmV0dXJuIHRvUmF3KHRoaXMpLl9nZXQoKTtcclxuICAgIH1cclxufVxyXG5fYSA9IFwiX192X2lzUmVhZG9ubHlcIiAvKiBJU19SRUFET05MWSAqLztcclxuZnVuY3Rpb24gZGVmZXJyZWRDb21wdXRlZChnZXR0ZXIpIHtcclxuICAgIHJldHVybiBuZXcgRGVmZXJyZWRDb21wdXRlZFJlZkltcGwoZ2V0dGVyKTtcclxufVxuXG5leHBvcnQgeyBFZmZlY3RTY29wZSwgSVRFUkFURV9LRVksIFJlYWN0aXZlRWZmZWN0LCBjb21wdXRlZCwgY3VzdG9tUmVmLCBkZWZlcnJlZENvbXB1dGVkLCBlZmZlY3QsIGVmZmVjdFNjb3BlLCBlbmFibGVUcmFja2luZywgZ2V0Q3VycmVudFNjb3BlLCBpc1Byb3h5LCBpc1JlYWN0aXZlLCBpc1JlYWRvbmx5LCBpc1JlZiwgbWFya1Jhdywgb25TY29wZURpc3Bvc2UsIHBhdXNlVHJhY2tpbmcsIHByb3h5UmVmcywgcmVhY3RpdmUsIHJlYWRvbmx5LCByZWYsIHJlc2V0VHJhY2tpbmcsIHNoYWxsb3dSZWFjdGl2ZSwgc2hhbGxvd1JlYWRvbmx5LCBzaGFsbG93UmVmLCBzdG9wLCB0b1JhdywgdG9SZWYsIHRvUmVmcywgdHJhY2ssIHRyaWdnZXIsIHRyaWdnZXJSZWYsIHVucmVmIH07XG4iLCJpbXBvcnQgeyB0b1JhdywgcmVmLCBwYXVzZVRyYWNraW5nLCByZXNldFRyYWNraW5nLCByZWFjdGl2ZSwgY29tcHV0ZWQsIGlzUmVmLCBzaGFsbG93UmVhY3RpdmUsIHRyaWdnZXIsIFJlYWN0aXZlRWZmZWN0LCBpc1Byb3h5LCBzaGFsbG93UmVhZG9ubHksIHRyYWNrLCBFZmZlY3RTY29wZSwgbWFya1JhdywgcHJveHlSZWZzLCBpc1JlYWN0aXZlLCBpc1JlYWRvbmx5IH0gZnJvbSAnQHZ1ZS9yZWFjdGl2aXR5JztcbmV4cG9ydCB7IEVmZmVjdFNjb3BlLCBSZWFjdGl2ZUVmZmVjdCwgY29tcHV0ZWQsIGN1c3RvbVJlZiwgZWZmZWN0LCBlZmZlY3RTY29wZSwgZ2V0Q3VycmVudFNjb3BlLCBpc1Byb3h5LCBpc1JlYWN0aXZlLCBpc1JlYWRvbmx5LCBpc1JlZiwgbWFya1Jhdywgb25TY29wZURpc3Bvc2UsIHByb3h5UmVmcywgcmVhY3RpdmUsIHJlYWRvbmx5LCByZWYsIHNoYWxsb3dSZWFjdGl2ZSwgc2hhbGxvd1JlYWRvbmx5LCBzaGFsbG93UmVmLCBzdG9wLCB0b1JhdywgdG9SZWYsIHRvUmVmcywgdHJpZ2dlclJlZiwgdW5yZWYgfSBmcm9tICdAdnVlL3JlYWN0aXZpdHknO1xuaW1wb3J0IHsgZ2V0R2xvYmFsVGhpcywgZXh0ZW5kLCBFTVBUWV9PQkosIHRvSGFuZGxlcktleSwgaXNGdW5jdGlvbiwgdG9OdW1iZXIsIGh5cGhlbmF0ZSwgY2FtZWxpemUsIGlzQXJyYXksIGlzT24sIGhhc093biwgaXNNb2RlbExpc3RlbmVyLCBpc09iamVjdCwgcmVtb3ZlLCBpc1N0cmluZywgaW52b2tlQXJyYXlGbnMsIGlzUHJvbWlzZSwgTk9PUCwgZGVmLCBpc1Jlc2VydmVkUHJvcCwgRU1QVFlfQVJSLCBjYXBpdGFsaXplLCB0b1Jhd1R5cGUsIG1ha2VNYXAsIE5PLCBub3JtYWxpemVDbGFzcywgbm9ybWFsaXplU3R5bGUsIGlzR2xvYmFsbHlXaGl0ZWxpc3RlZCwgaGFzQ2hhbmdlZCwgaXNTZXQsIGlzTWFwLCBpc1BsYWluT2JqZWN0IH0gZnJvbSAnQHZ1ZS9zaGFyZWQnO1xuZXhwb3J0IHsgY2FtZWxpemUsIGNhcGl0YWxpemUsIG5vcm1hbGl6ZUNsYXNzLCBub3JtYWxpemVQcm9wcywgbm9ybWFsaXplU3R5bGUsIHRvRGlzcGxheVN0cmluZywgdG9IYW5kbGVyS2V5IH0gZnJvbSAnQHZ1ZS9zaGFyZWQnO1xuXG4vKiBlc2xpbnQtZGlzYWJsZSBuby1yZXN0cmljdGVkLWdsb2JhbHMgKi9cclxubGV0IGlzSG1yVXBkYXRpbmcgPSBmYWxzZTtcclxuY29uc3QgaG1yRGlydHlDb21wb25lbnRzID0gbmV3IFNldCgpO1xyXG4vLyBFeHBvc2UgdGhlIEhNUiBydW50aW1lIG9uIHRoZSBnbG9iYWwgb2JqZWN0XHJcbi8vIFRoaXMgbWFrZXMgaXQgZW50aXJlbHkgdHJlZS1zaGFrYWJsZSB3aXRob3V0IHBvbGx1dGluZyB0aGUgZXhwb3J0cyBhbmQgbWFrZXNcclxuLy8gaXQgZWFzaWVyIHRvIGJlIHVzZWQgaW4gdG9vbGluZ3MgbGlrZSB2dWUtbG9hZGVyXHJcbi8vIE5vdGU6IGZvciBhIGNvbXBvbmVudCB0byBiZSBlbGlnaWJsZSBmb3IgSE1SIGl0IGFsc28gbmVlZHMgdGhlIF9faG1ySWQgb3B0aW9uXHJcbi8vIHRvIGJlIHNldCBzbyB0aGF0IGl0cyBpbnN0YW5jZXMgY2FuIGJlIHJlZ2lzdGVyZWQgLyByZW1vdmVkLlxyXG5pZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpKSB7XHJcbiAgICBnZXRHbG9iYWxUaGlzKCkuX19WVUVfSE1SX1JVTlRJTUVfXyA9IHtcclxuICAgICAgICBjcmVhdGVSZWNvcmQ6IHRyeVdyYXAoY3JlYXRlUmVjb3JkKSxcclxuICAgICAgICByZXJlbmRlcjogdHJ5V3JhcChyZXJlbmRlciksXHJcbiAgICAgICAgcmVsb2FkOiB0cnlXcmFwKHJlbG9hZClcclxuICAgIH07XHJcbn1cclxuY29uc3QgbWFwID0gbmV3IE1hcCgpO1xyXG5mdW5jdGlvbiByZWdpc3RlckhNUihpbnN0YW5jZSkge1xyXG4gICAgY29uc3QgaWQgPSBpbnN0YW5jZS50eXBlLl9faG1ySWQ7XHJcbiAgICBsZXQgcmVjb3JkID0gbWFwLmdldChpZCk7XHJcbiAgICBpZiAoIXJlY29yZCkge1xyXG4gICAgICAgIGNyZWF0ZVJlY29yZChpZCwgaW5zdGFuY2UudHlwZSk7XHJcbiAgICAgICAgcmVjb3JkID0gbWFwLmdldChpZCk7XHJcbiAgICB9XHJcbiAgICByZWNvcmQuaW5zdGFuY2VzLmFkZChpbnN0YW5jZSk7XHJcbn1cclxuZnVuY3Rpb24gdW5yZWdpc3RlckhNUihpbnN0YW5jZSkge1xyXG4gICAgbWFwLmdldChpbnN0YW5jZS50eXBlLl9faG1ySWQpLmluc3RhbmNlcy5kZWxldGUoaW5zdGFuY2UpO1xyXG59XHJcbmZ1bmN0aW9uIGNyZWF0ZVJlY29yZChpZCwgaW5pdGlhbERlZikge1xyXG4gICAgaWYgKG1hcC5oYXMoaWQpKSB7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG4gICAgbWFwLnNldChpZCwge1xyXG4gICAgICAgIGluaXRpYWxEZWY6IG5vcm1hbGl6ZUNsYXNzQ29tcG9uZW50KGluaXRpYWxEZWYpLFxyXG4gICAgICAgIGluc3RhbmNlczogbmV3IFNldCgpXHJcbiAgICB9KTtcclxuICAgIHJldHVybiB0cnVlO1xyXG59XHJcbmZ1bmN0aW9uIG5vcm1hbGl6ZUNsYXNzQ29tcG9uZW50KGNvbXBvbmVudCkge1xyXG4gICAgcmV0dXJuIGlzQ2xhc3NDb21wb25lbnQoY29tcG9uZW50KSA/IGNvbXBvbmVudC5fX3ZjY09wdHMgOiBjb21wb25lbnQ7XHJcbn1cclxuZnVuY3Rpb24gcmVyZW5kZXIoaWQsIG5ld1JlbmRlcikge1xyXG4gICAgY29uc3QgcmVjb3JkID0gbWFwLmdldChpZCk7XHJcbiAgICBpZiAoIXJlY29yZCkge1xyXG4gICAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIC8vIHVwZGF0ZSBpbml0aWFsIHJlY29yZCAoZm9yIG5vdC15ZXQtcmVuZGVyZWQgY29tcG9uZW50KVxyXG4gICAgcmVjb3JkLmluaXRpYWxEZWYucmVuZGVyID0gbmV3UmVuZGVyO1xyXG4gICAgWy4uLnJlY29yZC5pbnN0YW5jZXNdLmZvckVhY2goaW5zdGFuY2UgPT4ge1xyXG4gICAgICAgIGlmIChuZXdSZW5kZXIpIHtcclxuICAgICAgICAgICAgaW5zdGFuY2UucmVuZGVyID0gbmV3UmVuZGVyO1xyXG4gICAgICAgICAgICBub3JtYWxpemVDbGFzc0NvbXBvbmVudChpbnN0YW5jZS50eXBlKS5yZW5kZXIgPSBuZXdSZW5kZXI7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGluc3RhbmNlLnJlbmRlckNhY2hlID0gW107XHJcbiAgICAgICAgLy8gdGhpcyBmbGFnIGZvcmNlcyBjaGlsZCBjb21wb25lbnRzIHdpdGggc2xvdCBjb250ZW50IHRvIHVwZGF0ZVxyXG4gICAgICAgIGlzSG1yVXBkYXRpbmcgPSB0cnVlO1xyXG4gICAgICAgIGluc3RhbmNlLnVwZGF0ZSgpO1xyXG4gICAgICAgIGlzSG1yVXBkYXRpbmcgPSBmYWxzZTtcclxuICAgIH0pO1xyXG59XHJcbmZ1bmN0aW9uIHJlbG9hZChpZCwgbmV3Q29tcCkge1xyXG4gICAgY29uc3QgcmVjb3JkID0gbWFwLmdldChpZCk7XHJcbiAgICBpZiAoIXJlY29yZClcclxuICAgICAgICByZXR1cm47XHJcbiAgICBuZXdDb21wID0gbm9ybWFsaXplQ2xhc3NDb21wb25lbnQobmV3Q29tcCk7XHJcbiAgICAvLyB1cGRhdGUgaW5pdGlhbCBkZWYgKGZvciBub3QteWV0LXJlbmRlcmVkIGNvbXBvbmVudHMpXHJcbiAgICB1cGRhdGVDb21wb25lbnREZWYocmVjb3JkLmluaXRpYWxEZWYsIG5ld0NvbXApO1xyXG4gICAgLy8gY3JlYXRlIGEgc25hcHNob3Qgd2hpY2ggYXZvaWRzIHRoZSBzZXQgYmVpbmcgbXV0YXRlZCBkdXJpbmcgdXBkYXRlc1xyXG4gICAgY29uc3QgaW5zdGFuY2VzID0gWy4uLnJlY29yZC5pbnN0YW5jZXNdO1xyXG4gICAgZm9yIChjb25zdCBpbnN0YW5jZSBvZiBpbnN0YW5jZXMpIHtcclxuICAgICAgICBjb25zdCBvbGRDb21wID0gbm9ybWFsaXplQ2xhc3NDb21wb25lbnQoaW5zdGFuY2UudHlwZSk7XHJcbiAgICAgICAgaWYgKCFobXJEaXJ0eUNvbXBvbmVudHMuaGFzKG9sZENvbXApKSB7XHJcbiAgICAgICAgICAgIC8vIDEuIFVwZGF0ZSBleGlzdGluZyBjb21wIGRlZmluaXRpb24gdG8gbWF0Y2ggbmV3IG9uZVxyXG4gICAgICAgICAgICBpZiAob2xkQ29tcCAhPT0gcmVjb3JkLmluaXRpYWxEZWYpIHtcclxuICAgICAgICAgICAgICAgIHVwZGF0ZUNvbXBvbmVudERlZihvbGRDb21wLCBuZXdDb21wKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyAyLiBtYXJrIGRlZmluaXRpb24gZGlydHkuIFRoaXMgZm9yY2VzIHRoZSByZW5kZXJlciB0byByZXBsYWNlIHRoZVxyXG4gICAgICAgICAgICAvLyBjb21wb25lbnQgb24gcGF0Y2guXHJcbiAgICAgICAgICAgIGhtckRpcnR5Q29tcG9uZW50cy5hZGQob2xkQ29tcCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIDMuIGludmFsaWRhdGUgb3B0aW9ucyByZXNvbHV0aW9uIGNhY2hlXHJcbiAgICAgICAgaW5zdGFuY2UuYXBwQ29udGV4dC5vcHRpb25zQ2FjaGUuZGVsZXRlKGluc3RhbmNlLnR5cGUpO1xyXG4gICAgICAgIC8vIDQuIGFjdHVhbGx5IHVwZGF0ZVxyXG4gICAgICAgIGlmIChpbnN0YW5jZS5jZVJlbG9hZCkge1xyXG4gICAgICAgICAgICAvLyBjdXN0b20gZWxlbWVudFxyXG4gICAgICAgICAgICBobXJEaXJ0eUNvbXBvbmVudHMuYWRkKG9sZENvbXApO1xyXG4gICAgICAgICAgICBpbnN0YW5jZS5jZVJlbG9hZChuZXdDb21wLnN0eWxlcyk7XHJcbiAgICAgICAgICAgIGhtckRpcnR5Q29tcG9uZW50cy5kZWxldGUob2xkQ29tcCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKGluc3RhbmNlLnBhcmVudCkge1xyXG4gICAgICAgICAgICAvLyA0LiBGb3JjZSB0aGUgcGFyZW50IGluc3RhbmNlIHRvIHJlLXJlbmRlci4gVGhpcyB3aWxsIGNhdXNlIGFsbCB1cGRhdGVkXHJcbiAgICAgICAgICAgIC8vIGNvbXBvbmVudHMgdG8gYmUgdW5tb3VudGVkIGFuZCByZS1tb3VudGVkLiBRdWV1ZSB0aGUgdXBkYXRlIHNvIHRoYXQgd2VcclxuICAgICAgICAgICAgLy8gZG9uJ3QgZW5kIHVwIGZvcmNpbmcgdGhlIHNhbWUgcGFyZW50IHRvIHJlLXJlbmRlciBtdWx0aXBsZSB0aW1lcy5cclxuICAgICAgICAgICAgcXVldWVKb2IoaW5zdGFuY2UucGFyZW50LnVwZGF0ZSk7XHJcbiAgICAgICAgICAgIC8vIGluc3RhbmNlIGlzIHRoZSBpbm5lciBjb21wb25lbnQgb2YgYW4gYXN5bmMgY3VzdG9tIGVsZW1lbnRcclxuICAgICAgICAgICAgLy8gaW52b2tlIHRvIHJlc2V0IHN0eWxlc1xyXG4gICAgICAgICAgICBpZiAoaW5zdGFuY2UucGFyZW50LnR5cGUuX19hc3luY0xvYWRlciAmJlxyXG4gICAgICAgICAgICAgICAgaW5zdGFuY2UucGFyZW50LmNlUmVsb2FkKSB7XHJcbiAgICAgICAgICAgICAgICBpbnN0YW5jZS5wYXJlbnQuY2VSZWxvYWQobmV3Q29tcC5zdHlsZXMpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKGluc3RhbmNlLmFwcENvbnRleHQucmVsb2FkKSB7XHJcbiAgICAgICAgICAgIC8vIHJvb3QgaW5zdGFuY2UgbW91bnRlZCB2aWEgY3JlYXRlQXBwKCkgaGFzIGEgcmVsb2FkIG1ldGhvZFxyXG4gICAgICAgICAgICBpbnN0YW5jZS5hcHBDb250ZXh0LnJlbG9hZCgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJykge1xyXG4gICAgICAgICAgICAvLyByb290IGluc3RhbmNlIGluc2lkZSB0cmVlIGNyZWF0ZWQgdmlhIHJhdyByZW5kZXIoKS4gRm9yY2UgcmVsb2FkLlxyXG4gICAgICAgICAgICB3aW5kb3cubG9jYXRpb24ucmVsb2FkKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBjb25zb2xlLndhcm4oJ1tITVJdIFJvb3Qgb3IgbWFudWFsbHkgbW91bnRlZCBpbnN0YW5jZSBtb2RpZmllZC4gRnVsbCByZWxvYWQgcmVxdWlyZWQuJyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgLy8gNS4gbWFrZSBzdXJlIHRvIGNsZWFudXAgZGlydHkgaG1yIGNvbXBvbmVudHMgYWZ0ZXIgdXBkYXRlXHJcbiAgICBxdWV1ZVBvc3RGbHVzaENiKCgpID0+IHtcclxuICAgICAgICBmb3IgKGNvbnN0IGluc3RhbmNlIG9mIGluc3RhbmNlcykge1xyXG4gICAgICAgICAgICBobXJEaXJ0eUNvbXBvbmVudHMuZGVsZXRlKG5vcm1hbGl6ZUNsYXNzQ29tcG9uZW50KGluc3RhbmNlLnR5cGUpKTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxufVxyXG5mdW5jdGlvbiB1cGRhdGVDb21wb25lbnREZWYob2xkQ29tcCwgbmV3Q29tcCkge1xyXG4gICAgZXh0ZW5kKG9sZENvbXAsIG5ld0NvbXApO1xyXG4gICAgZm9yIChjb25zdCBrZXkgaW4gb2xkQ29tcCkge1xyXG4gICAgICAgIGlmIChrZXkgIT09ICdfX2ZpbGUnICYmICEoa2V5IGluIG5ld0NvbXApKSB7XHJcbiAgICAgICAgICAgIGRlbGV0ZSBvbGRDb21wW2tleV07XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbmZ1bmN0aW9uIHRyeVdyYXAoZm4pIHtcclxuICAgIHJldHVybiAoaWQsIGFyZykgPT4ge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmbihpZCwgYXJnKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcihlKTtcclxuICAgICAgICAgICAgY29uc29sZS53YXJuKGBbSE1SXSBTb21ldGhpbmcgd2VudCB3cm9uZyBkdXJpbmcgVnVlIGNvbXBvbmVudCBob3QtcmVsb2FkLiBgICtcclxuICAgICAgICAgICAgICAgIGBGdWxsIHJlbG9hZCByZXF1aXJlZC5gKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG59XG5cbmxldCBkZXZ0b29scztcclxubGV0IGJ1ZmZlciA9IFtdO1xyXG5sZXQgZGV2dG9vbHNOb3RJbnN0YWxsZWQgPSBmYWxzZTtcclxuZnVuY3Rpb24gZW1pdChldmVudCwgLi4uYXJncykge1xyXG4gICAgaWYgKGRldnRvb2xzKSB7XHJcbiAgICAgICAgZGV2dG9vbHMuZW1pdChldmVudCwgLi4uYXJncyk7XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmICghZGV2dG9vbHNOb3RJbnN0YWxsZWQpIHtcclxuICAgICAgICBidWZmZXIucHVzaCh7IGV2ZW50LCBhcmdzIH0pO1xyXG4gICAgfVxyXG59XHJcbmZ1bmN0aW9uIHNldERldnRvb2xzSG9vayhob29rLCB0YXJnZXQpIHtcclxuICAgIHZhciBfYSwgX2I7XHJcbiAgICBkZXZ0b29scyA9IGhvb2s7XHJcbiAgICBpZiAoZGV2dG9vbHMpIHtcclxuICAgICAgICBkZXZ0b29scy5lbmFibGVkID0gdHJ1ZTtcclxuICAgICAgICBidWZmZXIuZm9yRWFjaCgoeyBldmVudCwgYXJncyB9KSA9PiBkZXZ0b29scy5lbWl0KGV2ZW50LCAuLi5hcmdzKSk7XHJcbiAgICAgICAgYnVmZmVyID0gW107XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmIChcclxuICAgIC8vIGhhbmRsZSBsYXRlIGRldnRvb2xzIGluamVjdGlvbiAtIG9ubHkgZG8gdGhpcyBpZiB3ZSBhcmUgaW4gYW4gYWN0dWFsXHJcbiAgICAvLyBicm93c2VyIGVudmlyb25tZW50IHRvIGF2b2lkIHRoZSB0aW1lciBoYW5kbGUgc3RhbGxpbmcgdGVzdCBydW5uZXIgZXhpdFxyXG4gICAgLy8gKCM0ODE1KVxyXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXJlc3RyaWN0ZWQtZ2xvYmFsc1xyXG4gICAgdHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgJiZcclxuICAgICAgICAvLyBzb21lIGVudnMgbW9jayB3aW5kb3cgYnV0IG5vdCBmdWxseVxyXG4gICAgICAgIHdpbmRvdy5IVE1MRWxlbWVudCAmJlxyXG4gICAgICAgIC8vIGFsc28gZXhjbHVkZSBqc2RvbVxyXG4gICAgICAgICEoKF9iID0gKF9hID0gd2luZG93Lm5hdmlnYXRvcikgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLnVzZXJBZ2VudCkgPT09IG51bGwgfHwgX2IgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9iLmluY2x1ZGVzKCdqc2RvbScpKSkge1xyXG4gICAgICAgIGNvbnN0IHJlcGxheSA9ICh0YXJnZXQuX19WVUVfREVWVE9PTFNfSE9PS19SRVBMQVlfXyA9XHJcbiAgICAgICAgICAgIHRhcmdldC5fX1ZVRV9ERVZUT09MU19IT09LX1JFUExBWV9fIHx8IFtdKTtcclxuICAgICAgICByZXBsYXkucHVzaCgobmV3SG9vaykgPT4ge1xyXG4gICAgICAgICAgICBzZXREZXZ0b29sc0hvb2sobmV3SG9vaywgdGFyZ2V0KTtcclxuICAgICAgICB9KTtcclxuICAgICAgICAvLyBjbGVhciBidWZmZXIgYWZ0ZXIgM3MgLSB0aGUgdXNlciBwcm9iYWJseSBkb2Vzbid0IGhhdmUgZGV2dG9vbHMgaW5zdGFsbGVkXHJcbiAgICAgICAgLy8gYXQgYWxsLCBhbmQga2VlcGluZyB0aGUgYnVmZmVyIHdpbGwgY2F1c2UgbWVtb3J5IGxlYWtzICgjNDczOClcclxuICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgaWYgKCFkZXZ0b29scykge1xyXG4gICAgICAgICAgICAgICAgdGFyZ2V0Ll9fVlVFX0RFVlRPT0xTX0hPT0tfUkVQTEFZX18gPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgZGV2dG9vbHNOb3RJbnN0YWxsZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgYnVmZmVyID0gW107XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LCAzMDAwKTtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICAgIC8vIG5vbi1icm93c2VyIGVudiwgYXNzdW1lIG5vdCBpbnN0YWxsZWRcclxuICAgICAgICBkZXZ0b29sc05vdEluc3RhbGxlZCA9IHRydWU7XHJcbiAgICAgICAgYnVmZmVyID0gW107XHJcbiAgICB9XHJcbn1cclxuZnVuY3Rpb24gZGV2dG9vbHNJbml0QXBwKGFwcCwgdmVyc2lvbikge1xyXG4gICAgZW1pdChcImFwcDppbml0XCIgLyogQVBQX0lOSVQgKi8sIGFwcCwgdmVyc2lvbiwge1xyXG4gICAgICAgIEZyYWdtZW50LFxyXG4gICAgICAgIFRleHQsXHJcbiAgICAgICAgQ29tbWVudCxcclxuICAgICAgICBTdGF0aWNcclxuICAgIH0pO1xyXG59XHJcbmZ1bmN0aW9uIGRldnRvb2xzVW5tb3VudEFwcChhcHApIHtcclxuICAgIGVtaXQoXCJhcHA6dW5tb3VudFwiIC8qIEFQUF9VTk1PVU5UICovLCBhcHApO1xyXG59XHJcbmNvbnN0IGRldnRvb2xzQ29tcG9uZW50QWRkZWQgPSAvKiNfX1BVUkVfXyovIGNyZWF0ZURldnRvb2xzQ29tcG9uZW50SG9vayhcImNvbXBvbmVudDphZGRlZFwiIC8qIENPTVBPTkVOVF9BRERFRCAqLyk7XHJcbmNvbnN0IGRldnRvb2xzQ29tcG9uZW50VXBkYXRlZCA9IFxyXG4vKiNfX1BVUkVfXyovIGNyZWF0ZURldnRvb2xzQ29tcG9uZW50SG9vayhcImNvbXBvbmVudDp1cGRhdGVkXCIgLyogQ09NUE9ORU5UX1VQREFURUQgKi8pO1xyXG5jb25zdCBkZXZ0b29sc0NvbXBvbmVudFJlbW92ZWQgPSBcclxuLyojX19QVVJFX18qLyBjcmVhdGVEZXZ0b29sc0NvbXBvbmVudEhvb2soXCJjb21wb25lbnQ6cmVtb3ZlZFwiIC8qIENPTVBPTkVOVF9SRU1PVkVEICovKTtcclxuZnVuY3Rpb24gY3JlYXRlRGV2dG9vbHNDb21wb25lbnRIb29rKGhvb2spIHtcclxuICAgIHJldHVybiAoY29tcG9uZW50KSA9PiB7XHJcbiAgICAgICAgZW1pdChob29rLCBjb21wb25lbnQuYXBwQ29udGV4dC5hcHAsIGNvbXBvbmVudC51aWQsIGNvbXBvbmVudC5wYXJlbnQgPyBjb21wb25lbnQucGFyZW50LnVpZCA6IHVuZGVmaW5lZCwgY29tcG9uZW50KTtcclxuICAgIH07XHJcbn1cclxuY29uc3QgZGV2dG9vbHNQZXJmU3RhcnQgPSAvKiNfX1BVUkVfXyovIGNyZWF0ZURldnRvb2xzUGVyZm9ybWFuY2VIb29rKFwicGVyZjpzdGFydFwiIC8qIFBFUkZPUk1BTkNFX1NUQVJUICovKTtcclxuY29uc3QgZGV2dG9vbHNQZXJmRW5kID0gLyojX19QVVJFX18qLyBjcmVhdGVEZXZ0b29sc1BlcmZvcm1hbmNlSG9vayhcInBlcmY6ZW5kXCIgLyogUEVSRk9STUFOQ0VfRU5EICovKTtcclxuZnVuY3Rpb24gY3JlYXRlRGV2dG9vbHNQZXJmb3JtYW5jZUhvb2soaG9vaykge1xyXG4gICAgcmV0dXJuIChjb21wb25lbnQsIHR5cGUsIHRpbWUpID0+IHtcclxuICAgICAgICBlbWl0KGhvb2ssIGNvbXBvbmVudC5hcHBDb250ZXh0LmFwcCwgY29tcG9uZW50LnVpZCwgY29tcG9uZW50LCB0eXBlLCB0aW1lKTtcclxuICAgIH07XHJcbn1cclxuZnVuY3Rpb24gZGV2dG9vbHNDb21wb25lbnRFbWl0KGNvbXBvbmVudCwgZXZlbnQsIHBhcmFtcykge1xyXG4gICAgZW1pdChcImNvbXBvbmVudDplbWl0XCIgLyogQ09NUE9ORU5UX0VNSVQgKi8sIGNvbXBvbmVudC5hcHBDb250ZXh0LmFwcCwgY29tcG9uZW50LCBldmVudCwgcGFyYW1zKTtcclxufVxuXG5mdW5jdGlvbiBlbWl0JDEoaW5zdGFuY2UsIGV2ZW50LCAuLi5yYXdBcmdzKSB7XHJcbiAgICBjb25zdCBwcm9wcyA9IGluc3RhbmNlLnZub2RlLnByb3BzIHx8IEVNUFRZX09CSjtcclxuICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykpIHtcclxuICAgICAgICBjb25zdCB7IGVtaXRzT3B0aW9ucywgcHJvcHNPcHRpb25zOiBbcHJvcHNPcHRpb25zXSB9ID0gaW5zdGFuY2U7XHJcbiAgICAgICAgaWYgKGVtaXRzT3B0aW9ucykge1xyXG4gICAgICAgICAgICBpZiAoIShldmVudCBpbiBlbWl0c09wdGlvbnMpICYmXHJcbiAgICAgICAgICAgICAgICAhKGZhbHNlICkpIHtcclxuICAgICAgICAgICAgICAgIGlmICghcHJvcHNPcHRpb25zIHx8ICEodG9IYW5kbGVyS2V5KGV2ZW50KSBpbiBwcm9wc09wdGlvbnMpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgd2FybihgQ29tcG9uZW50IGVtaXR0ZWQgZXZlbnQgXCIke2V2ZW50fVwiIGJ1dCBpdCBpcyBuZWl0aGVyIGRlY2xhcmVkIGluIGAgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBgdGhlIGVtaXRzIG9wdGlvbiBub3IgYXMgYW4gXCIke3RvSGFuZGxlcktleShldmVudCl9XCIgcHJvcC5gKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHZhbGlkYXRvciA9IGVtaXRzT3B0aW9uc1tldmVudF07XHJcbiAgICAgICAgICAgICAgICBpZiAoaXNGdW5jdGlvbih2YWxpZGF0b3IpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgaXNWYWxpZCA9IHZhbGlkYXRvciguLi5yYXdBcmdzKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIWlzVmFsaWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgd2FybihgSW52YWxpZCBldmVudCBhcmd1bWVudHM6IGV2ZW50IHZhbGlkYXRpb24gZmFpbGVkIGZvciBldmVudCBcIiR7ZXZlbnR9XCIuYCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgbGV0IGFyZ3MgPSByYXdBcmdzO1xyXG4gICAgY29uc3QgaXNNb2RlbExpc3RlbmVyID0gZXZlbnQuc3RhcnRzV2l0aCgndXBkYXRlOicpO1xyXG4gICAgLy8gZm9yIHYtbW9kZWwgdXBkYXRlOnh4eCBldmVudHMsIGFwcGx5IG1vZGlmaWVycyBvbiBhcmdzXHJcbiAgICBjb25zdCBtb2RlbEFyZyA9IGlzTW9kZWxMaXN0ZW5lciAmJiBldmVudC5zbGljZSg3KTtcclxuICAgIGlmIChtb2RlbEFyZyAmJiBtb2RlbEFyZyBpbiBwcm9wcykge1xyXG4gICAgICAgIGNvbnN0IG1vZGlmaWVyc0tleSA9IGAke21vZGVsQXJnID09PSAnbW9kZWxWYWx1ZScgPyAnbW9kZWwnIDogbW9kZWxBcmd9TW9kaWZpZXJzYDtcclxuICAgICAgICBjb25zdCB7IG51bWJlciwgdHJpbSB9ID0gcHJvcHNbbW9kaWZpZXJzS2V5XSB8fCBFTVBUWV9PQko7XHJcbiAgICAgICAgaWYgKHRyaW0pIHtcclxuICAgICAgICAgICAgYXJncyA9IHJhd0FyZ3MubWFwKGEgPT4gYS50cmltKCkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChudW1iZXIpIHtcclxuICAgICAgICAgICAgYXJncyA9IHJhd0FyZ3MubWFwKHRvTnVtYmVyKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHx8IF9fVlVFX1BST0RfREVWVE9PTFNfXykge1xyXG4gICAgICAgIGRldnRvb2xzQ29tcG9uZW50RW1pdChpbnN0YW5jZSwgZXZlbnQsIGFyZ3MpO1xyXG4gICAgfVxyXG4gICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSkge1xyXG4gICAgICAgIGNvbnN0IGxvd2VyQ2FzZUV2ZW50ID0gZXZlbnQudG9Mb3dlckNhc2UoKTtcclxuICAgICAgICBpZiAobG93ZXJDYXNlRXZlbnQgIT09IGV2ZW50ICYmIHByb3BzW3RvSGFuZGxlcktleShsb3dlckNhc2VFdmVudCldKSB7XHJcbiAgICAgICAgICAgIHdhcm4oYEV2ZW50IFwiJHtsb3dlckNhc2VFdmVudH1cIiBpcyBlbWl0dGVkIGluIGNvbXBvbmVudCBgICtcclxuICAgICAgICAgICAgICAgIGAke2Zvcm1hdENvbXBvbmVudE5hbWUoaW5zdGFuY2UsIGluc3RhbmNlLnR5cGUpfSBidXQgdGhlIGhhbmRsZXIgaXMgcmVnaXN0ZXJlZCBmb3IgXCIke2V2ZW50fVwiLiBgICtcclxuICAgICAgICAgICAgICAgIGBOb3RlIHRoYXQgSFRNTCBhdHRyaWJ1dGVzIGFyZSBjYXNlLWluc2Vuc2l0aXZlIGFuZCB5b3UgY2Fubm90IHVzZSBgICtcclxuICAgICAgICAgICAgICAgIGB2LW9uIHRvIGxpc3RlbiB0byBjYW1lbENhc2UgZXZlbnRzIHdoZW4gdXNpbmcgaW4tRE9NIHRlbXBsYXRlcy4gYCArXHJcbiAgICAgICAgICAgICAgICBgWW91IHNob3VsZCBwcm9iYWJseSB1c2UgXCIke2h5cGhlbmF0ZShldmVudCl9XCIgaW5zdGVhZCBvZiBcIiR7ZXZlbnR9XCIuYCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgbGV0IGhhbmRsZXJOYW1lO1xyXG4gICAgbGV0IGhhbmRsZXIgPSBwcm9wc1soaGFuZGxlck5hbWUgPSB0b0hhbmRsZXJLZXkoZXZlbnQpKV0gfHxcclxuICAgICAgICAvLyBhbHNvIHRyeSBjYW1lbENhc2UgZXZlbnQgaGFuZGxlciAoIzIyNDkpXHJcbiAgICAgICAgcHJvcHNbKGhhbmRsZXJOYW1lID0gdG9IYW5kbGVyS2V5KGNhbWVsaXplKGV2ZW50KSkpXTtcclxuICAgIC8vIGZvciB2LW1vZGVsIHVwZGF0ZTp4eHggZXZlbnRzLCBhbHNvIHRyaWdnZXIga2ViYWItY2FzZSBlcXVpdmFsZW50XHJcbiAgICAvLyBmb3IgcHJvcHMgcGFzc2VkIHZpYSBrZWJhYi1jYXNlXHJcbiAgICBpZiAoIWhhbmRsZXIgJiYgaXNNb2RlbExpc3RlbmVyKSB7XHJcbiAgICAgICAgaGFuZGxlciA9IHByb3BzWyhoYW5kbGVyTmFtZSA9IHRvSGFuZGxlcktleShoeXBoZW5hdGUoZXZlbnQpKSldO1xyXG4gICAgfVxyXG4gICAgaWYgKGhhbmRsZXIpIHtcclxuICAgICAgICBjYWxsV2l0aEFzeW5jRXJyb3JIYW5kbGluZyhoYW5kbGVyLCBpbnN0YW5jZSwgNiAvKiBDT01QT05FTlRfRVZFTlRfSEFORExFUiAqLywgYXJncyk7XHJcbiAgICB9XHJcbiAgICBjb25zdCBvbmNlSGFuZGxlciA9IHByb3BzW2hhbmRsZXJOYW1lICsgYE9uY2VgXTtcclxuICAgIGlmIChvbmNlSGFuZGxlcikge1xyXG4gICAgICAgIGlmICghaW5zdGFuY2UuZW1pdHRlZCkge1xyXG4gICAgICAgICAgICBpbnN0YW5jZS5lbWl0dGVkID0ge307XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKGluc3RhbmNlLmVtaXR0ZWRbaGFuZGxlck5hbWVdKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW5zdGFuY2UuZW1pdHRlZFtoYW5kbGVyTmFtZV0gPSB0cnVlO1xyXG4gICAgICAgIGNhbGxXaXRoQXN5bmNFcnJvckhhbmRsaW5nKG9uY2VIYW5kbGVyLCBpbnN0YW5jZSwgNiAvKiBDT01QT05FTlRfRVZFTlRfSEFORExFUiAqLywgYXJncyk7XHJcbiAgICB9XHJcbn1cclxuZnVuY3Rpb24gbm9ybWFsaXplRW1pdHNPcHRpb25zKGNvbXAsIGFwcENvbnRleHQsIGFzTWl4aW4gPSBmYWxzZSkge1xyXG4gICAgY29uc3QgY2FjaGUgPSBhcHBDb250ZXh0LmVtaXRzQ2FjaGU7XHJcbiAgICBjb25zdCBjYWNoZWQgPSBjYWNoZS5nZXQoY29tcCk7XHJcbiAgICBpZiAoY2FjaGVkICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICByZXR1cm4gY2FjaGVkO1xyXG4gICAgfVxyXG4gICAgY29uc3QgcmF3ID0gY29tcC5lbWl0cztcclxuICAgIGxldCBub3JtYWxpemVkID0ge307XHJcbiAgICAvLyBhcHBseSBtaXhpbi9leHRlbmRzIHByb3BzXHJcbiAgICBsZXQgaGFzRXh0ZW5kcyA9IGZhbHNlO1xyXG4gICAgaWYgKF9fVlVFX09QVElPTlNfQVBJX18gJiYgIWlzRnVuY3Rpb24oY29tcCkpIHtcclxuICAgICAgICBjb25zdCBleHRlbmRFbWl0cyA9IChyYXcpID0+IHtcclxuICAgICAgICAgICAgY29uc3Qgbm9ybWFsaXplZEZyb21FeHRlbmQgPSBub3JtYWxpemVFbWl0c09wdGlvbnMocmF3LCBhcHBDb250ZXh0LCB0cnVlKTtcclxuICAgICAgICAgICAgaWYgKG5vcm1hbGl6ZWRGcm9tRXh0ZW5kKSB7XHJcbiAgICAgICAgICAgICAgICBoYXNFeHRlbmRzID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIGV4dGVuZChub3JtYWxpemVkLCBub3JtYWxpemVkRnJvbUV4dGVuZCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgICAgIGlmICghYXNNaXhpbiAmJiBhcHBDb250ZXh0Lm1peGlucy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgYXBwQ29udGV4dC5taXhpbnMuZm9yRWFjaChleHRlbmRFbWl0cyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChjb21wLmV4dGVuZHMpIHtcclxuICAgICAgICAgICAgZXh0ZW5kRW1pdHMoY29tcC5leHRlbmRzKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGNvbXAubWl4aW5zKSB7XHJcbiAgICAgICAgICAgIGNvbXAubWl4aW5zLmZvckVhY2goZXh0ZW5kRW1pdHMpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGlmICghcmF3ICYmICFoYXNFeHRlbmRzKSB7XHJcbiAgICAgICAgY2FjaGUuc2V0KGNvbXAsIG51bGwpO1xyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG4gICAgaWYgKGlzQXJyYXkocmF3KSkge1xyXG4gICAgICAgIHJhdy5mb3JFYWNoKGtleSA9PiAobm9ybWFsaXplZFtrZXldID0gbnVsbCkpO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgZXh0ZW5kKG5vcm1hbGl6ZWQsIHJhdyk7XHJcbiAgICB9XHJcbiAgICBjYWNoZS5zZXQoY29tcCwgbm9ybWFsaXplZCk7XHJcbiAgICByZXR1cm4gbm9ybWFsaXplZDtcclxufVxyXG4vLyBDaGVjayBpZiBhbiBpbmNvbWluZyBwcm9wIGtleSBpcyBhIGRlY2xhcmVkIGVtaXQgZXZlbnQgbGlzdGVuZXIuXHJcbi8vIGUuZy4gV2l0aCBgZW1pdHM6IHsgY2xpY2s6IG51bGwgfWAsIHByb3BzIG5hbWVkIGBvbkNsaWNrYCBhbmQgYG9uY2xpY2tgIGFyZVxyXG4vLyBib3RoIGNvbnNpZGVyZWQgbWF0Y2hlZCBsaXN0ZW5lcnMuXHJcbmZ1bmN0aW9uIGlzRW1pdExpc3RlbmVyKG9wdGlvbnMsIGtleSkge1xyXG4gICAgaWYgKCFvcHRpb25zIHx8ICFpc09uKGtleSkpIHtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbiAgICBrZXkgPSBrZXkuc2xpY2UoMikucmVwbGFjZSgvT25jZSQvLCAnJyk7XHJcbiAgICByZXR1cm4gKGhhc093bihvcHRpb25zLCBrZXlbMF0udG9Mb3dlckNhc2UoKSArIGtleS5zbGljZSgxKSkgfHxcclxuICAgICAgICBoYXNPd24ob3B0aW9ucywgaHlwaGVuYXRlKGtleSkpIHx8XHJcbiAgICAgICAgaGFzT3duKG9wdGlvbnMsIGtleSkpO1xyXG59XG5cbi8qKlxyXG4gKiBtYXJrIHRoZSBjdXJyZW50IHJlbmRlcmluZyBpbnN0YW5jZSBmb3IgYXNzZXQgcmVzb2x1dGlvbiAoZS5nLlxyXG4gKiByZXNvbHZlQ29tcG9uZW50LCByZXNvbHZlRGlyZWN0aXZlKSBkdXJpbmcgcmVuZGVyXHJcbiAqL1xyXG5sZXQgY3VycmVudFJlbmRlcmluZ0luc3RhbmNlID0gbnVsbDtcclxubGV0IGN1cnJlbnRTY29wZUlkID0gbnVsbDtcclxuLyoqXHJcbiAqIE5vdGU6IHJlbmRlcmluZyBjYWxscyBtYXliZSBuZXN0ZWQuIFRoZSBmdW5jdGlvbiByZXR1cm5zIHRoZSBwYXJlbnQgcmVuZGVyaW5nXHJcbiAqIGluc3RhbmNlIGlmIHByZXNlbnQsIHdoaWNoIHNob3VsZCBiZSByZXN0b3JlZCBhZnRlciB0aGUgcmVuZGVyIGlzIGRvbmU6XHJcbiAqXHJcbiAqIGBgYGpzXHJcbiAqIGNvbnN0IHByZXYgPSBzZXRDdXJyZW50UmVuZGVyaW5nSW5zdGFuY2UoaSlcclxuICogLy8gLi4ucmVuZGVyXHJcbiAqIHNldEN1cnJlbnRSZW5kZXJpbmdJbnN0YW5jZShwcmV2KVxyXG4gKiBgYGBcclxuICovXHJcbmZ1bmN0aW9uIHNldEN1cnJlbnRSZW5kZXJpbmdJbnN0YW5jZShpbnN0YW5jZSkge1xyXG4gICAgY29uc3QgcHJldiA9IGN1cnJlbnRSZW5kZXJpbmdJbnN0YW5jZTtcclxuICAgIGN1cnJlbnRSZW5kZXJpbmdJbnN0YW5jZSA9IGluc3RhbmNlO1xyXG4gICAgY3VycmVudFNjb3BlSWQgPSAoaW5zdGFuY2UgJiYgaW5zdGFuY2UudHlwZS5fX3Njb3BlSWQpIHx8IG51bGw7XHJcbiAgICByZXR1cm4gcHJldjtcclxufVxyXG4vKipcclxuICogU2V0IHNjb3BlIGlkIHdoZW4gY3JlYXRpbmcgaG9pc3RlZCB2bm9kZXMuXHJcbiAqIEBwcml2YXRlIGNvbXBpbGVyIGhlbHBlclxyXG4gKi9cclxuZnVuY3Rpb24gcHVzaFNjb3BlSWQoaWQpIHtcclxuICAgIGN1cnJlbnRTY29wZUlkID0gaWQ7XHJcbn1cclxuLyoqXHJcbiAqIFRlY2huaWNhbGx5IHdlIG5vIGxvbmdlciBuZWVkIHRoaXMgYWZ0ZXIgMy4wLjggYnV0IHdlIG5lZWQgdG8ga2VlcCB0aGUgc2FtZVxyXG4gKiBBUEkgZm9yIGJhY2t3YXJkcyBjb21wYXQgdy8gY29kZSBnZW5lcmF0ZWQgYnkgY29tcGlsZXJzLlxyXG4gKiBAcHJpdmF0ZVxyXG4gKi9cclxuZnVuY3Rpb24gcG9wU2NvcGVJZCgpIHtcclxuICAgIGN1cnJlbnRTY29wZUlkID0gbnVsbDtcclxufVxyXG4vKipcclxuICogT25seSBmb3IgYmFja3dhcmRzIGNvbXBhdFxyXG4gKiBAcHJpdmF0ZVxyXG4gKi9cclxuY29uc3Qgd2l0aFNjb3BlSWQgPSAoX2lkKSA9PiB3aXRoQ3R4O1xyXG4vKipcclxuICogV3JhcCBhIHNsb3QgZnVuY3Rpb24gdG8gbWVtb2l6ZSBjdXJyZW50IHJlbmRlcmluZyBpbnN0YW5jZVxyXG4gKiBAcHJpdmF0ZSBjb21waWxlciBoZWxwZXJcclxuICovXHJcbmZ1bmN0aW9uIHdpdGhDdHgoZm4sIGN0eCA9IGN1cnJlbnRSZW5kZXJpbmdJbnN0YW5jZSwgaXNOb25TY29wZWRTbG90IC8vIGZhbHNlIG9ubHlcclxuKSB7XHJcbiAgICBpZiAoIWN0eClcclxuICAgICAgICByZXR1cm4gZm47XHJcbiAgICAvLyBhbHJlYWR5IG5vcm1hbGl6ZWRcclxuICAgIGlmIChmbi5fbikge1xyXG4gICAgICAgIHJldHVybiBmbjtcclxuICAgIH1cclxuICAgIGNvbnN0IHJlbmRlckZuV2l0aENvbnRleHQgPSAoLi4uYXJncykgPT4ge1xyXG4gICAgICAgIC8vIElmIGEgdXNlciBjYWxscyBhIGNvbXBpbGVkIHNsb3QgaW5zaWRlIGEgdGVtcGxhdGUgZXhwcmVzc2lvbiAoIzE3NDUpLCBpdFxyXG4gICAgICAgIC8vIGNhbiBtZXNzIHVwIGJsb2NrIHRyYWNraW5nLCBzbyBieSBkZWZhdWx0IHdlIGRpc2FibGUgYmxvY2sgdHJhY2tpbmcgYW5kXHJcbiAgICAgICAgLy8gZm9yY2UgYmFpbCBvdXQgd2hlbiBpbnZva2luZyBhIGNvbXBpbGVkIHNsb3QgKGluZGljYXRlZCBieSB0aGUgLl9kIGZsYWcpLlxyXG4gICAgICAgIC8vIFRoaXMgaXNuJ3QgbmVjZXNzYXJ5IGlmIHJlbmRlcmluZyBhIGNvbXBpbGVkIGA8c2xvdD5gLCBzbyB3ZSBmbGlwIHRoZVxyXG4gICAgICAgIC8vIC5fZCBmbGFnIG9mZiB3aGVuIGludm9raW5nIHRoZSB3cmFwcGVkIGZuIGluc2lkZSBgcmVuZGVyU2xvdGAuXHJcbiAgICAgICAgaWYgKHJlbmRlckZuV2l0aENvbnRleHQuX2QpIHtcclxuICAgICAgICAgICAgc2V0QmxvY2tUcmFja2luZygtMSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IHByZXZJbnN0YW5jZSA9IHNldEN1cnJlbnRSZW5kZXJpbmdJbnN0YW5jZShjdHgpO1xyXG4gICAgICAgIGNvbnN0IHJlcyA9IGZuKC4uLmFyZ3MpO1xyXG4gICAgICAgIHNldEN1cnJlbnRSZW5kZXJpbmdJbnN0YW5jZShwcmV2SW5zdGFuY2UpO1xyXG4gICAgICAgIGlmIChyZW5kZXJGbldpdGhDb250ZXh0Ll9kKSB7XHJcbiAgICAgICAgICAgIHNldEJsb2NrVHJhY2tpbmcoMSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgfHwgX19WVUVfUFJPRF9ERVZUT09MU19fKSB7XHJcbiAgICAgICAgICAgIGRldnRvb2xzQ29tcG9uZW50VXBkYXRlZChjdHgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gcmVzO1xyXG4gICAgfTtcclxuICAgIC8vIG1hcmsgbm9ybWFsaXplZCB0byBhdm9pZCBkdXBsaWNhdGVkIHdyYXBwaW5nXHJcbiAgICByZW5kZXJGbldpdGhDb250ZXh0Ll9uID0gdHJ1ZTtcclxuICAgIC8vIG1hcmsgdGhpcyBhcyBjb21waWxlZCBieSBkZWZhdWx0XHJcbiAgICAvLyB0aGlzIGlzIHVzZWQgaW4gdm5vZGUudHMgLT4gbm9ybWFsaXplQ2hpbGRyZW4oKSB0byBzZXQgdGhlIHNsb3RcclxuICAgIC8vIHJlbmRlcmluZyBmbGFnLlxyXG4gICAgcmVuZGVyRm5XaXRoQ29udGV4dC5fYyA9IHRydWU7XHJcbiAgICAvLyBkaXNhYmxlIGJsb2NrIHRyYWNraW5nIGJ5IGRlZmF1bHRcclxuICAgIHJlbmRlckZuV2l0aENvbnRleHQuX2QgPSB0cnVlO1xyXG4gICAgcmV0dXJuIHJlbmRlckZuV2l0aENvbnRleHQ7XHJcbn1cblxuLyoqXHJcbiAqIGRldiBvbmx5IGZsYWcgdG8gdHJhY2sgd2hldGhlciAkYXR0cnMgd2FzIHVzZWQgZHVyaW5nIHJlbmRlci5cclxuICogSWYgJGF0dHJzIHdhcyB1c2VkIGR1cmluZyByZW5kZXIgdGhlbiB0aGUgd2FybmluZyBmb3IgZmFpbGVkIGF0dHJzXHJcbiAqIGZhbGx0aHJvdWdoIGNhbiBiZSBzdXBwcmVzc2VkLlxyXG4gKi9cclxubGV0IGFjY2Vzc2VkQXR0cnMgPSBmYWxzZTtcclxuZnVuY3Rpb24gbWFya0F0dHJzQWNjZXNzZWQoKSB7XHJcbiAgICBhY2Nlc3NlZEF0dHJzID0gdHJ1ZTtcclxufVxyXG5mdW5jdGlvbiByZW5kZXJDb21wb25lbnRSb290KGluc3RhbmNlKSB7XHJcbiAgICBjb25zdCB7IHR5cGU6IENvbXBvbmVudCwgdm5vZGUsIHByb3h5LCB3aXRoUHJveHksIHByb3BzLCBwcm9wc09wdGlvbnM6IFtwcm9wc09wdGlvbnNdLCBzbG90cywgYXR0cnMsIGVtaXQsIHJlbmRlciwgcmVuZGVyQ2FjaGUsIGRhdGEsIHNldHVwU3RhdGUsIGN0eCwgaW5oZXJpdEF0dHJzIH0gPSBpbnN0YW5jZTtcclxuICAgIGxldCByZXN1bHQ7XHJcbiAgICBsZXQgZmFsbHRocm91Z2hBdHRycztcclxuICAgIGNvbnN0IHByZXYgPSBzZXRDdXJyZW50UmVuZGVyaW5nSW5zdGFuY2UoaW5zdGFuY2UpO1xyXG4gICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSkge1xyXG4gICAgICAgIGFjY2Vzc2VkQXR0cnMgPSBmYWxzZTtcclxuICAgIH1cclxuICAgIHRyeSB7XHJcbiAgICAgICAgaWYgKHZub2RlLnNoYXBlRmxhZyAmIDQgLyogU1RBVEVGVUxfQ09NUE9ORU5UICovKSB7XHJcbiAgICAgICAgICAgIC8vIHdpdGhQcm94eSBpcyBhIHByb3h5IHdpdGggYSBkaWZmZXJlbnQgYGhhc2AgdHJhcCBvbmx5IGZvclxyXG4gICAgICAgICAgICAvLyBydW50aW1lLWNvbXBpbGVkIHJlbmRlciBmdW5jdGlvbnMgdXNpbmcgYHdpdGhgIGJsb2NrLlxyXG4gICAgICAgICAgICBjb25zdCBwcm94eVRvVXNlID0gd2l0aFByb3h5IHx8IHByb3h5O1xyXG4gICAgICAgICAgICByZXN1bHQgPSBub3JtYWxpemVWTm9kZShyZW5kZXIuY2FsbChwcm94eVRvVXNlLCBwcm94eVRvVXNlLCByZW5kZXJDYWNoZSwgcHJvcHMsIHNldHVwU3RhdGUsIGRhdGEsIGN0eCkpO1xyXG4gICAgICAgICAgICBmYWxsdGhyb3VnaEF0dHJzID0gYXR0cnM7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAvLyBmdW5jdGlvbmFsXHJcbiAgICAgICAgICAgIGNvbnN0IHJlbmRlciA9IENvbXBvbmVudDtcclxuICAgICAgICAgICAgLy8gaW4gZGV2LCBtYXJrIGF0dHJzIGFjY2Vzc2VkIGlmIG9wdGlvbmFsIHByb3BzIChhdHRycyA9PT0gcHJvcHMpXHJcbiAgICAgICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgJiYgYXR0cnMgPT09IHByb3BzKSB7XHJcbiAgICAgICAgICAgICAgICBtYXJrQXR0cnNBY2Nlc3NlZCgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJlc3VsdCA9IG5vcm1hbGl6ZVZOb2RlKHJlbmRlci5sZW5ndGggPiAxXHJcbiAgICAgICAgICAgICAgICA/IHJlbmRlcihwcm9wcywgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpXHJcbiAgICAgICAgICAgICAgICAgICAgPyB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGdldCBhdHRycygpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hcmtBdHRyc0FjY2Vzc2VkKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gYXR0cnM7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNsb3RzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbWl0XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIDogeyBhdHRycywgc2xvdHMsIGVtaXQgfSlcclxuICAgICAgICAgICAgICAgIDogcmVuZGVyKHByb3BzLCBudWxsIC8qIHdlIGtub3cgaXQgZG9lc24ndCBuZWVkIGl0ICovKSk7XHJcbiAgICAgICAgICAgIGZhbGx0aHJvdWdoQXR0cnMgPSBDb21wb25lbnQucHJvcHNcclxuICAgICAgICAgICAgICAgID8gYXR0cnNcclxuICAgICAgICAgICAgICAgIDogZ2V0RnVuY3Rpb25hbEZhbGx0aHJvdWdoKGF0dHJzKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBjYXRjaCAoZXJyKSB7XHJcbiAgICAgICAgYmxvY2tTdGFjay5sZW5ndGggPSAwO1xyXG4gICAgICAgIGhhbmRsZUVycm9yKGVyciwgaW5zdGFuY2UsIDEgLyogUkVOREVSX0ZVTkNUSU9OICovKTtcclxuICAgICAgICByZXN1bHQgPSBjcmVhdGVWTm9kZShDb21tZW50KTtcclxuICAgIH1cclxuICAgIC8vIGF0dHIgbWVyZ2luZ1xyXG4gICAgLy8gaW4gZGV2IG1vZGUsIGNvbW1lbnRzIGFyZSBwcmVzZXJ2ZWQsIGFuZCBpdCdzIHBvc3NpYmxlIGZvciBhIHRlbXBsYXRlXHJcbiAgICAvLyB0byBoYXZlIGNvbW1lbnRzIGFsb25nIHNpZGUgdGhlIHJvb3QgZWxlbWVudCB3aGljaCBtYWtlcyBpdCBhIGZyYWdtZW50XHJcbiAgICBsZXQgcm9vdCA9IHJlc3VsdDtcclxuICAgIGxldCBzZXRSb290ID0gdW5kZWZpbmVkO1xyXG4gICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSAmJlxyXG4gICAgICAgIHJlc3VsdC5wYXRjaEZsYWcgPiAwICYmXHJcbiAgICAgICAgcmVzdWx0LnBhdGNoRmxhZyAmIDIwNDggLyogREVWX1JPT1RfRlJBR01FTlQgKi8pIHtcclxuICAgICAgICBbcm9vdCwgc2V0Um9vdF0gPSBnZXRDaGlsZFJvb3QocmVzdWx0KTtcclxuICAgIH1cclxuICAgIGlmIChmYWxsdGhyb3VnaEF0dHJzICYmIGluaGVyaXRBdHRycyAhPT0gZmFsc2UpIHtcclxuICAgICAgICBjb25zdCBrZXlzID0gT2JqZWN0LmtleXMoZmFsbHRocm91Z2hBdHRycyk7XHJcbiAgICAgICAgY29uc3QgeyBzaGFwZUZsYWcgfSA9IHJvb3Q7XHJcbiAgICAgICAgaWYgKGtleXMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIGlmIChzaGFwZUZsYWcgJiAoMSAvKiBFTEVNRU5UICovIHwgNiAvKiBDT01QT05FTlQgKi8pKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAocHJvcHNPcHRpb25zICYmIGtleXMuc29tZShpc01vZGVsTGlzdGVuZXIpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gSWYgYSB2LW1vZGVsIGxpc3RlbmVyIChvblVwZGF0ZTp4eHgpIGhhcyBhIGNvcnJlc3BvbmRpbmcgZGVjbGFyZWRcclxuICAgICAgICAgICAgICAgICAgICAvLyBwcm9wLCBpdCBpbmRpY2F0ZXMgdGhpcyBjb21wb25lbnQgZXhwZWN0cyB0byBoYW5kbGUgdi1tb2RlbCBhbmRcclxuICAgICAgICAgICAgICAgICAgICAvLyBpdCBzaG91bGQgbm90IGZhbGx0aHJvdWdoLlxyXG4gICAgICAgICAgICAgICAgICAgIC8vIHJlbGF0ZWQ6ICMxNTQzLCAjMTY0MywgIzE5ODlcclxuICAgICAgICAgICAgICAgICAgICBmYWxsdGhyb3VnaEF0dHJzID0gZmlsdGVyTW9kZWxMaXN0ZW5lcnMoZmFsbHRocm91Z2hBdHRycywgcHJvcHNPcHRpb25zKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJvb3QgPSBjbG9uZVZOb2RlKHJvb3QsIGZhbGx0aHJvdWdoQXR0cnMpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSAmJiAhYWNjZXNzZWRBdHRycyAmJiByb290LnR5cGUgIT09IENvbW1lbnQpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGFsbEF0dHJzID0gT2JqZWN0LmtleXMoYXR0cnMpO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgZXZlbnRBdHRycyA9IFtdO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgZXh0cmFBdHRycyA9IFtdO1xyXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDAsIGwgPSBhbGxBdHRycy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBrZXkgPSBhbGxBdHRyc1tpXTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoaXNPbihrZXkpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGlnbm9yZSB2LW1vZGVsIGhhbmRsZXJzIHdoZW4gdGhleSBmYWlsIHRvIGZhbGx0aHJvdWdoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghaXNNb2RlbExpc3RlbmVyKGtleSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHJlbW92ZSBgb25gLCBsb3dlcmNhc2UgZmlyc3QgbGV0dGVyIHRvIHJlZmxlY3QgZXZlbnQgY2FzaW5nXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBhY2N1cmF0ZWx5XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBldmVudEF0dHJzLnB1c2goa2V5WzJdLnRvTG93ZXJDYXNlKCkgKyBrZXkuc2xpY2UoMykpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBleHRyYUF0dHJzLnB1c2goa2V5KTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAoZXh0cmFBdHRycy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgICAgICB3YXJuKGBFeHRyYW5lb3VzIG5vbi1wcm9wcyBhdHRyaWJ1dGVzIChgICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYCR7ZXh0cmFBdHRycy5qb2luKCcsICcpfSkgYCArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGB3ZXJlIHBhc3NlZCB0byBjb21wb25lbnQgYnV0IGNvdWxkIG5vdCBiZSBhdXRvbWF0aWNhbGx5IGluaGVyaXRlZCBgICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYGJlY2F1c2UgY29tcG9uZW50IHJlbmRlcnMgZnJhZ21lbnQgb3IgdGV4dCByb290IG5vZGVzLmApO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKGV2ZW50QXR0cnMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgd2FybihgRXh0cmFuZW91cyBub24tZW1pdHMgZXZlbnQgbGlzdGVuZXJzIChgICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYCR7ZXZlbnRBdHRycy5qb2luKCcsICcpfSkgYCArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGB3ZXJlIHBhc3NlZCB0byBjb21wb25lbnQgYnV0IGNvdWxkIG5vdCBiZSBhdXRvbWF0aWNhbGx5IGluaGVyaXRlZCBgICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYGJlY2F1c2UgY29tcG9uZW50IHJlbmRlcnMgZnJhZ21lbnQgb3IgdGV4dCByb290IG5vZGVzLiBgICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYElmIHRoZSBsaXN0ZW5lciBpcyBpbnRlbmRlZCB0byBiZSBhIGNvbXBvbmVudCBjdXN0b20gZXZlbnQgbGlzdGVuZXIgb25seSwgYCArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGBkZWNsYXJlIGl0IHVzaW5nIHRoZSBcImVtaXRzXCIgb3B0aW9uLmApO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgLy8gaW5oZXJpdCBkaXJlY3RpdmVzXHJcbiAgICBpZiAodm5vZGUuZGlycykge1xyXG4gICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgJiYgIWlzRWxlbWVudFJvb3Qocm9vdCkpIHtcclxuICAgICAgICAgICAgd2FybihgUnVudGltZSBkaXJlY3RpdmUgdXNlZCBvbiBjb21wb25lbnQgd2l0aCBub24tZWxlbWVudCByb290IG5vZGUuIGAgK1xyXG4gICAgICAgICAgICAgICAgYFRoZSBkaXJlY3RpdmVzIHdpbGwgbm90IGZ1bmN0aW9uIGFzIGludGVuZGVkLmApO1xyXG4gICAgICAgIH1cclxuICAgICAgICByb290LmRpcnMgPSByb290LmRpcnMgPyByb290LmRpcnMuY29uY2F0KHZub2RlLmRpcnMpIDogdm5vZGUuZGlycztcclxuICAgIH1cclxuICAgIC8vIGluaGVyaXQgdHJhbnNpdGlvbiBkYXRhXHJcbiAgICBpZiAodm5vZGUudHJhbnNpdGlvbikge1xyXG4gICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgJiYgIWlzRWxlbWVudFJvb3Qocm9vdCkpIHtcclxuICAgICAgICAgICAgd2FybihgQ29tcG9uZW50IGluc2lkZSA8VHJhbnNpdGlvbj4gcmVuZGVycyBub24tZWxlbWVudCByb290IG5vZGUgYCArXHJcbiAgICAgICAgICAgICAgICBgdGhhdCBjYW5ub3QgYmUgYW5pbWF0ZWQuYCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJvb3QudHJhbnNpdGlvbiA9IHZub2RlLnRyYW5zaXRpb247XHJcbiAgICB9XHJcbiAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmIHNldFJvb3QpIHtcclxuICAgICAgICBzZXRSb290KHJvb3QpO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgcmVzdWx0ID0gcm9vdDtcclxuICAgIH1cclxuICAgIHNldEN1cnJlbnRSZW5kZXJpbmdJbnN0YW5jZShwcmV2KTtcclxuICAgIHJldHVybiByZXN1bHQ7XHJcbn1cclxuLyoqXHJcbiAqIGRldiBvbmx5XHJcbiAqIEluIGRldiBtb2RlLCB0ZW1wbGF0ZSByb290IGxldmVsIGNvbW1lbnRzIGFyZSByZW5kZXJlZCwgd2hpY2ggdHVybnMgdGhlXHJcbiAqIHRlbXBsYXRlIGludG8gYSBmcmFnbWVudCByb290LCBidXQgd2UgbmVlZCB0byBsb2NhdGUgdGhlIHNpbmdsZSBlbGVtZW50XHJcbiAqIHJvb3QgZm9yIGF0dHJzIGFuZCBzY29wZSBpZCBwcm9jZXNzaW5nLlxyXG4gKi9cclxuY29uc3QgZ2V0Q2hpbGRSb290ID0gKHZub2RlKSA9PiB7XHJcbiAgICBjb25zdCByYXdDaGlsZHJlbiA9IHZub2RlLmNoaWxkcmVuO1xyXG4gICAgY29uc3QgZHluYW1pY0NoaWxkcmVuID0gdm5vZGUuZHluYW1pY0NoaWxkcmVuO1xyXG4gICAgY29uc3QgY2hpbGRSb290ID0gZmlsdGVyU2luZ2xlUm9vdChyYXdDaGlsZHJlbik7XHJcbiAgICBpZiAoIWNoaWxkUm9vdCkge1xyXG4gICAgICAgIHJldHVybiBbdm5vZGUsIHVuZGVmaW5lZF07XHJcbiAgICB9XHJcbiAgICBjb25zdCBpbmRleCA9IHJhd0NoaWxkcmVuLmluZGV4T2YoY2hpbGRSb290KTtcclxuICAgIGNvbnN0IGR5bmFtaWNJbmRleCA9IGR5bmFtaWNDaGlsZHJlbiA/IGR5bmFtaWNDaGlsZHJlbi5pbmRleE9mKGNoaWxkUm9vdCkgOiAtMTtcclxuICAgIGNvbnN0IHNldFJvb3QgPSAodXBkYXRlZFJvb3QpID0+IHtcclxuICAgICAgICByYXdDaGlsZHJlbltpbmRleF0gPSB1cGRhdGVkUm9vdDtcclxuICAgICAgICBpZiAoZHluYW1pY0NoaWxkcmVuKSB7XHJcbiAgICAgICAgICAgIGlmIChkeW5hbWljSW5kZXggPiAtMSkge1xyXG4gICAgICAgICAgICAgICAgZHluYW1pY0NoaWxkcmVuW2R5bmFtaWNJbmRleF0gPSB1cGRhdGVkUm9vdDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmICh1cGRhdGVkUm9vdC5wYXRjaEZsYWcgPiAwKSB7XHJcbiAgICAgICAgICAgICAgICB2bm9kZS5keW5hbWljQ2hpbGRyZW4gPSBbLi4uZHluYW1pY0NoaWxkcmVuLCB1cGRhdGVkUm9vdF07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIFtub3JtYWxpemVWTm9kZShjaGlsZFJvb3QpLCBzZXRSb290XTtcclxufTtcclxuZnVuY3Rpb24gZmlsdGVyU2luZ2xlUm9vdChjaGlsZHJlbikge1xyXG4gICAgbGV0IHNpbmdsZVJvb3Q7XHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNoaWxkcmVuLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgY29uc3QgY2hpbGQgPSBjaGlsZHJlbltpXTtcclxuICAgICAgICBpZiAoaXNWTm9kZShjaGlsZCkpIHtcclxuICAgICAgICAgICAgLy8gaWdub3JlIHVzZXIgY29tbWVudFxyXG4gICAgICAgICAgICBpZiAoY2hpbGQudHlwZSAhPT0gQ29tbWVudCB8fCBjaGlsZC5jaGlsZHJlbiA9PT0gJ3YtaWYnKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoc2luZ2xlUm9vdCkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIGhhcyBtb3JlIHRoYW4gMSBub24tY29tbWVudCBjaGlsZCwgcmV0dXJuIG5vd1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHNpbmdsZVJvb3QgPSBjaGlsZDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiBzaW5nbGVSb290O1xyXG59XHJcbmNvbnN0IGdldEZ1bmN0aW9uYWxGYWxsdGhyb3VnaCA9IChhdHRycykgPT4ge1xyXG4gICAgbGV0IHJlcztcclxuICAgIGZvciAoY29uc3Qga2V5IGluIGF0dHJzKSB7XHJcbiAgICAgICAgaWYgKGtleSA9PT0gJ2NsYXNzJyB8fCBrZXkgPT09ICdzdHlsZScgfHwgaXNPbihrZXkpKSB7XHJcbiAgICAgICAgICAgIChyZXMgfHwgKHJlcyA9IHt9KSlba2V5XSA9IGF0dHJzW2tleV07XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIHJlcztcclxufTtcclxuY29uc3QgZmlsdGVyTW9kZWxMaXN0ZW5lcnMgPSAoYXR0cnMsIHByb3BzKSA9PiB7XHJcbiAgICBjb25zdCByZXMgPSB7fTtcclxuICAgIGZvciAoY29uc3Qga2V5IGluIGF0dHJzKSB7XHJcbiAgICAgICAgaWYgKCFpc01vZGVsTGlzdGVuZXIoa2V5KSB8fCAhKGtleS5zbGljZSg5KSBpbiBwcm9wcykpIHtcclxuICAgICAgICAgICAgcmVzW2tleV0gPSBhdHRyc1trZXldO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiByZXM7XHJcbn07XHJcbmNvbnN0IGlzRWxlbWVudFJvb3QgPSAodm5vZGUpID0+IHtcclxuICAgIHJldHVybiAodm5vZGUuc2hhcGVGbGFnICYgKDYgLyogQ09NUE9ORU5UICovIHwgMSAvKiBFTEVNRU5UICovKSB8fFxyXG4gICAgICAgIHZub2RlLnR5cGUgPT09IENvbW1lbnQgLy8gcG90ZW50aWFsIHYtaWYgYnJhbmNoIHN3aXRjaFxyXG4gICAgKTtcclxufTtcclxuZnVuY3Rpb24gc2hvdWxkVXBkYXRlQ29tcG9uZW50KHByZXZWTm9kZSwgbmV4dFZOb2RlLCBvcHRpbWl6ZWQpIHtcclxuICAgIGNvbnN0IHsgcHJvcHM6IHByZXZQcm9wcywgY2hpbGRyZW46IHByZXZDaGlsZHJlbiwgY29tcG9uZW50IH0gPSBwcmV2Vk5vZGU7XHJcbiAgICBjb25zdCB7IHByb3BzOiBuZXh0UHJvcHMsIGNoaWxkcmVuOiBuZXh0Q2hpbGRyZW4sIHBhdGNoRmxhZyB9ID0gbmV4dFZOb2RlO1xyXG4gICAgY29uc3QgZW1pdHMgPSBjb21wb25lbnQuZW1pdHNPcHRpb25zO1xyXG4gICAgLy8gUGFyZW50IGNvbXBvbmVudCdzIHJlbmRlciBmdW5jdGlvbiB3YXMgaG90LXVwZGF0ZWQuIFNpbmNlIHRoaXMgbWF5IGhhdmVcclxuICAgIC8vIGNhdXNlZCB0aGUgY2hpbGQgY29tcG9uZW50J3Mgc2xvdHMgY29udGVudCB0byBoYXZlIGNoYW5nZWQsIHdlIG5lZWQgdG9cclxuICAgIC8vIGZvcmNlIHRoZSBjaGlsZCB0byB1cGRhdGUgYXMgd2VsbC5cclxuICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgJiYgKHByZXZDaGlsZHJlbiB8fCBuZXh0Q2hpbGRyZW4pICYmIGlzSG1yVXBkYXRpbmcpIHtcclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH1cclxuICAgIC8vIGZvcmNlIGNoaWxkIHVwZGF0ZSBmb3IgcnVudGltZSBkaXJlY3RpdmUgb3IgdHJhbnNpdGlvbiBvbiBjb21wb25lbnQgdm5vZGUuXHJcbiAgICBpZiAobmV4dFZOb2RlLmRpcnMgfHwgbmV4dFZOb2RlLnRyYW5zaXRpb24pIHtcclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH1cclxuICAgIGlmIChvcHRpbWl6ZWQgJiYgcGF0Y2hGbGFnID49IDApIHtcclxuICAgICAgICBpZiAocGF0Y2hGbGFnICYgMTAyNCAvKiBEWU5BTUlDX1NMT1RTICovKSB7XHJcbiAgICAgICAgICAgIC8vIHNsb3QgY29udGVudCB0aGF0IHJlZmVyZW5jZXMgdmFsdWVzIHRoYXQgbWlnaHQgaGF2ZSBjaGFuZ2VkLFxyXG4gICAgICAgICAgICAvLyBlLmcuIGluIGEgdi1mb3JcclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChwYXRjaEZsYWcgJiAxNiAvKiBGVUxMX1BST1BTICovKSB7XHJcbiAgICAgICAgICAgIGlmICghcHJldlByb3BzKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gISFuZXh0UHJvcHM7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy8gcHJlc2VuY2Ugb2YgdGhpcyBmbGFnIGluZGljYXRlcyBwcm9wcyBhcmUgYWx3YXlzIG5vbi1udWxsXHJcbiAgICAgICAgICAgIHJldHVybiBoYXNQcm9wc0NoYW5nZWQocHJldlByb3BzLCBuZXh0UHJvcHMsIGVtaXRzKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAocGF0Y2hGbGFnICYgOCAvKiBQUk9QUyAqLykge1xyXG4gICAgICAgICAgICBjb25zdCBkeW5hbWljUHJvcHMgPSBuZXh0Vk5vZGUuZHluYW1pY1Byb3BzO1xyXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGR5bmFtaWNQcm9wcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgY29uc3Qga2V5ID0gZHluYW1pY1Byb3BzW2ldO1xyXG4gICAgICAgICAgICAgICAgaWYgKG5leHRQcm9wc1trZXldICE9PSBwcmV2UHJvcHNba2V5XSAmJlxyXG4gICAgICAgICAgICAgICAgICAgICFpc0VtaXRMaXN0ZW5lcihlbWl0cywga2V5KSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgLy8gdGhpcyBwYXRoIGlzIG9ubHkgdGFrZW4gYnkgbWFudWFsbHkgd3JpdHRlbiByZW5kZXIgZnVuY3Rpb25zXHJcbiAgICAgICAgLy8gc28gcHJlc2VuY2Ugb2YgYW55IGNoaWxkcmVuIGxlYWRzIHRvIGEgZm9yY2VkIHVwZGF0ZVxyXG4gICAgICAgIGlmIChwcmV2Q2hpbGRyZW4gfHwgbmV4dENoaWxkcmVuKSB7XHJcbiAgICAgICAgICAgIGlmICghbmV4dENoaWxkcmVuIHx8ICFuZXh0Q2hpbGRyZW4uJHN0YWJsZSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHByZXZQcm9wcyA9PT0gbmV4dFByb3BzKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKCFwcmV2UHJvcHMpIHtcclxuICAgICAgICAgICAgcmV0dXJuICEhbmV4dFByb3BzO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoIW5leHRQcm9wcykge1xyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGhhc1Byb3BzQ2hhbmdlZChwcmV2UHJvcHMsIG5leHRQcm9wcywgZW1pdHMpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGZhbHNlO1xyXG59XHJcbmZ1bmN0aW9uIGhhc1Byb3BzQ2hhbmdlZChwcmV2UHJvcHMsIG5leHRQcm9wcywgZW1pdHNPcHRpb25zKSB7XHJcbiAgICBjb25zdCBuZXh0S2V5cyA9IE9iamVjdC5rZXlzKG5leHRQcm9wcyk7XHJcbiAgICBpZiAobmV4dEtleXMubGVuZ3RoICE9PSBPYmplY3Qua2V5cyhwcmV2UHJvcHMpLmxlbmd0aCkge1xyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfVxyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBuZXh0S2V5cy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgIGNvbnN0IGtleSA9IG5leHRLZXlzW2ldO1xyXG4gICAgICAgIGlmIChuZXh0UHJvcHNba2V5XSAhPT0gcHJldlByb3BzW2tleV0gJiZcclxuICAgICAgICAgICAgIWlzRW1pdExpc3RlbmVyKGVtaXRzT3B0aW9ucywga2V5KSkge1xyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gZmFsc2U7XHJcbn1cclxuZnVuY3Rpb24gdXBkYXRlSE9DSG9zdEVsKHsgdm5vZGUsIHBhcmVudCB9LCBlbCAvLyBIb3N0Tm9kZVxyXG4pIHtcclxuICAgIHdoaWxlIChwYXJlbnQgJiYgcGFyZW50LnN1YlRyZWUgPT09IHZub2RlKSB7XHJcbiAgICAgICAgKHZub2RlID0gcGFyZW50LnZub2RlKS5lbCA9IGVsO1xyXG4gICAgICAgIHBhcmVudCA9IHBhcmVudC5wYXJlbnQ7XHJcbiAgICB9XHJcbn1cblxuY29uc3QgaXNTdXNwZW5zZSA9ICh0eXBlKSA9PiB0eXBlLl9faXNTdXNwZW5zZTtcclxuLy8gU3VzcGVuc2UgZXhwb3NlcyBhIGNvbXBvbmVudC1saWtlIEFQSSwgYW5kIGlzIHRyZWF0ZWQgbGlrZSBhIGNvbXBvbmVudFxyXG4vLyBpbiB0aGUgY29tcGlsZXIsIGJ1dCBpbnRlcm5hbGx5IGl0J3MgYSBzcGVjaWFsIGJ1aWx0LWluIHR5cGUgdGhhdCBob29rc1xyXG4vLyBkaXJlY3RseSBpbnRvIHRoZSByZW5kZXJlci5cclxuY29uc3QgU3VzcGVuc2VJbXBsID0ge1xyXG4gICAgbmFtZTogJ1N1c3BlbnNlJyxcclxuICAgIC8vIEluIG9yZGVyIHRvIG1ha2UgU3VzcGVuc2UgdHJlZS1zaGFrYWJsZSwgd2UgbmVlZCB0byBhdm9pZCBpbXBvcnRpbmcgaXRcclxuICAgIC8vIGRpcmVjdGx5IGluIHRoZSByZW5kZXJlci4gVGhlIHJlbmRlcmVyIGNoZWNrcyBmb3IgdGhlIF9faXNTdXNwZW5zZSBmbGFnXHJcbiAgICAvLyBvbiBhIHZub2RlJ3MgdHlwZSBhbmQgY2FsbHMgdGhlIGBwcm9jZXNzYCBtZXRob2QsIHBhc3NpbmcgaW4gcmVuZGVyZXJcclxuICAgIC8vIGludGVybmFscy5cclxuICAgIF9faXNTdXNwZW5zZTogdHJ1ZSxcclxuICAgIHByb2Nlc3MobjEsIG4yLCBjb250YWluZXIsIGFuY2hvciwgcGFyZW50Q29tcG9uZW50LCBwYXJlbnRTdXNwZW5zZSwgaXNTVkcsIHNsb3RTY29wZUlkcywgb3B0aW1pemVkLCBcclxuICAgIC8vIHBsYXRmb3JtLXNwZWNpZmljIGltcGwgcGFzc2VkIGZyb20gcmVuZGVyZXJcclxuICAgIHJlbmRlcmVySW50ZXJuYWxzKSB7XHJcbiAgICAgICAgaWYgKG4xID09IG51bGwpIHtcclxuICAgICAgICAgICAgbW91bnRTdXNwZW5zZShuMiwgY29udGFpbmVyLCBhbmNob3IsIHBhcmVudENvbXBvbmVudCwgcGFyZW50U3VzcGVuc2UsIGlzU1ZHLCBzbG90U2NvcGVJZHMsIG9wdGltaXplZCwgcmVuZGVyZXJJbnRlcm5hbHMpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgcGF0Y2hTdXNwZW5zZShuMSwgbjIsIGNvbnRhaW5lciwgYW5jaG9yLCBwYXJlbnRDb21wb25lbnQsIGlzU1ZHLCBzbG90U2NvcGVJZHMsIG9wdGltaXplZCwgcmVuZGVyZXJJbnRlcm5hbHMpO1xyXG4gICAgICAgIH1cclxuICAgIH0sXHJcbiAgICBoeWRyYXRlOiBoeWRyYXRlU3VzcGVuc2UsXHJcbiAgICBjcmVhdGU6IGNyZWF0ZVN1c3BlbnNlQm91bmRhcnksXHJcbiAgICBub3JtYWxpemU6IG5vcm1hbGl6ZVN1c3BlbnNlQ2hpbGRyZW5cclxufTtcclxuLy8gRm9yY2UtY2FzdGVkIHB1YmxpYyB0eXBpbmcgZm9yIGggYW5kIFRTWCBwcm9wcyBpbmZlcmVuY2VcclxuY29uc3QgU3VzcGVuc2UgPSAoU3VzcGVuc2VJbXBsICk7XHJcbmZ1bmN0aW9uIHRyaWdnZXJFdmVudCh2bm9kZSwgbmFtZSkge1xyXG4gICAgY29uc3QgZXZlbnRMaXN0ZW5lciA9IHZub2RlLnByb3BzICYmIHZub2RlLnByb3BzW25hbWVdO1xyXG4gICAgaWYgKGlzRnVuY3Rpb24oZXZlbnRMaXN0ZW5lcikpIHtcclxuICAgICAgICBldmVudExpc3RlbmVyKCk7XHJcbiAgICB9XHJcbn1cclxuZnVuY3Rpb24gbW91bnRTdXNwZW5zZSh2bm9kZSwgY29udGFpbmVyLCBhbmNob3IsIHBhcmVudENvbXBvbmVudCwgcGFyZW50U3VzcGVuc2UsIGlzU1ZHLCBzbG90U2NvcGVJZHMsIG9wdGltaXplZCwgcmVuZGVyZXJJbnRlcm5hbHMpIHtcclxuICAgIGNvbnN0IHsgcDogcGF0Y2gsIG86IHsgY3JlYXRlRWxlbWVudCB9IH0gPSByZW5kZXJlckludGVybmFscztcclxuICAgIGNvbnN0IGhpZGRlbkNvbnRhaW5lciA9IGNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgY29uc3Qgc3VzcGVuc2UgPSAodm5vZGUuc3VzcGVuc2UgPSBjcmVhdGVTdXNwZW5zZUJvdW5kYXJ5KHZub2RlLCBwYXJlbnRTdXNwZW5zZSwgcGFyZW50Q29tcG9uZW50LCBjb250YWluZXIsIGhpZGRlbkNvbnRhaW5lciwgYW5jaG9yLCBpc1NWRywgc2xvdFNjb3BlSWRzLCBvcHRpbWl6ZWQsIHJlbmRlcmVySW50ZXJuYWxzKSk7XHJcbiAgICAvLyBzdGFydCBtb3VudGluZyB0aGUgY29udGVudCBzdWJ0cmVlIGluIGFuIG9mZi1kb20gY29udGFpbmVyXHJcbiAgICBwYXRjaChudWxsLCAoc3VzcGVuc2UucGVuZGluZ0JyYW5jaCA9IHZub2RlLnNzQ29udGVudCksIGhpZGRlbkNvbnRhaW5lciwgbnVsbCwgcGFyZW50Q29tcG9uZW50LCBzdXNwZW5zZSwgaXNTVkcsIHNsb3RTY29wZUlkcyk7XHJcbiAgICAvLyBub3cgY2hlY2sgaWYgd2UgaGF2ZSBlbmNvdW50ZXJlZCBhbnkgYXN5bmMgZGVwc1xyXG4gICAgaWYgKHN1c3BlbnNlLmRlcHMgPiAwKSB7XHJcbiAgICAgICAgLy8gaGFzIGFzeW5jXHJcbiAgICAgICAgLy8gaW52b2tlIEBmYWxsYmFjayBldmVudFxyXG4gICAgICAgIHRyaWdnZXJFdmVudCh2bm9kZSwgJ29uUGVuZGluZycpO1xyXG4gICAgICAgIHRyaWdnZXJFdmVudCh2bm9kZSwgJ29uRmFsbGJhY2snKTtcclxuICAgICAgICAvLyBtb3VudCB0aGUgZmFsbGJhY2sgdHJlZVxyXG4gICAgICAgIHBhdGNoKG51bGwsIHZub2RlLnNzRmFsbGJhY2ssIGNvbnRhaW5lciwgYW5jaG9yLCBwYXJlbnRDb21wb25lbnQsIG51bGwsIC8vIGZhbGxiYWNrIHRyZWUgd2lsbCBub3QgaGF2ZSBzdXNwZW5zZSBjb250ZXh0XHJcbiAgICAgICAgaXNTVkcsIHNsb3RTY29wZUlkcyk7XHJcbiAgICAgICAgc2V0QWN0aXZlQnJhbmNoKHN1c3BlbnNlLCB2bm9kZS5zc0ZhbGxiYWNrKTtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICAgIC8vIFN1c3BlbnNlIGhhcyBubyBhc3luYyBkZXBzLiBKdXN0IHJlc29sdmUuXHJcbiAgICAgICAgc3VzcGVuc2UucmVzb2x2ZSgpO1xyXG4gICAgfVxyXG59XHJcbmZ1bmN0aW9uIHBhdGNoU3VzcGVuc2UobjEsIG4yLCBjb250YWluZXIsIGFuY2hvciwgcGFyZW50Q29tcG9uZW50LCBpc1NWRywgc2xvdFNjb3BlSWRzLCBvcHRpbWl6ZWQsIHsgcDogcGF0Y2gsIHVtOiB1bm1vdW50LCBvOiB7IGNyZWF0ZUVsZW1lbnQgfSB9KSB7XHJcbiAgICBjb25zdCBzdXNwZW5zZSA9IChuMi5zdXNwZW5zZSA9IG4xLnN1c3BlbnNlKTtcclxuICAgIHN1c3BlbnNlLnZub2RlID0gbjI7XHJcbiAgICBuMi5lbCA9IG4xLmVsO1xyXG4gICAgY29uc3QgbmV3QnJhbmNoID0gbjIuc3NDb250ZW50O1xyXG4gICAgY29uc3QgbmV3RmFsbGJhY2sgPSBuMi5zc0ZhbGxiYWNrO1xyXG4gICAgY29uc3QgeyBhY3RpdmVCcmFuY2gsIHBlbmRpbmdCcmFuY2gsIGlzSW5GYWxsYmFjaywgaXNIeWRyYXRpbmcgfSA9IHN1c3BlbnNlO1xyXG4gICAgaWYgKHBlbmRpbmdCcmFuY2gpIHtcclxuICAgICAgICBzdXNwZW5zZS5wZW5kaW5nQnJhbmNoID0gbmV3QnJhbmNoO1xyXG4gICAgICAgIGlmIChpc1NhbWVWTm9kZVR5cGUobmV3QnJhbmNoLCBwZW5kaW5nQnJhbmNoKSkge1xyXG4gICAgICAgICAgICAvLyBzYW1lIHJvb3QgdHlwZSBidXQgY29udGVudCBtYXkgaGF2ZSBjaGFuZ2VkLlxyXG4gICAgICAgICAgICBwYXRjaChwZW5kaW5nQnJhbmNoLCBuZXdCcmFuY2gsIHN1c3BlbnNlLmhpZGRlbkNvbnRhaW5lciwgbnVsbCwgcGFyZW50Q29tcG9uZW50LCBzdXNwZW5zZSwgaXNTVkcsIHNsb3RTY29wZUlkcywgb3B0aW1pemVkKTtcclxuICAgICAgICAgICAgaWYgKHN1c3BlbnNlLmRlcHMgPD0gMCkge1xyXG4gICAgICAgICAgICAgICAgc3VzcGVuc2UucmVzb2x2ZSgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKGlzSW5GYWxsYmFjaykge1xyXG4gICAgICAgICAgICAgICAgcGF0Y2goYWN0aXZlQnJhbmNoLCBuZXdGYWxsYmFjaywgY29udGFpbmVyLCBhbmNob3IsIHBhcmVudENvbXBvbmVudCwgbnVsbCwgLy8gZmFsbGJhY2sgdHJlZSB3aWxsIG5vdCBoYXZlIHN1c3BlbnNlIGNvbnRleHRcclxuICAgICAgICAgICAgICAgIGlzU1ZHLCBzbG90U2NvcGVJZHMsIG9wdGltaXplZCk7XHJcbiAgICAgICAgICAgICAgICBzZXRBY3RpdmVCcmFuY2goc3VzcGVuc2UsIG5ld0ZhbGxiYWNrKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgLy8gdG9nZ2xlZCBiZWZvcmUgcGVuZGluZyB0cmVlIGlzIHJlc29sdmVkXHJcbiAgICAgICAgICAgIHN1c3BlbnNlLnBlbmRpbmdJZCsrO1xyXG4gICAgICAgICAgICBpZiAoaXNIeWRyYXRpbmcpIHtcclxuICAgICAgICAgICAgICAgIC8vIGlmIHRvZ2dsZWQgYmVmb3JlIGh5ZHJhdGlvbiBpcyBmaW5pc2hlZCwgdGhlIGN1cnJlbnQgRE9NIHRyZWUgaXNcclxuICAgICAgICAgICAgICAgIC8vIG5vIGxvbmdlciB2YWxpZC4gc2V0IGl0IGFzIHRoZSBhY3RpdmUgYnJhbmNoIHNvIGl0IHdpbGwgYmUgdW5tb3VudGVkXHJcbiAgICAgICAgICAgICAgICAvLyB3aGVuIHJlc29sdmVkXHJcbiAgICAgICAgICAgICAgICBzdXNwZW5zZS5pc0h5ZHJhdGluZyA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgc3VzcGVuc2UuYWN0aXZlQnJhbmNoID0gcGVuZGluZ0JyYW5jaDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHVubW91bnQocGVuZGluZ0JyYW5jaCwgcGFyZW50Q29tcG9uZW50LCBzdXNwZW5zZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy8gaW5jcmVtZW50IHBlbmRpbmcgSUQuIHRoaXMgaXMgdXNlZCB0byBpbnZhbGlkYXRlIGFzeW5jIGNhbGxiYWNrc1xyXG4gICAgICAgICAgICAvLyByZXNldCBzdXNwZW5zZSBzdGF0ZVxyXG4gICAgICAgICAgICBzdXNwZW5zZS5kZXBzID0gMDtcclxuICAgICAgICAgICAgLy8gZGlzY2FyZCBlZmZlY3RzIGZyb20gcGVuZGluZyBicmFuY2hcclxuICAgICAgICAgICAgc3VzcGVuc2UuZWZmZWN0cy5sZW5ndGggPSAwO1xyXG4gICAgICAgICAgICAvLyBkaXNjYXJkIHByZXZpb3VzIGNvbnRhaW5lclxyXG4gICAgICAgICAgICBzdXNwZW5zZS5oaWRkZW5Db250YWluZXIgPSBjcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICAgICAgaWYgKGlzSW5GYWxsYmFjaykge1xyXG4gICAgICAgICAgICAgICAgLy8gYWxyZWFkeSBpbiBmYWxsYmFjayBzdGF0ZVxyXG4gICAgICAgICAgICAgICAgcGF0Y2gobnVsbCwgbmV3QnJhbmNoLCBzdXNwZW5zZS5oaWRkZW5Db250YWluZXIsIG51bGwsIHBhcmVudENvbXBvbmVudCwgc3VzcGVuc2UsIGlzU1ZHLCBzbG90U2NvcGVJZHMsIG9wdGltaXplZCk7XHJcbiAgICAgICAgICAgICAgICBpZiAoc3VzcGVuc2UuZGVwcyA8PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc3VzcGVuc2UucmVzb2x2ZSgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcGF0Y2goYWN0aXZlQnJhbmNoLCBuZXdGYWxsYmFjaywgY29udGFpbmVyLCBhbmNob3IsIHBhcmVudENvbXBvbmVudCwgbnVsbCwgLy8gZmFsbGJhY2sgdHJlZSB3aWxsIG5vdCBoYXZlIHN1c3BlbnNlIGNvbnRleHRcclxuICAgICAgICAgICAgICAgICAgICBpc1NWRywgc2xvdFNjb3BlSWRzLCBvcHRpbWl6ZWQpO1xyXG4gICAgICAgICAgICAgICAgICAgIHNldEFjdGl2ZUJyYW5jaChzdXNwZW5zZSwgbmV3RmFsbGJhY2spO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKGFjdGl2ZUJyYW5jaCAmJiBpc1NhbWVWTm9kZVR5cGUobmV3QnJhbmNoLCBhY3RpdmVCcmFuY2gpKSB7XHJcbiAgICAgICAgICAgICAgICAvLyB0b2dnbGVkIFwiYmFja1wiIHRvIGN1cnJlbnQgYWN0aXZlIGJyYW5jaFxyXG4gICAgICAgICAgICAgICAgcGF0Y2goYWN0aXZlQnJhbmNoLCBuZXdCcmFuY2gsIGNvbnRhaW5lciwgYW5jaG9yLCBwYXJlbnRDb21wb25lbnQsIHN1c3BlbnNlLCBpc1NWRywgc2xvdFNjb3BlSWRzLCBvcHRpbWl6ZWQpO1xyXG4gICAgICAgICAgICAgICAgLy8gZm9yY2UgcmVzb2x2ZVxyXG4gICAgICAgICAgICAgICAgc3VzcGVuc2UucmVzb2x2ZSh0cnVlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIC8vIHN3aXRjaGVkIHRvIGEgM3JkIGJyYW5jaFxyXG4gICAgICAgICAgICAgICAgcGF0Y2gobnVsbCwgbmV3QnJhbmNoLCBzdXNwZW5zZS5oaWRkZW5Db250YWluZXIsIG51bGwsIHBhcmVudENvbXBvbmVudCwgc3VzcGVuc2UsIGlzU1ZHLCBzbG90U2NvcGVJZHMsIG9wdGltaXplZCk7XHJcbiAgICAgICAgICAgICAgICBpZiAoc3VzcGVuc2UuZGVwcyA8PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc3VzcGVuc2UucmVzb2x2ZSgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgaWYgKGFjdGl2ZUJyYW5jaCAmJiBpc1NhbWVWTm9kZVR5cGUobmV3QnJhbmNoLCBhY3RpdmVCcmFuY2gpKSB7XHJcbiAgICAgICAgICAgIC8vIHJvb3QgZGlkIG5vdCBjaGFuZ2UsIGp1c3Qgbm9ybWFsIHBhdGNoXHJcbiAgICAgICAgICAgIHBhdGNoKGFjdGl2ZUJyYW5jaCwgbmV3QnJhbmNoLCBjb250YWluZXIsIGFuY2hvciwgcGFyZW50Q29tcG9uZW50LCBzdXNwZW5zZSwgaXNTVkcsIHNsb3RTY29wZUlkcywgb3B0aW1pemVkKTtcclxuICAgICAgICAgICAgc2V0QWN0aXZlQnJhbmNoKHN1c3BlbnNlLCBuZXdCcmFuY2gpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgLy8gcm9vdCBub2RlIHRvZ2dsZWRcclxuICAgICAgICAgICAgLy8gaW52b2tlIEBwZW5kaW5nIGV2ZW50XHJcbiAgICAgICAgICAgIHRyaWdnZXJFdmVudChuMiwgJ29uUGVuZGluZycpO1xyXG4gICAgICAgICAgICAvLyBtb3VudCBwZW5kaW5nIGJyYW5jaCBpbiBvZmYtZG9tIGNvbnRhaW5lclxyXG4gICAgICAgICAgICBzdXNwZW5zZS5wZW5kaW5nQnJhbmNoID0gbmV3QnJhbmNoO1xyXG4gICAgICAgICAgICBzdXNwZW5zZS5wZW5kaW5nSWQrKztcclxuICAgICAgICAgICAgcGF0Y2gobnVsbCwgbmV3QnJhbmNoLCBzdXNwZW5zZS5oaWRkZW5Db250YWluZXIsIG51bGwsIHBhcmVudENvbXBvbmVudCwgc3VzcGVuc2UsIGlzU1ZHLCBzbG90U2NvcGVJZHMsIG9wdGltaXplZCk7XHJcbiAgICAgICAgICAgIGlmIChzdXNwZW5zZS5kZXBzIDw9IDApIHtcclxuICAgICAgICAgICAgICAgIC8vIGluY29taW5nIGJyYW5jaCBoYXMgbm8gYXN5bmMgZGVwcywgcmVzb2x2ZSBub3cuXHJcbiAgICAgICAgICAgICAgICBzdXNwZW5zZS5yZXNvbHZlKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCB7IHRpbWVvdXQsIHBlbmRpbmdJZCB9ID0gc3VzcGVuc2U7XHJcbiAgICAgICAgICAgICAgICBpZiAodGltZW91dCA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHN1c3BlbnNlLnBlbmRpbmdJZCA9PT0gcGVuZGluZ0lkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdXNwZW5zZS5mYWxsYmFjayhuZXdGYWxsYmFjayk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9LCB0aW1lb3V0KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKHRpbWVvdXQgPT09IDApIHtcclxuICAgICAgICAgICAgICAgICAgICBzdXNwZW5zZS5mYWxsYmFjayhuZXdGYWxsYmFjayk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxubGV0IGhhc1dhcm5lZCA9IGZhbHNlO1xyXG5mdW5jdGlvbiBjcmVhdGVTdXNwZW5zZUJvdW5kYXJ5KHZub2RlLCBwYXJlbnQsIHBhcmVudENvbXBvbmVudCwgY29udGFpbmVyLCBoaWRkZW5Db250YWluZXIsIGFuY2hvciwgaXNTVkcsIHNsb3RTY29wZUlkcywgb3B0aW1pemVkLCByZW5kZXJlckludGVybmFscywgaXNIeWRyYXRpbmcgPSBmYWxzZSkge1xyXG4gICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXHJcbiAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmICFmYWxzZSAmJiAhaGFzV2FybmVkKSB7XHJcbiAgICAgICAgaGFzV2FybmVkID0gdHJ1ZTtcclxuICAgICAgICAvLyBAdHMtaWdub3JlIGBjb25zb2xlLmluZm9gIGNhbm5vdCBiZSBudWxsIGVycm9yXHJcbiAgICAgICAgY29uc29sZVtjb25zb2xlLmluZm8gPyAnaW5mbycgOiAnbG9nJ10oYDxTdXNwZW5zZT4gaXMgYW4gZXhwZXJpbWVudGFsIGZlYXR1cmUgYW5kIGl0cyBBUEkgd2lsbCBsaWtlbHkgY2hhbmdlLmApO1xyXG4gICAgfVxyXG4gICAgY29uc3QgeyBwOiBwYXRjaCwgbTogbW92ZSwgdW06IHVubW91bnQsIG46IG5leHQsIG86IHsgcGFyZW50Tm9kZSwgcmVtb3ZlIH0gfSA9IHJlbmRlcmVySW50ZXJuYWxzO1xyXG4gICAgY29uc3QgdGltZW91dCA9IHRvTnVtYmVyKHZub2RlLnByb3BzICYmIHZub2RlLnByb3BzLnRpbWVvdXQpO1xyXG4gICAgY29uc3Qgc3VzcGVuc2UgPSB7XHJcbiAgICAgICAgdm5vZGUsXHJcbiAgICAgICAgcGFyZW50LFxyXG4gICAgICAgIHBhcmVudENvbXBvbmVudCxcclxuICAgICAgICBpc1NWRyxcclxuICAgICAgICBjb250YWluZXIsXHJcbiAgICAgICAgaGlkZGVuQ29udGFpbmVyLFxyXG4gICAgICAgIGFuY2hvcixcclxuICAgICAgICBkZXBzOiAwLFxyXG4gICAgICAgIHBlbmRpbmdJZDogMCxcclxuICAgICAgICB0aW1lb3V0OiB0eXBlb2YgdGltZW91dCA9PT0gJ251bWJlcicgPyB0aW1lb3V0IDogLTEsXHJcbiAgICAgICAgYWN0aXZlQnJhbmNoOiBudWxsLFxyXG4gICAgICAgIHBlbmRpbmdCcmFuY2g6IG51bGwsXHJcbiAgICAgICAgaXNJbkZhbGxiYWNrOiB0cnVlLFxyXG4gICAgICAgIGlzSHlkcmF0aW5nLFxyXG4gICAgICAgIGlzVW5tb3VudGVkOiBmYWxzZSxcclxuICAgICAgICBlZmZlY3RzOiBbXSxcclxuICAgICAgICByZXNvbHZlKHJlc3VtZSA9IGZhbHNlKSB7XHJcbiAgICAgICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykpIHtcclxuICAgICAgICAgICAgICAgIGlmICghcmVzdW1lICYmICFzdXNwZW5zZS5wZW5kaW5nQnJhbmNoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBzdXNwZW5zZS5yZXNvbHZlKCkgaXMgY2FsbGVkIHdpdGhvdXQgYSBwZW5kaW5nIGJyYW5jaC5gKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmIChzdXNwZW5zZS5pc1VubW91bnRlZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgc3VzcGVuc2UucmVzb2x2ZSgpIGlzIGNhbGxlZCBvbiBhbiBhbHJlYWR5IHVubW91bnRlZCBzdXNwZW5zZSBib3VuZGFyeS5gKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjb25zdCB7IHZub2RlLCBhY3RpdmVCcmFuY2gsIHBlbmRpbmdCcmFuY2gsIHBlbmRpbmdJZCwgZWZmZWN0cywgcGFyZW50Q29tcG9uZW50LCBjb250YWluZXIgfSA9IHN1c3BlbnNlO1xyXG4gICAgICAgICAgICBpZiAoc3VzcGVuc2UuaXNIeWRyYXRpbmcpIHtcclxuICAgICAgICAgICAgICAgIHN1c3BlbnNlLmlzSHlkcmF0aW5nID0gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSBpZiAoIXJlc3VtZSkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgZGVsYXlFbnRlciA9IGFjdGl2ZUJyYW5jaCAmJlxyXG4gICAgICAgICAgICAgICAgICAgIHBlbmRpbmdCcmFuY2gudHJhbnNpdGlvbiAmJlxyXG4gICAgICAgICAgICAgICAgICAgIHBlbmRpbmdCcmFuY2gudHJhbnNpdGlvbi5tb2RlID09PSAnb3V0LWluJztcclxuICAgICAgICAgICAgICAgIGlmIChkZWxheUVudGVyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYWN0aXZlQnJhbmNoLnRyYW5zaXRpb24uYWZ0ZXJMZWF2ZSA9ICgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBlbmRpbmdJZCA9PT0gc3VzcGVuc2UucGVuZGluZ0lkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3ZlKHBlbmRpbmdCcmFuY2gsIGNvbnRhaW5lciwgYW5jaG9yLCAwIC8qIEVOVEVSICovKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAvLyB0aGlzIGlzIGluaXRpYWwgYW5jaG9yIG9uIG1vdW50XHJcbiAgICAgICAgICAgICAgICBsZXQgeyBhbmNob3IgfSA9IHN1c3BlbnNlO1xyXG4gICAgICAgICAgICAgICAgLy8gdW5tb3VudCBjdXJyZW50IGFjdGl2ZSB0cmVlXHJcbiAgICAgICAgICAgICAgICBpZiAoYWN0aXZlQnJhbmNoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gaWYgdGhlIGZhbGxiYWNrIHRyZWUgd2FzIG1vdW50ZWQsIGl0IG1heSBoYXZlIGJlZW4gbW92ZWRcclxuICAgICAgICAgICAgICAgICAgICAvLyBhcyBwYXJ0IG9mIGEgcGFyZW50IHN1c3BlbnNlLiBnZXQgdGhlIGxhdGVzdCBhbmNob3IgZm9yIGluc2VydGlvblxyXG4gICAgICAgICAgICAgICAgICAgIGFuY2hvciA9IG5leHQoYWN0aXZlQnJhbmNoKTtcclxuICAgICAgICAgICAgICAgICAgICB1bm1vdW50KGFjdGl2ZUJyYW5jaCwgcGFyZW50Q29tcG9uZW50LCBzdXNwZW5zZSwgdHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAoIWRlbGF5RW50ZXIpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBtb3ZlIGNvbnRlbnQgZnJvbSBvZmYtZG9tIGNvbnRhaW5lciB0byBhY3R1YWwgY29udGFpbmVyXHJcbiAgICAgICAgICAgICAgICAgICAgbW92ZShwZW5kaW5nQnJhbmNoLCBjb250YWluZXIsIGFuY2hvciwgMCAvKiBFTlRFUiAqLyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgc2V0QWN0aXZlQnJhbmNoKHN1c3BlbnNlLCBwZW5kaW5nQnJhbmNoKTtcclxuICAgICAgICAgICAgc3VzcGVuc2UucGVuZGluZ0JyYW5jaCA9IG51bGw7XHJcbiAgICAgICAgICAgIHN1c3BlbnNlLmlzSW5GYWxsYmFjayA9IGZhbHNlO1xyXG4gICAgICAgICAgICAvLyBmbHVzaCBidWZmZXJlZCBlZmZlY3RzXHJcbiAgICAgICAgICAgIC8vIGNoZWNrIGlmIHRoZXJlIGlzIGEgcGVuZGluZyBwYXJlbnQgc3VzcGVuc2VcclxuICAgICAgICAgICAgbGV0IHBhcmVudCA9IHN1c3BlbnNlLnBhcmVudDtcclxuICAgICAgICAgICAgbGV0IGhhc1VucmVzb2x2ZWRBbmNlc3RvciA9IGZhbHNlO1xyXG4gICAgICAgICAgICB3aGlsZSAocGFyZW50KSB7XHJcbiAgICAgICAgICAgICAgICBpZiAocGFyZW50LnBlbmRpbmdCcmFuY2gpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBmb3VuZCBhIHBlbmRpbmcgcGFyZW50IHN1c3BlbnNlLCBtZXJnZSBidWZmZXJlZCBwb3N0IGpvYnNcclxuICAgICAgICAgICAgICAgICAgICAvLyBpbnRvIHRoYXQgcGFyZW50XHJcbiAgICAgICAgICAgICAgICAgICAgcGFyZW50LmVmZmVjdHMucHVzaCguLi5lZmZlY3RzKTtcclxuICAgICAgICAgICAgICAgICAgICBoYXNVbnJlc29sdmVkQW5jZXN0b3IgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcGFyZW50ID0gcGFyZW50LnBhcmVudDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyBubyBwZW5kaW5nIHBhcmVudCBzdXNwZW5zZSwgZmx1c2ggYWxsIGpvYnNcclxuICAgICAgICAgICAgaWYgKCFoYXNVbnJlc29sdmVkQW5jZXN0b3IpIHtcclxuICAgICAgICAgICAgICAgIHF1ZXVlUG9zdEZsdXNoQ2IoZWZmZWN0cyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgc3VzcGVuc2UuZWZmZWN0cyA9IFtdO1xyXG4gICAgICAgICAgICAvLyBpbnZva2UgQHJlc29sdmUgZXZlbnRcclxuICAgICAgICAgICAgdHJpZ2dlckV2ZW50KHZub2RlLCAnb25SZXNvbHZlJyk7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBmYWxsYmFjayhmYWxsYmFja1ZOb2RlKSB7XHJcbiAgICAgICAgICAgIGlmICghc3VzcGVuc2UucGVuZGluZ0JyYW5jaCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNvbnN0IHsgdm5vZGUsIGFjdGl2ZUJyYW5jaCwgcGFyZW50Q29tcG9uZW50LCBjb250YWluZXIsIGlzU1ZHIH0gPSBzdXNwZW5zZTtcclxuICAgICAgICAgICAgLy8gaW52b2tlIEBmYWxsYmFjayBldmVudFxyXG4gICAgICAgICAgICB0cmlnZ2VyRXZlbnQodm5vZGUsICdvbkZhbGxiYWNrJyk7XHJcbiAgICAgICAgICAgIGNvbnN0IGFuY2hvciA9IG5leHQoYWN0aXZlQnJhbmNoKTtcclxuICAgICAgICAgICAgY29uc3QgbW91bnRGYWxsYmFjayA9ICgpID0+IHtcclxuICAgICAgICAgICAgICAgIGlmICghc3VzcGVuc2UuaXNJbkZhbGxiYWNrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgLy8gbW91bnQgdGhlIGZhbGxiYWNrIHRyZWVcclxuICAgICAgICAgICAgICAgIHBhdGNoKG51bGwsIGZhbGxiYWNrVk5vZGUsIGNvbnRhaW5lciwgYW5jaG9yLCBwYXJlbnRDb21wb25lbnQsIG51bGwsIC8vIGZhbGxiYWNrIHRyZWUgd2lsbCBub3QgaGF2ZSBzdXNwZW5zZSBjb250ZXh0XHJcbiAgICAgICAgICAgICAgICBpc1NWRywgc2xvdFNjb3BlSWRzLCBvcHRpbWl6ZWQpO1xyXG4gICAgICAgICAgICAgICAgc2V0QWN0aXZlQnJhbmNoKHN1c3BlbnNlLCBmYWxsYmFja1ZOb2RlKTtcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgY29uc3QgZGVsYXlFbnRlciA9IGZhbGxiYWNrVk5vZGUudHJhbnNpdGlvbiAmJiBmYWxsYmFja1ZOb2RlLnRyYW5zaXRpb24ubW9kZSA9PT0gJ291dC1pbic7XHJcbiAgICAgICAgICAgIGlmIChkZWxheUVudGVyKSB7XHJcbiAgICAgICAgICAgICAgICBhY3RpdmVCcmFuY2gudHJhbnNpdGlvbi5hZnRlckxlYXZlID0gbW91bnRGYWxsYmFjaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBzdXNwZW5zZS5pc0luRmFsbGJhY2sgPSB0cnVlO1xyXG4gICAgICAgICAgICAvLyB1bm1vdW50IGN1cnJlbnQgYWN0aXZlIGJyYW5jaFxyXG4gICAgICAgICAgICB1bm1vdW50KGFjdGl2ZUJyYW5jaCwgcGFyZW50Q29tcG9uZW50LCBudWxsLCAvLyBubyBzdXNwZW5zZSBzbyB1bm1vdW50IGhvb2tzIGZpcmUgbm93XHJcbiAgICAgICAgICAgIHRydWUgLy8gc2hvdWxkUmVtb3ZlXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIGlmICghZGVsYXlFbnRlcikge1xyXG4gICAgICAgICAgICAgICAgbW91bnRGYWxsYmFjaygpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuICAgICAgICBtb3ZlKGNvbnRhaW5lciwgYW5jaG9yLCB0eXBlKSB7XHJcbiAgICAgICAgICAgIHN1c3BlbnNlLmFjdGl2ZUJyYW5jaCAmJlxyXG4gICAgICAgICAgICAgICAgbW92ZShzdXNwZW5zZS5hY3RpdmVCcmFuY2gsIGNvbnRhaW5lciwgYW5jaG9yLCB0eXBlKTtcclxuICAgICAgICAgICAgc3VzcGVuc2UuY29udGFpbmVyID0gY29udGFpbmVyO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgbmV4dCgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHN1c3BlbnNlLmFjdGl2ZUJyYW5jaCAmJiBuZXh0KHN1c3BlbnNlLmFjdGl2ZUJyYW5jaCk7XHJcbiAgICAgICAgfSxcclxuICAgICAgICByZWdpc3RlckRlcChpbnN0YW5jZSwgc2V0dXBSZW5kZXJFZmZlY3QpIHtcclxuICAgICAgICAgICAgY29uc3QgaXNJblBlbmRpbmdTdXNwZW5zZSA9ICEhc3VzcGVuc2UucGVuZGluZ0JyYW5jaDtcclxuICAgICAgICAgICAgaWYgKGlzSW5QZW5kaW5nU3VzcGVuc2UpIHtcclxuICAgICAgICAgICAgICAgIHN1c3BlbnNlLmRlcHMrKztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjb25zdCBoeWRyYXRlZEVsID0gaW5zdGFuY2Uudm5vZGUuZWw7XHJcbiAgICAgICAgICAgIGluc3RhbmNlXHJcbiAgICAgICAgICAgICAgICAuYXN5bmNEZXAuY2F0Y2goZXJyID0+IHtcclxuICAgICAgICAgICAgICAgIGhhbmRsZUVycm9yKGVyciwgaW5zdGFuY2UsIDAgLyogU0VUVVBfRlVOQ1RJT04gKi8pO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgLnRoZW4oYXN5bmNTZXR1cFJlc3VsdCA9PiB7XHJcbiAgICAgICAgICAgICAgICAvLyByZXRyeSB3aGVuIHRoZSBzZXR1cCgpIHByb21pc2UgcmVzb2x2ZXMuXHJcbiAgICAgICAgICAgICAgICAvLyBjb21wb25lbnQgbWF5IGhhdmUgYmVlbiB1bm1vdW50ZWQgYmVmb3JlIHJlc29sdmUuXHJcbiAgICAgICAgICAgICAgICBpZiAoaW5zdGFuY2UuaXNVbm1vdW50ZWQgfHxcclxuICAgICAgICAgICAgICAgICAgICBzdXNwZW5zZS5pc1VubW91bnRlZCB8fFxyXG4gICAgICAgICAgICAgICAgICAgIHN1c3BlbnNlLnBlbmRpbmdJZCAhPT0gaW5zdGFuY2Uuc3VzcGVuc2VJZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIC8vIHJldHJ5IGZyb20gdGhpcyBjb21wb25lbnRcclxuICAgICAgICAgICAgICAgIGluc3RhbmNlLmFzeW5jUmVzb2x2ZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgeyB2bm9kZSB9ID0gaW5zdGFuY2U7XHJcbiAgICAgICAgICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcHVzaFdhcm5pbmdDb250ZXh0KHZub2RlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGhhbmRsZVNldHVwUmVzdWx0KGluc3RhbmNlLCBhc3luY1NldHVwUmVzdWx0LCBmYWxzZSk7XHJcbiAgICAgICAgICAgICAgICBpZiAoaHlkcmF0ZWRFbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIHZub2RlIG1heSBoYXZlIGJlZW4gcmVwbGFjZWQgaWYgYW4gdXBkYXRlIGhhcHBlbmVkIGJlZm9yZSB0aGVcclxuICAgICAgICAgICAgICAgICAgICAvLyBhc3luYyBkZXAgaXMgcmVzb2x2ZWQuXHJcbiAgICAgICAgICAgICAgICAgICAgdm5vZGUuZWwgPSBoeWRyYXRlZEVsO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgY29uc3QgcGxhY2Vob2xkZXIgPSAhaHlkcmF0ZWRFbCAmJiBpbnN0YW5jZS5zdWJUcmVlLmVsO1xyXG4gICAgICAgICAgICAgICAgc2V0dXBSZW5kZXJFZmZlY3QoaW5zdGFuY2UsIHZub2RlLCBcclxuICAgICAgICAgICAgICAgIC8vIGNvbXBvbmVudCBtYXkgaGF2ZSBiZWVuIG1vdmVkIGJlZm9yZSByZXNvbHZlLlxyXG4gICAgICAgICAgICAgICAgLy8gaWYgdGhpcyBpcyBub3QgYSBoeWRyYXRpb24sIGluc3RhbmNlLnN1YlRyZWUgd2lsbCBiZSB0aGUgY29tbWVudFxyXG4gICAgICAgICAgICAgICAgLy8gcGxhY2Vob2xkZXIuXHJcbiAgICAgICAgICAgICAgICBwYXJlbnROb2RlKGh5ZHJhdGVkRWwgfHwgaW5zdGFuY2Uuc3ViVHJlZS5lbCksIFxyXG4gICAgICAgICAgICAgICAgLy8gYW5jaG9yIHdpbGwgbm90IGJlIHVzZWQgaWYgdGhpcyBpcyBoeWRyYXRpb24sIHNvIG9ubHkgbmVlZCB0b1xyXG4gICAgICAgICAgICAgICAgLy8gY29uc2lkZXIgdGhlIGNvbW1lbnQgcGxhY2Vob2xkZXIgY2FzZS5cclxuICAgICAgICAgICAgICAgIGh5ZHJhdGVkRWwgPyBudWxsIDogbmV4dChpbnN0YW5jZS5zdWJUcmVlKSwgc3VzcGVuc2UsIGlzU1ZHLCBvcHRpbWl6ZWQpO1xyXG4gICAgICAgICAgICAgICAgaWYgKHBsYWNlaG9sZGVyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVtb3ZlKHBsYWNlaG9sZGVyKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHVwZGF0ZUhPQ0hvc3RFbChpbnN0YW5jZSwgdm5vZGUuZWwpO1xyXG4gICAgICAgICAgICAgICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHBvcFdhcm5pbmdDb250ZXh0KCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAvLyBvbmx5IGRlY3JlYXNlIGRlcHMgY291bnQgaWYgc3VzcGVuc2UgaXMgbm90IGFscmVhZHkgcmVzb2x2ZWRcclxuICAgICAgICAgICAgICAgIGlmIChpc0luUGVuZGluZ1N1c3BlbnNlICYmIC0tc3VzcGVuc2UuZGVwcyA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHN1c3BlbnNlLnJlc29sdmUoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSxcclxuICAgICAgICB1bm1vdW50KHBhcmVudFN1c3BlbnNlLCBkb1JlbW92ZSkge1xyXG4gICAgICAgICAgICBzdXNwZW5zZS5pc1VubW91bnRlZCA9IHRydWU7XHJcbiAgICAgICAgICAgIGlmIChzdXNwZW5zZS5hY3RpdmVCcmFuY2gpIHtcclxuICAgICAgICAgICAgICAgIHVubW91bnQoc3VzcGVuc2UuYWN0aXZlQnJhbmNoLCBwYXJlbnRDb21wb25lbnQsIHBhcmVudFN1c3BlbnNlLCBkb1JlbW92ZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKHN1c3BlbnNlLnBlbmRpbmdCcmFuY2gpIHtcclxuICAgICAgICAgICAgICAgIHVubW91bnQoc3VzcGVuc2UucGVuZGluZ0JyYW5jaCwgcGFyZW50Q29tcG9uZW50LCBwYXJlbnRTdXNwZW5zZSwgZG9SZW1vdmUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIHJldHVybiBzdXNwZW5zZTtcclxufVxyXG5mdW5jdGlvbiBoeWRyYXRlU3VzcGVuc2Uobm9kZSwgdm5vZGUsIHBhcmVudENvbXBvbmVudCwgcGFyZW50U3VzcGVuc2UsIGlzU1ZHLCBzbG90U2NvcGVJZHMsIG9wdGltaXplZCwgcmVuZGVyZXJJbnRlcm5hbHMsIGh5ZHJhdGVOb2RlKSB7XHJcbiAgICAvKiBlc2xpbnQtZGlzYWJsZSBuby1yZXN0cmljdGVkLWdsb2JhbHMgKi9cclxuICAgIGNvbnN0IHN1c3BlbnNlID0gKHZub2RlLnN1c3BlbnNlID0gY3JlYXRlU3VzcGVuc2VCb3VuZGFyeSh2bm9kZSwgcGFyZW50U3VzcGVuc2UsIHBhcmVudENvbXBvbmVudCwgbm9kZS5wYXJlbnROb2RlLCBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKSwgbnVsbCwgaXNTVkcsIHNsb3RTY29wZUlkcywgb3B0aW1pemVkLCByZW5kZXJlckludGVybmFscywgdHJ1ZSAvKiBoeWRyYXRpbmcgKi8pKTtcclxuICAgIC8vIHRoZXJlIGFyZSB0d28gcG9zc2libGUgc2NlbmFyaW9zIGZvciBzZXJ2ZXItcmVuZGVyZWQgc3VzcGVuc2U6XHJcbiAgICAvLyAtIHN1Y2Nlc3M6IHNzciBjb250ZW50IHNob3VsZCBiZSBmdWxseSByZXNvbHZlZFxyXG4gICAgLy8gLSBmYWlsdXJlOiBzc3IgY29udGVudCBzaG91bGQgYmUgdGhlIGZhbGxiYWNrIGJyYW5jaC5cclxuICAgIC8vIGhvd2V2ZXIsIG9uIHRoZSBjbGllbnQgd2UgZG9uJ3QgcmVhbGx5IGtub3cgaWYgaXQgaGFzIGZhaWxlZCBvciBub3RcclxuICAgIC8vIGF0dGVtcHQgdG8gaHlkcmF0ZSB0aGUgRE9NIGFzc3VtaW5nIGl0IGhhcyBzdWNjZWVkZWQsIGJ1dCB3ZSBzdGlsbFxyXG4gICAgLy8gbmVlZCB0byBjb25zdHJ1Y3QgYSBzdXNwZW5zZSBib3VuZGFyeSBmaXJzdFxyXG4gICAgY29uc3QgcmVzdWx0ID0gaHlkcmF0ZU5vZGUobm9kZSwgKHN1c3BlbnNlLnBlbmRpbmdCcmFuY2ggPSB2bm9kZS5zc0NvbnRlbnQpLCBwYXJlbnRDb21wb25lbnQsIHN1c3BlbnNlLCBzbG90U2NvcGVJZHMsIG9wdGltaXplZCk7XHJcbiAgICBpZiAoc3VzcGVuc2UuZGVwcyA9PT0gMCkge1xyXG4gICAgICAgIHN1c3BlbnNlLnJlc29sdmUoKTtcclxuICAgIH1cclxuICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICAvKiBlc2xpbnQtZW5hYmxlIG5vLXJlc3RyaWN0ZWQtZ2xvYmFscyAqL1xyXG59XHJcbmZ1bmN0aW9uIG5vcm1hbGl6ZVN1c3BlbnNlQ2hpbGRyZW4odm5vZGUpIHtcclxuICAgIGNvbnN0IHsgc2hhcGVGbGFnLCBjaGlsZHJlbiB9ID0gdm5vZGU7XHJcbiAgICBjb25zdCBpc1Nsb3RDaGlsZHJlbiA9IHNoYXBlRmxhZyAmIDMyIC8qIFNMT1RTX0NISUxEUkVOICovO1xyXG4gICAgdm5vZGUuc3NDb250ZW50ID0gbm9ybWFsaXplU3VzcGVuc2VTbG90KGlzU2xvdENoaWxkcmVuID8gY2hpbGRyZW4uZGVmYXVsdCA6IGNoaWxkcmVuKTtcclxuICAgIHZub2RlLnNzRmFsbGJhY2sgPSBpc1Nsb3RDaGlsZHJlblxyXG4gICAgICAgID8gbm9ybWFsaXplU3VzcGVuc2VTbG90KGNoaWxkcmVuLmZhbGxiYWNrKVxyXG4gICAgICAgIDogY3JlYXRlVk5vZGUoQ29tbWVudCk7XHJcbn1cclxuZnVuY3Rpb24gbm9ybWFsaXplU3VzcGVuc2VTbG90KHMpIHtcclxuICAgIGxldCBibG9jaztcclxuICAgIGlmIChpc0Z1bmN0aW9uKHMpKSB7XHJcbiAgICAgICAgY29uc3QgdHJhY2tCbG9jayA9IGlzQmxvY2tUcmVlRW5hYmxlZCAmJiBzLl9jO1xyXG4gICAgICAgIGlmICh0cmFja0Jsb2NrKSB7XHJcbiAgICAgICAgICAgIC8vIGRpc2FibGVUcmFja2luZzogZmFsc2VcclxuICAgICAgICAgICAgLy8gYWxsb3cgYmxvY2sgdHJhY2tpbmcgZm9yIGNvbXBpbGVkIHNsb3RzXHJcbiAgICAgICAgICAgIC8vIChzZWUgLi9jb21wb25lbnRSZW5kZXJDb250ZXh0LnRzKVxyXG4gICAgICAgICAgICBzLl9kID0gZmFsc2U7XHJcbiAgICAgICAgICAgIG9wZW5CbG9jaygpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBzID0gcygpO1xyXG4gICAgICAgIGlmICh0cmFja0Jsb2NrKSB7XHJcbiAgICAgICAgICAgIHMuX2QgPSB0cnVlO1xyXG4gICAgICAgICAgICBibG9jayA9IGN1cnJlbnRCbG9jaztcclxuICAgICAgICAgICAgY2xvc2VCbG9jaygpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGlmIChpc0FycmF5KHMpKSB7XHJcbiAgICAgICAgY29uc3Qgc2luZ2xlQ2hpbGQgPSBmaWx0ZXJTaW5nbGVSb290KHMpO1xyXG4gICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgJiYgIXNpbmdsZUNoaWxkKSB7XHJcbiAgICAgICAgICAgIHdhcm4oYDxTdXNwZW5zZT4gc2xvdHMgZXhwZWN0IGEgc2luZ2xlIHJvb3Qgbm9kZS5gKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcyA9IHNpbmdsZUNoaWxkO1xyXG4gICAgfVxyXG4gICAgcyA9IG5vcm1hbGl6ZVZOb2RlKHMpO1xyXG4gICAgaWYgKGJsb2NrICYmICFzLmR5bmFtaWNDaGlsZHJlbikge1xyXG4gICAgICAgIHMuZHluYW1pY0NoaWxkcmVuID0gYmxvY2suZmlsdGVyKGMgPT4gYyAhPT0gcyk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gcztcclxufVxyXG5mdW5jdGlvbiBxdWV1ZUVmZmVjdFdpdGhTdXNwZW5zZShmbiwgc3VzcGVuc2UpIHtcclxuICAgIGlmIChzdXNwZW5zZSAmJiBzdXNwZW5zZS5wZW5kaW5nQnJhbmNoKSB7XHJcbiAgICAgICAgaWYgKGlzQXJyYXkoZm4pKSB7XHJcbiAgICAgICAgICAgIHN1c3BlbnNlLmVmZmVjdHMucHVzaCguLi5mbik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBzdXNwZW5zZS5lZmZlY3RzLnB1c2goZm4pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICAgIHF1ZXVlUG9zdEZsdXNoQ2IoZm4pO1xyXG4gICAgfVxyXG59XHJcbmZ1bmN0aW9uIHNldEFjdGl2ZUJyYW5jaChzdXNwZW5zZSwgYnJhbmNoKSB7XHJcbiAgICBzdXNwZW5zZS5hY3RpdmVCcmFuY2ggPSBicmFuY2g7XHJcbiAgICBjb25zdCB7IHZub2RlLCBwYXJlbnRDb21wb25lbnQgfSA9IHN1c3BlbnNlO1xyXG4gICAgY29uc3QgZWwgPSAodm5vZGUuZWwgPSBicmFuY2guZWwpO1xyXG4gICAgLy8gaW4gY2FzZSBzdXNwZW5zZSBpcyB0aGUgcm9vdCBub2RlIG9mIGEgY29tcG9uZW50LFxyXG4gICAgLy8gcmVjdXJzaXZlbHkgdXBkYXRlIHRoZSBIT0MgZWxcclxuICAgIGlmIChwYXJlbnRDb21wb25lbnQgJiYgcGFyZW50Q29tcG9uZW50LnN1YlRyZWUgPT09IHZub2RlKSB7XHJcbiAgICAgICAgcGFyZW50Q29tcG9uZW50LnZub2RlLmVsID0gZWw7XHJcbiAgICAgICAgdXBkYXRlSE9DSG9zdEVsKHBhcmVudENvbXBvbmVudCwgZWwpO1xyXG4gICAgfVxyXG59XG5cbmZ1bmN0aW9uIHByb3ZpZGUoa2V5LCB2YWx1ZSkge1xyXG4gICAgaWYgKCFjdXJyZW50SW5zdGFuY2UpIHtcclxuICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpKSB7XHJcbiAgICAgICAgICAgIHdhcm4oYHByb3ZpZGUoKSBjYW4gb25seSBiZSB1c2VkIGluc2lkZSBzZXR1cCgpLmApO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICAgIGxldCBwcm92aWRlcyA9IGN1cnJlbnRJbnN0YW5jZS5wcm92aWRlcztcclxuICAgICAgICAvLyBieSBkZWZhdWx0IGFuIGluc3RhbmNlIGluaGVyaXRzIGl0cyBwYXJlbnQncyBwcm92aWRlcyBvYmplY3RcclxuICAgICAgICAvLyBidXQgd2hlbiBpdCBuZWVkcyB0byBwcm92aWRlIHZhbHVlcyBvZiBpdHMgb3duLCBpdCBjcmVhdGVzIGl0c1xyXG4gICAgICAgIC8vIG93biBwcm92aWRlcyBvYmplY3QgdXNpbmcgcGFyZW50IHByb3ZpZGVzIG9iamVjdCBhcyBwcm90b3R5cGUuXHJcbiAgICAgICAgLy8gdGhpcyB3YXkgaW4gYGluamVjdGAgd2UgY2FuIHNpbXBseSBsb29rIHVwIGluamVjdGlvbnMgZnJvbSBkaXJlY3RcclxuICAgICAgICAvLyBwYXJlbnQgYW5kIGxldCB0aGUgcHJvdG90eXBlIGNoYWluIGRvIHRoZSB3b3JrLlxyXG4gICAgICAgIGNvbnN0IHBhcmVudFByb3ZpZGVzID0gY3VycmVudEluc3RhbmNlLnBhcmVudCAmJiBjdXJyZW50SW5zdGFuY2UucGFyZW50LnByb3ZpZGVzO1xyXG4gICAgICAgIGlmIChwYXJlbnRQcm92aWRlcyA9PT0gcHJvdmlkZXMpIHtcclxuICAgICAgICAgICAgcHJvdmlkZXMgPSBjdXJyZW50SW5zdGFuY2UucHJvdmlkZXMgPSBPYmplY3QuY3JlYXRlKHBhcmVudFByb3ZpZGVzKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gVFMgZG9lc24ndCBhbGxvdyBzeW1ib2wgYXMgaW5kZXggdHlwZVxyXG4gICAgICAgIHByb3ZpZGVzW2tleV0gPSB2YWx1ZTtcclxuICAgIH1cclxufVxyXG5mdW5jdGlvbiBpbmplY3Qoa2V5LCBkZWZhdWx0VmFsdWUsIHRyZWF0RGVmYXVsdEFzRmFjdG9yeSA9IGZhbHNlKSB7XHJcbiAgICAvLyBmYWxsYmFjayB0byBgY3VycmVudFJlbmRlcmluZ0luc3RhbmNlYCBzbyB0aGF0IHRoaXMgY2FuIGJlIGNhbGxlZCBpblxyXG4gICAgLy8gYSBmdW5jdGlvbmFsIGNvbXBvbmVudFxyXG4gICAgY29uc3QgaW5zdGFuY2UgPSBjdXJyZW50SW5zdGFuY2UgfHwgY3VycmVudFJlbmRlcmluZ0luc3RhbmNlO1xyXG4gICAgaWYgKGluc3RhbmNlKSB7XHJcbiAgICAgICAgLy8gIzI0MDBcclxuICAgICAgICAvLyB0byBzdXBwb3J0IGBhcHAudXNlYCBwbHVnaW5zLFxyXG4gICAgICAgIC8vIGZhbGxiYWNrIHRvIGFwcENvbnRleHQncyBgcHJvdmlkZXNgIGlmIHRoZSBpbnRhbmNlIGlzIGF0IHJvb3RcclxuICAgICAgICBjb25zdCBwcm92aWRlcyA9IGluc3RhbmNlLnBhcmVudCA9PSBudWxsXHJcbiAgICAgICAgICAgID8gaW5zdGFuY2Uudm5vZGUuYXBwQ29udGV4dCAmJiBpbnN0YW5jZS52bm9kZS5hcHBDb250ZXh0LnByb3ZpZGVzXHJcbiAgICAgICAgICAgIDogaW5zdGFuY2UucGFyZW50LnByb3ZpZGVzO1xyXG4gICAgICAgIGlmIChwcm92aWRlcyAmJiBrZXkgaW4gcHJvdmlkZXMpIHtcclxuICAgICAgICAgICAgLy8gVFMgZG9lc24ndCBhbGxvdyBzeW1ib2wgYXMgaW5kZXggdHlwZVxyXG4gICAgICAgICAgICByZXR1cm4gcHJvdmlkZXNba2V5XTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoYXJndW1lbnRzLmxlbmd0aCA+IDEpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRyZWF0RGVmYXVsdEFzRmFjdG9yeSAmJiBpc0Z1bmN0aW9uKGRlZmF1bHRWYWx1ZSlcclxuICAgICAgICAgICAgICAgID8gZGVmYXVsdFZhbHVlLmNhbGwoaW5zdGFuY2UucHJveHkpXHJcbiAgICAgICAgICAgICAgICA6IGRlZmF1bHRWYWx1ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpKSB7XHJcbiAgICAgICAgICAgIHdhcm4oYGluamVjdGlvbiBcIiR7U3RyaW5nKGtleSl9XCIgbm90IGZvdW5kLmApO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGVsc2UgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSkge1xyXG4gICAgICAgIHdhcm4oYGluamVjdCgpIGNhbiBvbmx5IGJlIHVzZWQgaW5zaWRlIHNldHVwKCkgb3IgZnVuY3Rpb25hbCBjb21wb25lbnRzLmApO1xyXG4gICAgfVxyXG59XG5cbmZ1bmN0aW9uIHVzZVRyYW5zaXRpb25TdGF0ZSgpIHtcclxuICAgIGNvbnN0IHN0YXRlID0ge1xyXG4gICAgICAgIGlzTW91bnRlZDogZmFsc2UsXHJcbiAgICAgICAgaXNMZWF2aW5nOiBmYWxzZSxcclxuICAgICAgICBpc1VubW91bnRpbmc6IGZhbHNlLFxyXG4gICAgICAgIGxlYXZpbmdWTm9kZXM6IG5ldyBNYXAoKVxyXG4gICAgfTtcclxuICAgIG9uTW91bnRlZCgoKSA9PiB7XHJcbiAgICAgICAgc3RhdGUuaXNNb3VudGVkID0gdHJ1ZTtcclxuICAgIH0pO1xyXG4gICAgb25CZWZvcmVVbm1vdW50KCgpID0+IHtcclxuICAgICAgICBzdGF0ZS5pc1VubW91bnRpbmcgPSB0cnVlO1xyXG4gICAgfSk7XHJcbiAgICByZXR1cm4gc3RhdGU7XHJcbn1cclxuY29uc3QgVHJhbnNpdGlvbkhvb2tWYWxpZGF0b3IgPSBbRnVuY3Rpb24sIEFycmF5XTtcclxuY29uc3QgQmFzZVRyYW5zaXRpb25JbXBsID0ge1xyXG4gICAgbmFtZTogYEJhc2VUcmFuc2l0aW9uYCxcclxuICAgIHByb3BzOiB7XHJcbiAgICAgICAgbW9kZTogU3RyaW5nLFxyXG4gICAgICAgIGFwcGVhcjogQm9vbGVhbixcclxuICAgICAgICBwZXJzaXN0ZWQ6IEJvb2xlYW4sXHJcbiAgICAgICAgLy8gZW50ZXJcclxuICAgICAgICBvbkJlZm9yZUVudGVyOiBUcmFuc2l0aW9uSG9va1ZhbGlkYXRvcixcclxuICAgICAgICBvbkVudGVyOiBUcmFuc2l0aW9uSG9va1ZhbGlkYXRvcixcclxuICAgICAgICBvbkFmdGVyRW50ZXI6IFRyYW5zaXRpb25Ib29rVmFsaWRhdG9yLFxyXG4gICAgICAgIG9uRW50ZXJDYW5jZWxsZWQ6IFRyYW5zaXRpb25Ib29rVmFsaWRhdG9yLFxyXG4gICAgICAgIC8vIGxlYXZlXHJcbiAgICAgICAgb25CZWZvcmVMZWF2ZTogVHJhbnNpdGlvbkhvb2tWYWxpZGF0b3IsXHJcbiAgICAgICAgb25MZWF2ZTogVHJhbnNpdGlvbkhvb2tWYWxpZGF0b3IsXHJcbiAgICAgICAgb25BZnRlckxlYXZlOiBUcmFuc2l0aW9uSG9va1ZhbGlkYXRvcixcclxuICAgICAgICBvbkxlYXZlQ2FuY2VsbGVkOiBUcmFuc2l0aW9uSG9va1ZhbGlkYXRvcixcclxuICAgICAgICAvLyBhcHBlYXJcclxuICAgICAgICBvbkJlZm9yZUFwcGVhcjogVHJhbnNpdGlvbkhvb2tWYWxpZGF0b3IsXHJcbiAgICAgICAgb25BcHBlYXI6IFRyYW5zaXRpb25Ib29rVmFsaWRhdG9yLFxyXG4gICAgICAgIG9uQWZ0ZXJBcHBlYXI6IFRyYW5zaXRpb25Ib29rVmFsaWRhdG9yLFxyXG4gICAgICAgIG9uQXBwZWFyQ2FuY2VsbGVkOiBUcmFuc2l0aW9uSG9va1ZhbGlkYXRvclxyXG4gICAgfSxcclxuICAgIHNldHVwKHByb3BzLCB7IHNsb3RzIH0pIHtcclxuICAgICAgICBjb25zdCBpbnN0YW5jZSA9IGdldEN1cnJlbnRJbnN0YW5jZSgpO1xyXG4gICAgICAgIGNvbnN0IHN0YXRlID0gdXNlVHJhbnNpdGlvblN0YXRlKCk7XHJcbiAgICAgICAgbGV0IHByZXZUcmFuc2l0aW9uS2V5O1xyXG4gICAgICAgIHJldHVybiAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGNoaWxkcmVuID0gc2xvdHMuZGVmYXVsdCAmJiBnZXRUcmFuc2l0aW9uUmF3Q2hpbGRyZW4oc2xvdHMuZGVmYXVsdCgpLCB0cnVlKTtcclxuICAgICAgICAgICAgaWYgKCFjaGlsZHJlbiB8fCAhY2hpbGRyZW4ubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy8gd2FybiBtdWx0aXBsZSBlbGVtZW50c1xyXG4gICAgICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmIGNoaWxkcmVuLmxlbmd0aCA+IDEpIHtcclxuICAgICAgICAgICAgICAgIHdhcm4oJzx0cmFuc2l0aW9uPiBjYW4gb25seSBiZSB1c2VkIG9uIGEgc2luZ2xlIGVsZW1lbnQgb3IgY29tcG9uZW50LiBVc2UgJyArXHJcbiAgICAgICAgICAgICAgICAgICAgJzx0cmFuc2l0aW9uLWdyb3VwPiBmb3IgbGlzdHMuJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy8gdGhlcmUncyBubyBuZWVkIHRvIHRyYWNrIHJlYWN0aXZpdHkgZm9yIHRoZXNlIHByb3BzIHNvIHVzZSB0aGUgcmF3XHJcbiAgICAgICAgICAgIC8vIHByb3BzIGZvciBhIGJpdCBiZXR0ZXIgcGVyZlxyXG4gICAgICAgICAgICBjb25zdCByYXdQcm9wcyA9IHRvUmF3KHByb3BzKTtcclxuICAgICAgICAgICAgY29uc3QgeyBtb2RlIH0gPSByYXdQcm9wcztcclxuICAgICAgICAgICAgLy8gY2hlY2sgbW9kZVxyXG4gICAgICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmXHJcbiAgICAgICAgICAgICAgICBtb2RlICYmXHJcbiAgICAgICAgICAgICAgICBtb2RlICE9PSAnaW4tb3V0JyAmJiBtb2RlICE9PSAnb3V0LWluJyAmJiBtb2RlICE9PSAnZGVmYXVsdCcpIHtcclxuICAgICAgICAgICAgICAgIHdhcm4oYGludmFsaWQgPHRyYW5zaXRpb24+IG1vZGU6ICR7bW9kZX1gKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyBhdCB0aGlzIHBvaW50IGNoaWxkcmVuIGhhcyBhIGd1YXJhbnRlZWQgbGVuZ3RoIG9mIDEuXHJcbiAgICAgICAgICAgIGNvbnN0IGNoaWxkID0gY2hpbGRyZW5bMF07XHJcbiAgICAgICAgICAgIGlmIChzdGF0ZS5pc0xlYXZpbmcpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBlbXB0eVBsYWNlaG9sZGVyKGNoaWxkKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyBpbiB0aGUgY2FzZSBvZiA8dHJhbnNpdGlvbj48a2VlcC1hbGl2ZS8+PC90cmFuc2l0aW9uPiwgd2UgbmVlZCB0b1xyXG4gICAgICAgICAgICAvLyBjb21wYXJlIHRoZSB0eXBlIG9mIHRoZSBrZXB0LWFsaXZlIGNoaWxkcmVuLlxyXG4gICAgICAgICAgICBjb25zdCBpbm5lckNoaWxkID0gZ2V0S2VlcEFsaXZlQ2hpbGQoY2hpbGQpO1xyXG4gICAgICAgICAgICBpZiAoIWlubmVyQ2hpbGQpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBlbXB0eVBsYWNlaG9sZGVyKGNoaWxkKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjb25zdCBlbnRlckhvb2tzID0gcmVzb2x2ZVRyYW5zaXRpb25Ib29rcyhpbm5lckNoaWxkLCByYXdQcm9wcywgc3RhdGUsIGluc3RhbmNlKTtcclxuICAgICAgICAgICAgc2V0VHJhbnNpdGlvbkhvb2tzKGlubmVyQ2hpbGQsIGVudGVySG9va3MpO1xyXG4gICAgICAgICAgICBjb25zdCBvbGRDaGlsZCA9IGluc3RhbmNlLnN1YlRyZWU7XHJcbiAgICAgICAgICAgIGNvbnN0IG9sZElubmVyQ2hpbGQgPSBvbGRDaGlsZCAmJiBnZXRLZWVwQWxpdmVDaGlsZChvbGRDaGlsZCk7XHJcbiAgICAgICAgICAgIGxldCB0cmFuc2l0aW9uS2V5Q2hhbmdlZCA9IGZhbHNlO1xyXG4gICAgICAgICAgICBjb25zdCB7IGdldFRyYW5zaXRpb25LZXkgfSA9IGlubmVyQ2hpbGQudHlwZTtcclxuICAgICAgICAgICAgaWYgKGdldFRyYW5zaXRpb25LZXkpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGtleSA9IGdldFRyYW5zaXRpb25LZXkoKTtcclxuICAgICAgICAgICAgICAgIGlmIChwcmV2VHJhbnNpdGlvbktleSA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcHJldlRyYW5zaXRpb25LZXkgPSBrZXk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIGlmIChrZXkgIT09IHByZXZUcmFuc2l0aW9uS2V5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcHJldlRyYW5zaXRpb25LZXkgPSBrZXk7XHJcbiAgICAgICAgICAgICAgICAgICAgdHJhbnNpdGlvbktleUNoYW5nZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vIGhhbmRsZSBtb2RlXHJcbiAgICAgICAgICAgIGlmIChvbGRJbm5lckNoaWxkICYmXHJcbiAgICAgICAgICAgICAgICBvbGRJbm5lckNoaWxkLnR5cGUgIT09IENvbW1lbnQgJiZcclxuICAgICAgICAgICAgICAgICghaXNTYW1lVk5vZGVUeXBlKGlubmVyQ2hpbGQsIG9sZElubmVyQ2hpbGQpIHx8IHRyYW5zaXRpb25LZXlDaGFuZ2VkKSkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgbGVhdmluZ0hvb2tzID0gcmVzb2x2ZVRyYW5zaXRpb25Ib29rcyhvbGRJbm5lckNoaWxkLCByYXdQcm9wcywgc3RhdGUsIGluc3RhbmNlKTtcclxuICAgICAgICAgICAgICAgIC8vIHVwZGF0ZSBvbGQgdHJlZSdzIGhvb2tzIGluIGNhc2Ugb2YgZHluYW1pYyB0cmFuc2l0aW9uXHJcbiAgICAgICAgICAgICAgICBzZXRUcmFuc2l0aW9uSG9va3Mob2xkSW5uZXJDaGlsZCwgbGVhdmluZ0hvb2tzKTtcclxuICAgICAgICAgICAgICAgIC8vIHN3aXRjaGluZyBiZXR3ZWVuIGRpZmZlcmVudCB2aWV3c1xyXG4gICAgICAgICAgICAgICAgaWYgKG1vZGUgPT09ICdvdXQtaW4nKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc3RhdGUuaXNMZWF2aW5nID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAvLyByZXR1cm4gcGxhY2Vob2xkZXIgbm9kZSBhbmQgcXVldWUgdXBkYXRlIHdoZW4gbGVhdmUgZmluaXNoZXNcclxuICAgICAgICAgICAgICAgICAgICBsZWF2aW5nSG9va3MuYWZ0ZXJMZWF2ZSA9ICgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGUuaXNMZWF2aW5nID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGluc3RhbmNlLnVwZGF0ZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGVtcHR5UGxhY2Vob2xkZXIoY2hpbGQpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSBpZiAobW9kZSA9PT0gJ2luLW91dCcgJiYgaW5uZXJDaGlsZC50eXBlICE9PSBDb21tZW50KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGVhdmluZ0hvb2tzLmRlbGF5TGVhdmUgPSAoZWwsIGVhcmx5UmVtb3ZlLCBkZWxheWVkTGVhdmUpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbGVhdmluZ1ZOb2Rlc0NhY2hlID0gZ2V0TGVhdmluZ05vZGVzRm9yVHlwZShzdGF0ZSwgb2xkSW5uZXJDaGlsZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxlYXZpbmdWTm9kZXNDYWNoZVtTdHJpbmcob2xkSW5uZXJDaGlsZC5rZXkpXSA9IG9sZElubmVyQ2hpbGQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGVhcmx5IHJlbW92YWwgY2FsbGJhY2tcclxuICAgICAgICAgICAgICAgICAgICAgICAgZWwuX2xlYXZlQ2IgPSAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlYXJseVJlbW92ZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWwuX2xlYXZlQ2IgPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWxldGUgZW50ZXJIb29rcy5kZWxheWVkTGVhdmU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVudGVySG9va3MuZGVsYXllZExlYXZlID0gZGVsYXllZExlYXZlO1xyXG4gICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIGNoaWxkO1xyXG4gICAgICAgIH07XHJcbiAgICB9XHJcbn07XHJcbi8vIGV4cG9ydCB0aGUgcHVibGljIHR5cGUgZm9yIGgvdHN4IGluZmVyZW5jZVxyXG4vLyBhbHNvIHRvIGF2b2lkIGlubGluZSBpbXBvcnQoKSBpbiBnZW5lcmF0ZWQgZC50cyBmaWxlc1xyXG5jb25zdCBCYXNlVHJhbnNpdGlvbiA9IEJhc2VUcmFuc2l0aW9uSW1wbDtcclxuZnVuY3Rpb24gZ2V0TGVhdmluZ05vZGVzRm9yVHlwZShzdGF0ZSwgdm5vZGUpIHtcclxuICAgIGNvbnN0IHsgbGVhdmluZ1ZOb2RlcyB9ID0gc3RhdGU7XHJcbiAgICBsZXQgbGVhdmluZ1ZOb2Rlc0NhY2hlID0gbGVhdmluZ1ZOb2Rlcy5nZXQodm5vZGUudHlwZSk7XHJcbiAgICBpZiAoIWxlYXZpbmdWTm9kZXNDYWNoZSkge1xyXG4gICAgICAgIGxlYXZpbmdWTm9kZXNDYWNoZSA9IE9iamVjdC5jcmVhdGUobnVsbCk7XHJcbiAgICAgICAgbGVhdmluZ1ZOb2Rlcy5zZXQodm5vZGUudHlwZSwgbGVhdmluZ1ZOb2Rlc0NhY2hlKTtcclxuICAgIH1cclxuICAgIHJldHVybiBsZWF2aW5nVk5vZGVzQ2FjaGU7XHJcbn1cclxuLy8gVGhlIHRyYW5zaXRpb24gaG9va3MgYXJlIGF0dGFjaGVkIHRvIHRoZSB2bm9kZSBhcyB2bm9kZS50cmFuc2l0aW9uXHJcbi8vIGFuZCB3aWxsIGJlIGNhbGxlZCBhdCBhcHByb3ByaWF0ZSB0aW1pbmcgaW4gdGhlIHJlbmRlcmVyLlxyXG5mdW5jdGlvbiByZXNvbHZlVHJhbnNpdGlvbkhvb2tzKHZub2RlLCBwcm9wcywgc3RhdGUsIGluc3RhbmNlKSB7XHJcbiAgICBjb25zdCB7IGFwcGVhciwgbW9kZSwgcGVyc2lzdGVkID0gZmFsc2UsIG9uQmVmb3JlRW50ZXIsIG9uRW50ZXIsIG9uQWZ0ZXJFbnRlciwgb25FbnRlckNhbmNlbGxlZCwgb25CZWZvcmVMZWF2ZSwgb25MZWF2ZSwgb25BZnRlckxlYXZlLCBvbkxlYXZlQ2FuY2VsbGVkLCBvbkJlZm9yZUFwcGVhciwgb25BcHBlYXIsIG9uQWZ0ZXJBcHBlYXIsIG9uQXBwZWFyQ2FuY2VsbGVkIH0gPSBwcm9wcztcclxuICAgIGNvbnN0IGtleSA9IFN0cmluZyh2bm9kZS5rZXkpO1xyXG4gICAgY29uc3QgbGVhdmluZ1ZOb2Rlc0NhY2hlID0gZ2V0TGVhdmluZ05vZGVzRm9yVHlwZShzdGF0ZSwgdm5vZGUpO1xyXG4gICAgY29uc3QgY2FsbEhvb2sgPSAoaG9vaywgYXJncykgPT4ge1xyXG4gICAgICAgIGhvb2sgJiZcclxuICAgICAgICAgICAgY2FsbFdpdGhBc3luY0Vycm9ySGFuZGxpbmcoaG9vaywgaW5zdGFuY2UsIDkgLyogVFJBTlNJVElPTl9IT09LICovLCBhcmdzKTtcclxuICAgIH07XHJcbiAgICBjb25zdCBob29rcyA9IHtcclxuICAgICAgICBtb2RlLFxyXG4gICAgICAgIHBlcnNpc3RlZCxcclxuICAgICAgICBiZWZvcmVFbnRlcihlbCkge1xyXG4gICAgICAgICAgICBsZXQgaG9vayA9IG9uQmVmb3JlRW50ZXI7XHJcbiAgICAgICAgICAgIGlmICghc3RhdGUuaXNNb3VudGVkKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoYXBwZWFyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaG9vayA9IG9uQmVmb3JlQXBwZWFyIHx8IG9uQmVmb3JlRW50ZXI7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy8gZm9yIHNhbWUgZWxlbWVudCAodi1zaG93KVxyXG4gICAgICAgICAgICBpZiAoZWwuX2xlYXZlQ2IpIHtcclxuICAgICAgICAgICAgICAgIGVsLl9sZWF2ZUNiKHRydWUgLyogY2FuY2VsbGVkICovKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyBmb3IgdG9nZ2xlZCBlbGVtZW50IHdpdGggc2FtZSBrZXkgKHYtaWYpXHJcbiAgICAgICAgICAgIGNvbnN0IGxlYXZpbmdWTm9kZSA9IGxlYXZpbmdWTm9kZXNDYWNoZVtrZXldO1xyXG4gICAgICAgICAgICBpZiAobGVhdmluZ1ZOb2RlICYmXHJcbiAgICAgICAgICAgICAgICBpc1NhbWVWTm9kZVR5cGUodm5vZGUsIGxlYXZpbmdWTm9kZSkgJiZcclxuICAgICAgICAgICAgICAgIGxlYXZpbmdWTm9kZS5lbC5fbGVhdmVDYikge1xyXG4gICAgICAgICAgICAgICAgLy8gZm9yY2UgZWFybHkgcmVtb3ZhbCAobm90IGNhbmNlbGxlZClcclxuICAgICAgICAgICAgICAgIGxlYXZpbmdWTm9kZS5lbC5fbGVhdmVDYigpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNhbGxIb29rKGhvb2ssIFtlbF0pO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZW50ZXIoZWwpIHtcclxuICAgICAgICAgICAgbGV0IGhvb2sgPSBvbkVudGVyO1xyXG4gICAgICAgICAgICBsZXQgYWZ0ZXJIb29rID0gb25BZnRlckVudGVyO1xyXG4gICAgICAgICAgICBsZXQgY2FuY2VsSG9vayA9IG9uRW50ZXJDYW5jZWxsZWQ7XHJcbiAgICAgICAgICAgIGlmICghc3RhdGUuaXNNb3VudGVkKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoYXBwZWFyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaG9vayA9IG9uQXBwZWFyIHx8IG9uRW50ZXI7XHJcbiAgICAgICAgICAgICAgICAgICAgYWZ0ZXJIb29rID0gb25BZnRlckFwcGVhciB8fCBvbkFmdGVyRW50ZXI7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FuY2VsSG9vayA9IG9uQXBwZWFyQ2FuY2VsbGVkIHx8IG9uRW50ZXJDYW5jZWxsZWQ7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgbGV0IGNhbGxlZCA9IGZhbHNlO1xyXG4gICAgICAgICAgICBjb25zdCBkb25lID0gKGVsLl9lbnRlckNiID0gKGNhbmNlbGxlZCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKGNhbGxlZClcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICBjYWxsZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgaWYgKGNhbmNlbGxlZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhbGxIb29rKGNhbmNlbEhvb2ssIFtlbF0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FsbEhvb2soYWZ0ZXJIb29rLCBbZWxdKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmIChob29rcy5kZWxheWVkTGVhdmUpIHtcclxuICAgICAgICAgICAgICAgICAgICBob29rcy5kZWxheWVkTGVhdmUoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsLl9lbnRlckNiID0gdW5kZWZpbmVkO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgaWYgKGhvb2spIHtcclxuICAgICAgICAgICAgICAgIGhvb2soZWwsIGRvbmUpO1xyXG4gICAgICAgICAgICAgICAgaWYgKGhvb2subGVuZ3RoIDw9IDEpIHtcclxuICAgICAgICAgICAgICAgICAgICBkb25lKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBkb25lKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG4gICAgICAgIGxlYXZlKGVsLCByZW1vdmUpIHtcclxuICAgICAgICAgICAgY29uc3Qga2V5ID0gU3RyaW5nKHZub2RlLmtleSk7XHJcbiAgICAgICAgICAgIGlmIChlbC5fZW50ZXJDYikge1xyXG4gICAgICAgICAgICAgICAgZWwuX2VudGVyQ2IodHJ1ZSAvKiBjYW5jZWxsZWQgKi8pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChzdGF0ZS5pc1VubW91bnRpbmcpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiByZW1vdmUoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjYWxsSG9vayhvbkJlZm9yZUxlYXZlLCBbZWxdKTtcclxuICAgICAgICAgICAgbGV0IGNhbGxlZCA9IGZhbHNlO1xyXG4gICAgICAgICAgICBjb25zdCBkb25lID0gKGVsLl9sZWF2ZUNiID0gKGNhbmNlbGxlZCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKGNhbGxlZClcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICBjYWxsZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgcmVtb3ZlKCk7XHJcbiAgICAgICAgICAgICAgICBpZiAoY2FuY2VsbGVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FsbEhvb2sob25MZWF2ZUNhbmNlbGxlZCwgW2VsXSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBjYWxsSG9vayhvbkFmdGVyTGVhdmUsIFtlbF0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWwuX2xlYXZlQ2IgPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgICAgICAgICBpZiAobGVhdmluZ1ZOb2Rlc0NhY2hlW2tleV0gPT09IHZub2RlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZGVsZXRlIGxlYXZpbmdWTm9kZXNDYWNoZVtrZXldO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgbGVhdmluZ1ZOb2Rlc0NhY2hlW2tleV0gPSB2bm9kZTtcclxuICAgICAgICAgICAgaWYgKG9uTGVhdmUpIHtcclxuICAgICAgICAgICAgICAgIG9uTGVhdmUoZWwsIGRvbmUpO1xyXG4gICAgICAgICAgICAgICAgaWYgKG9uTGVhdmUubGVuZ3RoIDw9IDEpIHtcclxuICAgICAgICAgICAgICAgICAgICBkb25lKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBkb25lKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG4gICAgICAgIGNsb25lKHZub2RlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiByZXNvbHZlVHJhbnNpdGlvbkhvb2tzKHZub2RlLCBwcm9wcywgc3RhdGUsIGluc3RhbmNlKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIGhvb2tzO1xyXG59XHJcbi8vIHRoZSBwbGFjZWhvbGRlciByZWFsbHkgb25seSBoYW5kbGVzIG9uZSBzcGVjaWFsIGNhc2U6IEtlZXBBbGl2ZVxyXG4vLyBpbiB0aGUgY2FzZSBvZiBhIEtlZXBBbGl2ZSBpbiBhIGxlYXZlIHBoYXNlIHdlIG5lZWQgdG8gcmV0dXJuIGEgS2VlcEFsaXZlXHJcbi8vIHBsYWNlaG9sZGVyIHdpdGggZW1wdHkgY29udGVudCB0byBhdm9pZCB0aGUgS2VlcEFsaXZlIGluc3RhbmNlIGZyb20gYmVpbmdcclxuLy8gdW5tb3VudGVkLlxyXG5mdW5jdGlvbiBlbXB0eVBsYWNlaG9sZGVyKHZub2RlKSB7XHJcbiAgICBpZiAoaXNLZWVwQWxpdmUodm5vZGUpKSB7XHJcbiAgICAgICAgdm5vZGUgPSBjbG9uZVZOb2RlKHZub2RlKTtcclxuICAgICAgICB2bm9kZS5jaGlsZHJlbiA9IG51bGw7XHJcbiAgICAgICAgcmV0dXJuIHZub2RlO1xyXG4gICAgfVxyXG59XHJcbmZ1bmN0aW9uIGdldEtlZXBBbGl2ZUNoaWxkKHZub2RlKSB7XHJcbiAgICByZXR1cm4gaXNLZWVwQWxpdmUodm5vZGUpXHJcbiAgICAgICAgPyB2bm9kZS5jaGlsZHJlblxyXG4gICAgICAgICAgICA/IHZub2RlLmNoaWxkcmVuWzBdXHJcbiAgICAgICAgICAgIDogdW5kZWZpbmVkXHJcbiAgICAgICAgOiB2bm9kZTtcclxufVxyXG5mdW5jdGlvbiBzZXRUcmFuc2l0aW9uSG9va3Modm5vZGUsIGhvb2tzKSB7XHJcbiAgICBpZiAodm5vZGUuc2hhcGVGbGFnICYgNiAvKiBDT01QT05FTlQgKi8gJiYgdm5vZGUuY29tcG9uZW50KSB7XHJcbiAgICAgICAgc2V0VHJhbnNpdGlvbkhvb2tzKHZub2RlLmNvbXBvbmVudC5zdWJUcmVlLCBob29rcyk7XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmICh2bm9kZS5zaGFwZUZsYWcgJiAxMjggLyogU1VTUEVOU0UgKi8pIHtcclxuICAgICAgICB2bm9kZS5zc0NvbnRlbnQudHJhbnNpdGlvbiA9IGhvb2tzLmNsb25lKHZub2RlLnNzQ29udGVudCk7XHJcbiAgICAgICAgdm5vZGUuc3NGYWxsYmFjay50cmFuc2l0aW9uID0gaG9va3MuY2xvbmUodm5vZGUuc3NGYWxsYmFjayk7XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgICB2bm9kZS50cmFuc2l0aW9uID0gaG9va3M7XHJcbiAgICB9XHJcbn1cclxuZnVuY3Rpb24gZ2V0VHJhbnNpdGlvblJhd0NoaWxkcmVuKGNoaWxkcmVuLCBrZWVwQ29tbWVudCA9IGZhbHNlKSB7XHJcbiAgICBsZXQgcmV0ID0gW107XHJcbiAgICBsZXQga2V5ZWRGcmFnbWVudENvdW50ID0gMDtcclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY2hpbGRyZW4ubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICBjb25zdCBjaGlsZCA9IGNoaWxkcmVuW2ldO1xyXG4gICAgICAgIC8vIGhhbmRsZSBmcmFnbWVudCBjaGlsZHJlbiBjYXNlLCBlLmcuIHYtZm9yXHJcbiAgICAgICAgaWYgKGNoaWxkLnR5cGUgPT09IEZyYWdtZW50KSB7XHJcbiAgICAgICAgICAgIGlmIChjaGlsZC5wYXRjaEZsYWcgJiAxMjggLyogS0VZRURfRlJBR01FTlQgKi8pXHJcbiAgICAgICAgICAgICAgICBrZXllZEZyYWdtZW50Q291bnQrKztcclxuICAgICAgICAgICAgcmV0ID0gcmV0LmNvbmNhdChnZXRUcmFuc2l0aW9uUmF3Q2hpbGRyZW4oY2hpbGQuY2hpbGRyZW4sIGtlZXBDb21tZW50KSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIGNvbW1lbnQgcGxhY2Vob2xkZXJzIHNob3VsZCBiZSBza2lwcGVkLCBlLmcuIHYtaWZcclxuICAgICAgICBlbHNlIGlmIChrZWVwQ29tbWVudCB8fCBjaGlsZC50eXBlICE9PSBDb21tZW50KSB7XHJcbiAgICAgICAgICAgIHJldC5wdXNoKGNoaWxkKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICAvLyAjMTEyNiBpZiBhIHRyYW5zaXRpb24gY2hpbGRyZW4gbGlzdCBjb250YWlucyBtdWx0aXBsZSBzdWIgZnJhZ21lbnRzLCB0aGVzZVxyXG4gICAgLy8gZnJhZ21lbnRzIHdpbGwgYmUgbWVyZ2VkIGludG8gYSBmbGF0IGNoaWxkcmVuIGFycmF5LiBTaW5jZSBlYWNoIHYtZm9yXHJcbiAgICAvLyBmcmFnbWVudCBtYXkgY29udGFpbiBkaWZmZXJlbnQgc3RhdGljIGJpbmRpbmdzIGluc2lkZSwgd2UgbmVlZCB0byBkZS1vcFxyXG4gICAgLy8gdGhlc2UgY2hpbGRyZW4gdG8gZm9yY2UgZnVsbCBkaWZmcyB0byBlbnN1cmUgY29ycmVjdCBiZWhhdmlvci5cclxuICAgIGlmIChrZXllZEZyYWdtZW50Q291bnQgPiAxKSB7XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCByZXQubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgcmV0W2ldLnBhdGNoRmxhZyA9IC0yIC8qIEJBSUwgKi87XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIHJldDtcclxufVxuXG4vLyBpbXBsZW1lbnRhdGlvbiwgY2xvc2UgdG8gbm8tb3BcclxuZnVuY3Rpb24gZGVmaW5lQ29tcG9uZW50KG9wdGlvbnMpIHtcclxuICAgIHJldHVybiBpc0Z1bmN0aW9uKG9wdGlvbnMpID8geyBzZXR1cDogb3B0aW9ucywgbmFtZTogb3B0aW9ucy5uYW1lIH0gOiBvcHRpb25zO1xyXG59XG5cbmNvbnN0IGlzQXN5bmNXcmFwcGVyID0gKGkpID0+ICEhaS50eXBlLl9fYXN5bmNMb2FkZXI7XHJcbmZ1bmN0aW9uIGRlZmluZUFzeW5jQ29tcG9uZW50KHNvdXJjZSkge1xyXG4gICAgaWYgKGlzRnVuY3Rpb24oc291cmNlKSkge1xyXG4gICAgICAgIHNvdXJjZSA9IHsgbG9hZGVyOiBzb3VyY2UgfTtcclxuICAgIH1cclxuICAgIGNvbnN0IHsgbG9hZGVyLCBsb2FkaW5nQ29tcG9uZW50LCBlcnJvckNvbXBvbmVudCwgZGVsYXkgPSAyMDAsIHRpbWVvdXQsIC8vIHVuZGVmaW5lZCA9IG5ldmVyIHRpbWVzIG91dFxyXG4gICAgc3VzcGVuc2libGUgPSB0cnVlLCBvbkVycm9yOiB1c2VyT25FcnJvciB9ID0gc291cmNlO1xyXG4gICAgbGV0IHBlbmRpbmdSZXF1ZXN0ID0gbnVsbDtcclxuICAgIGxldCByZXNvbHZlZENvbXA7XHJcbiAgICBsZXQgcmV0cmllcyA9IDA7XHJcbiAgICBjb25zdCByZXRyeSA9ICgpID0+IHtcclxuICAgICAgICByZXRyaWVzKys7XHJcbiAgICAgICAgcGVuZGluZ1JlcXVlc3QgPSBudWxsO1xyXG4gICAgICAgIHJldHVybiBsb2FkKCk7XHJcbiAgICB9O1xyXG4gICAgY29uc3QgbG9hZCA9ICgpID0+IHtcclxuICAgICAgICBsZXQgdGhpc1JlcXVlc3Q7XHJcbiAgICAgICAgcmV0dXJuIChwZW5kaW5nUmVxdWVzdCB8fFxyXG4gICAgICAgICAgICAodGhpc1JlcXVlc3QgPSBwZW5kaW5nUmVxdWVzdCA9XHJcbiAgICAgICAgICAgICAgICBsb2FkZXIoKVxyXG4gICAgICAgICAgICAgICAgICAgIC5jYXRjaChlcnIgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGVyciA9IGVyciBpbnN0YW5jZW9mIEVycm9yID8gZXJyIDogbmV3IEVycm9yKFN0cmluZyhlcnIpKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodXNlck9uRXJyb3IpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHVzZXJSZXRyeSA9ICgpID0+IHJlc29sdmUocmV0cnkoKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB1c2VyRmFpbCA9ICgpID0+IHJlamVjdChlcnIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdXNlck9uRXJyb3IoZXJyLCB1c2VyUmV0cnksIHVzZXJGYWlsLCByZXRyaWVzICsgMSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgZXJyO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgLnRoZW4oKGNvbXApID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpc1JlcXVlc3QgIT09IHBlbmRpbmdSZXF1ZXN0ICYmIHBlbmRpbmdSZXF1ZXN0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBwZW5kaW5nUmVxdWVzdDtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSAmJiAhY29tcCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB3YXJuKGBBc3luYyBjb21wb25lbnQgbG9hZGVyIHJlc29sdmVkIHRvIHVuZGVmaW5lZC4gYCArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBgSWYgeW91IGFyZSB1c2luZyByZXRyeSgpLCBtYWtlIHN1cmUgdG8gcmV0dXJuIGl0cyByZXR1cm4gdmFsdWUuYCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIC8vIGludGVyb3AgbW9kdWxlIGRlZmF1bHRcclxuICAgICAgICAgICAgICAgICAgICBpZiAoY29tcCAmJlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAoY29tcC5fX2VzTW9kdWxlIHx8IGNvbXBbU3ltYm9sLnRvU3RyaW5nVGFnXSA9PT0gJ01vZHVsZScpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbXAgPSBjb21wLmRlZmF1bHQ7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgJiYgY29tcCAmJiAhaXNPYmplY3QoY29tcCkgJiYgIWlzRnVuY3Rpb24oY29tcCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBJbnZhbGlkIGFzeW5jIGNvbXBvbmVudCBsb2FkIHJlc3VsdDogJHtjb21wfWApO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICByZXNvbHZlZENvbXAgPSBjb21wO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBjb21wO1xyXG4gICAgICAgICAgICAgICAgfSkpKTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gZGVmaW5lQ29tcG9uZW50KHtcclxuICAgICAgICBuYW1lOiAnQXN5bmNDb21wb25lbnRXcmFwcGVyJyxcclxuICAgICAgICBfX2FzeW5jTG9hZGVyOiBsb2FkLFxyXG4gICAgICAgIGdldCBfX2FzeW5jUmVzb2x2ZWQoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiByZXNvbHZlZENvbXA7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBzZXR1cCgpIHtcclxuICAgICAgICAgICAgY29uc3QgaW5zdGFuY2UgPSBjdXJyZW50SW5zdGFuY2U7XHJcbiAgICAgICAgICAgIC8vIGFscmVhZHkgcmVzb2x2ZWRcclxuICAgICAgICAgICAgaWYgKHJlc29sdmVkQ29tcCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuICgpID0+IGNyZWF0ZUlubmVyQ29tcChyZXNvbHZlZENvbXAsIGluc3RhbmNlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjb25zdCBvbkVycm9yID0gKGVycikgPT4ge1xyXG4gICAgICAgICAgICAgICAgcGVuZGluZ1JlcXVlc3QgPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgaGFuZGxlRXJyb3IoZXJyLCBpbnN0YW5jZSwgMTMgLyogQVNZTkNfQ09NUE9ORU5UX0xPQURFUiAqLywgIWVycm9yQ29tcG9uZW50IC8qIGRvIG5vdCB0aHJvdyBpbiBkZXYgaWYgdXNlciBwcm92aWRlZCBlcnJvciBjb21wb25lbnQgKi8pO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAvLyBzdXNwZW5zZS1jb250cm9sbGVkIG9yIFNTUi5cclxuICAgICAgICAgICAgaWYgKChzdXNwZW5zaWJsZSAmJiBpbnN0YW5jZS5zdXNwZW5zZSkgfHxcclxuICAgICAgICAgICAgICAgIChpc0luU1NSQ29tcG9uZW50U2V0dXApKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbG9hZCgpXHJcbiAgICAgICAgICAgICAgICAgICAgLnRoZW4oY29tcCA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICgpID0+IGNyZWF0ZUlubmVyQ29tcChjb21wLCBpbnN0YW5jZSk7XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgIC5jYXRjaChlcnIgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIG9uRXJyb3IoZXJyKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gKCkgPT4gZXJyb3JDb21wb25lbnRcclxuICAgICAgICAgICAgICAgICAgICAgICAgPyBjcmVhdGVWTm9kZShlcnJvckNvbXBvbmVudCwge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3I6IGVyclxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICA6IG51bGw7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjb25zdCBsb2FkZWQgPSByZWYoZmFsc2UpO1xyXG4gICAgICAgICAgICBjb25zdCBlcnJvciA9IHJlZigpO1xyXG4gICAgICAgICAgICBjb25zdCBkZWxheWVkID0gcmVmKCEhZGVsYXkpO1xyXG4gICAgICAgICAgICBpZiAoZGVsYXkpIHtcclxuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGRlbGF5ZWQudmFsdWUgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIH0sIGRlbGF5KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAodGltZW91dCAhPSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIWxvYWRlZC52YWx1ZSAmJiAhZXJyb3IudmFsdWUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZXJyID0gbmV3IEVycm9yKGBBc3luYyBjb21wb25lbnQgdGltZWQgb3V0IGFmdGVyICR7dGltZW91dH1tcy5gKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgb25FcnJvcihlcnIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBlcnJvci52YWx1ZSA9IGVycjtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9LCB0aW1lb3V0KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBsb2FkKClcclxuICAgICAgICAgICAgICAgIC50aGVuKCgpID0+IHtcclxuICAgICAgICAgICAgICAgIGxvYWRlZC52YWx1ZSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICBpZiAoaW5zdGFuY2UucGFyZW50ICYmIGlzS2VlcEFsaXZlKGluc3RhbmNlLnBhcmVudC52bm9kZSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBwYXJlbnQgaXMga2VlcC1hbGl2ZSwgZm9yY2UgdXBkYXRlIHNvIHRoZSBsb2FkZWQgY29tcG9uZW50J3NcclxuICAgICAgICAgICAgICAgICAgICAvLyBuYW1lIGlzIHRha2VuIGludG8gYWNjb3VudFxyXG4gICAgICAgICAgICAgICAgICAgIHF1ZXVlSm9iKGluc3RhbmNlLnBhcmVudC51cGRhdGUpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgLmNhdGNoKGVyciA9PiB7XHJcbiAgICAgICAgICAgICAgICBvbkVycm9yKGVycik7XHJcbiAgICAgICAgICAgICAgICBlcnJvci52YWx1ZSA9IGVycjtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHJldHVybiAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAobG9hZGVkLnZhbHVlICYmIHJlc29sdmVkQ29tcCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBjcmVhdGVJbm5lckNvbXAocmVzb2x2ZWRDb21wLCBpbnN0YW5jZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIGlmIChlcnJvci52YWx1ZSAmJiBlcnJvckNvbXBvbmVudCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBjcmVhdGVWTm9kZShlcnJvckNvbXBvbmVudCwge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBlcnJvcjogZXJyb3IudmFsdWVcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKGxvYWRpbmdDb21wb25lbnQgJiYgIWRlbGF5ZWQudmFsdWUpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gY3JlYXRlVk5vZGUobG9hZGluZ0NvbXBvbmVudCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbn1cclxuZnVuY3Rpb24gY3JlYXRlSW5uZXJDb21wKGNvbXAsIHsgdm5vZGU6IHsgcmVmLCBwcm9wcywgY2hpbGRyZW4gfSB9KSB7XHJcbiAgICBjb25zdCB2bm9kZSA9IGNyZWF0ZVZOb2RlKGNvbXAsIHByb3BzLCBjaGlsZHJlbik7XHJcbiAgICAvLyBlbnN1cmUgaW5uZXIgY29tcG9uZW50IGluaGVyaXRzIHRoZSBhc3luYyB3cmFwcGVyJ3MgcmVmIG93bmVyXHJcbiAgICB2bm9kZS5yZWYgPSByZWY7XHJcbiAgICByZXR1cm4gdm5vZGU7XHJcbn1cblxuY29uc3QgaXNLZWVwQWxpdmUgPSAodm5vZGUpID0+IHZub2RlLnR5cGUuX19pc0tlZXBBbGl2ZTtcclxuY29uc3QgS2VlcEFsaXZlSW1wbCA9IHtcclxuICAgIG5hbWU6IGBLZWVwQWxpdmVgLFxyXG4gICAgLy8gTWFya2VyIGZvciBzcGVjaWFsIGhhbmRsaW5nIGluc2lkZSB0aGUgcmVuZGVyZXIuIFdlIGFyZSBub3QgdXNpbmcgYSA9PT1cclxuICAgIC8vIGNoZWNrIGRpcmVjdGx5IG9uIEtlZXBBbGl2ZSBpbiB0aGUgcmVuZGVyZXIsIGJlY2F1c2UgaW1wb3J0aW5nIGl0IGRpcmVjdGx5XHJcbiAgICAvLyB3b3VsZCBwcmV2ZW50IGl0IGZyb20gYmVpbmcgdHJlZS1zaGFrZW4uXHJcbiAgICBfX2lzS2VlcEFsaXZlOiB0cnVlLFxyXG4gICAgcHJvcHM6IHtcclxuICAgICAgICBpbmNsdWRlOiBbU3RyaW5nLCBSZWdFeHAsIEFycmF5XSxcclxuICAgICAgICBleGNsdWRlOiBbU3RyaW5nLCBSZWdFeHAsIEFycmF5XSxcclxuICAgICAgICBtYXg6IFtTdHJpbmcsIE51bWJlcl1cclxuICAgIH0sXHJcbiAgICBzZXR1cChwcm9wcywgeyBzbG90cyB9KSB7XHJcbiAgICAgICAgY29uc3QgaW5zdGFuY2UgPSBnZXRDdXJyZW50SW5zdGFuY2UoKTtcclxuICAgICAgICAvLyBLZWVwQWxpdmUgY29tbXVuaWNhdGVzIHdpdGggdGhlIGluc3RhbnRpYXRlZCByZW5kZXJlciB2aWEgdGhlXHJcbiAgICAgICAgLy8gY3R4IHdoZXJlIHRoZSByZW5kZXJlciBwYXNzZXMgaW4gaXRzIGludGVybmFscyxcclxuICAgICAgICAvLyBhbmQgdGhlIEtlZXBBbGl2ZSBpbnN0YW5jZSBleHBvc2VzIGFjdGl2YXRlL2RlYWN0aXZhdGUgaW1wbGVtZW50YXRpb25zLlxyXG4gICAgICAgIC8vIFRoZSB3aG9sZSBwb2ludCBvZiB0aGlzIGlzIHRvIGF2b2lkIGltcG9ydGluZyBLZWVwQWxpdmUgZGlyZWN0bHkgaW4gdGhlXHJcbiAgICAgICAgLy8gcmVuZGVyZXIgdG8gZmFjaWxpdGF0ZSB0cmVlLXNoYWtpbmcuXHJcbiAgICAgICAgY29uc3Qgc2hhcmVkQ29udGV4dCA9IGluc3RhbmNlLmN0eDtcclxuICAgICAgICAvLyBpZiB0aGUgaW50ZXJuYWwgcmVuZGVyZXIgaXMgbm90IHJlZ2lzdGVyZWQsIGl0IGluZGljYXRlcyB0aGF0IHRoaXMgaXMgc2VydmVyLXNpZGUgcmVuZGVyaW5nLFxyXG4gICAgICAgIC8vIGZvciBLZWVwQWxpdmUsIHdlIGp1c3QgbmVlZCB0byByZW5kZXIgaXRzIGNoaWxkcmVuXHJcbiAgICAgICAgaWYgKCFzaGFyZWRDb250ZXh0LnJlbmRlcmVyKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBzbG90cy5kZWZhdWx0O1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCBjYWNoZSA9IG5ldyBNYXAoKTtcclxuICAgICAgICBjb25zdCBrZXlzID0gbmV3IFNldCgpO1xyXG4gICAgICAgIGxldCBjdXJyZW50ID0gbnVsbDtcclxuICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHx8IF9fVlVFX1BST0RfREVWVE9PTFNfXykge1xyXG4gICAgICAgICAgICBpbnN0YW5jZS5fX3ZfY2FjaGUgPSBjYWNoZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgcGFyZW50U3VzcGVuc2UgPSBpbnN0YW5jZS5zdXNwZW5zZTtcclxuICAgICAgICBjb25zdCB7IHJlbmRlcmVyOiB7IHA6IHBhdGNoLCBtOiBtb3ZlLCB1bTogX3VubW91bnQsIG86IHsgY3JlYXRlRWxlbWVudCB9IH0gfSA9IHNoYXJlZENvbnRleHQ7XHJcbiAgICAgICAgY29uc3Qgc3RvcmFnZUNvbnRhaW5lciA9IGNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICAgIHNoYXJlZENvbnRleHQuYWN0aXZhdGUgPSAodm5vZGUsIGNvbnRhaW5lciwgYW5jaG9yLCBpc1NWRywgb3B0aW1pemVkKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGluc3RhbmNlID0gdm5vZGUuY29tcG9uZW50O1xyXG4gICAgICAgICAgICBtb3ZlKHZub2RlLCBjb250YWluZXIsIGFuY2hvciwgMCAvKiBFTlRFUiAqLywgcGFyZW50U3VzcGVuc2UpO1xyXG4gICAgICAgICAgICAvLyBpbiBjYXNlIHByb3BzIGhhdmUgY2hhbmdlZFxyXG4gICAgICAgICAgICBwYXRjaChpbnN0YW5jZS52bm9kZSwgdm5vZGUsIGNvbnRhaW5lciwgYW5jaG9yLCBpbnN0YW5jZSwgcGFyZW50U3VzcGVuc2UsIGlzU1ZHLCB2bm9kZS5zbG90U2NvcGVJZHMsIG9wdGltaXplZCk7XHJcbiAgICAgICAgICAgIHF1ZXVlUG9zdFJlbmRlckVmZmVjdCgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpbnN0YW5jZS5pc0RlYWN0aXZhdGVkID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICBpZiAoaW5zdGFuY2UuYSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGludm9rZUFycmF5Rm5zKGluc3RhbmNlLmEpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgY29uc3Qgdm5vZGVIb29rID0gdm5vZGUucHJvcHMgJiYgdm5vZGUucHJvcHMub25Wbm9kZU1vdW50ZWQ7XHJcbiAgICAgICAgICAgICAgICBpZiAodm5vZGVIb29rKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaW52b2tlVk5vZGVIb29rKHZub2RlSG9vaywgaW5zdGFuY2UucGFyZW50LCB2bm9kZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0sIHBhcmVudFN1c3BlbnNlKTtcclxuICAgICAgICAgICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB8fCBfX1ZVRV9QUk9EX0RFVlRPT0xTX18pIHtcclxuICAgICAgICAgICAgICAgIC8vIFVwZGF0ZSBjb21wb25lbnRzIHRyZWVcclxuICAgICAgICAgICAgICAgIGRldnRvb2xzQ29tcG9uZW50QWRkZWQoaW5zdGFuY2UpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgICAgICBzaGFyZWRDb250ZXh0LmRlYWN0aXZhdGUgPSAodm5vZGUpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgaW5zdGFuY2UgPSB2bm9kZS5jb21wb25lbnQ7XHJcbiAgICAgICAgICAgIG1vdmUodm5vZGUsIHN0b3JhZ2VDb250YWluZXIsIG51bGwsIDEgLyogTEVBVkUgKi8sIHBhcmVudFN1c3BlbnNlKTtcclxuICAgICAgICAgICAgcXVldWVQb3N0UmVuZGVyRWZmZWN0KCgpID0+IHtcclxuICAgICAgICAgICAgICAgIGlmIChpbnN0YW5jZS5kYSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGludm9rZUFycmF5Rm5zKGluc3RhbmNlLmRhKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGNvbnN0IHZub2RlSG9vayA9IHZub2RlLnByb3BzICYmIHZub2RlLnByb3BzLm9uVm5vZGVVbm1vdW50ZWQ7XHJcbiAgICAgICAgICAgICAgICBpZiAodm5vZGVIb29rKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaW52b2tlVk5vZGVIb29rKHZub2RlSG9vaywgaW5zdGFuY2UucGFyZW50LCB2bm9kZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpbnN0YW5jZS5pc0RlYWN0aXZhdGVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgfSwgcGFyZW50U3VzcGVuc2UpO1xyXG4gICAgICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHx8IF9fVlVFX1BST0RfREVWVE9PTFNfXykge1xyXG4gICAgICAgICAgICAgICAgLy8gVXBkYXRlIGNvbXBvbmVudHMgdHJlZVxyXG4gICAgICAgICAgICAgICAgZGV2dG9vbHNDb21wb25lbnRBZGRlZChpbnN0YW5jZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgICAgIGZ1bmN0aW9uIHVubW91bnQodm5vZGUpIHtcclxuICAgICAgICAgICAgLy8gcmVzZXQgdGhlIHNoYXBlRmxhZyBzbyBpdCBjYW4gYmUgcHJvcGVybHkgdW5tb3VudGVkXHJcbiAgICAgICAgICAgIHJlc2V0U2hhcGVGbGFnKHZub2RlKTtcclxuICAgICAgICAgICAgX3VubW91bnQodm5vZGUsIGluc3RhbmNlLCBwYXJlbnRTdXNwZW5zZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGZ1bmN0aW9uIHBydW5lQ2FjaGUoZmlsdGVyKSB7XHJcbiAgICAgICAgICAgIGNhY2hlLmZvckVhY2goKHZub2RlLCBrZXkpID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IG5hbWUgPSBnZXRDb21wb25lbnROYW1lKHZub2RlLnR5cGUpO1xyXG4gICAgICAgICAgICAgICAgaWYgKG5hbWUgJiYgKCFmaWx0ZXIgfHwgIWZpbHRlcihuYW1lKSkpIHtcclxuICAgICAgICAgICAgICAgICAgICBwcnVuZUNhY2hlRW50cnkoa2V5KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGZ1bmN0aW9uIHBydW5lQ2FjaGVFbnRyeShrZXkpIHtcclxuICAgICAgICAgICAgY29uc3QgY2FjaGVkID0gY2FjaGUuZ2V0KGtleSk7XHJcbiAgICAgICAgICAgIGlmICghY3VycmVudCB8fCBjYWNoZWQudHlwZSAhPT0gY3VycmVudC50eXBlKSB7XHJcbiAgICAgICAgICAgICAgICB1bm1vdW50KGNhY2hlZCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSBpZiAoY3VycmVudCkge1xyXG4gICAgICAgICAgICAgICAgLy8gY3VycmVudCBhY3RpdmUgaW5zdGFuY2Ugc2hvdWxkIG5vIGxvbmdlciBiZSBrZXB0LWFsaXZlLlxyXG4gICAgICAgICAgICAgICAgLy8gd2UgY2FuJ3QgdW5tb3VudCBpdCBub3cgYnV0IGl0IG1pZ2h0IGJlIGxhdGVyLCBzbyByZXNldCBpdHMgZmxhZyBub3cuXHJcbiAgICAgICAgICAgICAgICByZXNldFNoYXBlRmxhZyhjdXJyZW50KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjYWNoZS5kZWxldGUoa2V5KTtcclxuICAgICAgICAgICAga2V5cy5kZWxldGUoa2V5KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gcHJ1bmUgY2FjaGUgb24gaW5jbHVkZS9leGNsdWRlIHByb3AgY2hhbmdlXHJcbiAgICAgICAgd2F0Y2goKCkgPT4gW3Byb3BzLmluY2x1ZGUsIHByb3BzLmV4Y2x1ZGVdLCAoW2luY2x1ZGUsIGV4Y2x1ZGVdKSA9PiB7XHJcbiAgICAgICAgICAgIGluY2x1ZGUgJiYgcHJ1bmVDYWNoZShuYW1lID0+IG1hdGNoZXMoaW5jbHVkZSwgbmFtZSkpO1xyXG4gICAgICAgICAgICBleGNsdWRlICYmIHBydW5lQ2FjaGUobmFtZSA9PiAhbWF0Y2hlcyhleGNsdWRlLCBuYW1lKSk7XHJcbiAgICAgICAgfSwgXHJcbiAgICAgICAgLy8gcHJ1bmUgcG9zdC1yZW5kZXIgYWZ0ZXIgYGN1cnJlbnRgIGhhcyBiZWVuIHVwZGF0ZWRcclxuICAgICAgICB7IGZsdXNoOiAncG9zdCcsIGRlZXA6IHRydWUgfSk7XHJcbiAgICAgICAgLy8gY2FjaGUgc3ViIHRyZWUgYWZ0ZXIgcmVuZGVyXHJcbiAgICAgICAgbGV0IHBlbmRpbmdDYWNoZUtleSA9IG51bGw7XHJcbiAgICAgICAgY29uc3QgY2FjaGVTdWJ0cmVlID0gKCkgPT4ge1xyXG4gICAgICAgICAgICAvLyBmaXggIzE2MjEsIHRoZSBwZW5kaW5nQ2FjaGVLZXkgY291bGQgYmUgMFxyXG4gICAgICAgICAgICBpZiAocGVuZGluZ0NhY2hlS2V5ICE9IG51bGwpIHtcclxuICAgICAgICAgICAgICAgIGNhY2hlLnNldChwZW5kaW5nQ2FjaGVLZXksIGdldElubmVyQ2hpbGQoaW5zdGFuY2Uuc3ViVHJlZSkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgICAgICBvbk1vdW50ZWQoY2FjaGVTdWJ0cmVlKTtcclxuICAgICAgICBvblVwZGF0ZWQoY2FjaGVTdWJ0cmVlKTtcclxuICAgICAgICBvbkJlZm9yZVVubW91bnQoKCkgPT4ge1xyXG4gICAgICAgICAgICBjYWNoZS5mb3JFYWNoKGNhY2hlZCA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCB7IHN1YlRyZWUsIHN1c3BlbnNlIH0gPSBpbnN0YW5jZTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHZub2RlID0gZ2V0SW5uZXJDaGlsZChzdWJUcmVlKTtcclxuICAgICAgICAgICAgICAgIGlmIChjYWNoZWQudHlwZSA9PT0gdm5vZGUudHlwZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIGN1cnJlbnQgaW5zdGFuY2Ugd2lsbCBiZSB1bm1vdW50ZWQgYXMgcGFydCBvZiBrZWVwLWFsaXZlJ3MgdW5tb3VudFxyXG4gICAgICAgICAgICAgICAgICAgIHJlc2V0U2hhcGVGbGFnKHZub2RlKTtcclxuICAgICAgICAgICAgICAgICAgICAvLyBidXQgaW52b2tlIGl0cyBkZWFjdGl2YXRlZCBob29rIGhlcmVcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBkYSA9IHZub2RlLmNvbXBvbmVudC5kYTtcclxuICAgICAgICAgICAgICAgICAgICBkYSAmJiBxdWV1ZVBvc3RSZW5kZXJFZmZlY3QoZGEsIHN1c3BlbnNlKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB1bm1vdW50KGNhY2hlZCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiAoKSA9PiB7XHJcbiAgICAgICAgICAgIHBlbmRpbmdDYWNoZUtleSA9IG51bGw7XHJcbiAgICAgICAgICAgIGlmICghc2xvdHMuZGVmYXVsdCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY29uc3QgY2hpbGRyZW4gPSBzbG90cy5kZWZhdWx0KCk7XHJcbiAgICAgICAgICAgIGNvbnN0IHJhd1ZOb2RlID0gY2hpbGRyZW5bMF07XHJcbiAgICAgICAgICAgIGlmIChjaGlsZHJlbi5sZW5ndGggPiAxKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgd2FybihgS2VlcEFsaXZlIHNob3VsZCBjb250YWluIGV4YWN0bHkgb25lIGNvbXBvbmVudCBjaGlsZC5gKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGN1cnJlbnQgPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGNoaWxkcmVuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKCFpc1ZOb2RlKHJhd1ZOb2RlKSB8fFxyXG4gICAgICAgICAgICAgICAgKCEocmF3Vk5vZGUuc2hhcGVGbGFnICYgNCAvKiBTVEFURUZVTF9DT01QT05FTlQgKi8pICYmXHJcbiAgICAgICAgICAgICAgICAgICAgIShyYXdWTm9kZS5zaGFwZUZsYWcgJiAxMjggLyogU1VTUEVOU0UgKi8pKSkge1xyXG4gICAgICAgICAgICAgICAgY3VycmVudCA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcmF3Vk5vZGU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgbGV0IHZub2RlID0gZ2V0SW5uZXJDaGlsZChyYXdWTm9kZSk7XHJcbiAgICAgICAgICAgIGNvbnN0IGNvbXAgPSB2bm9kZS50eXBlO1xyXG4gICAgICAgICAgICAvLyBmb3IgYXN5bmMgY29tcG9uZW50cywgbmFtZSBjaGVjayBzaG91bGQgYmUgYmFzZWQgaW4gaXRzIGxvYWRlZFxyXG4gICAgICAgICAgICAvLyBpbm5lciBjb21wb25lbnQgaWYgYXZhaWxhYmxlXHJcbiAgICAgICAgICAgIGNvbnN0IG5hbWUgPSBnZXRDb21wb25lbnROYW1lKGlzQXN5bmNXcmFwcGVyKHZub2RlKVxyXG4gICAgICAgICAgICAgICAgPyB2bm9kZS50eXBlLl9fYXN5bmNSZXNvbHZlZCB8fCB7fVxyXG4gICAgICAgICAgICAgICAgOiBjb21wKTtcclxuICAgICAgICAgICAgY29uc3QgeyBpbmNsdWRlLCBleGNsdWRlLCBtYXggfSA9IHByb3BzO1xyXG4gICAgICAgICAgICBpZiAoKGluY2x1ZGUgJiYgKCFuYW1lIHx8ICFtYXRjaGVzKGluY2x1ZGUsIG5hbWUpKSkgfHxcclxuICAgICAgICAgICAgICAgIChleGNsdWRlICYmIG5hbWUgJiYgbWF0Y2hlcyhleGNsdWRlLCBuYW1lKSkpIHtcclxuICAgICAgICAgICAgICAgIGN1cnJlbnQgPSB2bm9kZTtcclxuICAgICAgICAgICAgICAgIHJldHVybiByYXdWTm9kZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjb25zdCBrZXkgPSB2bm9kZS5rZXkgPT0gbnVsbCA/IGNvbXAgOiB2bm9kZS5rZXk7XHJcbiAgICAgICAgICAgIGNvbnN0IGNhY2hlZFZOb2RlID0gY2FjaGUuZ2V0KGtleSk7XHJcbiAgICAgICAgICAgIC8vIGNsb25lIHZub2RlIGlmIGl0J3MgcmV1c2VkIGJlY2F1c2Ugd2UgYXJlIGdvaW5nIHRvIG11dGF0ZSBpdFxyXG4gICAgICAgICAgICBpZiAodm5vZGUuZWwpIHtcclxuICAgICAgICAgICAgICAgIHZub2RlID0gY2xvbmVWTm9kZSh2bm9kZSk7XHJcbiAgICAgICAgICAgICAgICBpZiAocmF3Vk5vZGUuc2hhcGVGbGFnICYgMTI4IC8qIFNVU1BFTlNFICovKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmF3Vk5vZGUuc3NDb250ZW50ID0gdm5vZGU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy8gIzE1MTMgaXQncyBwb3NzaWJsZSBmb3IgdGhlIHJldHVybmVkIHZub2RlIHRvIGJlIGNsb25lZCBkdWUgdG8gYXR0clxyXG4gICAgICAgICAgICAvLyBmYWxsdGhyb3VnaCBvciBzY29wZUlkLCBzbyB0aGUgdm5vZGUgaGVyZSBtYXkgbm90IGJlIHRoZSBmaW5hbCB2bm9kZVxyXG4gICAgICAgICAgICAvLyB0aGF0IGlzIG1vdW50ZWQuIEluc3RlYWQgb2YgY2FjaGluZyBpdCBkaXJlY3RseSwgd2Ugc3RvcmUgdGhlIHBlbmRpbmdcclxuICAgICAgICAgICAgLy8ga2V5IGFuZCBjYWNoZSBgaW5zdGFuY2Uuc3ViVHJlZWAgKHRoZSBub3JtYWxpemVkIHZub2RlKSBpblxyXG4gICAgICAgICAgICAvLyBiZWZvcmVNb3VudC9iZWZvcmVVcGRhdGUgaG9va3MuXHJcbiAgICAgICAgICAgIHBlbmRpbmdDYWNoZUtleSA9IGtleTtcclxuICAgICAgICAgICAgaWYgKGNhY2hlZFZOb2RlKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBjb3B5IG92ZXIgbW91bnRlZCBzdGF0ZVxyXG4gICAgICAgICAgICAgICAgdm5vZGUuZWwgPSBjYWNoZWRWTm9kZS5lbDtcclxuICAgICAgICAgICAgICAgIHZub2RlLmNvbXBvbmVudCA9IGNhY2hlZFZOb2RlLmNvbXBvbmVudDtcclxuICAgICAgICAgICAgICAgIGlmICh2bm9kZS50cmFuc2l0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gcmVjdXJzaXZlbHkgdXBkYXRlIHRyYW5zaXRpb24gaG9va3Mgb24gc3ViVHJlZVxyXG4gICAgICAgICAgICAgICAgICAgIHNldFRyYW5zaXRpb25Ib29rcyh2bm9kZSwgdm5vZGUudHJhbnNpdGlvbik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAvLyBhdm9pZCB2bm9kZSBiZWluZyBtb3VudGVkIGFzIGZyZXNoXHJcbiAgICAgICAgICAgICAgICB2bm9kZS5zaGFwZUZsYWcgfD0gNTEyIC8qIENPTVBPTkVOVF9LRVBUX0FMSVZFICovO1xyXG4gICAgICAgICAgICAgICAgLy8gbWFrZSB0aGlzIGtleSB0aGUgZnJlc2hlc3RcclxuICAgICAgICAgICAgICAgIGtleXMuZGVsZXRlKGtleSk7XHJcbiAgICAgICAgICAgICAgICBrZXlzLmFkZChrZXkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAga2V5cy5hZGQoa2V5KTtcclxuICAgICAgICAgICAgICAgIC8vIHBydW5lIG9sZGVzdCBlbnRyeVxyXG4gICAgICAgICAgICAgICAgaWYgKG1heCAmJiBrZXlzLnNpemUgPiBwYXJzZUludChtYXgsIDEwKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHBydW5lQ2FjaGVFbnRyeShrZXlzLnZhbHVlcygpLm5leHQoKS52YWx1ZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy8gYXZvaWQgdm5vZGUgYmVpbmcgdW5tb3VudGVkXHJcbiAgICAgICAgICAgIHZub2RlLnNoYXBlRmxhZyB8PSAyNTYgLyogQ09NUE9ORU5UX1NIT1VMRF9LRUVQX0FMSVZFICovO1xyXG4gICAgICAgICAgICBjdXJyZW50ID0gdm5vZGU7XHJcbiAgICAgICAgICAgIHJldHVybiByYXdWTm9kZTtcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG59O1xyXG4vLyBleHBvcnQgdGhlIHB1YmxpYyB0eXBlIGZvciBoL3RzeCBpbmZlcmVuY2VcclxuLy8gYWxzbyB0byBhdm9pZCBpbmxpbmUgaW1wb3J0KCkgaW4gZ2VuZXJhdGVkIGQudHMgZmlsZXNcclxuY29uc3QgS2VlcEFsaXZlID0gS2VlcEFsaXZlSW1wbDtcclxuZnVuY3Rpb24gbWF0Y2hlcyhwYXR0ZXJuLCBuYW1lKSB7XHJcbiAgICBpZiAoaXNBcnJheShwYXR0ZXJuKSkge1xyXG4gICAgICAgIHJldHVybiBwYXR0ZXJuLnNvbWUoKHApID0+IG1hdGNoZXMocCwgbmFtZSkpO1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZiAoaXNTdHJpbmcocGF0dGVybikpIHtcclxuICAgICAgICByZXR1cm4gcGF0dGVybi5zcGxpdCgnLCcpLmluZGV4T2YobmFtZSkgPiAtMTtcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKHBhdHRlcm4udGVzdCkge1xyXG4gICAgICAgIHJldHVybiBwYXR0ZXJuLnRlc3QobmFtZSk7XHJcbiAgICB9XHJcbiAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xyXG4gICAgcmV0dXJuIGZhbHNlO1xyXG59XHJcbmZ1bmN0aW9uIG9uQWN0aXZhdGVkKGhvb2ssIHRhcmdldCkge1xyXG4gICAgcmVnaXN0ZXJLZWVwQWxpdmVIb29rKGhvb2ssIFwiYVwiIC8qIEFDVElWQVRFRCAqLywgdGFyZ2V0KTtcclxufVxyXG5mdW5jdGlvbiBvbkRlYWN0aXZhdGVkKGhvb2ssIHRhcmdldCkge1xyXG4gICAgcmVnaXN0ZXJLZWVwQWxpdmVIb29rKGhvb2ssIFwiZGFcIiAvKiBERUFDVElWQVRFRCAqLywgdGFyZ2V0KTtcclxufVxyXG5mdW5jdGlvbiByZWdpc3RlcktlZXBBbGl2ZUhvb2soaG9vaywgdHlwZSwgdGFyZ2V0ID0gY3VycmVudEluc3RhbmNlKSB7XHJcbiAgICAvLyBjYWNoZSB0aGUgZGVhY3RpdmF0ZSBicmFuY2ggY2hlY2sgd3JhcHBlciBmb3IgaW5qZWN0ZWQgaG9va3Mgc28gdGhlIHNhbWVcclxuICAgIC8vIGhvb2sgY2FuIGJlIHByb3Blcmx5IGRlZHVwZWQgYnkgdGhlIHNjaGVkdWxlci4gXCJfX3dkY1wiIHN0YW5kcyBmb3IgXCJ3aXRoXHJcbiAgICAvLyBkZWFjdGl2YXRpb24gY2hlY2tcIi5cclxuICAgIGNvbnN0IHdyYXBwZWRIb29rID0gaG9vay5fX3dkYyB8fFxyXG4gICAgICAgIChob29rLl9fd2RjID0gKCkgPT4ge1xyXG4gICAgICAgICAgICAvLyBvbmx5IGZpcmUgdGhlIGhvb2sgaWYgdGhlIHRhcmdldCBpbnN0YW5jZSBpcyBOT1QgaW4gYSBkZWFjdGl2YXRlZCBicmFuY2guXHJcbiAgICAgICAgICAgIGxldCBjdXJyZW50ID0gdGFyZ2V0O1xyXG4gICAgICAgICAgICB3aGlsZSAoY3VycmVudCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKGN1cnJlbnQuaXNEZWFjdGl2YXRlZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGN1cnJlbnQgPSBjdXJyZW50LnBhcmVudDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gaG9vaygpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgaW5qZWN0SG9vayh0eXBlLCB3cmFwcGVkSG9vaywgdGFyZ2V0KTtcclxuICAgIC8vIEluIGFkZGl0aW9uIHRvIHJlZ2lzdGVyaW5nIGl0IG9uIHRoZSB0YXJnZXQgaW5zdGFuY2UsIHdlIHdhbGsgdXAgdGhlIHBhcmVudFxyXG4gICAgLy8gY2hhaW4gYW5kIHJlZ2lzdGVyIGl0IG9uIGFsbCBhbmNlc3RvciBpbnN0YW5jZXMgdGhhdCBhcmUga2VlcC1hbGl2ZSByb290cy5cclxuICAgIC8vIFRoaXMgYXZvaWRzIHRoZSBuZWVkIHRvIHdhbGsgdGhlIGVudGlyZSBjb21wb25lbnQgdHJlZSB3aGVuIGludm9raW5nIHRoZXNlXHJcbiAgICAvLyBob29rcywgYW5kIG1vcmUgaW1wb3J0YW50bHksIGF2b2lkcyB0aGUgbmVlZCB0byB0cmFjayBjaGlsZCBjb21wb25lbnRzIGluXHJcbiAgICAvLyBhcnJheXMuXHJcbiAgICBpZiAodGFyZ2V0KSB7XHJcbiAgICAgICAgbGV0IGN1cnJlbnQgPSB0YXJnZXQucGFyZW50O1xyXG4gICAgICAgIHdoaWxlIChjdXJyZW50ICYmIGN1cnJlbnQucGFyZW50KSB7XHJcbiAgICAgICAgICAgIGlmIChpc0tlZXBBbGl2ZShjdXJyZW50LnBhcmVudC52bm9kZSkpIHtcclxuICAgICAgICAgICAgICAgIGluamVjdFRvS2VlcEFsaXZlUm9vdCh3cmFwcGVkSG9vaywgdHlwZSwgdGFyZ2V0LCBjdXJyZW50KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjdXJyZW50ID0gY3VycmVudC5wYXJlbnQ7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbmZ1bmN0aW9uIGluamVjdFRvS2VlcEFsaXZlUm9vdChob29rLCB0eXBlLCB0YXJnZXQsIGtlZXBBbGl2ZVJvb3QpIHtcclxuICAgIC8vIGluamVjdEhvb2sgd3JhcHMgdGhlIG9yaWdpbmFsIGZvciBlcnJvciBoYW5kbGluZywgc28gbWFrZSBzdXJlIHRvIHJlbW92ZVxyXG4gICAgLy8gdGhlIHdyYXBwZWQgdmVyc2lvbi5cclxuICAgIGNvbnN0IGluamVjdGVkID0gaW5qZWN0SG9vayh0eXBlLCBob29rLCBrZWVwQWxpdmVSb290LCB0cnVlIC8qIHByZXBlbmQgKi8pO1xyXG4gICAgb25Vbm1vdW50ZWQoKCkgPT4ge1xyXG4gICAgICAgIHJlbW92ZShrZWVwQWxpdmVSb290W3R5cGVdLCBpbmplY3RlZCk7XHJcbiAgICB9LCB0YXJnZXQpO1xyXG59XHJcbmZ1bmN0aW9uIHJlc2V0U2hhcGVGbGFnKHZub2RlKSB7XHJcbiAgICBsZXQgc2hhcGVGbGFnID0gdm5vZGUuc2hhcGVGbGFnO1xyXG4gICAgaWYgKHNoYXBlRmxhZyAmIDI1NiAvKiBDT01QT05FTlRfU0hPVUxEX0tFRVBfQUxJVkUgKi8pIHtcclxuICAgICAgICBzaGFwZUZsYWcgLT0gMjU2IC8qIENPTVBPTkVOVF9TSE9VTERfS0VFUF9BTElWRSAqLztcclxuICAgIH1cclxuICAgIGlmIChzaGFwZUZsYWcgJiA1MTIgLyogQ09NUE9ORU5UX0tFUFRfQUxJVkUgKi8pIHtcclxuICAgICAgICBzaGFwZUZsYWcgLT0gNTEyIC8qIENPTVBPTkVOVF9LRVBUX0FMSVZFICovO1xyXG4gICAgfVxyXG4gICAgdm5vZGUuc2hhcGVGbGFnID0gc2hhcGVGbGFnO1xyXG59XHJcbmZ1bmN0aW9uIGdldElubmVyQ2hpbGQodm5vZGUpIHtcclxuICAgIHJldHVybiB2bm9kZS5zaGFwZUZsYWcgJiAxMjggLyogU1VTUEVOU0UgKi8gPyB2bm9kZS5zc0NvbnRlbnQgOiB2bm9kZTtcclxufVxuXG5mdW5jdGlvbiBpbmplY3RIb29rKHR5cGUsIGhvb2ssIHRhcmdldCA9IGN1cnJlbnRJbnN0YW5jZSwgcHJlcGVuZCA9IGZhbHNlKSB7XHJcbiAgICBpZiAodGFyZ2V0KSB7XHJcbiAgICAgICAgY29uc3QgaG9va3MgPSB0YXJnZXRbdHlwZV0gfHwgKHRhcmdldFt0eXBlXSA9IFtdKTtcclxuICAgICAgICAvLyBjYWNoZSB0aGUgZXJyb3IgaGFuZGxpbmcgd3JhcHBlciBmb3IgaW5qZWN0ZWQgaG9va3Mgc28gdGhlIHNhbWUgaG9va1xyXG4gICAgICAgIC8vIGNhbiBiZSBwcm9wZXJseSBkZWR1cGVkIGJ5IHRoZSBzY2hlZHVsZXIuIFwiX193ZWhcIiBzdGFuZHMgZm9yIFwid2l0aCBlcnJvclxyXG4gICAgICAgIC8vIGhhbmRsaW5nXCIuXHJcbiAgICAgICAgY29uc3Qgd3JhcHBlZEhvb2sgPSBob29rLl9fd2VoIHx8XHJcbiAgICAgICAgICAgIChob29rLl9fd2VoID0gKC4uLmFyZ3MpID0+IHtcclxuICAgICAgICAgICAgICAgIGlmICh0YXJnZXQuaXNVbm1vdW50ZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAvLyBkaXNhYmxlIHRyYWNraW5nIGluc2lkZSBhbGwgbGlmZWN5Y2xlIGhvb2tzXHJcbiAgICAgICAgICAgICAgICAvLyBzaW5jZSB0aGV5IGNhbiBwb3RlbnRpYWxseSBiZSBjYWxsZWQgaW5zaWRlIGVmZmVjdHMuXHJcbiAgICAgICAgICAgICAgICBwYXVzZVRyYWNraW5nKCk7XHJcbiAgICAgICAgICAgICAgICAvLyBTZXQgY3VycmVudEluc3RhbmNlIGR1cmluZyBob29rIGludm9jYXRpb24uXHJcbiAgICAgICAgICAgICAgICAvLyBUaGlzIGFzc3VtZXMgdGhlIGhvb2sgZG9lcyBub3Qgc3luY2hyb25vdXNseSB0cmlnZ2VyIG90aGVyIGhvb2tzLCB3aGljaFxyXG4gICAgICAgICAgICAgICAgLy8gY2FuIG9ubHkgYmUgZmFsc2Ugd2hlbiB0aGUgdXNlciBkb2VzIHNvbWV0aGluZyByZWFsbHkgZnVua3kuXHJcbiAgICAgICAgICAgICAgICBzZXRDdXJyZW50SW5zdGFuY2UodGFyZ2V0KTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHJlcyA9IGNhbGxXaXRoQXN5bmNFcnJvckhhbmRsaW5nKGhvb2ssIHRhcmdldCwgdHlwZSwgYXJncyk7XHJcbiAgICAgICAgICAgICAgICB1bnNldEN1cnJlbnRJbnN0YW5jZSgpO1xyXG4gICAgICAgICAgICAgICAgcmVzZXRUcmFja2luZygpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlcztcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgaWYgKHByZXBlbmQpIHtcclxuICAgICAgICAgICAgaG9va3MudW5zaGlmdCh3cmFwcGVkSG9vayk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBob29rcy5wdXNoKHdyYXBwZWRIb29rKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHdyYXBwZWRIb29rO1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpKSB7XHJcbiAgICAgICAgY29uc3QgYXBpTmFtZSA9IHRvSGFuZGxlcktleShFcnJvclR5cGVTdHJpbmdzW3R5cGVdLnJlcGxhY2UoLyBob29rJC8sICcnKSk7XHJcbiAgICAgICAgd2FybihgJHthcGlOYW1lfSBpcyBjYWxsZWQgd2hlbiB0aGVyZSBpcyBubyBhY3RpdmUgY29tcG9uZW50IGluc3RhbmNlIHRvIGJlIGAgK1xyXG4gICAgICAgICAgICBgYXNzb2NpYXRlZCB3aXRoLiBgICtcclxuICAgICAgICAgICAgYExpZmVjeWNsZSBpbmplY3Rpb24gQVBJcyBjYW4gb25seSBiZSB1c2VkIGR1cmluZyBleGVjdXRpb24gb2Ygc2V0dXAoKS5gICtcclxuICAgICAgICAgICAgKGAgSWYgeW91IGFyZSB1c2luZyBhc3luYyBzZXR1cCgpLCBtYWtlIHN1cmUgdG8gcmVnaXN0ZXIgbGlmZWN5Y2xlIGAgK1xyXG4gICAgICAgICAgICAgICAgICAgIGBob29rcyBiZWZvcmUgdGhlIGZpcnN0IGF3YWl0IHN0YXRlbWVudC5gXHJcbiAgICAgICAgICAgICAgICApKTtcclxuICAgIH1cclxufVxyXG5jb25zdCBjcmVhdGVIb29rID0gKGxpZmVjeWNsZSkgPT4gKGhvb2ssIHRhcmdldCA9IGN1cnJlbnRJbnN0YW5jZSkgPT4gXHJcbi8vIHBvc3QtY3JlYXRlIGxpZmVjeWNsZSByZWdpc3RyYXRpb25zIGFyZSBub29wcyBkdXJpbmcgU1NSIChleGNlcHQgZm9yIHNlcnZlclByZWZldGNoKVxyXG4oIWlzSW5TU1JDb21wb25lbnRTZXR1cCB8fCBsaWZlY3ljbGUgPT09IFwic3BcIiAvKiBTRVJWRVJfUFJFRkVUQ0ggKi8pICYmXHJcbiAgICBpbmplY3RIb29rKGxpZmVjeWNsZSwgaG9vaywgdGFyZ2V0KTtcclxuY29uc3Qgb25CZWZvcmVNb3VudCA9IGNyZWF0ZUhvb2soXCJibVwiIC8qIEJFRk9SRV9NT1VOVCAqLyk7XHJcbmNvbnN0IG9uTW91bnRlZCA9IGNyZWF0ZUhvb2soXCJtXCIgLyogTU9VTlRFRCAqLyk7XHJcbmNvbnN0IG9uQmVmb3JlVXBkYXRlID0gY3JlYXRlSG9vayhcImJ1XCIgLyogQkVGT1JFX1VQREFURSAqLyk7XHJcbmNvbnN0IG9uVXBkYXRlZCA9IGNyZWF0ZUhvb2soXCJ1XCIgLyogVVBEQVRFRCAqLyk7XHJcbmNvbnN0IG9uQmVmb3JlVW5tb3VudCA9IGNyZWF0ZUhvb2soXCJidW1cIiAvKiBCRUZPUkVfVU5NT1VOVCAqLyk7XHJcbmNvbnN0IG9uVW5tb3VudGVkID0gY3JlYXRlSG9vayhcInVtXCIgLyogVU5NT1VOVEVEICovKTtcclxuY29uc3Qgb25TZXJ2ZXJQcmVmZXRjaCA9IGNyZWF0ZUhvb2soXCJzcFwiIC8qIFNFUlZFUl9QUkVGRVRDSCAqLyk7XHJcbmNvbnN0IG9uUmVuZGVyVHJpZ2dlcmVkID0gY3JlYXRlSG9vayhcInJ0Z1wiIC8qIFJFTkRFUl9UUklHR0VSRUQgKi8pO1xyXG5jb25zdCBvblJlbmRlclRyYWNrZWQgPSBjcmVhdGVIb29rKFwicnRjXCIgLyogUkVOREVSX1RSQUNLRUQgKi8pO1xyXG5mdW5jdGlvbiBvbkVycm9yQ2FwdHVyZWQoaG9vaywgdGFyZ2V0ID0gY3VycmVudEluc3RhbmNlKSB7XHJcbiAgICBpbmplY3RIb29rKFwiZWNcIiAvKiBFUlJPUl9DQVBUVVJFRCAqLywgaG9vaywgdGFyZ2V0KTtcclxufVxuXG5mdW5jdGlvbiBjcmVhdGVEdXBsaWNhdGVDaGVja2VyKCkge1xyXG4gICAgY29uc3QgY2FjaGUgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xyXG4gICAgcmV0dXJuICh0eXBlLCBrZXkpID0+IHtcclxuICAgICAgICBpZiAoY2FjaGVba2V5XSkge1xyXG4gICAgICAgICAgICB3YXJuKGAke3R5cGV9IHByb3BlcnR5IFwiJHtrZXl9XCIgaXMgYWxyZWFkeSBkZWZpbmVkIGluICR7Y2FjaGVba2V5XX0uYCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBjYWNoZVtrZXldID0gdHlwZTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG59XHJcbmxldCBzaG91bGRDYWNoZUFjY2VzcyA9IHRydWU7XHJcbmZ1bmN0aW9uIGFwcGx5T3B0aW9ucyhpbnN0YW5jZSkge1xyXG4gICAgY29uc3Qgb3B0aW9ucyA9IHJlc29sdmVNZXJnZWRPcHRpb25zKGluc3RhbmNlKTtcclxuICAgIGNvbnN0IHB1YmxpY1RoaXMgPSBpbnN0YW5jZS5wcm94eTtcclxuICAgIGNvbnN0IGN0eCA9IGluc3RhbmNlLmN0eDtcclxuICAgIC8vIGRvIG5vdCBjYWNoZSBwcm9wZXJ0eSBhY2Nlc3Mgb24gcHVibGljIHByb3h5IGR1cmluZyBzdGF0ZSBpbml0aWFsaXphdGlvblxyXG4gICAgc2hvdWxkQ2FjaGVBY2Nlc3MgPSBmYWxzZTtcclxuICAgIC8vIGNhbGwgYmVmb3JlQ3JlYXRlIGZpcnN0IGJlZm9yZSBhY2Nlc3Npbmcgb3RoZXIgb3B0aW9ucyBzaW5jZVxyXG4gICAgLy8gdGhlIGhvb2sgbWF5IG11dGF0ZSByZXNvbHZlZCBvcHRpb25zICgjMjc5MSlcclxuICAgIGlmIChvcHRpb25zLmJlZm9yZUNyZWF0ZSkge1xyXG4gICAgICAgIGNhbGxIb29rKG9wdGlvbnMuYmVmb3JlQ3JlYXRlLCBpbnN0YW5jZSwgXCJiY1wiIC8qIEJFRk9SRV9DUkVBVEUgKi8pO1xyXG4gICAgfVxyXG4gICAgY29uc3QgeyBcclxuICAgIC8vIHN0YXRlXHJcbiAgICBkYXRhOiBkYXRhT3B0aW9ucywgY29tcHV0ZWQ6IGNvbXB1dGVkT3B0aW9ucywgbWV0aG9kcywgd2F0Y2g6IHdhdGNoT3B0aW9ucywgcHJvdmlkZTogcHJvdmlkZU9wdGlvbnMsIGluamVjdDogaW5qZWN0T3B0aW9ucywgXHJcbiAgICAvLyBsaWZlY3ljbGVcclxuICAgIGNyZWF0ZWQsIGJlZm9yZU1vdW50LCBtb3VudGVkLCBiZWZvcmVVcGRhdGUsIHVwZGF0ZWQsIGFjdGl2YXRlZCwgZGVhY3RpdmF0ZWQsIGJlZm9yZURlc3Ryb3ksIGJlZm9yZVVubW91bnQsIGRlc3Ryb3llZCwgdW5tb3VudGVkLCByZW5kZXIsIHJlbmRlclRyYWNrZWQsIHJlbmRlclRyaWdnZXJlZCwgZXJyb3JDYXB0dXJlZCwgc2VydmVyUHJlZmV0Y2gsIFxyXG4gICAgLy8gcHVibGljIEFQSVxyXG4gICAgZXhwb3NlLCBpbmhlcml0QXR0cnMsIFxyXG4gICAgLy8gYXNzZXRzXHJcbiAgICBjb21wb25lbnRzLCBkaXJlY3RpdmVzLCBmaWx0ZXJzIH0gPSBvcHRpb25zO1xyXG4gICAgY29uc3QgY2hlY2tEdXBsaWNhdGVQcm9wZXJ0aWVzID0gKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpID8gY3JlYXRlRHVwbGljYXRlQ2hlY2tlcigpIDogbnVsbDtcclxuICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykpIHtcclxuICAgICAgICBjb25zdCBbcHJvcHNPcHRpb25zXSA9IGluc3RhbmNlLnByb3BzT3B0aW9ucztcclxuICAgICAgICBpZiAocHJvcHNPcHRpb25zKSB7XHJcbiAgICAgICAgICAgIGZvciAoY29uc3Qga2V5IGluIHByb3BzT3B0aW9ucykge1xyXG4gICAgICAgICAgICAgICAgY2hlY2tEdXBsaWNhdGVQcm9wZXJ0aWVzKFwiUHJvcHNcIiAvKiBQUk9QUyAqLywga2V5KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIC8vIG9wdGlvbnMgaW5pdGlhbGl6YXRpb24gb3JkZXIgKHRvIGJlIGNvbnNpc3RlbnQgd2l0aCBWdWUgMik6XHJcbiAgICAvLyAtIHByb3BzIChhbHJlYWR5IGRvbmUgb3V0c2lkZSBvZiB0aGlzIGZ1bmN0aW9uKVxyXG4gICAgLy8gLSBpbmplY3RcclxuICAgIC8vIC0gbWV0aG9kc1xyXG4gICAgLy8gLSBkYXRhIChkZWZlcnJlZCBzaW5jZSBpdCByZWxpZXMgb24gYHRoaXNgIGFjY2VzcylcclxuICAgIC8vIC0gY29tcHV0ZWRcclxuICAgIC8vIC0gd2F0Y2ggKGRlZmVycmVkIHNpbmNlIGl0IHJlbGllcyBvbiBgdGhpc2AgYWNjZXNzKVxyXG4gICAgaWYgKGluamVjdE9wdGlvbnMpIHtcclxuICAgICAgICByZXNvbHZlSW5qZWN0aW9ucyhpbmplY3RPcHRpb25zLCBjdHgsIGNoZWNrRHVwbGljYXRlUHJvcGVydGllcywgaW5zdGFuY2UuYXBwQ29udGV4dC5jb25maWcudW53cmFwSW5qZWN0ZWRSZWYpO1xyXG4gICAgfVxyXG4gICAgaWYgKG1ldGhvZHMpIHtcclxuICAgICAgICBmb3IgKGNvbnN0IGtleSBpbiBtZXRob2RzKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IG1ldGhvZEhhbmRsZXIgPSBtZXRob2RzW2tleV07XHJcbiAgICAgICAgICAgIGlmIChpc0Z1bmN0aW9uKG1ldGhvZEhhbmRsZXIpKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBJbiBkZXYgbW9kZSwgd2UgdXNlIHRoZSBgY3JlYXRlUmVuZGVyQ29udGV4dGAgZnVuY3Rpb24gdG8gZGVmaW5lXHJcbiAgICAgICAgICAgICAgICAvLyBtZXRob2RzIHRvIHRoZSBwcm94eSB0YXJnZXQsIGFuZCB0aG9zZSBhcmUgcmVhZC1vbmx5IGJ1dFxyXG4gICAgICAgICAgICAgICAgLy8gcmVjb25maWd1cmFibGUsIHNvIGl0IG5lZWRzIHRvIGJlIHJlZGVmaW5lZCBoZXJlXHJcbiAgICAgICAgICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGN0eCwga2V5LCB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBtZXRob2RIYW5kbGVyLmJpbmQocHVibGljVGhpcyksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgd3JpdGFibGU6IHRydWVcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGN0eFtrZXldID0gbWV0aG9kSGFuZGxlci5iaW5kKHB1YmxpY1RoaXMpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNoZWNrRHVwbGljYXRlUHJvcGVydGllcyhcIk1ldGhvZHNcIiAvKiBNRVRIT0RTICovLCBrZXkpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSkge1xyXG4gICAgICAgICAgICAgICAgd2FybihgTWV0aG9kIFwiJHtrZXl9XCIgaGFzIHR5cGUgXCIke3R5cGVvZiBtZXRob2RIYW5kbGVyfVwiIGluIHRoZSBjb21wb25lbnQgZGVmaW5pdGlvbi4gYCArXHJcbiAgICAgICAgICAgICAgICAgICAgYERpZCB5b3UgcmVmZXJlbmNlIHRoZSBmdW5jdGlvbiBjb3JyZWN0bHk/YCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBpZiAoZGF0YU9wdGlvbnMpIHtcclxuICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmICFpc0Z1bmN0aW9uKGRhdGFPcHRpb25zKSkge1xyXG4gICAgICAgICAgICB3YXJuKGBUaGUgZGF0YSBvcHRpb24gbXVzdCBiZSBhIGZ1bmN0aW9uLiBgICtcclxuICAgICAgICAgICAgICAgIGBQbGFpbiBvYmplY3QgdXNhZ2UgaXMgbm8gbG9uZ2VyIHN1cHBvcnRlZC5gKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgZGF0YSA9IGRhdGFPcHRpb25zLmNhbGwocHVibGljVGhpcywgcHVibGljVGhpcyk7XHJcbiAgICAgICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSAmJiBpc1Byb21pc2UoZGF0YSkpIHtcclxuICAgICAgICAgICAgd2FybihgZGF0YSgpIHJldHVybmVkIGEgUHJvbWlzZSAtIG5vdGUgZGF0YSgpIGNhbm5vdCBiZSBhc3luYzsgSWYgeW91IGAgK1xyXG4gICAgICAgICAgICAgICAgYGludGVuZCB0byBwZXJmb3JtIGRhdGEgZmV0Y2hpbmcgYmVmb3JlIGNvbXBvbmVudCByZW5kZXJzLCB1c2UgYCArXHJcbiAgICAgICAgICAgICAgICBgYXN5bmMgc2V0dXAoKSArIDxTdXNwZW5zZT4uYCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICghaXNPYmplY3QoZGF0YSkpIHtcclxuICAgICAgICAgICAgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmIHdhcm4oYGRhdGEoKSBzaG91bGQgcmV0dXJuIGFuIG9iamVjdC5gKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGluc3RhbmNlLmRhdGEgPSByZWFjdGl2ZShkYXRhKTtcclxuICAgICAgICAgICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSkge1xyXG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNoZWNrRHVwbGljYXRlUHJvcGVydGllcyhcIkRhdGFcIiAvKiBEQVRBICovLCBrZXkpO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIGV4cG9zZSBkYXRhIG9uIGN0eCBkdXJpbmcgZGV2XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGtleVswXSAhPT0gJyQnICYmIGtleVswXSAhPT0gJ18nKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShjdHgsIGtleSwge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdldDogKCkgPT4gZGF0YVtrZXldLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0OiBOT09QXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIC8vIHN0YXRlIGluaXRpYWxpemF0aW9uIGNvbXBsZXRlIGF0IHRoaXMgcG9pbnQgLSBzdGFydCBjYWNoaW5nIGFjY2Vzc1xyXG4gICAgc2hvdWxkQ2FjaGVBY2Nlc3MgPSB0cnVlO1xyXG4gICAgaWYgKGNvbXB1dGVkT3B0aW9ucykge1xyXG4gICAgICAgIGZvciAoY29uc3Qga2V5IGluIGNvbXB1dGVkT3B0aW9ucykge1xyXG4gICAgICAgICAgICBjb25zdCBvcHQgPSBjb21wdXRlZE9wdGlvbnNba2V5XTtcclxuICAgICAgICAgICAgY29uc3QgZ2V0ID0gaXNGdW5jdGlvbihvcHQpXHJcbiAgICAgICAgICAgICAgICA/IG9wdC5iaW5kKHB1YmxpY1RoaXMsIHB1YmxpY1RoaXMpXHJcbiAgICAgICAgICAgICAgICA6IGlzRnVuY3Rpb24ob3B0LmdldClcclxuICAgICAgICAgICAgICAgICAgICA/IG9wdC5nZXQuYmluZChwdWJsaWNUaGlzLCBwdWJsaWNUaGlzKVxyXG4gICAgICAgICAgICAgICAgICAgIDogTk9PUDtcclxuICAgICAgICAgICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSAmJiBnZXQgPT09IE5PT1ApIHtcclxuICAgICAgICAgICAgICAgIHdhcm4oYENvbXB1dGVkIHByb3BlcnR5IFwiJHtrZXl9XCIgaGFzIG5vIGdldHRlci5gKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjb25zdCBzZXQgPSAhaXNGdW5jdGlvbihvcHQpICYmIGlzRnVuY3Rpb24ob3B0LnNldClcclxuICAgICAgICAgICAgICAgID8gb3B0LnNldC5iaW5kKHB1YmxpY1RoaXMpXHJcbiAgICAgICAgICAgICAgICA6IChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKVxyXG4gICAgICAgICAgICAgICAgICAgID8gKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB3YXJuKGBXcml0ZSBvcGVyYXRpb24gZmFpbGVkOiBjb21wdXRlZCBwcm9wZXJ0eSBcIiR7a2V5fVwiIGlzIHJlYWRvbmx5LmApO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICA6IE5PT1A7XHJcbiAgICAgICAgICAgIGNvbnN0IGMgPSBjb21wdXRlZCh7XHJcbiAgICAgICAgICAgICAgICBnZXQsXHJcbiAgICAgICAgICAgICAgICBzZXRcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShjdHgsIGtleSwge1xyXG4gICAgICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIGdldDogKCkgPT4gYy52YWx1ZSxcclxuICAgICAgICAgICAgICAgIHNldDogdiA9PiAoYy52YWx1ZSA9IHYpXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpKSB7XHJcbiAgICAgICAgICAgICAgICBjaGVja0R1cGxpY2F0ZVByb3BlcnRpZXMoXCJDb21wdXRlZFwiIC8qIENPTVBVVEVEICovLCBrZXkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgaWYgKHdhdGNoT3B0aW9ucykge1xyXG4gICAgICAgIGZvciAoY29uc3Qga2V5IGluIHdhdGNoT3B0aW9ucykge1xyXG4gICAgICAgICAgICBjcmVhdGVXYXRjaGVyKHdhdGNoT3B0aW9uc1trZXldLCBjdHgsIHB1YmxpY1RoaXMsIGtleSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgaWYgKHByb3ZpZGVPcHRpb25zKSB7XHJcbiAgICAgICAgY29uc3QgcHJvdmlkZXMgPSBpc0Z1bmN0aW9uKHByb3ZpZGVPcHRpb25zKVxyXG4gICAgICAgICAgICA/IHByb3ZpZGVPcHRpb25zLmNhbGwocHVibGljVGhpcylcclxuICAgICAgICAgICAgOiBwcm92aWRlT3B0aW9ucztcclxuICAgICAgICBSZWZsZWN0Lm93bktleXMocHJvdmlkZXMpLmZvckVhY2goa2V5ID0+IHtcclxuICAgICAgICAgICAgcHJvdmlkZShrZXksIHByb3ZpZGVzW2tleV0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgaWYgKGNyZWF0ZWQpIHtcclxuICAgICAgICBjYWxsSG9vayhjcmVhdGVkLCBpbnN0YW5jZSwgXCJjXCIgLyogQ1JFQVRFRCAqLyk7XHJcbiAgICB9XHJcbiAgICBmdW5jdGlvbiByZWdpc3RlckxpZmVjeWNsZUhvb2socmVnaXN0ZXIsIGhvb2spIHtcclxuICAgICAgICBpZiAoaXNBcnJheShob29rKSkge1xyXG4gICAgICAgICAgICBob29rLmZvckVhY2goX2hvb2sgPT4gcmVnaXN0ZXIoX2hvb2suYmluZChwdWJsaWNUaGlzKSkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChob29rKSB7XHJcbiAgICAgICAgICAgIHJlZ2lzdGVyKGhvb2suYmluZChwdWJsaWNUaGlzKSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmVnaXN0ZXJMaWZlY3ljbGVIb29rKG9uQmVmb3JlTW91bnQsIGJlZm9yZU1vdW50KTtcclxuICAgIHJlZ2lzdGVyTGlmZWN5Y2xlSG9vayhvbk1vdW50ZWQsIG1vdW50ZWQpO1xyXG4gICAgcmVnaXN0ZXJMaWZlY3ljbGVIb29rKG9uQmVmb3JlVXBkYXRlLCBiZWZvcmVVcGRhdGUpO1xyXG4gICAgcmVnaXN0ZXJMaWZlY3ljbGVIb29rKG9uVXBkYXRlZCwgdXBkYXRlZCk7XHJcbiAgICByZWdpc3RlckxpZmVjeWNsZUhvb2sob25BY3RpdmF0ZWQsIGFjdGl2YXRlZCk7XHJcbiAgICByZWdpc3RlckxpZmVjeWNsZUhvb2sob25EZWFjdGl2YXRlZCwgZGVhY3RpdmF0ZWQpO1xyXG4gICAgcmVnaXN0ZXJMaWZlY3ljbGVIb29rKG9uRXJyb3JDYXB0dXJlZCwgZXJyb3JDYXB0dXJlZCk7XHJcbiAgICByZWdpc3RlckxpZmVjeWNsZUhvb2sob25SZW5kZXJUcmFja2VkLCByZW5kZXJUcmFja2VkKTtcclxuICAgIHJlZ2lzdGVyTGlmZWN5Y2xlSG9vayhvblJlbmRlclRyaWdnZXJlZCwgcmVuZGVyVHJpZ2dlcmVkKTtcclxuICAgIHJlZ2lzdGVyTGlmZWN5Y2xlSG9vayhvbkJlZm9yZVVubW91bnQsIGJlZm9yZVVubW91bnQpO1xyXG4gICAgcmVnaXN0ZXJMaWZlY3ljbGVIb29rKG9uVW5tb3VudGVkLCB1bm1vdW50ZWQpO1xyXG4gICAgcmVnaXN0ZXJMaWZlY3ljbGVIb29rKG9uU2VydmVyUHJlZmV0Y2gsIHNlcnZlclByZWZldGNoKTtcclxuICAgIGlmIChpc0FycmF5KGV4cG9zZSkpIHtcclxuICAgICAgICBpZiAoZXhwb3NlLmxlbmd0aCkge1xyXG4gICAgICAgICAgICBjb25zdCBleHBvc2VkID0gaW5zdGFuY2UuZXhwb3NlZCB8fCAoaW5zdGFuY2UuZXhwb3NlZCA9IHt9KTtcclxuICAgICAgICAgICAgZXhwb3NlLmZvckVhY2goa2V5ID0+IHtcclxuICAgICAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvc2VkLCBrZXksIHtcclxuICAgICAgICAgICAgICAgICAgICBnZXQ6ICgpID0+IHB1YmxpY1RoaXNba2V5XSxcclxuICAgICAgICAgICAgICAgICAgICBzZXQ6IHZhbCA9PiAocHVibGljVGhpc1trZXldID0gdmFsKVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmICghaW5zdGFuY2UuZXhwb3NlZCkge1xyXG4gICAgICAgICAgICBpbnN0YW5jZS5leHBvc2VkID0ge307XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgLy8gb3B0aW9ucyB0aGF0IGFyZSBoYW5kbGVkIHdoZW4gY3JlYXRpbmcgdGhlIGluc3RhbmNlIGJ1dCBhbHNvIG5lZWQgdG8gYmVcclxuICAgIC8vIGFwcGxpZWQgZnJvbSBtaXhpbnNcclxuICAgIGlmIChyZW5kZXIgJiYgaW5zdGFuY2UucmVuZGVyID09PSBOT09QKSB7XHJcbiAgICAgICAgaW5zdGFuY2UucmVuZGVyID0gcmVuZGVyO1xyXG4gICAgfVxyXG4gICAgaWYgKGluaGVyaXRBdHRycyAhPSBudWxsKSB7XHJcbiAgICAgICAgaW5zdGFuY2UuaW5oZXJpdEF0dHJzID0gaW5oZXJpdEF0dHJzO1xyXG4gICAgfVxyXG4gICAgLy8gYXNzZXQgb3B0aW9ucy5cclxuICAgIGlmIChjb21wb25lbnRzKVxyXG4gICAgICAgIGluc3RhbmNlLmNvbXBvbmVudHMgPSBjb21wb25lbnRzO1xyXG4gICAgaWYgKGRpcmVjdGl2ZXMpXHJcbiAgICAgICAgaW5zdGFuY2UuZGlyZWN0aXZlcyA9IGRpcmVjdGl2ZXM7XHJcbn1cclxuZnVuY3Rpb24gcmVzb2x2ZUluamVjdGlvbnMoaW5qZWN0T3B0aW9ucywgY3R4LCBjaGVja0R1cGxpY2F0ZVByb3BlcnRpZXMgPSBOT09QLCB1bndyYXBSZWYgPSBmYWxzZSkge1xyXG4gICAgaWYgKGlzQXJyYXkoaW5qZWN0T3B0aW9ucykpIHtcclxuICAgICAgICBpbmplY3RPcHRpb25zID0gbm9ybWFsaXplSW5qZWN0KGluamVjdE9wdGlvbnMpO1xyXG4gICAgfVxyXG4gICAgZm9yIChjb25zdCBrZXkgaW4gaW5qZWN0T3B0aW9ucykge1xyXG4gICAgICAgIGNvbnN0IG9wdCA9IGluamVjdE9wdGlvbnNba2V5XTtcclxuICAgICAgICBsZXQgaW5qZWN0ZWQ7XHJcbiAgICAgICAgaWYgKGlzT2JqZWN0KG9wdCkpIHtcclxuICAgICAgICAgICAgaWYgKCdkZWZhdWx0JyBpbiBvcHQpIHtcclxuICAgICAgICAgICAgICAgIGluamVjdGVkID0gaW5qZWN0KG9wdC5mcm9tIHx8IGtleSwgb3B0LmRlZmF1bHQsIHRydWUgLyogdHJlYXQgZGVmYXVsdCBmdW5jdGlvbiBhcyBmYWN0b3J5ICovKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGluamVjdGVkID0gaW5qZWN0KG9wdC5mcm9tIHx8IGtleSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGluamVjdGVkID0gaW5qZWN0KG9wdCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChpc1JlZihpbmplY3RlZCkpIHtcclxuICAgICAgICAgICAgLy8gVE9ETyByZW1vdmUgdGhlIGNoZWNrIGluIDMuM1xyXG4gICAgICAgICAgICBpZiAodW53cmFwUmVmKSB7XHJcbiAgICAgICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoY3R4LCBrZXksIHtcclxuICAgICAgICAgICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcclxuICAgICAgICAgICAgICAgICAgICBnZXQ6ICgpID0+IGluamVjdGVkLnZhbHVlLFxyXG4gICAgICAgICAgICAgICAgICAgIHNldDogdiA9PiAoaW5qZWN0ZWQudmFsdWUgPSB2KVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgd2FybihgaW5qZWN0ZWQgcHJvcGVydHkgXCIke2tleX1cIiBpcyBhIHJlZiBhbmQgd2lsbCBiZSBhdXRvLXVud3JhcHBlZCBgICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYGFuZCBubyBsb25nZXIgbmVlZHMgXFxgLnZhbHVlXFxgIGluIHRoZSBuZXh0IG1pbm9yIHJlbGVhc2UuIGAgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBgVG8gb3B0LWluIHRvIHRoZSBuZXcgYmVoYXZpb3Igbm93LCBgICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYHNldCBcXGBhcHAuY29uZmlnLnVud3JhcEluamVjdGVkUmVmID0gdHJ1ZVxcYCAodGhpcyBjb25maWcgaXMgYCArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGB0ZW1wb3JhcnkgYW5kIHdpbGwgbm90IGJlIG5lZWRlZCBpbiB0aGUgZnV0dXJlLilgKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGN0eFtrZXldID0gaW5qZWN0ZWQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGN0eFtrZXldID0gaW5qZWN0ZWQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykpIHtcclxuICAgICAgICAgICAgY2hlY2tEdXBsaWNhdGVQcm9wZXJ0aWVzKFwiSW5qZWN0XCIgLyogSU5KRUNUICovLCBrZXkpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5mdW5jdGlvbiBjYWxsSG9vayhob29rLCBpbnN0YW5jZSwgdHlwZSkge1xyXG4gICAgY2FsbFdpdGhBc3luY0Vycm9ySGFuZGxpbmcoaXNBcnJheShob29rKVxyXG4gICAgICAgID8gaG9vay5tYXAoaCA9PiBoLmJpbmQoaW5zdGFuY2UucHJveHkpKVxyXG4gICAgICAgIDogaG9vay5iaW5kKGluc3RhbmNlLnByb3h5KSwgaW5zdGFuY2UsIHR5cGUpO1xyXG59XHJcbmZ1bmN0aW9uIGNyZWF0ZVdhdGNoZXIocmF3LCBjdHgsIHB1YmxpY1RoaXMsIGtleSkge1xyXG4gICAgY29uc3QgZ2V0dGVyID0ga2V5LmluY2x1ZGVzKCcuJylcclxuICAgICAgICA/IGNyZWF0ZVBhdGhHZXR0ZXIocHVibGljVGhpcywga2V5KVxyXG4gICAgICAgIDogKCkgPT4gcHVibGljVGhpc1trZXldO1xyXG4gICAgaWYgKGlzU3RyaW5nKHJhdykpIHtcclxuICAgICAgICBjb25zdCBoYW5kbGVyID0gY3R4W3Jhd107XHJcbiAgICAgICAgaWYgKGlzRnVuY3Rpb24oaGFuZGxlcikpIHtcclxuICAgICAgICAgICAgd2F0Y2goZ2V0dGVyLCBoYW5kbGVyKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpKSB7XHJcbiAgICAgICAgICAgIHdhcm4oYEludmFsaWQgd2F0Y2ggaGFuZGxlciBzcGVjaWZpZWQgYnkga2V5IFwiJHtyYXd9XCJgLCBoYW5kbGVyKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmIChpc0Z1bmN0aW9uKHJhdykpIHtcclxuICAgICAgICB3YXRjaChnZXR0ZXIsIHJhdy5iaW5kKHB1YmxpY1RoaXMpKTtcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKGlzT2JqZWN0KHJhdykpIHtcclxuICAgICAgICBpZiAoaXNBcnJheShyYXcpKSB7XHJcbiAgICAgICAgICAgIHJhdy5mb3JFYWNoKHIgPT4gY3JlYXRlV2F0Y2hlcihyLCBjdHgsIHB1YmxpY1RoaXMsIGtleSkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgY29uc3QgaGFuZGxlciA9IGlzRnVuY3Rpb24ocmF3LmhhbmRsZXIpXHJcbiAgICAgICAgICAgICAgICA/IHJhdy5oYW5kbGVyLmJpbmQocHVibGljVGhpcylcclxuICAgICAgICAgICAgICAgIDogY3R4W3Jhdy5oYW5kbGVyXTtcclxuICAgICAgICAgICAgaWYgKGlzRnVuY3Rpb24oaGFuZGxlcikpIHtcclxuICAgICAgICAgICAgICAgIHdhdGNoKGdldHRlciwgaGFuZGxlciwgcmF3KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykpIHtcclxuICAgICAgICAgICAgICAgIHdhcm4oYEludmFsaWQgd2F0Y2ggaGFuZGxlciBzcGVjaWZpZWQgYnkga2V5IFwiJHtyYXcuaGFuZGxlcn1cImAsIGhhbmRsZXIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgZWxzZSBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpKSB7XHJcbiAgICAgICAgd2FybihgSW52YWxpZCB3YXRjaCBvcHRpb246IFwiJHtrZXl9XCJgLCByYXcpO1xyXG4gICAgfVxyXG59XHJcbi8qKlxyXG4gKiBSZXNvbHZlIG1lcmdlZCBvcHRpb25zIGFuZCBjYWNoZSBpdCBvbiB0aGUgY29tcG9uZW50LlxyXG4gKiBUaGlzIGlzIGRvbmUgb25seSBvbmNlIHBlci1jb21wb25lbnQgc2luY2UgdGhlIG1lcmdpbmcgZG9lcyBub3QgaW52b2x2ZVxyXG4gKiBpbnN0YW5jZXMuXHJcbiAqL1xyXG5mdW5jdGlvbiByZXNvbHZlTWVyZ2VkT3B0aW9ucyhpbnN0YW5jZSkge1xyXG4gICAgY29uc3QgYmFzZSA9IGluc3RhbmNlLnR5cGU7XHJcbiAgICBjb25zdCB7IG1peGlucywgZXh0ZW5kczogZXh0ZW5kc09wdGlvbnMgfSA9IGJhc2U7XHJcbiAgICBjb25zdCB7IG1peGluczogZ2xvYmFsTWl4aW5zLCBvcHRpb25zQ2FjaGU6IGNhY2hlLCBjb25maWc6IHsgb3B0aW9uTWVyZ2VTdHJhdGVnaWVzIH0gfSA9IGluc3RhbmNlLmFwcENvbnRleHQ7XHJcbiAgICBjb25zdCBjYWNoZWQgPSBjYWNoZS5nZXQoYmFzZSk7XHJcbiAgICBsZXQgcmVzb2x2ZWQ7XHJcbiAgICBpZiAoY2FjaGVkKSB7XHJcbiAgICAgICAgcmVzb2x2ZWQgPSBjYWNoZWQ7XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmICghZ2xvYmFsTWl4aW5zLmxlbmd0aCAmJiAhbWl4aW5zICYmICFleHRlbmRzT3B0aW9ucykge1xyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmVzb2x2ZWQgPSBiYXNlO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICAgIHJlc29sdmVkID0ge307XHJcbiAgICAgICAgaWYgKGdsb2JhbE1peGlucy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgZ2xvYmFsTWl4aW5zLmZvckVhY2gobSA9PiBtZXJnZU9wdGlvbnMocmVzb2x2ZWQsIG0sIG9wdGlvbk1lcmdlU3RyYXRlZ2llcywgdHJ1ZSkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBtZXJnZU9wdGlvbnMocmVzb2x2ZWQsIGJhc2UsIG9wdGlvbk1lcmdlU3RyYXRlZ2llcyk7XHJcbiAgICB9XHJcbiAgICBjYWNoZS5zZXQoYmFzZSwgcmVzb2x2ZWQpO1xyXG4gICAgcmV0dXJuIHJlc29sdmVkO1xyXG59XHJcbmZ1bmN0aW9uIG1lcmdlT3B0aW9ucyh0bywgZnJvbSwgc3RyYXRzLCBhc01peGluID0gZmFsc2UpIHtcclxuICAgIGNvbnN0IHsgbWl4aW5zLCBleHRlbmRzOiBleHRlbmRzT3B0aW9ucyB9ID0gZnJvbTtcclxuICAgIGlmIChleHRlbmRzT3B0aW9ucykge1xyXG4gICAgICAgIG1lcmdlT3B0aW9ucyh0bywgZXh0ZW5kc09wdGlvbnMsIHN0cmF0cywgdHJ1ZSk7XHJcbiAgICB9XHJcbiAgICBpZiAobWl4aW5zKSB7XHJcbiAgICAgICAgbWl4aW5zLmZvckVhY2goKG0pID0+IG1lcmdlT3B0aW9ucyh0bywgbSwgc3RyYXRzLCB0cnVlKSk7XHJcbiAgICB9XHJcbiAgICBmb3IgKGNvbnN0IGtleSBpbiBmcm9tKSB7XHJcbiAgICAgICAgaWYgKGFzTWl4aW4gJiYga2V5ID09PSAnZXhwb3NlJykge1xyXG4gICAgICAgICAgICAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgJiZcclxuICAgICAgICAgICAgICAgIHdhcm4oYFwiZXhwb3NlXCIgb3B0aW9uIGlzIGlnbm9yZWQgd2hlbiBkZWNsYXJlZCBpbiBtaXhpbnMgb3IgZXh0ZW5kcy4gYCArXHJcbiAgICAgICAgICAgICAgICAgICAgYEl0IHNob3VsZCBvbmx5IGJlIGRlY2xhcmVkIGluIHRoZSBiYXNlIGNvbXBvbmVudCBpdHNlbGYuYCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBjb25zdCBzdHJhdCA9IGludGVybmFsT3B0aW9uTWVyZ2VTdHJhdHNba2V5XSB8fCAoc3RyYXRzICYmIHN0cmF0c1trZXldKTtcclxuICAgICAgICAgICAgdG9ba2V5XSA9IHN0cmF0ID8gc3RyYXQodG9ba2V5XSwgZnJvbVtrZXldKSA6IGZyb21ba2V5XTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gdG87XHJcbn1cclxuY29uc3QgaW50ZXJuYWxPcHRpb25NZXJnZVN0cmF0cyA9IHtcclxuICAgIGRhdGE6IG1lcmdlRGF0YUZuLFxyXG4gICAgcHJvcHM6IG1lcmdlT2JqZWN0T3B0aW9ucyxcclxuICAgIGVtaXRzOiBtZXJnZU9iamVjdE9wdGlvbnMsXHJcbiAgICAvLyBvYmplY3RzXHJcbiAgICBtZXRob2RzOiBtZXJnZU9iamVjdE9wdGlvbnMsXHJcbiAgICBjb21wdXRlZDogbWVyZ2VPYmplY3RPcHRpb25zLFxyXG4gICAgLy8gbGlmZWN5Y2xlXHJcbiAgICBiZWZvcmVDcmVhdGU6IG1lcmdlQXNBcnJheSxcclxuICAgIGNyZWF0ZWQ6IG1lcmdlQXNBcnJheSxcclxuICAgIGJlZm9yZU1vdW50OiBtZXJnZUFzQXJyYXksXHJcbiAgICBtb3VudGVkOiBtZXJnZUFzQXJyYXksXHJcbiAgICBiZWZvcmVVcGRhdGU6IG1lcmdlQXNBcnJheSxcclxuICAgIHVwZGF0ZWQ6IG1lcmdlQXNBcnJheSxcclxuICAgIGJlZm9yZURlc3Ryb3k6IG1lcmdlQXNBcnJheSxcclxuICAgIGJlZm9yZVVubW91bnQ6IG1lcmdlQXNBcnJheSxcclxuICAgIGRlc3Ryb3llZDogbWVyZ2VBc0FycmF5LFxyXG4gICAgdW5tb3VudGVkOiBtZXJnZUFzQXJyYXksXHJcbiAgICBhY3RpdmF0ZWQ6IG1lcmdlQXNBcnJheSxcclxuICAgIGRlYWN0aXZhdGVkOiBtZXJnZUFzQXJyYXksXHJcbiAgICBlcnJvckNhcHR1cmVkOiBtZXJnZUFzQXJyYXksXHJcbiAgICBzZXJ2ZXJQcmVmZXRjaDogbWVyZ2VBc0FycmF5LFxyXG4gICAgLy8gYXNzZXRzXHJcbiAgICBjb21wb25lbnRzOiBtZXJnZU9iamVjdE9wdGlvbnMsXHJcbiAgICBkaXJlY3RpdmVzOiBtZXJnZU9iamVjdE9wdGlvbnMsXHJcbiAgICAvLyB3YXRjaFxyXG4gICAgd2F0Y2g6IG1lcmdlV2F0Y2hPcHRpb25zLFxyXG4gICAgLy8gcHJvdmlkZSAvIGluamVjdFxyXG4gICAgcHJvdmlkZTogbWVyZ2VEYXRhRm4sXHJcbiAgICBpbmplY3Q6IG1lcmdlSW5qZWN0XHJcbn07XHJcbmZ1bmN0aW9uIG1lcmdlRGF0YUZuKHRvLCBmcm9tKSB7XHJcbiAgICBpZiAoIWZyb20pIHtcclxuICAgICAgICByZXR1cm4gdG87XHJcbiAgICB9XHJcbiAgICBpZiAoIXRvKSB7XHJcbiAgICAgICAgcmV0dXJuIGZyb207XHJcbiAgICB9XHJcbiAgICByZXR1cm4gZnVuY3Rpb24gbWVyZ2VkRGF0YUZuKCkge1xyXG4gICAgICAgIHJldHVybiAoZXh0ZW5kKShpc0Z1bmN0aW9uKHRvKSA/IHRvLmNhbGwodGhpcywgdGhpcykgOiB0bywgaXNGdW5jdGlvbihmcm9tKSA/IGZyb20uY2FsbCh0aGlzLCB0aGlzKSA6IGZyb20pO1xyXG4gICAgfTtcclxufVxyXG5mdW5jdGlvbiBtZXJnZUluamVjdCh0bywgZnJvbSkge1xyXG4gICAgcmV0dXJuIG1lcmdlT2JqZWN0T3B0aW9ucyhub3JtYWxpemVJbmplY3QodG8pLCBub3JtYWxpemVJbmplY3QoZnJvbSkpO1xyXG59XHJcbmZ1bmN0aW9uIG5vcm1hbGl6ZUluamVjdChyYXcpIHtcclxuICAgIGlmIChpc0FycmF5KHJhdykpIHtcclxuICAgICAgICBjb25zdCByZXMgPSB7fTtcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHJhdy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICByZXNbcmF3W2ldXSA9IHJhd1tpXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHJlcztcclxuICAgIH1cclxuICAgIHJldHVybiByYXc7XHJcbn1cclxuZnVuY3Rpb24gbWVyZ2VBc0FycmF5KHRvLCBmcm9tKSB7XHJcbiAgICByZXR1cm4gdG8gPyBbLi4ubmV3IFNldChbXS5jb25jYXQodG8sIGZyb20pKV0gOiBmcm9tO1xyXG59XHJcbmZ1bmN0aW9uIG1lcmdlT2JqZWN0T3B0aW9ucyh0bywgZnJvbSkge1xyXG4gICAgcmV0dXJuIHRvID8gZXh0ZW5kKGV4dGVuZChPYmplY3QuY3JlYXRlKG51bGwpLCB0byksIGZyb20pIDogZnJvbTtcclxufVxyXG5mdW5jdGlvbiBtZXJnZVdhdGNoT3B0aW9ucyh0bywgZnJvbSkge1xyXG4gICAgaWYgKCF0bylcclxuICAgICAgICByZXR1cm4gZnJvbTtcclxuICAgIGlmICghZnJvbSlcclxuICAgICAgICByZXR1cm4gdG87XHJcbiAgICBjb25zdCBtZXJnZWQgPSBleHRlbmQoT2JqZWN0LmNyZWF0ZShudWxsKSwgdG8pO1xyXG4gICAgZm9yIChjb25zdCBrZXkgaW4gZnJvbSkge1xyXG4gICAgICAgIG1lcmdlZFtrZXldID0gbWVyZ2VBc0FycmF5KHRvW2tleV0sIGZyb21ba2V5XSk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gbWVyZ2VkO1xyXG59XG5cbmZ1bmN0aW9uIGluaXRQcm9wcyhpbnN0YW5jZSwgcmF3UHJvcHMsIGlzU3RhdGVmdWwsIC8vIHJlc3VsdCBvZiBiaXR3aXNlIGZsYWcgY29tcGFyaXNvblxyXG5pc1NTUiA9IGZhbHNlKSB7XHJcbiAgICBjb25zdCBwcm9wcyA9IHt9O1xyXG4gICAgY29uc3QgYXR0cnMgPSB7fTtcclxuICAgIGRlZihhdHRycywgSW50ZXJuYWxPYmplY3RLZXksIDEpO1xyXG4gICAgaW5zdGFuY2UucHJvcHNEZWZhdWx0cyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XHJcbiAgICBzZXRGdWxsUHJvcHMoaW5zdGFuY2UsIHJhd1Byb3BzLCBwcm9wcywgYXR0cnMpO1xyXG4gICAgLy8gZW5zdXJlIGFsbCBkZWNsYXJlZCBwcm9wIGtleXMgYXJlIHByZXNlbnRcclxuICAgIGZvciAoY29uc3Qga2V5IGluIGluc3RhbmNlLnByb3BzT3B0aW9uc1swXSkge1xyXG4gICAgICAgIGlmICghKGtleSBpbiBwcm9wcykpIHtcclxuICAgICAgICAgICAgcHJvcHNba2V5XSA9IHVuZGVmaW5lZDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICAvLyB2YWxpZGF0aW9uXHJcbiAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpKSB7XHJcbiAgICAgICAgdmFsaWRhdGVQcm9wcyhyYXdQcm9wcyB8fCB7fSwgcHJvcHMsIGluc3RhbmNlKTtcclxuICAgIH1cclxuICAgIGlmIChpc1N0YXRlZnVsKSB7XHJcbiAgICAgICAgLy8gc3RhdGVmdWxcclxuICAgICAgICBpbnN0YW5jZS5wcm9wcyA9IGlzU1NSID8gcHJvcHMgOiBzaGFsbG93UmVhY3RpdmUocHJvcHMpO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgaWYgKCFpbnN0YW5jZS50eXBlLnByb3BzKSB7XHJcbiAgICAgICAgICAgIC8vIGZ1bmN0aW9uYWwgdy8gb3B0aW9uYWwgcHJvcHMsIHByb3BzID09PSBhdHRyc1xyXG4gICAgICAgICAgICBpbnN0YW5jZS5wcm9wcyA9IGF0dHJzO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgLy8gZnVuY3Rpb25hbCB3LyBkZWNsYXJlZCBwcm9wc1xyXG4gICAgICAgICAgICBpbnN0YW5jZS5wcm9wcyA9IHByb3BzO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGluc3RhbmNlLmF0dHJzID0gYXR0cnM7XHJcbn1cclxuZnVuY3Rpb24gdXBkYXRlUHJvcHMoaW5zdGFuY2UsIHJhd1Byb3BzLCByYXdQcmV2UHJvcHMsIG9wdGltaXplZCkge1xyXG4gICAgY29uc3QgeyBwcm9wcywgYXR0cnMsIHZub2RlOiB7IHBhdGNoRmxhZyB9IH0gPSBpbnN0YW5jZTtcclxuICAgIGNvbnN0IHJhd0N1cnJlbnRQcm9wcyA9IHRvUmF3KHByb3BzKTtcclxuICAgIGNvbnN0IFtvcHRpb25zXSA9IGluc3RhbmNlLnByb3BzT3B0aW9ucztcclxuICAgIGxldCBoYXNBdHRyc0NoYW5nZWQgPSBmYWxzZTtcclxuICAgIGlmIChcclxuICAgIC8vIGFsd2F5cyBmb3JjZSBmdWxsIGRpZmYgaW4gZGV2XHJcbiAgICAvLyAtICMxOTQyIGlmIGhtciBpcyBlbmFibGVkIHdpdGggc2ZjIGNvbXBvbmVudFxyXG4gICAgLy8gLSB2aXRlIzg3MiBub24tc2ZjIGNvbXBvbmVudCB1c2VkIGJ5IHNmYyBjb21wb25lbnRcclxuICAgICEoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmXHJcbiAgICAgICAgKGluc3RhbmNlLnR5cGUuX19obXJJZCB8fFxyXG4gICAgICAgICAgICAoaW5zdGFuY2UucGFyZW50ICYmIGluc3RhbmNlLnBhcmVudC50eXBlLl9faG1ySWQpKSkgJiZcclxuICAgICAgICAob3B0aW1pemVkIHx8IHBhdGNoRmxhZyA+IDApICYmXHJcbiAgICAgICAgIShwYXRjaEZsYWcgJiAxNiAvKiBGVUxMX1BST1BTICovKSkge1xyXG4gICAgICAgIGlmIChwYXRjaEZsYWcgJiA4IC8qIFBST1BTICovKSB7XHJcbiAgICAgICAgICAgIC8vIENvbXBpbGVyLWdlbmVyYXRlZCBwcm9wcyAmIG5vIGtleXMgY2hhbmdlLCBqdXN0IHNldCB0aGUgdXBkYXRlZFxyXG4gICAgICAgICAgICAvLyB0aGUgcHJvcHMuXHJcbiAgICAgICAgICAgIGNvbnN0IHByb3BzVG9VcGRhdGUgPSBpbnN0YW5jZS52bm9kZS5keW5hbWljUHJvcHM7XHJcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcHJvcHNUb1VwZGF0ZS5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgbGV0IGtleSA9IHByb3BzVG9VcGRhdGVbaV07XHJcbiAgICAgICAgICAgICAgICAvLyBQUk9QUyBmbGFnIGd1YXJhbnRlZXMgcmF3UHJvcHMgdG8gYmUgbm9uLW51bGxcclxuICAgICAgICAgICAgICAgIGNvbnN0IHZhbHVlID0gcmF3UHJvcHNba2V5XTtcclxuICAgICAgICAgICAgICAgIGlmIChvcHRpb25zKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gYXR0ciAvIHByb3BzIHNlcGFyYXRpb24gd2FzIGRvbmUgb24gaW5pdCBhbmQgd2lsbCBiZSBjb25zaXN0ZW50XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gaW4gdGhpcyBjb2RlIHBhdGgsIHNvIGp1c3QgY2hlY2sgaWYgYXR0cnMgaGF2ZSBpdC5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoaGFzT3duKGF0dHJzLCBrZXkpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2YWx1ZSAhPT0gYXR0cnNba2V5XSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXR0cnNba2V5XSA9IHZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaGFzQXR0cnNDaGFuZ2VkID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY2FtZWxpemVkS2V5ID0gY2FtZWxpemUoa2V5KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcHJvcHNbY2FtZWxpemVkS2V5XSA9IHJlc29sdmVQcm9wVmFsdWUob3B0aW9ucywgcmF3Q3VycmVudFByb3BzLCBjYW1lbGl6ZWRLZXksIHZhbHVlLCBpbnN0YW5jZSwgZmFsc2UgLyogaXNBYnNlbnQgKi8pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh2YWx1ZSAhPT0gYXR0cnNba2V5XSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhdHRyc1trZXldID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGhhc0F0dHJzQ2hhbmdlZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgLy8gZnVsbCBwcm9wcyB1cGRhdGUuXHJcbiAgICAgICAgaWYgKHNldEZ1bGxQcm9wcyhpbnN0YW5jZSwgcmF3UHJvcHMsIHByb3BzLCBhdHRycykpIHtcclxuICAgICAgICAgICAgaGFzQXR0cnNDaGFuZ2VkID0gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gaW4gY2FzZSBvZiBkeW5hbWljIHByb3BzLCBjaGVjayBpZiB3ZSBuZWVkIHRvIGRlbGV0ZSBrZXlzIGZyb21cclxuICAgICAgICAvLyB0aGUgcHJvcHMgb2JqZWN0XHJcbiAgICAgICAgbGV0IGtlYmFiS2V5O1xyXG4gICAgICAgIGZvciAoY29uc3Qga2V5IGluIHJhd0N1cnJlbnRQcm9wcykge1xyXG4gICAgICAgICAgICBpZiAoIXJhd1Byb3BzIHx8XHJcbiAgICAgICAgICAgICAgICAvLyBmb3IgY2FtZWxDYXNlXHJcbiAgICAgICAgICAgICAgICAoIWhhc093bihyYXdQcm9wcywga2V5KSAmJlxyXG4gICAgICAgICAgICAgICAgICAgIC8vIGl0J3MgcG9zc2libGUgdGhlIG9yaWdpbmFsIHByb3BzIHdhcyBwYXNzZWQgaW4gYXMga2ViYWItY2FzZVxyXG4gICAgICAgICAgICAgICAgICAgIC8vIGFuZCBjb252ZXJ0ZWQgdG8gY2FtZWxDYXNlICgjOTU1KVxyXG4gICAgICAgICAgICAgICAgICAgICgoa2ViYWJLZXkgPSBoeXBoZW5hdGUoa2V5KSkgPT09IGtleSB8fCAhaGFzT3duKHJhd1Byb3BzLCBrZWJhYktleSkpKSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAocmF3UHJldlByb3BzICYmXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGZvciBjYW1lbENhc2VcclxuICAgICAgICAgICAgICAgICAgICAgICAgKHJhd1ByZXZQcm9wc1trZXldICE9PSB1bmRlZmluZWQgfHxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGZvciBrZWJhYi1jYXNlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByYXdQcmV2UHJvcHNba2ViYWJLZXldICE9PSB1bmRlZmluZWQpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHByb3BzW2tleV0gPSByZXNvbHZlUHJvcFZhbHVlKG9wdGlvbnMsIHJhd0N1cnJlbnRQcm9wcywga2V5LCB1bmRlZmluZWQsIGluc3RhbmNlLCB0cnVlIC8qIGlzQWJzZW50ICovKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBkZWxldGUgcHJvcHNba2V5XTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBpbiB0aGUgY2FzZSBvZiBmdW5jdGlvbmFsIGNvbXBvbmVudCB3L28gcHJvcHMgZGVjbGFyYXRpb24sIHByb3BzIGFuZFxyXG4gICAgICAgIC8vIGF0dHJzIHBvaW50IHRvIHRoZSBzYW1lIG9iamVjdCBzbyBpdCBzaG91bGQgYWxyZWFkeSBoYXZlIGJlZW4gdXBkYXRlZC5cclxuICAgICAgICBpZiAoYXR0cnMgIT09IHJhd0N1cnJlbnRQcm9wcykge1xyXG4gICAgICAgICAgICBmb3IgKGNvbnN0IGtleSBpbiBhdHRycykge1xyXG4gICAgICAgICAgICAgICAgaWYgKCFyYXdQcm9wcyB8fCAhaGFzT3duKHJhd1Byb3BzLCBrZXkpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZGVsZXRlIGF0dHJzW2tleV07XHJcbiAgICAgICAgICAgICAgICAgICAgaGFzQXR0cnNDaGFuZ2VkID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIC8vIHRyaWdnZXIgdXBkYXRlcyBmb3IgJGF0dHJzIGluIGNhc2UgaXQncyB1c2VkIGluIGNvbXBvbmVudCBzbG90c1xyXG4gICAgaWYgKGhhc0F0dHJzQ2hhbmdlZCkge1xyXG4gICAgICAgIHRyaWdnZXIoaW5zdGFuY2UsIFwic2V0XCIgLyogU0VUICovLCAnJGF0dHJzJyk7XHJcbiAgICB9XHJcbiAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpKSB7XHJcbiAgICAgICAgdmFsaWRhdGVQcm9wcyhyYXdQcm9wcyB8fCB7fSwgcHJvcHMsIGluc3RhbmNlKTtcclxuICAgIH1cclxufVxyXG5mdW5jdGlvbiBzZXRGdWxsUHJvcHMoaW5zdGFuY2UsIHJhd1Byb3BzLCBwcm9wcywgYXR0cnMpIHtcclxuICAgIGNvbnN0IFtvcHRpb25zLCBuZWVkQ2FzdEtleXNdID0gaW5zdGFuY2UucHJvcHNPcHRpb25zO1xyXG4gICAgbGV0IGhhc0F0dHJzQ2hhbmdlZCA9IGZhbHNlO1xyXG4gICAgbGV0IHJhd0Nhc3RWYWx1ZXM7XHJcbiAgICBpZiAocmF3UHJvcHMpIHtcclxuICAgICAgICBmb3IgKGxldCBrZXkgaW4gcmF3UHJvcHMpIHtcclxuICAgICAgICAgICAgLy8ga2V5LCByZWYgYXJlIHJlc2VydmVkIGFuZCBuZXZlciBwYXNzZWQgZG93blxyXG4gICAgICAgICAgICBpZiAoaXNSZXNlcnZlZFByb3Aoa2V5KSkge1xyXG4gICAgICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY29uc3QgdmFsdWUgPSByYXdQcm9wc1trZXldO1xyXG4gICAgICAgICAgICAvLyBwcm9wIG9wdGlvbiBuYW1lcyBhcmUgY2FtZWxpemVkIGR1cmluZyBub3JtYWxpemF0aW9uLCBzbyB0byBzdXBwb3J0XHJcbiAgICAgICAgICAgIC8vIGtlYmFiIC0+IGNhbWVsIGNvbnZlcnNpb24gaGVyZSB3ZSBuZWVkIHRvIGNhbWVsaXplIHRoZSBrZXkuXHJcbiAgICAgICAgICAgIGxldCBjYW1lbEtleTtcclxuICAgICAgICAgICAgaWYgKG9wdGlvbnMgJiYgaGFzT3duKG9wdGlvbnMsIChjYW1lbEtleSA9IGNhbWVsaXplKGtleSkpKSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKCFuZWVkQ2FzdEtleXMgfHwgIW5lZWRDYXN0S2V5cy5pbmNsdWRlcyhjYW1lbEtleSkpIHtcclxuICAgICAgICAgICAgICAgICAgICBwcm9wc1tjYW1lbEtleV0gPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIChyYXdDYXN0VmFsdWVzIHx8IChyYXdDYXN0VmFsdWVzID0ge30pKVtjYW1lbEtleV0gPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmICghaXNFbWl0TGlzdGVuZXIoaW5zdGFuY2UuZW1pdHNPcHRpb25zLCBrZXkpKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIShrZXkgaW4gYXR0cnMpIHx8IHZhbHVlICE9PSBhdHRyc1trZXldKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYXR0cnNba2V5XSA9IHZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgIGhhc0F0dHJzQ2hhbmdlZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBpZiAobmVlZENhc3RLZXlzKSB7XHJcbiAgICAgICAgY29uc3QgcmF3Q3VycmVudFByb3BzID0gdG9SYXcocHJvcHMpO1xyXG4gICAgICAgIGNvbnN0IGNhc3RWYWx1ZXMgPSByYXdDYXN0VmFsdWVzIHx8IEVNUFRZX09CSjtcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG5lZWRDYXN0S2V5cy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBjb25zdCBrZXkgPSBuZWVkQ2FzdEtleXNbaV07XHJcbiAgICAgICAgICAgIHByb3BzW2tleV0gPSByZXNvbHZlUHJvcFZhbHVlKG9wdGlvbnMsIHJhd0N1cnJlbnRQcm9wcywga2V5LCBjYXN0VmFsdWVzW2tleV0sIGluc3RhbmNlLCAhaGFzT3duKGNhc3RWYWx1ZXMsIGtleSkpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiBoYXNBdHRyc0NoYW5nZWQ7XHJcbn1cclxuZnVuY3Rpb24gcmVzb2x2ZVByb3BWYWx1ZShvcHRpb25zLCBwcm9wcywga2V5LCB2YWx1ZSwgaW5zdGFuY2UsIGlzQWJzZW50KSB7XHJcbiAgICBjb25zdCBvcHQgPSBvcHRpb25zW2tleV07XHJcbiAgICBpZiAob3B0ICE9IG51bGwpIHtcclxuICAgICAgICBjb25zdCBoYXNEZWZhdWx0ID0gaGFzT3duKG9wdCwgJ2RlZmF1bHQnKTtcclxuICAgICAgICAvLyBkZWZhdWx0IHZhbHVlc1xyXG4gICAgICAgIGlmIChoYXNEZWZhdWx0ICYmIHZhbHVlID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgY29uc3QgZGVmYXVsdFZhbHVlID0gb3B0LmRlZmF1bHQ7XHJcbiAgICAgICAgICAgIGlmIChvcHQudHlwZSAhPT0gRnVuY3Rpb24gJiYgaXNGdW5jdGlvbihkZWZhdWx0VmFsdWUpKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCB7IHByb3BzRGVmYXVsdHMgfSA9IGluc3RhbmNlO1xyXG4gICAgICAgICAgICAgICAgaWYgKGtleSBpbiBwcm9wc0RlZmF1bHRzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSBwcm9wc0RlZmF1bHRzW2tleV07XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBzZXRDdXJyZW50SW5zdGFuY2UoaW5zdGFuY2UpO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlID0gcHJvcHNEZWZhdWx0c1trZXldID0gZGVmYXVsdFZhbHVlLmNhbGwobnVsbCwgcHJvcHMpO1xyXG4gICAgICAgICAgICAgICAgICAgIHVuc2V0Q3VycmVudEluc3RhbmNlKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB2YWx1ZSA9IGRlZmF1bHRWYWx1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBib29sZWFuIGNhc3RpbmdcclxuICAgICAgICBpZiAob3B0WzAgLyogc2hvdWxkQ2FzdCAqL10pIHtcclxuICAgICAgICAgICAgaWYgKGlzQWJzZW50ICYmICFoYXNEZWZhdWx0KSB7XHJcbiAgICAgICAgICAgICAgICB2YWx1ZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKG9wdFsxIC8qIHNob3VsZENhc3RUcnVlICovXSAmJlxyXG4gICAgICAgICAgICAgICAgKHZhbHVlID09PSAnJyB8fCB2YWx1ZSA9PT0gaHlwaGVuYXRlKGtleSkpKSB7XHJcbiAgICAgICAgICAgICAgICB2YWx1ZSA9IHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gdmFsdWU7XHJcbn1cclxuZnVuY3Rpb24gbm9ybWFsaXplUHJvcHNPcHRpb25zKGNvbXAsIGFwcENvbnRleHQsIGFzTWl4aW4gPSBmYWxzZSkge1xyXG4gICAgY29uc3QgY2FjaGUgPSBhcHBDb250ZXh0LnByb3BzQ2FjaGU7XHJcbiAgICBjb25zdCBjYWNoZWQgPSBjYWNoZS5nZXQoY29tcCk7XHJcbiAgICBpZiAoY2FjaGVkKSB7XHJcbiAgICAgICAgcmV0dXJuIGNhY2hlZDtcclxuICAgIH1cclxuICAgIGNvbnN0IHJhdyA9IGNvbXAucHJvcHM7XHJcbiAgICBjb25zdCBub3JtYWxpemVkID0ge307XHJcbiAgICBjb25zdCBuZWVkQ2FzdEtleXMgPSBbXTtcclxuICAgIC8vIGFwcGx5IG1peGluL2V4dGVuZHMgcHJvcHNcclxuICAgIGxldCBoYXNFeHRlbmRzID0gZmFsc2U7XHJcbiAgICBpZiAoX19WVUVfT1BUSU9OU19BUElfXyAmJiAhaXNGdW5jdGlvbihjb21wKSkge1xyXG4gICAgICAgIGNvbnN0IGV4dGVuZFByb3BzID0gKHJhdykgPT4ge1xyXG4gICAgICAgICAgICBoYXNFeHRlbmRzID0gdHJ1ZTtcclxuICAgICAgICAgICAgY29uc3QgW3Byb3BzLCBrZXlzXSA9IG5vcm1hbGl6ZVByb3BzT3B0aW9ucyhyYXcsIGFwcENvbnRleHQsIHRydWUpO1xyXG4gICAgICAgICAgICBleHRlbmQobm9ybWFsaXplZCwgcHJvcHMpO1xyXG4gICAgICAgICAgICBpZiAoa2V5cylcclxuICAgICAgICAgICAgICAgIG5lZWRDYXN0S2V5cy5wdXNoKC4uLmtleXMpO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgaWYgKCFhc01peGluICYmIGFwcENvbnRleHQubWl4aW5zLmxlbmd0aCkge1xyXG4gICAgICAgICAgICBhcHBDb250ZXh0Lm1peGlucy5mb3JFYWNoKGV4dGVuZFByb3BzKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGNvbXAuZXh0ZW5kcykge1xyXG4gICAgICAgICAgICBleHRlbmRQcm9wcyhjb21wLmV4dGVuZHMpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoY29tcC5taXhpbnMpIHtcclxuICAgICAgICAgICAgY29tcC5taXhpbnMuZm9yRWFjaChleHRlbmRQcm9wcyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgaWYgKCFyYXcgJiYgIWhhc0V4dGVuZHMpIHtcclxuICAgICAgICBjYWNoZS5zZXQoY29tcCwgRU1QVFlfQVJSKTtcclxuICAgICAgICByZXR1cm4gRU1QVFlfQVJSO1xyXG4gICAgfVxyXG4gICAgaWYgKGlzQXJyYXkocmF3KSkge1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcmF3Lmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgJiYgIWlzU3RyaW5nKHJhd1tpXSkpIHtcclxuICAgICAgICAgICAgICAgIHdhcm4oYHByb3BzIG11c3QgYmUgc3RyaW5ncyB3aGVuIHVzaW5nIGFycmF5IHN5bnRheC5gLCByYXdbaV0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNvbnN0IG5vcm1hbGl6ZWRLZXkgPSBjYW1lbGl6ZShyYXdbaV0pO1xyXG4gICAgICAgICAgICBpZiAodmFsaWRhdGVQcm9wTmFtZShub3JtYWxpemVkS2V5KSkge1xyXG4gICAgICAgICAgICAgICAgbm9ybWFsaXplZFtub3JtYWxpemVkS2V5XSA9IEVNUFRZX09CSjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGVsc2UgaWYgKHJhdykge1xyXG4gICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgJiYgIWlzT2JqZWN0KHJhdykpIHtcclxuICAgICAgICAgICAgd2FybihgaW52YWxpZCBwcm9wcyBvcHRpb25zYCwgcmF3KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gcmF3KSB7XHJcbiAgICAgICAgICAgIGNvbnN0IG5vcm1hbGl6ZWRLZXkgPSBjYW1lbGl6ZShrZXkpO1xyXG4gICAgICAgICAgICBpZiAodmFsaWRhdGVQcm9wTmFtZShub3JtYWxpemVkS2V5KSkge1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgb3B0ID0gcmF3W2tleV07XHJcbiAgICAgICAgICAgICAgICBjb25zdCBwcm9wID0gKG5vcm1hbGl6ZWRbbm9ybWFsaXplZEtleV0gPVxyXG4gICAgICAgICAgICAgICAgICAgIGlzQXJyYXkob3B0KSB8fCBpc0Z1bmN0aW9uKG9wdCkgPyB7IHR5cGU6IG9wdCB9IDogb3B0KTtcclxuICAgICAgICAgICAgICAgIGlmIChwcm9wKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgYm9vbGVhbkluZGV4ID0gZ2V0VHlwZUluZGV4KEJvb2xlYW4sIHByb3AudHlwZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgc3RyaW5nSW5kZXggPSBnZXRUeXBlSW5kZXgoU3RyaW5nLCBwcm9wLnR5cGUpO1xyXG4gICAgICAgICAgICAgICAgICAgIHByb3BbMCAvKiBzaG91bGRDYXN0ICovXSA9IGJvb2xlYW5JbmRleCA+IC0xO1xyXG4gICAgICAgICAgICAgICAgICAgIHByb3BbMSAvKiBzaG91bGRDYXN0VHJ1ZSAqL10gPVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdHJpbmdJbmRleCA8IDAgfHwgYm9vbGVhbkluZGV4IDwgc3RyaW5nSW5kZXg7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gaWYgdGhlIHByb3AgbmVlZHMgYm9vbGVhbiBjYXN0aW5nIG9yIGRlZmF1bHQgdmFsdWVcclxuICAgICAgICAgICAgICAgICAgICBpZiAoYm9vbGVhbkluZGV4ID4gLTEgfHwgaGFzT3duKHByb3AsICdkZWZhdWx0JykpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbmVlZENhc3RLZXlzLnB1c2gobm9ybWFsaXplZEtleSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgY29uc3QgcmVzID0gW25vcm1hbGl6ZWQsIG5lZWRDYXN0S2V5c107XHJcbiAgICBjYWNoZS5zZXQoY29tcCwgcmVzKTtcclxuICAgIHJldHVybiByZXM7XHJcbn1cclxuZnVuY3Rpb24gdmFsaWRhdGVQcm9wTmFtZShrZXkpIHtcclxuICAgIGlmIChrZXlbMF0gIT09ICckJykge1xyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpKSB7XHJcbiAgICAgICAgd2FybihgSW52YWxpZCBwcm9wIG5hbWU6IFwiJHtrZXl9XCIgaXMgYSByZXNlcnZlZCBwcm9wZXJ0eS5gKTtcclxuICAgIH1cclxuICAgIHJldHVybiBmYWxzZTtcclxufVxyXG4vLyB1c2UgZnVuY3Rpb24gc3RyaW5nIG5hbWUgdG8gY2hlY2sgdHlwZSBjb25zdHJ1Y3RvcnNcclxuLy8gc28gdGhhdCBpdCB3b3JrcyBhY3Jvc3Mgdm1zIC8gaWZyYW1lcy5cclxuZnVuY3Rpb24gZ2V0VHlwZShjdG9yKSB7XHJcbiAgICBjb25zdCBtYXRjaCA9IGN0b3IgJiYgY3Rvci50b1N0cmluZygpLm1hdGNoKC9eXFxzKmZ1bmN0aW9uIChcXHcrKS8pO1xyXG4gICAgcmV0dXJuIG1hdGNoID8gbWF0Y2hbMV0gOiBjdG9yID09PSBudWxsID8gJ251bGwnIDogJyc7XHJcbn1cclxuZnVuY3Rpb24gaXNTYW1lVHlwZShhLCBiKSB7XHJcbiAgICByZXR1cm4gZ2V0VHlwZShhKSA9PT0gZ2V0VHlwZShiKTtcclxufVxyXG5mdW5jdGlvbiBnZXRUeXBlSW5kZXgodHlwZSwgZXhwZWN0ZWRUeXBlcykge1xyXG4gICAgaWYgKGlzQXJyYXkoZXhwZWN0ZWRUeXBlcykpIHtcclxuICAgICAgICByZXR1cm4gZXhwZWN0ZWRUeXBlcy5maW5kSW5kZXgodCA9PiBpc1NhbWVUeXBlKHQsIHR5cGUpKTtcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKGlzRnVuY3Rpb24oZXhwZWN0ZWRUeXBlcykpIHtcclxuICAgICAgICByZXR1cm4gaXNTYW1lVHlwZShleHBlY3RlZFR5cGVzLCB0eXBlKSA/IDAgOiAtMTtcclxuICAgIH1cclxuICAgIHJldHVybiAtMTtcclxufVxyXG4vKipcclxuICogZGV2IG9ubHlcclxuICovXHJcbmZ1bmN0aW9uIHZhbGlkYXRlUHJvcHMocmF3UHJvcHMsIHByb3BzLCBpbnN0YW5jZSkge1xyXG4gICAgY29uc3QgcmVzb2x2ZWRWYWx1ZXMgPSB0b1Jhdyhwcm9wcyk7XHJcbiAgICBjb25zdCBvcHRpb25zID0gaW5zdGFuY2UucHJvcHNPcHRpb25zWzBdO1xyXG4gICAgZm9yIChjb25zdCBrZXkgaW4gb3B0aW9ucykge1xyXG4gICAgICAgIGxldCBvcHQgPSBvcHRpb25zW2tleV07XHJcbiAgICAgICAgaWYgKG9wdCA9PSBudWxsKVxyXG4gICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICB2YWxpZGF0ZVByb3Aoa2V5LCByZXNvbHZlZFZhbHVlc1trZXldLCBvcHQsICFoYXNPd24ocmF3UHJvcHMsIGtleSkgJiYgIWhhc093bihyYXdQcm9wcywgaHlwaGVuYXRlKGtleSkpKTtcclxuICAgIH1cclxufVxyXG4vKipcclxuICogZGV2IG9ubHlcclxuICovXHJcbmZ1bmN0aW9uIHZhbGlkYXRlUHJvcChuYW1lLCB2YWx1ZSwgcHJvcCwgaXNBYnNlbnQpIHtcclxuICAgIGNvbnN0IHsgdHlwZSwgcmVxdWlyZWQsIHZhbGlkYXRvciB9ID0gcHJvcDtcclxuICAgIC8vIHJlcXVpcmVkIVxyXG4gICAgaWYgKHJlcXVpcmVkICYmIGlzQWJzZW50KSB7XHJcbiAgICAgICAgd2FybignTWlzc2luZyByZXF1aXJlZCBwcm9wOiBcIicgKyBuYW1lICsgJ1wiJyk7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgLy8gbWlzc2luZyBidXQgb3B0aW9uYWxcclxuICAgIGlmICh2YWx1ZSA9PSBudWxsICYmICFwcm9wLnJlcXVpcmVkKSB7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgLy8gdHlwZSBjaGVja1xyXG4gICAgaWYgKHR5cGUgIT0gbnVsbCAmJiB0eXBlICE9PSB0cnVlKSB7XHJcbiAgICAgICAgbGV0IGlzVmFsaWQgPSBmYWxzZTtcclxuICAgICAgICBjb25zdCB0eXBlcyA9IGlzQXJyYXkodHlwZSkgPyB0eXBlIDogW3R5cGVdO1xyXG4gICAgICAgIGNvbnN0IGV4cGVjdGVkVHlwZXMgPSBbXTtcclxuICAgICAgICAvLyB2YWx1ZSBpcyB2YWxpZCBhcyBsb25nIGFzIG9uZSBvZiB0aGUgc3BlY2lmaWVkIHR5cGVzIG1hdGNoXHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0eXBlcy5sZW5ndGggJiYgIWlzVmFsaWQ7IGkrKykge1xyXG4gICAgICAgICAgICBjb25zdCB7IHZhbGlkLCBleHBlY3RlZFR5cGUgfSA9IGFzc2VydFR5cGUodmFsdWUsIHR5cGVzW2ldKTtcclxuICAgICAgICAgICAgZXhwZWN0ZWRUeXBlcy5wdXNoKGV4cGVjdGVkVHlwZSB8fCAnJyk7XHJcbiAgICAgICAgICAgIGlzVmFsaWQgPSB2YWxpZDtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKCFpc1ZhbGlkKSB7XHJcbiAgICAgICAgICAgIHdhcm4oZ2V0SW52YWxpZFR5cGVNZXNzYWdlKG5hbWUsIHZhbHVlLCBleHBlY3RlZFR5cGVzKSk7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICAvLyBjdXN0b20gdmFsaWRhdG9yXHJcbiAgICBpZiAodmFsaWRhdG9yICYmICF2YWxpZGF0b3IodmFsdWUpKSB7XHJcbiAgICAgICAgd2FybignSW52YWxpZCBwcm9wOiBjdXN0b20gdmFsaWRhdG9yIGNoZWNrIGZhaWxlZCBmb3IgcHJvcCBcIicgKyBuYW1lICsgJ1wiLicpO1xyXG4gICAgfVxyXG59XHJcbmNvbnN0IGlzU2ltcGxlVHlwZSA9IC8qI19fUFVSRV9fKi8gbWFrZU1hcCgnU3RyaW5nLE51bWJlcixCb29sZWFuLEZ1bmN0aW9uLFN5bWJvbCxCaWdJbnQnKTtcclxuLyoqXHJcbiAqIGRldiBvbmx5XHJcbiAqL1xyXG5mdW5jdGlvbiBhc3NlcnRUeXBlKHZhbHVlLCB0eXBlKSB7XHJcbiAgICBsZXQgdmFsaWQ7XHJcbiAgICBjb25zdCBleHBlY3RlZFR5cGUgPSBnZXRUeXBlKHR5cGUpO1xyXG4gICAgaWYgKGlzU2ltcGxlVHlwZShleHBlY3RlZFR5cGUpKSB7XHJcbiAgICAgICAgY29uc3QgdCA9IHR5cGVvZiB2YWx1ZTtcclxuICAgICAgICB2YWxpZCA9IHQgPT09IGV4cGVjdGVkVHlwZS50b0xvd2VyQ2FzZSgpO1xyXG4gICAgICAgIC8vIGZvciBwcmltaXRpdmUgd3JhcHBlciBvYmplY3RzXHJcbiAgICAgICAgaWYgKCF2YWxpZCAmJiB0ID09PSAnb2JqZWN0Jykge1xyXG4gICAgICAgICAgICB2YWxpZCA9IHZhbHVlIGluc3RhbmNlb2YgdHlwZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmIChleHBlY3RlZFR5cGUgPT09ICdPYmplY3QnKSB7XHJcbiAgICAgICAgdmFsaWQgPSBpc09iamVjdCh2YWx1ZSk7XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmIChleHBlY3RlZFR5cGUgPT09ICdBcnJheScpIHtcclxuICAgICAgICB2YWxpZCA9IGlzQXJyYXkodmFsdWUpO1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZiAoZXhwZWN0ZWRUeXBlID09PSAnbnVsbCcpIHtcclxuICAgICAgICB2YWxpZCA9IHZhbHVlID09PSBudWxsO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgdmFsaWQgPSB2YWx1ZSBpbnN0YW5jZW9mIHR5cGU7XHJcbiAgICB9XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIHZhbGlkLFxyXG4gICAgICAgIGV4cGVjdGVkVHlwZVxyXG4gICAgfTtcclxufVxyXG4vKipcclxuICogZGV2IG9ubHlcclxuICovXHJcbmZ1bmN0aW9uIGdldEludmFsaWRUeXBlTWVzc2FnZShuYW1lLCB2YWx1ZSwgZXhwZWN0ZWRUeXBlcykge1xyXG4gICAgbGV0IG1lc3NhZ2UgPSBgSW52YWxpZCBwcm9wOiB0eXBlIGNoZWNrIGZhaWxlZCBmb3IgcHJvcCBcIiR7bmFtZX1cIi5gICtcclxuICAgICAgICBgIEV4cGVjdGVkICR7ZXhwZWN0ZWRUeXBlcy5tYXAoY2FwaXRhbGl6ZSkuam9pbignIHwgJyl9YDtcclxuICAgIGNvbnN0IGV4cGVjdGVkVHlwZSA9IGV4cGVjdGVkVHlwZXNbMF07XHJcbiAgICBjb25zdCByZWNlaXZlZFR5cGUgPSB0b1Jhd1R5cGUodmFsdWUpO1xyXG4gICAgY29uc3QgZXhwZWN0ZWRWYWx1ZSA9IHN0eWxlVmFsdWUodmFsdWUsIGV4cGVjdGVkVHlwZSk7XHJcbiAgICBjb25zdCByZWNlaXZlZFZhbHVlID0gc3R5bGVWYWx1ZSh2YWx1ZSwgcmVjZWl2ZWRUeXBlKTtcclxuICAgIC8vIGNoZWNrIGlmIHdlIG5lZWQgdG8gc3BlY2lmeSBleHBlY3RlZCB2YWx1ZVxyXG4gICAgaWYgKGV4cGVjdGVkVHlwZXMubGVuZ3RoID09PSAxICYmXHJcbiAgICAgICAgaXNFeHBsaWNhYmxlKGV4cGVjdGVkVHlwZSkgJiZcclxuICAgICAgICAhaXNCb29sZWFuKGV4cGVjdGVkVHlwZSwgcmVjZWl2ZWRUeXBlKSkge1xyXG4gICAgICAgIG1lc3NhZ2UgKz0gYCB3aXRoIHZhbHVlICR7ZXhwZWN0ZWRWYWx1ZX1gO1xyXG4gICAgfVxyXG4gICAgbWVzc2FnZSArPSBgLCBnb3QgJHtyZWNlaXZlZFR5cGV9IGA7XHJcbiAgICAvLyBjaGVjayBpZiB3ZSBuZWVkIHRvIHNwZWNpZnkgcmVjZWl2ZWQgdmFsdWVcclxuICAgIGlmIChpc0V4cGxpY2FibGUocmVjZWl2ZWRUeXBlKSkge1xyXG4gICAgICAgIG1lc3NhZ2UgKz0gYHdpdGggdmFsdWUgJHtyZWNlaXZlZFZhbHVlfS5gO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIG1lc3NhZ2U7XHJcbn1cclxuLyoqXHJcbiAqIGRldiBvbmx5XHJcbiAqL1xyXG5mdW5jdGlvbiBzdHlsZVZhbHVlKHZhbHVlLCB0eXBlKSB7XHJcbiAgICBpZiAodHlwZSA9PT0gJ1N0cmluZycpIHtcclxuICAgICAgICByZXR1cm4gYFwiJHt2YWx1ZX1cImA7XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmICh0eXBlID09PSAnTnVtYmVyJykge1xyXG4gICAgICAgIHJldHVybiBgJHtOdW1iZXIodmFsdWUpfWA7XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgICByZXR1cm4gYCR7dmFsdWV9YDtcclxuICAgIH1cclxufVxyXG4vKipcclxuICogZGV2IG9ubHlcclxuICovXHJcbmZ1bmN0aW9uIGlzRXhwbGljYWJsZSh0eXBlKSB7XHJcbiAgICBjb25zdCBleHBsaWNpdFR5cGVzID0gWydzdHJpbmcnLCAnbnVtYmVyJywgJ2Jvb2xlYW4nXTtcclxuICAgIHJldHVybiBleHBsaWNpdFR5cGVzLnNvbWUoZWxlbSA9PiB0eXBlLnRvTG93ZXJDYXNlKCkgPT09IGVsZW0pO1xyXG59XHJcbi8qKlxyXG4gKiBkZXYgb25seVxyXG4gKi9cclxuZnVuY3Rpb24gaXNCb29sZWFuKC4uLmFyZ3MpIHtcclxuICAgIHJldHVybiBhcmdzLnNvbWUoZWxlbSA9PiBlbGVtLnRvTG93ZXJDYXNlKCkgPT09ICdib29sZWFuJyk7XHJcbn1cblxuY29uc3QgaXNJbnRlcm5hbEtleSA9IChrZXkpID0+IGtleVswXSA9PT0gJ18nIHx8IGtleSA9PT0gJyRzdGFibGUnO1xyXG5jb25zdCBub3JtYWxpemVTbG90VmFsdWUgPSAodmFsdWUpID0+IGlzQXJyYXkodmFsdWUpXHJcbiAgICA/IHZhbHVlLm1hcChub3JtYWxpemVWTm9kZSlcclxuICAgIDogW25vcm1hbGl6ZVZOb2RlKHZhbHVlKV07XHJcbmNvbnN0IG5vcm1hbGl6ZVNsb3QgPSAoa2V5LCByYXdTbG90LCBjdHgpID0+IHtcclxuICAgIGNvbnN0IG5vcm1hbGl6ZWQgPSB3aXRoQ3R4KCguLi5hcmdzKSA9PiB7XHJcbiAgICAgICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSAmJiBjdXJyZW50SW5zdGFuY2UpIHtcclxuICAgICAgICAgICAgd2FybihgU2xvdCBcIiR7a2V5fVwiIGludm9rZWQgb3V0c2lkZSBvZiB0aGUgcmVuZGVyIGZ1bmN0aW9uOiBgICtcclxuICAgICAgICAgICAgICAgIGB0aGlzIHdpbGwgbm90IHRyYWNrIGRlcGVuZGVuY2llcyB1c2VkIGluIHRoZSBzbG90LiBgICtcclxuICAgICAgICAgICAgICAgIGBJbnZva2UgdGhlIHNsb3QgZnVuY3Rpb24gaW5zaWRlIHRoZSByZW5kZXIgZnVuY3Rpb24gaW5zdGVhZC5gKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG5vcm1hbGl6ZVNsb3RWYWx1ZShyYXdTbG90KC4uLmFyZ3MpKTtcclxuICAgIH0sIGN0eCk7XHJcbiAgICBub3JtYWxpemVkLl9jID0gZmFsc2U7XHJcbiAgICByZXR1cm4gbm9ybWFsaXplZDtcclxufTtcclxuY29uc3Qgbm9ybWFsaXplT2JqZWN0U2xvdHMgPSAocmF3U2xvdHMsIHNsb3RzLCBpbnN0YW5jZSkgPT4ge1xyXG4gICAgY29uc3QgY3R4ID0gcmF3U2xvdHMuX2N0eDtcclxuICAgIGZvciAoY29uc3Qga2V5IGluIHJhd1Nsb3RzKSB7XHJcbiAgICAgICAgaWYgKGlzSW50ZXJuYWxLZXkoa2V5KSlcclxuICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgY29uc3QgdmFsdWUgPSByYXdTbG90c1trZXldO1xyXG4gICAgICAgIGlmIChpc0Z1bmN0aW9uKHZhbHVlKSkge1xyXG4gICAgICAgICAgICBzbG90c1trZXldID0gbm9ybWFsaXplU2xvdChrZXksIHZhbHVlLCBjdHgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmICh2YWx1ZSAhPSBudWxsKSB7XHJcbiAgICAgICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgJiZcclxuICAgICAgICAgICAgICAgICEoZmFsc2UgKSkge1xyXG4gICAgICAgICAgICAgICAgd2FybihgTm9uLWZ1bmN0aW9uIHZhbHVlIGVuY291bnRlcmVkIGZvciBzbG90IFwiJHtrZXl9XCIuIGAgK1xyXG4gICAgICAgICAgICAgICAgICAgIGBQcmVmZXIgZnVuY3Rpb24gc2xvdHMgZm9yIGJldHRlciBwZXJmb3JtYW5jZS5gKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjb25zdCBub3JtYWxpemVkID0gbm9ybWFsaXplU2xvdFZhbHVlKHZhbHVlKTtcclxuICAgICAgICAgICAgc2xvdHNba2V5XSA9ICgpID0+IG5vcm1hbGl6ZWQ7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59O1xyXG5jb25zdCBub3JtYWxpemVWTm9kZVNsb3RzID0gKGluc3RhbmNlLCBjaGlsZHJlbikgPT4ge1xyXG4gICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSAmJlxyXG4gICAgICAgICFpc0tlZXBBbGl2ZShpbnN0YW5jZS52bm9kZSkgJiZcclxuICAgICAgICAhKGZhbHNlICkpIHtcclxuICAgICAgICB3YXJuKGBOb24tZnVuY3Rpb24gdmFsdWUgZW5jb3VudGVyZWQgZm9yIGRlZmF1bHQgc2xvdC4gYCArXHJcbiAgICAgICAgICAgIGBQcmVmZXIgZnVuY3Rpb24gc2xvdHMgZm9yIGJldHRlciBwZXJmb3JtYW5jZS5gKTtcclxuICAgIH1cclxuICAgIGNvbnN0IG5vcm1hbGl6ZWQgPSBub3JtYWxpemVTbG90VmFsdWUoY2hpbGRyZW4pO1xyXG4gICAgaW5zdGFuY2Uuc2xvdHMuZGVmYXVsdCA9ICgpID0+IG5vcm1hbGl6ZWQ7XHJcbn07XHJcbmNvbnN0IGluaXRTbG90cyA9IChpbnN0YW5jZSwgY2hpbGRyZW4pID0+IHtcclxuICAgIGlmIChpbnN0YW5jZS52bm9kZS5zaGFwZUZsYWcgJiAzMiAvKiBTTE9UU19DSElMRFJFTiAqLykge1xyXG4gICAgICAgIGNvbnN0IHR5cGUgPSBjaGlsZHJlbi5fO1xyXG4gICAgICAgIGlmICh0eXBlKSB7XHJcbiAgICAgICAgICAgIC8vIHVzZXJzIGNhbiBnZXQgdGhlIHNoYWxsb3cgcmVhZG9ubHkgdmVyc2lvbiBvZiB0aGUgc2xvdHMgb2JqZWN0IHRocm91Z2ggYHRoaXMuJHNsb3RzYCxcclxuICAgICAgICAgICAgLy8gd2Ugc2hvdWxkIGF2b2lkIHRoZSBwcm94eSBvYmplY3QgcG9sbHV0aW5nIHRoZSBzbG90cyBvZiB0aGUgaW50ZXJuYWwgaW5zdGFuY2VcclxuICAgICAgICAgICAgaW5zdGFuY2Uuc2xvdHMgPSB0b1JhdyhjaGlsZHJlbik7XHJcbiAgICAgICAgICAgIC8vIG1ha2UgY29tcGlsZXIgbWFya2VyIG5vbi1lbnVtZXJhYmxlXHJcbiAgICAgICAgICAgIGRlZihjaGlsZHJlbiwgJ18nLCB0eXBlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIG5vcm1hbGl6ZU9iamVjdFNsb3RzKGNoaWxkcmVuLCAoaW5zdGFuY2Uuc2xvdHMgPSB7fSkpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICAgIGluc3RhbmNlLnNsb3RzID0ge307XHJcbiAgICAgICAgaWYgKGNoaWxkcmVuKSB7XHJcbiAgICAgICAgICAgIG5vcm1hbGl6ZVZOb2RlU2xvdHMoaW5zdGFuY2UsIGNoaWxkcmVuKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBkZWYoaW5zdGFuY2Uuc2xvdHMsIEludGVybmFsT2JqZWN0S2V5LCAxKTtcclxufTtcclxuY29uc3QgdXBkYXRlU2xvdHMgPSAoaW5zdGFuY2UsIGNoaWxkcmVuLCBvcHRpbWl6ZWQpID0+IHtcclxuICAgIGNvbnN0IHsgdm5vZGUsIHNsb3RzIH0gPSBpbnN0YW5jZTtcclxuICAgIGxldCBuZWVkRGVsZXRpb25DaGVjayA9IHRydWU7XHJcbiAgICBsZXQgZGVsZXRpb25Db21wYXJpc29uVGFyZ2V0ID0gRU1QVFlfT0JKO1xyXG4gICAgaWYgKHZub2RlLnNoYXBlRmxhZyAmIDMyIC8qIFNMT1RTX0NISUxEUkVOICovKSB7XHJcbiAgICAgICAgY29uc3QgdHlwZSA9IGNoaWxkcmVuLl87XHJcbiAgICAgICAgaWYgKHR5cGUpIHtcclxuICAgICAgICAgICAgLy8gY29tcGlsZWQgc2xvdHMuXHJcbiAgICAgICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgJiYgaXNIbXJVcGRhdGluZykge1xyXG4gICAgICAgICAgICAgICAgLy8gUGFyZW50IHdhcyBITVIgdXBkYXRlZCBzbyBzbG90IGNvbnRlbnQgbWF5IGhhdmUgY2hhbmdlZC5cclxuICAgICAgICAgICAgICAgIC8vIGZvcmNlIHVwZGF0ZSBzbG90cyBhbmQgbWFyayBpbnN0YW5jZSBmb3IgaG1yIGFzIHdlbGxcclxuICAgICAgICAgICAgICAgIGV4dGVuZChzbG90cywgY2hpbGRyZW4pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKG9wdGltaXplZCAmJiB0eXBlID09PSAxIC8qIFNUQUJMRSAqLykge1xyXG4gICAgICAgICAgICAgICAgLy8gY29tcGlsZWQgQU5EIHN0YWJsZS5cclxuICAgICAgICAgICAgICAgIC8vIG5vIG5lZWQgdG8gdXBkYXRlLCBhbmQgc2tpcCBzdGFsZSBzbG90cyByZW1vdmFsLlxyXG4gICAgICAgICAgICAgICAgbmVlZERlbGV0aW9uQ2hlY2sgPSBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIC8vIGNvbXBpbGVkIGJ1dCBkeW5hbWljICh2LWlmL3YtZm9yIG9uIHNsb3RzKSAtIHVwZGF0ZSBzbG90cywgYnV0IHNraXBcclxuICAgICAgICAgICAgICAgIC8vIG5vcm1hbGl6YXRpb24uXHJcbiAgICAgICAgICAgICAgICBleHRlbmQoc2xvdHMsIGNoaWxkcmVuKTtcclxuICAgICAgICAgICAgICAgIC8vICMyODkzXHJcbiAgICAgICAgICAgICAgICAvLyB3aGVuIHJlbmRlcmluZyB0aGUgb3B0aW1pemVkIHNsb3RzIGJ5IG1hbnVhbGx5IHdyaXR0ZW4gcmVuZGVyIGZ1bmN0aW9uLFxyXG4gICAgICAgICAgICAgICAgLy8gd2UgbmVlZCB0byBkZWxldGUgdGhlIGBzbG90cy5fYCBmbGFnIGlmIG5lY2Vzc2FyeSB0byBtYWtlIHN1YnNlcXVlbnQgdXBkYXRlcyByZWxpYWJsZSxcclxuICAgICAgICAgICAgICAgIC8vIGkuZS4gbGV0IHRoZSBgcmVuZGVyU2xvdGAgY3JlYXRlIHRoZSBiYWlsZWQgRnJhZ21lbnRcclxuICAgICAgICAgICAgICAgIGlmICghb3B0aW1pemVkICYmIHR5cGUgPT09IDEgLyogU1RBQkxFICovKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZGVsZXRlIHNsb3RzLl87XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIG5lZWREZWxldGlvbkNoZWNrID0gIWNoaWxkcmVuLiRzdGFibGU7XHJcbiAgICAgICAgICAgIG5vcm1hbGl6ZU9iamVjdFNsb3RzKGNoaWxkcmVuLCBzbG90cyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGRlbGV0aW9uQ29tcGFyaXNvblRhcmdldCA9IGNoaWxkcmVuO1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZiAoY2hpbGRyZW4pIHtcclxuICAgICAgICAvLyBub24gc2xvdCBvYmplY3QgY2hpbGRyZW4gKGRpcmVjdCB2YWx1ZSkgcGFzc2VkIHRvIGEgY29tcG9uZW50XHJcbiAgICAgICAgbm9ybWFsaXplVk5vZGVTbG90cyhpbnN0YW5jZSwgY2hpbGRyZW4pO1xyXG4gICAgICAgIGRlbGV0aW9uQ29tcGFyaXNvblRhcmdldCA9IHsgZGVmYXVsdDogMSB9O1xyXG4gICAgfVxyXG4gICAgLy8gZGVsZXRlIHN0YWxlIHNsb3RzXHJcbiAgICBpZiAobmVlZERlbGV0aW9uQ2hlY2spIHtcclxuICAgICAgICBmb3IgKGNvbnN0IGtleSBpbiBzbG90cykge1xyXG4gICAgICAgICAgICBpZiAoIWlzSW50ZXJuYWxLZXkoa2V5KSAmJiAhKGtleSBpbiBkZWxldGlvbkNvbXBhcmlzb25UYXJnZXQpKSB7XHJcbiAgICAgICAgICAgICAgICBkZWxldGUgc2xvdHNba2V5XTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxufTtcblxuLyoqXHJcblJ1bnRpbWUgaGVscGVyIGZvciBhcHBseWluZyBkaXJlY3RpdmVzIHRvIGEgdm5vZGUuIEV4YW1wbGUgdXNhZ2U6XHJcblxuY29uc3QgY29tcCA9IHJlc29sdmVDb21wb25lbnQoJ2NvbXAnKVxyXG5jb25zdCBmb28gPSByZXNvbHZlRGlyZWN0aXZlKCdmb28nKVxyXG5jb25zdCBiYXIgPSByZXNvbHZlRGlyZWN0aXZlKCdiYXInKVxyXG5cbnJldHVybiB3aXRoRGlyZWN0aXZlcyhoKGNvbXApLCBbXHJcbiAgW2ZvbywgdGhpcy54XSxcclxuICBbYmFyLCB0aGlzLnldXHJcbl0pXHJcbiovXHJcbmNvbnN0IGlzQnVpbHRJbkRpcmVjdGl2ZSA9IC8qI19fUFVSRV9fKi8gbWFrZU1hcCgnYmluZCxjbG9hayxlbHNlLWlmLGVsc2UsZm9yLGh0bWwsaWYsbW9kZWwsb24sb25jZSxwcmUsc2hvdyxzbG90LHRleHQsbWVtbycpO1xyXG5mdW5jdGlvbiB2YWxpZGF0ZURpcmVjdGl2ZU5hbWUobmFtZSkge1xyXG4gICAgaWYgKGlzQnVpbHRJbkRpcmVjdGl2ZShuYW1lKSkge1xyXG4gICAgICAgIHdhcm4oJ0RvIG5vdCB1c2UgYnVpbHQtaW4gZGlyZWN0aXZlIGlkcyBhcyBjdXN0b20gZGlyZWN0aXZlIGlkOiAnICsgbmFtZSk7XHJcbiAgICB9XHJcbn1cclxuLyoqXHJcbiAqIEFkZHMgZGlyZWN0aXZlcyB0byBhIFZOb2RlLlxyXG4gKi9cclxuZnVuY3Rpb24gd2l0aERpcmVjdGl2ZXModm5vZGUsIGRpcmVjdGl2ZXMpIHtcclxuICAgIGNvbnN0IGludGVybmFsSW5zdGFuY2UgPSBjdXJyZW50UmVuZGVyaW5nSW5zdGFuY2U7XHJcbiAgICBpZiAoaW50ZXJuYWxJbnN0YW5jZSA9PT0gbnVsbCkge1xyXG4gICAgICAgIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSAmJiB3YXJuKGB3aXRoRGlyZWN0aXZlcyBjYW4gb25seSBiZSB1c2VkIGluc2lkZSByZW5kZXIgZnVuY3Rpb25zLmApO1xyXG4gICAgICAgIHJldHVybiB2bm9kZTtcclxuICAgIH1cclxuICAgIGNvbnN0IGluc3RhbmNlID0gaW50ZXJuYWxJbnN0YW5jZS5wcm94eTtcclxuICAgIGNvbnN0IGJpbmRpbmdzID0gdm5vZGUuZGlycyB8fCAodm5vZGUuZGlycyA9IFtdKTtcclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZGlyZWN0aXZlcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgIGxldCBbZGlyLCB2YWx1ZSwgYXJnLCBtb2RpZmllcnMgPSBFTVBUWV9PQkpdID0gZGlyZWN0aXZlc1tpXTtcclxuICAgICAgICBpZiAoaXNGdW5jdGlvbihkaXIpKSB7XHJcbiAgICAgICAgICAgIGRpciA9IHtcclxuICAgICAgICAgICAgICAgIG1vdW50ZWQ6IGRpcixcclxuICAgICAgICAgICAgICAgIHVwZGF0ZWQ6IGRpclxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoZGlyLmRlZXApIHtcclxuICAgICAgICAgICAgdHJhdmVyc2UodmFsdWUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBiaW5kaW5ncy5wdXNoKHtcclxuICAgICAgICAgICAgZGlyLFxyXG4gICAgICAgICAgICBpbnN0YW5jZSxcclxuICAgICAgICAgICAgdmFsdWUsXHJcbiAgICAgICAgICAgIG9sZFZhbHVlOiB2b2lkIDAsXHJcbiAgICAgICAgICAgIGFyZyxcclxuICAgICAgICAgICAgbW9kaWZpZXJzXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gdm5vZGU7XHJcbn1cclxuZnVuY3Rpb24gaW52b2tlRGlyZWN0aXZlSG9vayh2bm9kZSwgcHJldlZOb2RlLCBpbnN0YW5jZSwgbmFtZSkge1xyXG4gICAgY29uc3QgYmluZGluZ3MgPSB2bm9kZS5kaXJzO1xyXG4gICAgY29uc3Qgb2xkQmluZGluZ3MgPSBwcmV2Vk5vZGUgJiYgcHJldlZOb2RlLmRpcnM7XHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGJpbmRpbmdzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgY29uc3QgYmluZGluZyA9IGJpbmRpbmdzW2ldO1xyXG4gICAgICAgIGlmIChvbGRCaW5kaW5ncykge1xyXG4gICAgICAgICAgICBiaW5kaW5nLm9sZFZhbHVlID0gb2xkQmluZGluZ3NbaV0udmFsdWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGxldCBob29rID0gYmluZGluZy5kaXJbbmFtZV07XHJcbiAgICAgICAgaWYgKGhvb2spIHtcclxuICAgICAgICAgICAgLy8gZGlzYWJsZSB0cmFja2luZyBpbnNpZGUgYWxsIGxpZmVjeWNsZSBob29rc1xyXG4gICAgICAgICAgICAvLyBzaW5jZSB0aGV5IGNhbiBwb3RlbnRpYWxseSBiZSBjYWxsZWQgaW5zaWRlIGVmZmVjdHMuXHJcbiAgICAgICAgICAgIHBhdXNlVHJhY2tpbmcoKTtcclxuICAgICAgICAgICAgY2FsbFdpdGhBc3luY0Vycm9ySGFuZGxpbmcoaG9vaywgaW5zdGFuY2UsIDggLyogRElSRUNUSVZFX0hPT0sgKi8sIFtcclxuICAgICAgICAgICAgICAgIHZub2RlLmVsLFxyXG4gICAgICAgICAgICAgICAgYmluZGluZyxcclxuICAgICAgICAgICAgICAgIHZub2RlLFxyXG4gICAgICAgICAgICAgICAgcHJldlZOb2RlXHJcbiAgICAgICAgICAgIF0pO1xyXG4gICAgICAgICAgICByZXNldFRyYWNraW5nKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XG5cbmZ1bmN0aW9uIGNyZWF0ZUFwcENvbnRleHQoKSB7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIGFwcDogbnVsbCxcclxuICAgICAgICBjb25maWc6IHtcclxuICAgICAgICAgICAgaXNOYXRpdmVUYWc6IE5PLFxyXG4gICAgICAgICAgICBwZXJmb3JtYW5jZTogZmFsc2UsXHJcbiAgICAgICAgICAgIGdsb2JhbFByb3BlcnRpZXM6IHt9LFxyXG4gICAgICAgICAgICBvcHRpb25NZXJnZVN0cmF0ZWdpZXM6IHt9LFxyXG4gICAgICAgICAgICBlcnJvckhhbmRsZXI6IHVuZGVmaW5lZCxcclxuICAgICAgICAgICAgd2FybkhhbmRsZXI6IHVuZGVmaW5lZCxcclxuICAgICAgICAgICAgY29tcGlsZXJPcHRpb25zOiB7fVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgbWl4aW5zOiBbXSxcclxuICAgICAgICBjb21wb25lbnRzOiB7fSxcclxuICAgICAgICBkaXJlY3RpdmVzOiB7fSxcclxuICAgICAgICBwcm92aWRlczogT2JqZWN0LmNyZWF0ZShudWxsKSxcclxuICAgICAgICBvcHRpb25zQ2FjaGU6IG5ldyBXZWFrTWFwKCksXHJcbiAgICAgICAgcHJvcHNDYWNoZTogbmV3IFdlYWtNYXAoKSxcclxuICAgICAgICBlbWl0c0NhY2hlOiBuZXcgV2Vha01hcCgpXHJcbiAgICB9O1xyXG59XHJcbmxldCB1aWQgPSAwO1xyXG5mdW5jdGlvbiBjcmVhdGVBcHBBUEkocmVuZGVyLCBoeWRyYXRlKSB7XHJcbiAgICByZXR1cm4gZnVuY3Rpb24gY3JlYXRlQXBwKHJvb3RDb21wb25lbnQsIHJvb3RQcm9wcyA9IG51bGwpIHtcclxuICAgICAgICBpZiAocm9vdFByb3BzICE9IG51bGwgJiYgIWlzT2JqZWN0KHJvb3RQcm9wcykpIHtcclxuICAgICAgICAgICAgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmIHdhcm4oYHJvb3QgcHJvcHMgcGFzc2VkIHRvIGFwcC5tb3VudCgpIG11c3QgYmUgYW4gb2JqZWN0LmApO1xyXG4gICAgICAgICAgICByb290UHJvcHMgPSBudWxsO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCBjb250ZXh0ID0gY3JlYXRlQXBwQ29udGV4dCgpO1xyXG4gICAgICAgIGNvbnN0IGluc3RhbGxlZFBsdWdpbnMgPSBuZXcgU2V0KCk7XHJcbiAgICAgICAgbGV0IGlzTW91bnRlZCA9IGZhbHNlO1xyXG4gICAgICAgIGNvbnN0IGFwcCA9IChjb250ZXh0LmFwcCA9IHtcclxuICAgICAgICAgICAgX3VpZDogdWlkKyssXHJcbiAgICAgICAgICAgIF9jb21wb25lbnQ6IHJvb3RDb21wb25lbnQsXHJcbiAgICAgICAgICAgIF9wcm9wczogcm9vdFByb3BzLFxyXG4gICAgICAgICAgICBfY29udGFpbmVyOiBudWxsLFxyXG4gICAgICAgICAgICBfY29udGV4dDogY29udGV4dCxcclxuICAgICAgICAgICAgX2luc3RhbmNlOiBudWxsLFxyXG4gICAgICAgICAgICB2ZXJzaW9uLFxyXG4gICAgICAgICAgICBnZXQgY29uZmlnKCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGNvbnRleHQuY29uZmlnO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBzZXQgY29uZmlnKHYpIHtcclxuICAgICAgICAgICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykpIHtcclxuICAgICAgICAgICAgICAgICAgICB3YXJuKGBhcHAuY29uZmlnIGNhbm5vdCBiZSByZXBsYWNlZC4gTW9kaWZ5IGluZGl2aWR1YWwgb3B0aW9ucyBpbnN0ZWFkLmApO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICB1c2UocGx1Z2luLCAuLi5vcHRpb25zKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoaW5zdGFsbGVkUGx1Z2lucy5oYXMocGx1Z2luKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSAmJiB3YXJuKGBQbHVnaW4gaGFzIGFscmVhZHkgYmVlbiBhcHBsaWVkIHRvIHRhcmdldCBhcHAuYCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIGlmIChwbHVnaW4gJiYgaXNGdW5jdGlvbihwbHVnaW4uaW5zdGFsbCkpIHtcclxuICAgICAgICAgICAgICAgICAgICBpbnN0YWxsZWRQbHVnaW5zLmFkZChwbHVnaW4pO1xyXG4gICAgICAgICAgICAgICAgICAgIHBsdWdpbi5pbnN0YWxsKGFwcCwgLi4ub3B0aW9ucyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIGlmIChpc0Z1bmN0aW9uKHBsdWdpbikpIHtcclxuICAgICAgICAgICAgICAgICAgICBpbnN0YWxsZWRQbHVnaW5zLmFkZChwbHVnaW4pO1xyXG4gICAgICAgICAgICAgICAgICAgIHBsdWdpbihhcHAsIC4uLm9wdGlvbnMpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgd2FybihgQSBwbHVnaW4gbXVzdCBlaXRoZXIgYmUgYSBmdW5jdGlvbiBvciBhbiBvYmplY3Qgd2l0aCBhbiBcImluc3RhbGxcIiBgICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYGZ1bmN0aW9uLmApO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGFwcDtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgbWl4aW4obWl4aW4pIHtcclxuICAgICAgICAgICAgICAgIGlmIChfX1ZVRV9PUFRJT05TX0FQSV9fKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFjb250ZXh0Lm1peGlucy5pbmNsdWRlcyhtaXhpbikpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29udGV4dC5taXhpbnMucHVzaChtaXhpbik7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB3YXJuKCdNaXhpbiBoYXMgYWxyZWFkeSBiZWVuIGFwcGxpZWQgdG8gdGFyZ2V0IGFwcCcgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKG1peGluLm5hbWUgPyBgOiAke21peGluLm5hbWV9YCA6ICcnKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgd2FybignTWl4aW5zIGFyZSBvbmx5IGF2YWlsYWJsZSBpbiBidWlsZHMgc3VwcG9ydGluZyBPcHRpb25zIEFQSScpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGFwcDtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgY29tcG9uZW50KG5hbWUsIGNvbXBvbmVudCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhbGlkYXRlQ29tcG9uZW50TmFtZShuYW1lLCBjb250ZXh0LmNvbmZpZyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAoIWNvbXBvbmVudCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBjb250ZXh0LmNvbXBvbmVudHNbbmFtZV07XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmIGNvbnRleHQuY29tcG9uZW50c1tuYW1lXSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHdhcm4oYENvbXBvbmVudCBcIiR7bmFtZX1cIiBoYXMgYWxyZWFkeSBiZWVuIHJlZ2lzdGVyZWQgaW4gdGFyZ2V0IGFwcC5gKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGNvbnRleHQuY29tcG9uZW50c1tuYW1lXSA9IGNvbXBvbmVudDtcclxuICAgICAgICAgICAgICAgIHJldHVybiBhcHA7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGRpcmVjdGl2ZShuYW1lLCBkaXJlY3RpdmUpIHtcclxuICAgICAgICAgICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YWxpZGF0ZURpcmVjdGl2ZU5hbWUobmFtZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAoIWRpcmVjdGl2ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBjb250ZXh0LmRpcmVjdGl2ZXNbbmFtZV07XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmIGNvbnRleHQuZGlyZWN0aXZlc1tuYW1lXSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHdhcm4oYERpcmVjdGl2ZSBcIiR7bmFtZX1cIiBoYXMgYWxyZWFkeSBiZWVuIHJlZ2lzdGVyZWQgaW4gdGFyZ2V0IGFwcC5gKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGNvbnRleHQuZGlyZWN0aXZlc1tuYW1lXSA9IGRpcmVjdGl2ZTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBhcHA7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIG1vdW50KHJvb3RDb250YWluZXIsIGlzSHlkcmF0ZSwgaXNTVkcpIHtcclxuICAgICAgICAgICAgICAgIGlmICghaXNNb3VudGVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgdm5vZGUgPSBjcmVhdGVWTm9kZShyb290Q29tcG9uZW50LCByb290UHJvcHMpO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIHN0b3JlIGFwcCBjb250ZXh0IG9uIHRoZSByb290IFZOb2RlLlxyXG4gICAgICAgICAgICAgICAgICAgIC8vIHRoaXMgd2lsbCBiZSBzZXQgb24gdGhlIHJvb3QgaW5zdGFuY2Ugb24gaW5pdGlhbCBtb3VudC5cclxuICAgICAgICAgICAgICAgICAgICB2bm9kZS5hcHBDb250ZXh0ID0gY29udGV4dDtcclxuICAgICAgICAgICAgICAgICAgICAvLyBITVIgcm9vdCByZWxvYWRcclxuICAgICAgICAgICAgICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRleHQucmVsb2FkID0gKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVuZGVyKGNsb25lVk5vZGUodm5vZGUpLCByb290Q29udGFpbmVyLCBpc1NWRyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChpc0h5ZHJhdGUgJiYgaHlkcmF0ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBoeWRyYXRlKHZub2RlLCByb290Q29udGFpbmVyKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlbmRlcih2bm9kZSwgcm9vdENvbnRhaW5lciwgaXNTVkcpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBpc01vdW50ZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIGFwcC5fY29udGFpbmVyID0gcm9vdENvbnRhaW5lcjtcclxuICAgICAgICAgICAgICAgICAgICByb290Q29udGFpbmVyLl9fdnVlX2FwcF9fID0gYXBwO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgfHwgX19WVUVfUFJPRF9ERVZUT09MU19fKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFwcC5faW5zdGFuY2UgPSB2bm9kZS5jb21wb25lbnQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRldnRvb2xzSW5pdEFwcChhcHAsIHZlcnNpb24pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZ2V0RXhwb3NlUHJveHkodm5vZGUuY29tcG9uZW50KSB8fCB2bm9kZS5jb21wb25lbnQucHJveHk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykpIHtcclxuICAgICAgICAgICAgICAgICAgICB3YXJuKGBBcHAgaGFzIGFscmVhZHkgYmVlbiBtb3VudGVkLlxcbmAgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBgSWYgeW91IHdhbnQgdG8gcmVtb3VudCB0aGUgc2FtZSBhcHAsIG1vdmUgeW91ciBhcHAgY3JlYXRpb24gbG9naWMgYCArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGBpbnRvIGEgZmFjdG9yeSBmdW5jdGlvbiBhbmQgY3JlYXRlIGZyZXNoIGFwcCBpbnN0YW5jZXMgZm9yIGVhY2ggYCArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGBtb3VudCAtIGUuZy4gXFxgY29uc3QgY3JlYXRlTXlBcHAgPSAoKSA9PiBjcmVhdGVBcHAoQXBwKVxcYGApO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICB1bm1vdW50KCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKGlzTW91bnRlZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlbmRlcihudWxsLCBhcHAuX2NvbnRhaW5lcik7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB8fCBfX1ZVRV9QUk9EX0RFVlRPT0xTX18pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXBwLl9pbnN0YW5jZSA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRldnRvb2xzVW5tb3VudEFwcChhcHApO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBkZWxldGUgYXBwLl9jb250YWluZXIuX192dWVfYXBwX187XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykpIHtcclxuICAgICAgICAgICAgICAgICAgICB3YXJuKGBDYW5ub3QgdW5tb3VudCBhbiBhcHAgdGhhdCBpcyBub3QgbW91bnRlZC5gKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgcHJvdmlkZShrZXksIHZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmIGtleSBpbiBjb250ZXh0LnByb3ZpZGVzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgd2FybihgQXBwIGFscmVhZHkgcHJvdmlkZXMgcHJvcGVydHkgd2l0aCBrZXkgXCIke1N0cmluZyhrZXkpfVwiLiBgICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYEl0IHdpbGwgYmUgb3ZlcndyaXR0ZW4gd2l0aCB0aGUgbmV3IHZhbHVlLmApO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgLy8gVHlwZVNjcmlwdCBkb2Vzbid0IGFsbG93IHN5bWJvbHMgYXMgaW5kZXggdHlwZVxyXG4gICAgICAgICAgICAgICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL01pY3Jvc29mdC9UeXBlU2NyaXB0L2lzc3Vlcy8yNDU4N1xyXG4gICAgICAgICAgICAgICAgY29udGV4dC5wcm92aWRlc1trZXldID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gYXBwO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcmV0dXJuIGFwcDtcclxuICAgIH07XHJcbn1cblxuLyoqXHJcbiAqIEZ1bmN0aW9uIGZvciBoYW5kbGluZyBhIHRlbXBsYXRlIHJlZlxyXG4gKi9cclxuZnVuY3Rpb24gc2V0UmVmKHJhd1JlZiwgb2xkUmF3UmVmLCBwYXJlbnRTdXNwZW5zZSwgdm5vZGUsIGlzVW5tb3VudCA9IGZhbHNlKSB7XHJcbiAgICBpZiAoaXNBcnJheShyYXdSZWYpKSB7XHJcbiAgICAgICAgcmF3UmVmLmZvckVhY2goKHIsIGkpID0+IHNldFJlZihyLCBvbGRSYXdSZWYgJiYgKGlzQXJyYXkob2xkUmF3UmVmKSA/IG9sZFJhd1JlZltpXSA6IG9sZFJhd1JlZiksIHBhcmVudFN1c3BlbnNlLCB2bm9kZSwgaXNVbm1vdW50KSk7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgaWYgKGlzQXN5bmNXcmFwcGVyKHZub2RlKSAmJiAhaXNVbm1vdW50KSB7XHJcbiAgICAgICAgLy8gd2hlbiBtb3VudGluZyBhc3luYyBjb21wb25lbnRzLCBub3RoaW5nIG5lZWRzIHRvIGJlIGRvbmUsXHJcbiAgICAgICAgLy8gYmVjYXVzZSB0aGUgdGVtcGxhdGUgcmVmIGlzIGZvcndhcmRlZCB0byBpbm5lciBjb21wb25lbnRcclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICBjb25zdCByZWZWYWx1ZSA9IHZub2RlLnNoYXBlRmxhZyAmIDQgLyogU1RBVEVGVUxfQ09NUE9ORU5UICovXHJcbiAgICAgICAgPyBnZXRFeHBvc2VQcm94eSh2bm9kZS5jb21wb25lbnQpIHx8IHZub2RlLmNvbXBvbmVudC5wcm94eVxyXG4gICAgICAgIDogdm5vZGUuZWw7XHJcbiAgICBjb25zdCB2YWx1ZSA9IGlzVW5tb3VudCA/IG51bGwgOiByZWZWYWx1ZTtcclxuICAgIGNvbnN0IHsgaTogb3duZXIsIHI6IHJlZiB9ID0gcmF3UmVmO1xyXG4gICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSAmJiAhb3duZXIpIHtcclxuICAgICAgICB3YXJuKGBNaXNzaW5nIHJlZiBvd25lciBjb250ZXh0LiByZWYgY2Fubm90IGJlIHVzZWQgb24gaG9pc3RlZCB2bm9kZXMuIGAgK1xyXG4gICAgICAgICAgICBgQSB2bm9kZSB3aXRoIHJlZiBtdXN0IGJlIGNyZWF0ZWQgaW5zaWRlIHRoZSByZW5kZXIgZnVuY3Rpb24uYCk7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgY29uc3Qgb2xkUmVmID0gb2xkUmF3UmVmICYmIG9sZFJhd1JlZi5yO1xyXG4gICAgY29uc3QgcmVmcyA9IG93bmVyLnJlZnMgPT09IEVNUFRZX09CSiA/IChvd25lci5yZWZzID0ge30pIDogb3duZXIucmVmcztcclxuICAgIGNvbnN0IHNldHVwU3RhdGUgPSBvd25lci5zZXR1cFN0YXRlO1xyXG4gICAgLy8gZHluYW1pYyByZWYgY2hhbmdlZC4gdW5zZXQgb2xkIHJlZlxyXG4gICAgaWYgKG9sZFJlZiAhPSBudWxsICYmIG9sZFJlZiAhPT0gcmVmKSB7XHJcbiAgICAgICAgaWYgKGlzU3RyaW5nKG9sZFJlZikpIHtcclxuICAgICAgICAgICAgcmVmc1tvbGRSZWZdID0gbnVsbDtcclxuICAgICAgICAgICAgaWYgKGhhc093bihzZXR1cFN0YXRlLCBvbGRSZWYpKSB7XHJcbiAgICAgICAgICAgICAgICBzZXR1cFN0YXRlW29sZFJlZl0gPSBudWxsO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKGlzUmVmKG9sZFJlZikpIHtcclxuICAgICAgICAgICAgb2xkUmVmLnZhbHVlID0gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBpZiAoaXNGdW5jdGlvbihyZWYpKSB7XHJcbiAgICAgICAgY2FsbFdpdGhFcnJvckhhbmRsaW5nKHJlZiwgb3duZXIsIDEyIC8qIEZVTkNUSU9OX1JFRiAqLywgW3ZhbHVlLCByZWZzXSk7XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgICBjb25zdCBfaXNTdHJpbmcgPSBpc1N0cmluZyhyZWYpO1xyXG4gICAgICAgIGNvbnN0IF9pc1JlZiA9IGlzUmVmKHJlZik7XHJcbiAgICAgICAgaWYgKF9pc1N0cmluZyB8fCBfaXNSZWYpIHtcclxuICAgICAgICAgICAgY29uc3QgZG9TZXQgPSAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAocmF3UmVmLmYpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBleGlzdGluZyA9IF9pc1N0cmluZyA/IHJlZnNbcmVmXSA6IHJlZi52YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoaXNVbm1vdW50KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlzQXJyYXkoZXhpc3RpbmcpICYmIHJlbW92ZShleGlzdGluZywgcmVmVmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFpc0FycmF5KGV4aXN0aW5nKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKF9pc1N0cmluZykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlZnNbcmVmXSA9IFtyZWZWYWx1ZV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWYudmFsdWUgPSBbcmVmVmFsdWVdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyYXdSZWYuaylcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVmc1tyYXdSZWYua10gPSByZWYudmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoIWV4aXN0aW5nLmluY2x1ZGVzKHJlZlZhbHVlKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZXhpc3RpbmcucHVzaChyZWZWYWx1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIGlmIChfaXNTdHJpbmcpIHtcclxuICAgICAgICAgICAgICAgICAgICByZWZzW3JlZl0gPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoaGFzT3duKHNldHVwU3RhdGUsIHJlZikpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2V0dXBTdGF0ZVtyZWZdID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoaXNSZWYocmVmKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlZi52YWx1ZSA9IHZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChyYXdSZWYuaylcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVmc1tyYXdSZWYua10gPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHdhcm4oJ0ludmFsaWQgdGVtcGxhdGUgcmVmIHR5cGU6JywgcmVmLCBgKCR7dHlwZW9mIHJlZn0pYCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIGlmICh2YWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgZG9TZXQuaWQgPSAtMTtcclxuICAgICAgICAgICAgICAgIHF1ZXVlUG9zdFJlbmRlckVmZmVjdChkb1NldCwgcGFyZW50U3VzcGVuc2UpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgZG9TZXQoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykpIHtcclxuICAgICAgICAgICAgd2FybignSW52YWxpZCB0ZW1wbGF0ZSByZWYgdHlwZTonLCByZWYsIGAoJHt0eXBlb2YgcmVmfSlgKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cblxubGV0IGhhc01pc21hdGNoID0gZmFsc2U7XHJcbmNvbnN0IGlzU1ZHQ29udGFpbmVyID0gKGNvbnRhaW5lcikgPT4gL3N2Zy8udGVzdChjb250YWluZXIubmFtZXNwYWNlVVJJKSAmJiBjb250YWluZXIudGFnTmFtZSAhPT0gJ2ZvcmVpZ25PYmplY3QnO1xyXG5jb25zdCBpc0NvbW1lbnQgPSAobm9kZSkgPT4gbm9kZS5ub2RlVHlwZSA9PT0gOCAvKiBDT01NRU5UICovO1xyXG4vLyBOb3RlOiBoeWRyYXRpb24gaXMgRE9NLXNwZWNpZmljXHJcbi8vIEJ1dCB3ZSBoYXZlIHRvIHBsYWNlIGl0IGluIGNvcmUgZHVlIHRvIHRpZ2h0IGNvdXBsaW5nIHdpdGggY29yZSAtIHNwbGl0dGluZ1xyXG4vLyBpdCBvdXQgY3JlYXRlcyBhIHRvbiBvZiB1bm5lY2Vzc2FyeSBjb21wbGV4aXR5LlxyXG4vLyBIeWRyYXRpb24gYWxzbyBkZXBlbmRzIG9uIHNvbWUgcmVuZGVyZXIgaW50ZXJuYWwgbG9naWMgd2hpY2ggbmVlZHMgdG8gYmVcclxuLy8gcGFzc2VkIGluIHZpYSBhcmd1bWVudHMuXHJcbmZ1bmN0aW9uIGNyZWF0ZUh5ZHJhdGlvbkZ1bmN0aW9ucyhyZW5kZXJlckludGVybmFscykge1xyXG4gICAgY29uc3QgeyBtdDogbW91bnRDb21wb25lbnQsIHA6IHBhdGNoLCBvOiB7IHBhdGNoUHJvcCwgbmV4dFNpYmxpbmcsIHBhcmVudE5vZGUsIHJlbW92ZSwgaW5zZXJ0LCBjcmVhdGVDb21tZW50IH0gfSA9IHJlbmRlcmVySW50ZXJuYWxzO1xyXG4gICAgY29uc3QgaHlkcmF0ZSA9ICh2bm9kZSwgY29udGFpbmVyKSA9PiB7XHJcbiAgICAgICAgaWYgKCFjb250YWluZXIuaGFzQ2hpbGROb2RlcygpKSB7XHJcbiAgICAgICAgICAgIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSAmJlxyXG4gICAgICAgICAgICAgICAgd2FybihgQXR0ZW1wdGluZyB0byBoeWRyYXRlIGV4aXN0aW5nIG1hcmt1cCBidXQgY29udGFpbmVyIGlzIGVtcHR5LiBgICtcclxuICAgICAgICAgICAgICAgICAgICBgUGVyZm9ybWluZyBmdWxsIG1vdW50IGluc3RlYWQuYCk7XHJcbiAgICAgICAgICAgIHBhdGNoKG51bGwsIHZub2RlLCBjb250YWluZXIpO1xyXG4gICAgICAgICAgICBmbHVzaFBvc3RGbHVzaENicygpO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGhhc01pc21hdGNoID0gZmFsc2U7XHJcbiAgICAgICAgaHlkcmF0ZU5vZGUoY29udGFpbmVyLmZpcnN0Q2hpbGQsIHZub2RlLCBudWxsLCBudWxsLCBudWxsKTtcclxuICAgICAgICBmbHVzaFBvc3RGbHVzaENicygpO1xyXG4gICAgICAgIGlmIChoYXNNaXNtYXRjaCAmJiAhZmFsc2UpIHtcclxuICAgICAgICAgICAgLy8gdGhpcyBlcnJvciBzaG91bGQgc2hvdyB1cCBpbiBwcm9kdWN0aW9uXHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYEh5ZHJhdGlvbiBjb21wbGV0ZWQgYnV0IGNvbnRhaW5zIG1pc21hdGNoZXMuYCk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIGNvbnN0IGh5ZHJhdGVOb2RlID0gKG5vZGUsIHZub2RlLCBwYXJlbnRDb21wb25lbnQsIHBhcmVudFN1c3BlbnNlLCBzbG90U2NvcGVJZHMsIG9wdGltaXplZCA9IGZhbHNlKSA9PiB7XHJcbiAgICAgICAgY29uc3QgaXNGcmFnbWVudFN0YXJ0ID0gaXNDb21tZW50KG5vZGUpICYmIG5vZGUuZGF0YSA9PT0gJ1snO1xyXG4gICAgICAgIGNvbnN0IG9uTWlzbWF0Y2ggPSAoKSA9PiBoYW5kbGVNaXNtYXRjaChub2RlLCB2bm9kZSwgcGFyZW50Q29tcG9uZW50LCBwYXJlbnRTdXNwZW5zZSwgc2xvdFNjb3BlSWRzLCBpc0ZyYWdtZW50U3RhcnQpO1xyXG4gICAgICAgIGNvbnN0IHsgdHlwZSwgcmVmLCBzaGFwZUZsYWcgfSA9IHZub2RlO1xyXG4gICAgICAgIGNvbnN0IGRvbVR5cGUgPSBub2RlLm5vZGVUeXBlO1xyXG4gICAgICAgIHZub2RlLmVsID0gbm9kZTtcclxuICAgICAgICBsZXQgbmV4dE5vZGUgPSBudWxsO1xyXG4gICAgICAgIHN3aXRjaCAodHlwZSkge1xyXG4gICAgICAgICAgICBjYXNlIFRleHQ6XHJcbiAgICAgICAgICAgICAgICBpZiAoZG9tVHlwZSAhPT0gMyAvKiBURVhUICovKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbmV4dE5vZGUgPSBvbk1pc21hdGNoKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAobm9kZS5kYXRhICE9PSB2bm9kZS5jaGlsZHJlbikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBoYXNNaXNtYXRjaCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSAmJlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FybihgSHlkcmF0aW9uIHRleHQgbWlzbWF0Y2g6YCArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYFxcbi0gQ2xpZW50OiAke0pTT04uc3RyaW5naWZ5KG5vZGUuZGF0YSl9YCArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYFxcbi0gU2VydmVyOiAke0pTT04uc3RyaW5naWZ5KHZub2RlLmNoaWxkcmVuKX1gKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbm9kZS5kYXRhID0gdm5vZGUuY2hpbGRyZW47XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIG5leHROb2RlID0gbmV4dFNpYmxpbmcobm9kZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBDb21tZW50OlxyXG4gICAgICAgICAgICAgICAgaWYgKGRvbVR5cGUgIT09IDggLyogQ09NTUVOVCAqLyB8fCBpc0ZyYWdtZW50U3RhcnQpIHtcclxuICAgICAgICAgICAgICAgICAgICBuZXh0Tm9kZSA9IG9uTWlzbWF0Y2goKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIG5leHROb2RlID0gbmV4dFNpYmxpbmcobm9kZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBTdGF0aWM6XHJcbiAgICAgICAgICAgICAgICBpZiAoZG9tVHlwZSAhPT0gMSAvKiBFTEVNRU5UICovKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbmV4dE5vZGUgPSBvbk1pc21hdGNoKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBkZXRlcm1pbmUgYW5jaG9yLCBhZG9wdCBjb250ZW50XHJcbiAgICAgICAgICAgICAgICAgICAgbmV4dE5vZGUgPSBub2RlO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIGlmIHRoZSBzdGF0aWMgdm5vZGUgaGFzIGl0cyBjb250ZW50IHN0cmlwcGVkIGR1cmluZyBidWlsZCxcclxuICAgICAgICAgICAgICAgICAgICAvLyBhZG9wdCBpdCBmcm9tIHRoZSBzZXJ2ZXItcmVuZGVyZWQgSFRNTC5cclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBuZWVkVG9BZG9wdENvbnRlbnQgPSAhdm5vZGUuY2hpbGRyZW4ubGVuZ3RoO1xyXG4gICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdm5vZGUuc3RhdGljQ291bnQ7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobmVlZFRvQWRvcHRDb250ZW50KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdm5vZGUuY2hpbGRyZW4gKz0gbmV4dE5vZGUub3V0ZXJIVE1MO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoaSA9PT0gdm5vZGUuc3RhdGljQ291bnQgLSAxKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2bm9kZS5hbmNob3IgPSBuZXh0Tm9kZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBuZXh0Tm9kZSA9IG5leHRTaWJsaW5nKG5leHROb2RlKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5leHROb2RlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgRnJhZ21lbnQ6XHJcbiAgICAgICAgICAgICAgICBpZiAoIWlzRnJhZ21lbnRTdGFydCkge1xyXG4gICAgICAgICAgICAgICAgICAgIG5leHROb2RlID0gb25NaXNtYXRjaCgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbmV4dE5vZGUgPSBoeWRyYXRlRnJhZ21lbnQobm9kZSwgdm5vZGUsIHBhcmVudENvbXBvbmVudCwgcGFyZW50U3VzcGVuc2UsIHNsb3RTY29wZUlkcywgb3B0aW1pemVkKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgaWYgKHNoYXBlRmxhZyAmIDEgLyogRUxFTUVOVCAqLykge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChkb21UeXBlICE9PSAxIC8qIEVMRU1FTlQgKi8gfHxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdm5vZGUudHlwZS50b0xvd2VyQ2FzZSgpICE9PVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbm9kZS50YWdOYW1lLnRvTG93ZXJDYXNlKCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbmV4dE5vZGUgPSBvbk1pc21hdGNoKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBuZXh0Tm9kZSA9IGh5ZHJhdGVFbGVtZW50KG5vZGUsIHZub2RlLCBwYXJlbnRDb21wb25lbnQsIHBhcmVudFN1c3BlbnNlLCBzbG90U2NvcGVJZHMsIG9wdGltaXplZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoc2hhcGVGbGFnICYgNiAvKiBDT01QT05FTlQgKi8pIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyB3aGVuIHNldHRpbmcgdXAgdGhlIHJlbmRlciBlZmZlY3QsIGlmIHRoZSBpbml0aWFsIHZub2RlIGFscmVhZHlcclxuICAgICAgICAgICAgICAgICAgICAvLyBoYXMgLmVsIHNldCwgdGhlIGNvbXBvbmVudCB3aWxsIHBlcmZvcm0gaHlkcmF0aW9uIGluc3RlYWQgb2YgbW91bnRcclxuICAgICAgICAgICAgICAgICAgICAvLyBvbiBpdHMgc3ViLXRyZWUuXHJcbiAgICAgICAgICAgICAgICAgICAgdm5vZGUuc2xvdFNjb3BlSWRzID0gc2xvdFNjb3BlSWRzO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGNvbnRhaW5lciA9IHBhcmVudE5vZGUobm9kZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgbW91bnRDb21wb25lbnQodm5vZGUsIGNvbnRhaW5lciwgbnVsbCwgcGFyZW50Q29tcG9uZW50LCBwYXJlbnRTdXNwZW5zZSwgaXNTVkdDb250YWluZXIoY29udGFpbmVyKSwgb3B0aW1pemVkKTtcclxuICAgICAgICAgICAgICAgICAgICAvLyBjb21wb25lbnQgbWF5IGJlIGFzeW5jLCBzbyBpbiB0aGUgY2FzZSBvZiBmcmFnbWVudHMgd2UgY2Fubm90IHJlbHlcclxuICAgICAgICAgICAgICAgICAgICAvLyBvbiBjb21wb25lbnQncyByZW5kZXJlZCBvdXRwdXQgdG8gZGV0ZXJtaW5lIHRoZSBlbmQgb2YgdGhlIGZyYWdtZW50XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gaW5zdGVhZCwgd2UgZG8gYSBsb29rYWhlYWQgdG8gZmluZCB0aGUgZW5kIGFuY2hvciBub2RlLlxyXG4gICAgICAgICAgICAgICAgICAgIG5leHROb2RlID0gaXNGcmFnbWVudFN0YXJ0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgID8gbG9jYXRlQ2xvc2luZ0FzeW5jQW5jaG9yKG5vZGUpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDogbmV4dFNpYmxpbmcobm9kZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gIzM3ODdcclxuICAgICAgICAgICAgICAgICAgICAvLyBpZiBjb21wb25lbnQgaXMgYXN5bmMsIGl0IG1heSBnZXQgbW92ZWQgLyB1bm1vdW50ZWQgYmVmb3JlIGl0c1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIGlubmVyIGNvbXBvbmVudCBpcyBsb2FkZWQsIHNvIHdlIG5lZWQgdG8gZ2l2ZSBpdCBhIHBsYWNlaG9sZGVyXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gdm5vZGUgdGhhdCBtYXRjaGVzIGl0cyBhZG9wdGVkIERPTS5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoaXNBc3luY1dyYXBwZXIodm5vZGUpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBzdWJUcmVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoaXNGcmFnbWVudFN0YXJ0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdWJUcmVlID0gY3JlYXRlVk5vZGUoRnJhZ21lbnQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3ViVHJlZS5hbmNob3IgPSBuZXh0Tm9kZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gbmV4dE5vZGUucHJldmlvdXNTaWJsaW5nXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBjb250YWluZXIubGFzdENoaWxkO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3ViVHJlZSA9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbm9kZS5ub2RlVHlwZSA9PT0gMyA/IGNyZWF0ZVRleHRWTm9kZSgnJykgOiBjcmVhdGVWTm9kZSgnZGl2Jyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgc3ViVHJlZS5lbCA9IG5vZGU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZub2RlLmNvbXBvbmVudC5zdWJUcmVlID0gc3ViVHJlZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIGlmIChzaGFwZUZsYWcgJiA2NCAvKiBURUxFUE9SVCAqLykge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChkb21UeXBlICE9PSA4IC8qIENPTU1FTlQgKi8pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbmV4dE5vZGUgPSBvbk1pc21hdGNoKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBuZXh0Tm9kZSA9IHZub2RlLnR5cGUuaHlkcmF0ZShub2RlLCB2bm9kZSwgcGFyZW50Q29tcG9uZW50LCBwYXJlbnRTdXNwZW5zZSwgc2xvdFNjb3BlSWRzLCBvcHRpbWl6ZWQsIHJlbmRlcmVySW50ZXJuYWxzLCBoeWRyYXRlQ2hpbGRyZW4pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKHNoYXBlRmxhZyAmIDEyOCAvKiBTVVNQRU5TRSAqLykge1xyXG4gICAgICAgICAgICAgICAgICAgIG5leHROb2RlID0gdm5vZGUudHlwZS5oeWRyYXRlKG5vZGUsIHZub2RlLCBwYXJlbnRDb21wb25lbnQsIHBhcmVudFN1c3BlbnNlLCBpc1NWR0NvbnRhaW5lcihwYXJlbnROb2RlKG5vZGUpKSwgc2xvdFNjb3BlSWRzLCBvcHRpbWl6ZWQsIHJlbmRlcmVySW50ZXJuYWxzLCBoeWRyYXRlTm9kZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykpIHtcclxuICAgICAgICAgICAgICAgICAgICB3YXJuKCdJbnZhbGlkIEhvc3RWTm9kZSB0eXBlOicsIHR5cGUsIGAoJHt0eXBlb2YgdHlwZX0pYCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChyZWYgIT0gbnVsbCkge1xyXG4gICAgICAgICAgICBzZXRSZWYocmVmLCBudWxsLCBwYXJlbnRTdXNwZW5zZSwgdm5vZGUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gbmV4dE5vZGU7XHJcbiAgICB9O1xyXG4gICAgY29uc3QgaHlkcmF0ZUVsZW1lbnQgPSAoZWwsIHZub2RlLCBwYXJlbnRDb21wb25lbnQsIHBhcmVudFN1c3BlbnNlLCBzbG90U2NvcGVJZHMsIG9wdGltaXplZCkgPT4ge1xyXG4gICAgICAgIG9wdGltaXplZCA9IG9wdGltaXplZCB8fCAhIXZub2RlLmR5bmFtaWNDaGlsZHJlbjtcclxuICAgICAgICBjb25zdCB7IHR5cGUsIHByb3BzLCBwYXRjaEZsYWcsIHNoYXBlRmxhZywgZGlycyB9ID0gdm5vZGU7XHJcbiAgICAgICAgLy8gIzQwMDYgZm9yIGZvcm0gZWxlbWVudHMgd2l0aCBub24tc3RyaW5nIHYtbW9kZWwgdmFsdWUgYmluZGluZ3NcclxuICAgICAgICAvLyBlLmcuIDxvcHRpb24gOnZhbHVlPVwib2JqXCI+LCA8aW5wdXQgdHlwZT1cImNoZWNrYm94XCIgOnRydWUtdmFsdWU9XCIxXCI+XHJcbiAgICAgICAgY29uc3QgZm9yY2VQYXRjaFZhbHVlID0gKHR5cGUgPT09ICdpbnB1dCcgJiYgZGlycykgfHwgdHlwZSA9PT0gJ29wdGlvbic7XHJcbiAgICAgICAgLy8gc2tpcCBwcm9wcyAmIGNoaWxkcmVuIGlmIHRoaXMgaXMgaG9pc3RlZCBzdGF0aWMgbm9kZXNcclxuICAgICAgICBpZiAoZm9yY2VQYXRjaFZhbHVlIHx8IHBhdGNoRmxhZyAhPT0gLTEgLyogSE9JU1RFRCAqLykge1xyXG4gICAgICAgICAgICBpZiAoZGlycykge1xyXG4gICAgICAgICAgICAgICAgaW52b2tlRGlyZWN0aXZlSG9vayh2bm9kZSwgbnVsbCwgcGFyZW50Q29tcG9uZW50LCAnY3JlYXRlZCcpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vIHByb3BzXHJcbiAgICAgICAgICAgIGlmIChwcm9wcykge1xyXG4gICAgICAgICAgICAgICAgaWYgKGZvcmNlUGF0Y2hWYWx1ZSB8fFxyXG4gICAgICAgICAgICAgICAgICAgICFvcHRpbWl6ZWQgfHxcclxuICAgICAgICAgICAgICAgICAgICBwYXRjaEZsYWcgJiAoMTYgLyogRlVMTF9QUk9QUyAqLyB8IDMyIC8qIEhZRFJBVEVfRVZFTlRTICovKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGZvciAoY29uc3Qga2V5IGluIHByb3BzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgoZm9yY2VQYXRjaFZhbHVlICYmIGtleS5lbmRzV2l0aCgndmFsdWUnKSkgfHxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIChpc09uKGtleSkgJiYgIWlzUmVzZXJ2ZWRQcm9wKGtleSkpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXRjaFByb3AoZWwsIGtleSwgbnVsbCwgcHJvcHNba2V5XSwgZmFsc2UsIHVuZGVmaW5lZCwgcGFyZW50Q29tcG9uZW50KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKHByb3BzLm9uQ2xpY2spIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBGYXN0IHBhdGggZm9yIGNsaWNrIGxpc3RlbmVycyAod2hpY2ggaXMgbW9zdCBvZnRlbikgdG8gYXZvaWRcclxuICAgICAgICAgICAgICAgICAgICAvLyBpdGVyYXRpbmcgdGhyb3VnaCBwcm9wcy5cclxuICAgICAgICAgICAgICAgICAgICBwYXRjaFByb3AoZWwsICdvbkNsaWNrJywgbnVsbCwgcHJvcHMub25DbGljaywgZmFsc2UsIHVuZGVmaW5lZCwgcGFyZW50Q29tcG9uZW50KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyB2bm9kZSAvIGRpcmVjdGl2ZSBob29rc1xyXG4gICAgICAgICAgICBsZXQgdm5vZGVIb29rcztcclxuICAgICAgICAgICAgaWYgKCh2bm9kZUhvb2tzID0gcHJvcHMgJiYgcHJvcHMub25Wbm9kZUJlZm9yZU1vdW50KSkge1xyXG4gICAgICAgICAgICAgICAgaW52b2tlVk5vZGVIb29rKHZub2RlSG9va3MsIHBhcmVudENvbXBvbmVudCwgdm5vZGUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChkaXJzKSB7XHJcbiAgICAgICAgICAgICAgICBpbnZva2VEaXJlY3RpdmVIb29rKHZub2RlLCBudWxsLCBwYXJlbnRDb21wb25lbnQsICdiZWZvcmVNb3VudCcpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICgodm5vZGVIb29rcyA9IHByb3BzICYmIHByb3BzLm9uVm5vZGVNb3VudGVkKSB8fCBkaXJzKSB7XHJcbiAgICAgICAgICAgICAgICBxdWV1ZUVmZmVjdFdpdGhTdXNwZW5zZSgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdm5vZGVIb29rcyAmJiBpbnZva2VWTm9kZUhvb2sodm5vZGVIb29rcywgcGFyZW50Q29tcG9uZW50LCB2bm9kZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgZGlycyAmJiBpbnZva2VEaXJlY3RpdmVIb29rKHZub2RlLCBudWxsLCBwYXJlbnRDb21wb25lbnQsICdtb3VudGVkJyk7XHJcbiAgICAgICAgICAgICAgICB9LCBwYXJlbnRTdXNwZW5zZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy8gY2hpbGRyZW5cclxuICAgICAgICAgICAgaWYgKHNoYXBlRmxhZyAmIDE2IC8qIEFSUkFZX0NISUxEUkVOICovICYmXHJcbiAgICAgICAgICAgICAgICAvLyBza2lwIGlmIGVsZW1lbnQgaGFzIGlubmVySFRNTCAvIHRleHRDb250ZW50XHJcbiAgICAgICAgICAgICAgICAhKHByb3BzICYmIChwcm9wcy5pbm5lckhUTUwgfHwgcHJvcHMudGV4dENvbnRlbnQpKSkge1xyXG4gICAgICAgICAgICAgICAgbGV0IG5leHQgPSBoeWRyYXRlQ2hpbGRyZW4oZWwuZmlyc3RDaGlsZCwgdm5vZGUsIGVsLCBwYXJlbnRDb21wb25lbnQsIHBhcmVudFN1c3BlbnNlLCBzbG90U2NvcGVJZHMsIG9wdGltaXplZCk7XHJcbiAgICAgICAgICAgICAgICBsZXQgaGFzV2FybmVkID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB3aGlsZSAobmV4dCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGhhc01pc21hdGNoID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmICFoYXNXYXJuZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgd2FybihgSHlkcmF0aW9uIGNoaWxkcmVuIG1pc21hdGNoIGluIDwke3Zub2RlLnR5cGV9PjogYCArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBgc2VydmVyIHJlbmRlcmVkIGVsZW1lbnQgY29udGFpbnMgbW9yZSBjaGlsZCBub2RlcyB0aGFuIGNsaWVudCB2ZG9tLmApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBoYXNXYXJuZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAvLyBUaGUgU1NSZWQgRE9NIGNvbnRhaW5zIG1vcmUgbm9kZXMgdGhhbiBpdCBzaG91bGQuIFJlbW92ZSB0aGVtLlxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGN1ciA9IG5leHQ7XHJcbiAgICAgICAgICAgICAgICAgICAgbmV4dCA9IG5leHQubmV4dFNpYmxpbmc7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVtb3ZlKGN1cik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSBpZiAoc2hhcGVGbGFnICYgOCAvKiBURVhUX0NISUxEUkVOICovKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoZWwudGV4dENvbnRlbnQgIT09IHZub2RlLmNoaWxkcmVuKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaGFzTWlzbWF0Y2ggPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSAmJlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB3YXJuKGBIeWRyYXRpb24gdGV4dCBjb250ZW50IG1pc21hdGNoIGluIDwke3Zub2RlLnR5cGV9PjpcXG5gICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGAtIENsaWVudDogJHtlbC50ZXh0Q29udGVudH1cXG5gICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGAtIFNlcnZlcjogJHt2bm9kZS5jaGlsZHJlbn1gKTtcclxuICAgICAgICAgICAgICAgICAgICBlbC50ZXh0Q29udGVudCA9IHZub2RlLmNoaWxkcmVuO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBlbC5uZXh0U2libGluZztcclxuICAgIH07XHJcbiAgICBjb25zdCBoeWRyYXRlQ2hpbGRyZW4gPSAobm9kZSwgcGFyZW50Vk5vZGUsIGNvbnRhaW5lciwgcGFyZW50Q29tcG9uZW50LCBwYXJlbnRTdXNwZW5zZSwgc2xvdFNjb3BlSWRzLCBvcHRpbWl6ZWQpID0+IHtcclxuICAgICAgICBvcHRpbWl6ZWQgPSBvcHRpbWl6ZWQgfHwgISFwYXJlbnRWTm9kZS5keW5hbWljQ2hpbGRyZW47XHJcbiAgICAgICAgY29uc3QgY2hpbGRyZW4gPSBwYXJlbnRWTm9kZS5jaGlsZHJlbjtcclxuICAgICAgICBjb25zdCBsID0gY2hpbGRyZW4ubGVuZ3RoO1xyXG4gICAgICAgIGxldCBoYXNXYXJuZWQgPSBmYWxzZTtcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGw7IGkrKykge1xyXG4gICAgICAgICAgICBjb25zdCB2bm9kZSA9IG9wdGltaXplZFxyXG4gICAgICAgICAgICAgICAgPyBjaGlsZHJlbltpXVxyXG4gICAgICAgICAgICAgICAgOiAoY2hpbGRyZW5baV0gPSBub3JtYWxpemVWTm9kZShjaGlsZHJlbltpXSkpO1xyXG4gICAgICAgICAgICBpZiAobm9kZSkge1xyXG4gICAgICAgICAgICAgICAgbm9kZSA9IGh5ZHJhdGVOb2RlKG5vZGUsIHZub2RlLCBwYXJlbnRDb21wb25lbnQsIHBhcmVudFN1c3BlbnNlLCBzbG90U2NvcGVJZHMsIG9wdGltaXplZCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSBpZiAodm5vZGUudHlwZSA9PT0gVGV4dCAmJiAhdm5vZGUuY2hpbGRyZW4pIHtcclxuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgaGFzTWlzbWF0Y2ggPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSAmJiAhaGFzV2FybmVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgd2FybihgSHlkcmF0aW9uIGNoaWxkcmVuIG1pc21hdGNoIGluIDwke2NvbnRhaW5lci50YWdOYW1lLnRvTG93ZXJDYXNlKCl9PjogYCArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGBzZXJ2ZXIgcmVuZGVyZWQgZWxlbWVudCBjb250YWlucyBmZXdlciBjaGlsZCBub2RlcyB0aGFuIGNsaWVudCB2ZG9tLmApO1xyXG4gICAgICAgICAgICAgICAgICAgIGhhc1dhcm5lZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAvLyB0aGUgU1NSZWQgRE9NIGRpZG4ndCBjb250YWluIGVub3VnaCBub2Rlcy4gTW91bnQgdGhlIG1pc3Npbmcgb25lcy5cclxuICAgICAgICAgICAgICAgIHBhdGNoKG51bGwsIHZub2RlLCBjb250YWluZXIsIG51bGwsIHBhcmVudENvbXBvbmVudCwgcGFyZW50U3VzcGVuc2UsIGlzU1ZHQ29udGFpbmVyKGNvbnRhaW5lciksIHNsb3RTY29wZUlkcyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG5vZGU7XHJcbiAgICB9O1xyXG4gICAgY29uc3QgaHlkcmF0ZUZyYWdtZW50ID0gKG5vZGUsIHZub2RlLCBwYXJlbnRDb21wb25lbnQsIHBhcmVudFN1c3BlbnNlLCBzbG90U2NvcGVJZHMsIG9wdGltaXplZCkgPT4ge1xyXG4gICAgICAgIGNvbnN0IHsgc2xvdFNjb3BlSWRzOiBmcmFnbWVudFNsb3RTY29wZUlkcyB9ID0gdm5vZGU7XHJcbiAgICAgICAgaWYgKGZyYWdtZW50U2xvdFNjb3BlSWRzKSB7XHJcbiAgICAgICAgICAgIHNsb3RTY29wZUlkcyA9IHNsb3RTY29wZUlkc1xyXG4gICAgICAgICAgICAgICAgPyBzbG90U2NvcGVJZHMuY29uY2F0KGZyYWdtZW50U2xvdFNjb3BlSWRzKVxyXG4gICAgICAgICAgICAgICAgOiBmcmFnbWVudFNsb3RTY29wZUlkcztcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgY29udGFpbmVyID0gcGFyZW50Tm9kZShub2RlKTtcclxuICAgICAgICBjb25zdCBuZXh0ID0gaHlkcmF0ZUNoaWxkcmVuKG5leHRTaWJsaW5nKG5vZGUpLCB2bm9kZSwgY29udGFpbmVyLCBwYXJlbnRDb21wb25lbnQsIHBhcmVudFN1c3BlbnNlLCBzbG90U2NvcGVJZHMsIG9wdGltaXplZCk7XHJcbiAgICAgICAgaWYgKG5leHQgJiYgaXNDb21tZW50KG5leHQpICYmIG5leHQuZGF0YSA9PT0gJ10nKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBuZXh0U2libGluZygodm5vZGUuYW5jaG9yID0gbmV4dCkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgLy8gZnJhZ21lbnQgZGlkbid0IGh5ZHJhdGUgc3VjY2Vzc2Z1bGx5LCBzaW5jZSB3ZSBkaWRuJ3QgZ2V0IGEgZW5kIGFuY2hvclxyXG4gICAgICAgICAgICAvLyBiYWNrLiBUaGlzIHNob3VsZCBoYXZlIGxlZCB0byBub2RlL2NoaWxkcmVuIG1pc21hdGNoIHdhcm5pbmdzLlxyXG4gICAgICAgICAgICBoYXNNaXNtYXRjaCA9IHRydWU7XHJcbiAgICAgICAgICAgIC8vIHNpbmNlIHRoZSBhbmNob3IgaXMgbWlzc2luZywgd2UgbmVlZCB0byBjcmVhdGUgb25lIGFuZCBpbnNlcnQgaXRcclxuICAgICAgICAgICAgaW5zZXJ0KCh2bm9kZS5hbmNob3IgPSBjcmVhdGVDb21tZW50KGBdYCkpLCBjb250YWluZXIsIG5leHQpO1xyXG4gICAgICAgICAgICByZXR1cm4gbmV4dDtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgY29uc3QgaGFuZGxlTWlzbWF0Y2ggPSAobm9kZSwgdm5vZGUsIHBhcmVudENvbXBvbmVudCwgcGFyZW50U3VzcGVuc2UsIHNsb3RTY29wZUlkcywgaXNGcmFnbWVudCkgPT4ge1xyXG4gICAgICAgIGhhc01pc21hdGNoID0gdHJ1ZTtcclxuICAgICAgICAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgJiZcclxuICAgICAgICAgICAgd2FybihgSHlkcmF0aW9uIG5vZGUgbWlzbWF0Y2g6XFxuLSBDbGllbnQgdm5vZGU6YCwgdm5vZGUudHlwZSwgYFxcbi0gU2VydmVyIHJlbmRlcmVkIERPTTpgLCBub2RlLCBub2RlLm5vZGVUeXBlID09PSAzIC8qIFRFWFQgKi9cclxuICAgICAgICAgICAgICAgID8gYCh0ZXh0KWBcclxuICAgICAgICAgICAgICAgIDogaXNDb21tZW50KG5vZGUpICYmIG5vZGUuZGF0YSA9PT0gJ1snXHJcbiAgICAgICAgICAgICAgICAgICAgPyBgKHN0YXJ0IG9mIGZyYWdtZW50KWBcclxuICAgICAgICAgICAgICAgICAgICA6IGBgKTtcclxuICAgICAgICB2bm9kZS5lbCA9IG51bGw7XHJcbiAgICAgICAgaWYgKGlzRnJhZ21lbnQpIHtcclxuICAgICAgICAgICAgLy8gcmVtb3ZlIGV4Y2Vzc2l2ZSBmcmFnbWVudCBub2Rlc1xyXG4gICAgICAgICAgICBjb25zdCBlbmQgPSBsb2NhdGVDbG9zaW5nQXN5bmNBbmNob3Iobm9kZSk7XHJcbiAgICAgICAgICAgIHdoaWxlICh0cnVlKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBuZXh0ID0gbmV4dFNpYmxpbmcobm9kZSk7XHJcbiAgICAgICAgICAgICAgICBpZiAobmV4dCAmJiBuZXh0ICE9PSBlbmQpIHtcclxuICAgICAgICAgICAgICAgICAgICByZW1vdmUobmV4dCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCBuZXh0ID0gbmV4dFNpYmxpbmcobm9kZSk7XHJcbiAgICAgICAgY29uc3QgY29udGFpbmVyID0gcGFyZW50Tm9kZShub2RlKTtcclxuICAgICAgICByZW1vdmUobm9kZSk7XHJcbiAgICAgICAgcGF0Y2gobnVsbCwgdm5vZGUsIGNvbnRhaW5lciwgbmV4dCwgcGFyZW50Q29tcG9uZW50LCBwYXJlbnRTdXNwZW5zZSwgaXNTVkdDb250YWluZXIoY29udGFpbmVyKSwgc2xvdFNjb3BlSWRzKTtcclxuICAgICAgICByZXR1cm4gbmV4dDtcclxuICAgIH07XHJcbiAgICBjb25zdCBsb2NhdGVDbG9zaW5nQXN5bmNBbmNob3IgPSAobm9kZSkgPT4ge1xyXG4gICAgICAgIGxldCBtYXRjaCA9IDA7XHJcbiAgICAgICAgd2hpbGUgKG5vZGUpIHtcclxuICAgICAgICAgICAgbm9kZSA9IG5leHRTaWJsaW5nKG5vZGUpO1xyXG4gICAgICAgICAgICBpZiAobm9kZSAmJiBpc0NvbW1lbnQobm9kZSkpIHtcclxuICAgICAgICAgICAgICAgIGlmIChub2RlLmRhdGEgPT09ICdbJylcclxuICAgICAgICAgICAgICAgICAgICBtYXRjaCsrO1xyXG4gICAgICAgICAgICAgICAgaWYgKG5vZGUuZGF0YSA9PT0gJ10nKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG1hdGNoID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXh0U2libGluZyhub2RlKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1hdGNoLS07XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBub2RlO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBbaHlkcmF0ZSwgaHlkcmF0ZU5vZGVdO1xyXG59XG5cbmxldCBzdXBwb3J0ZWQ7XHJcbmxldCBwZXJmO1xyXG5mdW5jdGlvbiBzdGFydE1lYXN1cmUoaW5zdGFuY2UsIHR5cGUpIHtcclxuICAgIGlmIChpbnN0YW5jZS5hcHBDb250ZXh0LmNvbmZpZy5wZXJmb3JtYW5jZSAmJiBpc1N1cHBvcnRlZCgpKSB7XHJcbiAgICAgICAgcGVyZi5tYXJrKGB2dWUtJHt0eXBlfS0ke2luc3RhbmNlLnVpZH1gKTtcclxuICAgIH1cclxuICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgfHwgX19WVUVfUFJPRF9ERVZUT09MU19fKSB7XHJcbiAgICAgICAgZGV2dG9vbHNQZXJmU3RhcnQoaW5zdGFuY2UsIHR5cGUsIHN1cHBvcnRlZCA/IHBlcmYubm93KCkgOiBEYXRlLm5vdygpKTtcclxuICAgIH1cclxufVxyXG5mdW5jdGlvbiBlbmRNZWFzdXJlKGluc3RhbmNlLCB0eXBlKSB7XHJcbiAgICBpZiAoaW5zdGFuY2UuYXBwQ29udGV4dC5jb25maWcucGVyZm9ybWFuY2UgJiYgaXNTdXBwb3J0ZWQoKSkge1xyXG4gICAgICAgIGNvbnN0IHN0YXJ0VGFnID0gYHZ1ZS0ke3R5cGV9LSR7aW5zdGFuY2UudWlkfWA7XHJcbiAgICAgICAgY29uc3QgZW5kVGFnID0gc3RhcnRUYWcgKyBgOmVuZGA7XHJcbiAgICAgICAgcGVyZi5tYXJrKGVuZFRhZyk7XHJcbiAgICAgICAgcGVyZi5tZWFzdXJlKGA8JHtmb3JtYXRDb21wb25lbnROYW1lKGluc3RhbmNlLCBpbnN0YW5jZS50eXBlKX0+ICR7dHlwZX1gLCBzdGFydFRhZywgZW5kVGFnKTtcclxuICAgICAgICBwZXJmLmNsZWFyTWFya3Moc3RhcnRUYWcpO1xyXG4gICAgICAgIHBlcmYuY2xlYXJNYXJrcyhlbmRUYWcpO1xyXG4gICAgfVxyXG4gICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB8fCBfX1ZVRV9QUk9EX0RFVlRPT0xTX18pIHtcclxuICAgICAgICBkZXZ0b29sc1BlcmZFbmQoaW5zdGFuY2UsIHR5cGUsIHN1cHBvcnRlZCA/IHBlcmYubm93KCkgOiBEYXRlLm5vdygpKTtcclxuICAgIH1cclxufVxyXG5mdW5jdGlvbiBpc1N1cHBvcnRlZCgpIHtcclxuICAgIGlmIChzdXBwb3J0ZWQgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgIHJldHVybiBzdXBwb3J0ZWQ7XHJcbiAgICB9XHJcbiAgICAvKiBlc2xpbnQtZGlzYWJsZSBuby1yZXN0cmljdGVkLWdsb2JhbHMgKi9cclxuICAgIGlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyAmJiB3aW5kb3cucGVyZm9ybWFuY2UpIHtcclxuICAgICAgICBzdXBwb3J0ZWQgPSB0cnVlO1xyXG4gICAgICAgIHBlcmYgPSB3aW5kb3cucGVyZm9ybWFuY2U7XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgICBzdXBwb3J0ZWQgPSBmYWxzZTtcclxuICAgIH1cclxuICAgIC8qIGVzbGludC1lbmFibGUgbm8tcmVzdHJpY3RlZC1nbG9iYWxzICovXHJcbiAgICByZXR1cm4gc3VwcG9ydGVkO1xyXG59XG5cbi8qKlxyXG4gKiBUaGlzIGlzIG9ubHkgY2FsbGVkIGluIGVzbS1idW5kbGVyIGJ1aWxkcy5cclxuICogSXQgaXMgY2FsbGVkIHdoZW4gYSByZW5kZXJlciBpcyBjcmVhdGVkLCBpbiBgYmFzZUNyZWF0ZVJlbmRlcmVyYCBzbyB0aGF0XHJcbiAqIGltcG9ydGluZyBydW50aW1lLWNvcmUgaXMgc2lkZS1lZmZlY3RzIGZyZWUuXHJcbiAqXHJcbiAqIGlzdGFuYnVsLWlnbm9yZS1uZXh0XHJcbiAqL1xyXG5mdW5jdGlvbiBpbml0RmVhdHVyZUZsYWdzKCkge1xyXG4gICAgY29uc3QgbmVlZFdhcm4gPSBbXTtcclxuICAgIGlmICh0eXBlb2YgX19WVUVfT1BUSU9OU19BUElfXyAhPT0gJ2Jvb2xlYW4nKSB7XHJcbiAgICAgICAgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmIG5lZWRXYXJuLnB1c2goYF9fVlVFX09QVElPTlNfQVBJX19gKTtcclxuICAgICAgICBnZXRHbG9iYWxUaGlzKCkuX19WVUVfT1BUSU9OU19BUElfXyA9IHRydWU7XHJcbiAgICB9XHJcbiAgICBpZiAodHlwZW9mIF9fVlVFX1BST0RfREVWVE9PTFNfXyAhPT0gJ2Jvb2xlYW4nKSB7XHJcbiAgICAgICAgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmIG5lZWRXYXJuLnB1c2goYF9fVlVFX1BST0RfREVWVE9PTFNfX2ApO1xyXG4gICAgICAgIGdldEdsb2JhbFRoaXMoKS5fX1ZVRV9QUk9EX0RFVlRPT0xTX18gPSBmYWxzZTtcclxuICAgIH1cclxuICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgJiYgbmVlZFdhcm4ubGVuZ3RoKSB7XHJcbiAgICAgICAgY29uc3QgbXVsdGkgPSBuZWVkV2Fybi5sZW5ndGggPiAxO1xyXG4gICAgICAgIGNvbnNvbGUud2FybihgRmVhdHVyZSBmbGFnJHttdWx0aSA/IGBzYCA6IGBgfSAke25lZWRXYXJuLmpvaW4oJywgJyl9ICR7bXVsdGkgPyBgYXJlYCA6IGBpc2B9IG5vdCBleHBsaWNpdGx5IGRlZmluZWQuIFlvdSBhcmUgcnVubmluZyB0aGUgZXNtLWJ1bmRsZXIgYnVpbGQgb2YgVnVlLCBgICtcclxuICAgICAgICAgICAgYHdoaWNoIGV4cGVjdHMgdGhlc2UgY29tcGlsZS10aW1lIGZlYXR1cmUgZmxhZ3MgdG8gYmUgZ2xvYmFsbHkgaW5qZWN0ZWQgYCArXHJcbiAgICAgICAgICAgIGB2aWEgdGhlIGJ1bmRsZXIgY29uZmlnIGluIG9yZGVyIHRvIGdldCBiZXR0ZXIgdHJlZS1zaGFraW5nIGluIHRoZSBgICtcclxuICAgICAgICAgICAgYHByb2R1Y3Rpb24gYnVuZGxlLlxcblxcbmAgK1xyXG4gICAgICAgICAgICBgRm9yIG1vcmUgZGV0YWlscywgc2VlIGh0dHBzOi8vbGluay52dWVqcy5vcmcvZmVhdHVyZS1mbGFncy5gKTtcclxuICAgIH1cclxufVxuXG5jb25zdCBxdWV1ZVBvc3RSZW5kZXJFZmZlY3QgPSBxdWV1ZUVmZmVjdFdpdGhTdXNwZW5zZVxyXG4gICAgO1xyXG4vKipcclxuICogVGhlIGNyZWF0ZVJlbmRlcmVyIGZ1bmN0aW9uIGFjY2VwdHMgdHdvIGdlbmVyaWMgYXJndW1lbnRzOlxyXG4gKiBIb3N0Tm9kZSBhbmQgSG9zdEVsZW1lbnQsIGNvcnJlc3BvbmRpbmcgdG8gTm9kZSBhbmQgRWxlbWVudCB0eXBlcyBpbiB0aGVcclxuICogaG9zdCBlbnZpcm9ubWVudC4gRm9yIGV4YW1wbGUsIGZvciBydW50aW1lLWRvbSwgSG9zdE5vZGUgd291bGQgYmUgdGhlIERPTVxyXG4gKiBgTm9kZWAgaW50ZXJmYWNlIGFuZCBIb3N0RWxlbWVudCB3b3VsZCBiZSB0aGUgRE9NIGBFbGVtZW50YCBpbnRlcmZhY2UuXHJcbiAqXHJcbiAqIEN1c3RvbSByZW5kZXJlcnMgY2FuIHBhc3MgaW4gdGhlIHBsYXRmb3JtIHNwZWNpZmljIHR5cGVzIGxpa2UgdGhpczpcclxuICpcclxuICogYGBgIGpzXHJcbiAqIGNvbnN0IHsgcmVuZGVyLCBjcmVhdGVBcHAgfSA9IGNyZWF0ZVJlbmRlcmVyPE5vZGUsIEVsZW1lbnQ+KHtcclxuICogICBwYXRjaFByb3AsXHJcbiAqICAgLi4ubm9kZU9wc1xyXG4gKiB9KVxyXG4gKiBgYGBcclxuICovXHJcbmZ1bmN0aW9uIGNyZWF0ZVJlbmRlcmVyKG9wdGlvbnMpIHtcclxuICAgIHJldHVybiBiYXNlQ3JlYXRlUmVuZGVyZXIob3B0aW9ucyk7XHJcbn1cclxuLy8gU2VwYXJhdGUgQVBJIGZvciBjcmVhdGluZyBoeWRyYXRpb24tZW5hYmxlZCByZW5kZXJlci5cclxuLy8gSHlkcmF0aW9uIGxvZ2ljIGlzIG9ubHkgdXNlZCB3aGVuIGNhbGxpbmcgdGhpcyBmdW5jdGlvbiwgbWFraW5nIGl0XHJcbi8vIHRyZWUtc2hha2FibGUuXHJcbmZ1bmN0aW9uIGNyZWF0ZUh5ZHJhdGlvblJlbmRlcmVyKG9wdGlvbnMpIHtcclxuICAgIHJldHVybiBiYXNlQ3JlYXRlUmVuZGVyZXIob3B0aW9ucywgY3JlYXRlSHlkcmF0aW9uRnVuY3Rpb25zKTtcclxufVxyXG4vLyBpbXBsZW1lbnRhdGlvblxyXG5mdW5jdGlvbiBiYXNlQ3JlYXRlUmVuZGVyZXIob3B0aW9ucywgY3JlYXRlSHlkcmF0aW9uRm5zKSB7XHJcbiAgICAvLyBjb21waWxlLXRpbWUgZmVhdHVyZSBmbGFncyBjaGVja1xyXG4gICAge1xyXG4gICAgICAgIGluaXRGZWF0dXJlRmxhZ3MoKTtcclxuICAgIH1cclxuICAgIGNvbnN0IHRhcmdldCA9IGdldEdsb2JhbFRoaXMoKTtcclxuICAgIHRhcmdldC5fX1ZVRV9fID0gdHJ1ZTtcclxuICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgfHwgX19WVUVfUFJPRF9ERVZUT09MU19fKSB7XHJcbiAgICAgICAgc2V0RGV2dG9vbHNIb29rKHRhcmdldC5fX1ZVRV9ERVZUT09MU19HTE9CQUxfSE9PS19fLCB0YXJnZXQpO1xyXG4gICAgfVxyXG4gICAgY29uc3QgeyBpbnNlcnQ6IGhvc3RJbnNlcnQsIHJlbW92ZTogaG9zdFJlbW92ZSwgcGF0Y2hQcm9wOiBob3N0UGF0Y2hQcm9wLCBjcmVhdGVFbGVtZW50OiBob3N0Q3JlYXRlRWxlbWVudCwgY3JlYXRlVGV4dDogaG9zdENyZWF0ZVRleHQsIGNyZWF0ZUNvbW1lbnQ6IGhvc3RDcmVhdGVDb21tZW50LCBzZXRUZXh0OiBob3N0U2V0VGV4dCwgc2V0RWxlbWVudFRleHQ6IGhvc3RTZXRFbGVtZW50VGV4dCwgcGFyZW50Tm9kZTogaG9zdFBhcmVudE5vZGUsIG5leHRTaWJsaW5nOiBob3N0TmV4dFNpYmxpbmcsIHNldFNjb3BlSWQ6IGhvc3RTZXRTY29wZUlkID0gTk9PUCwgY2xvbmVOb2RlOiBob3N0Q2xvbmVOb2RlLCBpbnNlcnRTdGF0aWNDb250ZW50OiBob3N0SW5zZXJ0U3RhdGljQ29udGVudCB9ID0gb3B0aW9ucztcclxuICAgIC8vIE5vdGU6IGZ1bmN0aW9ucyBpbnNpZGUgdGhpcyBjbG9zdXJlIHNob3VsZCB1c2UgYGNvbnN0IHh4eCA9ICgpID0+IHt9YFxyXG4gICAgLy8gc3R5bGUgaW4gb3JkZXIgdG8gcHJldmVudCBiZWluZyBpbmxpbmVkIGJ5IG1pbmlmaWVycy5cclxuICAgIGNvbnN0IHBhdGNoID0gKG4xLCBuMiwgY29udGFpbmVyLCBhbmNob3IgPSBudWxsLCBwYXJlbnRDb21wb25lbnQgPSBudWxsLCBwYXJlbnRTdXNwZW5zZSA9IG51bGwsIGlzU1ZHID0gZmFsc2UsIHNsb3RTY29wZUlkcyA9IG51bGwsIG9wdGltaXplZCA9IChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSAmJiBpc0htclVwZGF0aW5nID8gZmFsc2UgOiAhIW4yLmR5bmFtaWNDaGlsZHJlbikgPT4ge1xyXG4gICAgICAgIGlmIChuMSA9PT0gbjIpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBwYXRjaGluZyAmIG5vdCBzYW1lIHR5cGUsIHVubW91bnQgb2xkIHRyZWVcclxuICAgICAgICBpZiAobjEgJiYgIWlzU2FtZVZOb2RlVHlwZShuMSwgbjIpKSB7XHJcbiAgICAgICAgICAgIGFuY2hvciA9IGdldE5leHRIb3N0Tm9kZShuMSk7XHJcbiAgICAgICAgICAgIHVubW91bnQobjEsIHBhcmVudENvbXBvbmVudCwgcGFyZW50U3VzcGVuc2UsIHRydWUpO1xyXG4gICAgICAgICAgICBuMSA9IG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChuMi5wYXRjaEZsYWcgPT09IC0yIC8qIEJBSUwgKi8pIHtcclxuICAgICAgICAgICAgb3B0aW1pemVkID0gZmFsc2U7XHJcbiAgICAgICAgICAgIG4yLmR5bmFtaWNDaGlsZHJlbiA9IG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IHsgdHlwZSwgcmVmLCBzaGFwZUZsYWcgfSA9IG4yO1xyXG4gICAgICAgIHN3aXRjaCAodHlwZSkge1xyXG4gICAgICAgICAgICBjYXNlIFRleHQ6XHJcbiAgICAgICAgICAgICAgICBwcm9jZXNzVGV4dChuMSwgbjIsIGNvbnRhaW5lciwgYW5jaG9yKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIENvbW1lbnQ6XHJcbiAgICAgICAgICAgICAgICBwcm9jZXNzQ29tbWVudE5vZGUobjEsIG4yLCBjb250YWluZXIsIGFuY2hvcik7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBTdGF0aWM6XHJcbiAgICAgICAgICAgICAgICBpZiAobjEgPT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIG1vdW50U3RhdGljTm9kZShuMiwgY29udGFpbmVyLCBhbmNob3IsIGlzU1ZHKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHBhdGNoU3RhdGljTm9kZShuMSwgbjIsIGNvbnRhaW5lciwgaXNTVkcpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgRnJhZ21lbnQ6XHJcbiAgICAgICAgICAgICAgICBwcm9jZXNzRnJhZ21lbnQobjEsIG4yLCBjb250YWluZXIsIGFuY2hvciwgcGFyZW50Q29tcG9uZW50LCBwYXJlbnRTdXNwZW5zZSwgaXNTVkcsIHNsb3RTY29wZUlkcywgb3B0aW1pemVkKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgaWYgKHNoYXBlRmxhZyAmIDEgLyogRUxFTUVOVCAqLykge1xyXG4gICAgICAgICAgICAgICAgICAgIHByb2Nlc3NFbGVtZW50KG4xLCBuMiwgY29udGFpbmVyLCBhbmNob3IsIHBhcmVudENvbXBvbmVudCwgcGFyZW50U3VzcGVuc2UsIGlzU1ZHLCBzbG90U2NvcGVJZHMsIG9wdGltaXplZCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIGlmIChzaGFwZUZsYWcgJiA2IC8qIENPTVBPTkVOVCAqLykge1xyXG4gICAgICAgICAgICAgICAgICAgIHByb2Nlc3NDb21wb25lbnQobjEsIG4yLCBjb250YWluZXIsIGFuY2hvciwgcGFyZW50Q29tcG9uZW50LCBwYXJlbnRTdXNwZW5zZSwgaXNTVkcsIHNsb3RTY29wZUlkcywgb3B0aW1pemVkKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKHNoYXBlRmxhZyAmIDY0IC8qIFRFTEVQT1JUICovKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdHlwZS5wcm9jZXNzKG4xLCBuMiwgY29udGFpbmVyLCBhbmNob3IsIHBhcmVudENvbXBvbmVudCwgcGFyZW50U3VzcGVuc2UsIGlzU1ZHLCBzbG90U2NvcGVJZHMsIG9wdGltaXplZCwgaW50ZXJuYWxzKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKHNoYXBlRmxhZyAmIDEyOCAvKiBTVVNQRU5TRSAqLykge1xyXG4gICAgICAgICAgICAgICAgICAgIHR5cGUucHJvY2VzcyhuMSwgbjIsIGNvbnRhaW5lciwgYW5jaG9yLCBwYXJlbnRDb21wb25lbnQsIHBhcmVudFN1c3BlbnNlLCBpc1NWRywgc2xvdFNjb3BlSWRzLCBvcHRpbWl6ZWQsIGludGVybmFscyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykpIHtcclxuICAgICAgICAgICAgICAgICAgICB3YXJuKCdJbnZhbGlkIFZOb2RlIHR5cGU6JywgdHlwZSwgYCgke3R5cGVvZiB0eXBlfSlgKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gc2V0IHJlZlxyXG4gICAgICAgIGlmIChyZWYgIT0gbnVsbCAmJiBwYXJlbnRDb21wb25lbnQpIHtcclxuICAgICAgICAgICAgc2V0UmVmKHJlZiwgbjEgJiYgbjEucmVmLCBwYXJlbnRTdXNwZW5zZSwgbjIgfHwgbjEsICFuMik7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIGNvbnN0IHByb2Nlc3NUZXh0ID0gKG4xLCBuMiwgY29udGFpbmVyLCBhbmNob3IpID0+IHtcclxuICAgICAgICBpZiAobjEgPT0gbnVsbCkge1xyXG4gICAgICAgICAgICBob3N0SW5zZXJ0KChuMi5lbCA9IGhvc3RDcmVhdGVUZXh0KG4yLmNoaWxkcmVuKSksIGNvbnRhaW5lciwgYW5jaG9yKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGVsID0gKG4yLmVsID0gbjEuZWwpO1xyXG4gICAgICAgICAgICBpZiAobjIuY2hpbGRyZW4gIT09IG4xLmNoaWxkcmVuKSB7XHJcbiAgICAgICAgICAgICAgICBob3N0U2V0VGV4dChlbCwgbjIuY2hpbGRyZW4pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIGNvbnN0IHByb2Nlc3NDb21tZW50Tm9kZSA9IChuMSwgbjIsIGNvbnRhaW5lciwgYW5jaG9yKSA9PiB7XHJcbiAgICAgICAgaWYgKG4xID09IG51bGwpIHtcclxuICAgICAgICAgICAgaG9zdEluc2VydCgobjIuZWwgPSBob3N0Q3JlYXRlQ29tbWVudChuMi5jaGlsZHJlbiB8fCAnJykpLCBjb250YWluZXIsIGFuY2hvcik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAvLyB0aGVyZSdzIG5vIHN1cHBvcnQgZm9yIGR5bmFtaWMgY29tbWVudHNcclxuICAgICAgICAgICAgbjIuZWwgPSBuMS5lbDtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgY29uc3QgbW91bnRTdGF0aWNOb2RlID0gKG4yLCBjb250YWluZXIsIGFuY2hvciwgaXNTVkcpID0+IHtcclxuICAgICAgICBbbjIuZWwsIG4yLmFuY2hvcl0gPSBob3N0SW5zZXJ0U3RhdGljQ29udGVudChuMi5jaGlsZHJlbiwgY29udGFpbmVyLCBhbmNob3IsIGlzU1ZHKTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIERldiAvIEhNUiBvbmx5XHJcbiAgICAgKi9cclxuICAgIGNvbnN0IHBhdGNoU3RhdGljTm9kZSA9IChuMSwgbjIsIGNvbnRhaW5lciwgaXNTVkcpID0+IHtcclxuICAgICAgICAvLyBzdGF0aWMgbm9kZXMgYXJlIG9ubHkgcGF0Y2hlZCBkdXJpbmcgZGV2IGZvciBITVJcclxuICAgICAgICBpZiAobjIuY2hpbGRyZW4gIT09IG4xLmNoaWxkcmVuKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGFuY2hvciA9IGhvc3ROZXh0U2libGluZyhuMS5hbmNob3IpO1xyXG4gICAgICAgICAgICAvLyByZW1vdmUgZXhpc3RpbmdcclxuICAgICAgICAgICAgcmVtb3ZlU3RhdGljTm9kZShuMSk7XHJcbiAgICAgICAgICAgIFtuMi5lbCwgbjIuYW5jaG9yXSA9IGhvc3RJbnNlcnRTdGF0aWNDb250ZW50KG4yLmNoaWxkcmVuLCBjb250YWluZXIsIGFuY2hvciwgaXNTVkcpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgbjIuZWwgPSBuMS5lbDtcclxuICAgICAgICAgICAgbjIuYW5jaG9yID0gbjEuYW5jaG9yO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBjb25zdCBtb3ZlU3RhdGljTm9kZSA9ICh7IGVsLCBhbmNob3IgfSwgY29udGFpbmVyLCBuZXh0U2libGluZykgPT4ge1xyXG4gICAgICAgIGxldCBuZXh0O1xyXG4gICAgICAgIHdoaWxlIChlbCAmJiBlbCAhPT0gYW5jaG9yKSB7XHJcbiAgICAgICAgICAgIG5leHQgPSBob3N0TmV4dFNpYmxpbmcoZWwpO1xyXG4gICAgICAgICAgICBob3N0SW5zZXJ0KGVsLCBjb250YWluZXIsIG5leHRTaWJsaW5nKTtcclxuICAgICAgICAgICAgZWwgPSBuZXh0O1xyXG4gICAgICAgIH1cclxuICAgICAgICBob3N0SW5zZXJ0KGFuY2hvciwgY29udGFpbmVyLCBuZXh0U2libGluZyk7XHJcbiAgICB9O1xyXG4gICAgY29uc3QgcmVtb3ZlU3RhdGljTm9kZSA9ICh7IGVsLCBhbmNob3IgfSkgPT4ge1xyXG4gICAgICAgIGxldCBuZXh0O1xyXG4gICAgICAgIHdoaWxlIChlbCAmJiBlbCAhPT0gYW5jaG9yKSB7XHJcbiAgICAgICAgICAgIG5leHQgPSBob3N0TmV4dFNpYmxpbmcoZWwpO1xyXG4gICAgICAgICAgICBob3N0UmVtb3ZlKGVsKTtcclxuICAgICAgICAgICAgZWwgPSBuZXh0O1xyXG4gICAgICAgIH1cclxuICAgICAgICBob3N0UmVtb3ZlKGFuY2hvcik7XHJcbiAgICB9O1xyXG4gICAgY29uc3QgcHJvY2Vzc0VsZW1lbnQgPSAobjEsIG4yLCBjb250YWluZXIsIGFuY2hvciwgcGFyZW50Q29tcG9uZW50LCBwYXJlbnRTdXNwZW5zZSwgaXNTVkcsIHNsb3RTY29wZUlkcywgb3B0aW1pemVkKSA9PiB7XHJcbiAgICAgICAgaXNTVkcgPSBpc1NWRyB8fCBuMi50eXBlID09PSAnc3ZnJztcclxuICAgICAgICBpZiAobjEgPT0gbnVsbCkge1xyXG4gICAgICAgICAgICBtb3VudEVsZW1lbnQobjIsIGNvbnRhaW5lciwgYW5jaG9yLCBwYXJlbnRDb21wb25lbnQsIHBhcmVudFN1c3BlbnNlLCBpc1NWRywgc2xvdFNjb3BlSWRzLCBvcHRpbWl6ZWQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgcGF0Y2hFbGVtZW50KG4xLCBuMiwgcGFyZW50Q29tcG9uZW50LCBwYXJlbnRTdXNwZW5zZSwgaXNTVkcsIHNsb3RTY29wZUlkcywgb3B0aW1pemVkKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgY29uc3QgbW91bnRFbGVtZW50ID0gKHZub2RlLCBjb250YWluZXIsIGFuY2hvciwgcGFyZW50Q29tcG9uZW50LCBwYXJlbnRTdXNwZW5zZSwgaXNTVkcsIHNsb3RTY29wZUlkcywgb3B0aW1pemVkKSA9PiB7XHJcbiAgICAgICAgbGV0IGVsO1xyXG4gICAgICAgIGxldCB2bm9kZUhvb2s7XHJcbiAgICAgICAgY29uc3QgeyB0eXBlLCBwcm9wcywgc2hhcGVGbGFnLCB0cmFuc2l0aW9uLCBwYXRjaEZsYWcsIGRpcnMgfSA9IHZub2RlO1xyXG4gICAgICAgIGlmICghKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmXHJcbiAgICAgICAgICAgIHZub2RlLmVsICYmXHJcbiAgICAgICAgICAgIGhvc3RDbG9uZU5vZGUgIT09IHVuZGVmaW5lZCAmJlxyXG4gICAgICAgICAgICBwYXRjaEZsYWcgPT09IC0xIC8qIEhPSVNURUQgKi8pIHtcclxuICAgICAgICAgICAgLy8gSWYgYSB2bm9kZSBoYXMgbm9uLW51bGwgZWwsIGl0IG1lYW5zIGl0J3MgYmVpbmcgcmV1c2VkLlxyXG4gICAgICAgICAgICAvLyBPbmx5IHN0YXRpYyB2bm9kZXMgY2FuIGJlIHJldXNlZCwgc28gaXRzIG1vdW50ZWQgRE9NIG5vZGVzIHNob3VsZCBiZVxyXG4gICAgICAgICAgICAvLyBleGFjdGx5IHRoZSBzYW1lLCBhbmQgd2UgY2FuIHNpbXBseSBkbyBhIGNsb25lIGhlcmUuXHJcbiAgICAgICAgICAgIC8vIG9ubHkgZG8gdGhpcyBpbiBwcm9kdWN0aW9uIHNpbmNlIGNsb25lZCB0cmVlcyBjYW5ub3QgYmUgSE1SIHVwZGF0ZWQuXHJcbiAgICAgICAgICAgIGVsID0gdm5vZGUuZWwgPSBob3N0Q2xvbmVOb2RlKHZub2RlLmVsKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGVsID0gdm5vZGUuZWwgPSBob3N0Q3JlYXRlRWxlbWVudCh2bm9kZS50eXBlLCBpc1NWRywgcHJvcHMgJiYgcHJvcHMuaXMsIHByb3BzKTtcclxuICAgICAgICAgICAgLy8gbW91bnQgY2hpbGRyZW4gZmlyc3QsIHNpbmNlIHNvbWUgcHJvcHMgbWF5IHJlbHkgb24gY2hpbGQgY29udGVudFxyXG4gICAgICAgICAgICAvLyBiZWluZyBhbHJlYWR5IHJlbmRlcmVkLCBlLmcuIGA8c2VsZWN0IHZhbHVlPmBcclxuICAgICAgICAgICAgaWYgKHNoYXBlRmxhZyAmIDggLyogVEVYVF9DSElMRFJFTiAqLykge1xyXG4gICAgICAgICAgICAgICAgaG9zdFNldEVsZW1lbnRUZXh0KGVsLCB2bm9kZS5jaGlsZHJlbik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSBpZiAoc2hhcGVGbGFnICYgMTYgLyogQVJSQVlfQ0hJTERSRU4gKi8pIHtcclxuICAgICAgICAgICAgICAgIG1vdW50Q2hpbGRyZW4odm5vZGUuY2hpbGRyZW4sIGVsLCBudWxsLCBwYXJlbnRDb21wb25lbnQsIHBhcmVudFN1c3BlbnNlLCBpc1NWRyAmJiB0eXBlICE9PSAnZm9yZWlnbk9iamVjdCcsIHNsb3RTY29wZUlkcywgb3B0aW1pemVkKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoZGlycykge1xyXG4gICAgICAgICAgICAgICAgaW52b2tlRGlyZWN0aXZlSG9vayh2bm9kZSwgbnVsbCwgcGFyZW50Q29tcG9uZW50LCAnY3JlYXRlZCcpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vIHByb3BzXHJcbiAgICAgICAgICAgIGlmIChwcm9wcykge1xyXG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gcHJvcHMpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoa2V5ICE9PSAndmFsdWUnICYmICFpc1Jlc2VydmVkUHJvcChrZXkpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGhvc3RQYXRjaFByb3AoZWwsIGtleSwgbnVsbCwgcHJvcHNba2V5XSwgaXNTVkcsIHZub2RlLmNoaWxkcmVuLCBwYXJlbnRDb21wb25lbnQsIHBhcmVudFN1c3BlbnNlLCB1bm1vdW50Q2hpbGRyZW4pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgICAgICogU3BlY2lhbCBjYXNlIGZvciBzZXR0aW5nIHZhbHVlIG9uIERPTSBlbGVtZW50czpcclxuICAgICAgICAgICAgICAgICAqIC0gaXQgY2FuIGJlIG9yZGVyLXNlbnNpdGl2ZSAoZS5nLiBzaG91bGQgYmUgc2V0ICphZnRlciogbWluL21heCwgIzIzMjUsICM0MDI0KVxyXG4gICAgICAgICAgICAgICAgICogLSBpdCBuZWVkcyB0byBiZSBmb3JjZWQgKCMxNDcxKVxyXG4gICAgICAgICAgICAgICAgICogIzIzNTMgcHJvcG9zZXMgYWRkaW5nIGFub3RoZXIgcmVuZGVyZXIgb3B0aW9uIHRvIGNvbmZpZ3VyZSB0aGlzLCBidXRcclxuICAgICAgICAgICAgICAgICAqIHRoZSBwcm9wZXJ0aWVzIGFmZmVjdHMgYXJlIHNvIGZpbml0ZSBpdCBpcyB3b3J0aCBzcGVjaWFsIGNhc2luZyBpdFxyXG4gICAgICAgICAgICAgICAgICogaGVyZSB0byByZWR1Y2UgdGhlIGNvbXBsZXhpdHkuIChTcGVjaWFsIGNhc2luZyBpdCBhbHNvIHNob3VsZCBub3RcclxuICAgICAgICAgICAgICAgICAqIGFmZmVjdCBub24tRE9NIHJlbmRlcmVycylcclxuICAgICAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICAgICAgaWYgKCd2YWx1ZScgaW4gcHJvcHMpIHtcclxuICAgICAgICAgICAgICAgICAgICBob3N0UGF0Y2hQcm9wKGVsLCAndmFsdWUnLCBudWxsLCBwcm9wcy52YWx1ZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAoKHZub2RlSG9vayA9IHByb3BzLm9uVm5vZGVCZWZvcmVNb3VudCkpIHtcclxuICAgICAgICAgICAgICAgICAgICBpbnZva2VWTm9kZUhvb2sodm5vZGVIb29rLCBwYXJlbnRDb21wb25lbnQsIHZub2RlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyBzY29wZUlkXHJcbiAgICAgICAgICAgIHNldFNjb3BlSWQoZWwsIHZub2RlLCB2bm9kZS5zY29wZUlkLCBzbG90U2NvcGVJZHMsIHBhcmVudENvbXBvbmVudCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgfHwgX19WVUVfUFJPRF9ERVZUT09MU19fKSB7XHJcbiAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlbCwgJ19fdm5vZGUnLCB7XHJcbiAgICAgICAgICAgICAgICB2YWx1ZTogdm5vZGUsXHJcbiAgICAgICAgICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGVsLCAnX192dWVQYXJlbnRDb21wb25lbnQnLCB7XHJcbiAgICAgICAgICAgICAgICB2YWx1ZTogcGFyZW50Q29tcG9uZW50LFxyXG4gICAgICAgICAgICAgICAgZW51bWVyYWJsZTogZmFsc2VcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChkaXJzKSB7XHJcbiAgICAgICAgICAgIGludm9rZURpcmVjdGl2ZUhvb2sodm5vZGUsIG51bGwsIHBhcmVudENvbXBvbmVudCwgJ2JlZm9yZU1vdW50Jyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vICMxNTgzIEZvciBpbnNpZGUgc3VzcGVuc2UgKyBzdXNwZW5zZSBub3QgcmVzb2x2ZWQgY2FzZSwgZW50ZXIgaG9vayBzaG91bGQgY2FsbCB3aGVuIHN1c3BlbnNlIHJlc29sdmVkXHJcbiAgICAgICAgLy8gIzE2ODkgRm9yIGluc2lkZSBzdXNwZW5zZSArIHN1c3BlbnNlIHJlc29sdmVkIGNhc2UsIGp1c3QgY2FsbCBpdFxyXG4gICAgICAgIGNvbnN0IG5lZWRDYWxsVHJhbnNpdGlvbkhvb2tzID0gKCFwYXJlbnRTdXNwZW5zZSB8fCAocGFyZW50U3VzcGVuc2UgJiYgIXBhcmVudFN1c3BlbnNlLnBlbmRpbmdCcmFuY2gpKSAmJlxyXG4gICAgICAgICAgICB0cmFuc2l0aW9uICYmXHJcbiAgICAgICAgICAgICF0cmFuc2l0aW9uLnBlcnNpc3RlZDtcclxuICAgICAgICBpZiAobmVlZENhbGxUcmFuc2l0aW9uSG9va3MpIHtcclxuICAgICAgICAgICAgdHJhbnNpdGlvbi5iZWZvcmVFbnRlcihlbCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGhvc3RJbnNlcnQoZWwsIGNvbnRhaW5lciwgYW5jaG9yKTtcclxuICAgICAgICBpZiAoKHZub2RlSG9vayA9IHByb3BzICYmIHByb3BzLm9uVm5vZGVNb3VudGVkKSB8fFxyXG4gICAgICAgICAgICBuZWVkQ2FsbFRyYW5zaXRpb25Ib29rcyB8fFxyXG4gICAgICAgICAgICBkaXJzKSB7XHJcbiAgICAgICAgICAgIHF1ZXVlUG9zdFJlbmRlckVmZmVjdCgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB2bm9kZUhvb2sgJiYgaW52b2tlVk5vZGVIb29rKHZub2RlSG9vaywgcGFyZW50Q29tcG9uZW50LCB2bm9kZSk7XHJcbiAgICAgICAgICAgICAgICBuZWVkQ2FsbFRyYW5zaXRpb25Ib29rcyAmJiB0cmFuc2l0aW9uLmVudGVyKGVsKTtcclxuICAgICAgICAgICAgICAgIGRpcnMgJiYgaW52b2tlRGlyZWN0aXZlSG9vayh2bm9kZSwgbnVsbCwgcGFyZW50Q29tcG9uZW50LCAnbW91bnRlZCcpO1xyXG4gICAgICAgICAgICB9LCBwYXJlbnRTdXNwZW5zZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIGNvbnN0IHNldFNjb3BlSWQgPSAoZWwsIHZub2RlLCBzY29wZUlkLCBzbG90U2NvcGVJZHMsIHBhcmVudENvbXBvbmVudCkgPT4ge1xyXG4gICAgICAgIGlmIChzY29wZUlkKSB7XHJcbiAgICAgICAgICAgIGhvc3RTZXRTY29wZUlkKGVsLCBzY29wZUlkKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHNsb3RTY29wZUlkcykge1xyXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNsb3RTY29wZUlkcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgaG9zdFNldFNjb3BlSWQoZWwsIHNsb3RTY29wZUlkc1tpXSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHBhcmVudENvbXBvbmVudCkge1xyXG4gICAgICAgICAgICBsZXQgc3ViVHJlZSA9IHBhcmVudENvbXBvbmVudC5zdWJUcmVlO1xyXG4gICAgICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmXHJcbiAgICAgICAgICAgICAgICBzdWJUcmVlLnBhdGNoRmxhZyA+IDAgJiZcclxuICAgICAgICAgICAgICAgIHN1YlRyZWUucGF0Y2hGbGFnICYgMjA0OCAvKiBERVZfUk9PVF9GUkFHTUVOVCAqLykge1xyXG4gICAgICAgICAgICAgICAgc3ViVHJlZSA9XHJcbiAgICAgICAgICAgICAgICAgICAgZmlsdGVyU2luZ2xlUm9vdChzdWJUcmVlLmNoaWxkcmVuKSB8fCBzdWJUcmVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICh2bm9kZSA9PT0gc3ViVHJlZSkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgcGFyZW50Vk5vZGUgPSBwYXJlbnRDb21wb25lbnQudm5vZGU7XHJcbiAgICAgICAgICAgICAgICBzZXRTY29wZUlkKGVsLCBwYXJlbnRWTm9kZSwgcGFyZW50Vk5vZGUuc2NvcGVJZCwgcGFyZW50Vk5vZGUuc2xvdFNjb3BlSWRzLCBwYXJlbnRDb21wb25lbnQucGFyZW50KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBjb25zdCBtb3VudENoaWxkcmVuID0gKGNoaWxkcmVuLCBjb250YWluZXIsIGFuY2hvciwgcGFyZW50Q29tcG9uZW50LCBwYXJlbnRTdXNwZW5zZSwgaXNTVkcsIHNsb3RTY29wZUlkcywgb3B0aW1pemVkLCBzdGFydCA9IDApID0+IHtcclxuICAgICAgICBmb3IgKGxldCBpID0gc3RhcnQ7IGkgPCBjaGlsZHJlbi5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBjb25zdCBjaGlsZCA9IChjaGlsZHJlbltpXSA9IG9wdGltaXplZFxyXG4gICAgICAgICAgICAgICAgPyBjbG9uZUlmTW91bnRlZChjaGlsZHJlbltpXSlcclxuICAgICAgICAgICAgICAgIDogbm9ybWFsaXplVk5vZGUoY2hpbGRyZW5baV0pKTtcclxuICAgICAgICAgICAgcGF0Y2gobnVsbCwgY2hpbGQsIGNvbnRhaW5lciwgYW5jaG9yLCBwYXJlbnRDb21wb25lbnQsIHBhcmVudFN1c3BlbnNlLCBpc1NWRywgc2xvdFNjb3BlSWRzLCBvcHRpbWl6ZWQpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBjb25zdCBwYXRjaEVsZW1lbnQgPSAobjEsIG4yLCBwYXJlbnRDb21wb25lbnQsIHBhcmVudFN1c3BlbnNlLCBpc1NWRywgc2xvdFNjb3BlSWRzLCBvcHRpbWl6ZWQpID0+IHtcclxuICAgICAgICBjb25zdCBlbCA9IChuMi5lbCA9IG4xLmVsKTtcclxuICAgICAgICBsZXQgeyBwYXRjaEZsYWcsIGR5bmFtaWNDaGlsZHJlbiwgZGlycyB9ID0gbjI7XHJcbiAgICAgICAgLy8gIzE0MjYgdGFrZSB0aGUgb2xkIHZub2RlJ3MgcGF0Y2ggZmxhZyBpbnRvIGFjY291bnQgc2luY2UgdXNlciBtYXkgY2xvbmUgYVxyXG4gICAgICAgIC8vIGNvbXBpbGVyLWdlbmVyYXRlZCB2bm9kZSwgd2hpY2ggZGUtb3B0cyB0byBGVUxMX1BST1BTXHJcbiAgICAgICAgcGF0Y2hGbGFnIHw9IG4xLnBhdGNoRmxhZyAmIDE2IC8qIEZVTExfUFJPUFMgKi87XHJcbiAgICAgICAgY29uc3Qgb2xkUHJvcHMgPSBuMS5wcm9wcyB8fCBFTVBUWV9PQko7XHJcbiAgICAgICAgY29uc3QgbmV3UHJvcHMgPSBuMi5wcm9wcyB8fCBFTVBUWV9PQko7XHJcbiAgICAgICAgbGV0IHZub2RlSG9vaztcclxuICAgICAgICAvLyBkaXNhYmxlIHJlY3Vyc2UgaW4gYmVmb3JlVXBkYXRlIGhvb2tzXHJcbiAgICAgICAgcGFyZW50Q29tcG9uZW50ICYmIHRvZ2dsZVJlY3Vyc2UocGFyZW50Q29tcG9uZW50LCBmYWxzZSk7XHJcbiAgICAgICAgaWYgKCh2bm9kZUhvb2sgPSBuZXdQcm9wcy5vblZub2RlQmVmb3JlVXBkYXRlKSkge1xyXG4gICAgICAgICAgICBpbnZva2VWTm9kZUhvb2sodm5vZGVIb29rLCBwYXJlbnRDb21wb25lbnQsIG4yLCBuMSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChkaXJzKSB7XHJcbiAgICAgICAgICAgIGludm9rZURpcmVjdGl2ZUhvb2sobjIsIG4xLCBwYXJlbnRDb21wb25lbnQsICdiZWZvcmVVcGRhdGUnKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcGFyZW50Q29tcG9uZW50ICYmIHRvZ2dsZVJlY3Vyc2UocGFyZW50Q29tcG9uZW50LCB0cnVlKTtcclxuICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmIGlzSG1yVXBkYXRpbmcpIHtcclxuICAgICAgICAgICAgLy8gSE1SIHVwZGF0ZWQsIGZvcmNlIGZ1bGwgZGlmZlxyXG4gICAgICAgICAgICBwYXRjaEZsYWcgPSAwO1xyXG4gICAgICAgICAgICBvcHRpbWl6ZWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgZHluYW1pY0NoaWxkcmVuID0gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgYXJlQ2hpbGRyZW5TVkcgPSBpc1NWRyAmJiBuMi50eXBlICE9PSAnZm9yZWlnbk9iamVjdCc7XHJcbiAgICAgICAgaWYgKGR5bmFtaWNDaGlsZHJlbikge1xyXG4gICAgICAgICAgICBwYXRjaEJsb2NrQ2hpbGRyZW4objEuZHluYW1pY0NoaWxkcmVuLCBkeW5hbWljQ2hpbGRyZW4sIGVsLCBwYXJlbnRDb21wb25lbnQsIHBhcmVudFN1c3BlbnNlLCBhcmVDaGlsZHJlblNWRywgc2xvdFNjb3BlSWRzKTtcclxuICAgICAgICAgICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSAmJiBwYXJlbnRDb21wb25lbnQgJiYgcGFyZW50Q29tcG9uZW50LnR5cGUuX19obXJJZCkge1xyXG4gICAgICAgICAgICAgICAgdHJhdmVyc2VTdGF0aWNDaGlsZHJlbihuMSwgbjIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKCFvcHRpbWl6ZWQpIHtcclxuICAgICAgICAgICAgLy8gZnVsbCBkaWZmXHJcbiAgICAgICAgICAgIHBhdGNoQ2hpbGRyZW4objEsIG4yLCBlbCwgbnVsbCwgcGFyZW50Q29tcG9uZW50LCBwYXJlbnRTdXNwZW5zZSwgYXJlQ2hpbGRyZW5TVkcsIHNsb3RTY29wZUlkcywgZmFsc2UpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAocGF0Y2hGbGFnID4gMCkge1xyXG4gICAgICAgICAgICAvLyB0aGUgcHJlc2VuY2Ugb2YgYSBwYXRjaEZsYWcgbWVhbnMgdGhpcyBlbGVtZW50J3MgcmVuZGVyIGNvZGUgd2FzXHJcbiAgICAgICAgICAgIC8vIGdlbmVyYXRlZCBieSB0aGUgY29tcGlsZXIgYW5kIGNhbiB0YWtlIHRoZSBmYXN0IHBhdGguXHJcbiAgICAgICAgICAgIC8vIGluIHRoaXMgcGF0aCBvbGQgbm9kZSBhbmQgbmV3IG5vZGUgYXJlIGd1YXJhbnRlZWQgdG8gaGF2ZSB0aGUgc2FtZSBzaGFwZVxyXG4gICAgICAgICAgICAvLyAoaS5lLiBhdCB0aGUgZXhhY3Qgc2FtZSBwb3NpdGlvbiBpbiB0aGUgc291cmNlIHRlbXBsYXRlKVxyXG4gICAgICAgICAgICBpZiAocGF0Y2hGbGFnICYgMTYgLyogRlVMTF9QUk9QUyAqLykge1xyXG4gICAgICAgICAgICAgICAgLy8gZWxlbWVudCBwcm9wcyBjb250YWluIGR5bmFtaWMga2V5cywgZnVsbCBkaWZmIG5lZWRlZFxyXG4gICAgICAgICAgICAgICAgcGF0Y2hQcm9wcyhlbCwgbjIsIG9sZFByb3BzLCBuZXdQcm9wcywgcGFyZW50Q29tcG9uZW50LCBwYXJlbnRTdXNwZW5zZSwgaXNTVkcpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgLy8gY2xhc3NcclxuICAgICAgICAgICAgICAgIC8vIHRoaXMgZmxhZyBpcyBtYXRjaGVkIHdoZW4gdGhlIGVsZW1lbnQgaGFzIGR5bmFtaWMgY2xhc3MgYmluZGluZ3MuXHJcbiAgICAgICAgICAgICAgICBpZiAocGF0Y2hGbGFnICYgMiAvKiBDTEFTUyAqLykge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChvbGRQcm9wcy5jbGFzcyAhPT0gbmV3UHJvcHMuY2xhc3MpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaG9zdFBhdGNoUHJvcChlbCwgJ2NsYXNzJywgbnVsbCwgbmV3UHJvcHMuY2xhc3MsIGlzU1ZHKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAvLyBzdHlsZVxyXG4gICAgICAgICAgICAgICAgLy8gdGhpcyBmbGFnIGlzIG1hdGNoZWQgd2hlbiB0aGUgZWxlbWVudCBoYXMgZHluYW1pYyBzdHlsZSBiaW5kaW5nc1xyXG4gICAgICAgICAgICAgICAgaWYgKHBhdGNoRmxhZyAmIDQgLyogU1RZTEUgKi8pIHtcclxuICAgICAgICAgICAgICAgICAgICBob3N0UGF0Y2hQcm9wKGVsLCAnc3R5bGUnLCBvbGRQcm9wcy5zdHlsZSwgbmV3UHJvcHMuc3R5bGUsIGlzU1ZHKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIC8vIHByb3BzXHJcbiAgICAgICAgICAgICAgICAvLyBUaGlzIGZsYWcgaXMgbWF0Y2hlZCB3aGVuIHRoZSBlbGVtZW50IGhhcyBkeW5hbWljIHByb3AvYXR0ciBiaW5kaW5nc1xyXG4gICAgICAgICAgICAgICAgLy8gb3RoZXIgdGhhbiBjbGFzcyBhbmQgc3R5bGUuIFRoZSBrZXlzIG9mIGR5bmFtaWMgcHJvcC9hdHRycyBhcmUgc2F2ZWQgZm9yXHJcbiAgICAgICAgICAgICAgICAvLyBmYXN0ZXIgaXRlcmF0aW9uLlxyXG4gICAgICAgICAgICAgICAgLy8gTm90ZSBkeW5hbWljIGtleXMgbGlrZSA6W2Zvb109XCJiYXJcIiB3aWxsIGNhdXNlIHRoaXMgb3B0aW1pemF0aW9uIHRvXHJcbiAgICAgICAgICAgICAgICAvLyBiYWlsIG91dCBhbmQgZ28gdGhyb3VnaCBhIGZ1bGwgZGlmZiBiZWNhdXNlIHdlIG5lZWQgdG8gdW5zZXQgdGhlIG9sZCBrZXlcclxuICAgICAgICAgICAgICAgIGlmIChwYXRjaEZsYWcgJiA4IC8qIFBST1BTICovKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gaWYgdGhlIGZsYWcgaXMgcHJlc2VudCB0aGVuIGR5bmFtaWNQcm9wcyBtdXN0IGJlIG5vbi1udWxsXHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcHJvcHNUb1VwZGF0ZSA9IG4yLmR5bmFtaWNQcm9wcztcclxuICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHByb3BzVG9VcGRhdGUubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qga2V5ID0gcHJvcHNUb1VwZGF0ZVtpXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcHJldiA9IG9sZFByb3BzW2tleV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG5leHQgPSBuZXdQcm9wc1trZXldO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyAjMTQ3MSBmb3JjZSBwYXRjaCB2YWx1ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobmV4dCAhPT0gcHJldiB8fCBrZXkgPT09ICd2YWx1ZScpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhvc3RQYXRjaFByb3AoZWwsIGtleSwgcHJldiwgbmV4dCwgaXNTVkcsIG4xLmNoaWxkcmVuLCBwYXJlbnRDb21wb25lbnQsIHBhcmVudFN1c3BlbnNlLCB1bm1vdW50Q2hpbGRyZW4pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vIHRleHRcclxuICAgICAgICAgICAgLy8gVGhpcyBmbGFnIGlzIG1hdGNoZWQgd2hlbiB0aGUgZWxlbWVudCBoYXMgb25seSBkeW5hbWljIHRleHQgY2hpbGRyZW4uXHJcbiAgICAgICAgICAgIGlmIChwYXRjaEZsYWcgJiAxIC8qIFRFWFQgKi8pIHtcclxuICAgICAgICAgICAgICAgIGlmIChuMS5jaGlsZHJlbiAhPT0gbjIuY2hpbGRyZW4pIHtcclxuICAgICAgICAgICAgICAgICAgICBob3N0U2V0RWxlbWVudFRleHQoZWwsIG4yLmNoaWxkcmVuKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmICghb3B0aW1pemVkICYmIGR5bmFtaWNDaGlsZHJlbiA9PSBudWxsKSB7XHJcbiAgICAgICAgICAgIC8vIHVub3B0aW1pemVkLCBmdWxsIGRpZmZcclxuICAgICAgICAgICAgcGF0Y2hQcm9wcyhlbCwgbjIsIG9sZFByb3BzLCBuZXdQcm9wcywgcGFyZW50Q29tcG9uZW50LCBwYXJlbnRTdXNwZW5zZSwgaXNTVkcpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoKHZub2RlSG9vayA9IG5ld1Byb3BzLm9uVm5vZGVVcGRhdGVkKSB8fCBkaXJzKSB7XHJcbiAgICAgICAgICAgIHF1ZXVlUG9zdFJlbmRlckVmZmVjdCgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB2bm9kZUhvb2sgJiYgaW52b2tlVk5vZGVIb29rKHZub2RlSG9vaywgcGFyZW50Q29tcG9uZW50LCBuMiwgbjEpO1xyXG4gICAgICAgICAgICAgICAgZGlycyAmJiBpbnZva2VEaXJlY3RpdmVIb29rKG4yLCBuMSwgcGFyZW50Q29tcG9uZW50LCAndXBkYXRlZCcpO1xyXG4gICAgICAgICAgICB9LCBwYXJlbnRTdXNwZW5zZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIC8vIFRoZSBmYXN0IHBhdGggZm9yIGJsb2Nrcy5cclxuICAgIGNvbnN0IHBhdGNoQmxvY2tDaGlsZHJlbiA9IChvbGRDaGlsZHJlbiwgbmV3Q2hpbGRyZW4sIGZhbGxiYWNrQ29udGFpbmVyLCBwYXJlbnRDb21wb25lbnQsIHBhcmVudFN1c3BlbnNlLCBpc1NWRywgc2xvdFNjb3BlSWRzKSA9PiB7XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBuZXdDaGlsZHJlbi5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBjb25zdCBvbGRWTm9kZSA9IG9sZENoaWxkcmVuW2ldO1xyXG4gICAgICAgICAgICBjb25zdCBuZXdWTm9kZSA9IG5ld0NoaWxkcmVuW2ldO1xyXG4gICAgICAgICAgICAvLyBEZXRlcm1pbmUgdGhlIGNvbnRhaW5lciAocGFyZW50IGVsZW1lbnQpIGZvciB0aGUgcGF0Y2guXHJcbiAgICAgICAgICAgIGNvbnN0IGNvbnRhaW5lciA9IFxyXG4gICAgICAgICAgICAvLyBvbGRWTm9kZSBtYXkgYmUgYW4gZXJyb3JlZCBhc3luYyBzZXR1cCgpIGNvbXBvbmVudCBpbnNpZGUgU3VzcGVuc2VcclxuICAgICAgICAgICAgLy8gd2hpY2ggd2lsbCBub3QgaGF2ZSBhIG1vdW50ZWQgZWxlbWVudFxyXG4gICAgICAgICAgICBvbGRWTm9kZS5lbCAmJlxyXG4gICAgICAgICAgICAgICAgLy8gLSBJbiB0aGUgY2FzZSBvZiBhIEZyYWdtZW50LCB3ZSBuZWVkIHRvIHByb3ZpZGUgdGhlIGFjdHVhbCBwYXJlbnRcclxuICAgICAgICAgICAgICAgIC8vIG9mIHRoZSBGcmFnbWVudCBpdHNlbGYgc28gaXQgY2FuIG1vdmUgaXRzIGNoaWxkcmVuLlxyXG4gICAgICAgICAgICAgICAgKG9sZFZOb2RlLnR5cGUgPT09IEZyYWdtZW50IHx8XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gLSBJbiB0aGUgY2FzZSBvZiBkaWZmZXJlbnQgbm9kZXMsIHRoZXJlIGlzIGdvaW5nIHRvIGJlIGEgcmVwbGFjZW1lbnRcclxuICAgICAgICAgICAgICAgICAgICAvLyB3aGljaCBhbHNvIHJlcXVpcmVzIHRoZSBjb3JyZWN0IHBhcmVudCBjb250YWluZXJcclxuICAgICAgICAgICAgICAgICAgICAhaXNTYW1lVk5vZGVUeXBlKG9sZFZOb2RlLCBuZXdWTm9kZSkgfHxcclxuICAgICAgICAgICAgICAgICAgICAvLyAtIEluIHRoZSBjYXNlIG9mIGEgY29tcG9uZW50LCBpdCBjb3VsZCBjb250YWluIGFueXRoaW5nLlxyXG4gICAgICAgICAgICAgICAgICAgIG9sZFZOb2RlLnNoYXBlRmxhZyAmICg2IC8qIENPTVBPTkVOVCAqLyB8IDY0IC8qIFRFTEVQT1JUICovKSlcclxuICAgICAgICAgICAgICAgID8gaG9zdFBhcmVudE5vZGUob2xkVk5vZGUuZWwpXHJcbiAgICAgICAgICAgICAgICA6IC8vIEluIG90aGVyIGNhc2VzLCB0aGUgcGFyZW50IGNvbnRhaW5lciBpcyBub3QgYWN0dWFsbHkgdXNlZCBzbyB3ZVxyXG4gICAgICAgICAgICAgICAgICAgIC8vIGp1c3QgcGFzcyB0aGUgYmxvY2sgZWxlbWVudCBoZXJlIHRvIGF2b2lkIGEgRE9NIHBhcmVudE5vZGUgY2FsbC5cclxuICAgICAgICAgICAgICAgICAgICBmYWxsYmFja0NvbnRhaW5lcjtcclxuICAgICAgICAgICAgcGF0Y2gob2xkVk5vZGUsIG5ld1ZOb2RlLCBjb250YWluZXIsIG51bGwsIHBhcmVudENvbXBvbmVudCwgcGFyZW50U3VzcGVuc2UsIGlzU1ZHLCBzbG90U2NvcGVJZHMsIHRydWUpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBjb25zdCBwYXRjaFByb3BzID0gKGVsLCB2bm9kZSwgb2xkUHJvcHMsIG5ld1Byb3BzLCBwYXJlbnRDb21wb25lbnQsIHBhcmVudFN1c3BlbnNlLCBpc1NWRykgPT4ge1xyXG4gICAgICAgIGlmIChvbGRQcm9wcyAhPT0gbmV3UHJvcHMpIHtcclxuICAgICAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gbmV3UHJvcHMpIHtcclxuICAgICAgICAgICAgICAgIC8vIGVtcHR5IHN0cmluZyBpcyBub3QgdmFsaWQgcHJvcFxyXG4gICAgICAgICAgICAgICAgaWYgKGlzUmVzZXJ2ZWRQcm9wKGtleSkpXHJcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBuZXh0ID0gbmV3UHJvcHNba2V5XTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHByZXYgPSBvbGRQcm9wc1trZXldO1xyXG4gICAgICAgICAgICAgICAgLy8gZGVmZXIgcGF0Y2hpbmcgdmFsdWVcclxuICAgICAgICAgICAgICAgIGlmIChuZXh0ICE9PSBwcmV2ICYmIGtleSAhPT0gJ3ZhbHVlJykge1xyXG4gICAgICAgICAgICAgICAgICAgIGhvc3RQYXRjaFByb3AoZWwsIGtleSwgcHJldiwgbmV4dCwgaXNTVkcsIHZub2RlLmNoaWxkcmVuLCBwYXJlbnRDb21wb25lbnQsIHBhcmVudFN1c3BlbnNlLCB1bm1vdW50Q2hpbGRyZW4pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChvbGRQcm9wcyAhPT0gRU1QVFlfT0JKKSB7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGtleSBpbiBvbGRQcm9wcykge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICghaXNSZXNlcnZlZFByb3Aoa2V5KSAmJiAhKGtleSBpbiBuZXdQcm9wcykpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaG9zdFBhdGNoUHJvcChlbCwga2V5LCBvbGRQcm9wc1trZXldLCBudWxsLCBpc1NWRywgdm5vZGUuY2hpbGRyZW4sIHBhcmVudENvbXBvbmVudCwgcGFyZW50U3VzcGVuc2UsIHVubW91bnRDaGlsZHJlbik7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICgndmFsdWUnIGluIG5ld1Byb3BzKSB7XHJcbiAgICAgICAgICAgICAgICBob3N0UGF0Y2hQcm9wKGVsLCAndmFsdWUnLCBvbGRQcm9wcy52YWx1ZSwgbmV3UHJvcHMudmFsdWUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIGNvbnN0IHByb2Nlc3NGcmFnbWVudCA9IChuMSwgbjIsIGNvbnRhaW5lciwgYW5jaG9yLCBwYXJlbnRDb21wb25lbnQsIHBhcmVudFN1c3BlbnNlLCBpc1NWRywgc2xvdFNjb3BlSWRzLCBvcHRpbWl6ZWQpID0+IHtcclxuICAgICAgICBjb25zdCBmcmFnbWVudFN0YXJ0QW5jaG9yID0gKG4yLmVsID0gbjEgPyBuMS5lbCA6IGhvc3RDcmVhdGVUZXh0KCcnKSk7XHJcbiAgICAgICAgY29uc3QgZnJhZ21lbnRFbmRBbmNob3IgPSAobjIuYW5jaG9yID0gbjEgPyBuMS5hbmNob3IgOiBob3N0Q3JlYXRlVGV4dCgnJykpO1xyXG4gICAgICAgIGxldCB7IHBhdGNoRmxhZywgZHluYW1pY0NoaWxkcmVuLCBzbG90U2NvcGVJZHM6IGZyYWdtZW50U2xvdFNjb3BlSWRzIH0gPSBuMjtcclxuICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmIGlzSG1yVXBkYXRpbmcpIHtcclxuICAgICAgICAgICAgLy8gSE1SIHVwZGF0ZWQsIGZvcmNlIGZ1bGwgZGlmZlxyXG4gICAgICAgICAgICBwYXRjaEZsYWcgPSAwO1xyXG4gICAgICAgICAgICBvcHRpbWl6ZWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgZHluYW1pY0NoaWxkcmVuID0gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gY2hlY2sgaWYgdGhpcyBpcyBhIHNsb3QgZnJhZ21lbnQgd2l0aCA6c2xvdHRlZCBzY29wZSBpZHNcclxuICAgICAgICBpZiAoZnJhZ21lbnRTbG90U2NvcGVJZHMpIHtcclxuICAgICAgICAgICAgc2xvdFNjb3BlSWRzID0gc2xvdFNjb3BlSWRzXHJcbiAgICAgICAgICAgICAgICA/IHNsb3RTY29wZUlkcy5jb25jYXQoZnJhZ21lbnRTbG90U2NvcGVJZHMpXHJcbiAgICAgICAgICAgICAgICA6IGZyYWdtZW50U2xvdFNjb3BlSWRzO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAobjEgPT0gbnVsbCkge1xyXG4gICAgICAgICAgICBob3N0SW5zZXJ0KGZyYWdtZW50U3RhcnRBbmNob3IsIGNvbnRhaW5lciwgYW5jaG9yKTtcclxuICAgICAgICAgICAgaG9zdEluc2VydChmcmFnbWVudEVuZEFuY2hvciwgY29udGFpbmVyLCBhbmNob3IpO1xyXG4gICAgICAgICAgICAvLyBhIGZyYWdtZW50IGNhbiBvbmx5IGhhdmUgYXJyYXkgY2hpbGRyZW5cclxuICAgICAgICAgICAgLy8gc2luY2UgdGhleSBhcmUgZWl0aGVyIGdlbmVyYXRlZCBieSB0aGUgY29tcGlsZXIsIG9yIGltcGxpY2l0bHkgY3JlYXRlZFxyXG4gICAgICAgICAgICAvLyBmcm9tIGFycmF5cy5cclxuICAgICAgICAgICAgbW91bnRDaGlsZHJlbihuMi5jaGlsZHJlbiwgY29udGFpbmVyLCBmcmFnbWVudEVuZEFuY2hvciwgcGFyZW50Q29tcG9uZW50LCBwYXJlbnRTdXNwZW5zZSwgaXNTVkcsIHNsb3RTY29wZUlkcywgb3B0aW1pemVkKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGlmIChwYXRjaEZsYWcgPiAwICYmXHJcbiAgICAgICAgICAgICAgICBwYXRjaEZsYWcgJiA2NCAvKiBTVEFCTEVfRlJBR01FTlQgKi8gJiZcclxuICAgICAgICAgICAgICAgIGR5bmFtaWNDaGlsZHJlbiAmJlxyXG4gICAgICAgICAgICAgICAgLy8gIzI3MTUgdGhlIHByZXZpb3VzIGZyYWdtZW50IGNvdWxkJ3ZlIGJlZW4gYSBCQUlMZWQgb25lIGFzIGEgcmVzdWx0XHJcbiAgICAgICAgICAgICAgICAvLyBvZiByZW5kZXJTbG90KCkgd2l0aCBubyB2YWxpZCBjaGlsZHJlblxyXG4gICAgICAgICAgICAgICAgbjEuZHluYW1pY0NoaWxkcmVuKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBhIHN0YWJsZSBmcmFnbWVudCAodGVtcGxhdGUgcm9vdCBvciA8dGVtcGxhdGUgdi1mb3I+KSBkb2Vzbid0IG5lZWQgdG9cclxuICAgICAgICAgICAgICAgIC8vIHBhdGNoIGNoaWxkcmVuIG9yZGVyLCBidXQgaXQgbWF5IGNvbnRhaW4gZHluYW1pY0NoaWxkcmVuLlxyXG4gICAgICAgICAgICAgICAgcGF0Y2hCbG9ja0NoaWxkcmVuKG4xLmR5bmFtaWNDaGlsZHJlbiwgZHluYW1pY0NoaWxkcmVuLCBjb250YWluZXIsIHBhcmVudENvbXBvbmVudCwgcGFyZW50U3VzcGVuc2UsIGlzU1ZHLCBzbG90U2NvcGVJZHMpO1xyXG4gICAgICAgICAgICAgICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSAmJiBwYXJlbnRDb21wb25lbnQgJiYgcGFyZW50Q29tcG9uZW50LnR5cGUuX19obXJJZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRyYXZlcnNlU3RhdGljQ2hpbGRyZW4objEsIG4yKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKFxyXG4gICAgICAgICAgICAgICAgLy8gIzIwODAgaWYgdGhlIHN0YWJsZSBmcmFnbWVudCBoYXMgYSBrZXksIGl0J3MgYSA8dGVtcGxhdGUgdi1mb3I+IHRoYXQgbWF5XHJcbiAgICAgICAgICAgICAgICAvLyAgZ2V0IG1vdmVkIGFyb3VuZC4gTWFrZSBzdXJlIGFsbCByb290IGxldmVsIHZub2RlcyBpbmhlcml0IGVsLlxyXG4gICAgICAgICAgICAgICAgLy8gIzIxMzQgb3IgaWYgaXQncyBhIGNvbXBvbmVudCByb290LCBpdCBtYXkgYWxzbyBnZXQgbW92ZWQgYXJvdW5kXHJcbiAgICAgICAgICAgICAgICAvLyBhcyB0aGUgY29tcG9uZW50IGlzIGJlaW5nIG1vdmVkLlxyXG4gICAgICAgICAgICAgICAgbjIua2V5ICE9IG51bGwgfHxcclxuICAgICAgICAgICAgICAgICAgICAocGFyZW50Q29tcG9uZW50ICYmIG4yID09PSBwYXJlbnRDb21wb25lbnQuc3ViVHJlZSkpIHtcclxuICAgICAgICAgICAgICAgICAgICB0cmF2ZXJzZVN0YXRpY0NoaWxkcmVuKG4xLCBuMiwgdHJ1ZSAvKiBzaGFsbG93ICovKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIC8vIGtleWVkIC8gdW5rZXllZCwgb3IgbWFudWFsIGZyYWdtZW50cy5cclxuICAgICAgICAgICAgICAgIC8vIGZvciBrZXllZCAmIHVua2V5ZWQsIHNpbmNlIHRoZXkgYXJlIGNvbXBpbGVyIGdlbmVyYXRlZCBmcm9tIHYtZm9yLFxyXG4gICAgICAgICAgICAgICAgLy8gZWFjaCBjaGlsZCBpcyBndWFyYW50ZWVkIHRvIGJlIGEgYmxvY2sgc28gdGhlIGZyYWdtZW50IHdpbGwgbmV2ZXJcclxuICAgICAgICAgICAgICAgIC8vIGhhdmUgZHluYW1pY0NoaWxkcmVuLlxyXG4gICAgICAgICAgICAgICAgcGF0Y2hDaGlsZHJlbihuMSwgbjIsIGNvbnRhaW5lciwgZnJhZ21lbnRFbmRBbmNob3IsIHBhcmVudENvbXBvbmVudCwgcGFyZW50U3VzcGVuc2UsIGlzU1ZHLCBzbG90U2NvcGVJZHMsIG9wdGltaXplZCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgY29uc3QgcHJvY2Vzc0NvbXBvbmVudCA9IChuMSwgbjIsIGNvbnRhaW5lciwgYW5jaG9yLCBwYXJlbnRDb21wb25lbnQsIHBhcmVudFN1c3BlbnNlLCBpc1NWRywgc2xvdFNjb3BlSWRzLCBvcHRpbWl6ZWQpID0+IHtcclxuICAgICAgICBuMi5zbG90U2NvcGVJZHMgPSBzbG90U2NvcGVJZHM7XHJcbiAgICAgICAgaWYgKG4xID09IG51bGwpIHtcclxuICAgICAgICAgICAgaWYgKG4yLnNoYXBlRmxhZyAmIDUxMiAvKiBDT01QT05FTlRfS0VQVF9BTElWRSAqLykge1xyXG4gICAgICAgICAgICAgICAgcGFyZW50Q29tcG9uZW50LmN0eC5hY3RpdmF0ZShuMiwgY29udGFpbmVyLCBhbmNob3IsIGlzU1ZHLCBvcHRpbWl6ZWQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgbW91bnRDb21wb25lbnQobjIsIGNvbnRhaW5lciwgYW5jaG9yLCBwYXJlbnRDb21wb25lbnQsIHBhcmVudFN1c3BlbnNlLCBpc1NWRywgb3B0aW1pemVkKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgdXBkYXRlQ29tcG9uZW50KG4xLCBuMiwgb3B0aW1pemVkKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgY29uc3QgbW91bnRDb21wb25lbnQgPSAoaW5pdGlhbFZOb2RlLCBjb250YWluZXIsIGFuY2hvciwgcGFyZW50Q29tcG9uZW50LCBwYXJlbnRTdXNwZW5zZSwgaXNTVkcsIG9wdGltaXplZCkgPT4ge1xyXG4gICAgICAgIGNvbnN0IGluc3RhbmNlID0gKGluaXRpYWxWTm9kZS5jb21wb25lbnQgPSBjcmVhdGVDb21wb25lbnRJbnN0YW5jZShpbml0aWFsVk5vZGUsIHBhcmVudENvbXBvbmVudCwgcGFyZW50U3VzcGVuc2UpKTtcclxuICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmIGluc3RhbmNlLnR5cGUuX19obXJJZCkge1xyXG4gICAgICAgICAgICByZWdpc3RlckhNUihpbnN0YW5jZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykpIHtcclxuICAgICAgICAgICAgcHVzaFdhcm5pbmdDb250ZXh0KGluaXRpYWxWTm9kZSk7XHJcbiAgICAgICAgICAgIHN0YXJ0TWVhc3VyZShpbnN0YW5jZSwgYG1vdW50YCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIGluamVjdCByZW5kZXJlciBpbnRlcm5hbHMgZm9yIGtlZXBBbGl2ZVxyXG4gICAgICAgIGlmIChpc0tlZXBBbGl2ZShpbml0aWFsVk5vZGUpKSB7XHJcbiAgICAgICAgICAgIGluc3RhbmNlLmN0eC5yZW5kZXJlciA9IGludGVybmFscztcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gcmVzb2x2ZSBwcm9wcyBhbmQgc2xvdHMgZm9yIHNldHVwIGNvbnRleHRcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykpIHtcclxuICAgICAgICAgICAgICAgIHN0YXJ0TWVhc3VyZShpbnN0YW5jZSwgYGluaXRgKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBzZXR1cENvbXBvbmVudChpbnN0YW5jZSk7XHJcbiAgICAgICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykpIHtcclxuICAgICAgICAgICAgICAgIGVuZE1lYXN1cmUoaW5zdGFuY2UsIGBpbml0YCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gc2V0dXAoKSBpcyBhc3luYy4gVGhpcyBjb21wb25lbnQgcmVsaWVzIG9uIGFzeW5jIGxvZ2ljIHRvIGJlIHJlc29sdmVkXHJcbiAgICAgICAgLy8gYmVmb3JlIHByb2NlZWRpbmdcclxuICAgICAgICBpZiAoaW5zdGFuY2UuYXN5bmNEZXApIHtcclxuICAgICAgICAgICAgcGFyZW50U3VzcGVuc2UgJiYgcGFyZW50U3VzcGVuc2UucmVnaXN0ZXJEZXAoaW5zdGFuY2UsIHNldHVwUmVuZGVyRWZmZWN0KTtcclxuICAgICAgICAgICAgLy8gR2l2ZSBpdCBhIHBsYWNlaG9sZGVyIGlmIHRoaXMgaXMgbm90IGh5ZHJhdGlvblxyXG4gICAgICAgICAgICAvLyBUT0RPIGhhbmRsZSBzZWxmLWRlZmluZWQgZmFsbGJhY2tcclxuICAgICAgICAgICAgaWYgKCFpbml0aWFsVk5vZGUuZWwpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHBsYWNlaG9sZGVyID0gKGluc3RhbmNlLnN1YlRyZWUgPSBjcmVhdGVWTm9kZShDb21tZW50KSk7XHJcbiAgICAgICAgICAgICAgICBwcm9jZXNzQ29tbWVudE5vZGUobnVsbCwgcGxhY2Vob2xkZXIsIGNvbnRhaW5lciwgYW5jaG9yKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHNldHVwUmVuZGVyRWZmZWN0KGluc3RhbmNlLCBpbml0aWFsVk5vZGUsIGNvbnRhaW5lciwgYW5jaG9yLCBwYXJlbnRTdXNwZW5zZSwgaXNTVkcsIG9wdGltaXplZCk7XHJcbiAgICAgICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSkge1xyXG4gICAgICAgICAgICBwb3BXYXJuaW5nQ29udGV4dCgpO1xyXG4gICAgICAgICAgICBlbmRNZWFzdXJlKGluc3RhbmNlLCBgbW91bnRgKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgY29uc3QgdXBkYXRlQ29tcG9uZW50ID0gKG4xLCBuMiwgb3B0aW1pemVkKSA9PiB7XHJcbiAgICAgICAgY29uc3QgaW5zdGFuY2UgPSAobjIuY29tcG9uZW50ID0gbjEuY29tcG9uZW50KTtcclxuICAgICAgICBpZiAoc2hvdWxkVXBkYXRlQ29tcG9uZW50KG4xLCBuMiwgb3B0aW1pemVkKSkge1xyXG4gICAgICAgICAgICBpZiAoaW5zdGFuY2UuYXN5bmNEZXAgJiZcclxuICAgICAgICAgICAgICAgICFpbnN0YW5jZS5hc3luY1Jlc29sdmVkKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBhc3luYyAmIHN0aWxsIHBlbmRpbmcgLSBqdXN0IHVwZGF0ZSBwcm9wcyBhbmQgc2xvdHNcclxuICAgICAgICAgICAgICAgIC8vIHNpbmNlIHRoZSBjb21wb25lbnQncyByZWFjdGl2ZSBlZmZlY3QgZm9yIHJlbmRlciBpc24ndCBzZXQtdXAgeWV0XHJcbiAgICAgICAgICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcHVzaFdhcm5pbmdDb250ZXh0KG4yKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHVwZGF0ZUNvbXBvbmVudFByZVJlbmRlcihpbnN0YW5jZSwgbjIsIG9wdGltaXplZCk7XHJcbiAgICAgICAgICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcG9wV2FybmluZ0NvbnRleHQoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIC8vIG5vcm1hbCB1cGRhdGVcclxuICAgICAgICAgICAgICAgIGluc3RhbmNlLm5leHQgPSBuMjtcclxuICAgICAgICAgICAgICAgIC8vIGluIGNhc2UgdGhlIGNoaWxkIGNvbXBvbmVudCBpcyBhbHNvIHF1ZXVlZCwgcmVtb3ZlIGl0IHRvIGF2b2lkXHJcbiAgICAgICAgICAgICAgICAvLyBkb3VibGUgdXBkYXRpbmcgdGhlIHNhbWUgY2hpbGQgY29tcG9uZW50IGluIHRoZSBzYW1lIGZsdXNoLlxyXG4gICAgICAgICAgICAgICAgaW52YWxpZGF0ZUpvYihpbnN0YW5jZS51cGRhdGUpO1xyXG4gICAgICAgICAgICAgICAgLy8gaW5zdGFuY2UudXBkYXRlIGlzIHRoZSByZWFjdGl2ZSBlZmZlY3QuXHJcbiAgICAgICAgICAgICAgICBpbnN0YW5jZS51cGRhdGUoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgLy8gbm8gdXBkYXRlIG5lZWRlZC4ganVzdCBjb3B5IG92ZXIgcHJvcGVydGllc1xyXG4gICAgICAgICAgICBuMi5jb21wb25lbnQgPSBuMS5jb21wb25lbnQ7XHJcbiAgICAgICAgICAgIG4yLmVsID0gbjEuZWw7XHJcbiAgICAgICAgICAgIGluc3RhbmNlLnZub2RlID0gbjI7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIGNvbnN0IHNldHVwUmVuZGVyRWZmZWN0ID0gKGluc3RhbmNlLCBpbml0aWFsVk5vZGUsIGNvbnRhaW5lciwgYW5jaG9yLCBwYXJlbnRTdXNwZW5zZSwgaXNTVkcsIG9wdGltaXplZCkgPT4ge1xyXG4gICAgICAgIGNvbnN0IGNvbXBvbmVudFVwZGF0ZUZuID0gKCkgPT4ge1xyXG4gICAgICAgICAgICBpZiAoIWluc3RhbmNlLmlzTW91bnRlZCkge1xyXG4gICAgICAgICAgICAgICAgbGV0IHZub2RlSG9vaztcclxuICAgICAgICAgICAgICAgIGNvbnN0IHsgZWwsIHByb3BzIH0gPSBpbml0aWFsVk5vZGU7XHJcbiAgICAgICAgICAgICAgICBjb25zdCB7IGJtLCBtLCBwYXJlbnQgfSA9IGluc3RhbmNlO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgaXNBc3luY1dyYXBwZXJWTm9kZSA9IGlzQXN5bmNXcmFwcGVyKGluaXRpYWxWTm9kZSk7XHJcbiAgICAgICAgICAgICAgICB0b2dnbGVSZWN1cnNlKGluc3RhbmNlLCBmYWxzZSk7XHJcbiAgICAgICAgICAgICAgICAvLyBiZWZvcmVNb3VudCBob29rXHJcbiAgICAgICAgICAgICAgICBpZiAoYm0pIHtcclxuICAgICAgICAgICAgICAgICAgICBpbnZva2VBcnJheUZucyhibSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAvLyBvblZub2RlQmVmb3JlTW91bnRcclxuICAgICAgICAgICAgICAgIGlmICghaXNBc3luY1dyYXBwZXJWTm9kZSAmJlxyXG4gICAgICAgICAgICAgICAgICAgICh2bm9kZUhvb2sgPSBwcm9wcyAmJiBwcm9wcy5vblZub2RlQmVmb3JlTW91bnQpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaW52b2tlVk5vZGVIb29rKHZub2RlSG9vaywgcGFyZW50LCBpbml0aWFsVk5vZGUpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgdG9nZ2xlUmVjdXJzZShpbnN0YW5jZSwgdHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICBpZiAoZWwgJiYgaHlkcmF0ZU5vZGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyB2bm9kZSBoYXMgYWRvcHRlZCBob3N0IG5vZGUgLSBwZXJmb3JtIGh5ZHJhdGlvbiBpbnN0ZWFkIG9mIG1vdW50LlxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGh5ZHJhdGVTdWJUcmVlID0gKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGFydE1lYXN1cmUoaW5zdGFuY2UsIGByZW5kZXJgKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpbnN0YW5jZS5zdWJUcmVlID0gcmVuZGVyQ29tcG9uZW50Um9vdChpbnN0YW5jZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZE1lYXN1cmUoaW5zdGFuY2UsIGByZW5kZXJgKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGFydE1lYXN1cmUoaW5zdGFuY2UsIGBoeWRyYXRlYCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgaHlkcmF0ZU5vZGUoZWwsIGluc3RhbmNlLnN1YlRyZWUsIGluc3RhbmNlLCBwYXJlbnRTdXNwZW5zZSwgbnVsbCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZE1lYXN1cmUoaW5zdGFuY2UsIGBoeWRyYXRlYCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChpc0FzeW5jV3JhcHBlclZOb2RlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGluaXRpYWxWTm9kZS50eXBlLl9fYXN5bmNMb2FkZXIoKS50aGVuKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBub3RlOiB3ZSBhcmUgbW92aW5nIHRoZSByZW5kZXIgY2FsbCBpbnRvIGFuIGFzeW5jIGNhbGxiYWNrLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyB3aGljaCBtZWFucyBpdCB3b24ndCB0cmFjayBkZXBlbmRlbmNpZXMgLSBidXQgaXQncyBvayBiZWNhdXNlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGEgc2VydmVyLXJlbmRlcmVkIGFzeW5jIHdyYXBwZXIgaXMgYWxyZWFkeSBpbiByZXNvbHZlZCBzdGF0ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBhbmQgaXQgd2lsbCBuZXZlciBuZWVkIHRvIGNoYW5nZS5cclxuICAgICAgICAgICAgICAgICAgICAgICAgKCkgPT4gIWluc3RhbmNlLmlzVW5tb3VudGVkICYmIGh5ZHJhdGVTdWJUcmVlKCkpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaHlkcmF0ZVN1YlRyZWUoKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXJ0TWVhc3VyZShpbnN0YW5jZSwgYHJlbmRlcmApO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBzdWJUcmVlID0gKGluc3RhbmNlLnN1YlRyZWUgPSByZW5kZXJDb21wb25lbnRSb290KGluc3RhbmNlKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbmRNZWFzdXJlKGluc3RhbmNlLCBgcmVuZGVyYCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3RhcnRNZWFzdXJlKGluc3RhbmNlLCBgcGF0Y2hgKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgcGF0Y2gobnVsbCwgc3ViVHJlZSwgY29udGFpbmVyLCBhbmNob3IsIGluc3RhbmNlLCBwYXJlbnRTdXNwZW5zZSwgaXNTVkcpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZW5kTWVhc3VyZShpbnN0YW5jZSwgYHBhdGNoYCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGluaXRpYWxWTm9kZS5lbCA9IHN1YlRyZWUuZWw7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAvLyBtb3VudGVkIGhvb2tcclxuICAgICAgICAgICAgICAgIGlmIChtKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcXVldWVQb3N0UmVuZGVyRWZmZWN0KG0sIHBhcmVudFN1c3BlbnNlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIC8vIG9uVm5vZGVNb3VudGVkXHJcbiAgICAgICAgICAgICAgICBpZiAoIWlzQXN5bmNXcmFwcGVyVk5vZGUgJiZcclxuICAgICAgICAgICAgICAgICAgICAodm5vZGVIb29rID0gcHJvcHMgJiYgcHJvcHMub25Wbm9kZU1vdW50ZWQpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgc2NvcGVkSW5pdGlhbFZOb2RlID0gaW5pdGlhbFZOb2RlO1xyXG4gICAgICAgICAgICAgICAgICAgIHF1ZXVlUG9zdFJlbmRlckVmZmVjdCgoKSA9PiBpbnZva2VWTm9kZUhvb2sodm5vZGVIb29rLCBwYXJlbnQsIHNjb3BlZEluaXRpYWxWTm9kZSksIHBhcmVudFN1c3BlbnNlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIC8vIGFjdGl2YXRlZCBob29rIGZvciBrZWVwLWFsaXZlIHJvb3RzLlxyXG4gICAgICAgICAgICAgICAgLy8gIzE3NDIgYWN0aXZhdGVkIGhvb2sgbXVzdCBiZSBhY2Nlc3NlZCBhZnRlciBmaXJzdCByZW5kZXJcclxuICAgICAgICAgICAgICAgIC8vIHNpbmNlIHRoZSBob29rIG1heSBiZSBpbmplY3RlZCBieSBhIGNoaWxkIGtlZXAtYWxpdmVcclxuICAgICAgICAgICAgICAgIGlmIChpbml0aWFsVk5vZGUuc2hhcGVGbGFnICYgMjU2IC8qIENPTVBPTkVOVF9TSE9VTERfS0VFUF9BTElWRSAqLykge1xyXG4gICAgICAgICAgICAgICAgICAgIGluc3RhbmNlLmEgJiYgcXVldWVQb3N0UmVuZGVyRWZmZWN0KGluc3RhbmNlLmEsIHBhcmVudFN1c3BlbnNlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGluc3RhbmNlLmlzTW91bnRlZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHx8IF9fVlVFX1BST0RfREVWVE9PTFNfXykge1xyXG4gICAgICAgICAgICAgICAgICAgIGRldnRvb2xzQ29tcG9uZW50QWRkZWQoaW5zdGFuY2UpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgLy8gIzI0NTg6IGRlZmVyZW5jZSBtb3VudC1vbmx5IG9iamVjdCBwYXJhbWV0ZXJzIHRvIHByZXZlbnQgbWVtbGVha3NcclxuICAgICAgICAgICAgICAgIGluaXRpYWxWTm9kZSA9IGNvbnRhaW5lciA9IGFuY2hvciA9IG51bGw7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAvLyB1cGRhdGVDb21wb25lbnRcclxuICAgICAgICAgICAgICAgIC8vIFRoaXMgaXMgdHJpZ2dlcmVkIGJ5IG11dGF0aW9uIG9mIGNvbXBvbmVudCdzIG93biBzdGF0ZSAobmV4dDogbnVsbClcclxuICAgICAgICAgICAgICAgIC8vIE9SIHBhcmVudCBjYWxsaW5nIHByb2Nlc3NDb21wb25lbnQgKG5leHQ6IFZOb2RlKVxyXG4gICAgICAgICAgICAgICAgbGV0IHsgbmV4dCwgYnUsIHUsIHBhcmVudCwgdm5vZGUgfSA9IGluc3RhbmNlO1xyXG4gICAgICAgICAgICAgICAgbGV0IG9yaWdpbk5leHQgPSBuZXh0O1xyXG4gICAgICAgICAgICAgICAgbGV0IHZub2RlSG9vaztcclxuICAgICAgICAgICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykpIHtcclxuICAgICAgICAgICAgICAgICAgICBwdXNoV2FybmluZ0NvbnRleHQobmV4dCB8fCBpbnN0YW5jZS52bm9kZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAvLyBEaXNhbGxvdyBjb21wb25lbnQgZWZmZWN0IHJlY3Vyc2lvbiBkdXJpbmcgcHJlLWxpZmVjeWNsZSBob29rcy5cclxuICAgICAgICAgICAgICAgIHRvZ2dsZVJlY3Vyc2UoaW5zdGFuY2UsIGZhbHNlKTtcclxuICAgICAgICAgICAgICAgIGlmIChuZXh0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbmV4dC5lbCA9IHZub2RlLmVsO1xyXG4gICAgICAgICAgICAgICAgICAgIHVwZGF0ZUNvbXBvbmVudFByZVJlbmRlcihpbnN0YW5jZSwgbmV4dCwgb3B0aW1pemVkKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIG5leHQgPSB2bm9kZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIC8vIGJlZm9yZVVwZGF0ZSBob29rXHJcbiAgICAgICAgICAgICAgICBpZiAoYnUpIHtcclxuICAgICAgICAgICAgICAgICAgICBpbnZva2VBcnJheUZucyhidSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAvLyBvblZub2RlQmVmb3JlVXBkYXRlXHJcbiAgICAgICAgICAgICAgICBpZiAoKHZub2RlSG9vayA9IG5leHQucHJvcHMgJiYgbmV4dC5wcm9wcy5vblZub2RlQmVmb3JlVXBkYXRlKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGludm9rZVZOb2RlSG9vayh2bm9kZUhvb2ssIHBhcmVudCwgbmV4dCwgdm5vZGUpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgdG9nZ2xlUmVjdXJzZShpbnN0YW5jZSwgdHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICAvLyByZW5kZXJcclxuICAgICAgICAgICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykpIHtcclxuICAgICAgICAgICAgICAgICAgICBzdGFydE1lYXN1cmUoaW5zdGFuY2UsIGByZW5kZXJgKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGNvbnN0IG5leHRUcmVlID0gcmVuZGVyQ29tcG9uZW50Um9vdChpbnN0YW5jZSk7XHJcbiAgICAgICAgICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZW5kTWVhc3VyZShpbnN0YW5jZSwgYHJlbmRlcmApO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgY29uc3QgcHJldlRyZWUgPSBpbnN0YW5jZS5zdWJUcmVlO1xyXG4gICAgICAgICAgICAgICAgaW5zdGFuY2Uuc3ViVHJlZSA9IG5leHRUcmVlO1xyXG4gICAgICAgICAgICAgICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHN0YXJ0TWVhc3VyZShpbnN0YW5jZSwgYHBhdGNoYCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBwYXRjaChwcmV2VHJlZSwgbmV4dFRyZWUsIFxyXG4gICAgICAgICAgICAgICAgLy8gcGFyZW50IG1heSBoYXZlIGNoYW5nZWQgaWYgaXQncyBpbiBhIHRlbGVwb3J0XHJcbiAgICAgICAgICAgICAgICBob3N0UGFyZW50Tm9kZShwcmV2VHJlZS5lbCksIFxyXG4gICAgICAgICAgICAgICAgLy8gYW5jaG9yIG1heSBoYXZlIGNoYW5nZWQgaWYgaXQncyBpbiBhIGZyYWdtZW50XHJcbiAgICAgICAgICAgICAgICBnZXROZXh0SG9zdE5vZGUocHJldlRyZWUpLCBpbnN0YW5jZSwgcGFyZW50U3VzcGVuc2UsIGlzU1ZHKTtcclxuICAgICAgICAgICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykpIHtcclxuICAgICAgICAgICAgICAgICAgICBlbmRNZWFzdXJlKGluc3RhbmNlLCBgcGF0Y2hgKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIG5leHQuZWwgPSBuZXh0VHJlZS5lbDtcclxuICAgICAgICAgICAgICAgIGlmIChvcmlnaW5OZXh0ID09PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gc2VsZi10cmlnZ2VyZWQgdXBkYXRlLiBJbiBjYXNlIG9mIEhPQywgdXBkYXRlIHBhcmVudCBjb21wb25lbnRcclxuICAgICAgICAgICAgICAgICAgICAvLyB2bm9kZSBlbC4gSE9DIGlzIGluZGljYXRlZCBieSBwYXJlbnQgaW5zdGFuY2UncyBzdWJUcmVlIHBvaW50aW5nXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gdG8gY2hpbGQgY29tcG9uZW50J3Mgdm5vZGVcclxuICAgICAgICAgICAgICAgICAgICB1cGRhdGVIT0NIb3N0RWwoaW5zdGFuY2UsIG5leHRUcmVlLmVsKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIC8vIHVwZGF0ZWQgaG9va1xyXG4gICAgICAgICAgICAgICAgaWYgKHUpIHtcclxuICAgICAgICAgICAgICAgICAgICBxdWV1ZVBvc3RSZW5kZXJFZmZlY3QodSwgcGFyZW50U3VzcGVuc2UpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgLy8gb25Wbm9kZVVwZGF0ZWRcclxuICAgICAgICAgICAgICAgIGlmICgodm5vZGVIb29rID0gbmV4dC5wcm9wcyAmJiBuZXh0LnByb3BzLm9uVm5vZGVVcGRhdGVkKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHF1ZXVlUG9zdFJlbmRlckVmZmVjdCgoKSA9PiBpbnZva2VWTm9kZUhvb2sodm5vZGVIb29rLCBwYXJlbnQsIG5leHQsIHZub2RlKSwgcGFyZW50U3VzcGVuc2UpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB8fCBfX1ZVRV9QUk9EX0RFVlRPT0xTX18pIHtcclxuICAgICAgICAgICAgICAgICAgICBkZXZ0b29sc0NvbXBvbmVudFVwZGF0ZWQoaW5zdGFuY2UpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHBvcFdhcm5pbmdDb250ZXh0KCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgICAgIC8vIGNyZWF0ZSByZWFjdGl2ZSBlZmZlY3QgZm9yIHJlbmRlcmluZ1xyXG4gICAgICAgIGNvbnN0IGVmZmVjdCA9IChpbnN0YW5jZS5lZmZlY3QgPSBuZXcgUmVhY3RpdmVFZmZlY3QoY29tcG9uZW50VXBkYXRlRm4sICgpID0+IHF1ZXVlSm9iKGluc3RhbmNlLnVwZGF0ZSksIGluc3RhbmNlLnNjb3BlIC8vIHRyYWNrIGl0IGluIGNvbXBvbmVudCdzIGVmZmVjdCBzY29wZVxyXG4gICAgICAgICkpO1xyXG4gICAgICAgIGNvbnN0IHVwZGF0ZSA9IChpbnN0YW5jZS51cGRhdGUgPSBlZmZlY3QucnVuLmJpbmQoZWZmZWN0KSk7XHJcbiAgICAgICAgdXBkYXRlLmlkID0gaW5zdGFuY2UudWlkO1xyXG4gICAgICAgIC8vIGFsbG93UmVjdXJzZVxyXG4gICAgICAgIC8vICMxODAxLCAjMjA0MyBjb21wb25lbnQgcmVuZGVyIGVmZmVjdHMgc2hvdWxkIGFsbG93IHJlY3Vyc2l2ZSB1cGRhdGVzXHJcbiAgICAgICAgdG9nZ2xlUmVjdXJzZShpbnN0YW5jZSwgdHJ1ZSk7XHJcbiAgICAgICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSkge1xyXG4gICAgICAgICAgICBlZmZlY3Qub25UcmFjayA9IGluc3RhbmNlLnJ0Y1xyXG4gICAgICAgICAgICAgICAgPyBlID0+IGludm9rZUFycmF5Rm5zKGluc3RhbmNlLnJ0YywgZSlcclxuICAgICAgICAgICAgICAgIDogdm9pZCAwO1xyXG4gICAgICAgICAgICBlZmZlY3Qub25UcmlnZ2VyID0gaW5zdGFuY2UucnRnXHJcbiAgICAgICAgICAgICAgICA/IGUgPT4gaW52b2tlQXJyYXlGbnMoaW5zdGFuY2UucnRnLCBlKVxyXG4gICAgICAgICAgICAgICAgOiB2b2lkIDA7XHJcbiAgICAgICAgICAgIC8vIEB0cy1pZ25vcmUgKGZvciBzY2hlZHVsZXIpXHJcbiAgICAgICAgICAgIHVwZGF0ZS5vd25lckluc3RhbmNlID0gaW5zdGFuY2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHVwZGF0ZSgpO1xyXG4gICAgfTtcclxuICAgIGNvbnN0IHVwZGF0ZUNvbXBvbmVudFByZVJlbmRlciA9IChpbnN0YW5jZSwgbmV4dFZOb2RlLCBvcHRpbWl6ZWQpID0+IHtcclxuICAgICAgICBuZXh0Vk5vZGUuY29tcG9uZW50ID0gaW5zdGFuY2U7XHJcbiAgICAgICAgY29uc3QgcHJldlByb3BzID0gaW5zdGFuY2Uudm5vZGUucHJvcHM7XHJcbiAgICAgICAgaW5zdGFuY2Uudm5vZGUgPSBuZXh0Vk5vZGU7XHJcbiAgICAgICAgaW5zdGFuY2UubmV4dCA9IG51bGw7XHJcbiAgICAgICAgdXBkYXRlUHJvcHMoaW5zdGFuY2UsIG5leHRWTm9kZS5wcm9wcywgcHJldlByb3BzLCBvcHRpbWl6ZWQpO1xyXG4gICAgICAgIHVwZGF0ZVNsb3RzKGluc3RhbmNlLCBuZXh0Vk5vZGUuY2hpbGRyZW4sIG9wdGltaXplZCk7XHJcbiAgICAgICAgcGF1c2VUcmFja2luZygpO1xyXG4gICAgICAgIC8vIHByb3BzIHVwZGF0ZSBtYXkgaGF2ZSB0cmlnZ2VyZWQgcHJlLWZsdXNoIHdhdGNoZXJzLlxyXG4gICAgICAgIC8vIGZsdXNoIHRoZW0gYmVmb3JlIHRoZSByZW5kZXIgdXBkYXRlLlxyXG4gICAgICAgIGZsdXNoUHJlRmx1c2hDYnModW5kZWZpbmVkLCBpbnN0YW5jZS51cGRhdGUpO1xyXG4gICAgICAgIHJlc2V0VHJhY2tpbmcoKTtcclxuICAgIH07XHJcbiAgICBjb25zdCBwYXRjaENoaWxkcmVuID0gKG4xLCBuMiwgY29udGFpbmVyLCBhbmNob3IsIHBhcmVudENvbXBvbmVudCwgcGFyZW50U3VzcGVuc2UsIGlzU1ZHLCBzbG90U2NvcGVJZHMsIG9wdGltaXplZCA9IGZhbHNlKSA9PiB7XHJcbiAgICAgICAgY29uc3QgYzEgPSBuMSAmJiBuMS5jaGlsZHJlbjtcclxuICAgICAgICBjb25zdCBwcmV2U2hhcGVGbGFnID0gbjEgPyBuMS5zaGFwZUZsYWcgOiAwO1xyXG4gICAgICAgIGNvbnN0IGMyID0gbjIuY2hpbGRyZW47XHJcbiAgICAgICAgY29uc3QgeyBwYXRjaEZsYWcsIHNoYXBlRmxhZyB9ID0gbjI7XHJcbiAgICAgICAgLy8gZmFzdCBwYXRoXHJcbiAgICAgICAgaWYgKHBhdGNoRmxhZyA+IDApIHtcclxuICAgICAgICAgICAgaWYgKHBhdGNoRmxhZyAmIDEyOCAvKiBLRVlFRF9GUkFHTUVOVCAqLykge1xyXG4gICAgICAgICAgICAgICAgLy8gdGhpcyBjb3VsZCBiZSBlaXRoZXIgZnVsbHkta2V5ZWQgb3IgbWl4ZWQgKHNvbWUga2V5ZWQgc29tZSBub3QpXHJcbiAgICAgICAgICAgICAgICAvLyBwcmVzZW5jZSBvZiBwYXRjaEZsYWcgbWVhbnMgY2hpbGRyZW4gYXJlIGd1YXJhbnRlZWQgdG8gYmUgYXJyYXlzXHJcbiAgICAgICAgICAgICAgICBwYXRjaEtleWVkQ2hpbGRyZW4oYzEsIGMyLCBjb250YWluZXIsIGFuY2hvciwgcGFyZW50Q29tcG9uZW50LCBwYXJlbnRTdXNwZW5zZSwgaXNTVkcsIHNsb3RTY29wZUlkcywgb3B0aW1pemVkKTtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmIChwYXRjaEZsYWcgJiAyNTYgLyogVU5LRVlFRF9GUkFHTUVOVCAqLykge1xyXG4gICAgICAgICAgICAgICAgLy8gdW5rZXllZFxyXG4gICAgICAgICAgICAgICAgcGF0Y2hVbmtleWVkQ2hpbGRyZW4oYzEsIGMyLCBjb250YWluZXIsIGFuY2hvciwgcGFyZW50Q29tcG9uZW50LCBwYXJlbnRTdXNwZW5zZSwgaXNTVkcsIHNsb3RTY29wZUlkcywgb3B0aW1pemVkKTtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBjaGlsZHJlbiBoYXMgMyBwb3NzaWJpbGl0aWVzOiB0ZXh0LCBhcnJheSBvciBubyBjaGlsZHJlbi5cclxuICAgICAgICBpZiAoc2hhcGVGbGFnICYgOCAvKiBURVhUX0NISUxEUkVOICovKSB7XHJcbiAgICAgICAgICAgIC8vIHRleHQgY2hpbGRyZW4gZmFzdCBwYXRoXHJcbiAgICAgICAgICAgIGlmIChwcmV2U2hhcGVGbGFnICYgMTYgLyogQVJSQVlfQ0hJTERSRU4gKi8pIHtcclxuICAgICAgICAgICAgICAgIHVubW91bnRDaGlsZHJlbihjMSwgcGFyZW50Q29tcG9uZW50LCBwYXJlbnRTdXNwZW5zZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGMyICE9PSBjMSkge1xyXG4gICAgICAgICAgICAgICAgaG9zdFNldEVsZW1lbnRUZXh0KGNvbnRhaW5lciwgYzIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBpZiAocHJldlNoYXBlRmxhZyAmIDE2IC8qIEFSUkFZX0NISUxEUkVOICovKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBwcmV2IGNoaWxkcmVuIHdhcyBhcnJheVxyXG4gICAgICAgICAgICAgICAgaWYgKHNoYXBlRmxhZyAmIDE2IC8qIEFSUkFZX0NISUxEUkVOICovKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gdHdvIGFycmF5cywgY2Fubm90IGFzc3VtZSBhbnl0aGluZywgZG8gZnVsbCBkaWZmXHJcbiAgICAgICAgICAgICAgICAgICAgcGF0Y2hLZXllZENoaWxkcmVuKGMxLCBjMiwgY29udGFpbmVyLCBhbmNob3IsIHBhcmVudENvbXBvbmVudCwgcGFyZW50U3VzcGVuc2UsIGlzU1ZHLCBzbG90U2NvcGVJZHMsIG9wdGltaXplZCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBubyBuZXcgY2hpbGRyZW4sIGp1c3QgdW5tb3VudCBvbGRcclxuICAgICAgICAgICAgICAgICAgICB1bm1vdW50Q2hpbGRyZW4oYzEsIHBhcmVudENvbXBvbmVudCwgcGFyZW50U3VzcGVuc2UsIHRydWUpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgLy8gcHJldiBjaGlsZHJlbiB3YXMgdGV4dCBPUiBudWxsXHJcbiAgICAgICAgICAgICAgICAvLyBuZXcgY2hpbGRyZW4gaXMgYXJyYXkgT1IgbnVsbFxyXG4gICAgICAgICAgICAgICAgaWYgKHByZXZTaGFwZUZsYWcgJiA4IC8qIFRFWFRfQ0hJTERSRU4gKi8pIHtcclxuICAgICAgICAgICAgICAgICAgICBob3N0U2V0RWxlbWVudFRleHQoY29udGFpbmVyLCAnJyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAvLyBtb3VudCBuZXcgaWYgYXJyYXlcclxuICAgICAgICAgICAgICAgIGlmIChzaGFwZUZsYWcgJiAxNiAvKiBBUlJBWV9DSElMRFJFTiAqLykge1xyXG4gICAgICAgICAgICAgICAgICAgIG1vdW50Q2hpbGRyZW4oYzIsIGNvbnRhaW5lciwgYW5jaG9yLCBwYXJlbnRDb21wb25lbnQsIHBhcmVudFN1c3BlbnNlLCBpc1NWRywgc2xvdFNjb3BlSWRzLCBvcHRpbWl6ZWQpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIGNvbnN0IHBhdGNoVW5rZXllZENoaWxkcmVuID0gKGMxLCBjMiwgY29udGFpbmVyLCBhbmNob3IsIHBhcmVudENvbXBvbmVudCwgcGFyZW50U3VzcGVuc2UsIGlzU1ZHLCBzbG90U2NvcGVJZHMsIG9wdGltaXplZCkgPT4ge1xyXG4gICAgICAgIGMxID0gYzEgfHwgRU1QVFlfQVJSO1xyXG4gICAgICAgIGMyID0gYzIgfHwgRU1QVFlfQVJSO1xyXG4gICAgICAgIGNvbnN0IG9sZExlbmd0aCA9IGMxLmxlbmd0aDtcclxuICAgICAgICBjb25zdCBuZXdMZW5ndGggPSBjMi5sZW5ndGg7XHJcbiAgICAgICAgY29uc3QgY29tbW9uTGVuZ3RoID0gTWF0aC5taW4ob2xkTGVuZ3RoLCBuZXdMZW5ndGgpO1xyXG4gICAgICAgIGxldCBpO1xyXG4gICAgICAgIGZvciAoaSA9IDA7IGkgPCBjb21tb25MZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBjb25zdCBuZXh0Q2hpbGQgPSAoYzJbaV0gPSBvcHRpbWl6ZWRcclxuICAgICAgICAgICAgICAgID8gY2xvbmVJZk1vdW50ZWQoYzJbaV0pXHJcbiAgICAgICAgICAgICAgICA6IG5vcm1hbGl6ZVZOb2RlKGMyW2ldKSk7XHJcbiAgICAgICAgICAgIHBhdGNoKGMxW2ldLCBuZXh0Q2hpbGQsIGNvbnRhaW5lciwgbnVsbCwgcGFyZW50Q29tcG9uZW50LCBwYXJlbnRTdXNwZW5zZSwgaXNTVkcsIHNsb3RTY29wZUlkcywgb3B0aW1pemVkKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKG9sZExlbmd0aCA+IG5ld0xlbmd0aCkge1xyXG4gICAgICAgICAgICAvLyByZW1vdmUgb2xkXHJcbiAgICAgICAgICAgIHVubW91bnRDaGlsZHJlbihjMSwgcGFyZW50Q29tcG9uZW50LCBwYXJlbnRTdXNwZW5zZSwgdHJ1ZSwgZmFsc2UsIGNvbW1vbkxlbmd0aCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAvLyBtb3VudCBuZXdcclxuICAgICAgICAgICAgbW91bnRDaGlsZHJlbihjMiwgY29udGFpbmVyLCBhbmNob3IsIHBhcmVudENvbXBvbmVudCwgcGFyZW50U3VzcGVuc2UsIGlzU1ZHLCBzbG90U2NvcGVJZHMsIG9wdGltaXplZCwgY29tbW9uTGVuZ3RoKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgLy8gY2FuIGJlIGFsbC1rZXllZCBvciBtaXhlZFxyXG4gICAgY29uc3QgcGF0Y2hLZXllZENoaWxkcmVuID0gKGMxLCBjMiwgY29udGFpbmVyLCBwYXJlbnRBbmNob3IsIHBhcmVudENvbXBvbmVudCwgcGFyZW50U3VzcGVuc2UsIGlzU1ZHLCBzbG90U2NvcGVJZHMsIG9wdGltaXplZCkgPT4ge1xyXG4gICAgICAgIGxldCBpID0gMDtcclxuICAgICAgICBjb25zdCBsMiA9IGMyLmxlbmd0aDtcclxuICAgICAgICBsZXQgZTEgPSBjMS5sZW5ndGggLSAxOyAvLyBwcmV2IGVuZGluZyBpbmRleFxyXG4gICAgICAgIGxldCBlMiA9IGwyIC0gMTsgLy8gbmV4dCBlbmRpbmcgaW5kZXhcclxuICAgICAgICAvLyAxLiBzeW5jIGZyb20gc3RhcnRcclxuICAgICAgICAvLyAoYSBiKSBjXHJcbiAgICAgICAgLy8gKGEgYikgZCBlXHJcbiAgICAgICAgd2hpbGUgKGkgPD0gZTEgJiYgaSA8PSBlMikge1xyXG4gICAgICAgICAgICBjb25zdCBuMSA9IGMxW2ldO1xyXG4gICAgICAgICAgICBjb25zdCBuMiA9IChjMltpXSA9IG9wdGltaXplZFxyXG4gICAgICAgICAgICAgICAgPyBjbG9uZUlmTW91bnRlZChjMltpXSlcclxuICAgICAgICAgICAgICAgIDogbm9ybWFsaXplVk5vZGUoYzJbaV0pKTtcclxuICAgICAgICAgICAgaWYgKGlzU2FtZVZOb2RlVHlwZShuMSwgbjIpKSB7XHJcbiAgICAgICAgICAgICAgICBwYXRjaChuMSwgbjIsIGNvbnRhaW5lciwgbnVsbCwgcGFyZW50Q29tcG9uZW50LCBwYXJlbnRTdXNwZW5zZSwgaXNTVkcsIHNsb3RTY29wZUlkcywgb3B0aW1pemVkKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGkrKztcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gMi4gc3luYyBmcm9tIGVuZFxyXG4gICAgICAgIC8vIGEgKGIgYylcclxuICAgICAgICAvLyBkIGUgKGIgYylcclxuICAgICAgICB3aGlsZSAoaSA8PSBlMSAmJiBpIDw9IGUyKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IG4xID0gYzFbZTFdO1xyXG4gICAgICAgICAgICBjb25zdCBuMiA9IChjMltlMl0gPSBvcHRpbWl6ZWRcclxuICAgICAgICAgICAgICAgID8gY2xvbmVJZk1vdW50ZWQoYzJbZTJdKVxyXG4gICAgICAgICAgICAgICAgOiBub3JtYWxpemVWTm9kZShjMltlMl0pKTtcclxuICAgICAgICAgICAgaWYgKGlzU2FtZVZOb2RlVHlwZShuMSwgbjIpKSB7XHJcbiAgICAgICAgICAgICAgICBwYXRjaChuMSwgbjIsIGNvbnRhaW5lciwgbnVsbCwgcGFyZW50Q29tcG9uZW50LCBwYXJlbnRTdXNwZW5zZSwgaXNTVkcsIHNsb3RTY29wZUlkcywgb3B0aW1pemVkKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGUxLS07XHJcbiAgICAgICAgICAgIGUyLS07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIDMuIGNvbW1vbiBzZXF1ZW5jZSArIG1vdW50XHJcbiAgICAgICAgLy8gKGEgYilcclxuICAgICAgICAvLyAoYSBiKSBjXHJcbiAgICAgICAgLy8gaSA9IDIsIGUxID0gMSwgZTIgPSAyXHJcbiAgICAgICAgLy8gKGEgYilcclxuICAgICAgICAvLyBjIChhIGIpXHJcbiAgICAgICAgLy8gaSA9IDAsIGUxID0gLTEsIGUyID0gMFxyXG4gICAgICAgIGlmIChpID4gZTEpIHtcclxuICAgICAgICAgICAgaWYgKGkgPD0gZTIpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IG5leHRQb3MgPSBlMiArIDE7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBhbmNob3IgPSBuZXh0UG9zIDwgbDIgPyBjMltuZXh0UG9zXS5lbCA6IHBhcmVudEFuY2hvcjtcclxuICAgICAgICAgICAgICAgIHdoaWxlIChpIDw9IGUyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcGF0Y2gobnVsbCwgKGMyW2ldID0gb3B0aW1pemVkXHJcbiAgICAgICAgICAgICAgICAgICAgICAgID8gY2xvbmVJZk1vdW50ZWQoYzJbaV0pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDogbm9ybWFsaXplVk5vZGUoYzJbaV0pKSwgY29udGFpbmVyLCBhbmNob3IsIHBhcmVudENvbXBvbmVudCwgcGFyZW50U3VzcGVuc2UsIGlzU1ZHLCBzbG90U2NvcGVJZHMsIG9wdGltaXplZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgaSsrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIDQuIGNvbW1vbiBzZXF1ZW5jZSArIHVubW91bnRcclxuICAgICAgICAvLyAoYSBiKSBjXHJcbiAgICAgICAgLy8gKGEgYilcclxuICAgICAgICAvLyBpID0gMiwgZTEgPSAyLCBlMiA9IDFcclxuICAgICAgICAvLyBhIChiIGMpXHJcbiAgICAgICAgLy8gKGIgYylcclxuICAgICAgICAvLyBpID0gMCwgZTEgPSAwLCBlMiA9IC0xXHJcbiAgICAgICAgZWxzZSBpZiAoaSA+IGUyKSB7XHJcbiAgICAgICAgICAgIHdoaWxlIChpIDw9IGUxKSB7XHJcbiAgICAgICAgICAgICAgICB1bm1vdW50KGMxW2ldLCBwYXJlbnRDb21wb25lbnQsIHBhcmVudFN1c3BlbnNlLCB0cnVlKTtcclxuICAgICAgICAgICAgICAgIGkrKztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICAvLyA1LiB1bmtub3duIHNlcXVlbmNlXHJcbiAgICAgICAgLy8gW2kgLi4uIGUxICsgMV06IGEgYiBbYyBkIGVdIGYgZ1xyXG4gICAgICAgIC8vIFtpIC4uLiBlMiArIDFdOiBhIGIgW2UgZCBjIGhdIGYgZ1xyXG4gICAgICAgIC8vIGkgPSAyLCBlMSA9IDQsIGUyID0gNVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBjb25zdCBzMSA9IGk7IC8vIHByZXYgc3RhcnRpbmcgaW5kZXhcclxuICAgICAgICAgICAgY29uc3QgczIgPSBpOyAvLyBuZXh0IHN0YXJ0aW5nIGluZGV4XHJcbiAgICAgICAgICAgIC8vIDUuMSBidWlsZCBrZXk6aW5kZXggbWFwIGZvciBuZXdDaGlsZHJlblxyXG4gICAgICAgICAgICBjb25zdCBrZXlUb05ld0luZGV4TWFwID0gbmV3IE1hcCgpO1xyXG4gICAgICAgICAgICBmb3IgKGkgPSBzMjsgaSA8PSBlMjsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBuZXh0Q2hpbGQgPSAoYzJbaV0gPSBvcHRpbWl6ZWRcclxuICAgICAgICAgICAgICAgICAgICA/IGNsb25lSWZNb3VudGVkKGMyW2ldKVxyXG4gICAgICAgICAgICAgICAgICAgIDogbm9ybWFsaXplVk5vZGUoYzJbaV0pKTtcclxuICAgICAgICAgICAgICAgIGlmIChuZXh0Q2hpbGQua2V5ICE9IG51bGwpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmIGtleVRvTmV3SW5kZXhNYXAuaGFzKG5leHRDaGlsZC5rZXkpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHdhcm4oYER1cGxpY2F0ZSBrZXlzIGZvdW5kIGR1cmluZyB1cGRhdGU6YCwgSlNPTi5zdHJpbmdpZnkobmV4dENoaWxkLmtleSksIGBNYWtlIHN1cmUga2V5cyBhcmUgdW5pcXVlLmApO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBrZXlUb05ld0luZGV4TWFwLnNldChuZXh0Q2hpbGQua2V5LCBpKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyA1LjIgbG9vcCB0aHJvdWdoIG9sZCBjaGlsZHJlbiBsZWZ0IHRvIGJlIHBhdGNoZWQgYW5kIHRyeSB0byBwYXRjaFxyXG4gICAgICAgICAgICAvLyBtYXRjaGluZyBub2RlcyAmIHJlbW92ZSBub2RlcyB0aGF0IGFyZSBubyBsb25nZXIgcHJlc2VudFxyXG4gICAgICAgICAgICBsZXQgajtcclxuICAgICAgICAgICAgbGV0IHBhdGNoZWQgPSAwO1xyXG4gICAgICAgICAgICBjb25zdCB0b0JlUGF0Y2hlZCA9IGUyIC0gczIgKyAxO1xyXG4gICAgICAgICAgICBsZXQgbW92ZWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgLy8gdXNlZCB0byB0cmFjayB3aGV0aGVyIGFueSBub2RlIGhhcyBtb3ZlZFxyXG4gICAgICAgICAgICBsZXQgbWF4TmV3SW5kZXhTb0ZhciA9IDA7XHJcbiAgICAgICAgICAgIC8vIHdvcmtzIGFzIE1hcDxuZXdJbmRleCwgb2xkSW5kZXg+XHJcbiAgICAgICAgICAgIC8vIE5vdGUgdGhhdCBvbGRJbmRleCBpcyBvZmZzZXQgYnkgKzFcclxuICAgICAgICAgICAgLy8gYW5kIG9sZEluZGV4ID0gMCBpcyBhIHNwZWNpYWwgdmFsdWUgaW5kaWNhdGluZyB0aGUgbmV3IG5vZGUgaGFzXHJcbiAgICAgICAgICAgIC8vIG5vIGNvcnJlc3BvbmRpbmcgb2xkIG5vZGUuXHJcbiAgICAgICAgICAgIC8vIHVzZWQgZm9yIGRldGVybWluaW5nIGxvbmdlc3Qgc3RhYmxlIHN1YnNlcXVlbmNlXHJcbiAgICAgICAgICAgIGNvbnN0IG5ld0luZGV4VG9PbGRJbmRleE1hcCA9IG5ldyBBcnJheSh0b0JlUGF0Y2hlZCk7XHJcbiAgICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCB0b0JlUGF0Y2hlZDsgaSsrKVxyXG4gICAgICAgICAgICAgICAgbmV3SW5kZXhUb09sZEluZGV4TWFwW2ldID0gMDtcclxuICAgICAgICAgICAgZm9yIChpID0gczE7IGkgPD0gZTE7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgcHJldkNoaWxkID0gYzFbaV07XHJcbiAgICAgICAgICAgICAgICBpZiAocGF0Y2hlZCA+PSB0b0JlUGF0Y2hlZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIGFsbCBuZXcgY2hpbGRyZW4gaGF2ZSBiZWVuIHBhdGNoZWQgc28gdGhpcyBjYW4gb25seSBiZSBhIHJlbW92YWxcclxuICAgICAgICAgICAgICAgICAgICB1bm1vdW50KHByZXZDaGlsZCwgcGFyZW50Q29tcG9uZW50LCBwYXJlbnRTdXNwZW5zZSwgdHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBsZXQgbmV3SW5kZXg7XHJcbiAgICAgICAgICAgICAgICBpZiAocHJldkNoaWxkLmtleSAhPSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbmV3SW5kZXggPSBrZXlUb05ld0luZGV4TWFwLmdldChwcmV2Q2hpbGQua2V5KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIGtleS1sZXNzIG5vZGUsIHRyeSB0byBsb2NhdGUgYSBrZXktbGVzcyBub2RlIG9mIHRoZSBzYW1lIHR5cGVcclxuICAgICAgICAgICAgICAgICAgICBmb3IgKGogPSBzMjsgaiA8PSBlMjsgaisrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChuZXdJbmRleFRvT2xkSW5kZXhNYXBbaiAtIHMyXSA9PT0gMCAmJlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNTYW1lVk5vZGVUeXBlKHByZXZDaGlsZCwgYzJbal0pKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdJbmRleCA9IGo7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmIChuZXdJbmRleCA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdW5tb3VudChwcmV2Q2hpbGQsIHBhcmVudENvbXBvbmVudCwgcGFyZW50U3VzcGVuc2UsIHRydWUpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbmV3SW5kZXhUb09sZEluZGV4TWFwW25ld0luZGV4IC0gczJdID0gaSArIDE7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG5ld0luZGV4ID49IG1heE5ld0luZGV4U29GYXIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWF4TmV3SW5kZXhTb0ZhciA9IG5ld0luZGV4O1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbW92ZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBwYXRjaChwcmV2Q2hpbGQsIGMyW25ld0luZGV4XSwgY29udGFpbmVyLCBudWxsLCBwYXJlbnRDb21wb25lbnQsIHBhcmVudFN1c3BlbnNlLCBpc1NWRywgc2xvdFNjb3BlSWRzLCBvcHRpbWl6ZWQpO1xyXG4gICAgICAgICAgICAgICAgICAgIHBhdGNoZWQrKztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyA1LjMgbW92ZSBhbmQgbW91bnRcclxuICAgICAgICAgICAgLy8gZ2VuZXJhdGUgbG9uZ2VzdCBzdGFibGUgc3Vic2VxdWVuY2Ugb25seSB3aGVuIG5vZGVzIGhhdmUgbW92ZWRcclxuICAgICAgICAgICAgY29uc3QgaW5jcmVhc2luZ05ld0luZGV4U2VxdWVuY2UgPSBtb3ZlZFxyXG4gICAgICAgICAgICAgICAgPyBnZXRTZXF1ZW5jZShuZXdJbmRleFRvT2xkSW5kZXhNYXApXHJcbiAgICAgICAgICAgICAgICA6IEVNUFRZX0FSUjtcclxuICAgICAgICAgICAgaiA9IGluY3JlYXNpbmdOZXdJbmRleFNlcXVlbmNlLmxlbmd0aCAtIDE7XHJcbiAgICAgICAgICAgIC8vIGxvb3BpbmcgYmFja3dhcmRzIHNvIHRoYXQgd2UgY2FuIHVzZSBsYXN0IHBhdGNoZWQgbm9kZSBhcyBhbmNob3JcclxuICAgICAgICAgICAgZm9yIChpID0gdG9CZVBhdGNoZWQgLSAxOyBpID49IDA7IGktLSkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgbmV4dEluZGV4ID0gczIgKyBpO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgbmV4dENoaWxkID0gYzJbbmV4dEluZGV4XTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGFuY2hvciA9IG5leHRJbmRleCArIDEgPCBsMiA/IGMyW25leHRJbmRleCArIDFdLmVsIDogcGFyZW50QW5jaG9yO1xyXG4gICAgICAgICAgICAgICAgaWYgKG5ld0luZGV4VG9PbGRJbmRleE1hcFtpXSA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIG1vdW50IG5ld1xyXG4gICAgICAgICAgICAgICAgICAgIHBhdGNoKG51bGwsIG5leHRDaGlsZCwgY29udGFpbmVyLCBhbmNob3IsIHBhcmVudENvbXBvbmVudCwgcGFyZW50U3VzcGVuc2UsIGlzU1ZHLCBzbG90U2NvcGVJZHMsIG9wdGltaXplZCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIGlmIChtb3ZlZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIG1vdmUgaWY6XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gVGhlcmUgaXMgbm8gc3RhYmxlIHN1YnNlcXVlbmNlIChlLmcuIGEgcmV2ZXJzZSlcclxuICAgICAgICAgICAgICAgICAgICAvLyBPUiBjdXJyZW50IG5vZGUgaXMgbm90IGFtb25nIHRoZSBzdGFibGUgc2VxdWVuY2VcclxuICAgICAgICAgICAgICAgICAgICBpZiAoaiA8IDAgfHwgaSAhPT0gaW5jcmVhc2luZ05ld0luZGV4U2VxdWVuY2Vbal0pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbW92ZShuZXh0Q2hpbGQsIGNvbnRhaW5lciwgYW5jaG9yLCAyIC8qIFJFT1JERVIgKi8pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgai0tO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBjb25zdCBtb3ZlID0gKHZub2RlLCBjb250YWluZXIsIGFuY2hvciwgbW92ZVR5cGUsIHBhcmVudFN1c3BlbnNlID0gbnVsbCkgPT4ge1xyXG4gICAgICAgIGNvbnN0IHsgZWwsIHR5cGUsIHRyYW5zaXRpb24sIGNoaWxkcmVuLCBzaGFwZUZsYWcgfSA9IHZub2RlO1xyXG4gICAgICAgIGlmIChzaGFwZUZsYWcgJiA2IC8qIENPTVBPTkVOVCAqLykge1xyXG4gICAgICAgICAgICBtb3ZlKHZub2RlLmNvbXBvbmVudC5zdWJUcmVlLCBjb250YWluZXIsIGFuY2hvciwgbW92ZVR5cGUpO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChzaGFwZUZsYWcgJiAxMjggLyogU1VTUEVOU0UgKi8pIHtcclxuICAgICAgICAgICAgdm5vZGUuc3VzcGVuc2UubW92ZShjb250YWluZXIsIGFuY2hvciwgbW92ZVR5cGUpO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChzaGFwZUZsYWcgJiA2NCAvKiBURUxFUE9SVCAqLykge1xyXG4gICAgICAgICAgICB0eXBlLm1vdmUodm5vZGUsIGNvbnRhaW5lciwgYW5jaG9yLCBpbnRlcm5hbHMpO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0eXBlID09PSBGcmFnbWVudCkge1xyXG4gICAgICAgICAgICBob3N0SW5zZXJ0KGVsLCBjb250YWluZXIsIGFuY2hvcik7XHJcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY2hpbGRyZW4ubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIG1vdmUoY2hpbGRyZW5baV0sIGNvbnRhaW5lciwgYW5jaG9yLCBtb3ZlVHlwZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaG9zdEluc2VydCh2bm9kZS5hbmNob3IsIGNvbnRhaW5lciwgYW5jaG9yKTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodHlwZSA9PT0gU3RhdGljKSB7XHJcbiAgICAgICAgICAgIG1vdmVTdGF0aWNOb2RlKHZub2RlLCBjb250YWluZXIsIGFuY2hvcik7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gc2luZ2xlIG5vZGVzXHJcbiAgICAgICAgY29uc3QgbmVlZFRyYW5zaXRpb24gPSBtb3ZlVHlwZSAhPT0gMiAvKiBSRU9SREVSICovICYmXHJcbiAgICAgICAgICAgIHNoYXBlRmxhZyAmIDEgLyogRUxFTUVOVCAqLyAmJlxyXG4gICAgICAgICAgICB0cmFuc2l0aW9uO1xyXG4gICAgICAgIGlmIChuZWVkVHJhbnNpdGlvbikge1xyXG4gICAgICAgICAgICBpZiAobW92ZVR5cGUgPT09IDAgLyogRU5URVIgKi8pIHtcclxuICAgICAgICAgICAgICAgIHRyYW5zaXRpb24uYmVmb3JlRW50ZXIoZWwpO1xyXG4gICAgICAgICAgICAgICAgaG9zdEluc2VydChlbCwgY29udGFpbmVyLCBhbmNob3IpO1xyXG4gICAgICAgICAgICAgICAgcXVldWVQb3N0UmVuZGVyRWZmZWN0KCgpID0+IHRyYW5zaXRpb24uZW50ZXIoZWwpLCBwYXJlbnRTdXNwZW5zZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCB7IGxlYXZlLCBkZWxheUxlYXZlLCBhZnRlckxlYXZlIH0gPSB0cmFuc2l0aW9uO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgcmVtb3ZlID0gKCkgPT4gaG9zdEluc2VydChlbCwgY29udGFpbmVyLCBhbmNob3IpO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgcGVyZm9ybUxlYXZlID0gKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGxlYXZlKGVsLCAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlbW92ZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhZnRlckxlYXZlICYmIGFmdGVyTGVhdmUoKTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICBpZiAoZGVsYXlMZWF2ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGRlbGF5TGVhdmUoZWwsIHJlbW92ZSwgcGVyZm9ybUxlYXZlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHBlcmZvcm1MZWF2ZSgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBob3N0SW5zZXJ0KGVsLCBjb250YWluZXIsIGFuY2hvcik7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIGNvbnN0IHVubW91bnQgPSAodm5vZGUsIHBhcmVudENvbXBvbmVudCwgcGFyZW50U3VzcGVuc2UsIGRvUmVtb3ZlID0gZmFsc2UsIG9wdGltaXplZCA9IGZhbHNlKSA9PiB7XHJcbiAgICAgICAgY29uc3QgeyB0eXBlLCBwcm9wcywgcmVmLCBjaGlsZHJlbiwgZHluYW1pY0NoaWxkcmVuLCBzaGFwZUZsYWcsIHBhdGNoRmxhZywgZGlycyB9ID0gdm5vZGU7XHJcbiAgICAgICAgLy8gdW5zZXQgcmVmXHJcbiAgICAgICAgaWYgKHJlZiAhPSBudWxsKSB7XHJcbiAgICAgICAgICAgIHNldFJlZihyZWYsIG51bGwsIHBhcmVudFN1c3BlbnNlLCB2bm9kZSwgdHJ1ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChzaGFwZUZsYWcgJiAyNTYgLyogQ09NUE9ORU5UX1NIT1VMRF9LRUVQX0FMSVZFICovKSB7XHJcbiAgICAgICAgICAgIHBhcmVudENvbXBvbmVudC5jdHguZGVhY3RpdmF0ZSh2bm9kZSk7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3Qgc2hvdWxkSW52b2tlRGlycyA9IHNoYXBlRmxhZyAmIDEgLyogRUxFTUVOVCAqLyAmJiBkaXJzO1xyXG4gICAgICAgIGNvbnN0IHNob3VsZEludm9rZVZub2RlSG9vayA9ICFpc0FzeW5jV3JhcHBlcih2bm9kZSk7XHJcbiAgICAgICAgbGV0IHZub2RlSG9vaztcclxuICAgICAgICBpZiAoc2hvdWxkSW52b2tlVm5vZGVIb29rICYmXHJcbiAgICAgICAgICAgICh2bm9kZUhvb2sgPSBwcm9wcyAmJiBwcm9wcy5vblZub2RlQmVmb3JlVW5tb3VudCkpIHtcclxuICAgICAgICAgICAgaW52b2tlVk5vZGVIb29rKHZub2RlSG9vaywgcGFyZW50Q29tcG9uZW50LCB2bm9kZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChzaGFwZUZsYWcgJiA2IC8qIENPTVBPTkVOVCAqLykge1xyXG4gICAgICAgICAgICB1bm1vdW50Q29tcG9uZW50KHZub2RlLmNvbXBvbmVudCwgcGFyZW50U3VzcGVuc2UsIGRvUmVtb3ZlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGlmIChzaGFwZUZsYWcgJiAxMjggLyogU1VTUEVOU0UgKi8pIHtcclxuICAgICAgICAgICAgICAgIHZub2RlLnN1c3BlbnNlLnVubW91bnQocGFyZW50U3VzcGVuc2UsIGRvUmVtb3ZlKTtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoc2hvdWxkSW52b2tlRGlycykge1xyXG4gICAgICAgICAgICAgICAgaW52b2tlRGlyZWN0aXZlSG9vayh2bm9kZSwgbnVsbCwgcGFyZW50Q29tcG9uZW50LCAnYmVmb3JlVW5tb3VudCcpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChzaGFwZUZsYWcgJiA2NCAvKiBURUxFUE9SVCAqLykge1xyXG4gICAgICAgICAgICAgICAgdm5vZGUudHlwZS5yZW1vdmUodm5vZGUsIHBhcmVudENvbXBvbmVudCwgcGFyZW50U3VzcGVuc2UsIG9wdGltaXplZCwgaW50ZXJuYWxzLCBkb1JlbW92ZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSBpZiAoZHluYW1pY0NoaWxkcmVuICYmXHJcbiAgICAgICAgICAgICAgICAvLyAjMTE1MzogZmFzdCBwYXRoIHNob3VsZCBub3QgYmUgdGFrZW4gZm9yIG5vbi1zdGFibGUgKHYtZm9yKSBmcmFnbWVudHNcclxuICAgICAgICAgICAgICAgICh0eXBlICE9PSBGcmFnbWVudCB8fFxyXG4gICAgICAgICAgICAgICAgICAgIChwYXRjaEZsYWcgPiAwICYmIHBhdGNoRmxhZyAmIDY0IC8qIFNUQUJMRV9GUkFHTUVOVCAqLykpKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBmYXN0IHBhdGggZm9yIGJsb2NrIG5vZGVzOiBvbmx5IG5lZWQgdG8gdW5tb3VudCBkeW5hbWljIGNoaWxkcmVuLlxyXG4gICAgICAgICAgICAgICAgdW5tb3VudENoaWxkcmVuKGR5bmFtaWNDaGlsZHJlbiwgcGFyZW50Q29tcG9uZW50LCBwYXJlbnRTdXNwZW5zZSwgZmFsc2UsIHRydWUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKCh0eXBlID09PSBGcmFnbWVudCAmJlxyXG4gICAgICAgICAgICAgICAgcGF0Y2hGbGFnICZcclxuICAgICAgICAgICAgICAgICAgICAoMTI4IC8qIEtFWUVEX0ZSQUdNRU5UICovIHwgMjU2IC8qIFVOS0VZRURfRlJBR01FTlQgKi8pKSB8fFxyXG4gICAgICAgICAgICAgICAgKCFvcHRpbWl6ZWQgJiYgc2hhcGVGbGFnICYgMTYgLyogQVJSQVlfQ0hJTERSRU4gKi8pKSB7XHJcbiAgICAgICAgICAgICAgICB1bm1vdW50Q2hpbGRyZW4oY2hpbGRyZW4sIHBhcmVudENvbXBvbmVudCwgcGFyZW50U3VzcGVuc2UpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChkb1JlbW92ZSkge1xyXG4gICAgICAgICAgICAgICAgcmVtb3ZlKHZub2RlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoKHNob3VsZEludm9rZVZub2RlSG9vayAmJlxyXG4gICAgICAgICAgICAodm5vZGVIb29rID0gcHJvcHMgJiYgcHJvcHMub25Wbm9kZVVubW91bnRlZCkpIHx8XHJcbiAgICAgICAgICAgIHNob3VsZEludm9rZURpcnMpIHtcclxuICAgICAgICAgICAgcXVldWVQb3N0UmVuZGVyRWZmZWN0KCgpID0+IHtcclxuICAgICAgICAgICAgICAgIHZub2RlSG9vayAmJiBpbnZva2VWTm9kZUhvb2sodm5vZGVIb29rLCBwYXJlbnRDb21wb25lbnQsIHZub2RlKTtcclxuICAgICAgICAgICAgICAgIHNob3VsZEludm9rZURpcnMgJiZcclxuICAgICAgICAgICAgICAgICAgICBpbnZva2VEaXJlY3RpdmVIb29rKHZub2RlLCBudWxsLCBwYXJlbnRDb21wb25lbnQsICd1bm1vdW50ZWQnKTtcclxuICAgICAgICAgICAgfSwgcGFyZW50U3VzcGVuc2UpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBjb25zdCByZW1vdmUgPSB2bm9kZSA9PiB7XHJcbiAgICAgICAgY29uc3QgeyB0eXBlLCBlbCwgYW5jaG9yLCB0cmFuc2l0aW9uIH0gPSB2bm9kZTtcclxuICAgICAgICBpZiAodHlwZSA9PT0gRnJhZ21lbnQpIHtcclxuICAgICAgICAgICAgcmVtb3ZlRnJhZ21lbnQoZWwsIGFuY2hvcik7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHR5cGUgPT09IFN0YXRpYykge1xyXG4gICAgICAgICAgICByZW1vdmVTdGF0aWNOb2RlKHZub2RlKTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCBwZXJmb3JtUmVtb3ZlID0gKCkgPT4ge1xyXG4gICAgICAgICAgICBob3N0UmVtb3ZlKGVsKTtcclxuICAgICAgICAgICAgaWYgKHRyYW5zaXRpb24gJiYgIXRyYW5zaXRpb24ucGVyc2lzdGVkICYmIHRyYW5zaXRpb24uYWZ0ZXJMZWF2ZSkge1xyXG4gICAgICAgICAgICAgICAgdHJhbnNpdGlvbi5hZnRlckxlYXZlKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgICAgIGlmICh2bm9kZS5zaGFwZUZsYWcgJiAxIC8qIEVMRU1FTlQgKi8gJiZcclxuICAgICAgICAgICAgdHJhbnNpdGlvbiAmJlxyXG4gICAgICAgICAgICAhdHJhbnNpdGlvbi5wZXJzaXN0ZWQpIHtcclxuICAgICAgICAgICAgY29uc3QgeyBsZWF2ZSwgZGVsYXlMZWF2ZSB9ID0gdHJhbnNpdGlvbjtcclxuICAgICAgICAgICAgY29uc3QgcGVyZm9ybUxlYXZlID0gKCkgPT4gbGVhdmUoZWwsIHBlcmZvcm1SZW1vdmUpO1xyXG4gICAgICAgICAgICBpZiAoZGVsYXlMZWF2ZSkge1xyXG4gICAgICAgICAgICAgICAgZGVsYXlMZWF2ZSh2bm9kZS5lbCwgcGVyZm9ybVJlbW92ZSwgcGVyZm9ybUxlYXZlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHBlcmZvcm1MZWF2ZSgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBwZXJmb3JtUmVtb3ZlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIGNvbnN0IHJlbW92ZUZyYWdtZW50ID0gKGN1ciwgZW5kKSA9PiB7XHJcbiAgICAgICAgLy8gRm9yIGZyYWdtZW50cywgZGlyZWN0bHkgcmVtb3ZlIGFsbCBjb250YWluZWQgRE9NIG5vZGVzLlxyXG4gICAgICAgIC8vIChmcmFnbWVudCBjaGlsZCBub2RlcyBjYW5ub3QgaGF2ZSB0cmFuc2l0aW9uKVxyXG4gICAgICAgIGxldCBuZXh0O1xyXG4gICAgICAgIHdoaWxlIChjdXIgIT09IGVuZCkge1xyXG4gICAgICAgICAgICBuZXh0ID0gaG9zdE5leHRTaWJsaW5nKGN1cik7XHJcbiAgICAgICAgICAgIGhvc3RSZW1vdmUoY3VyKTtcclxuICAgICAgICAgICAgY3VyID0gbmV4dDtcclxuICAgICAgICB9XHJcbiAgICAgICAgaG9zdFJlbW92ZShlbmQpO1xyXG4gICAgfTtcclxuICAgIGNvbnN0IHVubW91bnRDb21wb25lbnQgPSAoaW5zdGFuY2UsIHBhcmVudFN1c3BlbnNlLCBkb1JlbW92ZSkgPT4ge1xyXG4gICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgJiYgaW5zdGFuY2UudHlwZS5fX2htcklkKSB7XHJcbiAgICAgICAgICAgIHVucmVnaXN0ZXJITVIoaW5zdGFuY2UpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCB7IGJ1bSwgc2NvcGUsIHVwZGF0ZSwgc3ViVHJlZSwgdW0gfSA9IGluc3RhbmNlO1xyXG4gICAgICAgIC8vIGJlZm9yZVVubW91bnQgaG9va1xyXG4gICAgICAgIGlmIChidW0pIHtcclxuICAgICAgICAgICAgaW52b2tlQXJyYXlGbnMoYnVtKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gc3RvcCBlZmZlY3RzIGluIGNvbXBvbmVudCBzY29wZVxyXG4gICAgICAgIHNjb3BlLnN0b3AoKTtcclxuICAgICAgICAvLyB1cGRhdGUgbWF5IGJlIG51bGwgaWYgYSBjb21wb25lbnQgaXMgdW5tb3VudGVkIGJlZm9yZSBpdHMgYXN5bmNcclxuICAgICAgICAvLyBzZXR1cCBoYXMgcmVzb2x2ZWQuXHJcbiAgICAgICAgaWYgKHVwZGF0ZSkge1xyXG4gICAgICAgICAgICAvLyBzbyB0aGF0IHNjaGVkdWxlciB3aWxsIG5vIGxvbmdlciBpbnZva2UgaXRcclxuICAgICAgICAgICAgdXBkYXRlLmFjdGl2ZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICB1bm1vdW50KHN1YlRyZWUsIGluc3RhbmNlLCBwYXJlbnRTdXNwZW5zZSwgZG9SZW1vdmUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyB1bm1vdW50ZWQgaG9va1xyXG4gICAgICAgIGlmICh1bSkge1xyXG4gICAgICAgICAgICBxdWV1ZVBvc3RSZW5kZXJFZmZlY3QodW0sIHBhcmVudFN1c3BlbnNlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcXVldWVQb3N0UmVuZGVyRWZmZWN0KCgpID0+IHtcclxuICAgICAgICAgICAgaW5zdGFuY2UuaXNVbm1vdW50ZWQgPSB0cnVlO1xyXG4gICAgICAgIH0sIHBhcmVudFN1c3BlbnNlKTtcclxuICAgICAgICAvLyBBIGNvbXBvbmVudCB3aXRoIGFzeW5jIGRlcCBpbnNpZGUgYSBwZW5kaW5nIHN1c3BlbnNlIGlzIHVubW91bnRlZCBiZWZvcmVcclxuICAgICAgICAvLyBpdHMgYXN5bmMgZGVwIHJlc29sdmVzLiBUaGlzIHNob3VsZCByZW1vdmUgdGhlIGRlcCBmcm9tIHRoZSBzdXNwZW5zZSwgYW5kXHJcbiAgICAgICAgLy8gY2F1c2UgdGhlIHN1c3BlbnNlIHRvIHJlc29sdmUgaW1tZWRpYXRlbHkgaWYgdGhhdCB3YXMgdGhlIGxhc3QgZGVwLlxyXG4gICAgICAgIGlmIChwYXJlbnRTdXNwZW5zZSAmJlxyXG4gICAgICAgICAgICBwYXJlbnRTdXNwZW5zZS5wZW5kaW5nQnJhbmNoICYmXHJcbiAgICAgICAgICAgICFwYXJlbnRTdXNwZW5zZS5pc1VubW91bnRlZCAmJlxyXG4gICAgICAgICAgICBpbnN0YW5jZS5hc3luY0RlcCAmJlxyXG4gICAgICAgICAgICAhaW5zdGFuY2UuYXN5bmNSZXNvbHZlZCAmJlxyXG4gICAgICAgICAgICBpbnN0YW5jZS5zdXNwZW5zZUlkID09PSBwYXJlbnRTdXNwZW5zZS5wZW5kaW5nSWQpIHtcclxuICAgICAgICAgICAgcGFyZW50U3VzcGVuc2UuZGVwcy0tO1xyXG4gICAgICAgICAgICBpZiAocGFyZW50U3VzcGVuc2UuZGVwcyA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgcGFyZW50U3VzcGVuc2UucmVzb2x2ZSgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgfHwgX19WVUVfUFJPRF9ERVZUT09MU19fKSB7XHJcbiAgICAgICAgICAgIGRldnRvb2xzQ29tcG9uZW50UmVtb3ZlZChpbnN0YW5jZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIGNvbnN0IHVubW91bnRDaGlsZHJlbiA9IChjaGlsZHJlbiwgcGFyZW50Q29tcG9uZW50LCBwYXJlbnRTdXNwZW5zZSwgZG9SZW1vdmUgPSBmYWxzZSwgb3B0aW1pemVkID0gZmFsc2UsIHN0YXJ0ID0gMCkgPT4ge1xyXG4gICAgICAgIGZvciAobGV0IGkgPSBzdGFydDsgaSA8IGNoaWxkcmVuLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIHVubW91bnQoY2hpbGRyZW5baV0sIHBhcmVudENvbXBvbmVudCwgcGFyZW50U3VzcGVuc2UsIGRvUmVtb3ZlLCBvcHRpbWl6ZWQpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBjb25zdCBnZXROZXh0SG9zdE5vZGUgPSB2bm9kZSA9PiB7XHJcbiAgICAgICAgaWYgKHZub2RlLnNoYXBlRmxhZyAmIDYgLyogQ09NUE9ORU5UICovKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBnZXROZXh0SG9zdE5vZGUodm5vZGUuY29tcG9uZW50LnN1YlRyZWUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodm5vZGUuc2hhcGVGbGFnICYgMTI4IC8qIFNVU1BFTlNFICovKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB2bm9kZS5zdXNwZW5zZS5uZXh0KCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBob3N0TmV4dFNpYmxpbmcoKHZub2RlLmFuY2hvciB8fCB2bm9kZS5lbCkpO1xyXG4gICAgfTtcclxuICAgIGNvbnN0IHJlbmRlciA9ICh2bm9kZSwgY29udGFpbmVyLCBpc1NWRykgPT4ge1xyXG4gICAgICAgIGlmICh2bm9kZSA9PSBudWxsKSB7XHJcbiAgICAgICAgICAgIGlmIChjb250YWluZXIuX3Zub2RlKSB7XHJcbiAgICAgICAgICAgICAgICB1bm1vdW50KGNvbnRhaW5lci5fdm5vZGUsIG51bGwsIG51bGwsIHRydWUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBwYXRjaChjb250YWluZXIuX3Zub2RlIHx8IG51bGwsIHZub2RlLCBjb250YWluZXIsIG51bGwsIG51bGwsIG51bGwsIGlzU1ZHKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZmx1c2hQb3N0Rmx1c2hDYnMoKTtcclxuICAgICAgICBjb250YWluZXIuX3Zub2RlID0gdm5vZGU7XHJcbiAgICB9O1xyXG4gICAgY29uc3QgaW50ZXJuYWxzID0ge1xyXG4gICAgICAgIHA6IHBhdGNoLFxyXG4gICAgICAgIHVtOiB1bm1vdW50LFxyXG4gICAgICAgIG06IG1vdmUsXHJcbiAgICAgICAgcjogcmVtb3ZlLFxyXG4gICAgICAgIG10OiBtb3VudENvbXBvbmVudCxcclxuICAgICAgICBtYzogbW91bnRDaGlsZHJlbixcclxuICAgICAgICBwYzogcGF0Y2hDaGlsZHJlbixcclxuICAgICAgICBwYmM6IHBhdGNoQmxvY2tDaGlsZHJlbixcclxuICAgICAgICBuOiBnZXROZXh0SG9zdE5vZGUsXHJcbiAgICAgICAgbzogb3B0aW9uc1xyXG4gICAgfTtcclxuICAgIGxldCBoeWRyYXRlO1xyXG4gICAgbGV0IGh5ZHJhdGVOb2RlO1xyXG4gICAgaWYgKGNyZWF0ZUh5ZHJhdGlvbkZucykge1xyXG4gICAgICAgIFtoeWRyYXRlLCBoeWRyYXRlTm9kZV0gPSBjcmVhdGVIeWRyYXRpb25GbnMoaW50ZXJuYWxzKTtcclxuICAgIH1cclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgcmVuZGVyLFxyXG4gICAgICAgIGh5ZHJhdGUsXHJcbiAgICAgICAgY3JlYXRlQXBwOiBjcmVhdGVBcHBBUEkocmVuZGVyLCBoeWRyYXRlKVxyXG4gICAgfTtcclxufVxyXG5mdW5jdGlvbiB0b2dnbGVSZWN1cnNlKHsgZWZmZWN0LCB1cGRhdGUgfSwgYWxsb3dlZCkge1xyXG4gICAgZWZmZWN0LmFsbG93UmVjdXJzZSA9IHVwZGF0ZS5hbGxvd1JlY3Vyc2UgPSBhbGxvd2VkO1xyXG59XHJcbi8qKlxyXG4gKiAjMTE1NlxyXG4gKiBXaGVuIGEgY29tcG9uZW50IGlzIEhNUi1lbmFibGVkLCB3ZSBuZWVkIHRvIG1ha2Ugc3VyZSB0aGF0IGFsbCBzdGF0aWMgbm9kZXNcclxuICogaW5zaWRlIGEgYmxvY2sgYWxzbyBpbmhlcml0IHRoZSBET00gZWxlbWVudCBmcm9tIHRoZSBwcmV2aW91cyB0cmVlIHNvIHRoYXRcclxuICogSE1SIHVwZGF0ZXMgKHdoaWNoIGFyZSBmdWxsIHVwZGF0ZXMpIGNhbiByZXRyaWV2ZSB0aGUgZWxlbWVudCBmb3IgcGF0Y2hpbmcuXHJcbiAqXHJcbiAqICMyMDgwXHJcbiAqIEluc2lkZSBrZXllZCBgdGVtcGxhdGVgIGZyYWdtZW50IHN0YXRpYyBjaGlsZHJlbiwgaWYgYSBmcmFnbWVudCBpcyBtb3ZlZCxcclxuICogdGhlIGNoaWxkcmVuIHdpbGwgYWx3YXlzIGJlIG1vdmVkLiBUaGVyZWZvcmUsIGluIG9yZGVyIHRvIGVuc3VyZSBjb3JyZWN0IG1vdmVcclxuICogcG9zaXRpb24sIGVsIHNob3VsZCBiZSBpbmhlcml0ZWQgZnJvbSBwcmV2aW91cyBub2Rlcy5cclxuICovXHJcbmZ1bmN0aW9uIHRyYXZlcnNlU3RhdGljQ2hpbGRyZW4objEsIG4yLCBzaGFsbG93ID0gZmFsc2UpIHtcclxuICAgIGNvbnN0IGNoMSA9IG4xLmNoaWxkcmVuO1xyXG4gICAgY29uc3QgY2gyID0gbjIuY2hpbGRyZW47XHJcbiAgICBpZiAoaXNBcnJheShjaDEpICYmIGlzQXJyYXkoY2gyKSkge1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY2gxLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIC8vIHRoaXMgaXMgb25seSBjYWxsZWQgaW4gdGhlIG9wdGltaXplZCBwYXRoIHNvIGFycmF5IGNoaWxkcmVuIGFyZVxyXG4gICAgICAgICAgICAvLyBndWFyYW50ZWVkIHRvIGJlIHZub2Rlc1xyXG4gICAgICAgICAgICBjb25zdCBjMSA9IGNoMVtpXTtcclxuICAgICAgICAgICAgbGV0IGMyID0gY2gyW2ldO1xyXG4gICAgICAgICAgICBpZiAoYzIuc2hhcGVGbGFnICYgMSAvKiBFTEVNRU5UICovICYmICFjMi5keW5hbWljQ2hpbGRyZW4pIHtcclxuICAgICAgICAgICAgICAgIGlmIChjMi5wYXRjaEZsYWcgPD0gMCB8fCBjMi5wYXRjaEZsYWcgPT09IDMyIC8qIEhZRFJBVEVfRVZFTlRTICovKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYzIgPSBjaDJbaV0gPSBjbG9uZUlmTW91bnRlZChjaDJbaV0pO1xyXG4gICAgICAgICAgICAgICAgICAgIGMyLmVsID0gYzEuZWw7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAoIXNoYWxsb3cpXHJcbiAgICAgICAgICAgICAgICAgICAgdHJhdmVyc2VTdGF0aWNDaGlsZHJlbihjMSwgYzIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vIGFsc28gaW5oZXJpdCBmb3IgY29tbWVudCBub2RlcywgYnV0IG5vdCBwbGFjZWhvbGRlcnMgKGUuZy4gdi1pZiB3aGljaFxyXG4gICAgICAgICAgICAvLyB3b3VsZCBoYXZlIHJlY2VpdmVkIC5lbCBkdXJpbmcgYmxvY2sgcGF0Y2gpXHJcbiAgICAgICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgJiYgYzIudHlwZSA9PT0gQ29tbWVudCAmJiAhYzIuZWwpIHtcclxuICAgICAgICAgICAgICAgIGMyLmVsID0gYzEuZWw7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuLy8gaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvTG9uZ2VzdF9pbmNyZWFzaW5nX3N1YnNlcXVlbmNlXHJcbmZ1bmN0aW9uIGdldFNlcXVlbmNlKGFycikge1xyXG4gICAgY29uc3QgcCA9IGFyci5zbGljZSgpO1xyXG4gICAgY29uc3QgcmVzdWx0ID0gWzBdO1xyXG4gICAgbGV0IGksIGosIHUsIHYsIGM7XHJcbiAgICBjb25zdCBsZW4gPSBhcnIubGVuZ3RoO1xyXG4gICAgZm9yIChpID0gMDsgaSA8IGxlbjsgaSsrKSB7XHJcbiAgICAgICAgY29uc3QgYXJySSA9IGFycltpXTtcclxuICAgICAgICBpZiAoYXJySSAhPT0gMCkge1xyXG4gICAgICAgICAgICBqID0gcmVzdWx0W3Jlc3VsdC5sZW5ndGggLSAxXTtcclxuICAgICAgICAgICAgaWYgKGFycltqXSA8IGFyckkpIHtcclxuICAgICAgICAgICAgICAgIHBbaV0gPSBqO1xyXG4gICAgICAgICAgICAgICAgcmVzdWx0LnB1c2goaSk7XHJcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB1ID0gMDtcclxuICAgICAgICAgICAgdiA9IHJlc3VsdC5sZW5ndGggLSAxO1xyXG4gICAgICAgICAgICB3aGlsZSAodSA8IHYpIHtcclxuICAgICAgICAgICAgICAgIGMgPSAodSArIHYpID4+IDE7XHJcbiAgICAgICAgICAgICAgICBpZiAoYXJyW3Jlc3VsdFtjXV0gPCBhcnJJKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdSA9IGMgKyAxO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdiA9IGM7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGFyckkgPCBhcnJbcmVzdWx0W3VdXSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHUgPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcFtpXSA9IHJlc3VsdFt1IC0gMV07XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXN1bHRbdV0gPSBpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgdSA9IHJlc3VsdC5sZW5ndGg7XHJcbiAgICB2ID0gcmVzdWx0W3UgLSAxXTtcclxuICAgIHdoaWxlICh1LS0gPiAwKSB7XHJcbiAgICAgICAgcmVzdWx0W3VdID0gdjtcclxuICAgICAgICB2ID0gcFt2XTtcclxuICAgIH1cclxuICAgIHJldHVybiByZXN1bHQ7XHJcbn1cblxuY29uc3QgaXNUZWxlcG9ydCA9ICh0eXBlKSA9PiB0eXBlLl9faXNUZWxlcG9ydDtcclxuY29uc3QgaXNUZWxlcG9ydERpc2FibGVkID0gKHByb3BzKSA9PiBwcm9wcyAmJiAocHJvcHMuZGlzYWJsZWQgfHwgcHJvcHMuZGlzYWJsZWQgPT09ICcnKTtcclxuY29uc3QgaXNUYXJnZXRTVkcgPSAodGFyZ2V0KSA9PiB0eXBlb2YgU1ZHRWxlbWVudCAhPT0gJ3VuZGVmaW5lZCcgJiYgdGFyZ2V0IGluc3RhbmNlb2YgU1ZHRWxlbWVudDtcclxuY29uc3QgcmVzb2x2ZVRhcmdldCA9IChwcm9wcywgc2VsZWN0KSA9PiB7XHJcbiAgICBjb25zdCB0YXJnZXRTZWxlY3RvciA9IHByb3BzICYmIHByb3BzLnRvO1xyXG4gICAgaWYgKGlzU3RyaW5nKHRhcmdldFNlbGVjdG9yKSkge1xyXG4gICAgICAgIGlmICghc2VsZWN0KSB7XHJcbiAgICAgICAgICAgIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSAmJlxyXG4gICAgICAgICAgICAgICAgd2FybihgQ3VycmVudCByZW5kZXJlciBkb2VzIG5vdCBzdXBwb3J0IHN0cmluZyB0YXJnZXQgZm9yIFRlbGVwb3J0cy4gYCArXHJcbiAgICAgICAgICAgICAgICAgICAgYChtaXNzaW5nIHF1ZXJ5U2VsZWN0b3IgcmVuZGVyZXIgb3B0aW9uKWApO1xyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHRhcmdldCA9IHNlbGVjdCh0YXJnZXRTZWxlY3Rvcik7XHJcbiAgICAgICAgICAgIGlmICghdGFyZ2V0KSB7XHJcbiAgICAgICAgICAgICAgICAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgJiZcclxuICAgICAgICAgICAgICAgICAgICB3YXJuKGBGYWlsZWQgdG8gbG9jYXRlIFRlbGVwb3J0IHRhcmdldCB3aXRoIHNlbGVjdG9yIFwiJHt0YXJnZXRTZWxlY3Rvcn1cIi4gYCArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGBOb3RlIHRoZSB0YXJnZXQgZWxlbWVudCBtdXN0IGV4aXN0IGJlZm9yZSB0aGUgY29tcG9uZW50IGlzIG1vdW50ZWQgLSBgICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYGkuZS4gdGhlIHRhcmdldCBjYW5ub3QgYmUgcmVuZGVyZWQgYnkgdGhlIGNvbXBvbmVudCBpdHNlbGYsIGFuZCBgICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYGlkZWFsbHkgc2hvdWxkIGJlIG91dHNpZGUgb2YgdGhlIGVudGlyZSBWdWUgY29tcG9uZW50IHRyZWUuYCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIHRhcmdldDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmICF0YXJnZXRTZWxlY3RvciAmJiAhaXNUZWxlcG9ydERpc2FibGVkKHByb3BzKSkge1xyXG4gICAgICAgICAgICB3YXJuKGBJbnZhbGlkIFRlbGVwb3J0IHRhcmdldDogJHt0YXJnZXRTZWxlY3Rvcn1gKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRhcmdldFNlbGVjdG9yO1xyXG4gICAgfVxyXG59O1xyXG5jb25zdCBUZWxlcG9ydEltcGwgPSB7XHJcbiAgICBfX2lzVGVsZXBvcnQ6IHRydWUsXHJcbiAgICBwcm9jZXNzKG4xLCBuMiwgY29udGFpbmVyLCBhbmNob3IsIHBhcmVudENvbXBvbmVudCwgcGFyZW50U3VzcGVuc2UsIGlzU1ZHLCBzbG90U2NvcGVJZHMsIG9wdGltaXplZCwgaW50ZXJuYWxzKSB7XHJcbiAgICAgICAgY29uc3QgeyBtYzogbW91bnRDaGlsZHJlbiwgcGM6IHBhdGNoQ2hpbGRyZW4sIHBiYzogcGF0Y2hCbG9ja0NoaWxkcmVuLCBvOiB7IGluc2VydCwgcXVlcnlTZWxlY3RvciwgY3JlYXRlVGV4dCwgY3JlYXRlQ29tbWVudCB9IH0gPSBpbnRlcm5hbHM7XHJcbiAgICAgICAgY29uc3QgZGlzYWJsZWQgPSBpc1RlbGVwb3J0RGlzYWJsZWQobjIucHJvcHMpO1xyXG4gICAgICAgIGxldCB7IHNoYXBlRmxhZywgY2hpbGRyZW4sIGR5bmFtaWNDaGlsZHJlbiB9ID0gbjI7XHJcbiAgICAgICAgLy8gIzMzMDJcclxuICAgICAgICAvLyBITVIgdXBkYXRlZCwgZm9yY2UgZnVsbCBkaWZmXHJcbiAgICAgICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSAmJiBpc0htclVwZGF0aW5nKSB7XHJcbiAgICAgICAgICAgIG9wdGltaXplZCA9IGZhbHNlO1xyXG4gICAgICAgICAgICBkeW5hbWljQ2hpbGRyZW4gPSBudWxsO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAobjEgPT0gbnVsbCkge1xyXG4gICAgICAgICAgICAvLyBpbnNlcnQgYW5jaG9ycyBpbiB0aGUgbWFpbiB2aWV3XHJcbiAgICAgICAgICAgIGNvbnN0IHBsYWNlaG9sZGVyID0gKG4yLmVsID0gKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpXHJcbiAgICAgICAgICAgICAgICA/IGNyZWF0ZUNvbW1lbnQoJ3RlbGVwb3J0IHN0YXJ0JylcclxuICAgICAgICAgICAgICAgIDogY3JlYXRlVGV4dCgnJykpO1xyXG4gICAgICAgICAgICBjb25zdCBtYWluQW5jaG9yID0gKG4yLmFuY2hvciA9IChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKVxyXG4gICAgICAgICAgICAgICAgPyBjcmVhdGVDb21tZW50KCd0ZWxlcG9ydCBlbmQnKVxyXG4gICAgICAgICAgICAgICAgOiBjcmVhdGVUZXh0KCcnKSk7XHJcbiAgICAgICAgICAgIGluc2VydChwbGFjZWhvbGRlciwgY29udGFpbmVyLCBhbmNob3IpO1xyXG4gICAgICAgICAgICBpbnNlcnQobWFpbkFuY2hvciwgY29udGFpbmVyLCBhbmNob3IpO1xyXG4gICAgICAgICAgICBjb25zdCB0YXJnZXQgPSAobjIudGFyZ2V0ID0gcmVzb2x2ZVRhcmdldChuMi5wcm9wcywgcXVlcnlTZWxlY3RvcikpO1xyXG4gICAgICAgICAgICBjb25zdCB0YXJnZXRBbmNob3IgPSAobjIudGFyZ2V0QW5jaG9yID0gY3JlYXRlVGV4dCgnJykpO1xyXG4gICAgICAgICAgICBpZiAodGFyZ2V0KSB7XHJcbiAgICAgICAgICAgICAgICBpbnNlcnQodGFyZ2V0QW5jaG9yLCB0YXJnZXQpO1xyXG4gICAgICAgICAgICAgICAgLy8gIzI2NTIgd2UgY291bGQgYmUgdGVsZXBvcnRpbmcgZnJvbSBhIG5vbi1TVkcgdHJlZSBpbnRvIGFuIFNWRyB0cmVlXHJcbiAgICAgICAgICAgICAgICBpc1NWRyA9IGlzU1ZHIHx8IGlzVGFyZ2V0U1ZHKHRhcmdldCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmICFkaXNhYmxlZCkge1xyXG4gICAgICAgICAgICAgICAgd2FybignSW52YWxpZCBUZWxlcG9ydCB0YXJnZXQgb24gbW91bnQ6JywgdGFyZ2V0LCBgKCR7dHlwZW9mIHRhcmdldH0pYCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY29uc3QgbW91bnQgPSAoY29udGFpbmVyLCBhbmNob3IpID0+IHtcclxuICAgICAgICAgICAgICAgIC8vIFRlbGVwb3J0ICphbHdheXMqIGhhcyBBcnJheSBjaGlsZHJlbi4gVGhpcyBpcyBlbmZvcmNlZCBpbiBib3RoIHRoZVxyXG4gICAgICAgICAgICAgICAgLy8gY29tcGlsZXIgYW5kIHZub2RlIGNoaWxkcmVuIG5vcm1hbGl6YXRpb24uXHJcbiAgICAgICAgICAgICAgICBpZiAoc2hhcGVGbGFnICYgMTYgLyogQVJSQVlfQ0hJTERSRU4gKi8pIHtcclxuICAgICAgICAgICAgICAgICAgICBtb3VudENoaWxkcmVuKGNoaWxkcmVuLCBjb250YWluZXIsIGFuY2hvciwgcGFyZW50Q29tcG9uZW50LCBwYXJlbnRTdXNwZW5zZSwgaXNTVkcsIHNsb3RTY29wZUlkcywgb3B0aW1pemVkKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgaWYgKGRpc2FibGVkKSB7XHJcbiAgICAgICAgICAgICAgICBtb3VudChjb250YWluZXIsIG1haW5BbmNob3IpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKHRhcmdldCkge1xyXG4gICAgICAgICAgICAgICAgbW91bnQodGFyZ2V0LCB0YXJnZXRBbmNob3IpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAvLyB1cGRhdGUgY29udGVudFxyXG4gICAgICAgICAgICBuMi5lbCA9IG4xLmVsO1xyXG4gICAgICAgICAgICBjb25zdCBtYWluQW5jaG9yID0gKG4yLmFuY2hvciA9IG4xLmFuY2hvcik7XHJcbiAgICAgICAgICAgIGNvbnN0IHRhcmdldCA9IChuMi50YXJnZXQgPSBuMS50YXJnZXQpO1xyXG4gICAgICAgICAgICBjb25zdCB0YXJnZXRBbmNob3IgPSAobjIudGFyZ2V0QW5jaG9yID0gbjEudGFyZ2V0QW5jaG9yKTtcclxuICAgICAgICAgICAgY29uc3Qgd2FzRGlzYWJsZWQgPSBpc1RlbGVwb3J0RGlzYWJsZWQobjEucHJvcHMpO1xyXG4gICAgICAgICAgICBjb25zdCBjdXJyZW50Q29udGFpbmVyID0gd2FzRGlzYWJsZWQgPyBjb250YWluZXIgOiB0YXJnZXQ7XHJcbiAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRBbmNob3IgPSB3YXNEaXNhYmxlZCA/IG1haW5BbmNob3IgOiB0YXJnZXRBbmNob3I7XHJcbiAgICAgICAgICAgIGlzU1ZHID0gaXNTVkcgfHwgaXNUYXJnZXRTVkcodGFyZ2V0KTtcclxuICAgICAgICAgICAgaWYgKGR5bmFtaWNDaGlsZHJlbikge1xyXG4gICAgICAgICAgICAgICAgLy8gZmFzdCBwYXRoIHdoZW4gdGhlIHRlbGVwb3J0IGhhcHBlbnMgdG8gYmUgYSBibG9jayByb290XHJcbiAgICAgICAgICAgICAgICBwYXRjaEJsb2NrQ2hpbGRyZW4objEuZHluYW1pY0NoaWxkcmVuLCBkeW5hbWljQ2hpbGRyZW4sIGN1cnJlbnRDb250YWluZXIsIHBhcmVudENvbXBvbmVudCwgcGFyZW50U3VzcGVuc2UsIGlzU1ZHLCBzbG90U2NvcGVJZHMpO1xyXG4gICAgICAgICAgICAgICAgLy8gZXZlbiBpbiBibG9jayB0cmVlIG1vZGUgd2UgbmVlZCB0byBtYWtlIHN1cmUgYWxsIHJvb3QtbGV2ZWwgbm9kZXNcclxuICAgICAgICAgICAgICAgIC8vIGluIHRoZSB0ZWxlcG9ydCBpbmhlcml0IHByZXZpb3VzIERPTSByZWZlcmVuY2VzIHNvIHRoYXQgdGhleSBjYW5cclxuICAgICAgICAgICAgICAgIC8vIGJlIG1vdmVkIGluIGZ1dHVyZSBwYXRjaGVzLlxyXG4gICAgICAgICAgICAgICAgdHJhdmVyc2VTdGF0aWNDaGlsZHJlbihuMSwgbjIsIHRydWUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKCFvcHRpbWl6ZWQpIHtcclxuICAgICAgICAgICAgICAgIHBhdGNoQ2hpbGRyZW4objEsIG4yLCBjdXJyZW50Q29udGFpbmVyLCBjdXJyZW50QW5jaG9yLCBwYXJlbnRDb21wb25lbnQsIHBhcmVudFN1c3BlbnNlLCBpc1NWRywgc2xvdFNjb3BlSWRzLCBmYWxzZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGRpc2FibGVkKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIXdhc0Rpc2FibGVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gZW5hYmxlZCAtPiBkaXNhYmxlZFxyXG4gICAgICAgICAgICAgICAgICAgIC8vIG1vdmUgaW50byBtYWluIGNvbnRhaW5lclxyXG4gICAgICAgICAgICAgICAgICAgIG1vdmVUZWxlcG9ydChuMiwgY29udGFpbmVyLCBtYWluQW5jaG9yLCBpbnRlcm5hbHMsIDEgLyogVE9HR0xFICovKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIC8vIHRhcmdldCBjaGFuZ2VkXHJcbiAgICAgICAgICAgICAgICBpZiAoKG4yLnByb3BzICYmIG4yLnByb3BzLnRvKSAhPT0gKG4xLnByb3BzICYmIG4xLnByb3BzLnRvKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG5leHRUYXJnZXQgPSAobjIudGFyZ2V0ID0gcmVzb2x2ZVRhcmdldChuMi5wcm9wcywgcXVlcnlTZWxlY3RvcikpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChuZXh0VGFyZ2V0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVUZWxlcG9ydChuMiwgbmV4dFRhcmdldCwgbnVsbCwgaW50ZXJuYWxzLCAwIC8qIFRBUkdFVF9DSEFOR0UgKi8pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgd2FybignSW52YWxpZCBUZWxlcG9ydCB0YXJnZXQgb24gdXBkYXRlOicsIHRhcmdldCwgYCgke3R5cGVvZiB0YXJnZXR9KWApO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKHdhc0Rpc2FibGVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gZGlzYWJsZWQgLT4gZW5hYmxlZFxyXG4gICAgICAgICAgICAgICAgICAgIC8vIG1vdmUgaW50byB0ZWxlcG9ydCB0YXJnZXRcclxuICAgICAgICAgICAgICAgICAgICBtb3ZlVGVsZXBvcnQobjIsIHRhcmdldCwgdGFyZ2V0QW5jaG9yLCBpbnRlcm5hbHMsIDEgLyogVE9HR0xFICovKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH0sXHJcbiAgICByZW1vdmUodm5vZGUsIHBhcmVudENvbXBvbmVudCwgcGFyZW50U3VzcGVuc2UsIG9wdGltaXplZCwgeyB1bTogdW5tb3VudCwgbzogeyByZW1vdmU6IGhvc3RSZW1vdmUgfSB9LCBkb1JlbW92ZSkge1xyXG4gICAgICAgIGNvbnN0IHsgc2hhcGVGbGFnLCBjaGlsZHJlbiwgYW5jaG9yLCB0YXJnZXRBbmNob3IsIHRhcmdldCwgcHJvcHMgfSA9IHZub2RlO1xyXG4gICAgICAgIGlmICh0YXJnZXQpIHtcclxuICAgICAgICAgICAgaG9zdFJlbW92ZSh0YXJnZXRBbmNob3IpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBhbiB1bm1vdW50ZWQgdGVsZXBvcnQgc2hvdWxkIGFsd2F5cyByZW1vdmUgaXRzIGNoaWxkcmVuIGlmIG5vdCBkaXNhYmxlZFxyXG4gICAgICAgIGlmIChkb1JlbW92ZSB8fCAhaXNUZWxlcG9ydERpc2FibGVkKHByb3BzKSkge1xyXG4gICAgICAgICAgICBob3N0UmVtb3ZlKGFuY2hvcik7XHJcbiAgICAgICAgICAgIGlmIChzaGFwZUZsYWcgJiAxNiAvKiBBUlJBWV9DSElMRFJFTiAqLykge1xyXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjaGlsZHJlbi5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGNoaWxkID0gY2hpbGRyZW5baV07XHJcbiAgICAgICAgICAgICAgICAgICAgdW5tb3VudChjaGlsZCwgcGFyZW50Q29tcG9uZW50LCBwYXJlbnRTdXNwZW5zZSwgdHJ1ZSwgISFjaGlsZC5keW5hbWljQ2hpbGRyZW4pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuICAgIG1vdmU6IG1vdmVUZWxlcG9ydCxcclxuICAgIGh5ZHJhdGU6IGh5ZHJhdGVUZWxlcG9ydFxyXG59O1xyXG5mdW5jdGlvbiBtb3ZlVGVsZXBvcnQodm5vZGUsIGNvbnRhaW5lciwgcGFyZW50QW5jaG9yLCB7IG86IHsgaW5zZXJ0IH0sIG06IG1vdmUgfSwgbW92ZVR5cGUgPSAyIC8qIFJFT1JERVIgKi8pIHtcclxuICAgIC8vIG1vdmUgdGFyZ2V0IGFuY2hvciBpZiB0aGlzIGlzIGEgdGFyZ2V0IGNoYW5nZS5cclxuICAgIGlmIChtb3ZlVHlwZSA9PT0gMCAvKiBUQVJHRVRfQ0hBTkdFICovKSB7XHJcbiAgICAgICAgaW5zZXJ0KHZub2RlLnRhcmdldEFuY2hvciwgY29udGFpbmVyLCBwYXJlbnRBbmNob3IpO1xyXG4gICAgfVxyXG4gICAgY29uc3QgeyBlbCwgYW5jaG9yLCBzaGFwZUZsYWcsIGNoaWxkcmVuLCBwcm9wcyB9ID0gdm5vZGU7XHJcbiAgICBjb25zdCBpc1Jlb3JkZXIgPSBtb3ZlVHlwZSA9PT0gMiAvKiBSRU9SREVSICovO1xyXG4gICAgLy8gbW92ZSBtYWluIHZpZXcgYW5jaG9yIGlmIHRoaXMgaXMgYSByZS1vcmRlci5cclxuICAgIGlmIChpc1Jlb3JkZXIpIHtcclxuICAgICAgICBpbnNlcnQoZWwsIGNvbnRhaW5lciwgcGFyZW50QW5jaG9yKTtcclxuICAgIH1cclxuICAgIC8vIGlmIHRoaXMgaXMgYSByZS1vcmRlciBhbmQgdGVsZXBvcnQgaXMgZW5hYmxlZCAoY29udGVudCBpcyBpbiB0YXJnZXQpXHJcbiAgICAvLyBkbyBub3QgbW92ZSBjaGlsZHJlbi4gU28gdGhlIG9wcG9zaXRlIGlzOiBvbmx5IG1vdmUgY2hpbGRyZW4gaWYgdGhpc1xyXG4gICAgLy8gaXMgbm90IGEgcmVvcmRlciwgb3IgdGhlIHRlbGVwb3J0IGlzIGRpc2FibGVkXHJcbiAgICBpZiAoIWlzUmVvcmRlciB8fCBpc1RlbGVwb3J0RGlzYWJsZWQocHJvcHMpKSB7XHJcbiAgICAgICAgLy8gVGVsZXBvcnQgaGFzIGVpdGhlciBBcnJheSBjaGlsZHJlbiBvciBubyBjaGlsZHJlbi5cclxuICAgICAgICBpZiAoc2hhcGVGbGFnICYgMTYgLyogQVJSQVlfQ0hJTERSRU4gKi8pIHtcclxuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjaGlsZHJlbi5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgbW92ZShjaGlsZHJlbltpXSwgY29udGFpbmVyLCBwYXJlbnRBbmNob3IsIDIgLyogUkVPUkRFUiAqLyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICAvLyBtb3ZlIG1haW4gdmlldyBhbmNob3IgaWYgdGhpcyBpcyBhIHJlLW9yZGVyLlxyXG4gICAgaWYgKGlzUmVvcmRlcikge1xyXG4gICAgICAgIGluc2VydChhbmNob3IsIGNvbnRhaW5lciwgcGFyZW50QW5jaG9yKTtcclxuICAgIH1cclxufVxyXG5mdW5jdGlvbiBoeWRyYXRlVGVsZXBvcnQobm9kZSwgdm5vZGUsIHBhcmVudENvbXBvbmVudCwgcGFyZW50U3VzcGVuc2UsIHNsb3RTY29wZUlkcywgb3B0aW1pemVkLCB7IG86IHsgbmV4dFNpYmxpbmcsIHBhcmVudE5vZGUsIHF1ZXJ5U2VsZWN0b3IgfSB9LCBoeWRyYXRlQ2hpbGRyZW4pIHtcclxuICAgIGNvbnN0IHRhcmdldCA9ICh2bm9kZS50YXJnZXQgPSByZXNvbHZlVGFyZ2V0KHZub2RlLnByb3BzLCBxdWVyeVNlbGVjdG9yKSk7XHJcbiAgICBpZiAodGFyZ2V0KSB7XHJcbiAgICAgICAgLy8gaWYgbXVsdGlwbGUgdGVsZXBvcnRzIHJlbmRlcmVkIHRvIHRoZSBzYW1lIHRhcmdldCBlbGVtZW50LCB3ZSBuZWVkIHRvXHJcbiAgICAgICAgLy8gcGljayB1cCBmcm9tIHdoZXJlIHRoZSBsYXN0IHRlbGVwb3J0IGZpbmlzaGVkIGluc3RlYWQgb2YgdGhlIGZpcnN0IG5vZGVcclxuICAgICAgICBjb25zdCB0YXJnZXROb2RlID0gdGFyZ2V0Ll9scGEgfHwgdGFyZ2V0LmZpcnN0Q2hpbGQ7XHJcbiAgICAgICAgaWYgKHZub2RlLnNoYXBlRmxhZyAmIDE2IC8qIEFSUkFZX0NISUxEUkVOICovKSB7XHJcbiAgICAgICAgICAgIGlmIChpc1RlbGVwb3J0RGlzYWJsZWQodm5vZGUucHJvcHMpKSB7XHJcbiAgICAgICAgICAgICAgICB2bm9kZS5hbmNob3IgPSBoeWRyYXRlQ2hpbGRyZW4obmV4dFNpYmxpbmcobm9kZSksIHZub2RlLCBwYXJlbnROb2RlKG5vZGUpLCBwYXJlbnRDb21wb25lbnQsIHBhcmVudFN1c3BlbnNlLCBzbG90U2NvcGVJZHMsIG9wdGltaXplZCk7XHJcbiAgICAgICAgICAgICAgICB2bm9kZS50YXJnZXRBbmNob3IgPSB0YXJnZXROb2RlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdm5vZGUuYW5jaG9yID0gbmV4dFNpYmxpbmcobm9kZSk7XHJcbiAgICAgICAgICAgICAgICB2bm9kZS50YXJnZXRBbmNob3IgPSBoeWRyYXRlQ2hpbGRyZW4odGFyZ2V0Tm9kZSwgdm5vZGUsIHRhcmdldCwgcGFyZW50Q29tcG9uZW50LCBwYXJlbnRTdXNwZW5zZSwgc2xvdFNjb3BlSWRzLCBvcHRpbWl6ZWQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRhcmdldC5fbHBhID1cclxuICAgICAgICAgICAgICAgIHZub2RlLnRhcmdldEFuY2hvciAmJiBuZXh0U2libGluZyh2bm9kZS50YXJnZXRBbmNob3IpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiB2bm9kZS5hbmNob3IgJiYgbmV4dFNpYmxpbmcodm5vZGUuYW5jaG9yKTtcclxufVxyXG4vLyBGb3JjZS1jYXN0ZWQgcHVibGljIHR5cGluZyBmb3IgaCBhbmQgVFNYIHByb3BzIGluZmVyZW5jZVxyXG5jb25zdCBUZWxlcG9ydCA9IFRlbGVwb3J0SW1wbDtcblxuY29uc3QgQ09NUE9ORU5UUyA9ICdjb21wb25lbnRzJztcclxuY29uc3QgRElSRUNUSVZFUyA9ICdkaXJlY3RpdmVzJztcclxuLyoqXHJcbiAqIEBwcml2YXRlXHJcbiAqL1xyXG5mdW5jdGlvbiByZXNvbHZlQ29tcG9uZW50KG5hbWUsIG1heWJlU2VsZlJlZmVyZW5jZSkge1xyXG4gICAgcmV0dXJuIHJlc29sdmVBc3NldChDT01QT05FTlRTLCBuYW1lLCB0cnVlLCBtYXliZVNlbGZSZWZlcmVuY2UpIHx8IG5hbWU7XHJcbn1cclxuY29uc3QgTlVMTF9EWU5BTUlDX0NPTVBPTkVOVCA9IFN5bWJvbCgpO1xyXG4vKipcclxuICogQHByaXZhdGVcclxuICovXHJcbmZ1bmN0aW9uIHJlc29sdmVEeW5hbWljQ29tcG9uZW50KGNvbXBvbmVudCkge1xyXG4gICAgaWYgKGlzU3RyaW5nKGNvbXBvbmVudCkpIHtcclxuICAgICAgICByZXR1cm4gcmVzb2x2ZUFzc2V0KENPTVBPTkVOVFMsIGNvbXBvbmVudCwgZmFsc2UpIHx8IGNvbXBvbmVudDtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICAgIC8vIGludmFsaWQgdHlwZXMgd2lsbCBmYWxsdGhyb3VnaCB0byBjcmVhdGVWTm9kZSBhbmQgcmFpc2Ugd2FybmluZ1xyXG4gICAgICAgIHJldHVybiAoY29tcG9uZW50IHx8IE5VTExfRFlOQU1JQ19DT01QT05FTlQpO1xyXG4gICAgfVxyXG59XHJcbi8qKlxyXG4gKiBAcHJpdmF0ZVxyXG4gKi9cclxuZnVuY3Rpb24gcmVzb2x2ZURpcmVjdGl2ZShuYW1lKSB7XHJcbiAgICByZXR1cm4gcmVzb2x2ZUFzc2V0KERJUkVDVElWRVMsIG5hbWUpO1xyXG59XHJcbi8vIGltcGxlbWVudGF0aW9uXHJcbmZ1bmN0aW9uIHJlc29sdmVBc3NldCh0eXBlLCBuYW1lLCB3YXJuTWlzc2luZyA9IHRydWUsIG1heWJlU2VsZlJlZmVyZW5jZSA9IGZhbHNlKSB7XHJcbiAgICBjb25zdCBpbnN0YW5jZSA9IGN1cnJlbnRSZW5kZXJpbmdJbnN0YW5jZSB8fCBjdXJyZW50SW5zdGFuY2U7XHJcbiAgICBpZiAoaW5zdGFuY2UpIHtcclxuICAgICAgICBjb25zdCBDb21wb25lbnQgPSBpbnN0YW5jZS50eXBlO1xyXG4gICAgICAgIC8vIGV4cGxpY2l0IHNlbGYgbmFtZSBoYXMgaGlnaGVzdCBwcmlvcml0eVxyXG4gICAgICAgIGlmICh0eXBlID09PSBDT01QT05FTlRTKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHNlbGZOYW1lID0gZ2V0Q29tcG9uZW50TmFtZShDb21wb25lbnQpO1xyXG4gICAgICAgICAgICBpZiAoc2VsZk5hbWUgJiZcclxuICAgICAgICAgICAgICAgIChzZWxmTmFtZSA9PT0gbmFtZSB8fFxyXG4gICAgICAgICAgICAgICAgICAgIHNlbGZOYW1lID09PSBjYW1lbGl6ZShuYW1lKSB8fFxyXG4gICAgICAgICAgICAgICAgICAgIHNlbGZOYW1lID09PSBjYXBpdGFsaXplKGNhbWVsaXplKG5hbWUpKSkpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBDb21wb25lbnQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgcmVzID0gXHJcbiAgICAgICAgLy8gbG9jYWwgcmVnaXN0cmF0aW9uXHJcbiAgICAgICAgLy8gY2hlY2sgaW5zdGFuY2VbdHlwZV0gZmlyc3Qgd2hpY2ggaXMgcmVzb2x2ZWQgZm9yIG9wdGlvbnMgQVBJXHJcbiAgICAgICAgcmVzb2x2ZShpbnN0YW5jZVt0eXBlXSB8fCBDb21wb25lbnRbdHlwZV0sIG5hbWUpIHx8XHJcbiAgICAgICAgICAgIC8vIGdsb2JhbCByZWdpc3RyYXRpb25cclxuICAgICAgICAgICAgcmVzb2x2ZShpbnN0YW5jZS5hcHBDb250ZXh0W3R5cGVdLCBuYW1lKTtcclxuICAgICAgICBpZiAoIXJlcyAmJiBtYXliZVNlbGZSZWZlcmVuY2UpIHtcclxuICAgICAgICAgICAgLy8gZmFsbGJhY2sgdG8gaW1wbGljaXQgc2VsZi1yZWZlcmVuY2VcclxuICAgICAgICAgICAgcmV0dXJuIENvbXBvbmVudDtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSAmJiB3YXJuTWlzc2luZyAmJiAhcmVzKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGV4dHJhID0gdHlwZSA9PT0gQ09NUE9ORU5UU1xyXG4gICAgICAgICAgICAgICAgPyBgXFxuSWYgdGhpcyBpcyBhIG5hdGl2ZSBjdXN0b20gZWxlbWVudCwgbWFrZSBzdXJlIHRvIGV4Y2x1ZGUgaXQgZnJvbSBgICtcclxuICAgICAgICAgICAgICAgICAgICBgY29tcG9uZW50IHJlc29sdXRpb24gdmlhIGNvbXBpbGVyT3B0aW9ucy5pc0N1c3RvbUVsZW1lbnQuYFxyXG4gICAgICAgICAgICAgICAgOiBgYDtcclxuICAgICAgICAgICAgd2FybihgRmFpbGVkIHRvIHJlc29sdmUgJHt0eXBlLnNsaWNlKDAsIC0xKX06ICR7bmFtZX0ke2V4dHJhfWApO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gcmVzO1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpKSB7XHJcbiAgICAgICAgd2FybihgcmVzb2x2ZSR7Y2FwaXRhbGl6ZSh0eXBlLnNsaWNlKDAsIC0xKSl9IGAgK1xyXG4gICAgICAgICAgICBgY2FuIG9ubHkgYmUgdXNlZCBpbiByZW5kZXIoKSBvciBzZXR1cCgpLmApO1xyXG4gICAgfVxyXG59XHJcbmZ1bmN0aW9uIHJlc29sdmUocmVnaXN0cnksIG5hbWUpIHtcclxuICAgIHJldHVybiAocmVnaXN0cnkgJiZcclxuICAgICAgICAocmVnaXN0cnlbbmFtZV0gfHxcclxuICAgICAgICAgICAgcmVnaXN0cnlbY2FtZWxpemUobmFtZSldIHx8XHJcbiAgICAgICAgICAgIHJlZ2lzdHJ5W2NhcGl0YWxpemUoY2FtZWxpemUobmFtZSkpXSkpO1xyXG59XG5cbmNvbnN0IEZyYWdtZW50ID0gU3ltYm9sKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSA/ICdGcmFnbWVudCcgOiB1bmRlZmluZWQpO1xyXG5jb25zdCBUZXh0ID0gU3ltYm9sKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSA/ICdUZXh0JyA6IHVuZGVmaW5lZCk7XHJcbmNvbnN0IENvbW1lbnQgPSBTeW1ib2woKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpID8gJ0NvbW1lbnQnIDogdW5kZWZpbmVkKTtcclxuY29uc3QgU3RhdGljID0gU3ltYm9sKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSA/ICdTdGF0aWMnIDogdW5kZWZpbmVkKTtcclxuLy8gU2luY2Ugdi1pZiBhbmQgdi1mb3IgYXJlIHRoZSB0d28gcG9zc2libGUgd2F5cyBub2RlIHN0cnVjdHVyZSBjYW4gZHluYW1pY2FsbHlcclxuLy8gY2hhbmdlLCBvbmNlIHdlIGNvbnNpZGVyIHYtaWYgYnJhbmNoZXMgYW5kIGVhY2ggdi1mb3IgZnJhZ21lbnQgYSBibG9jaywgd2VcclxuLy8gY2FuIGRpdmlkZSBhIHRlbXBsYXRlIGludG8gbmVzdGVkIGJsb2NrcywgYW5kIHdpdGhpbiBlYWNoIGJsb2NrIHRoZSBub2RlXHJcbi8vIHN0cnVjdHVyZSB3b3VsZCBiZSBzdGFibGUuIFRoaXMgYWxsb3dzIHVzIHRvIHNraXAgbW9zdCBjaGlsZHJlbiBkaWZmaW5nXHJcbi8vIGFuZCBvbmx5IHdvcnJ5IGFib3V0IHRoZSBkeW5hbWljIG5vZGVzIChpbmRpY2F0ZWQgYnkgcGF0Y2ggZmxhZ3MpLlxyXG5jb25zdCBibG9ja1N0YWNrID0gW107XHJcbmxldCBjdXJyZW50QmxvY2sgPSBudWxsO1xyXG4vKipcclxuICogT3BlbiBhIGJsb2NrLlxyXG4gKiBUaGlzIG11c3QgYmUgY2FsbGVkIGJlZm9yZSBgY3JlYXRlQmxvY2tgLiBJdCBjYW5ub3QgYmUgcGFydCBvZiBgY3JlYXRlQmxvY2tgXHJcbiAqIGJlY2F1c2UgdGhlIGNoaWxkcmVuIG9mIHRoZSBibG9jayBhcmUgZXZhbHVhdGVkIGJlZm9yZSBgY3JlYXRlQmxvY2tgIGl0c2VsZlxyXG4gKiBpcyBjYWxsZWQuIFRoZSBnZW5lcmF0ZWQgY29kZSB0eXBpY2FsbHkgbG9va3MgbGlrZSB0aGlzOlxyXG4gKlxyXG4gKiBgYGBqc1xyXG4gKiBmdW5jdGlvbiByZW5kZXIoKSB7XHJcbiAqICAgcmV0dXJuIChvcGVuQmxvY2soKSxjcmVhdGVCbG9jaygnZGl2JywgbnVsbCwgWy4uLl0pKVxyXG4gKiB9XHJcbiAqIGBgYFxyXG4gKiBkaXNhYmxlVHJhY2tpbmcgaXMgdHJ1ZSB3aGVuIGNyZWF0aW5nIGEgdi1mb3IgZnJhZ21lbnQgYmxvY2ssIHNpbmNlIGEgdi1mb3JcclxuICogZnJhZ21lbnQgYWx3YXlzIGRpZmZzIGl0cyBjaGlsZHJlbi5cclxuICpcclxuICogQHByaXZhdGVcclxuICovXHJcbmZ1bmN0aW9uIG9wZW5CbG9jayhkaXNhYmxlVHJhY2tpbmcgPSBmYWxzZSkge1xyXG4gICAgYmxvY2tTdGFjay5wdXNoKChjdXJyZW50QmxvY2sgPSBkaXNhYmxlVHJhY2tpbmcgPyBudWxsIDogW10pKTtcclxufVxyXG5mdW5jdGlvbiBjbG9zZUJsb2NrKCkge1xyXG4gICAgYmxvY2tTdGFjay5wb3AoKTtcclxuICAgIGN1cnJlbnRCbG9jayA9IGJsb2NrU3RhY2tbYmxvY2tTdGFjay5sZW5ndGggLSAxXSB8fCBudWxsO1xyXG59XHJcbi8vIFdoZXRoZXIgd2Ugc2hvdWxkIGJlIHRyYWNraW5nIGR5bmFtaWMgY2hpbGQgbm9kZXMgaW5zaWRlIGEgYmxvY2suXHJcbi8vIE9ubHkgdHJhY2tzIHdoZW4gdGhpcyB2YWx1ZSBpcyA+IDBcclxuLy8gV2UgYXJlIG5vdCB1c2luZyBhIHNpbXBsZSBib29sZWFuIGJlY2F1c2UgdGhpcyB2YWx1ZSBtYXkgbmVlZCB0byBiZVxyXG4vLyBpbmNyZW1lbnRlZC9kZWNyZW1lbnRlZCBieSBuZXN0ZWQgdXNhZ2Ugb2Ygdi1vbmNlIChzZWUgYmVsb3cpXHJcbmxldCBpc0Jsb2NrVHJlZUVuYWJsZWQgPSAxO1xyXG4vKipcclxuICogQmxvY2sgdHJhY2tpbmcgc29tZXRpbWVzIG5lZWRzIHRvIGJlIGRpc2FibGVkLCBmb3IgZXhhbXBsZSBkdXJpbmcgdGhlXHJcbiAqIGNyZWF0aW9uIG9mIGEgdHJlZSB0aGF0IG5lZWRzIHRvIGJlIGNhY2hlZCBieSB2LW9uY2UuIFRoZSBjb21waWxlciBnZW5lcmF0ZXNcclxuICogY29kZSBsaWtlIHRoaXM6XHJcbiAqXHJcbiAqIGBgYCBqc1xyXG4gKiBfY2FjaGVbMV0gfHwgKFxyXG4gKiAgIHNldEJsb2NrVHJhY2tpbmcoLTEpLFxyXG4gKiAgIF9jYWNoZVsxXSA9IGNyZWF0ZVZOb2RlKC4uLiksXHJcbiAqICAgc2V0QmxvY2tUcmFja2luZygxKSxcclxuICogICBfY2FjaGVbMV1cclxuICogKVxyXG4gKiBgYGBcclxuICpcclxuICogQHByaXZhdGVcclxuICovXHJcbmZ1bmN0aW9uIHNldEJsb2NrVHJhY2tpbmcodmFsdWUpIHtcclxuICAgIGlzQmxvY2tUcmVlRW5hYmxlZCArPSB2YWx1ZTtcclxufVxyXG5mdW5jdGlvbiBzZXR1cEJsb2NrKHZub2RlKSB7XHJcbiAgICAvLyBzYXZlIGN1cnJlbnQgYmxvY2sgY2hpbGRyZW4gb24gdGhlIGJsb2NrIHZub2RlXHJcbiAgICB2bm9kZS5keW5hbWljQ2hpbGRyZW4gPVxyXG4gICAgICAgIGlzQmxvY2tUcmVlRW5hYmxlZCA+IDAgPyBjdXJyZW50QmxvY2sgfHwgRU1QVFlfQVJSIDogbnVsbDtcclxuICAgIC8vIGNsb3NlIGJsb2NrXHJcbiAgICBjbG9zZUJsb2NrKCk7XHJcbiAgICAvLyBhIGJsb2NrIGlzIGFsd2F5cyBnb2luZyB0byBiZSBwYXRjaGVkLCBzbyB0cmFjayBpdCBhcyBhIGNoaWxkIG9mIGl0c1xyXG4gICAgLy8gcGFyZW50IGJsb2NrXHJcbiAgICBpZiAoaXNCbG9ja1RyZWVFbmFibGVkID4gMCAmJiBjdXJyZW50QmxvY2spIHtcclxuICAgICAgICBjdXJyZW50QmxvY2sucHVzaCh2bm9kZSk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gdm5vZGU7XHJcbn1cclxuLyoqXHJcbiAqIEBwcml2YXRlXHJcbiAqL1xyXG5mdW5jdGlvbiBjcmVhdGVFbGVtZW50QmxvY2sodHlwZSwgcHJvcHMsIGNoaWxkcmVuLCBwYXRjaEZsYWcsIGR5bmFtaWNQcm9wcywgc2hhcGVGbGFnKSB7XHJcbiAgICByZXR1cm4gc2V0dXBCbG9jayhjcmVhdGVCYXNlVk5vZGUodHlwZSwgcHJvcHMsIGNoaWxkcmVuLCBwYXRjaEZsYWcsIGR5bmFtaWNQcm9wcywgc2hhcGVGbGFnLCB0cnVlIC8qIGlzQmxvY2sgKi8pKTtcclxufVxyXG4vKipcclxuICogQ3JlYXRlIGEgYmxvY2sgcm9vdCB2bm9kZS4gVGFrZXMgdGhlIHNhbWUgZXhhY3QgYXJndW1lbnRzIGFzIGBjcmVhdGVWTm9kZWAuXHJcbiAqIEEgYmxvY2sgcm9vdCBrZWVwcyB0cmFjayBvZiBkeW5hbWljIG5vZGVzIHdpdGhpbiB0aGUgYmxvY2sgaW4gdGhlXHJcbiAqIGBkeW5hbWljQ2hpbGRyZW5gIGFycmF5LlxyXG4gKlxyXG4gKiBAcHJpdmF0ZVxyXG4gKi9cclxuZnVuY3Rpb24gY3JlYXRlQmxvY2sodHlwZSwgcHJvcHMsIGNoaWxkcmVuLCBwYXRjaEZsYWcsIGR5bmFtaWNQcm9wcykge1xyXG4gICAgcmV0dXJuIHNldHVwQmxvY2soY3JlYXRlVk5vZGUodHlwZSwgcHJvcHMsIGNoaWxkcmVuLCBwYXRjaEZsYWcsIGR5bmFtaWNQcm9wcywgdHJ1ZSAvKiBpc0Jsb2NrOiBwcmV2ZW50IGEgYmxvY2sgZnJvbSB0cmFja2luZyBpdHNlbGYgKi8pKTtcclxufVxyXG5mdW5jdGlvbiBpc1ZOb2RlKHZhbHVlKSB7XHJcbiAgICByZXR1cm4gdmFsdWUgPyB2YWx1ZS5fX3ZfaXNWTm9kZSA9PT0gdHJ1ZSA6IGZhbHNlO1xyXG59XHJcbmZ1bmN0aW9uIGlzU2FtZVZOb2RlVHlwZShuMSwgbjIpIHtcclxuICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgJiZcclxuICAgICAgICBuMi5zaGFwZUZsYWcgJiA2IC8qIENPTVBPTkVOVCAqLyAmJlxyXG4gICAgICAgIGhtckRpcnR5Q29tcG9uZW50cy5oYXMobjIudHlwZSkpIHtcclxuICAgICAgICAvLyBITVIgb25seTogaWYgdGhlIGNvbXBvbmVudCBoYXMgYmVlbiBob3QtdXBkYXRlZCwgZm9yY2UgYSByZWxvYWQuXHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIG4xLnR5cGUgPT09IG4yLnR5cGUgJiYgbjEua2V5ID09PSBuMi5rZXk7XHJcbn1cclxubGV0IHZub2RlQXJnc1RyYW5zZm9ybWVyO1xyXG4vKipcclxuICogSW50ZXJuYWwgQVBJIGZvciByZWdpc3RlcmluZyBhbiBhcmd1bWVudHMgdHJhbnNmb3JtIGZvciBjcmVhdGVWTm9kZVxyXG4gKiB1c2VkIGZvciBjcmVhdGluZyBzdHVicyBpbiB0aGUgdGVzdC11dGlsc1xyXG4gKiBJdCBpcyAqaW50ZXJuYWwqIGJ1dCBuZWVkcyB0byBiZSBleHBvc2VkIGZvciB0ZXN0LXV0aWxzIHRvIHBpY2sgdXAgcHJvcGVyXHJcbiAqIHR5cGluZ3NcclxuICovXHJcbmZ1bmN0aW9uIHRyYW5zZm9ybVZOb2RlQXJncyh0cmFuc2Zvcm1lcikge1xyXG4gICAgdm5vZGVBcmdzVHJhbnNmb3JtZXIgPSB0cmFuc2Zvcm1lcjtcclxufVxyXG5jb25zdCBjcmVhdGVWTm9kZVdpdGhBcmdzVHJhbnNmb3JtID0gKC4uLmFyZ3MpID0+IHtcclxuICAgIHJldHVybiBfY3JlYXRlVk5vZGUoLi4uKHZub2RlQXJnc1RyYW5zZm9ybWVyXHJcbiAgICAgICAgPyB2bm9kZUFyZ3NUcmFuc2Zvcm1lcihhcmdzLCBjdXJyZW50UmVuZGVyaW5nSW5zdGFuY2UpXHJcbiAgICAgICAgOiBhcmdzKSk7XHJcbn07XHJcbmNvbnN0IEludGVybmFsT2JqZWN0S2V5ID0gYF9fdkludGVybmFsYDtcclxuY29uc3Qgbm9ybWFsaXplS2V5ID0gKHsga2V5IH0pID0+IGtleSAhPSBudWxsID8ga2V5IDogbnVsbDtcclxuY29uc3Qgbm9ybWFsaXplUmVmID0gKHsgcmVmLCByZWZfa2V5LCByZWZfZm9yIH0pID0+IHtcclxuICAgIHJldHVybiAocmVmICE9IG51bGxcclxuICAgICAgICA/IGlzU3RyaW5nKHJlZikgfHwgaXNSZWYocmVmKSB8fCBpc0Z1bmN0aW9uKHJlZilcclxuICAgICAgICAgICAgPyB7IGk6IGN1cnJlbnRSZW5kZXJpbmdJbnN0YW5jZSwgcjogcmVmLCBrOiByZWZfa2V5LCBmOiAhIXJlZl9mb3IgfVxyXG4gICAgICAgICAgICA6IHJlZlxyXG4gICAgICAgIDogbnVsbCk7XHJcbn07XHJcbmZ1bmN0aW9uIGNyZWF0ZUJhc2VWTm9kZSh0eXBlLCBwcm9wcyA9IG51bGwsIGNoaWxkcmVuID0gbnVsbCwgcGF0Y2hGbGFnID0gMCwgZHluYW1pY1Byb3BzID0gbnVsbCwgc2hhcGVGbGFnID0gdHlwZSA9PT0gRnJhZ21lbnQgPyAwIDogMSAvKiBFTEVNRU5UICovLCBpc0Jsb2NrTm9kZSA9IGZhbHNlLCBuZWVkRnVsbENoaWxkcmVuTm9ybWFsaXphdGlvbiA9IGZhbHNlKSB7XHJcbiAgICBjb25zdCB2bm9kZSA9IHtcclxuICAgICAgICBfX3ZfaXNWTm9kZTogdHJ1ZSxcclxuICAgICAgICBfX3Zfc2tpcDogdHJ1ZSxcclxuICAgICAgICB0eXBlLFxyXG4gICAgICAgIHByb3BzLFxyXG4gICAgICAgIGtleTogcHJvcHMgJiYgbm9ybWFsaXplS2V5KHByb3BzKSxcclxuICAgICAgICByZWY6IHByb3BzICYmIG5vcm1hbGl6ZVJlZihwcm9wcyksXHJcbiAgICAgICAgc2NvcGVJZDogY3VycmVudFNjb3BlSWQsXHJcbiAgICAgICAgc2xvdFNjb3BlSWRzOiBudWxsLFxyXG4gICAgICAgIGNoaWxkcmVuLFxyXG4gICAgICAgIGNvbXBvbmVudDogbnVsbCxcclxuICAgICAgICBzdXNwZW5zZTogbnVsbCxcclxuICAgICAgICBzc0NvbnRlbnQ6IG51bGwsXHJcbiAgICAgICAgc3NGYWxsYmFjazogbnVsbCxcclxuICAgICAgICBkaXJzOiBudWxsLFxyXG4gICAgICAgIHRyYW5zaXRpb246IG51bGwsXHJcbiAgICAgICAgZWw6IG51bGwsXHJcbiAgICAgICAgYW5jaG9yOiBudWxsLFxyXG4gICAgICAgIHRhcmdldDogbnVsbCxcclxuICAgICAgICB0YXJnZXRBbmNob3I6IG51bGwsXHJcbiAgICAgICAgc3RhdGljQ291bnQ6IDAsXHJcbiAgICAgICAgc2hhcGVGbGFnLFxyXG4gICAgICAgIHBhdGNoRmxhZyxcclxuICAgICAgICBkeW5hbWljUHJvcHMsXHJcbiAgICAgICAgZHluYW1pY0NoaWxkcmVuOiBudWxsLFxyXG4gICAgICAgIGFwcENvbnRleHQ6IG51bGxcclxuICAgIH07XHJcbiAgICBpZiAobmVlZEZ1bGxDaGlsZHJlbk5vcm1hbGl6YXRpb24pIHtcclxuICAgICAgICBub3JtYWxpemVDaGlsZHJlbih2bm9kZSwgY2hpbGRyZW4pO1xyXG4gICAgICAgIC8vIG5vcm1hbGl6ZSBzdXNwZW5zZSBjaGlsZHJlblxyXG4gICAgICAgIGlmIChzaGFwZUZsYWcgJiAxMjggLyogU1VTUEVOU0UgKi8pIHtcclxuICAgICAgICAgICAgdHlwZS5ub3JtYWxpemUodm5vZGUpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGVsc2UgaWYgKGNoaWxkcmVuKSB7XHJcbiAgICAgICAgLy8gY29tcGlsZWQgZWxlbWVudCB2bm9kZSAtIGlmIGNoaWxkcmVuIGlzIHBhc3NlZCwgb25seSBwb3NzaWJsZSB0eXBlcyBhcmVcclxuICAgICAgICAvLyBzdHJpbmcgb3IgQXJyYXkuXHJcbiAgICAgICAgdm5vZGUuc2hhcGVGbGFnIHw9IGlzU3RyaW5nKGNoaWxkcmVuKVxyXG4gICAgICAgICAgICA/IDggLyogVEVYVF9DSElMRFJFTiAqL1xyXG4gICAgICAgICAgICA6IDE2IC8qIEFSUkFZX0NISUxEUkVOICovO1xyXG4gICAgfVxyXG4gICAgLy8gdmFsaWRhdGUga2V5XHJcbiAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmIHZub2RlLmtleSAhPT0gdm5vZGUua2V5KSB7XHJcbiAgICAgICAgd2FybihgVk5vZGUgY3JlYXRlZCB3aXRoIGludmFsaWQga2V5IChOYU4pLiBWTm9kZSB0eXBlOmAsIHZub2RlLnR5cGUpO1xyXG4gICAgfVxyXG4gICAgLy8gdHJhY2sgdm5vZGUgZm9yIGJsb2NrIHRyZWVcclxuICAgIGlmIChpc0Jsb2NrVHJlZUVuYWJsZWQgPiAwICYmXHJcbiAgICAgICAgLy8gYXZvaWQgYSBibG9jayBub2RlIGZyb20gdHJhY2tpbmcgaXRzZWxmXHJcbiAgICAgICAgIWlzQmxvY2tOb2RlICYmXHJcbiAgICAgICAgLy8gaGFzIGN1cnJlbnQgcGFyZW50IGJsb2NrXHJcbiAgICAgICAgY3VycmVudEJsb2NrICYmXHJcbiAgICAgICAgLy8gcHJlc2VuY2Ugb2YgYSBwYXRjaCBmbGFnIGluZGljYXRlcyB0aGlzIG5vZGUgbmVlZHMgcGF0Y2hpbmcgb24gdXBkYXRlcy5cclxuICAgICAgICAvLyBjb21wb25lbnQgbm9kZXMgYWxzbyBzaG91bGQgYWx3YXlzIGJlIHBhdGNoZWQsIGJlY2F1c2UgZXZlbiBpZiB0aGVcclxuICAgICAgICAvLyBjb21wb25lbnQgZG9lc24ndCBuZWVkIHRvIHVwZGF0ZSwgaXQgbmVlZHMgdG8gcGVyc2lzdCB0aGUgaW5zdGFuY2Ugb24gdG9cclxuICAgICAgICAvLyB0aGUgbmV4dCB2bm9kZSBzbyB0aGF0IGl0IGNhbiBiZSBwcm9wZXJseSB1bm1vdW50ZWQgbGF0ZXIuXHJcbiAgICAgICAgKHZub2RlLnBhdGNoRmxhZyA+IDAgfHwgc2hhcGVGbGFnICYgNiAvKiBDT01QT05FTlQgKi8pICYmXHJcbiAgICAgICAgLy8gdGhlIEVWRU5UUyBmbGFnIGlzIG9ubHkgZm9yIGh5ZHJhdGlvbiBhbmQgaWYgaXQgaXMgdGhlIG9ubHkgZmxhZywgdGhlXHJcbiAgICAgICAgLy8gdm5vZGUgc2hvdWxkIG5vdCBiZSBjb25zaWRlcmVkIGR5bmFtaWMgZHVlIHRvIGhhbmRsZXIgY2FjaGluZy5cclxuICAgICAgICB2bm9kZS5wYXRjaEZsYWcgIT09IDMyIC8qIEhZRFJBVEVfRVZFTlRTICovKSB7XHJcbiAgICAgICAgY3VycmVudEJsb2NrLnB1c2godm5vZGUpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHZub2RlO1xyXG59XHJcbmNvbnN0IGNyZWF0ZVZOb2RlID0gKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSA/IGNyZWF0ZVZOb2RlV2l0aEFyZ3NUcmFuc2Zvcm0gOiBfY3JlYXRlVk5vZGUpO1xyXG5mdW5jdGlvbiBfY3JlYXRlVk5vZGUodHlwZSwgcHJvcHMgPSBudWxsLCBjaGlsZHJlbiA9IG51bGwsIHBhdGNoRmxhZyA9IDAsIGR5bmFtaWNQcm9wcyA9IG51bGwsIGlzQmxvY2tOb2RlID0gZmFsc2UpIHtcclxuICAgIGlmICghdHlwZSB8fCB0eXBlID09PSBOVUxMX0RZTkFNSUNfQ09NUE9ORU5UKSB7XHJcbiAgICAgICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSAmJiAhdHlwZSkge1xyXG4gICAgICAgICAgICB3YXJuKGBJbnZhbGlkIHZub2RlIHR5cGUgd2hlbiBjcmVhdGluZyB2bm9kZTogJHt0eXBlfS5gKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdHlwZSA9IENvbW1lbnQ7XHJcbiAgICB9XHJcbiAgICBpZiAoaXNWTm9kZSh0eXBlKSkge1xyXG4gICAgICAgIC8vIGNyZWF0ZVZOb2RlIHJlY2VpdmluZyBhbiBleGlzdGluZyB2bm9kZS4gVGhpcyBoYXBwZW5zIGluIGNhc2VzIGxpa2VcclxuICAgICAgICAvLyA8Y29tcG9uZW50IDppcz1cInZub2RlXCIvPlxyXG4gICAgICAgIC8vICMyMDc4IG1ha2Ugc3VyZSB0byBtZXJnZSByZWZzIGR1cmluZyB0aGUgY2xvbmUgaW5zdGVhZCBvZiBvdmVyd3JpdGluZyBpdFxyXG4gICAgICAgIGNvbnN0IGNsb25lZCA9IGNsb25lVk5vZGUodHlwZSwgcHJvcHMsIHRydWUgLyogbWVyZ2VSZWY6IHRydWUgKi8pO1xyXG4gICAgICAgIGlmIChjaGlsZHJlbikge1xyXG4gICAgICAgICAgICBub3JtYWxpemVDaGlsZHJlbihjbG9uZWQsIGNoaWxkcmVuKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGNsb25lZDtcclxuICAgIH1cclxuICAgIC8vIGNsYXNzIGNvbXBvbmVudCBub3JtYWxpemF0aW9uLlxyXG4gICAgaWYgKGlzQ2xhc3NDb21wb25lbnQodHlwZSkpIHtcclxuICAgICAgICB0eXBlID0gdHlwZS5fX3ZjY09wdHM7XHJcbiAgICB9XHJcbiAgICAvLyBjbGFzcyAmIHN0eWxlIG5vcm1hbGl6YXRpb24uXHJcbiAgICBpZiAocHJvcHMpIHtcclxuICAgICAgICAvLyBmb3IgcmVhY3RpdmUgb3IgcHJveHkgb2JqZWN0cywgd2UgbmVlZCB0byBjbG9uZSBpdCB0byBlbmFibGUgbXV0YXRpb24uXHJcbiAgICAgICAgcHJvcHMgPSBndWFyZFJlYWN0aXZlUHJvcHMocHJvcHMpO1xyXG4gICAgICAgIGxldCB7IGNsYXNzOiBrbGFzcywgc3R5bGUgfSA9IHByb3BzO1xyXG4gICAgICAgIGlmIChrbGFzcyAmJiAhaXNTdHJpbmcoa2xhc3MpKSB7XHJcbiAgICAgICAgICAgIHByb3BzLmNsYXNzID0gbm9ybWFsaXplQ2xhc3Moa2xhc3MpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoaXNPYmplY3Qoc3R5bGUpKSB7XHJcbiAgICAgICAgICAgIC8vIHJlYWN0aXZlIHN0YXRlIG9iamVjdHMgbmVlZCB0byBiZSBjbG9uZWQgc2luY2UgdGhleSBhcmUgbGlrZWx5IHRvIGJlXHJcbiAgICAgICAgICAgIC8vIG11dGF0ZWRcclxuICAgICAgICAgICAgaWYgKGlzUHJveHkoc3R5bGUpICYmICFpc0FycmF5KHN0eWxlKSkge1xyXG4gICAgICAgICAgICAgICAgc3R5bGUgPSBleHRlbmQoe30sIHN0eWxlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBwcm9wcy5zdHlsZSA9IG5vcm1hbGl6ZVN0eWxlKHN0eWxlKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICAvLyBlbmNvZGUgdGhlIHZub2RlIHR5cGUgaW5mb3JtYXRpb24gaW50byBhIGJpdG1hcFxyXG4gICAgY29uc3Qgc2hhcGVGbGFnID0gaXNTdHJpbmcodHlwZSlcclxuICAgICAgICA/IDEgLyogRUxFTUVOVCAqL1xyXG4gICAgICAgIDogaXNTdXNwZW5zZSh0eXBlKVxyXG4gICAgICAgICAgICA/IDEyOCAvKiBTVVNQRU5TRSAqL1xyXG4gICAgICAgICAgICA6IGlzVGVsZXBvcnQodHlwZSlcclxuICAgICAgICAgICAgICAgID8gNjQgLyogVEVMRVBPUlQgKi9cclxuICAgICAgICAgICAgICAgIDogaXNPYmplY3QodHlwZSlcclxuICAgICAgICAgICAgICAgICAgICA/IDQgLyogU1RBVEVGVUxfQ09NUE9ORU5UICovXHJcbiAgICAgICAgICAgICAgICAgICAgOiBpc0Z1bmN0aW9uKHR5cGUpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgID8gMiAvKiBGVU5DVElPTkFMX0NPTVBPTkVOVCAqL1xyXG4gICAgICAgICAgICAgICAgICAgICAgICA6IDA7XHJcbiAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmIHNoYXBlRmxhZyAmIDQgLyogU1RBVEVGVUxfQ09NUE9ORU5UICovICYmIGlzUHJveHkodHlwZSkpIHtcclxuICAgICAgICB0eXBlID0gdG9SYXcodHlwZSk7XHJcbiAgICAgICAgd2FybihgVnVlIHJlY2VpdmVkIGEgQ29tcG9uZW50IHdoaWNoIHdhcyBtYWRlIGEgcmVhY3RpdmUgb2JqZWN0LiBUaGlzIGNhbiBgICtcclxuICAgICAgICAgICAgYGxlYWQgdG8gdW5uZWNlc3NhcnkgcGVyZm9ybWFuY2Ugb3ZlcmhlYWQsIGFuZCBzaG91bGQgYmUgYXZvaWRlZCBieSBgICtcclxuICAgICAgICAgICAgYG1hcmtpbmcgdGhlIGNvbXBvbmVudCB3aXRoIFxcYG1hcmtSYXdcXGAgb3IgdXNpbmcgXFxgc2hhbGxvd1JlZlxcYCBgICtcclxuICAgICAgICAgICAgYGluc3RlYWQgb2YgXFxgcmVmXFxgLmAsIGBcXG5Db21wb25lbnQgdGhhdCB3YXMgbWFkZSByZWFjdGl2ZTogYCwgdHlwZSk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gY3JlYXRlQmFzZVZOb2RlKHR5cGUsIHByb3BzLCBjaGlsZHJlbiwgcGF0Y2hGbGFnLCBkeW5hbWljUHJvcHMsIHNoYXBlRmxhZywgaXNCbG9ja05vZGUsIHRydWUpO1xyXG59XHJcbmZ1bmN0aW9uIGd1YXJkUmVhY3RpdmVQcm9wcyhwcm9wcykge1xyXG4gICAgaWYgKCFwcm9wcylcclxuICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgIHJldHVybiBpc1Byb3h5KHByb3BzKSB8fCBJbnRlcm5hbE9iamVjdEtleSBpbiBwcm9wc1xyXG4gICAgICAgID8gZXh0ZW5kKHt9LCBwcm9wcylcclxuICAgICAgICA6IHByb3BzO1xyXG59XHJcbmZ1bmN0aW9uIGNsb25lVk5vZGUodm5vZGUsIGV4dHJhUHJvcHMsIG1lcmdlUmVmID0gZmFsc2UpIHtcclxuICAgIC8vIFRoaXMgaXMgaW50ZW50aW9uYWxseSBOT1QgdXNpbmcgc3ByZWFkIG9yIGV4dGVuZCB0byBhdm9pZCB0aGUgcnVudGltZVxyXG4gICAgLy8ga2V5IGVudW1lcmF0aW9uIGNvc3QuXHJcbiAgICBjb25zdCB7IHByb3BzLCByZWYsIHBhdGNoRmxhZywgY2hpbGRyZW4gfSA9IHZub2RlO1xyXG4gICAgY29uc3QgbWVyZ2VkUHJvcHMgPSBleHRyYVByb3BzID8gbWVyZ2VQcm9wcyhwcm9wcyB8fCB7fSwgZXh0cmFQcm9wcykgOiBwcm9wcztcclxuICAgIGNvbnN0IGNsb25lZCA9IHtcclxuICAgICAgICBfX3ZfaXNWTm9kZTogdHJ1ZSxcclxuICAgICAgICBfX3Zfc2tpcDogdHJ1ZSxcclxuICAgICAgICB0eXBlOiB2bm9kZS50eXBlLFxyXG4gICAgICAgIHByb3BzOiBtZXJnZWRQcm9wcyxcclxuICAgICAgICBrZXk6IG1lcmdlZFByb3BzICYmIG5vcm1hbGl6ZUtleShtZXJnZWRQcm9wcyksXHJcbiAgICAgICAgcmVmOiBleHRyYVByb3BzICYmIGV4dHJhUHJvcHMucmVmXHJcbiAgICAgICAgICAgID8gLy8gIzIwNzggaW4gdGhlIGNhc2Ugb2YgPGNvbXBvbmVudCA6aXM9XCJ2bm9kZVwiIHJlZj1cImV4dHJhXCIvPlxyXG4gICAgICAgICAgICAgICAgLy8gaWYgdGhlIHZub2RlIGl0c2VsZiBhbHJlYWR5IGhhcyBhIHJlZiwgY2xvbmVWTm9kZSB3aWxsIG5lZWQgdG8gbWVyZ2VcclxuICAgICAgICAgICAgICAgIC8vIHRoZSByZWZzIHNvIHRoZSBzaW5nbGUgdm5vZGUgY2FuIGJlIHNldCBvbiBtdWx0aXBsZSByZWZzXHJcbiAgICAgICAgICAgICAgICBtZXJnZVJlZiAmJiByZWZcclxuICAgICAgICAgICAgICAgICAgICA/IGlzQXJyYXkocmVmKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICA/IHJlZi5jb25jYXQobm9ybWFsaXplUmVmKGV4dHJhUHJvcHMpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICA6IFtyZWYsIG5vcm1hbGl6ZVJlZihleHRyYVByb3BzKV1cclxuICAgICAgICAgICAgICAgICAgICA6IG5vcm1hbGl6ZVJlZihleHRyYVByb3BzKVxyXG4gICAgICAgICAgICA6IHJlZixcclxuICAgICAgICBzY29wZUlkOiB2bm9kZS5zY29wZUlkLFxyXG4gICAgICAgIHNsb3RTY29wZUlkczogdm5vZGUuc2xvdFNjb3BlSWRzLFxyXG4gICAgICAgIGNoaWxkcmVuOiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgJiYgcGF0Y2hGbGFnID09PSAtMSAvKiBIT0lTVEVEICovICYmIGlzQXJyYXkoY2hpbGRyZW4pXHJcbiAgICAgICAgICAgID8gY2hpbGRyZW4ubWFwKGRlZXBDbG9uZVZOb2RlKVxyXG4gICAgICAgICAgICA6IGNoaWxkcmVuLFxyXG4gICAgICAgIHRhcmdldDogdm5vZGUudGFyZ2V0LFxyXG4gICAgICAgIHRhcmdldEFuY2hvcjogdm5vZGUudGFyZ2V0QW5jaG9yLFxyXG4gICAgICAgIHN0YXRpY0NvdW50OiB2bm9kZS5zdGF0aWNDb3VudCxcclxuICAgICAgICBzaGFwZUZsYWc6IHZub2RlLnNoYXBlRmxhZyxcclxuICAgICAgICAvLyBpZiB0aGUgdm5vZGUgaXMgY2xvbmVkIHdpdGggZXh0cmEgcHJvcHMsIHdlIGNhbiBubyBsb25nZXIgYXNzdW1lIGl0c1xyXG4gICAgICAgIC8vIGV4aXN0aW5nIHBhdGNoIGZsYWcgdG8gYmUgcmVsaWFibGUgYW5kIG5lZWQgdG8gYWRkIHRoZSBGVUxMX1BST1BTIGZsYWcuXHJcbiAgICAgICAgLy8gbm90ZTogcGVyc2VydmUgZmxhZyBmb3IgZnJhZ21lbnRzIHNpbmNlIHRoZXkgdXNlIHRoZSBmbGFnIGZvciBjaGlsZHJlblxyXG4gICAgICAgIC8vIGZhc3QgcGF0aHMgb25seS5cclxuICAgICAgICBwYXRjaEZsYWc6IGV4dHJhUHJvcHMgJiYgdm5vZGUudHlwZSAhPT0gRnJhZ21lbnRcclxuICAgICAgICAgICAgPyBwYXRjaEZsYWcgPT09IC0xIC8vIGhvaXN0ZWQgbm9kZVxyXG4gICAgICAgICAgICAgICAgPyAxNiAvKiBGVUxMX1BST1BTICovXHJcbiAgICAgICAgICAgICAgICA6IHBhdGNoRmxhZyB8IDE2IC8qIEZVTExfUFJPUFMgKi9cclxuICAgICAgICAgICAgOiBwYXRjaEZsYWcsXHJcbiAgICAgICAgZHluYW1pY1Byb3BzOiB2bm9kZS5keW5hbWljUHJvcHMsXHJcbiAgICAgICAgZHluYW1pY0NoaWxkcmVuOiB2bm9kZS5keW5hbWljQ2hpbGRyZW4sXHJcbiAgICAgICAgYXBwQ29udGV4dDogdm5vZGUuYXBwQ29udGV4dCxcclxuICAgICAgICBkaXJzOiB2bm9kZS5kaXJzLFxyXG4gICAgICAgIHRyYW5zaXRpb246IHZub2RlLnRyYW5zaXRpb24sXHJcbiAgICAgICAgLy8gVGhlc2Ugc2hvdWxkIHRlY2huaWNhbGx5IG9ubHkgYmUgbm9uLW51bGwgb24gbW91bnRlZCBWTm9kZXMuIEhvd2V2ZXIsXHJcbiAgICAgICAgLy8gdGhleSAqc2hvdWxkKiBiZSBjb3BpZWQgZm9yIGtlcHQtYWxpdmUgdm5vZGVzLiBTbyB3ZSBqdXN0IGFsd2F5cyBjb3B5XHJcbiAgICAgICAgLy8gdGhlbSBzaW5jZSB0aGVtIGJlaW5nIG5vbi1udWxsIGR1cmluZyBhIG1vdW50IGRvZXNuJ3QgYWZmZWN0IHRoZSBsb2dpYyBhc1xyXG4gICAgICAgIC8vIHRoZXkgd2lsbCBzaW1wbHkgYmUgb3ZlcndyaXR0ZW4uXHJcbiAgICAgICAgY29tcG9uZW50OiB2bm9kZS5jb21wb25lbnQsXHJcbiAgICAgICAgc3VzcGVuc2U6IHZub2RlLnN1c3BlbnNlLFxyXG4gICAgICAgIHNzQ29udGVudDogdm5vZGUuc3NDb250ZW50ICYmIGNsb25lVk5vZGUodm5vZGUuc3NDb250ZW50KSxcclxuICAgICAgICBzc0ZhbGxiYWNrOiB2bm9kZS5zc0ZhbGxiYWNrICYmIGNsb25lVk5vZGUodm5vZGUuc3NGYWxsYmFjayksXHJcbiAgICAgICAgZWw6IHZub2RlLmVsLFxyXG4gICAgICAgIGFuY2hvcjogdm5vZGUuYW5jaG9yXHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIGNsb25lZDtcclxufVxyXG4vKipcclxuICogRGV2IG9ubHksIGZvciBITVIgb2YgaG9pc3RlZCB2bm9kZXMgcmV1c2VkIGluIHYtZm9yXHJcbiAqIGh0dHBzOi8vZ2l0aHViLmNvbS92aXRlanMvdml0ZS9pc3N1ZXMvMjAyMlxyXG4gKi9cclxuZnVuY3Rpb24gZGVlcENsb25lVk5vZGUodm5vZGUpIHtcclxuICAgIGNvbnN0IGNsb25lZCA9IGNsb25lVk5vZGUodm5vZGUpO1xyXG4gICAgaWYgKGlzQXJyYXkodm5vZGUuY2hpbGRyZW4pKSB7XHJcbiAgICAgICAgY2xvbmVkLmNoaWxkcmVuID0gdm5vZGUuY2hpbGRyZW4ubWFwKGRlZXBDbG9uZVZOb2RlKTtcclxuICAgIH1cclxuICAgIHJldHVybiBjbG9uZWQ7XHJcbn1cclxuLyoqXHJcbiAqIEBwcml2YXRlXHJcbiAqL1xyXG5mdW5jdGlvbiBjcmVhdGVUZXh0Vk5vZGUodGV4dCA9ICcgJywgZmxhZyA9IDApIHtcclxuICAgIHJldHVybiBjcmVhdGVWTm9kZShUZXh0LCBudWxsLCB0ZXh0LCBmbGFnKTtcclxufVxyXG4vKipcclxuICogQHByaXZhdGVcclxuICovXHJcbmZ1bmN0aW9uIGNyZWF0ZVN0YXRpY1ZOb2RlKGNvbnRlbnQsIG51bWJlck9mTm9kZXMpIHtcclxuICAgIC8vIEEgc3RhdGljIHZub2RlIGNhbiBjb250YWluIG11bHRpcGxlIHN0cmluZ2lmaWVkIGVsZW1lbnRzLCBhbmQgdGhlIG51bWJlclxyXG4gICAgLy8gb2YgZWxlbWVudHMgaXMgbmVjZXNzYXJ5IGZvciBoeWRyYXRpb24uXHJcbiAgICBjb25zdCB2bm9kZSA9IGNyZWF0ZVZOb2RlKFN0YXRpYywgbnVsbCwgY29udGVudCk7XHJcbiAgICB2bm9kZS5zdGF0aWNDb3VudCA9IG51bWJlck9mTm9kZXM7XHJcbiAgICByZXR1cm4gdm5vZGU7XHJcbn1cclxuLyoqXHJcbiAqIEBwcml2YXRlXHJcbiAqL1xyXG5mdW5jdGlvbiBjcmVhdGVDb21tZW50Vk5vZGUodGV4dCA9ICcnLCBcclxuLy8gd2hlbiB1c2VkIGFzIHRoZSB2LWVsc2UgYnJhbmNoLCB0aGUgY29tbWVudCBub2RlIG11c3QgYmUgY3JlYXRlZCBhcyBhXHJcbi8vIGJsb2NrIHRvIGVuc3VyZSBjb3JyZWN0IHVwZGF0ZXMuXHJcbmFzQmxvY2sgPSBmYWxzZSkge1xyXG4gICAgcmV0dXJuIGFzQmxvY2tcclxuICAgICAgICA/IChvcGVuQmxvY2soKSwgY3JlYXRlQmxvY2soQ29tbWVudCwgbnVsbCwgdGV4dCkpXHJcbiAgICAgICAgOiBjcmVhdGVWTm9kZShDb21tZW50LCBudWxsLCB0ZXh0KTtcclxufVxyXG5mdW5jdGlvbiBub3JtYWxpemVWTm9kZShjaGlsZCkge1xyXG4gICAgaWYgKGNoaWxkID09IG51bGwgfHwgdHlwZW9mIGNoaWxkID09PSAnYm9vbGVhbicpIHtcclxuICAgICAgICAvLyBlbXB0eSBwbGFjZWhvbGRlclxyXG4gICAgICAgIHJldHVybiBjcmVhdGVWTm9kZShDb21tZW50KTtcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKGlzQXJyYXkoY2hpbGQpKSB7XHJcbiAgICAgICAgLy8gZnJhZ21lbnRcclxuICAgICAgICByZXR1cm4gY3JlYXRlVk5vZGUoRnJhZ21lbnQsIG51bGwsIFxyXG4gICAgICAgIC8vICMzNjY2LCBhdm9pZCByZWZlcmVuY2UgcG9sbHV0aW9uIHdoZW4gcmV1c2luZyB2bm9kZVxyXG4gICAgICAgIGNoaWxkLnNsaWNlKCkpO1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZiAodHlwZW9mIGNoaWxkID09PSAnb2JqZWN0Jykge1xyXG4gICAgICAgIC8vIGFscmVhZHkgdm5vZGUsIHRoaXMgc2hvdWxkIGJlIHRoZSBtb3N0IGNvbW1vbiBzaW5jZSBjb21waWxlZCB0ZW1wbGF0ZXNcclxuICAgICAgICAvLyBhbHdheXMgcHJvZHVjZSBhbGwtdm5vZGUgY2hpbGRyZW4gYXJyYXlzXHJcbiAgICAgICAgcmV0dXJuIGNsb25lSWZNb3VudGVkKGNoaWxkKTtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICAgIC8vIHN0cmluZ3MgYW5kIG51bWJlcnNcclxuICAgICAgICByZXR1cm4gY3JlYXRlVk5vZGUoVGV4dCwgbnVsbCwgU3RyaW5nKGNoaWxkKSk7XHJcbiAgICB9XHJcbn1cclxuLy8gb3B0aW1pemVkIG5vcm1hbGl6YXRpb24gZm9yIHRlbXBsYXRlLWNvbXBpbGVkIHJlbmRlciBmbnNcclxuZnVuY3Rpb24gY2xvbmVJZk1vdW50ZWQoY2hpbGQpIHtcclxuICAgIHJldHVybiBjaGlsZC5lbCA9PT0gbnVsbCB8fCBjaGlsZC5tZW1vID8gY2hpbGQgOiBjbG9uZVZOb2RlKGNoaWxkKTtcclxufVxyXG5mdW5jdGlvbiBub3JtYWxpemVDaGlsZHJlbih2bm9kZSwgY2hpbGRyZW4pIHtcclxuICAgIGxldCB0eXBlID0gMDtcclxuICAgIGNvbnN0IHsgc2hhcGVGbGFnIH0gPSB2bm9kZTtcclxuICAgIGlmIChjaGlsZHJlbiA9PSBudWxsKSB7XHJcbiAgICAgICAgY2hpbGRyZW4gPSBudWxsO1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZiAoaXNBcnJheShjaGlsZHJlbikpIHtcclxuICAgICAgICB0eXBlID0gMTYgLyogQVJSQVlfQ0hJTERSRU4gKi87XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmICh0eXBlb2YgY2hpbGRyZW4gPT09ICdvYmplY3QnKSB7XHJcbiAgICAgICAgaWYgKHNoYXBlRmxhZyAmICgxIC8qIEVMRU1FTlQgKi8gfCA2NCAvKiBURUxFUE9SVCAqLykpIHtcclxuICAgICAgICAgICAgLy8gTm9ybWFsaXplIHNsb3QgdG8gcGxhaW4gY2hpbGRyZW4gZm9yIHBsYWluIGVsZW1lbnQgYW5kIFRlbGVwb3J0XHJcbiAgICAgICAgICAgIGNvbnN0IHNsb3QgPSBjaGlsZHJlbi5kZWZhdWx0O1xyXG4gICAgICAgICAgICBpZiAoc2xvdCkge1xyXG4gICAgICAgICAgICAgICAgLy8gX2MgbWFya2VyIGlzIGFkZGVkIGJ5IHdpdGhDdHgoKSBpbmRpY2F0aW5nIHRoaXMgaXMgYSBjb21waWxlZCBzbG90XHJcbiAgICAgICAgICAgICAgICBzbG90Ll9jICYmIChzbG90Ll9kID0gZmFsc2UpO1xyXG4gICAgICAgICAgICAgICAgbm9ybWFsaXplQ2hpbGRyZW4odm5vZGUsIHNsb3QoKSk7XHJcbiAgICAgICAgICAgICAgICBzbG90Ll9jICYmIChzbG90Ll9kID0gdHJ1ZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgdHlwZSA9IDMyIC8qIFNMT1RTX0NISUxEUkVOICovO1xyXG4gICAgICAgICAgICBjb25zdCBzbG90RmxhZyA9IGNoaWxkcmVuLl87XHJcbiAgICAgICAgICAgIGlmICghc2xvdEZsYWcgJiYgIShJbnRlcm5hbE9iamVjdEtleSBpbiBjaGlsZHJlbikpIHtcclxuICAgICAgICAgICAgICAgIGNoaWxkcmVuLl9jdHggPSBjdXJyZW50UmVuZGVyaW5nSW5zdGFuY2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSBpZiAoc2xvdEZsYWcgPT09IDMgLyogRk9SV0FSREVEICovICYmIGN1cnJlbnRSZW5kZXJpbmdJbnN0YW5jZSkge1xyXG4gICAgICAgICAgICAgICAgLy8gYSBjaGlsZCBjb21wb25lbnQgcmVjZWl2ZXMgZm9yd2FyZGVkIHNsb3RzIGZyb20gdGhlIHBhcmVudC5cclxuICAgICAgICAgICAgICAgIC8vIGl0cyBzbG90IHR5cGUgaXMgZGV0ZXJtaW5lZCBieSBpdHMgcGFyZW50J3Mgc2xvdCB0eXBlLlxyXG4gICAgICAgICAgICAgICAgaWYgKGN1cnJlbnRSZW5kZXJpbmdJbnN0YW5jZS5zbG90cy5fID09PSAxIC8qIFNUQUJMRSAqLykge1xyXG4gICAgICAgICAgICAgICAgICAgIGNoaWxkcmVuLl8gPSAxIC8qIFNUQUJMRSAqLztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGNoaWxkcmVuLl8gPSAyIC8qIERZTkFNSUMgKi87XHJcbiAgICAgICAgICAgICAgICAgICAgdm5vZGUucGF0Y2hGbGFnIHw9IDEwMjQgLyogRFlOQU1JQ19TTE9UUyAqLztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGVsc2UgaWYgKGlzRnVuY3Rpb24oY2hpbGRyZW4pKSB7XHJcbiAgICAgICAgY2hpbGRyZW4gPSB7IGRlZmF1bHQ6IGNoaWxkcmVuLCBfY3R4OiBjdXJyZW50UmVuZGVyaW5nSW5zdGFuY2UgfTtcclxuICAgICAgICB0eXBlID0gMzIgLyogU0xPVFNfQ0hJTERSRU4gKi87XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgICBjaGlsZHJlbiA9IFN0cmluZyhjaGlsZHJlbik7XHJcbiAgICAgICAgLy8gZm9yY2UgdGVsZXBvcnQgY2hpbGRyZW4gdG8gYXJyYXkgc28gaXQgY2FuIGJlIG1vdmVkIGFyb3VuZFxyXG4gICAgICAgIGlmIChzaGFwZUZsYWcgJiA2NCAvKiBURUxFUE9SVCAqLykge1xyXG4gICAgICAgICAgICB0eXBlID0gMTYgLyogQVJSQVlfQ0hJTERSRU4gKi87XHJcbiAgICAgICAgICAgIGNoaWxkcmVuID0gW2NyZWF0ZVRleHRWTm9kZShjaGlsZHJlbildO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgdHlwZSA9IDggLyogVEVYVF9DSElMRFJFTiAqLztcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICB2bm9kZS5jaGlsZHJlbiA9IGNoaWxkcmVuO1xyXG4gICAgdm5vZGUuc2hhcGVGbGFnIHw9IHR5cGU7XHJcbn1cclxuZnVuY3Rpb24gbWVyZ2VQcm9wcyguLi5hcmdzKSB7XHJcbiAgICBjb25zdCByZXQgPSB7fTtcclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYXJncy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgIGNvbnN0IHRvTWVyZ2UgPSBhcmdzW2ldO1xyXG4gICAgICAgIGZvciAoY29uc3Qga2V5IGluIHRvTWVyZ2UpIHtcclxuICAgICAgICAgICAgaWYgKGtleSA9PT0gJ2NsYXNzJykge1xyXG4gICAgICAgICAgICAgICAgaWYgKHJldC5jbGFzcyAhPT0gdG9NZXJnZS5jbGFzcykge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldC5jbGFzcyA9IG5vcm1hbGl6ZUNsYXNzKFtyZXQuY2xhc3MsIHRvTWVyZ2UuY2xhc3NdKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmIChrZXkgPT09ICdzdHlsZScpIHtcclxuICAgICAgICAgICAgICAgIHJldC5zdHlsZSA9IG5vcm1hbGl6ZVN0eWxlKFtyZXQuc3R5bGUsIHRvTWVyZ2Uuc3R5bGVdKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmIChpc09uKGtleSkpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGV4aXN0aW5nID0gcmV0W2tleV07XHJcbiAgICAgICAgICAgICAgICBjb25zdCBpbmNvbWluZyA9IHRvTWVyZ2Vba2V5XTtcclxuICAgICAgICAgICAgICAgIGlmIChleGlzdGluZyAhPT0gaW5jb21pbmcgJiZcclxuICAgICAgICAgICAgICAgICAgICAhKGlzQXJyYXkoZXhpc3RpbmcpICYmIGV4aXN0aW5nLmluY2x1ZGVzKGluY29taW5nKSkpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXRba2V5XSA9IGV4aXN0aW5nXHJcbiAgICAgICAgICAgICAgICAgICAgICAgID8gW10uY29uY2F0KGV4aXN0aW5nLCBpbmNvbWluZylcclxuICAgICAgICAgICAgICAgICAgICAgICAgOiBpbmNvbWluZztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmIChrZXkgIT09ICcnKSB7XHJcbiAgICAgICAgICAgICAgICByZXRba2V5XSA9IHRvTWVyZ2Vba2V5XTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiByZXQ7XHJcbn1cclxuZnVuY3Rpb24gaW52b2tlVk5vZGVIb29rKGhvb2ssIGluc3RhbmNlLCB2bm9kZSwgcHJldlZOb2RlID0gbnVsbCkge1xyXG4gICAgY2FsbFdpdGhBc3luY0Vycm9ySGFuZGxpbmcoaG9vaywgaW5zdGFuY2UsIDcgLyogVk5PREVfSE9PSyAqLywgW1xyXG4gICAgICAgIHZub2RlLFxyXG4gICAgICAgIHByZXZWTm9kZVxyXG4gICAgXSk7XHJcbn1cblxuLyoqXHJcbiAqIEFjdHVhbCBpbXBsZW1lbnRhdGlvblxyXG4gKi9cclxuZnVuY3Rpb24gcmVuZGVyTGlzdChzb3VyY2UsIHJlbmRlckl0ZW0sIGNhY2hlLCBpbmRleCkge1xyXG4gICAgbGV0IHJldDtcclxuICAgIGNvbnN0IGNhY2hlZCA9IChjYWNoZSAmJiBjYWNoZVtpbmRleF0pO1xyXG4gICAgaWYgKGlzQXJyYXkoc291cmNlKSB8fCBpc1N0cmluZyhzb3VyY2UpKSB7XHJcbiAgICAgICAgcmV0ID0gbmV3IEFycmF5KHNvdXJjZS5sZW5ndGgpO1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAwLCBsID0gc291cmNlLmxlbmd0aDsgaSA8IGw7IGkrKykge1xyXG4gICAgICAgICAgICByZXRbaV0gPSByZW5kZXJJdGVtKHNvdXJjZVtpXSwgaSwgdW5kZWZpbmVkLCBjYWNoZWQgJiYgY2FjaGVkW2ldKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmICh0eXBlb2Ygc291cmNlID09PSAnbnVtYmVyJykge1xyXG4gICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgJiYgIU51bWJlci5pc0ludGVnZXIoc291cmNlKSkge1xyXG4gICAgICAgICAgICB3YXJuKGBUaGUgdi1mb3IgcmFuZ2UgZXhwZWN0IGFuIGludGVnZXIgdmFsdWUgYnV0IGdvdCAke3NvdXJjZX0uYCk7XHJcbiAgICAgICAgICAgIHJldHVybiBbXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0ID0gbmV3IEFycmF5KHNvdXJjZSk7XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzb3VyY2U7IGkrKykge1xyXG4gICAgICAgICAgICByZXRbaV0gPSByZW5kZXJJdGVtKGkgKyAxLCBpLCB1bmRlZmluZWQsIGNhY2hlZCAmJiBjYWNoZWRbaV0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGVsc2UgaWYgKGlzT2JqZWN0KHNvdXJjZSkpIHtcclxuICAgICAgICBpZiAoc291cmNlW1N5bWJvbC5pdGVyYXRvcl0pIHtcclxuICAgICAgICAgICAgcmV0ID0gQXJyYXkuZnJvbShzb3VyY2UsIChpdGVtLCBpKSA9PiByZW5kZXJJdGVtKGl0ZW0sIGksIHVuZGVmaW5lZCwgY2FjaGVkICYmIGNhY2hlZFtpXSkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgY29uc3Qga2V5cyA9IE9iamVjdC5rZXlzKHNvdXJjZSk7XHJcbiAgICAgICAgICAgIHJldCA9IG5ldyBBcnJheShrZXlzLmxlbmd0aCk7XHJcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwLCBsID0ga2V5cy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGtleSA9IGtleXNbaV07XHJcbiAgICAgICAgICAgICAgICByZXRbaV0gPSByZW5kZXJJdGVtKHNvdXJjZVtrZXldLCBrZXksIGksIGNhY2hlZCAmJiBjYWNoZWRbaV0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgcmV0ID0gW107XHJcbiAgICB9XHJcbiAgICBpZiAoY2FjaGUpIHtcclxuICAgICAgICBjYWNoZVtpbmRleF0gPSByZXQ7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gcmV0O1xyXG59XG5cbi8qKlxyXG4gKiBDb21waWxlciBydW50aW1lIGhlbHBlciBmb3IgY3JlYXRpbmcgZHluYW1pYyBzbG90cyBvYmplY3RcclxuICogQHByaXZhdGVcclxuICovXHJcbmZ1bmN0aW9uIGNyZWF0ZVNsb3RzKHNsb3RzLCBkeW5hbWljU2xvdHMpIHtcclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZHluYW1pY1Nsb3RzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgY29uc3Qgc2xvdCA9IGR5bmFtaWNTbG90c1tpXTtcclxuICAgICAgICAvLyBhcnJheSBvZiBkeW5hbWljIHNsb3QgZ2VuZXJhdGVkIGJ5IDx0ZW1wbGF0ZSB2LWZvcj1cIi4uLlwiICNbLi4uXT5cclxuICAgICAgICBpZiAoaXNBcnJheShzbG90KSkge1xyXG4gICAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IHNsb3QubGVuZ3RoOyBqKyspIHtcclxuICAgICAgICAgICAgICAgIHNsb3RzW3Nsb3Rbal0ubmFtZV0gPSBzbG90W2pdLmZuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKHNsb3QpIHtcclxuICAgICAgICAgICAgLy8gY29uZGl0aW9uYWwgc2luZ2xlIHNsb3QgZ2VuZXJhdGVkIGJ5IDx0ZW1wbGF0ZSB2LWlmPVwiLi4uXCIgI2Zvbz5cclxuICAgICAgICAgICAgc2xvdHNbc2xvdC5uYW1lXSA9IHNsb3QuZm47XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIHNsb3RzO1xyXG59XG5cbi8qKlxyXG4gKiBDb21waWxlciBydW50aW1lIGhlbHBlciBmb3IgcmVuZGVyaW5nIGA8c2xvdC8+YFxyXG4gKiBAcHJpdmF0ZVxyXG4gKi9cclxuZnVuY3Rpb24gcmVuZGVyU2xvdChzbG90cywgbmFtZSwgcHJvcHMgPSB7fSwgXHJcbi8vIHRoaXMgaXMgbm90IGEgdXNlci1mYWNpbmcgZnVuY3Rpb24sIHNvIHRoZSBmYWxsYmFjayBpcyBhbHdheXMgZ2VuZXJhdGVkIGJ5XHJcbi8vIHRoZSBjb21waWxlciBhbmQgZ3VhcmFudGVlZCB0byBiZSBhIGZ1bmN0aW9uIHJldHVybmluZyBhbiBhcnJheVxyXG5mYWxsYmFjaywgbm9TbG90dGVkKSB7XHJcbiAgICBpZiAoY3VycmVudFJlbmRlcmluZ0luc3RhbmNlLmlzQ0UpIHtcclxuICAgICAgICByZXR1cm4gY3JlYXRlVk5vZGUoJ3Nsb3QnLCBuYW1lID09PSAnZGVmYXVsdCcgPyBudWxsIDogeyBuYW1lIH0sIGZhbGxiYWNrICYmIGZhbGxiYWNrKCkpO1xyXG4gICAgfVxyXG4gICAgbGV0IHNsb3QgPSBzbG90c1tuYW1lXTtcclxuICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgJiYgc2xvdCAmJiBzbG90Lmxlbmd0aCA+IDEpIHtcclxuICAgICAgICB3YXJuKGBTU1Itb3B0aW1pemVkIHNsb3QgZnVuY3Rpb24gZGV0ZWN0ZWQgaW4gYSBub24tU1NSLW9wdGltaXplZCByZW5kZXIgYCArXHJcbiAgICAgICAgICAgIGBmdW5jdGlvbi4gWW91IG5lZWQgdG8gbWFyayB0aGlzIGNvbXBvbmVudCB3aXRoICRkeW5hbWljLXNsb3RzIGluIHRoZSBgICtcclxuICAgICAgICAgICAgYHBhcmVudCB0ZW1wbGF0ZS5gKTtcclxuICAgICAgICBzbG90ID0gKCkgPT4gW107XHJcbiAgICB9XHJcbiAgICAvLyBhIGNvbXBpbGVkIHNsb3QgZGlzYWJsZXMgYmxvY2sgdHJhY2tpbmcgYnkgZGVmYXVsdCB0byBhdm9pZCBtYW51YWxcclxuICAgIC8vIGludm9jYXRpb24gaW50ZXJmZXJpbmcgd2l0aCB0ZW1wbGF0ZS1iYXNlZCBibG9jayB0cmFja2luZywgYnV0IGluXHJcbiAgICAvLyBgcmVuZGVyU2xvdGAgd2UgY2FuIGJlIHN1cmUgdGhhdCBpdCdzIHRlbXBsYXRlLWJhc2VkIHNvIHdlIGNhbiBmb3JjZVxyXG4gICAgLy8gZW5hYmxlIGl0LlxyXG4gICAgaWYgKHNsb3QgJiYgc2xvdC5fYykge1xyXG4gICAgICAgIHNsb3QuX2QgPSBmYWxzZTtcclxuICAgIH1cclxuICAgIG9wZW5CbG9jaygpO1xyXG4gICAgY29uc3QgdmFsaWRTbG90Q29udGVudCA9IHNsb3QgJiYgZW5zdXJlVmFsaWRWTm9kZShzbG90KHByb3BzKSk7XHJcbiAgICBjb25zdCByZW5kZXJlZCA9IGNyZWF0ZUJsb2NrKEZyYWdtZW50LCB7IGtleTogcHJvcHMua2V5IHx8IGBfJHtuYW1lfWAgfSwgdmFsaWRTbG90Q29udGVudCB8fCAoZmFsbGJhY2sgPyBmYWxsYmFjaygpIDogW10pLCB2YWxpZFNsb3RDb250ZW50ICYmIHNsb3RzLl8gPT09IDEgLyogU1RBQkxFICovXHJcbiAgICAgICAgPyA2NCAvKiBTVEFCTEVfRlJBR01FTlQgKi9cclxuICAgICAgICA6IC0yIC8qIEJBSUwgKi8pO1xyXG4gICAgaWYgKCFub1Nsb3R0ZWQgJiYgcmVuZGVyZWQuc2NvcGVJZCkge1xyXG4gICAgICAgIHJlbmRlcmVkLnNsb3RTY29wZUlkcyA9IFtyZW5kZXJlZC5zY29wZUlkICsgJy1zJ107XHJcbiAgICB9XHJcbiAgICBpZiAoc2xvdCAmJiBzbG90Ll9jKSB7XHJcbiAgICAgICAgc2xvdC5fZCA9IHRydWU7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gcmVuZGVyZWQ7XHJcbn1cclxuZnVuY3Rpb24gZW5zdXJlVmFsaWRWTm9kZSh2bm9kZXMpIHtcclxuICAgIHJldHVybiB2bm9kZXMuc29tZShjaGlsZCA9PiB7XHJcbiAgICAgICAgaWYgKCFpc1ZOb2RlKGNoaWxkKSlcclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgaWYgKGNoaWxkLnR5cGUgPT09IENvbW1lbnQpXHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICBpZiAoY2hpbGQudHlwZSA9PT0gRnJhZ21lbnQgJiZcclxuICAgICAgICAgICAgIWVuc3VyZVZhbGlkVk5vZGUoY2hpbGQuY2hpbGRyZW4pKVxyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9KVxyXG4gICAgICAgID8gdm5vZGVzXHJcbiAgICAgICAgOiBudWxsO1xyXG59XG5cbi8qKlxyXG4gKiBGb3IgcHJlZml4aW5nIGtleXMgaW4gdi1vbj1cIm9ialwiIHdpdGggXCJvblwiXHJcbiAqIEBwcml2YXRlXHJcbiAqL1xyXG5mdW5jdGlvbiB0b0hhbmRsZXJzKG9iaikge1xyXG4gICAgY29uc3QgcmV0ID0ge307XHJcbiAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmICFpc09iamVjdChvYmopKSB7XHJcbiAgICAgICAgd2Fybihgdi1vbiB3aXRoIG5vIGFyZ3VtZW50IGV4cGVjdHMgYW4gb2JqZWN0IHZhbHVlLmApO1xyXG4gICAgICAgIHJldHVybiByZXQ7XHJcbiAgICB9XHJcbiAgICBmb3IgKGNvbnN0IGtleSBpbiBvYmopIHtcclxuICAgICAgICByZXRbdG9IYW5kbGVyS2V5KGtleSldID0gb2JqW2tleV07XHJcbiAgICB9XHJcbiAgICByZXR1cm4gcmV0O1xyXG59XG5cbi8qKlxyXG4gKiAjMjQzNyBJbiBWdWUgMywgZnVuY3Rpb25hbCBjb21wb25lbnRzIGRvIG5vdCBoYXZlIGEgcHVibGljIGluc3RhbmNlIHByb3h5IGJ1dFxyXG4gKiB0aGV5IGV4aXN0IGluIHRoZSBpbnRlcm5hbCBwYXJlbnQgY2hhaW4uIEZvciBjb2RlIHRoYXQgcmVsaWVzIG9uIHRyYXZlcnNpbmdcclxuICogcHVibGljICRwYXJlbnQgY2hhaW5zLCBza2lwIGZ1bmN0aW9uYWwgb25lcyBhbmQgZ28gdG8gdGhlIHBhcmVudCBpbnN0ZWFkLlxyXG4gKi9cclxuY29uc3QgZ2V0UHVibGljSW5zdGFuY2UgPSAoaSkgPT4ge1xyXG4gICAgaWYgKCFpKVxyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgaWYgKGlzU3RhdGVmdWxDb21wb25lbnQoaSkpXHJcbiAgICAgICAgcmV0dXJuIGdldEV4cG9zZVByb3h5KGkpIHx8IGkucHJveHk7XHJcbiAgICByZXR1cm4gZ2V0UHVibGljSW5zdGFuY2UoaS5wYXJlbnQpO1xyXG59O1xyXG5jb25zdCBwdWJsaWNQcm9wZXJ0aWVzTWFwID0gZXh0ZW5kKE9iamVjdC5jcmVhdGUobnVsbCksIHtcclxuICAgICQ6IGkgPT4gaSxcclxuICAgICRlbDogaSA9PiBpLnZub2RlLmVsLFxyXG4gICAgJGRhdGE6IGkgPT4gaS5kYXRhLFxyXG4gICAgJHByb3BzOiBpID0+ICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgPyBzaGFsbG93UmVhZG9ubHkoaS5wcm9wcykgOiBpLnByb3BzKSxcclxuICAgICRhdHRyczogaSA9PiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpID8gc2hhbGxvd1JlYWRvbmx5KGkuYXR0cnMpIDogaS5hdHRycyksXHJcbiAgICAkc2xvdHM6IGkgPT4gKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSA/IHNoYWxsb3dSZWFkb25seShpLnNsb3RzKSA6IGkuc2xvdHMpLFxyXG4gICAgJHJlZnM6IGkgPT4gKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSA/IHNoYWxsb3dSZWFkb25seShpLnJlZnMpIDogaS5yZWZzKSxcclxuICAgICRwYXJlbnQ6IGkgPT4gZ2V0UHVibGljSW5zdGFuY2UoaS5wYXJlbnQpLFxyXG4gICAgJHJvb3Q6IGkgPT4gZ2V0UHVibGljSW5zdGFuY2UoaS5yb290KSxcclxuICAgICRlbWl0OiBpID0+IGkuZW1pdCxcclxuICAgICRvcHRpb25zOiBpID0+IChfX1ZVRV9PUFRJT05TX0FQSV9fID8gcmVzb2x2ZU1lcmdlZE9wdGlvbnMoaSkgOiBpLnR5cGUpLFxyXG4gICAgJGZvcmNlVXBkYXRlOiBpID0+ICgpID0+IHF1ZXVlSm9iKGkudXBkYXRlKSxcclxuICAgICRuZXh0VGljazogaSA9PiBuZXh0VGljay5iaW5kKGkucHJveHkpLFxyXG4gICAgJHdhdGNoOiBpID0+IChfX1ZVRV9PUFRJT05TX0FQSV9fID8gaW5zdGFuY2VXYXRjaC5iaW5kKGkpIDogTk9PUClcclxufSk7XHJcbmNvbnN0IFB1YmxpY0luc3RhbmNlUHJveHlIYW5kbGVycyA9IHtcclxuICAgIGdldCh7IF86IGluc3RhbmNlIH0sIGtleSkge1xyXG4gICAgICAgIGNvbnN0IHsgY3R4LCBzZXR1cFN0YXRlLCBkYXRhLCBwcm9wcywgYWNjZXNzQ2FjaGUsIHR5cGUsIGFwcENvbnRleHQgfSA9IGluc3RhbmNlO1xyXG4gICAgICAgIC8vIGZvciBpbnRlcm5hbCBmb3JtYXR0ZXJzIHRvIGtub3cgdGhhdCB0aGlzIGlzIGEgVnVlIGluc3RhbmNlXHJcbiAgICAgICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSAmJiBrZXkgPT09ICdfX2lzVnVlJykge1xyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gcHJpb3JpdGl6ZSA8c2NyaXB0IHNldHVwPiBiaW5kaW5ncyBkdXJpbmcgZGV2LlxyXG4gICAgICAgIC8vIHRoaXMgYWxsb3dzIGV2ZW4gcHJvcGVydGllcyB0aGF0IHN0YXJ0IHdpdGggXyBvciAkIHRvIGJlIHVzZWQgLSBzbyB0aGF0XHJcbiAgICAgICAgLy8gaXQgYWxpZ25zIHdpdGggdGhlIHByb2R1Y3Rpb24gYmVoYXZpb3Igd2hlcmUgdGhlIHJlbmRlciBmbiBpcyBpbmxpbmVkIGFuZFxyXG4gICAgICAgIC8vIGluZGVlZCBoYXMgYWNjZXNzIHRvIGFsbCBkZWNsYXJlZCB2YXJpYWJsZXMuXHJcbiAgICAgICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSAmJlxyXG4gICAgICAgICAgICBzZXR1cFN0YXRlICE9PSBFTVBUWV9PQkogJiZcclxuICAgICAgICAgICAgc2V0dXBTdGF0ZS5fX2lzU2NyaXB0U2V0dXAgJiZcclxuICAgICAgICAgICAgaGFzT3duKHNldHVwU3RhdGUsIGtleSkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHNldHVwU3RhdGVba2V5XTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gZGF0YSAvIHByb3BzIC8gY3R4XHJcbiAgICAgICAgLy8gVGhpcyBnZXR0ZXIgZ2V0cyBjYWxsZWQgZm9yIGV2ZXJ5IHByb3BlcnR5IGFjY2VzcyBvbiB0aGUgcmVuZGVyIGNvbnRleHRcclxuICAgICAgICAvLyBkdXJpbmcgcmVuZGVyIGFuZCBpcyBhIG1ham9yIGhvdHNwb3QuIFRoZSBtb3N0IGV4cGVuc2l2ZSBwYXJ0IG9mIHRoaXNcclxuICAgICAgICAvLyBpcyB0aGUgbXVsdGlwbGUgaGFzT3duKCkgY2FsbHMuIEl0J3MgbXVjaCBmYXN0ZXIgdG8gZG8gYSBzaW1wbGUgcHJvcGVydHlcclxuICAgICAgICAvLyBhY2Nlc3Mgb24gYSBwbGFpbiBvYmplY3QsIHNvIHdlIHVzZSBhbiBhY2Nlc3NDYWNoZSBvYmplY3QgKHdpdGggbnVsbFxyXG4gICAgICAgIC8vIHByb3RvdHlwZSkgdG8gbWVtb2l6ZSB3aGF0IGFjY2VzcyB0eXBlIGEga2V5IGNvcnJlc3BvbmRzIHRvLlxyXG4gICAgICAgIGxldCBub3JtYWxpemVkUHJvcHM7XHJcbiAgICAgICAgaWYgKGtleVswXSAhPT0gJyQnKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IG4gPSBhY2Nlc3NDYWNoZVtrZXldO1xyXG4gICAgICAgICAgICBpZiAobiAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKG4pIHtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDEgLyogU0VUVVAgKi86XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBzZXR1cFN0YXRlW2tleV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAyIC8qIERBVEEgKi86XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBkYXRhW2tleV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA0IC8qIENPTlRFWFQgKi86XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBjdHhba2V5XTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDMgLyogUFJPUFMgKi86XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBwcm9wc1trZXldO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIGRlZmF1bHQ6IGp1c3QgZmFsbHRocm91Z2hcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmIChzZXR1cFN0YXRlICE9PSBFTVBUWV9PQkogJiYgaGFzT3duKHNldHVwU3RhdGUsIGtleSkpIHtcclxuICAgICAgICAgICAgICAgIGFjY2Vzc0NhY2hlW2tleV0gPSAxIC8qIFNFVFVQICovO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHNldHVwU3RhdGVba2V5XTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmIChkYXRhICE9PSBFTVBUWV9PQkogJiYgaGFzT3duKGRhdGEsIGtleSkpIHtcclxuICAgICAgICAgICAgICAgIGFjY2Vzc0NhY2hlW2tleV0gPSAyIC8qIERBVEEgKi87XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZGF0YVtrZXldO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKFxyXG4gICAgICAgICAgICAvLyBvbmx5IGNhY2hlIG90aGVyIHByb3BlcnRpZXMgd2hlbiBpbnN0YW5jZSBoYXMgZGVjbGFyZWQgKHRodXMgc3RhYmxlKVxyXG4gICAgICAgICAgICAvLyBwcm9wc1xyXG4gICAgICAgICAgICAobm9ybWFsaXplZFByb3BzID0gaW5zdGFuY2UucHJvcHNPcHRpb25zWzBdKSAmJlxyXG4gICAgICAgICAgICAgICAgaGFzT3duKG5vcm1hbGl6ZWRQcm9wcywga2V5KSkge1xyXG4gICAgICAgICAgICAgICAgYWNjZXNzQ2FjaGVba2V5XSA9IDMgLyogUFJPUFMgKi87XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcHJvcHNba2V5XTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmIChjdHggIT09IEVNUFRZX09CSiAmJiBoYXNPd24oY3R4LCBrZXkpKSB7XHJcbiAgICAgICAgICAgICAgICBhY2Nlc3NDYWNoZVtrZXldID0gNCAvKiBDT05URVhUICovO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGN0eFtrZXldO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKCFfX1ZVRV9PUFRJT05TX0FQSV9fIHx8IHNob3VsZENhY2hlQWNjZXNzKSB7XHJcbiAgICAgICAgICAgICAgICBhY2Nlc3NDYWNoZVtrZXldID0gMCAvKiBPVEhFUiAqLztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCBwdWJsaWNHZXR0ZXIgPSBwdWJsaWNQcm9wZXJ0aWVzTWFwW2tleV07XHJcbiAgICAgICAgbGV0IGNzc01vZHVsZSwgZ2xvYmFsUHJvcGVydGllcztcclxuICAgICAgICAvLyBwdWJsaWMgJHh4eCBwcm9wZXJ0aWVzXHJcbiAgICAgICAgaWYgKHB1YmxpY0dldHRlcikge1xyXG4gICAgICAgICAgICBpZiAoa2V5ID09PSAnJGF0dHJzJykge1xyXG4gICAgICAgICAgICAgICAgdHJhY2soaW5zdGFuY2UsIFwiZ2V0XCIgLyogR0VUICovLCBrZXkpO1xyXG4gICAgICAgICAgICAgICAgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmIG1hcmtBdHRyc0FjY2Vzc2VkKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIHB1YmxpY0dldHRlcihpbnN0YW5jZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKFxyXG4gICAgICAgIC8vIGNzcyBtb2R1bGUgKGluamVjdGVkIGJ5IHZ1ZS1sb2FkZXIpXHJcbiAgICAgICAgKGNzc01vZHVsZSA9IHR5cGUuX19jc3NNb2R1bGVzKSAmJlxyXG4gICAgICAgICAgICAoY3NzTW9kdWxlID0gY3NzTW9kdWxlW2tleV0pKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBjc3NNb2R1bGU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKGN0eCAhPT0gRU1QVFlfT0JKICYmIGhhc093bihjdHgsIGtleSkpIHtcclxuICAgICAgICAgICAgLy8gdXNlciBtYXkgc2V0IGN1c3RvbSBwcm9wZXJ0aWVzIHRvIGB0aGlzYCB0aGF0IHN0YXJ0IHdpdGggYCRgXHJcbiAgICAgICAgICAgIGFjY2Vzc0NhY2hlW2tleV0gPSA0IC8qIENPTlRFWFQgKi87XHJcbiAgICAgICAgICAgIHJldHVybiBjdHhba2V5XTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoXHJcbiAgICAgICAgLy8gZ2xvYmFsIHByb3BlcnRpZXNcclxuICAgICAgICAoKGdsb2JhbFByb3BlcnRpZXMgPSBhcHBDb250ZXh0LmNvbmZpZy5nbG9iYWxQcm9wZXJ0aWVzKSxcclxuICAgICAgICAgICAgaGFzT3duKGdsb2JhbFByb3BlcnRpZXMsIGtleSkpKSB7XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBnbG9iYWxQcm9wZXJ0aWVzW2tleV07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmXHJcbiAgICAgICAgICAgIGN1cnJlbnRSZW5kZXJpbmdJbnN0YW5jZSAmJlxyXG4gICAgICAgICAgICAoIWlzU3RyaW5nKGtleSkgfHxcclxuICAgICAgICAgICAgICAgIC8vICMxMDkxIGF2b2lkIGludGVybmFsIGlzUmVmL2lzVk5vZGUgY2hlY2tzIG9uIGNvbXBvbmVudCBpbnN0YW5jZSBsZWFkaW5nXHJcbiAgICAgICAgICAgICAgICAvLyB0byBpbmZpbml0ZSB3YXJuaW5nIGxvb3BcclxuICAgICAgICAgICAgICAgIGtleS5pbmRleE9mKCdfX3YnKSAhPT0gMCkpIHtcclxuICAgICAgICAgICAgaWYgKGRhdGEgIT09IEVNUFRZX09CSiAmJlxyXG4gICAgICAgICAgICAgICAgKGtleVswXSA9PT0gJyQnIHx8IGtleVswXSA9PT0gJ18nKSAmJlxyXG4gICAgICAgICAgICAgICAgaGFzT3duKGRhdGEsIGtleSkpIHtcclxuICAgICAgICAgICAgICAgIHdhcm4oYFByb3BlcnR5ICR7SlNPTi5zdHJpbmdpZnkoa2V5KX0gbXVzdCBiZSBhY2Nlc3NlZCB2aWEgJGRhdGEgYmVjYXVzZSBpdCBzdGFydHMgd2l0aCBhIHJlc2VydmVkIGAgK1xyXG4gICAgICAgICAgICAgICAgICAgIGBjaGFyYWN0ZXIgKFwiJFwiIG9yIFwiX1wiKSBhbmQgaXMgbm90IHByb3hpZWQgb24gdGhlIHJlbmRlciBjb250ZXh0LmApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKGluc3RhbmNlID09PSBjdXJyZW50UmVuZGVyaW5nSW5zdGFuY2UpIHtcclxuICAgICAgICAgICAgICAgIHdhcm4oYFByb3BlcnR5ICR7SlNPTi5zdHJpbmdpZnkoa2V5KX0gd2FzIGFjY2Vzc2VkIGR1cmluZyByZW5kZXIgYCArXHJcbiAgICAgICAgICAgICAgICAgICAgYGJ1dCBpcyBub3QgZGVmaW5lZCBvbiBpbnN0YW5jZS5gKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH0sXHJcbiAgICBzZXQoeyBfOiBpbnN0YW5jZSB9LCBrZXksIHZhbHVlKSB7XHJcbiAgICAgICAgY29uc3QgeyBkYXRhLCBzZXR1cFN0YXRlLCBjdHggfSA9IGluc3RhbmNlO1xyXG4gICAgICAgIGlmIChzZXR1cFN0YXRlICE9PSBFTVBUWV9PQkogJiYgaGFzT3duKHNldHVwU3RhdGUsIGtleSkpIHtcclxuICAgICAgICAgICAgc2V0dXBTdGF0ZVtrZXldID0gdmFsdWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKGRhdGEgIT09IEVNUFRZX09CSiAmJiBoYXNPd24oZGF0YSwga2V5KSkge1xyXG4gICAgICAgICAgICBkYXRhW2tleV0gPSB2YWx1ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoaGFzT3duKGluc3RhbmNlLnByb3BzLCBrZXkpKSB7XHJcbiAgICAgICAgICAgIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSAmJlxyXG4gICAgICAgICAgICAgICAgd2FybihgQXR0ZW1wdGluZyB0byBtdXRhdGUgcHJvcCBcIiR7a2V5fVwiLiBQcm9wcyBhcmUgcmVhZG9ubHkuYCwgaW5zdGFuY2UpO1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChrZXlbMF0gPT09ICckJyAmJiBrZXkuc2xpY2UoMSkgaW4gaW5zdGFuY2UpIHtcclxuICAgICAgICAgICAgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmXHJcbiAgICAgICAgICAgICAgICB3YXJuKGBBdHRlbXB0aW5nIHRvIG11dGF0ZSBwdWJsaWMgcHJvcGVydHkgXCIke2tleX1cIi4gYCArXHJcbiAgICAgICAgICAgICAgICAgICAgYFByb3BlcnRpZXMgc3RhcnRpbmcgd2l0aCAkIGFyZSByZXNlcnZlZCBhbmQgcmVhZG9ubHkuYCwgaW5zdGFuY2UpO1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmIGtleSBpbiBpbnN0YW5jZS5hcHBDb250ZXh0LmNvbmZpZy5nbG9iYWxQcm9wZXJ0aWVzKSB7XHJcbiAgICAgICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoY3R4LCBrZXksIHtcclxuICAgICAgICAgICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcclxuICAgICAgICAgICAgICAgICAgICB2YWx1ZVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBjdHhba2V5XSA9IHZhbHVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfSxcclxuICAgIGhhcyh7IF86IHsgZGF0YSwgc2V0dXBTdGF0ZSwgYWNjZXNzQ2FjaGUsIGN0eCwgYXBwQ29udGV4dCwgcHJvcHNPcHRpb25zIH0gfSwga2V5KSB7XHJcbiAgICAgICAgbGV0IG5vcm1hbGl6ZWRQcm9wcztcclxuICAgICAgICByZXR1cm4gKCEhYWNjZXNzQ2FjaGVba2V5XSB8fFxyXG4gICAgICAgICAgICAoZGF0YSAhPT0gRU1QVFlfT0JKICYmIGhhc093bihkYXRhLCBrZXkpKSB8fFxyXG4gICAgICAgICAgICAoc2V0dXBTdGF0ZSAhPT0gRU1QVFlfT0JKICYmIGhhc093bihzZXR1cFN0YXRlLCBrZXkpKSB8fFxyXG4gICAgICAgICAgICAoKG5vcm1hbGl6ZWRQcm9wcyA9IHByb3BzT3B0aW9uc1swXSkgJiYgaGFzT3duKG5vcm1hbGl6ZWRQcm9wcywga2V5KSkgfHxcclxuICAgICAgICAgICAgaGFzT3duKGN0eCwga2V5KSB8fFxyXG4gICAgICAgICAgICBoYXNPd24ocHVibGljUHJvcGVydGllc01hcCwga2V5KSB8fFxyXG4gICAgICAgICAgICBoYXNPd24oYXBwQ29udGV4dC5jb25maWcuZ2xvYmFsUHJvcGVydGllcywga2V5KSk7XHJcbiAgICB9XHJcbn07XHJcbmlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgJiYgIWZhbHNlKSB7XHJcbiAgICBQdWJsaWNJbnN0YW5jZVByb3h5SGFuZGxlcnMub3duS2V5cyA9ICh0YXJnZXQpID0+IHtcclxuICAgICAgICB3YXJuKGBBdm9pZCBhcHAgbG9naWMgdGhhdCByZWxpZXMgb24gZW51bWVyYXRpbmcga2V5cyBvbiBhIGNvbXBvbmVudCBpbnN0YW5jZS4gYCArXHJcbiAgICAgICAgICAgIGBUaGUga2V5cyB3aWxsIGJlIGVtcHR5IGluIHByb2R1Y3Rpb24gbW9kZSB0byBhdm9pZCBwZXJmb3JtYW5jZSBvdmVyaGVhZC5gKTtcclxuICAgICAgICByZXR1cm4gUmVmbGVjdC5vd25LZXlzKHRhcmdldCk7XHJcbiAgICB9O1xyXG59XHJcbmNvbnN0IFJ1bnRpbWVDb21waWxlZFB1YmxpY0luc3RhbmNlUHJveHlIYW5kbGVycyA9IC8qI19fUFVSRV9fKi8gZXh0ZW5kKHt9LCBQdWJsaWNJbnN0YW5jZVByb3h5SGFuZGxlcnMsIHtcclxuICAgIGdldCh0YXJnZXQsIGtleSkge1xyXG4gICAgICAgIC8vIGZhc3QgcGF0aCBmb3IgdW5zY29wYWJsZXMgd2hlbiB1c2luZyBgd2l0aGAgYmxvY2tcclxuICAgICAgICBpZiAoa2V5ID09PSBTeW1ib2wudW5zY29wYWJsZXMpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gUHVibGljSW5zdGFuY2VQcm94eUhhbmRsZXJzLmdldCh0YXJnZXQsIGtleSwgdGFyZ2V0KTtcclxuICAgIH0sXHJcbiAgICBoYXMoXywga2V5KSB7XHJcbiAgICAgICAgY29uc3QgaGFzID0ga2V5WzBdICE9PSAnXycgJiYgIWlzR2xvYmFsbHlXaGl0ZWxpc3RlZChrZXkpO1xyXG4gICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgJiYgIWhhcyAmJiBQdWJsaWNJbnN0YW5jZVByb3h5SGFuZGxlcnMuaGFzKF8sIGtleSkpIHtcclxuICAgICAgICAgICAgd2FybihgUHJvcGVydHkgJHtKU09OLnN0cmluZ2lmeShrZXkpfSBzaG91bGQgbm90IHN0YXJ0IHdpdGggXyB3aGljaCBpcyBhIHJlc2VydmVkIHByZWZpeCBmb3IgVnVlIGludGVybmFscy5gKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGhhcztcclxuICAgIH1cclxufSk7XHJcbi8vIGRldiBvbmx5XHJcbi8vIEluIGRldiBtb2RlLCB0aGUgcHJveHkgdGFyZ2V0IGV4cG9zZXMgdGhlIHNhbWUgcHJvcGVydGllcyBhcyBzZWVuIG9uIGB0aGlzYFxyXG4vLyBmb3IgZWFzaWVyIGNvbnNvbGUgaW5zcGVjdGlvbi4gSW4gcHJvZCBtb2RlIGl0IHdpbGwgYmUgYW4gZW1wdHkgb2JqZWN0IHNvXHJcbi8vIHRoZXNlIHByb3BlcnRpZXMgZGVmaW5pdGlvbnMgY2FuIGJlIHNraXBwZWQuXHJcbmZ1bmN0aW9uIGNyZWF0ZURldlJlbmRlckNvbnRleHQoaW5zdGFuY2UpIHtcclxuICAgIGNvbnN0IHRhcmdldCA9IHt9O1xyXG4gICAgLy8gZXhwb3NlIGludGVybmFsIGluc3RhbmNlIGZvciBwcm94eSBoYW5kbGVyc1xyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgYF9gLCB7XHJcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxyXG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxyXG4gICAgICAgIGdldDogKCkgPT4gaW5zdGFuY2VcclxuICAgIH0pO1xyXG4gICAgLy8gZXhwb3NlIHB1YmxpYyBwcm9wZXJ0aWVzXHJcbiAgICBPYmplY3Qua2V5cyhwdWJsaWNQcm9wZXJ0aWVzTWFwKS5mb3JFYWNoKGtleSA9PiB7XHJcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCB7XHJcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcclxuICAgICAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXHJcbiAgICAgICAgICAgIGdldDogKCkgPT4gcHVibGljUHJvcGVydGllc01hcFtrZXldKGluc3RhbmNlKSxcclxuICAgICAgICAgICAgLy8gaW50ZXJjZXB0ZWQgYnkgdGhlIHByb3h5IHNvIG5vIG5lZWQgZm9yIGltcGxlbWVudGF0aW9uLFxyXG4gICAgICAgICAgICAvLyBidXQgbmVlZGVkIHRvIHByZXZlbnQgc2V0IGVycm9yc1xyXG4gICAgICAgICAgICBzZXQ6IE5PT1BcclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG4gICAgcmV0dXJuIHRhcmdldDtcclxufVxyXG4vLyBkZXYgb25seVxyXG5mdW5jdGlvbiBleHBvc2VQcm9wc09uUmVuZGVyQ29udGV4dChpbnN0YW5jZSkge1xyXG4gICAgY29uc3QgeyBjdHgsIHByb3BzT3B0aW9uczogW3Byb3BzT3B0aW9uc10gfSA9IGluc3RhbmNlO1xyXG4gICAgaWYgKHByb3BzT3B0aW9ucykge1xyXG4gICAgICAgIE9iamVjdC5rZXlzKHByb3BzT3B0aW9ucykuZm9yRWFjaChrZXkgPT4ge1xyXG4gICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoY3R4LCBrZXksIHtcclxuICAgICAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXHJcbiAgICAgICAgICAgICAgICBnZXQ6ICgpID0+IGluc3RhbmNlLnByb3BzW2tleV0sXHJcbiAgICAgICAgICAgICAgICBzZXQ6IE5PT1BcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbn1cclxuLy8gZGV2IG9ubHlcclxuZnVuY3Rpb24gZXhwb3NlU2V0dXBTdGF0ZU9uUmVuZGVyQ29udGV4dChpbnN0YW5jZSkge1xyXG4gICAgY29uc3QgeyBjdHgsIHNldHVwU3RhdGUgfSA9IGluc3RhbmNlO1xyXG4gICAgT2JqZWN0LmtleXModG9SYXcoc2V0dXBTdGF0ZSkpLmZvckVhY2goa2V5ID0+IHtcclxuICAgICAgICBpZiAoIXNldHVwU3RhdGUuX19pc1NjcmlwdFNldHVwKSB7XHJcbiAgICAgICAgICAgIGlmIChrZXlbMF0gPT09ICckJyB8fCBrZXlbMF0gPT09ICdfJykge1xyXG4gICAgICAgICAgICAgICAgd2Fybihgc2V0dXAoKSByZXR1cm4gcHJvcGVydHkgJHtKU09OLnN0cmluZ2lmeShrZXkpfSBzaG91bGQgbm90IHN0YXJ0IHdpdGggXCIkXCIgb3IgXCJfXCIgYCArXHJcbiAgICAgICAgICAgICAgICAgICAgYHdoaWNoIGFyZSByZXNlcnZlZCBwcmVmaXhlcyBmb3IgVnVlIGludGVybmFscy5gKTtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoY3R4LCBrZXksIHtcclxuICAgICAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXHJcbiAgICAgICAgICAgICAgICBnZXQ6ICgpID0+IHNldHVwU3RhdGVba2V5XSxcclxuICAgICAgICAgICAgICAgIHNldDogTk9PUFxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxufVxuXG5jb25zdCBlbXB0eUFwcENvbnRleHQgPSBjcmVhdGVBcHBDb250ZXh0KCk7XHJcbmxldCB1aWQkMSA9IDA7XHJcbmZ1bmN0aW9uIGNyZWF0ZUNvbXBvbmVudEluc3RhbmNlKHZub2RlLCBwYXJlbnQsIHN1c3BlbnNlKSB7XHJcbiAgICBjb25zdCB0eXBlID0gdm5vZGUudHlwZTtcclxuICAgIC8vIGluaGVyaXQgcGFyZW50IGFwcCBjb250ZXh0IC0gb3IgLSBpZiByb290LCBhZG9wdCBmcm9tIHJvb3Qgdm5vZGVcclxuICAgIGNvbnN0IGFwcENvbnRleHQgPSAocGFyZW50ID8gcGFyZW50LmFwcENvbnRleHQgOiB2bm9kZS5hcHBDb250ZXh0KSB8fCBlbXB0eUFwcENvbnRleHQ7XHJcbiAgICBjb25zdCBpbnN0YW5jZSA9IHtcclxuICAgICAgICB1aWQ6IHVpZCQxKyssXHJcbiAgICAgICAgdm5vZGUsXHJcbiAgICAgICAgdHlwZSxcclxuICAgICAgICBwYXJlbnQsXHJcbiAgICAgICAgYXBwQ29udGV4dCxcclxuICAgICAgICByb290OiBudWxsLFxyXG4gICAgICAgIG5leHQ6IG51bGwsXHJcbiAgICAgICAgc3ViVHJlZTogbnVsbCxcclxuICAgICAgICBlZmZlY3Q6IG51bGwsXHJcbiAgICAgICAgdXBkYXRlOiBudWxsLFxyXG4gICAgICAgIHNjb3BlOiBuZXcgRWZmZWN0U2NvcGUodHJ1ZSAvKiBkZXRhY2hlZCAqLyksXHJcbiAgICAgICAgcmVuZGVyOiBudWxsLFxyXG4gICAgICAgIHByb3h5OiBudWxsLFxyXG4gICAgICAgIGV4cG9zZWQ6IG51bGwsXHJcbiAgICAgICAgZXhwb3NlUHJveHk6IG51bGwsXHJcbiAgICAgICAgd2l0aFByb3h5OiBudWxsLFxyXG4gICAgICAgIHByb3ZpZGVzOiBwYXJlbnQgPyBwYXJlbnQucHJvdmlkZXMgOiBPYmplY3QuY3JlYXRlKGFwcENvbnRleHQucHJvdmlkZXMpLFxyXG4gICAgICAgIGFjY2Vzc0NhY2hlOiBudWxsLFxyXG4gICAgICAgIHJlbmRlckNhY2hlOiBbXSxcclxuICAgICAgICAvLyBsb2NhbCByZXNvdmxlZCBhc3NldHNcclxuICAgICAgICBjb21wb25lbnRzOiBudWxsLFxyXG4gICAgICAgIGRpcmVjdGl2ZXM6IG51bGwsXHJcbiAgICAgICAgLy8gcmVzb2x2ZWQgcHJvcHMgYW5kIGVtaXRzIG9wdGlvbnNcclxuICAgICAgICBwcm9wc09wdGlvbnM6IG5vcm1hbGl6ZVByb3BzT3B0aW9ucyh0eXBlLCBhcHBDb250ZXh0KSxcclxuICAgICAgICBlbWl0c09wdGlvbnM6IG5vcm1hbGl6ZUVtaXRzT3B0aW9ucyh0eXBlLCBhcHBDb250ZXh0KSxcclxuICAgICAgICAvLyBlbWl0XHJcbiAgICAgICAgZW1pdDogbnVsbCxcclxuICAgICAgICBlbWl0dGVkOiBudWxsLFxyXG4gICAgICAgIC8vIHByb3BzIGRlZmF1bHQgdmFsdWVcclxuICAgICAgICBwcm9wc0RlZmF1bHRzOiBFTVBUWV9PQkosXHJcbiAgICAgICAgLy8gaW5oZXJpdEF0dHJzXHJcbiAgICAgICAgaW5oZXJpdEF0dHJzOiB0eXBlLmluaGVyaXRBdHRycyxcclxuICAgICAgICAvLyBzdGF0ZVxyXG4gICAgICAgIGN0eDogRU1QVFlfT0JKLFxyXG4gICAgICAgIGRhdGE6IEVNUFRZX09CSixcclxuICAgICAgICBwcm9wczogRU1QVFlfT0JKLFxyXG4gICAgICAgIGF0dHJzOiBFTVBUWV9PQkosXHJcbiAgICAgICAgc2xvdHM6IEVNUFRZX09CSixcclxuICAgICAgICByZWZzOiBFTVBUWV9PQkosXHJcbiAgICAgICAgc2V0dXBTdGF0ZTogRU1QVFlfT0JKLFxyXG4gICAgICAgIHNldHVwQ29udGV4dDogbnVsbCxcclxuICAgICAgICAvLyBzdXNwZW5zZSByZWxhdGVkXHJcbiAgICAgICAgc3VzcGVuc2UsXHJcbiAgICAgICAgc3VzcGVuc2VJZDogc3VzcGVuc2UgPyBzdXNwZW5zZS5wZW5kaW5nSWQgOiAwLFxyXG4gICAgICAgIGFzeW5jRGVwOiBudWxsLFxyXG4gICAgICAgIGFzeW5jUmVzb2x2ZWQ6IGZhbHNlLFxyXG4gICAgICAgIC8vIGxpZmVjeWNsZSBob29rc1xyXG4gICAgICAgIC8vIG5vdCB1c2luZyBlbnVtcyBoZXJlIGJlY2F1c2UgaXQgcmVzdWx0cyBpbiBjb21wdXRlZCBwcm9wZXJ0aWVzXHJcbiAgICAgICAgaXNNb3VudGVkOiBmYWxzZSxcclxuICAgICAgICBpc1VubW91bnRlZDogZmFsc2UsXHJcbiAgICAgICAgaXNEZWFjdGl2YXRlZDogZmFsc2UsXHJcbiAgICAgICAgYmM6IG51bGwsXHJcbiAgICAgICAgYzogbnVsbCxcclxuICAgICAgICBibTogbnVsbCxcclxuICAgICAgICBtOiBudWxsLFxyXG4gICAgICAgIGJ1OiBudWxsLFxyXG4gICAgICAgIHU6IG51bGwsXHJcbiAgICAgICAgdW06IG51bGwsXHJcbiAgICAgICAgYnVtOiBudWxsLFxyXG4gICAgICAgIGRhOiBudWxsLFxyXG4gICAgICAgIGE6IG51bGwsXHJcbiAgICAgICAgcnRnOiBudWxsLFxyXG4gICAgICAgIHJ0YzogbnVsbCxcclxuICAgICAgICBlYzogbnVsbCxcclxuICAgICAgICBzcDogbnVsbFxyXG4gICAgfTtcclxuICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykpIHtcclxuICAgICAgICBpbnN0YW5jZS5jdHggPSBjcmVhdGVEZXZSZW5kZXJDb250ZXh0KGluc3RhbmNlKTtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICAgIGluc3RhbmNlLmN0eCA9IHsgXzogaW5zdGFuY2UgfTtcclxuICAgIH1cclxuICAgIGluc3RhbmNlLnJvb3QgPSBwYXJlbnQgPyBwYXJlbnQucm9vdCA6IGluc3RhbmNlO1xyXG4gICAgaW5zdGFuY2UuZW1pdCA9IGVtaXQkMS5iaW5kKG51bGwsIGluc3RhbmNlKTtcclxuICAgIC8vIGFwcGx5IGN1c3RvbSBlbGVtZW50IHNwZWNpYWwgaGFuZGxpbmdcclxuICAgIGlmICh2bm9kZS5jZSkge1xyXG4gICAgICAgIHZub2RlLmNlKGluc3RhbmNlKTtcclxuICAgIH1cclxuICAgIHJldHVybiBpbnN0YW5jZTtcclxufVxyXG5sZXQgY3VycmVudEluc3RhbmNlID0gbnVsbDtcclxuY29uc3QgZ2V0Q3VycmVudEluc3RhbmNlID0gKCkgPT4gY3VycmVudEluc3RhbmNlIHx8IGN1cnJlbnRSZW5kZXJpbmdJbnN0YW5jZTtcclxuY29uc3Qgc2V0Q3VycmVudEluc3RhbmNlID0gKGluc3RhbmNlKSA9PiB7XHJcbiAgICBjdXJyZW50SW5zdGFuY2UgPSBpbnN0YW5jZTtcclxuICAgIGluc3RhbmNlLnNjb3BlLm9uKCk7XHJcbn07XHJcbmNvbnN0IHVuc2V0Q3VycmVudEluc3RhbmNlID0gKCkgPT4ge1xyXG4gICAgY3VycmVudEluc3RhbmNlICYmIGN1cnJlbnRJbnN0YW5jZS5zY29wZS5vZmYoKTtcclxuICAgIGN1cnJlbnRJbnN0YW5jZSA9IG51bGw7XHJcbn07XHJcbmNvbnN0IGlzQnVpbHRJblRhZyA9IC8qI19fUFVSRV9fKi8gbWFrZU1hcCgnc2xvdCxjb21wb25lbnQnKTtcclxuZnVuY3Rpb24gdmFsaWRhdGVDb21wb25lbnROYW1lKG5hbWUsIGNvbmZpZykge1xyXG4gICAgY29uc3QgYXBwSXNOYXRpdmVUYWcgPSBjb25maWcuaXNOYXRpdmVUYWcgfHwgTk87XHJcbiAgICBpZiAoaXNCdWlsdEluVGFnKG5hbWUpIHx8IGFwcElzTmF0aXZlVGFnKG5hbWUpKSB7XHJcbiAgICAgICAgd2FybignRG8gbm90IHVzZSBidWlsdC1pbiBvciByZXNlcnZlZCBIVE1MIGVsZW1lbnRzIGFzIGNvbXBvbmVudCBpZDogJyArIG5hbWUpO1xyXG4gICAgfVxyXG59XHJcbmZ1bmN0aW9uIGlzU3RhdGVmdWxDb21wb25lbnQoaW5zdGFuY2UpIHtcclxuICAgIHJldHVybiBpbnN0YW5jZS52bm9kZS5zaGFwZUZsYWcgJiA0IC8qIFNUQVRFRlVMX0NPTVBPTkVOVCAqLztcclxufVxyXG5sZXQgaXNJblNTUkNvbXBvbmVudFNldHVwID0gZmFsc2U7XHJcbmZ1bmN0aW9uIHNldHVwQ29tcG9uZW50KGluc3RhbmNlLCBpc1NTUiA9IGZhbHNlKSB7XHJcbiAgICBpc0luU1NSQ29tcG9uZW50U2V0dXAgPSBpc1NTUjtcclxuICAgIGNvbnN0IHsgcHJvcHMsIGNoaWxkcmVuIH0gPSBpbnN0YW5jZS52bm9kZTtcclxuICAgIGNvbnN0IGlzU3RhdGVmdWwgPSBpc1N0YXRlZnVsQ29tcG9uZW50KGluc3RhbmNlKTtcclxuICAgIGluaXRQcm9wcyhpbnN0YW5jZSwgcHJvcHMsIGlzU3RhdGVmdWwsIGlzU1NSKTtcclxuICAgIGluaXRTbG90cyhpbnN0YW5jZSwgY2hpbGRyZW4pO1xyXG4gICAgY29uc3Qgc2V0dXBSZXN1bHQgPSBpc1N0YXRlZnVsXHJcbiAgICAgICAgPyBzZXR1cFN0YXRlZnVsQ29tcG9uZW50KGluc3RhbmNlLCBpc1NTUilcclxuICAgICAgICA6IHVuZGVmaW5lZDtcclxuICAgIGlzSW5TU1JDb21wb25lbnRTZXR1cCA9IGZhbHNlO1xyXG4gICAgcmV0dXJuIHNldHVwUmVzdWx0O1xyXG59XHJcbmZ1bmN0aW9uIHNldHVwU3RhdGVmdWxDb21wb25lbnQoaW5zdGFuY2UsIGlzU1NSKSB7XHJcbiAgICBjb25zdCBDb21wb25lbnQgPSBpbnN0YW5jZS50eXBlO1xyXG4gICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSkge1xyXG4gICAgICAgIGlmIChDb21wb25lbnQubmFtZSkge1xyXG4gICAgICAgICAgICB2YWxpZGF0ZUNvbXBvbmVudE5hbWUoQ29tcG9uZW50Lm5hbWUsIGluc3RhbmNlLmFwcENvbnRleHQuY29uZmlnKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKENvbXBvbmVudC5jb21wb25lbnRzKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IG5hbWVzID0gT2JqZWN0LmtleXMoQ29tcG9uZW50LmNvbXBvbmVudHMpO1xyXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG5hbWVzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICB2YWxpZGF0ZUNvbXBvbmVudE5hbWUobmFtZXNbaV0sIGluc3RhbmNlLmFwcENvbnRleHQuY29uZmlnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoQ29tcG9uZW50LmRpcmVjdGl2ZXMpIHtcclxuICAgICAgICAgICAgY29uc3QgbmFtZXMgPSBPYmplY3Qua2V5cyhDb21wb25lbnQuZGlyZWN0aXZlcyk7XHJcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbmFtZXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIHZhbGlkYXRlRGlyZWN0aXZlTmFtZShuYW1lc1tpXSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKENvbXBvbmVudC5jb21waWxlck9wdGlvbnMgJiYgaXNSdW50aW1lT25seSgpKSB7XHJcbiAgICAgICAgICAgIHdhcm4oYFwiY29tcGlsZXJPcHRpb25zXCIgaXMgb25seSBzdXBwb3J0ZWQgd2hlbiB1c2luZyBhIGJ1aWxkIG9mIFZ1ZSB0aGF0IGAgK1xyXG4gICAgICAgICAgICAgICAgYGluY2x1ZGVzIHRoZSBydW50aW1lIGNvbXBpbGVyLiBTaW5jZSB5b3UgYXJlIHVzaW5nIGEgcnVudGltZS1vbmx5IGAgK1xyXG4gICAgICAgICAgICAgICAgYGJ1aWxkLCB0aGUgb3B0aW9ucyBzaG91bGQgYmUgcGFzc2VkIHZpYSB5b3VyIGJ1aWxkIHRvb2wgY29uZmlnIGluc3RlYWQuYCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgLy8gMC4gY3JlYXRlIHJlbmRlciBwcm94eSBwcm9wZXJ0eSBhY2Nlc3MgY2FjaGVcclxuICAgIGluc3RhbmNlLmFjY2Vzc0NhY2hlID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcclxuICAgIC8vIDEuIGNyZWF0ZSBwdWJsaWMgaW5zdGFuY2UgLyByZW5kZXIgcHJveHlcclxuICAgIC8vIGFsc28gbWFyayBpdCByYXcgc28gaXQncyBuZXZlciBvYnNlcnZlZFxyXG4gICAgaW5zdGFuY2UucHJveHkgPSBtYXJrUmF3KG5ldyBQcm94eShpbnN0YW5jZS5jdHgsIFB1YmxpY0luc3RhbmNlUHJveHlIYW5kbGVycykpO1xyXG4gICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSkge1xyXG4gICAgICAgIGV4cG9zZVByb3BzT25SZW5kZXJDb250ZXh0KGluc3RhbmNlKTtcclxuICAgIH1cclxuICAgIC8vIDIuIGNhbGwgc2V0dXAoKVxyXG4gICAgY29uc3QgeyBzZXR1cCB9ID0gQ29tcG9uZW50O1xyXG4gICAgaWYgKHNldHVwKSB7XHJcbiAgICAgICAgY29uc3Qgc2V0dXBDb250ZXh0ID0gKGluc3RhbmNlLnNldHVwQ29udGV4dCA9XHJcbiAgICAgICAgICAgIHNldHVwLmxlbmd0aCA+IDEgPyBjcmVhdGVTZXR1cENvbnRleHQoaW5zdGFuY2UpIDogbnVsbCk7XHJcbiAgICAgICAgc2V0Q3VycmVudEluc3RhbmNlKGluc3RhbmNlKTtcclxuICAgICAgICBwYXVzZVRyYWNraW5nKCk7XHJcbiAgICAgICAgY29uc3Qgc2V0dXBSZXN1bHQgPSBjYWxsV2l0aEVycm9ySGFuZGxpbmcoc2V0dXAsIGluc3RhbmNlLCAwIC8qIFNFVFVQX0ZVTkNUSU9OICovLCBbKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpID8gc2hhbGxvd1JlYWRvbmx5KGluc3RhbmNlLnByb3BzKSA6IGluc3RhbmNlLnByb3BzLCBzZXR1cENvbnRleHRdKTtcclxuICAgICAgICByZXNldFRyYWNraW5nKCk7XHJcbiAgICAgICAgdW5zZXRDdXJyZW50SW5zdGFuY2UoKTtcclxuICAgICAgICBpZiAoaXNQcm9taXNlKHNldHVwUmVzdWx0KSkge1xyXG4gICAgICAgICAgICBzZXR1cFJlc3VsdC50aGVuKHVuc2V0Q3VycmVudEluc3RhbmNlLCB1bnNldEN1cnJlbnRJbnN0YW5jZSk7XHJcbiAgICAgICAgICAgIGlmIChpc1NTUikge1xyXG4gICAgICAgICAgICAgICAgLy8gcmV0dXJuIHRoZSBwcm9taXNlIHNvIHNlcnZlci1yZW5kZXJlciBjYW4gd2FpdCBvbiBpdFxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHNldHVwUmVzdWx0XHJcbiAgICAgICAgICAgICAgICAgICAgLnRoZW4oKHJlc29sdmVkUmVzdWx0KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgaGFuZGxlU2V0dXBSZXN1bHQoaW5zdGFuY2UsIHJlc29sdmVkUmVzdWx0LCBpc1NTUik7XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgIC5jYXRjaChlID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBoYW5kbGVFcnJvcihlLCBpbnN0YW5jZSwgMCAvKiBTRVRVUF9GVU5DVElPTiAqLyk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIC8vIGFzeW5jIHNldHVwIHJldHVybmVkIFByb21pc2UuXHJcbiAgICAgICAgICAgICAgICAvLyBiYWlsIGhlcmUgYW5kIHdhaXQgZm9yIHJlLWVudHJ5LlxyXG4gICAgICAgICAgICAgICAgaW5zdGFuY2UuYXN5bmNEZXAgPSBzZXR1cFJlc3VsdDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgaGFuZGxlU2V0dXBSZXN1bHQoaW5zdGFuY2UsIHNldHVwUmVzdWx0LCBpc1NTUik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgZmluaXNoQ29tcG9uZW50U2V0dXAoaW5zdGFuY2UsIGlzU1NSKTtcclxuICAgIH1cclxufVxyXG5mdW5jdGlvbiBoYW5kbGVTZXR1cFJlc3VsdChpbnN0YW5jZSwgc2V0dXBSZXN1bHQsIGlzU1NSKSB7XHJcbiAgICBpZiAoaXNGdW5jdGlvbihzZXR1cFJlc3VsdCkpIHtcclxuICAgICAgICAvLyBzZXR1cCByZXR1cm5lZCBhbiBpbmxpbmUgcmVuZGVyIGZ1bmN0aW9uXHJcbiAgICAgICAgaWYgKGluc3RhbmNlLnR5cGUuX19zc3JJbmxpbmVSZW5kZXIpIHtcclxuICAgICAgICAgICAgLy8gd2hlbiB0aGUgZnVuY3Rpb24ncyBuYW1lIGlzIGBzc3JSZW5kZXJgIChjb21waWxlZCBieSBTRkMgaW5saW5lIG1vZGUpLFxyXG4gICAgICAgICAgICAvLyBzZXQgaXQgYXMgc3NyUmVuZGVyIGluc3RlYWQuXHJcbiAgICAgICAgICAgIGluc3RhbmNlLnNzclJlbmRlciA9IHNldHVwUmVzdWx0O1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgaW5zdGFuY2UucmVuZGVyID0gc2V0dXBSZXN1bHQ7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgZWxzZSBpZiAoaXNPYmplY3Qoc2V0dXBSZXN1bHQpKSB7XHJcbiAgICAgICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSAmJiBpc1ZOb2RlKHNldHVwUmVzdWx0KSkge1xyXG4gICAgICAgICAgICB3YXJuKGBzZXR1cCgpIHNob3VsZCBub3QgcmV0dXJuIFZOb2RlcyBkaXJlY3RseSAtIGAgK1xyXG4gICAgICAgICAgICAgICAgYHJldHVybiBhIHJlbmRlciBmdW5jdGlvbiBpbnN0ZWFkLmApO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBzZXR1cCByZXR1cm5lZCBiaW5kaW5ncy5cclxuICAgICAgICAvLyBhc3N1bWluZyBhIHJlbmRlciBmdW5jdGlvbiBjb21waWxlZCBmcm9tIHRlbXBsYXRlIGlzIHByZXNlbnQuXHJcbiAgICAgICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB8fCBfX1ZVRV9QUk9EX0RFVlRPT0xTX18pIHtcclxuICAgICAgICAgICAgaW5zdGFuY2UuZGV2dG9vbHNSYXdTZXR1cFN0YXRlID0gc2V0dXBSZXN1bHQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGluc3RhbmNlLnNldHVwU3RhdGUgPSBwcm94eVJlZnMoc2V0dXBSZXN1bHQpO1xyXG4gICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykpIHtcclxuICAgICAgICAgICAgZXhwb3NlU2V0dXBTdGF0ZU9uUmVuZGVyQ29udGV4dChpbnN0YW5jZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgZWxzZSBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmIHNldHVwUmVzdWx0ICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICB3YXJuKGBzZXR1cCgpIHNob3VsZCByZXR1cm4gYW4gb2JqZWN0LiBSZWNlaXZlZDogJHtzZXR1cFJlc3VsdCA9PT0gbnVsbCA/ICdudWxsJyA6IHR5cGVvZiBzZXR1cFJlc3VsdH1gKTtcclxuICAgIH1cclxuICAgIGZpbmlzaENvbXBvbmVudFNldHVwKGluc3RhbmNlLCBpc1NTUik7XHJcbn1cclxubGV0IGNvbXBpbGU7XHJcbmxldCBpbnN0YWxsV2l0aFByb3h5O1xyXG4vKipcclxuICogRm9yIHJ1bnRpbWUtZG9tIHRvIHJlZ2lzdGVyIHRoZSBjb21waWxlci5cclxuICogTm90ZSB0aGUgZXhwb3J0ZWQgbWV0aG9kIHVzZXMgYW55IHRvIGF2b2lkIGQudHMgcmVseWluZyBvbiB0aGUgY29tcGlsZXIgdHlwZXMuXHJcbiAqL1xyXG5mdW5jdGlvbiByZWdpc3RlclJ1bnRpbWVDb21waWxlcihfY29tcGlsZSkge1xyXG4gICAgY29tcGlsZSA9IF9jb21waWxlO1xyXG4gICAgaW5zdGFsbFdpdGhQcm94eSA9IGkgPT4ge1xyXG4gICAgICAgIGlmIChpLnJlbmRlci5fcmMpIHtcclxuICAgICAgICAgICAgaS53aXRoUHJveHkgPSBuZXcgUHJveHkoaS5jdHgsIFJ1bnRpbWVDb21waWxlZFB1YmxpY0luc3RhbmNlUHJveHlIYW5kbGVycyk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxufVxyXG4vLyBkZXYgb25seVxyXG5jb25zdCBpc1J1bnRpbWVPbmx5ID0gKCkgPT4gIWNvbXBpbGU7XHJcbmZ1bmN0aW9uIGZpbmlzaENvbXBvbmVudFNldHVwKGluc3RhbmNlLCBpc1NTUiwgc2tpcE9wdGlvbnMpIHtcclxuICAgIGNvbnN0IENvbXBvbmVudCA9IGluc3RhbmNlLnR5cGU7XHJcbiAgICAvLyB0ZW1wbGF0ZSAvIHJlbmRlciBmdW5jdGlvbiBub3JtYWxpemF0aW9uXHJcbiAgICAvLyBjb3VsZCBiZSBhbHJlYWR5IHNldCB3aGVuIHJldHVybmVkIGZyb20gc2V0dXAoKVxyXG4gICAgaWYgKCFpbnN0YW5jZS5yZW5kZXIpIHtcclxuICAgICAgICAvLyBvbmx5IGRvIG9uLXRoZS1mbHkgY29tcGlsZSBpZiBub3QgaW4gU1NSIC0gU1NSIG9uLXRoZS1mbHkgY29tcGxpYXRpb25cclxuICAgICAgICAvLyBpcyBkb25lIGJ5IHNlcnZlci1yZW5kZXJlclxyXG4gICAgICAgIGlmICghaXNTU1IgJiYgY29tcGlsZSAmJiAhQ29tcG9uZW50LnJlbmRlcikge1xyXG4gICAgICAgICAgICBjb25zdCB0ZW1wbGF0ZSA9IENvbXBvbmVudC50ZW1wbGF0ZTtcclxuICAgICAgICAgICAgaWYgKHRlbXBsYXRlKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc3RhcnRNZWFzdXJlKGluc3RhbmNlLCBgY29tcGlsZWApO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgY29uc3QgeyBpc0N1c3RvbUVsZW1lbnQsIGNvbXBpbGVyT3B0aW9ucyB9ID0gaW5zdGFuY2UuYXBwQ29udGV4dC5jb25maWc7XHJcbiAgICAgICAgICAgICAgICBjb25zdCB7IGRlbGltaXRlcnMsIGNvbXBpbGVyT3B0aW9uczogY29tcG9uZW50Q29tcGlsZXJPcHRpb25zIH0gPSBDb21wb25lbnQ7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBmaW5hbENvbXBpbGVyT3B0aW9ucyA9IGV4dGVuZChleHRlbmQoe1xyXG4gICAgICAgICAgICAgICAgICAgIGlzQ3VzdG9tRWxlbWVudCxcclxuICAgICAgICAgICAgICAgICAgICBkZWxpbWl0ZXJzXHJcbiAgICAgICAgICAgICAgICB9LCBjb21waWxlck9wdGlvbnMpLCBjb21wb25lbnRDb21waWxlck9wdGlvbnMpO1xyXG4gICAgICAgICAgICAgICAgQ29tcG9uZW50LnJlbmRlciA9IGNvbXBpbGUodGVtcGxhdGUsIGZpbmFsQ29tcGlsZXJPcHRpb25zKTtcclxuICAgICAgICAgICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykpIHtcclxuICAgICAgICAgICAgICAgICAgICBlbmRNZWFzdXJlKGluc3RhbmNlLCBgY29tcGlsZWApO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGluc3RhbmNlLnJlbmRlciA9IChDb21wb25lbnQucmVuZGVyIHx8IE5PT1ApO1xyXG4gICAgICAgIC8vIGZvciBydW50aW1lLWNvbXBpbGVkIHJlbmRlciBmdW5jdGlvbnMgdXNpbmcgYHdpdGhgIGJsb2NrcywgdGhlIHJlbmRlclxyXG4gICAgICAgIC8vIHByb3h5IHVzZWQgbmVlZHMgYSBkaWZmZXJlbnQgYGhhc2AgaGFuZGxlciB3aGljaCBpcyBtb3JlIHBlcmZvcm1hbnQgYW5kXHJcbiAgICAgICAgLy8gYWxzbyBvbmx5IGFsbG93cyBhIHdoaXRlbGlzdCBvZiBnbG9iYWxzIHRvIGZhbGx0aHJvdWdoLlxyXG4gICAgICAgIGlmIChpbnN0YWxsV2l0aFByb3h5KSB7XHJcbiAgICAgICAgICAgIGluc3RhbGxXaXRoUHJveHkoaW5zdGFuY2UpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIC8vIHN1cHBvcnQgZm9yIDIueCBvcHRpb25zXHJcbiAgICBpZiAoX19WVUVfT1BUSU9OU19BUElfXyAmJiAhKGZhbHNlICkpIHtcclxuICAgICAgICBzZXRDdXJyZW50SW5zdGFuY2UoaW5zdGFuY2UpO1xyXG4gICAgICAgIHBhdXNlVHJhY2tpbmcoKTtcclxuICAgICAgICBhcHBseU9wdGlvbnMoaW5zdGFuY2UpO1xyXG4gICAgICAgIHJlc2V0VHJhY2tpbmcoKTtcclxuICAgICAgICB1bnNldEN1cnJlbnRJbnN0YW5jZSgpO1xyXG4gICAgfVxyXG4gICAgLy8gd2FybiBtaXNzaW5nIHRlbXBsYXRlL3JlbmRlclxyXG4gICAgLy8gdGhlIHJ1bnRpbWUgY29tcGlsYXRpb24gb2YgdGVtcGxhdGUgaW4gU1NSIGlzIGRvbmUgYnkgc2VydmVyLXJlbmRlclxyXG4gICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSAmJiAhQ29tcG9uZW50LnJlbmRlciAmJiBpbnN0YW5jZS5yZW5kZXIgPT09IE5PT1AgJiYgIWlzU1NSKSB7XHJcbiAgICAgICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXHJcbiAgICAgICAgaWYgKCFjb21waWxlICYmIENvbXBvbmVudC50ZW1wbGF0ZSkge1xyXG4gICAgICAgICAgICB3YXJuKGBDb21wb25lbnQgcHJvdmlkZWQgdGVtcGxhdGUgb3B0aW9uIGJ1dCBgICtcclxuICAgICAgICAgICAgICAgIGBydW50aW1lIGNvbXBpbGF0aW9uIGlzIG5vdCBzdXBwb3J0ZWQgaW4gdGhpcyBidWlsZCBvZiBWdWUuYCArXHJcbiAgICAgICAgICAgICAgICAoYCBDb25maWd1cmUgeW91ciBidW5kbGVyIHRvIGFsaWFzIFwidnVlXCIgdG8gXCJ2dWUvZGlzdC92dWUuZXNtLWJ1bmRsZXIuanNcIi5gXHJcbiAgICAgICAgICAgICAgICAgICAgKSAvKiBzaG91bGQgbm90IGhhcHBlbiAqLyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICB3YXJuKGBDb21wb25lbnQgaXMgbWlzc2luZyB0ZW1wbGF0ZSBvciByZW5kZXIgZnVuY3Rpb24uYCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbmZ1bmN0aW9uIGNyZWF0ZUF0dHJzUHJveHkoaW5zdGFuY2UpIHtcclxuICAgIHJldHVybiBuZXcgUHJveHkoaW5zdGFuY2UuYXR0cnMsIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKVxyXG4gICAgICAgID8ge1xyXG4gICAgICAgICAgICBnZXQodGFyZ2V0LCBrZXkpIHtcclxuICAgICAgICAgICAgICAgIG1hcmtBdHRyc0FjY2Vzc2VkKCk7XHJcbiAgICAgICAgICAgICAgICB0cmFjayhpbnN0YW5jZSwgXCJnZXRcIiAvKiBHRVQgKi8sICckYXR0cnMnKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0YXJnZXRba2V5XTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgc2V0KCkge1xyXG4gICAgICAgICAgICAgICAgd2Fybihgc2V0dXBDb250ZXh0LmF0dHJzIGlzIHJlYWRvbmx5LmApO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBkZWxldGVQcm9wZXJ0eSgpIHtcclxuICAgICAgICAgICAgICAgIHdhcm4oYHNldHVwQ29udGV4dC5hdHRycyBpcyByZWFkb25seS5gKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICA6IHtcclxuICAgICAgICAgICAgZ2V0KHRhcmdldCwga2V5KSB7XHJcbiAgICAgICAgICAgICAgICB0cmFjayhpbnN0YW5jZSwgXCJnZXRcIiAvKiBHRVQgKi8sICckYXR0cnMnKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0YXJnZXRba2V5XTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG59XHJcbmZ1bmN0aW9uIGNyZWF0ZVNldHVwQ29udGV4dChpbnN0YW5jZSkge1xyXG4gICAgY29uc3QgZXhwb3NlID0gZXhwb3NlZCA9PiB7XHJcbiAgICAgICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSAmJiBpbnN0YW5jZS5leHBvc2VkKSB7XHJcbiAgICAgICAgICAgIHdhcm4oYGV4cG9zZSgpIHNob3VsZCBiZSBjYWxsZWQgb25seSBvbmNlIHBlciBzZXR1cCgpLmApO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnN0YW5jZS5leHBvc2VkID0gZXhwb3NlZCB8fCB7fTtcclxuICAgIH07XHJcbiAgICBsZXQgYXR0cnM7XHJcbiAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpKSB7XHJcbiAgICAgICAgLy8gV2UgdXNlIGdldHRlcnMgaW4gZGV2IGluIGNhc2UgbGlicyBsaWtlIHRlc3QtdXRpbHMgb3ZlcndyaXRlIGluc3RhbmNlXHJcbiAgICAgICAgLy8gcHJvcGVydGllcyAob3ZlcndyaXRlcyBzaG91bGQgbm90IGJlIGRvbmUgaW4gcHJvZClcclxuICAgICAgICByZXR1cm4gT2JqZWN0LmZyZWV6ZSh7XHJcbiAgICAgICAgICAgIGdldCBhdHRycygpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBhdHRycyB8fCAoYXR0cnMgPSBjcmVhdGVBdHRyc1Byb3h5KGluc3RhbmNlKSk7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGdldCBzbG90cygpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBzaGFsbG93UmVhZG9ubHkoaW5zdGFuY2Uuc2xvdHMpO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBnZXQgZW1pdCgpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiAoZXZlbnQsIC4uLmFyZ3MpID0+IGluc3RhbmNlLmVtaXQoZXZlbnQsIC4uLmFyZ3MpO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBleHBvc2VcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIGdldCBhdHRycygpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBhdHRycyB8fCAoYXR0cnMgPSBjcmVhdGVBdHRyc1Byb3h5KGluc3RhbmNlKSk7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHNsb3RzOiBpbnN0YW5jZS5zbG90cyxcclxuICAgICAgICAgICAgZW1pdDogaW5zdGFuY2UuZW1pdCxcclxuICAgICAgICAgICAgZXhwb3NlXHJcbiAgICAgICAgfTtcclxuICAgIH1cclxufVxyXG5mdW5jdGlvbiBnZXRFeHBvc2VQcm94eShpbnN0YW5jZSkge1xyXG4gICAgaWYgKGluc3RhbmNlLmV4cG9zZWQpIHtcclxuICAgICAgICByZXR1cm4gKGluc3RhbmNlLmV4cG9zZVByb3h5IHx8XHJcbiAgICAgICAgICAgIChpbnN0YW5jZS5leHBvc2VQcm94eSA9IG5ldyBQcm94eShwcm94eVJlZnMobWFya1JhdyhpbnN0YW5jZS5leHBvc2VkKSksIHtcclxuICAgICAgICAgICAgICAgIGdldCh0YXJnZXQsIGtleSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChrZXkgaW4gdGFyZ2V0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0YXJnZXRba2V5XTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoa2V5IGluIHB1YmxpY1Byb3BlcnRpZXNNYXApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHB1YmxpY1Byb3BlcnRpZXNNYXBba2V5XShpbnN0YW5jZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KSkpO1xyXG4gICAgfVxyXG59XHJcbmNvbnN0IGNsYXNzaWZ5UkUgPSAvKD86XnxbLV9dKShcXHcpL2c7XHJcbmNvbnN0IGNsYXNzaWZ5ID0gKHN0cikgPT4gc3RyLnJlcGxhY2UoY2xhc3NpZnlSRSwgYyA9PiBjLnRvVXBwZXJDYXNlKCkpLnJlcGxhY2UoL1stX10vZywgJycpO1xyXG5mdW5jdGlvbiBnZXRDb21wb25lbnROYW1lKENvbXBvbmVudCkge1xyXG4gICAgcmV0dXJuIGlzRnVuY3Rpb24oQ29tcG9uZW50KVxyXG4gICAgICAgID8gQ29tcG9uZW50LmRpc3BsYXlOYW1lIHx8IENvbXBvbmVudC5uYW1lXHJcbiAgICAgICAgOiBDb21wb25lbnQubmFtZTtcclxufVxyXG4vKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xyXG5mdW5jdGlvbiBmb3JtYXRDb21wb25lbnROYW1lKGluc3RhbmNlLCBDb21wb25lbnQsIGlzUm9vdCA9IGZhbHNlKSB7XHJcbiAgICBsZXQgbmFtZSA9IGdldENvbXBvbmVudE5hbWUoQ29tcG9uZW50KTtcclxuICAgIGlmICghbmFtZSAmJiBDb21wb25lbnQuX19maWxlKSB7XHJcbiAgICAgICAgY29uc3QgbWF0Y2ggPSBDb21wb25lbnQuX19maWxlLm1hdGNoKC8oW14vXFxcXF0rKVxcLlxcdyskLyk7XHJcbiAgICAgICAgaWYgKG1hdGNoKSB7XHJcbiAgICAgICAgICAgIG5hbWUgPSBtYXRjaFsxXTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBpZiAoIW5hbWUgJiYgaW5zdGFuY2UgJiYgaW5zdGFuY2UucGFyZW50KSB7XHJcbiAgICAgICAgLy8gdHJ5IHRvIGluZmVyIHRoZSBuYW1lIGJhc2VkIG9uIHJldmVyc2UgcmVzb2x1dGlvblxyXG4gICAgICAgIGNvbnN0IGluZmVyRnJvbVJlZ2lzdHJ5ID0gKHJlZ2lzdHJ5KSA9PiB7XHJcbiAgICAgICAgICAgIGZvciAoY29uc3Qga2V5IGluIHJlZ2lzdHJ5KSB7XHJcbiAgICAgICAgICAgICAgICBpZiAocmVnaXN0cnlba2V5XSA9PT0gQ29tcG9uZW50KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGtleTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgbmFtZSA9XHJcbiAgICAgICAgICAgIGluZmVyRnJvbVJlZ2lzdHJ5KGluc3RhbmNlLmNvbXBvbmVudHMgfHxcclxuICAgICAgICAgICAgICAgIGluc3RhbmNlLnBhcmVudC50eXBlLmNvbXBvbmVudHMpIHx8IGluZmVyRnJvbVJlZ2lzdHJ5KGluc3RhbmNlLmFwcENvbnRleHQuY29tcG9uZW50cyk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gbmFtZSA/IGNsYXNzaWZ5KG5hbWUpIDogaXNSb290ID8gYEFwcGAgOiBgQW5vbnltb3VzYDtcclxufVxyXG5mdW5jdGlvbiBpc0NsYXNzQ29tcG9uZW50KHZhbHVlKSB7XHJcbiAgICByZXR1cm4gaXNGdW5jdGlvbih2YWx1ZSkgJiYgJ19fdmNjT3B0cycgaW4gdmFsdWU7XHJcbn1cblxuY29uc3Qgc3RhY2sgPSBbXTtcclxuZnVuY3Rpb24gcHVzaFdhcm5pbmdDb250ZXh0KHZub2RlKSB7XHJcbiAgICBzdGFjay5wdXNoKHZub2RlKTtcclxufVxyXG5mdW5jdGlvbiBwb3BXYXJuaW5nQ29udGV4dCgpIHtcclxuICAgIHN0YWNrLnBvcCgpO1xyXG59XHJcbmZ1bmN0aW9uIHdhcm4obXNnLCAuLi5hcmdzKSB7XHJcbiAgICAvLyBhdm9pZCBwcm9wcyBmb3JtYXR0aW5nIG9yIHdhcm4gaGFuZGxlciB0cmFja2luZyBkZXBzIHRoYXQgbWlnaHQgYmUgbXV0YXRlZFxyXG4gICAgLy8gZHVyaW5nIHBhdGNoLCBsZWFkaW5nIHRvIGluZmluaXRlIHJlY3Vyc2lvbi5cclxuICAgIHBhdXNlVHJhY2tpbmcoKTtcclxuICAgIGNvbnN0IGluc3RhbmNlID0gc3RhY2subGVuZ3RoID8gc3RhY2tbc3RhY2subGVuZ3RoIC0gMV0uY29tcG9uZW50IDogbnVsbDtcclxuICAgIGNvbnN0IGFwcFdhcm5IYW5kbGVyID0gaW5zdGFuY2UgJiYgaW5zdGFuY2UuYXBwQ29udGV4dC5jb25maWcud2FybkhhbmRsZXI7XHJcbiAgICBjb25zdCB0cmFjZSA9IGdldENvbXBvbmVudFRyYWNlKCk7XHJcbiAgICBpZiAoYXBwV2FybkhhbmRsZXIpIHtcclxuICAgICAgICBjYWxsV2l0aEVycm9ySGFuZGxpbmcoYXBwV2FybkhhbmRsZXIsIGluc3RhbmNlLCAxMSAvKiBBUFBfV0FSTl9IQU5ETEVSICovLCBbXHJcbiAgICAgICAgICAgIG1zZyArIGFyZ3Muam9pbignJyksXHJcbiAgICAgICAgICAgIGluc3RhbmNlICYmIGluc3RhbmNlLnByb3h5LFxyXG4gICAgICAgICAgICB0cmFjZVxyXG4gICAgICAgICAgICAgICAgLm1hcCgoeyB2bm9kZSB9KSA9PiBgYXQgPCR7Zm9ybWF0Q29tcG9uZW50TmFtZShpbnN0YW5jZSwgdm5vZGUudHlwZSl9PmApXHJcbiAgICAgICAgICAgICAgICAuam9pbignXFxuJyksXHJcbiAgICAgICAgICAgIHRyYWNlXHJcbiAgICAgICAgXSk7XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgICBjb25zdCB3YXJuQXJncyA9IFtgW1Z1ZSB3YXJuXTogJHttc2d9YCwgLi4uYXJnc107XHJcbiAgICAgICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXHJcbiAgICAgICAgaWYgKHRyYWNlLmxlbmd0aCAmJlxyXG4gICAgICAgICAgICAvLyBhdm9pZCBzcGFtbWluZyBjb25zb2xlIGR1cmluZyB0ZXN0c1xyXG4gICAgICAgICAgICAhZmFsc2UpIHtcclxuICAgICAgICAgICAgd2FybkFyZ3MucHVzaChgXFxuYCwgLi4uZm9ybWF0VHJhY2UodHJhY2UpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc29sZS53YXJuKC4uLndhcm5BcmdzKTtcclxuICAgIH1cclxuICAgIHJlc2V0VHJhY2tpbmcoKTtcclxufVxyXG5mdW5jdGlvbiBnZXRDb21wb25lbnRUcmFjZSgpIHtcclxuICAgIGxldCBjdXJyZW50Vk5vZGUgPSBzdGFja1tzdGFjay5sZW5ndGggLSAxXTtcclxuICAgIGlmICghY3VycmVudFZOb2RlKSB7XHJcbiAgICAgICAgcmV0dXJuIFtdO1xyXG4gICAgfVxyXG4gICAgLy8gd2UgY2FuJ3QganVzdCB1c2UgdGhlIHN0YWNrIGJlY2F1c2UgaXQgd2lsbCBiZSBpbmNvbXBsZXRlIGR1cmluZyB1cGRhdGVzXHJcbiAgICAvLyB0aGF0IGRpZCBub3Qgc3RhcnQgZnJvbSB0aGUgcm9vdC4gUmUtY29uc3RydWN0IHRoZSBwYXJlbnQgY2hhaW4gdXNpbmdcclxuICAgIC8vIGluc3RhbmNlIHBhcmVudCBwb2ludGVycy5cclxuICAgIGNvbnN0IG5vcm1hbGl6ZWRTdGFjayA9IFtdO1xyXG4gICAgd2hpbGUgKGN1cnJlbnRWTm9kZSkge1xyXG4gICAgICAgIGNvbnN0IGxhc3QgPSBub3JtYWxpemVkU3RhY2tbMF07XHJcbiAgICAgICAgaWYgKGxhc3QgJiYgbGFzdC52bm9kZSA9PT0gY3VycmVudFZOb2RlKSB7XHJcbiAgICAgICAgICAgIGxhc3QucmVjdXJzZUNvdW50Kys7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBub3JtYWxpemVkU3RhY2sucHVzaCh7XHJcbiAgICAgICAgICAgICAgICB2bm9kZTogY3VycmVudFZOb2RlLFxyXG4gICAgICAgICAgICAgICAgcmVjdXJzZUNvdW50OiAwXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCBwYXJlbnRJbnN0YW5jZSA9IGN1cnJlbnRWTm9kZS5jb21wb25lbnQgJiYgY3VycmVudFZOb2RlLmNvbXBvbmVudC5wYXJlbnQ7XHJcbiAgICAgICAgY3VycmVudFZOb2RlID0gcGFyZW50SW5zdGFuY2UgJiYgcGFyZW50SW5zdGFuY2Uudm5vZGU7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gbm9ybWFsaXplZFN0YWNrO1xyXG59XHJcbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXHJcbmZ1bmN0aW9uIGZvcm1hdFRyYWNlKHRyYWNlKSB7XHJcbiAgICBjb25zdCBsb2dzID0gW107XHJcbiAgICB0cmFjZS5mb3JFYWNoKChlbnRyeSwgaSkgPT4ge1xyXG4gICAgICAgIGxvZ3MucHVzaCguLi4oaSA9PT0gMCA/IFtdIDogW2BcXG5gXSksIC4uLmZvcm1hdFRyYWNlRW50cnkoZW50cnkpKTtcclxuICAgIH0pO1xyXG4gICAgcmV0dXJuIGxvZ3M7XHJcbn1cclxuZnVuY3Rpb24gZm9ybWF0VHJhY2VFbnRyeSh7IHZub2RlLCByZWN1cnNlQ291bnQgfSkge1xyXG4gICAgY29uc3QgcG9zdGZpeCA9IHJlY3Vyc2VDb3VudCA+IDAgPyBgLi4uICgke3JlY3Vyc2VDb3VudH0gcmVjdXJzaXZlIGNhbGxzKWAgOiBgYDtcclxuICAgIGNvbnN0IGlzUm9vdCA9IHZub2RlLmNvbXBvbmVudCA/IHZub2RlLmNvbXBvbmVudC5wYXJlbnQgPT0gbnVsbCA6IGZhbHNlO1xyXG4gICAgY29uc3Qgb3BlbiA9IGAgYXQgPCR7Zm9ybWF0Q29tcG9uZW50TmFtZSh2bm9kZS5jb21wb25lbnQsIHZub2RlLnR5cGUsIGlzUm9vdCl9YDtcclxuICAgIGNvbnN0IGNsb3NlID0gYD5gICsgcG9zdGZpeDtcclxuICAgIHJldHVybiB2bm9kZS5wcm9wc1xyXG4gICAgICAgID8gW29wZW4sIC4uLmZvcm1hdFByb3BzKHZub2RlLnByb3BzKSwgY2xvc2VdXHJcbiAgICAgICAgOiBbb3BlbiArIGNsb3NlXTtcclxufVxyXG4vKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xyXG5mdW5jdGlvbiBmb3JtYXRQcm9wcyhwcm9wcykge1xyXG4gICAgY29uc3QgcmVzID0gW107XHJcbiAgICBjb25zdCBrZXlzID0gT2JqZWN0LmtleXMocHJvcHMpO1xyXG4gICAga2V5cy5zbGljZSgwLCAzKS5mb3JFYWNoKGtleSA9PiB7XHJcbiAgICAgICAgcmVzLnB1c2goLi4uZm9ybWF0UHJvcChrZXksIHByb3BzW2tleV0pKTtcclxuICAgIH0pO1xyXG4gICAgaWYgKGtleXMubGVuZ3RoID4gMykge1xyXG4gICAgICAgIHJlcy5wdXNoKGAgLi4uYCk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gcmVzO1xyXG59XHJcbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXHJcbmZ1bmN0aW9uIGZvcm1hdFByb3Aoa2V5LCB2YWx1ZSwgcmF3KSB7XHJcbiAgICBpZiAoaXNTdHJpbmcodmFsdWUpKSB7XHJcbiAgICAgICAgdmFsdWUgPSBKU09OLnN0cmluZ2lmeSh2YWx1ZSk7XHJcbiAgICAgICAgcmV0dXJuIHJhdyA/IHZhbHVlIDogW2Ake2tleX09JHt2YWx1ZX1gXTtcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ251bWJlcicgfHxcclxuICAgICAgICB0eXBlb2YgdmFsdWUgPT09ICdib29sZWFuJyB8fFxyXG4gICAgICAgIHZhbHVlID09IG51bGwpIHtcclxuICAgICAgICByZXR1cm4gcmF3ID8gdmFsdWUgOiBbYCR7a2V5fT0ke3ZhbHVlfWBdO1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZiAoaXNSZWYodmFsdWUpKSB7XHJcbiAgICAgICAgdmFsdWUgPSBmb3JtYXRQcm9wKGtleSwgdG9SYXcodmFsdWUudmFsdWUpLCB0cnVlKTtcclxuICAgICAgICByZXR1cm4gcmF3ID8gdmFsdWUgOiBbYCR7a2V5fT1SZWY8YCwgdmFsdWUsIGA+YF07XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmIChpc0Z1bmN0aW9uKHZhbHVlKSkge1xyXG4gICAgICAgIHJldHVybiBbYCR7a2V5fT1mbiR7dmFsdWUubmFtZSA/IGA8JHt2YWx1ZS5uYW1lfT5gIDogYGB9YF07XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgICB2YWx1ZSA9IHRvUmF3KHZhbHVlKTtcclxuICAgICAgICByZXR1cm4gcmF3ID8gdmFsdWUgOiBbYCR7a2V5fT1gLCB2YWx1ZV07XHJcbiAgICB9XHJcbn1cblxuY29uc3QgRXJyb3JUeXBlU3RyaW5ncyA9IHtcclxuICAgIFtcInNwXCIgLyogU0VSVkVSX1BSRUZFVENIICovXTogJ3NlcnZlclByZWZldGNoIGhvb2snLFxyXG4gICAgW1wiYmNcIiAvKiBCRUZPUkVfQ1JFQVRFICovXTogJ2JlZm9yZUNyZWF0ZSBob29rJyxcclxuICAgIFtcImNcIiAvKiBDUkVBVEVEICovXTogJ2NyZWF0ZWQgaG9vaycsXHJcbiAgICBbXCJibVwiIC8qIEJFRk9SRV9NT1VOVCAqL106ICdiZWZvcmVNb3VudCBob29rJyxcclxuICAgIFtcIm1cIiAvKiBNT1VOVEVEICovXTogJ21vdW50ZWQgaG9vaycsXHJcbiAgICBbXCJidVwiIC8qIEJFRk9SRV9VUERBVEUgKi9dOiAnYmVmb3JlVXBkYXRlIGhvb2snLFxyXG4gICAgW1widVwiIC8qIFVQREFURUQgKi9dOiAndXBkYXRlZCcsXHJcbiAgICBbXCJidW1cIiAvKiBCRUZPUkVfVU5NT1VOVCAqL106ICdiZWZvcmVVbm1vdW50IGhvb2snLFxyXG4gICAgW1widW1cIiAvKiBVTk1PVU5URUQgKi9dOiAndW5tb3VudGVkIGhvb2snLFxyXG4gICAgW1wiYVwiIC8qIEFDVElWQVRFRCAqL106ICdhY3RpdmF0ZWQgaG9vaycsXHJcbiAgICBbXCJkYVwiIC8qIERFQUNUSVZBVEVEICovXTogJ2RlYWN0aXZhdGVkIGhvb2snLFxyXG4gICAgW1wiZWNcIiAvKiBFUlJPUl9DQVBUVVJFRCAqL106ICdlcnJvckNhcHR1cmVkIGhvb2snLFxyXG4gICAgW1wicnRjXCIgLyogUkVOREVSX1RSQUNLRUQgKi9dOiAncmVuZGVyVHJhY2tlZCBob29rJyxcclxuICAgIFtcInJ0Z1wiIC8qIFJFTkRFUl9UUklHR0VSRUQgKi9dOiAncmVuZGVyVHJpZ2dlcmVkIGhvb2snLFxyXG4gICAgWzAgLyogU0VUVVBfRlVOQ1RJT04gKi9dOiAnc2V0dXAgZnVuY3Rpb24nLFxyXG4gICAgWzEgLyogUkVOREVSX0ZVTkNUSU9OICovXTogJ3JlbmRlciBmdW5jdGlvbicsXHJcbiAgICBbMiAvKiBXQVRDSF9HRVRURVIgKi9dOiAnd2F0Y2hlciBnZXR0ZXInLFxyXG4gICAgWzMgLyogV0FUQ0hfQ0FMTEJBQ0sgKi9dOiAnd2F0Y2hlciBjYWxsYmFjaycsXHJcbiAgICBbNCAvKiBXQVRDSF9DTEVBTlVQICovXTogJ3dhdGNoZXIgY2xlYW51cCBmdW5jdGlvbicsXHJcbiAgICBbNSAvKiBOQVRJVkVfRVZFTlRfSEFORExFUiAqL106ICduYXRpdmUgZXZlbnQgaGFuZGxlcicsXHJcbiAgICBbNiAvKiBDT01QT05FTlRfRVZFTlRfSEFORExFUiAqL106ICdjb21wb25lbnQgZXZlbnQgaGFuZGxlcicsXHJcbiAgICBbNyAvKiBWTk9ERV9IT09LICovXTogJ3Zub2RlIGhvb2snLFxyXG4gICAgWzggLyogRElSRUNUSVZFX0hPT0sgKi9dOiAnZGlyZWN0aXZlIGhvb2snLFxyXG4gICAgWzkgLyogVFJBTlNJVElPTl9IT09LICovXTogJ3RyYW5zaXRpb24gaG9vaycsXHJcbiAgICBbMTAgLyogQVBQX0VSUk9SX0hBTkRMRVIgKi9dOiAnYXBwIGVycm9ySGFuZGxlcicsXHJcbiAgICBbMTEgLyogQVBQX1dBUk5fSEFORExFUiAqL106ICdhcHAgd2FybkhhbmRsZXInLFxyXG4gICAgWzEyIC8qIEZVTkNUSU9OX1JFRiAqL106ICdyZWYgZnVuY3Rpb24nLFxyXG4gICAgWzEzIC8qIEFTWU5DX0NPTVBPTkVOVF9MT0FERVIgKi9dOiAnYXN5bmMgY29tcG9uZW50IGxvYWRlcicsXHJcbiAgICBbMTQgLyogU0NIRURVTEVSICovXTogJ3NjaGVkdWxlciBmbHVzaC4gVGhpcyBpcyBsaWtlbHkgYSBWdWUgaW50ZXJuYWxzIGJ1Zy4gJyArXHJcbiAgICAgICAgJ1BsZWFzZSBvcGVuIGFuIGlzc3VlIGF0IGh0dHBzOi8vbmV3LWlzc3VlLnZ1ZWpzLm9yZy8/cmVwbz12dWVqcy92dWUtbmV4dCdcclxufTtcclxuZnVuY3Rpb24gY2FsbFdpdGhFcnJvckhhbmRsaW5nKGZuLCBpbnN0YW5jZSwgdHlwZSwgYXJncykge1xyXG4gICAgbGV0IHJlcztcclxuICAgIHRyeSB7XHJcbiAgICAgICAgcmVzID0gYXJncyA/IGZuKC4uLmFyZ3MpIDogZm4oKTtcclxuICAgIH1cclxuICAgIGNhdGNoIChlcnIpIHtcclxuICAgICAgICBoYW5kbGVFcnJvcihlcnIsIGluc3RhbmNlLCB0eXBlKTtcclxuICAgIH1cclxuICAgIHJldHVybiByZXM7XHJcbn1cclxuZnVuY3Rpb24gY2FsbFdpdGhBc3luY0Vycm9ySGFuZGxpbmcoZm4sIGluc3RhbmNlLCB0eXBlLCBhcmdzKSB7XHJcbiAgICBpZiAoaXNGdW5jdGlvbihmbikpIHtcclxuICAgICAgICBjb25zdCByZXMgPSBjYWxsV2l0aEVycm9ySGFuZGxpbmcoZm4sIGluc3RhbmNlLCB0eXBlLCBhcmdzKTtcclxuICAgICAgICBpZiAocmVzICYmIGlzUHJvbWlzZShyZXMpKSB7XHJcbiAgICAgICAgICAgIHJlcy5jYXRjaChlcnIgPT4ge1xyXG4gICAgICAgICAgICAgICAgaGFuZGxlRXJyb3IoZXJyLCBpbnN0YW5jZSwgdHlwZSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gcmVzO1xyXG4gICAgfVxyXG4gICAgY29uc3QgdmFsdWVzID0gW107XHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGZuLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgdmFsdWVzLnB1c2goY2FsbFdpdGhBc3luY0Vycm9ySGFuZGxpbmcoZm5baV0sIGluc3RhbmNlLCB0eXBlLCBhcmdzKSk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gdmFsdWVzO1xyXG59XHJcbmZ1bmN0aW9uIGhhbmRsZUVycm9yKGVyciwgaW5zdGFuY2UsIHR5cGUsIHRocm93SW5EZXYgPSB0cnVlKSB7XHJcbiAgICBjb25zdCBjb250ZXh0Vk5vZGUgPSBpbnN0YW5jZSA/IGluc3RhbmNlLnZub2RlIDogbnVsbDtcclxuICAgIGlmIChpbnN0YW5jZSkge1xyXG4gICAgICAgIGxldCBjdXIgPSBpbnN0YW5jZS5wYXJlbnQ7XHJcbiAgICAgICAgLy8gdGhlIGV4cG9zZWQgaW5zdGFuY2UgaXMgdGhlIHJlbmRlciBwcm94eSB0byBrZWVwIGl0IGNvbnNpc3RlbnQgd2l0aCAyLnhcclxuICAgICAgICBjb25zdCBleHBvc2VkSW5zdGFuY2UgPSBpbnN0YW5jZS5wcm94eTtcclxuICAgICAgICAvLyBpbiBwcm9kdWN0aW9uIHRoZSBob29rIHJlY2VpdmVzIG9ubHkgdGhlIGVycm9yIGNvZGVcclxuICAgICAgICBjb25zdCBlcnJvckluZm8gPSAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgPyBFcnJvclR5cGVTdHJpbmdzW3R5cGVdIDogdHlwZTtcclxuICAgICAgICB3aGlsZSAoY3VyKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGVycm9yQ2FwdHVyZWRIb29rcyA9IGN1ci5lYztcclxuICAgICAgICAgICAgaWYgKGVycm9yQ2FwdHVyZWRIb29rcykge1xyXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBlcnJvckNhcHR1cmVkSG9va3MubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoZXJyb3JDYXB0dXJlZEhvb2tzW2ldKGVyciwgZXhwb3NlZEluc3RhbmNlLCBlcnJvckluZm8pID09PSBmYWxzZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGN1ciA9IGN1ci5wYXJlbnQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIGFwcC1sZXZlbCBoYW5kbGluZ1xyXG4gICAgICAgIGNvbnN0IGFwcEVycm9ySGFuZGxlciA9IGluc3RhbmNlLmFwcENvbnRleHQuY29uZmlnLmVycm9ySGFuZGxlcjtcclxuICAgICAgICBpZiAoYXBwRXJyb3JIYW5kbGVyKSB7XHJcbiAgICAgICAgICAgIGNhbGxXaXRoRXJyb3JIYW5kbGluZyhhcHBFcnJvckhhbmRsZXIsIG51bGwsIDEwIC8qIEFQUF9FUlJPUl9IQU5ETEVSICovLCBbZXJyLCBleHBvc2VkSW5zdGFuY2UsIGVycm9ySW5mb10pO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgbG9nRXJyb3IoZXJyLCB0eXBlLCBjb250ZXh0Vk5vZGUsIHRocm93SW5EZXYpO1xyXG59XHJcbmZ1bmN0aW9uIGxvZ0Vycm9yKGVyciwgdHlwZSwgY29udGV4dFZOb2RlLCB0aHJvd0luRGV2ID0gdHJ1ZSkge1xyXG4gICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSkge1xyXG4gICAgICAgIGNvbnN0IGluZm8gPSBFcnJvclR5cGVTdHJpbmdzW3R5cGVdO1xyXG4gICAgICAgIGlmIChjb250ZXh0Vk5vZGUpIHtcclxuICAgICAgICAgICAgcHVzaFdhcm5pbmdDb250ZXh0KGNvbnRleHRWTm9kZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHdhcm4oYFVuaGFuZGxlZCBlcnJvciR7aW5mbyA/IGAgZHVyaW5nIGV4ZWN1dGlvbiBvZiAke2luZm99YCA6IGBgfWApO1xyXG4gICAgICAgIGlmIChjb250ZXh0Vk5vZGUpIHtcclxuICAgICAgICAgICAgcG9wV2FybmluZ0NvbnRleHQoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gY3Jhc2ggaW4gZGV2IGJ5IGRlZmF1bHQgc28gaXQncyBtb3JlIG5vdGljZWFibGVcclxuICAgICAgICBpZiAodGhyb3dJbkRldikge1xyXG4gICAgICAgICAgICB0aHJvdyBlcnI7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKGVycik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgLy8gcmVjb3ZlciBpbiBwcm9kIHRvIHJlZHVjZSB0aGUgaW1wYWN0IG9uIGVuZC11c2VyXHJcbiAgICAgICAgY29uc29sZS5lcnJvcihlcnIpO1xyXG4gICAgfVxyXG59XG5cbmxldCBpc0ZsdXNoaW5nID0gZmFsc2U7XHJcbmxldCBpc0ZsdXNoUGVuZGluZyA9IGZhbHNlO1xyXG5jb25zdCBxdWV1ZSA9IFtdO1xyXG5sZXQgZmx1c2hJbmRleCA9IDA7XHJcbmNvbnN0IHBlbmRpbmdQcmVGbHVzaENicyA9IFtdO1xyXG5sZXQgYWN0aXZlUHJlRmx1c2hDYnMgPSBudWxsO1xyXG5sZXQgcHJlRmx1c2hJbmRleCA9IDA7XHJcbmNvbnN0IHBlbmRpbmdQb3N0Rmx1c2hDYnMgPSBbXTtcclxubGV0IGFjdGl2ZVBvc3RGbHVzaENicyA9IG51bGw7XHJcbmxldCBwb3N0Rmx1c2hJbmRleCA9IDA7XHJcbmNvbnN0IHJlc29sdmVkUHJvbWlzZSA9IFByb21pc2UucmVzb2x2ZSgpO1xyXG5sZXQgY3VycmVudEZsdXNoUHJvbWlzZSA9IG51bGw7XHJcbmxldCBjdXJyZW50UHJlRmx1c2hQYXJlbnRKb2IgPSBudWxsO1xyXG5jb25zdCBSRUNVUlNJT05fTElNSVQgPSAxMDA7XHJcbmZ1bmN0aW9uIG5leHRUaWNrKGZuKSB7XHJcbiAgICBjb25zdCBwID0gY3VycmVudEZsdXNoUHJvbWlzZSB8fCByZXNvbHZlZFByb21pc2U7XHJcbiAgICByZXR1cm4gZm4gPyBwLnRoZW4odGhpcyA/IGZuLmJpbmQodGhpcykgOiBmbikgOiBwO1xyXG59XHJcbi8vICMyNzY4XHJcbi8vIFVzZSBiaW5hcnktc2VhcmNoIHRvIGZpbmQgYSBzdWl0YWJsZSBwb3NpdGlvbiBpbiB0aGUgcXVldWUsXHJcbi8vIHNvIHRoYXQgdGhlIHF1ZXVlIG1haW50YWlucyB0aGUgaW5jcmVhc2luZyBvcmRlciBvZiBqb2IncyBpZCxcclxuLy8gd2hpY2ggY2FuIHByZXZlbnQgdGhlIGpvYiBmcm9tIGJlaW5nIHNraXBwZWQgYW5kIGFsc28gY2FuIGF2b2lkIHJlcGVhdGVkIHBhdGNoaW5nLlxyXG5mdW5jdGlvbiBmaW5kSW5zZXJ0aW9uSW5kZXgoaWQpIHtcclxuICAgIC8vIHRoZSBzdGFydCBpbmRleCBzaG91bGQgYmUgYGZsdXNoSW5kZXggKyAxYFxyXG4gICAgbGV0IHN0YXJ0ID0gZmx1c2hJbmRleCArIDE7XHJcbiAgICBsZXQgZW5kID0gcXVldWUubGVuZ3RoO1xyXG4gICAgd2hpbGUgKHN0YXJ0IDwgZW5kKSB7XHJcbiAgICAgICAgY29uc3QgbWlkZGxlID0gKHN0YXJ0ICsgZW5kKSA+Pj4gMTtcclxuICAgICAgICBjb25zdCBtaWRkbGVKb2JJZCA9IGdldElkKHF1ZXVlW21pZGRsZV0pO1xyXG4gICAgICAgIG1pZGRsZUpvYklkIDwgaWQgPyAoc3RhcnQgPSBtaWRkbGUgKyAxKSA6IChlbmQgPSBtaWRkbGUpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHN0YXJ0O1xyXG59XHJcbmZ1bmN0aW9uIHF1ZXVlSm9iKGpvYikge1xyXG4gICAgLy8gdGhlIGRlZHVwZSBzZWFyY2ggdXNlcyB0aGUgc3RhcnRJbmRleCBhcmd1bWVudCBvZiBBcnJheS5pbmNsdWRlcygpXHJcbiAgICAvLyBieSBkZWZhdWx0IHRoZSBzZWFyY2ggaW5kZXggaW5jbHVkZXMgdGhlIGN1cnJlbnQgam9iIHRoYXQgaXMgYmVpbmcgcnVuXHJcbiAgICAvLyBzbyBpdCBjYW5ub3QgcmVjdXJzaXZlbHkgdHJpZ2dlciBpdHNlbGYgYWdhaW4uXHJcbiAgICAvLyBpZiB0aGUgam9iIGlzIGEgd2F0Y2goKSBjYWxsYmFjaywgdGhlIHNlYXJjaCB3aWxsIHN0YXJ0IHdpdGggYSArMSBpbmRleCB0b1xyXG4gICAgLy8gYWxsb3cgaXQgcmVjdXJzaXZlbHkgdHJpZ2dlciBpdHNlbGYgLSBpdCBpcyB0aGUgdXNlcidzIHJlc3BvbnNpYmlsaXR5IHRvXHJcbiAgICAvLyBlbnN1cmUgaXQgZG9lc24ndCBlbmQgdXAgaW4gYW4gaW5maW5pdGUgbG9vcC5cclxuICAgIGlmICgoIXF1ZXVlLmxlbmd0aCB8fFxyXG4gICAgICAgICFxdWV1ZS5pbmNsdWRlcyhqb2IsIGlzRmx1c2hpbmcgJiYgam9iLmFsbG93UmVjdXJzZSA/IGZsdXNoSW5kZXggKyAxIDogZmx1c2hJbmRleCkpICYmXHJcbiAgICAgICAgam9iICE9PSBjdXJyZW50UHJlRmx1c2hQYXJlbnRKb2IpIHtcclxuICAgICAgICBpZiAoam9iLmlkID09IG51bGwpIHtcclxuICAgICAgICAgICAgcXVldWUucHVzaChqb2IpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgcXVldWUuc3BsaWNlKGZpbmRJbnNlcnRpb25JbmRleChqb2IuaWQpLCAwLCBqb2IpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBxdWV1ZUZsdXNoKCk7XHJcbiAgICB9XHJcbn1cclxuZnVuY3Rpb24gcXVldWVGbHVzaCgpIHtcclxuICAgIGlmICghaXNGbHVzaGluZyAmJiAhaXNGbHVzaFBlbmRpbmcpIHtcclxuICAgICAgICBpc0ZsdXNoUGVuZGluZyA9IHRydWU7XHJcbiAgICAgICAgY3VycmVudEZsdXNoUHJvbWlzZSA9IHJlc29sdmVkUHJvbWlzZS50aGVuKGZsdXNoSm9icyk7XHJcbiAgICB9XHJcbn1cclxuZnVuY3Rpb24gaW52YWxpZGF0ZUpvYihqb2IpIHtcclxuICAgIGNvbnN0IGkgPSBxdWV1ZS5pbmRleE9mKGpvYik7XHJcbiAgICBpZiAoaSA+IGZsdXNoSW5kZXgpIHtcclxuICAgICAgICBxdWV1ZS5zcGxpY2UoaSwgMSk7XHJcbiAgICB9XHJcbn1cclxuZnVuY3Rpb24gcXVldWVDYihjYiwgYWN0aXZlUXVldWUsIHBlbmRpbmdRdWV1ZSwgaW5kZXgpIHtcclxuICAgIGlmICghaXNBcnJheShjYikpIHtcclxuICAgICAgICBpZiAoIWFjdGl2ZVF1ZXVlIHx8XHJcbiAgICAgICAgICAgICFhY3RpdmVRdWV1ZS5pbmNsdWRlcyhjYiwgY2IuYWxsb3dSZWN1cnNlID8gaW5kZXggKyAxIDogaW5kZXgpKSB7XHJcbiAgICAgICAgICAgIHBlbmRpbmdRdWV1ZS5wdXNoKGNiKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgICAvLyBpZiBjYiBpcyBhbiBhcnJheSwgaXQgaXMgYSBjb21wb25lbnQgbGlmZWN5Y2xlIGhvb2sgd2hpY2ggY2FuIG9ubHkgYmVcclxuICAgICAgICAvLyB0cmlnZ2VyZWQgYnkgYSBqb2IsIHdoaWNoIGlzIGFscmVhZHkgZGVkdXBlZCBpbiB0aGUgbWFpbiBxdWV1ZSwgc29cclxuICAgICAgICAvLyB3ZSBjYW4gc2tpcCBkdXBsaWNhdGUgY2hlY2sgaGVyZSB0byBpbXByb3ZlIHBlcmZcclxuICAgICAgICBwZW5kaW5nUXVldWUucHVzaCguLi5jYik7XHJcbiAgICB9XHJcbiAgICBxdWV1ZUZsdXNoKCk7XHJcbn1cclxuZnVuY3Rpb24gcXVldWVQcmVGbHVzaENiKGNiKSB7XHJcbiAgICBxdWV1ZUNiKGNiLCBhY3RpdmVQcmVGbHVzaENicywgcGVuZGluZ1ByZUZsdXNoQ2JzLCBwcmVGbHVzaEluZGV4KTtcclxufVxyXG5mdW5jdGlvbiBxdWV1ZVBvc3RGbHVzaENiKGNiKSB7XHJcbiAgICBxdWV1ZUNiKGNiLCBhY3RpdmVQb3N0Rmx1c2hDYnMsIHBlbmRpbmdQb3N0Rmx1c2hDYnMsIHBvc3RGbHVzaEluZGV4KTtcclxufVxyXG5mdW5jdGlvbiBmbHVzaFByZUZsdXNoQ2JzKHNlZW4sIHBhcmVudEpvYiA9IG51bGwpIHtcclxuICAgIGlmIChwZW5kaW5nUHJlRmx1c2hDYnMubGVuZ3RoKSB7XHJcbiAgICAgICAgY3VycmVudFByZUZsdXNoUGFyZW50Sm9iID0gcGFyZW50Sm9iO1xyXG4gICAgICAgIGFjdGl2ZVByZUZsdXNoQ2JzID0gWy4uLm5ldyBTZXQocGVuZGluZ1ByZUZsdXNoQ2JzKV07XHJcbiAgICAgICAgcGVuZGluZ1ByZUZsdXNoQ2JzLmxlbmd0aCA9IDA7XHJcbiAgICAgICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSkge1xyXG4gICAgICAgICAgICBzZWVuID0gc2VlbiB8fCBuZXcgTWFwKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGZvciAocHJlRmx1c2hJbmRleCA9IDA7IHByZUZsdXNoSW5kZXggPCBhY3RpdmVQcmVGbHVzaENicy5sZW5ndGg7IHByZUZsdXNoSW5kZXgrKykge1xyXG4gICAgICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmXHJcbiAgICAgICAgICAgICAgICBjaGVja1JlY3Vyc2l2ZVVwZGF0ZXMoc2VlbiwgYWN0aXZlUHJlRmx1c2hDYnNbcHJlRmx1c2hJbmRleF0pKSB7XHJcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBhY3RpdmVQcmVGbHVzaENic1twcmVGbHVzaEluZGV4XSgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBhY3RpdmVQcmVGbHVzaENicyA9IG51bGw7XHJcbiAgICAgICAgcHJlRmx1c2hJbmRleCA9IDA7XHJcbiAgICAgICAgY3VycmVudFByZUZsdXNoUGFyZW50Sm9iID0gbnVsbDtcclxuICAgICAgICAvLyByZWN1cnNpdmVseSBmbHVzaCB1bnRpbCBpdCBkcmFpbnNcclxuICAgICAgICBmbHVzaFByZUZsdXNoQ2JzKHNlZW4sIHBhcmVudEpvYik7XHJcbiAgICB9XHJcbn1cclxuZnVuY3Rpb24gZmx1c2hQb3N0Rmx1c2hDYnMoc2Vlbikge1xyXG4gICAgaWYgKHBlbmRpbmdQb3N0Rmx1c2hDYnMubGVuZ3RoKSB7XHJcbiAgICAgICAgY29uc3QgZGVkdXBlZCA9IFsuLi5uZXcgU2V0KHBlbmRpbmdQb3N0Rmx1c2hDYnMpXTtcclxuICAgICAgICBwZW5kaW5nUG9zdEZsdXNoQ2JzLmxlbmd0aCA9IDA7XHJcbiAgICAgICAgLy8gIzE5NDcgYWxyZWFkeSBoYXMgYWN0aXZlIHF1ZXVlLCBuZXN0ZWQgZmx1c2hQb3N0Rmx1c2hDYnMgY2FsbFxyXG4gICAgICAgIGlmIChhY3RpdmVQb3N0Rmx1c2hDYnMpIHtcclxuICAgICAgICAgICAgYWN0aXZlUG9zdEZsdXNoQ2JzLnB1c2goLi4uZGVkdXBlZCk7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgYWN0aXZlUG9zdEZsdXNoQ2JzID0gZGVkdXBlZDtcclxuICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpKSB7XHJcbiAgICAgICAgICAgIHNlZW4gPSBzZWVuIHx8IG5ldyBNYXAoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgYWN0aXZlUG9zdEZsdXNoQ2JzLnNvcnQoKGEsIGIpID0+IGdldElkKGEpIC0gZ2V0SWQoYikpO1xyXG4gICAgICAgIGZvciAocG9zdEZsdXNoSW5kZXggPSAwOyBwb3N0Rmx1c2hJbmRleCA8IGFjdGl2ZVBvc3RGbHVzaENicy5sZW5ndGg7IHBvc3RGbHVzaEluZGV4KyspIHtcclxuICAgICAgICAgICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSAmJlxyXG4gICAgICAgICAgICAgICAgY2hlY2tSZWN1cnNpdmVVcGRhdGVzKHNlZW4sIGFjdGl2ZVBvc3RGbHVzaENic1twb3N0Rmx1c2hJbmRleF0pKSB7XHJcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBhY3RpdmVQb3N0Rmx1c2hDYnNbcG9zdEZsdXNoSW5kZXhdKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGFjdGl2ZVBvc3RGbHVzaENicyA9IG51bGw7XHJcbiAgICAgICAgcG9zdEZsdXNoSW5kZXggPSAwO1xyXG4gICAgfVxyXG59XHJcbmNvbnN0IGdldElkID0gKGpvYikgPT4gam9iLmlkID09IG51bGwgPyBJbmZpbml0eSA6IGpvYi5pZDtcclxuZnVuY3Rpb24gZmx1c2hKb2JzKHNlZW4pIHtcclxuICAgIGlzRmx1c2hQZW5kaW5nID0gZmFsc2U7XHJcbiAgICBpc0ZsdXNoaW5nID0gdHJ1ZTtcclxuICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykpIHtcclxuICAgICAgICBzZWVuID0gc2VlbiB8fCBuZXcgTWFwKCk7XHJcbiAgICB9XHJcbiAgICBmbHVzaFByZUZsdXNoQ2JzKHNlZW4pO1xyXG4gICAgLy8gU29ydCBxdWV1ZSBiZWZvcmUgZmx1c2guXHJcbiAgICAvLyBUaGlzIGVuc3VyZXMgdGhhdDpcclxuICAgIC8vIDEuIENvbXBvbmVudHMgYXJlIHVwZGF0ZWQgZnJvbSBwYXJlbnQgdG8gY2hpbGQuIChiZWNhdXNlIHBhcmVudCBpcyBhbHdheXNcclxuICAgIC8vICAgIGNyZWF0ZWQgYmVmb3JlIHRoZSBjaGlsZCBzbyBpdHMgcmVuZGVyIGVmZmVjdCB3aWxsIGhhdmUgc21hbGxlclxyXG4gICAgLy8gICAgcHJpb3JpdHkgbnVtYmVyKVxyXG4gICAgLy8gMi4gSWYgYSBjb21wb25lbnQgaXMgdW5tb3VudGVkIGR1cmluZyBhIHBhcmVudCBjb21wb25lbnQncyB1cGRhdGUsXHJcbiAgICAvLyAgICBpdHMgdXBkYXRlIGNhbiBiZSBza2lwcGVkLlxyXG4gICAgcXVldWUuc29ydCgoYSwgYikgPT4gZ2V0SWQoYSkgLSBnZXRJZChiKSk7XHJcbiAgICAvLyBjb25kaXRpb25hbCB1c2FnZSBvZiBjaGVja1JlY3Vyc2l2ZVVwZGF0ZSBtdXN0IGJlIGRldGVybWluZWQgb3V0IG9mXHJcbiAgICAvLyB0cnkgLi4uIGNhdGNoIGJsb2NrIHNpbmNlIFJvbGx1cCBieSBkZWZhdWx0IGRlLW9wdGltaXplcyB0cmVlc2hha2luZ1xyXG4gICAgLy8gaW5zaWRlIHRyeS1jYXRjaC4gVGhpcyBjYW4gbGVhdmUgYWxsIHdhcm5pbmcgY29kZSB1bnNoYWtlZC4gQWx0aG91Z2hcclxuICAgIC8vIHRoZXkgd291bGQgZ2V0IGV2ZW50dWFsbHkgc2hha2VuIGJ5IGEgbWluaWZpZXIgbGlrZSB0ZXJzZXIsIHNvbWUgbWluaWZpZXJzXHJcbiAgICAvLyB3b3VsZCBmYWlsIHRvIGRvIHRoYXQgKGUuZy4gaHR0cHM6Ly9naXRodWIuY29tL2V2YW53L2VzYnVpbGQvaXNzdWVzLzE2MTApXHJcbiAgICBjb25zdCBjaGVjayA9IChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKVxyXG4gICAgICAgID8gKGpvYikgPT4gY2hlY2tSZWN1cnNpdmVVcGRhdGVzKHNlZW4sIGpvYilcclxuICAgICAgICA6IE5PT1A7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIGZvciAoZmx1c2hJbmRleCA9IDA7IGZsdXNoSW5kZXggPCBxdWV1ZS5sZW5ndGg7IGZsdXNoSW5kZXgrKykge1xyXG4gICAgICAgICAgICBjb25zdCBqb2IgPSBxdWV1ZVtmbHVzaEluZGV4XTtcclxuICAgICAgICAgICAgaWYgKGpvYiAmJiBqb2IuYWN0aXZlICE9PSBmYWxzZSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSAmJiBjaGVjayhqb2IpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhgcnVubmluZzpgLCBqb2IuaWQpXHJcbiAgICAgICAgICAgICAgICBjYWxsV2l0aEVycm9ySGFuZGxpbmcoam9iLCBudWxsLCAxNCAvKiBTQ0hFRFVMRVIgKi8pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgZmluYWxseSB7XHJcbiAgICAgICAgZmx1c2hJbmRleCA9IDA7XHJcbiAgICAgICAgcXVldWUubGVuZ3RoID0gMDtcclxuICAgICAgICBmbHVzaFBvc3RGbHVzaENicyhzZWVuKTtcclxuICAgICAgICBpc0ZsdXNoaW5nID0gZmFsc2U7XHJcbiAgICAgICAgY3VycmVudEZsdXNoUHJvbWlzZSA9IG51bGw7XHJcbiAgICAgICAgLy8gc29tZSBwb3N0Rmx1c2hDYiBxdWV1ZWQgam9icyFcclxuICAgICAgICAvLyBrZWVwIGZsdXNoaW5nIHVudGlsIGl0IGRyYWlucy5cclxuICAgICAgICBpZiAocXVldWUubGVuZ3RoIHx8XHJcbiAgICAgICAgICAgIHBlbmRpbmdQcmVGbHVzaENicy5sZW5ndGggfHxcclxuICAgICAgICAgICAgcGVuZGluZ1Bvc3RGbHVzaENicy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgZmx1c2hKb2JzKHNlZW4pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5mdW5jdGlvbiBjaGVja1JlY3Vyc2l2ZVVwZGF0ZXMoc2VlbiwgZm4pIHtcclxuICAgIGlmICghc2Vlbi5oYXMoZm4pKSB7XHJcbiAgICAgICAgc2Vlbi5zZXQoZm4sIDEpO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgY29uc3QgY291bnQgPSBzZWVuLmdldChmbik7XHJcbiAgICAgICAgaWYgKGNvdW50ID4gUkVDVVJTSU9OX0xJTUlUKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGluc3RhbmNlID0gZm4ub3duZXJJbnN0YW5jZTtcclxuICAgICAgICAgICAgY29uc3QgY29tcG9uZW50TmFtZSA9IGluc3RhbmNlICYmIGdldENvbXBvbmVudE5hbWUoaW5zdGFuY2UudHlwZSk7XHJcbiAgICAgICAgICAgIHdhcm4oYE1heGltdW0gcmVjdXJzaXZlIHVwZGF0ZXMgZXhjZWVkZWQke2NvbXBvbmVudE5hbWUgPyBgIGluIGNvbXBvbmVudCA8JHtjb21wb25lbnROYW1lfT5gIDogYGB9LiBgICtcclxuICAgICAgICAgICAgICAgIGBUaGlzIG1lYW5zIHlvdSBoYXZlIGEgcmVhY3RpdmUgZWZmZWN0IHRoYXQgaXMgbXV0YXRpbmcgaXRzIG93biBgICtcclxuICAgICAgICAgICAgICAgIGBkZXBlbmRlbmNpZXMgYW5kIHRodXMgcmVjdXJzaXZlbHkgdHJpZ2dlcmluZyBpdHNlbGYuIFBvc3NpYmxlIHNvdXJjZXMgYCArXHJcbiAgICAgICAgICAgICAgICBgaW5jbHVkZSBjb21wb25lbnQgdGVtcGxhdGUsIHJlbmRlciBmdW5jdGlvbiwgdXBkYXRlZCBob29rIG9yIGAgK1xyXG4gICAgICAgICAgICAgICAgYHdhdGNoZXIgc291cmNlIGZ1bmN0aW9uLmApO1xyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHNlZW4uc2V0KGZuLCBjb3VudCArIDEpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxuXG4vLyBTaW1wbGUgZWZmZWN0LlxyXG5mdW5jdGlvbiB3YXRjaEVmZmVjdChlZmZlY3QsIG9wdGlvbnMpIHtcclxuICAgIHJldHVybiBkb1dhdGNoKGVmZmVjdCwgbnVsbCwgb3B0aW9ucyk7XHJcbn1cclxuZnVuY3Rpb24gd2F0Y2hQb3N0RWZmZWN0KGVmZmVjdCwgb3B0aW9ucykge1xyXG4gICAgcmV0dXJuIGRvV2F0Y2goZWZmZWN0LCBudWxsLCAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpXHJcbiAgICAgICAgPyBPYmplY3QuYXNzaWduKG9wdGlvbnMgfHwge30sIHsgZmx1c2g6ICdwb3N0JyB9KVxyXG4gICAgICAgIDogeyBmbHVzaDogJ3Bvc3QnIH0pKTtcclxufVxyXG5mdW5jdGlvbiB3YXRjaFN5bmNFZmZlY3QoZWZmZWN0LCBvcHRpb25zKSB7XHJcbiAgICByZXR1cm4gZG9XYXRjaChlZmZlY3QsIG51bGwsICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJylcclxuICAgICAgICA/IE9iamVjdC5hc3NpZ24ob3B0aW9ucyB8fCB7fSwgeyBmbHVzaDogJ3N5bmMnIH0pXHJcbiAgICAgICAgOiB7IGZsdXNoOiAnc3luYycgfSkpO1xyXG59XHJcbi8vIGluaXRpYWwgdmFsdWUgZm9yIHdhdGNoZXJzIHRvIHRyaWdnZXIgb24gdW5kZWZpbmVkIGluaXRpYWwgdmFsdWVzXHJcbmNvbnN0IElOSVRJQUxfV0FUQ0hFUl9WQUxVRSA9IHt9O1xyXG4vLyBpbXBsZW1lbnRhdGlvblxyXG5mdW5jdGlvbiB3YXRjaChzb3VyY2UsIGNiLCBvcHRpb25zKSB7XHJcbiAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmICFpc0Z1bmN0aW9uKGNiKSkge1xyXG4gICAgICAgIHdhcm4oYFxcYHdhdGNoKGZuLCBvcHRpb25zPylcXGAgc2lnbmF0dXJlIGhhcyBiZWVuIG1vdmVkIHRvIGEgc2VwYXJhdGUgQVBJLiBgICtcclxuICAgICAgICAgICAgYFVzZSBcXGB3YXRjaEVmZmVjdChmbiwgb3B0aW9ucz8pXFxgIGluc3RlYWQuIFxcYHdhdGNoXFxgIG5vdyBvbmx5IGAgK1xyXG4gICAgICAgICAgICBgc3VwcG9ydHMgXFxgd2F0Y2goc291cmNlLCBjYiwgb3B0aW9ucz8pIHNpZ25hdHVyZS5gKTtcclxuICAgIH1cclxuICAgIHJldHVybiBkb1dhdGNoKHNvdXJjZSwgY2IsIG9wdGlvbnMpO1xyXG59XHJcbmZ1bmN0aW9uIGRvV2F0Y2goc291cmNlLCBjYiwgeyBpbW1lZGlhdGUsIGRlZXAsIGZsdXNoLCBvblRyYWNrLCBvblRyaWdnZXIgfSA9IEVNUFRZX09CSikge1xyXG4gICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSAmJiAhY2IpIHtcclxuICAgICAgICBpZiAoaW1tZWRpYXRlICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgd2Fybihgd2F0Y2goKSBcImltbWVkaWF0ZVwiIG9wdGlvbiBpcyBvbmx5IHJlc3BlY3RlZCB3aGVuIHVzaW5nIHRoZSBgICtcclxuICAgICAgICAgICAgICAgIGB3YXRjaChzb3VyY2UsIGNhbGxiYWNrLCBvcHRpb25zPykgc2lnbmF0dXJlLmApO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoZGVlcCAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIHdhcm4oYHdhdGNoKCkgXCJkZWVwXCIgb3B0aW9uIGlzIG9ubHkgcmVzcGVjdGVkIHdoZW4gdXNpbmcgdGhlIGAgK1xyXG4gICAgICAgICAgICAgICAgYHdhdGNoKHNvdXJjZSwgY2FsbGJhY2ssIG9wdGlvbnM/KSBzaWduYXR1cmUuYCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgY29uc3Qgd2FybkludmFsaWRTb3VyY2UgPSAocykgPT4ge1xyXG4gICAgICAgIHdhcm4oYEludmFsaWQgd2F0Y2ggc291cmNlOiBgLCBzLCBgQSB3YXRjaCBzb3VyY2UgY2FuIG9ubHkgYmUgYSBnZXR0ZXIvZWZmZWN0IGZ1bmN0aW9uLCBhIHJlZiwgYCArXHJcbiAgICAgICAgICAgIGBhIHJlYWN0aXZlIG9iamVjdCwgb3IgYW4gYXJyYXkgb2YgdGhlc2UgdHlwZXMuYCk7XHJcbiAgICB9O1xyXG4gICAgY29uc3QgaW5zdGFuY2UgPSBjdXJyZW50SW5zdGFuY2U7XHJcbiAgICBsZXQgZ2V0dGVyO1xyXG4gICAgbGV0IGZvcmNlVHJpZ2dlciA9IGZhbHNlO1xyXG4gICAgbGV0IGlzTXVsdGlTb3VyY2UgPSBmYWxzZTtcclxuICAgIGlmIChpc1JlZihzb3VyY2UpKSB7XHJcbiAgICAgICAgZ2V0dGVyID0gKCkgPT4gc291cmNlLnZhbHVlO1xyXG4gICAgICAgIGZvcmNlVHJpZ2dlciA9ICEhc291cmNlLl9zaGFsbG93O1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZiAoaXNSZWFjdGl2ZShzb3VyY2UpKSB7XHJcbiAgICAgICAgZ2V0dGVyID0gKCkgPT4gc291cmNlO1xyXG4gICAgICAgIGRlZXAgPSB0cnVlO1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZiAoaXNBcnJheShzb3VyY2UpKSB7XHJcbiAgICAgICAgaXNNdWx0aVNvdXJjZSA9IHRydWU7XHJcbiAgICAgICAgZm9yY2VUcmlnZ2VyID0gc291cmNlLnNvbWUoaXNSZWFjdGl2ZSk7XHJcbiAgICAgICAgZ2V0dGVyID0gKCkgPT4gc291cmNlLm1hcChzID0+IHtcclxuICAgICAgICAgICAgaWYgKGlzUmVmKHMpKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcy52YWx1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmIChpc1JlYWN0aXZlKHMpKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJhdmVyc2Uocyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSBpZiAoaXNGdW5jdGlvbihzKSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGNhbGxXaXRoRXJyb3JIYW5kbGluZyhzLCBpbnN0YW5jZSwgMiAvKiBXQVRDSF9HRVRURVIgKi8pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmIHdhcm5JbnZhbGlkU291cmNlKHMpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmIChpc0Z1bmN0aW9uKHNvdXJjZSkpIHtcclxuICAgICAgICBpZiAoY2IpIHtcclxuICAgICAgICAgICAgLy8gZ2V0dGVyIHdpdGggY2JcclxuICAgICAgICAgICAgZ2V0dGVyID0gKCkgPT4gY2FsbFdpdGhFcnJvckhhbmRsaW5nKHNvdXJjZSwgaW5zdGFuY2UsIDIgLyogV0FUQ0hfR0VUVEVSICovKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIC8vIG5vIGNiIC0+IHNpbXBsZSBlZmZlY3RcclxuICAgICAgICAgICAgZ2V0dGVyID0gKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKGluc3RhbmNlICYmIGluc3RhbmNlLmlzVW5tb3VudGVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKGNsZWFudXApIHtcclxuICAgICAgICAgICAgICAgICAgICBjbGVhbnVwKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gY2FsbFdpdGhBc3luY0Vycm9ySGFuZGxpbmcoc291cmNlLCBpbnN0YW5jZSwgMyAvKiBXQVRDSF9DQUxMQkFDSyAqLywgW29uSW52YWxpZGF0ZV0pO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICAgIGdldHRlciA9IE5PT1A7XHJcbiAgICAgICAgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmIHdhcm5JbnZhbGlkU291cmNlKHNvdXJjZSk7XHJcbiAgICB9XHJcbiAgICBpZiAoY2IgJiYgZGVlcCkge1xyXG4gICAgICAgIGNvbnN0IGJhc2VHZXR0ZXIgPSBnZXR0ZXI7XHJcbiAgICAgICAgZ2V0dGVyID0gKCkgPT4gdHJhdmVyc2UoYmFzZUdldHRlcigpKTtcclxuICAgIH1cclxuICAgIGxldCBjbGVhbnVwO1xyXG4gICAgbGV0IG9uSW52YWxpZGF0ZSA9IChmbikgPT4ge1xyXG4gICAgICAgIGNsZWFudXAgPSBlZmZlY3Qub25TdG9wID0gKCkgPT4ge1xyXG4gICAgICAgICAgICBjYWxsV2l0aEVycm9ySGFuZGxpbmcoZm4sIGluc3RhbmNlLCA0IC8qIFdBVENIX0NMRUFOVVAgKi8pO1xyXG4gICAgICAgIH07XHJcbiAgICB9O1xyXG4gICAgLy8gaW4gU1NSIHRoZXJlIGlzIG5vIG5lZWQgdG8gc2V0dXAgYW4gYWN0dWFsIGVmZmVjdCwgYW5kIGl0IHNob3VsZCBiZSBub29wXHJcbiAgICAvLyB1bmxlc3MgaXQncyBlYWdlclxyXG4gICAgaWYgKGlzSW5TU1JDb21wb25lbnRTZXR1cCkge1xyXG4gICAgICAgIC8vIHdlIHdpbGwgYWxzbyBub3QgY2FsbCB0aGUgaW52YWxpZGF0ZSBjYWxsYmFjayAoKyBydW5uZXIgaXMgbm90IHNldCB1cClcclxuICAgICAgICBvbkludmFsaWRhdGUgPSBOT09QO1xyXG4gICAgICAgIGlmICghY2IpIHtcclxuICAgICAgICAgICAgZ2V0dGVyKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKGltbWVkaWF0ZSkge1xyXG4gICAgICAgICAgICBjYWxsV2l0aEFzeW5jRXJyb3JIYW5kbGluZyhjYiwgaW5zdGFuY2UsIDMgLyogV0FUQ0hfQ0FMTEJBQ0sgKi8sIFtcclxuICAgICAgICAgICAgICAgIGdldHRlcigpLFxyXG4gICAgICAgICAgICAgICAgaXNNdWx0aVNvdXJjZSA/IFtdIDogdW5kZWZpbmVkLFxyXG4gICAgICAgICAgICAgICAgb25JbnZhbGlkYXRlXHJcbiAgICAgICAgICAgIF0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gTk9PUDtcclxuICAgIH1cclxuICAgIGxldCBvbGRWYWx1ZSA9IGlzTXVsdGlTb3VyY2UgPyBbXSA6IElOSVRJQUxfV0FUQ0hFUl9WQUxVRTtcclxuICAgIGNvbnN0IGpvYiA9ICgpID0+IHtcclxuICAgICAgICBpZiAoIWVmZmVjdC5hY3RpdmUpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoY2IpIHtcclxuICAgICAgICAgICAgLy8gd2F0Y2goc291cmNlLCBjYilcclxuICAgICAgICAgICAgY29uc3QgbmV3VmFsdWUgPSBlZmZlY3QucnVuKCk7XHJcbiAgICAgICAgICAgIGlmIChkZWVwIHx8XHJcbiAgICAgICAgICAgICAgICBmb3JjZVRyaWdnZXIgfHxcclxuICAgICAgICAgICAgICAgIChpc011bHRpU291cmNlXHJcbiAgICAgICAgICAgICAgICAgICAgPyBuZXdWYWx1ZS5zb21lKCh2LCBpKSA9PiBoYXNDaGFuZ2VkKHYsIG9sZFZhbHVlW2ldKSlcclxuICAgICAgICAgICAgICAgICAgICA6IGhhc0NoYW5nZWQobmV3VmFsdWUsIG9sZFZhbHVlKSkgfHxcclxuICAgICAgICAgICAgICAgIChmYWxzZSAgKSkge1xyXG4gICAgICAgICAgICAgICAgLy8gY2xlYW51cCBiZWZvcmUgcnVubmluZyBjYiBhZ2FpblxyXG4gICAgICAgICAgICAgICAgaWYgKGNsZWFudXApIHtcclxuICAgICAgICAgICAgICAgICAgICBjbGVhbnVwKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBjYWxsV2l0aEFzeW5jRXJyb3JIYW5kbGluZyhjYiwgaW5zdGFuY2UsIDMgLyogV0FUQ0hfQ0FMTEJBQ0sgKi8sIFtcclxuICAgICAgICAgICAgICAgICAgICBuZXdWYWx1ZSxcclxuICAgICAgICAgICAgICAgICAgICAvLyBwYXNzIHVuZGVmaW5lZCBhcyB0aGUgb2xkIHZhbHVlIHdoZW4gaXQncyBjaGFuZ2VkIGZvciB0aGUgZmlyc3QgdGltZVxyXG4gICAgICAgICAgICAgICAgICAgIG9sZFZhbHVlID09PSBJTklUSUFMX1dBVENIRVJfVkFMVUUgPyB1bmRlZmluZWQgOiBvbGRWYWx1ZSxcclxuICAgICAgICAgICAgICAgICAgICBvbkludmFsaWRhdGVcclxuICAgICAgICAgICAgICAgIF0pO1xyXG4gICAgICAgICAgICAgICAgb2xkVmFsdWUgPSBuZXdWYWx1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgLy8gd2F0Y2hFZmZlY3RcclxuICAgICAgICAgICAgZWZmZWN0LnJ1bigpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICAvLyBpbXBvcnRhbnQ6IG1hcmsgdGhlIGpvYiBhcyBhIHdhdGNoZXIgY2FsbGJhY2sgc28gdGhhdCBzY2hlZHVsZXIga25vd3NcclxuICAgIC8vIGl0IGlzIGFsbG93ZWQgdG8gc2VsZi10cmlnZ2VyICgjMTcyNylcclxuICAgIGpvYi5hbGxvd1JlY3Vyc2UgPSAhIWNiO1xyXG4gICAgbGV0IHNjaGVkdWxlcjtcclxuICAgIGlmIChmbHVzaCA9PT0gJ3N5bmMnKSB7XHJcbiAgICAgICAgc2NoZWR1bGVyID0gam9iOyAvLyB0aGUgc2NoZWR1bGVyIGZ1bmN0aW9uIGdldHMgY2FsbGVkIGRpcmVjdGx5XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmIChmbHVzaCA9PT0gJ3Bvc3QnKSB7XHJcbiAgICAgICAgc2NoZWR1bGVyID0gKCkgPT4gcXVldWVQb3N0UmVuZGVyRWZmZWN0KGpvYiwgaW5zdGFuY2UgJiYgaW5zdGFuY2Uuc3VzcGVuc2UpO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgLy8gZGVmYXVsdDogJ3ByZSdcclxuICAgICAgICBzY2hlZHVsZXIgPSAoKSA9PiB7XHJcbiAgICAgICAgICAgIGlmICghaW5zdGFuY2UgfHwgaW5zdGFuY2UuaXNNb3VudGVkKSB7XHJcbiAgICAgICAgICAgICAgICBxdWV1ZVByZUZsdXNoQ2Ioam9iKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIC8vIHdpdGggJ3ByZScgb3B0aW9uLCB0aGUgZmlyc3QgY2FsbCBtdXN0IGhhcHBlbiBiZWZvcmVcclxuICAgICAgICAgICAgICAgIC8vIHRoZSBjb21wb25lbnQgaXMgbW91bnRlZCBzbyBpdCBpcyBjYWxsZWQgc3luY2hyb25vdXNseS5cclxuICAgICAgICAgICAgICAgIGpvYigpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuICAgIGNvbnN0IGVmZmVjdCA9IG5ldyBSZWFjdGl2ZUVmZmVjdChnZXR0ZXIsIHNjaGVkdWxlcik7XHJcbiAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpKSB7XHJcbiAgICAgICAgZWZmZWN0Lm9uVHJhY2sgPSBvblRyYWNrO1xyXG4gICAgICAgIGVmZmVjdC5vblRyaWdnZXIgPSBvblRyaWdnZXI7XHJcbiAgICB9XHJcbiAgICAvLyBpbml0aWFsIHJ1blxyXG4gICAgaWYgKGNiKSB7XHJcbiAgICAgICAgaWYgKGltbWVkaWF0ZSkge1xyXG4gICAgICAgICAgICBqb2IoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIG9sZFZhbHVlID0gZWZmZWN0LnJ1bigpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGVsc2UgaWYgKGZsdXNoID09PSAncG9zdCcpIHtcclxuICAgICAgICBxdWV1ZVBvc3RSZW5kZXJFZmZlY3QoZWZmZWN0LnJ1bi5iaW5kKGVmZmVjdCksIGluc3RhbmNlICYmIGluc3RhbmNlLnN1c3BlbnNlKTtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICAgIGVmZmVjdC5ydW4oKTtcclxuICAgIH1cclxuICAgIHJldHVybiAoKSA9PiB7XHJcbiAgICAgICAgZWZmZWN0LnN0b3AoKTtcclxuICAgICAgICBpZiAoaW5zdGFuY2UgJiYgaW5zdGFuY2Uuc2NvcGUpIHtcclxuICAgICAgICAgICAgcmVtb3ZlKGluc3RhbmNlLnNjb3BlLmVmZmVjdHMsIGVmZmVjdCk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxufVxyXG4vLyB0aGlzLiR3YXRjaFxyXG5mdW5jdGlvbiBpbnN0YW5jZVdhdGNoKHNvdXJjZSwgdmFsdWUsIG9wdGlvbnMpIHtcclxuICAgIGNvbnN0IHB1YmxpY1RoaXMgPSB0aGlzLnByb3h5O1xyXG4gICAgY29uc3QgZ2V0dGVyID0gaXNTdHJpbmcoc291cmNlKVxyXG4gICAgICAgID8gc291cmNlLmluY2x1ZGVzKCcuJylcclxuICAgICAgICAgICAgPyBjcmVhdGVQYXRoR2V0dGVyKHB1YmxpY1RoaXMsIHNvdXJjZSlcclxuICAgICAgICAgICAgOiAoKSA9PiBwdWJsaWNUaGlzW3NvdXJjZV1cclxuICAgICAgICA6IHNvdXJjZS5iaW5kKHB1YmxpY1RoaXMsIHB1YmxpY1RoaXMpO1xyXG4gICAgbGV0IGNiO1xyXG4gICAgaWYgKGlzRnVuY3Rpb24odmFsdWUpKSB7XHJcbiAgICAgICAgY2IgPSB2YWx1ZTtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICAgIGNiID0gdmFsdWUuaGFuZGxlcjtcclxuICAgICAgICBvcHRpb25zID0gdmFsdWU7XHJcbiAgICB9XHJcbiAgICBjb25zdCBjdXIgPSBjdXJyZW50SW5zdGFuY2U7XHJcbiAgICBzZXRDdXJyZW50SW5zdGFuY2UodGhpcyk7XHJcbiAgICBjb25zdCByZXMgPSBkb1dhdGNoKGdldHRlciwgY2IuYmluZChwdWJsaWNUaGlzKSwgb3B0aW9ucyk7XHJcbiAgICBpZiAoY3VyKSB7XHJcbiAgICAgICAgc2V0Q3VycmVudEluc3RhbmNlKGN1cik7XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgICB1bnNldEN1cnJlbnRJbnN0YW5jZSgpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHJlcztcclxufVxyXG5mdW5jdGlvbiBjcmVhdGVQYXRoR2V0dGVyKGN0eCwgcGF0aCkge1xyXG4gICAgY29uc3Qgc2VnbWVudHMgPSBwYXRoLnNwbGl0KCcuJyk7XHJcbiAgICByZXR1cm4gKCkgPT4ge1xyXG4gICAgICAgIGxldCBjdXIgPSBjdHg7XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzZWdtZW50cy5sZW5ndGggJiYgY3VyOyBpKyspIHtcclxuICAgICAgICAgICAgY3VyID0gY3VyW3NlZ21lbnRzW2ldXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGN1cjtcclxuICAgIH07XHJcbn1cclxuZnVuY3Rpb24gdHJhdmVyc2UodmFsdWUsIHNlZW4pIHtcclxuICAgIGlmICghaXNPYmplY3QodmFsdWUpIHx8IHZhbHVlW1wiX192X3NraXBcIiAvKiBTS0lQICovXSkge1xyXG4gICAgICAgIHJldHVybiB2YWx1ZTtcclxuICAgIH1cclxuICAgIHNlZW4gPSBzZWVuIHx8IG5ldyBTZXQoKTtcclxuICAgIGlmIChzZWVuLmhhcyh2YWx1ZSkpIHtcclxuICAgICAgICByZXR1cm4gdmFsdWU7XHJcbiAgICB9XHJcbiAgICBzZWVuLmFkZCh2YWx1ZSk7XHJcbiAgICBpZiAoaXNSZWYodmFsdWUpKSB7XHJcbiAgICAgICAgdHJhdmVyc2UodmFsdWUudmFsdWUsIHNlZW4pO1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZiAoaXNBcnJheSh2YWx1ZSkpIHtcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHZhbHVlLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIHRyYXZlcnNlKHZhbHVlW2ldLCBzZWVuKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmIChpc1NldCh2YWx1ZSkgfHwgaXNNYXAodmFsdWUpKSB7XHJcbiAgICAgICAgdmFsdWUuZm9yRWFjaCgodikgPT4ge1xyXG4gICAgICAgICAgICB0cmF2ZXJzZSh2LCBzZWVuKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKGlzUGxhaW5PYmplY3QodmFsdWUpKSB7XHJcbiAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gdmFsdWUpIHtcclxuICAgICAgICAgICAgdHJhdmVyc2UodmFsdWVba2V5XSwgc2Vlbik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIHZhbHVlO1xyXG59XG5cbi8vIGRldiBvbmx5XHJcbmNvbnN0IHdhcm5SdW50aW1lVXNhZ2UgPSAobWV0aG9kKSA9PiB3YXJuKGAke21ldGhvZH0oKSBpcyBhIGNvbXBpbGVyLWhpbnQgaGVscGVyIHRoYXQgaXMgb25seSB1c2FibGUgaW5zaWRlIGAgK1xyXG4gICAgYDxzY3JpcHQgc2V0dXA+IG9mIGEgc2luZ2xlIGZpbGUgY29tcG9uZW50LiBJdHMgYXJndW1lbnRzIHNob3VsZCBiZSBgICtcclxuICAgIGBjb21waWxlZCBhd2F5IGFuZCBwYXNzaW5nIGl0IGF0IHJ1bnRpbWUgaGFzIG5vIGVmZmVjdC5gKTtcclxuLy8gaW1wbGVtZW50YXRpb25cclxuZnVuY3Rpb24gZGVmaW5lUHJvcHMoKSB7XHJcbiAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpKSB7XHJcbiAgICAgICAgd2FyblJ1bnRpbWVVc2FnZShgZGVmaW5lUHJvcHNgKTtcclxuICAgIH1cclxuICAgIHJldHVybiBudWxsO1xyXG59XHJcbi8vIGltcGxlbWVudGF0aW9uXHJcbmZ1bmN0aW9uIGRlZmluZUVtaXRzKCkge1xyXG4gICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSkge1xyXG4gICAgICAgIHdhcm5SdW50aW1lVXNhZ2UoYGRlZmluZUVtaXRzYCk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gbnVsbDtcclxufVxyXG4vKipcclxuICogVnVlIGA8c2NyaXB0IHNldHVwPmAgY29tcGlsZXIgbWFjcm8gZm9yIGRlY2xhcmluZyBhIGNvbXBvbmVudCdzIGV4cG9zZWRcclxuICogaW5zdGFuY2UgcHJvcGVydGllcyB3aGVuIGl0IGlzIGFjY2Vzc2VkIGJ5IGEgcGFyZW50IGNvbXBvbmVudCB2aWEgdGVtcGxhdGVcclxuICogcmVmcy5cclxuICpcclxuICogYDxzY3JpcHQgc2V0dXA+YCBjb21wb25lbnRzIGFyZSBjbG9zZWQgYnkgZGVmYXVsdCAtIGkuZS4gdmFyYWlibGVzIGluc2lkZVxyXG4gKiB0aGUgYDxzY3JpcHQgc2V0dXA+YCBzY29wZSBpcyBub3QgZXhwb3NlZCB0byBwYXJlbnQgdW5sZXNzIGV4cGxpY2l0bHkgZXhwb3NlZFxyXG4gKiB2aWEgYGRlZmluZUV4cG9zZWAuXHJcbiAqXHJcbiAqIFRoaXMgaXMgb25seSB1c2FibGUgaW5zaWRlIGA8c2NyaXB0IHNldHVwPmAsIGlzIGNvbXBpbGVkIGF3YXkgaW4gdGhlXHJcbiAqIG91dHB1dCBhbmQgc2hvdWxkICoqbm90KiogYmUgYWN0dWFsbHkgY2FsbGVkIGF0IHJ1bnRpbWUuXHJcbiAqL1xyXG5mdW5jdGlvbiBkZWZpbmVFeHBvc2UoZXhwb3NlZCkge1xyXG4gICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSkge1xyXG4gICAgICAgIHdhcm5SdW50aW1lVXNhZ2UoYGRlZmluZUV4cG9zZWApO1xyXG4gICAgfVxyXG59XHJcbi8qKlxyXG4gKiBWdWUgYDxzY3JpcHQgc2V0dXA+YCBjb21waWxlciBtYWNybyBmb3IgcHJvdmlkaW5nIHByb3BzIGRlZmF1bHQgdmFsdWVzIHdoZW5cclxuICogdXNpbmcgdHlwZS1iYXNlZCBgZGVmaW5lUHJvcHNgIGRlY2xhcmF0aW9uLlxyXG4gKlxyXG4gKiBFeGFtcGxlIHVzYWdlOlxyXG4gKiBgYGB0c1xyXG4gKiB3aXRoRGVmYXVsdHMoZGVmaW5lUHJvcHM8e1xyXG4gKiAgIHNpemU/OiBudW1iZXJcclxuICogICBsYWJlbHM/OiBzdHJpbmdbXVxyXG4gKiB9PigpLCB7XHJcbiAqICAgc2l6ZTogMyxcclxuICogICBsYWJlbHM6ICgpID0+IFsnZGVmYXVsdCBsYWJlbCddXHJcbiAqIH0pXHJcbiAqIGBgYFxyXG4gKlxyXG4gKiBUaGlzIGlzIG9ubHkgdXNhYmxlIGluc2lkZSBgPHNjcmlwdCBzZXR1cD5gLCBpcyBjb21waWxlZCBhd2F5IGluIHRoZSBvdXRwdXRcclxuICogYW5kIHNob3VsZCAqKm5vdCoqIGJlIGFjdHVhbGx5IGNhbGxlZCBhdCBydW50aW1lLlxyXG4gKi9cclxuZnVuY3Rpb24gd2l0aERlZmF1bHRzKHByb3BzLCBkZWZhdWx0cykge1xyXG4gICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSkge1xyXG4gICAgICAgIHdhcm5SdW50aW1lVXNhZ2UoYHdpdGhEZWZhdWx0c2ApO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIG51bGw7XHJcbn1cclxuZnVuY3Rpb24gdXNlU2xvdHMoKSB7XHJcbiAgICByZXR1cm4gZ2V0Q29udGV4dCgpLnNsb3RzO1xyXG59XHJcbmZ1bmN0aW9uIHVzZUF0dHJzKCkge1xyXG4gICAgcmV0dXJuIGdldENvbnRleHQoKS5hdHRycztcclxufVxyXG5mdW5jdGlvbiBnZXRDb250ZXh0KCkge1xyXG4gICAgY29uc3QgaSA9IGdldEN1cnJlbnRJbnN0YW5jZSgpO1xyXG4gICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSAmJiAhaSkge1xyXG4gICAgICAgIHdhcm4oYHVzZUNvbnRleHQoKSBjYWxsZWQgd2l0aG91dCBhY3RpdmUgaW5zdGFuY2UuYCk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gaS5zZXR1cENvbnRleHQgfHwgKGkuc2V0dXBDb250ZXh0ID0gY3JlYXRlU2V0dXBDb250ZXh0KGkpKTtcclxufVxyXG4vKipcclxuICogUnVudGltZSBoZWxwZXIgZm9yIG1lcmdpbmcgZGVmYXVsdCBkZWNsYXJhdGlvbnMuIEltcG9ydGVkIGJ5IGNvbXBpbGVkIGNvZGVcclxuICogb25seS5cclxuICogQGludGVybmFsXHJcbiAqL1xyXG5mdW5jdGlvbiBtZXJnZURlZmF1bHRzKHJhdywgZGVmYXVsdHMpIHtcclxuICAgIGNvbnN0IHByb3BzID0gaXNBcnJheShyYXcpXHJcbiAgICAgICAgPyByYXcucmVkdWNlKChub3JtYWxpemVkLCBwKSA9PiAoKG5vcm1hbGl6ZWRbcF0gPSB7fSksIG5vcm1hbGl6ZWQpLCB7fSlcclxuICAgICAgICA6IHJhdztcclxuICAgIGZvciAoY29uc3Qga2V5IGluIGRlZmF1bHRzKSB7XHJcbiAgICAgICAgY29uc3Qgb3B0ID0gcHJvcHNba2V5XTtcclxuICAgICAgICBpZiAob3B0KSB7XHJcbiAgICAgICAgICAgIGlmIChpc0FycmF5KG9wdCkgfHwgaXNGdW5jdGlvbihvcHQpKSB7XHJcbiAgICAgICAgICAgICAgICBwcm9wc1trZXldID0geyB0eXBlOiBvcHQsIGRlZmF1bHQ6IGRlZmF1bHRzW2tleV0gfTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIG9wdC5kZWZhdWx0ID0gZGVmYXVsdHNba2V5XTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChvcHQgPT09IG51bGwpIHtcclxuICAgICAgICAgICAgcHJvcHNba2V5XSA9IHsgZGVmYXVsdDogZGVmYXVsdHNba2V5XSB9O1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykpIHtcclxuICAgICAgICAgICAgd2FybihgcHJvcHMgZGVmYXVsdCBrZXkgXCIke2tleX1cIiBoYXMgbm8gY29ycmVzcG9uZGluZyBkZWNsYXJhdGlvbi5gKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gcHJvcHM7XHJcbn1cclxuLyoqXHJcbiAqIFVzZWQgdG8gY3JlYXRlIGEgcHJveHkgZm9yIHRoZSByZXN0IGVsZW1lbnQgd2hlbiBkZXN0cnVjdHVyaW5nIHByb3BzIHdpdGhcclxuICogZGVmaW5lUHJvcHMoKS5cclxuICogQGludGVybmFsXHJcbiAqL1xyXG5mdW5jdGlvbiBjcmVhdGVQcm9wc1Jlc3RQcm94eShwcm9wcywgZXhjbHVkZWRLZXlzKSB7XHJcbiAgICBjb25zdCByZXQgPSB7fTtcclxuICAgIGZvciAoY29uc3Qga2V5IGluIHByb3BzKSB7XHJcbiAgICAgICAgaWYgKCFleGNsdWRlZEtleXMuaW5jbHVkZXMoa2V5KSkge1xyXG4gICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkocmV0LCBrZXksIHtcclxuICAgICAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgICAgICAgICBnZXQ6ICgpID0+IHByb3BzW2tleV1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIHJldDtcclxufVxyXG4vKipcclxuICogYDxzY3JpcHQgc2V0dXA+YCBoZWxwZXIgZm9yIHBlcnNpc3RpbmcgdGhlIGN1cnJlbnQgaW5zdGFuY2UgY29udGV4dCBvdmVyXHJcbiAqIGFzeW5jL2F3YWl0IGZsb3dzLlxyXG4gKlxyXG4gKiBgQHZ1ZS9jb21waWxlci1zZmNgIGNvbnZlcnRzIHRoZSBmb2xsb3dpbmc6XHJcbiAqXHJcbiAqIGBgYHRzXHJcbiAqIGNvbnN0IHggPSBhd2FpdCBmb28oKVxyXG4gKiBgYGBcclxuICpcclxuICogaW50bzpcclxuICpcclxuICogYGBgdHNcclxuICogbGV0IF9fdGVtcCwgX19yZXN0b3JlXHJcbiAqIGNvbnN0IHggPSAoKFtfX3RlbXAsIF9fcmVzdG9yZV0gPSB3aXRoQXN5bmNDb250ZXh0KCgpID0+IGZvbygpKSksX190ZW1wPWF3YWl0IF9fdGVtcCxfX3Jlc3RvcmUoKSxfX3RlbXApXHJcbiAqIGBgYFxyXG4gKiBAaW50ZXJuYWxcclxuICovXHJcbmZ1bmN0aW9uIHdpdGhBc3luY0NvbnRleHQoZ2V0QXdhaXRhYmxlKSB7XHJcbiAgICBjb25zdCBjdHggPSBnZXRDdXJyZW50SW5zdGFuY2UoKTtcclxuICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgJiYgIWN0eCkge1xyXG4gICAgICAgIHdhcm4oYHdpdGhBc3luY0NvbnRleHQgY2FsbGVkIHdpdGhvdXQgYWN0aXZlIGN1cnJlbnQgaW5zdGFuY2UuIGAgK1xyXG4gICAgICAgICAgICBgVGhpcyBpcyBsaWtlbHkgYSBidWcuYCk7XHJcbiAgICB9XHJcbiAgICBsZXQgYXdhaXRhYmxlID0gZ2V0QXdhaXRhYmxlKCk7XHJcbiAgICB1bnNldEN1cnJlbnRJbnN0YW5jZSgpO1xyXG4gICAgaWYgKGlzUHJvbWlzZShhd2FpdGFibGUpKSB7XHJcbiAgICAgICAgYXdhaXRhYmxlID0gYXdhaXRhYmxlLmNhdGNoKGUgPT4ge1xyXG4gICAgICAgICAgICBzZXRDdXJyZW50SW5zdGFuY2UoY3R4KTtcclxuICAgICAgICAgICAgdGhyb3cgZTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIHJldHVybiBbYXdhaXRhYmxlLCAoKSA9PiBzZXRDdXJyZW50SW5zdGFuY2UoY3R4KV07XHJcbn1cblxuLy8gQWN0dWFsIGltcGxlbWVudGF0aW9uXHJcbmZ1bmN0aW9uIGgodHlwZSwgcHJvcHNPckNoaWxkcmVuLCBjaGlsZHJlbikge1xyXG4gICAgY29uc3QgbCA9IGFyZ3VtZW50cy5sZW5ndGg7XHJcbiAgICBpZiAobCA9PT0gMikge1xyXG4gICAgICAgIGlmIChpc09iamVjdChwcm9wc09yQ2hpbGRyZW4pICYmICFpc0FycmF5KHByb3BzT3JDaGlsZHJlbikpIHtcclxuICAgICAgICAgICAgLy8gc2luZ2xlIHZub2RlIHdpdGhvdXQgcHJvcHNcclxuICAgICAgICAgICAgaWYgKGlzVk5vZGUocHJvcHNPckNoaWxkcmVuKSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGNyZWF0ZVZOb2RlKHR5cGUsIG51bGwsIFtwcm9wc09yQ2hpbGRyZW5dKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyBwcm9wcyB3aXRob3V0IGNoaWxkcmVuXHJcbiAgICAgICAgICAgIHJldHVybiBjcmVhdGVWTm9kZSh0eXBlLCBwcm9wc09yQ2hpbGRyZW4pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgLy8gb21pdCBwcm9wc1xyXG4gICAgICAgICAgICByZXR1cm4gY3JlYXRlVk5vZGUodHlwZSwgbnVsbCwgcHJvcHNPckNoaWxkcmVuKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgICBpZiAobCA+IDMpIHtcclxuICAgICAgICAgICAgY2hpbGRyZW4gPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsIDIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChsID09PSAzICYmIGlzVk5vZGUoY2hpbGRyZW4pKSB7XHJcbiAgICAgICAgICAgIGNoaWxkcmVuID0gW2NoaWxkcmVuXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGNyZWF0ZVZOb2RlKHR5cGUsIHByb3BzT3JDaGlsZHJlbiwgY2hpbGRyZW4pO1xyXG4gICAgfVxyXG59XG5cbmNvbnN0IHNzckNvbnRleHRLZXkgPSBTeW1ib2woKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpID8gYHNzckNvbnRleHRgIDogYGApO1xyXG5jb25zdCB1c2VTU1JDb250ZXh0ID0gKCkgPT4ge1xyXG4gICAge1xyXG4gICAgICAgIGNvbnN0IGN0eCA9IGluamVjdChzc3JDb250ZXh0S2V5KTtcclxuICAgICAgICBpZiAoIWN0eCkge1xyXG4gICAgICAgICAgICB3YXJuKGBTZXJ2ZXIgcmVuZGVyaW5nIGNvbnRleHQgbm90IHByb3ZpZGVkLiBNYWtlIHN1cmUgdG8gb25seSBjYWxsIGAgK1xyXG4gICAgICAgICAgICAgICAgYHVzZVNTUkNvbnRleHQoKSBjb25kaXRpb25hbGx5IGluIHRoZSBzZXJ2ZXIgYnVpbGQuYCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBjdHg7XHJcbiAgICB9XHJcbn07XG5cbmZ1bmN0aW9uIGluaXRDdXN0b21Gb3JtYXR0ZXIoKSB7XHJcbiAgICAvKiBlc2xpbnQtZGlzYWJsZSBuby1yZXN0cmljdGVkLWdsb2JhbHMgKi9cclxuICAgIGlmICghKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHx8IHR5cGVvZiB3aW5kb3cgPT09ICd1bmRlZmluZWQnKSB7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgY29uc3QgdnVlU3R5bGUgPSB7IHN0eWxlOiAnY29sb3I6IzNiYTc3NicgfTtcclxuICAgIGNvbnN0IG51bWJlclN0eWxlID0geyBzdHlsZTogJ2NvbG9yOiMwYjFiYzknIH07XHJcbiAgICBjb25zdCBzdHJpbmdTdHlsZSA9IHsgc3R5bGU6ICdjb2xvcjojYjYyZTI0JyB9O1xyXG4gICAgY29uc3Qga2V5d29yZFN0eWxlID0geyBzdHlsZTogJ2NvbG9yOiM5ZDI4OGMnIH07XHJcbiAgICAvLyBjdXN0b20gZm9ybWF0dGVyIGZvciBDaHJvbWVcclxuICAgIC8vIGh0dHBzOi8vd3d3Lm1hdHR6ZXVuZXJ0LmNvbS8yMDE2LzAyLzE5L2N1c3RvbS1jaHJvbWUtZGV2dG9vbHMtb2JqZWN0LWZvcm1hdHRlcnMuaHRtbFxyXG4gICAgY29uc3QgZm9ybWF0dGVyID0ge1xyXG4gICAgICAgIGhlYWRlcihvYmopIHtcclxuICAgICAgICAgICAgLy8gVE9ETyBhbHNvIGZvcm1hdCBDb21wb25lbnRQdWJsaWNJbnN0YW5jZSAmIGN0eC5zbG90cy9hdHRycyBpbiBzZXR1cFxyXG4gICAgICAgICAgICBpZiAoIWlzT2JqZWN0KG9iaikpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChvYmouX19pc1Z1ZSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFsnZGl2JywgdnVlU3R5bGUsIGBWdWVJbnN0YW5jZWBdO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKGlzUmVmKG9iaikpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBbXHJcbiAgICAgICAgICAgICAgICAgICAgJ2RpdicsXHJcbiAgICAgICAgICAgICAgICAgICAge30sXHJcbiAgICAgICAgICAgICAgICAgICAgWydzcGFuJywgdnVlU3R5bGUsIGdlblJlZkZsYWcob2JqKV0sXHJcbiAgICAgICAgICAgICAgICAgICAgJzwnLFxyXG4gICAgICAgICAgICAgICAgICAgIGZvcm1hdFZhbHVlKG9iai52YWx1ZSksXHJcbiAgICAgICAgICAgICAgICAgICAgYD5gXHJcbiAgICAgICAgICAgICAgICBdO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKGlzUmVhY3RpdmUob2JqKSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFtcclxuICAgICAgICAgICAgICAgICAgICAnZGl2JyxcclxuICAgICAgICAgICAgICAgICAgICB7fSxcclxuICAgICAgICAgICAgICAgICAgICBbJ3NwYW4nLCB2dWVTdHlsZSwgJ1JlYWN0aXZlJ10sXHJcbiAgICAgICAgICAgICAgICAgICAgJzwnLFxyXG4gICAgICAgICAgICAgICAgICAgIGZvcm1hdFZhbHVlKG9iaiksXHJcbiAgICAgICAgICAgICAgICAgICAgYD4ke2lzUmVhZG9ubHkob2JqKSA/IGAgKHJlYWRvbmx5KWAgOiBgYH1gXHJcbiAgICAgICAgICAgICAgICBdO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKGlzUmVhZG9ubHkob2JqKSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFtcclxuICAgICAgICAgICAgICAgICAgICAnZGl2JyxcclxuICAgICAgICAgICAgICAgICAgICB7fSxcclxuICAgICAgICAgICAgICAgICAgICBbJ3NwYW4nLCB2dWVTdHlsZSwgJ1JlYWRvbmx5J10sXHJcbiAgICAgICAgICAgICAgICAgICAgJzwnLFxyXG4gICAgICAgICAgICAgICAgICAgIGZvcm1hdFZhbHVlKG9iaiksXHJcbiAgICAgICAgICAgICAgICAgICAgJz4nXHJcbiAgICAgICAgICAgICAgICBdO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgaGFzQm9keShvYmopIHtcclxuICAgICAgICAgICAgcmV0dXJuIG9iaiAmJiBvYmouX19pc1Z1ZTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGJvZHkob2JqKSB7XHJcbiAgICAgICAgICAgIGlmIChvYmogJiYgb2JqLl9faXNWdWUpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBbXHJcbiAgICAgICAgICAgICAgICAgICAgJ2RpdicsXHJcbiAgICAgICAgICAgICAgICAgICAge30sXHJcbiAgICAgICAgICAgICAgICAgICAgLi4uZm9ybWF0SW5zdGFuY2Uob2JqLiQpXHJcbiAgICAgICAgICAgICAgICBdO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIGZ1bmN0aW9uIGZvcm1hdEluc3RhbmNlKGluc3RhbmNlKSB7XHJcbiAgICAgICAgY29uc3QgYmxvY2tzID0gW107XHJcbiAgICAgICAgaWYgKGluc3RhbmNlLnR5cGUucHJvcHMgJiYgaW5zdGFuY2UucHJvcHMpIHtcclxuICAgICAgICAgICAgYmxvY2tzLnB1c2goY3JlYXRlSW5zdGFuY2VCbG9jaygncHJvcHMnLCB0b1JhdyhpbnN0YW5jZS5wcm9wcykpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGluc3RhbmNlLnNldHVwU3RhdGUgIT09IEVNUFRZX09CSikge1xyXG4gICAgICAgICAgICBibG9ja3MucHVzaChjcmVhdGVJbnN0YW5jZUJsb2NrKCdzZXR1cCcsIGluc3RhbmNlLnNldHVwU3RhdGUpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGluc3RhbmNlLmRhdGEgIT09IEVNUFRZX09CSikge1xyXG4gICAgICAgICAgICBibG9ja3MucHVzaChjcmVhdGVJbnN0YW5jZUJsb2NrKCdkYXRhJywgdG9SYXcoaW5zdGFuY2UuZGF0YSkpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgY29tcHV0ZWQgPSBleHRyYWN0S2V5cyhpbnN0YW5jZSwgJ2NvbXB1dGVkJyk7XHJcbiAgICAgICAgaWYgKGNvbXB1dGVkKSB7XHJcbiAgICAgICAgICAgIGJsb2Nrcy5wdXNoKGNyZWF0ZUluc3RhbmNlQmxvY2soJ2NvbXB1dGVkJywgY29tcHV0ZWQpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgaW5qZWN0ZWQgPSBleHRyYWN0S2V5cyhpbnN0YW5jZSwgJ2luamVjdCcpO1xyXG4gICAgICAgIGlmIChpbmplY3RlZCkge1xyXG4gICAgICAgICAgICBibG9ja3MucHVzaChjcmVhdGVJbnN0YW5jZUJsb2NrKCdpbmplY3RlZCcsIGluamVjdGVkKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGJsb2Nrcy5wdXNoKFtcclxuICAgICAgICAgICAgJ2RpdicsXHJcbiAgICAgICAgICAgIHt9LFxyXG4gICAgICAgICAgICBbXHJcbiAgICAgICAgICAgICAgICAnc3BhbicsXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgc3R5bGU6IGtleXdvcmRTdHlsZS5zdHlsZSArICc7b3BhY2l0eTowLjY2J1xyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICckIChpbnRlcm5hbCk6ICdcclxuICAgICAgICAgICAgXSxcclxuICAgICAgICAgICAgWydvYmplY3QnLCB7IG9iamVjdDogaW5zdGFuY2UgfV1cclxuICAgICAgICBdKTtcclxuICAgICAgICByZXR1cm4gYmxvY2tzO1xyXG4gICAgfVxyXG4gICAgZnVuY3Rpb24gY3JlYXRlSW5zdGFuY2VCbG9jayh0eXBlLCB0YXJnZXQpIHtcclxuICAgICAgICB0YXJnZXQgPSBleHRlbmQoe30sIHRhcmdldCk7XHJcbiAgICAgICAgaWYgKCFPYmplY3Qua2V5cyh0YXJnZXQpLmxlbmd0aCkge1xyXG4gICAgICAgICAgICByZXR1cm4gWydzcGFuJywge31dO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gW1xyXG4gICAgICAgICAgICAnZGl2JyxcclxuICAgICAgICAgICAgeyBzdHlsZTogJ2xpbmUtaGVpZ2h0OjEuMjVlbTttYXJnaW4tYm90dG9tOjAuNmVtJyB9LFxyXG4gICAgICAgICAgICBbXHJcbiAgICAgICAgICAgICAgICAnZGl2JyxcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBzdHlsZTogJ2NvbG9yOiM0NzY1ODInXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgdHlwZVxyXG4gICAgICAgICAgICBdLFxyXG4gICAgICAgICAgICBbXHJcbiAgICAgICAgICAgICAgICAnZGl2JyxcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBzdHlsZTogJ3BhZGRpbmctbGVmdDoxLjI1ZW0nXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgLi4uT2JqZWN0LmtleXModGFyZ2V0KS5tYXAoa2V5ID0+IHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gW1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAnZGl2JyxcclxuICAgICAgICAgICAgICAgICAgICAgICAge30sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFsnc3BhbicsIGtleXdvcmRTdHlsZSwga2V5ICsgJzogJ10sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvcm1hdFZhbHVlKHRhcmdldFtrZXldLCBmYWxzZSlcclxuICAgICAgICAgICAgICAgICAgICBdO1xyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgXVxyXG4gICAgICAgIF07XHJcbiAgICB9XHJcbiAgICBmdW5jdGlvbiBmb3JtYXRWYWx1ZSh2LCBhc1JhdyA9IHRydWUpIHtcclxuICAgICAgICBpZiAodHlwZW9mIHYgPT09ICdudW1iZXInKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBbJ3NwYW4nLCBudW1iZXJTdHlsZSwgdl07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKHR5cGVvZiB2ID09PSAnc3RyaW5nJykge1xyXG4gICAgICAgICAgICByZXR1cm4gWydzcGFuJywgc3RyaW5nU3R5bGUsIEpTT04uc3RyaW5naWZ5KHYpXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAodHlwZW9mIHYgPT09ICdib29sZWFuJykge1xyXG4gICAgICAgICAgICByZXR1cm4gWydzcGFuJywga2V5d29yZFN0eWxlLCB2XTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoaXNPYmplY3QodikpIHtcclxuICAgICAgICAgICAgcmV0dXJuIFsnb2JqZWN0JywgeyBvYmplY3Q6IGFzUmF3ID8gdG9SYXcodikgOiB2IH1dO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIFsnc3BhbicsIHN0cmluZ1N0eWxlLCBTdHJpbmcodildO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGZ1bmN0aW9uIGV4dHJhY3RLZXlzKGluc3RhbmNlLCB0eXBlKSB7XHJcbiAgICAgICAgY29uc3QgQ29tcCA9IGluc3RhbmNlLnR5cGU7XHJcbiAgICAgICAgaWYgKGlzRnVuY3Rpb24oQ29tcCkpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCBleHRyYWN0ZWQgPSB7fTtcclxuICAgICAgICBmb3IgKGNvbnN0IGtleSBpbiBpbnN0YW5jZS5jdHgpIHtcclxuICAgICAgICAgICAgaWYgKGlzS2V5T2ZUeXBlKENvbXAsIGtleSwgdHlwZSkpIHtcclxuICAgICAgICAgICAgICAgIGV4dHJhY3RlZFtrZXldID0gaW5zdGFuY2UuY3R4W2tleV07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGV4dHJhY3RlZDtcclxuICAgIH1cclxuICAgIGZ1bmN0aW9uIGlzS2V5T2ZUeXBlKENvbXAsIGtleSwgdHlwZSkge1xyXG4gICAgICAgIGNvbnN0IG9wdHMgPSBDb21wW3R5cGVdO1xyXG4gICAgICAgIGlmICgoaXNBcnJheShvcHRzKSAmJiBvcHRzLmluY2x1ZGVzKGtleSkpIHx8XHJcbiAgICAgICAgICAgIChpc09iamVjdChvcHRzKSAmJiBrZXkgaW4gb3B0cykpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChDb21wLmV4dGVuZHMgJiYgaXNLZXlPZlR5cGUoQ29tcC5leHRlbmRzLCBrZXksIHR5cGUpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoQ29tcC5taXhpbnMgJiYgQ29tcC5taXhpbnMuc29tZShtID0+IGlzS2V5T2ZUeXBlKG0sIGtleSwgdHlwZSkpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGZ1bmN0aW9uIGdlblJlZkZsYWcodikge1xyXG4gICAgICAgIGlmICh2Ll9zaGFsbG93KSB7XHJcbiAgICAgICAgICAgIHJldHVybiBgU2hhbGxvd1JlZmA7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh2LmVmZmVjdCkge1xyXG4gICAgICAgICAgICByZXR1cm4gYENvbXB1dGVkUmVmYDtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGBSZWZgO1xyXG4gICAgfVxyXG4gICAgaWYgKHdpbmRvdy5kZXZ0b29sc0Zvcm1hdHRlcnMpIHtcclxuICAgICAgICB3aW5kb3cuZGV2dG9vbHNGb3JtYXR0ZXJzLnB1c2goZm9ybWF0dGVyKTtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICAgIHdpbmRvdy5kZXZ0b29sc0Zvcm1hdHRlcnMgPSBbZm9ybWF0dGVyXTtcclxuICAgIH1cclxufVxuXG5mdW5jdGlvbiB3aXRoTWVtbyhtZW1vLCByZW5kZXIsIGNhY2hlLCBpbmRleCkge1xyXG4gICAgY29uc3QgY2FjaGVkID0gY2FjaGVbaW5kZXhdO1xyXG4gICAgaWYgKGNhY2hlZCAmJiBpc01lbW9TYW1lKGNhY2hlZCwgbWVtbykpIHtcclxuICAgICAgICByZXR1cm4gY2FjaGVkO1xyXG4gICAgfVxyXG4gICAgY29uc3QgcmV0ID0gcmVuZGVyKCk7XHJcbiAgICAvLyBzaGFsbG93IGNsb25lXHJcbiAgICByZXQubWVtbyA9IG1lbW8uc2xpY2UoKTtcclxuICAgIHJldHVybiAoY2FjaGVbaW5kZXhdID0gcmV0KTtcclxufVxyXG5mdW5jdGlvbiBpc01lbW9TYW1lKGNhY2hlZCwgbWVtbykge1xyXG4gICAgY29uc3QgcHJldiA9IGNhY2hlZC5tZW1vO1xyXG4gICAgaWYgKHByZXYubGVuZ3RoICE9IG1lbW8ubGVuZ3RoKSB7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBwcmV2Lmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgaWYgKHByZXZbaV0gIT09IG1lbW9baV0pIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIC8vIG1ha2Ugc3VyZSB0byBsZXQgcGFyZW50IGJsb2NrIHRyYWNrIGl0IHdoZW4gcmV0dXJuaW5nIGNhY2hlZFxyXG4gICAgaWYgKGlzQmxvY2tUcmVlRW5hYmxlZCA+IDAgJiYgY3VycmVudEJsb2NrKSB7XHJcbiAgICAgICAgY3VycmVudEJsb2NrLnB1c2goY2FjaGVkKTtcclxuICAgIH1cclxuICAgIHJldHVybiB0cnVlO1xyXG59XG5cbi8vIENvcmUgQVBJIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG5jb25zdCB2ZXJzaW9uID0gXCIzLjIuMjZcIjtcclxuY29uc3QgX3NzclV0aWxzID0ge1xyXG4gICAgY3JlYXRlQ29tcG9uZW50SW5zdGFuY2UsXHJcbiAgICBzZXR1cENvbXBvbmVudCxcclxuICAgIHJlbmRlckNvbXBvbmVudFJvb3QsXHJcbiAgICBzZXRDdXJyZW50UmVuZGVyaW5nSW5zdGFuY2UsXHJcbiAgICBpc1ZOb2RlLFxyXG4gICAgbm9ybWFsaXplVk5vZGVcclxufTtcclxuLyoqXHJcbiAqIFNTUiB1dGlscyBmb3IgXFxAdnVlL3NlcnZlci1yZW5kZXJlci4gT25seSBleHBvc2VkIGluIGNqcyBidWlsZHMuXHJcbiAqIEBpbnRlcm5hbFxyXG4gKi9cclxuY29uc3Qgc3NyVXRpbHMgPSAoX3NzclV0aWxzICk7XHJcbi8qKlxyXG4gKiBAaW50ZXJuYWwgb25seSBleHBvc2VkIGluIGNvbXBhdCBidWlsZHNcclxuICovXHJcbmNvbnN0IHJlc29sdmVGaWx0ZXIgPSBudWxsO1xyXG4vKipcclxuICogQGludGVybmFsIG9ubHkgZXhwb3NlZCBpbiBjb21wYXQgYnVpbGRzLlxyXG4gKi9cclxuY29uc3QgY29tcGF0VXRpbHMgPSAobnVsbCk7XG5cbmV4cG9ydCB7IEJhc2VUcmFuc2l0aW9uLCBDb21tZW50LCBGcmFnbWVudCwgS2VlcEFsaXZlLCBTdGF0aWMsIFN1c3BlbnNlLCBUZWxlcG9ydCwgVGV4dCwgY2FsbFdpdGhBc3luY0Vycm9ySGFuZGxpbmcsIGNhbGxXaXRoRXJyb3JIYW5kbGluZywgY2xvbmVWTm9kZSwgY29tcGF0VXRpbHMsIGNyZWF0ZUJsb2NrLCBjcmVhdGVDb21tZW50Vk5vZGUsIGNyZWF0ZUVsZW1lbnRCbG9jaywgY3JlYXRlQmFzZVZOb2RlIGFzIGNyZWF0ZUVsZW1lbnRWTm9kZSwgY3JlYXRlSHlkcmF0aW9uUmVuZGVyZXIsIGNyZWF0ZVByb3BzUmVzdFByb3h5LCBjcmVhdGVSZW5kZXJlciwgY3JlYXRlU2xvdHMsIGNyZWF0ZVN0YXRpY1ZOb2RlLCBjcmVhdGVUZXh0Vk5vZGUsIGNyZWF0ZVZOb2RlLCBkZWZpbmVBc3luY0NvbXBvbmVudCwgZGVmaW5lQ29tcG9uZW50LCBkZWZpbmVFbWl0cywgZGVmaW5lRXhwb3NlLCBkZWZpbmVQcm9wcywgZGV2dG9vbHMsIGdldEN1cnJlbnRJbnN0YW5jZSwgZ2V0VHJhbnNpdGlvblJhd0NoaWxkcmVuLCBndWFyZFJlYWN0aXZlUHJvcHMsIGgsIGhhbmRsZUVycm9yLCBpbml0Q3VzdG9tRm9ybWF0dGVyLCBpbmplY3QsIGlzTWVtb1NhbWUsIGlzUnVudGltZU9ubHksIGlzVk5vZGUsIG1lcmdlRGVmYXVsdHMsIG1lcmdlUHJvcHMsIG5leHRUaWNrLCBvbkFjdGl2YXRlZCwgb25CZWZvcmVNb3VudCwgb25CZWZvcmVVbm1vdW50LCBvbkJlZm9yZVVwZGF0ZSwgb25EZWFjdGl2YXRlZCwgb25FcnJvckNhcHR1cmVkLCBvbk1vdW50ZWQsIG9uUmVuZGVyVHJhY2tlZCwgb25SZW5kZXJUcmlnZ2VyZWQsIG9uU2VydmVyUHJlZmV0Y2gsIG9uVW5tb3VudGVkLCBvblVwZGF0ZWQsIG9wZW5CbG9jaywgcG9wU2NvcGVJZCwgcHJvdmlkZSwgcHVzaFNjb3BlSWQsIHF1ZXVlUG9zdEZsdXNoQ2IsIHJlZ2lzdGVyUnVudGltZUNvbXBpbGVyLCByZW5kZXJMaXN0LCByZW5kZXJTbG90LCByZXNvbHZlQ29tcG9uZW50LCByZXNvbHZlRGlyZWN0aXZlLCByZXNvbHZlRHluYW1pY0NvbXBvbmVudCwgcmVzb2x2ZUZpbHRlciwgcmVzb2x2ZVRyYW5zaXRpb25Ib29rcywgc2V0QmxvY2tUcmFja2luZywgc2V0RGV2dG9vbHNIb29rLCBzZXRUcmFuc2l0aW9uSG9va3MsIHNzckNvbnRleHRLZXksIHNzclV0aWxzLCB0b0hhbmRsZXJzLCB0cmFuc2Zvcm1WTm9kZUFyZ3MsIHVzZUF0dHJzLCB1c2VTU1JDb250ZXh0LCB1c2VTbG90cywgdXNlVHJhbnNpdGlvblN0YXRlLCB2ZXJzaW9uLCB3YXJuLCB3YXRjaCwgd2F0Y2hFZmZlY3QsIHdhdGNoUG9zdEVmZmVjdCwgd2F0Y2hTeW5jRWZmZWN0LCB3aXRoQXN5bmNDb250ZXh0LCB3aXRoQ3R4LCB3aXRoRGVmYXVsdHMsIHdpdGhEaXJlY3RpdmVzLCB3aXRoTWVtbywgd2l0aFNjb3BlSWQgfTtcbiIsImltcG9ydCB7IGNhbWVsaXplLCB3YXJuLCBjYWxsV2l0aEFzeW5jRXJyb3JIYW5kbGluZywgZGVmaW5lQ29tcG9uZW50LCBuZXh0VGljaywgY3JlYXRlVk5vZGUsIGdldEN1cnJlbnRJbnN0YW5jZSwgd2F0Y2hQb3N0RWZmZWN0LCBvbk1vdW50ZWQsIG9uVW5tb3VudGVkLCBGcmFnbWVudCwgU3RhdGljLCBoLCBCYXNlVHJhbnNpdGlvbiwgdXNlVHJhbnNpdGlvblN0YXRlLCBvblVwZGF0ZWQsIHRvUmF3LCBnZXRUcmFuc2l0aW9uUmF3Q2hpbGRyZW4sIHNldFRyYW5zaXRpb25Ib29rcywgcmVzb2x2ZVRyYW5zaXRpb25Ib29rcywgY3JlYXRlUmVuZGVyZXIsIGlzUnVudGltZU9ubHksIGNyZWF0ZUh5ZHJhdGlvblJlbmRlcmVyIH0gZnJvbSAnQHZ1ZS9ydW50aW1lLWNvcmUnO1xuZXhwb3J0ICogZnJvbSAnQHZ1ZS9ydW50aW1lLWNvcmUnO1xuaW1wb3J0IHsgaXNTdHJpbmcsIGlzQXJyYXksIGh5cGhlbmF0ZSwgY2FwaXRhbGl6ZSwgaXNTcGVjaWFsQm9vbGVhbkF0dHIsIGluY2x1ZGVCb29sZWFuQXR0ciwgaXNPbiwgaXNNb2RlbExpc3RlbmVyLCBpc0Z1bmN0aW9uLCB0b051bWJlciwgY2FtZWxpemUgYXMgY2FtZWxpemUkMSwgZXh0ZW5kLCBFTVBUWV9PQkosIGlzT2JqZWN0LCBpbnZva2VBcnJheUZucywgbG9vc2VJbmRleE9mLCBpc1NldCwgbG9vc2VFcXVhbCwgaXNIVE1MVGFnLCBpc1NWR1RhZyB9IGZyb20gJ0B2dWUvc2hhcmVkJztcblxuY29uc3Qgc3ZnTlMgPSAnaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnO1xyXG5jb25zdCBkb2MgPSAodHlwZW9mIGRvY3VtZW50ICE9PSAndW5kZWZpbmVkJyA/IGRvY3VtZW50IDogbnVsbCk7XHJcbmNvbnN0IHN0YXRpY1RlbXBsYXRlQ2FjaGUgPSBuZXcgTWFwKCk7XHJcbmNvbnN0IG5vZGVPcHMgPSB7XHJcbiAgICBpbnNlcnQ6IChjaGlsZCwgcGFyZW50LCBhbmNob3IpID0+IHtcclxuICAgICAgICBwYXJlbnQuaW5zZXJ0QmVmb3JlKGNoaWxkLCBhbmNob3IgfHwgbnVsbCk7XHJcbiAgICB9LFxyXG4gICAgcmVtb3ZlOiBjaGlsZCA9PiB7XHJcbiAgICAgICAgY29uc3QgcGFyZW50ID0gY2hpbGQucGFyZW50Tm9kZTtcclxuICAgICAgICBpZiAocGFyZW50KSB7XHJcbiAgICAgICAgICAgIHBhcmVudC5yZW1vdmVDaGlsZChjaGlsZCk7XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuICAgIGNyZWF0ZUVsZW1lbnQ6ICh0YWcsIGlzU1ZHLCBpcywgcHJvcHMpID0+IHtcclxuICAgICAgICBjb25zdCBlbCA9IGlzU1ZHXHJcbiAgICAgICAgICAgID8gZG9jLmNyZWF0ZUVsZW1lbnROUyhzdmdOUywgdGFnKVxyXG4gICAgICAgICAgICA6IGRvYy5jcmVhdGVFbGVtZW50KHRhZywgaXMgPyB7IGlzIH0gOiB1bmRlZmluZWQpO1xyXG4gICAgICAgIGlmICh0YWcgPT09ICdzZWxlY3QnICYmIHByb3BzICYmIHByb3BzLm11bHRpcGxlICE9IG51bGwpIHtcclxuICAgICAgICAgICAgZWwuc2V0QXR0cmlidXRlKCdtdWx0aXBsZScsIHByb3BzLm11bHRpcGxlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGVsO1xyXG4gICAgfSxcclxuICAgIGNyZWF0ZVRleHQ6IHRleHQgPT4gZG9jLmNyZWF0ZVRleHROb2RlKHRleHQpLFxyXG4gICAgY3JlYXRlQ29tbWVudDogdGV4dCA9PiBkb2MuY3JlYXRlQ29tbWVudCh0ZXh0KSxcclxuICAgIHNldFRleHQ6IChub2RlLCB0ZXh0KSA9PiB7XHJcbiAgICAgICAgbm9kZS5ub2RlVmFsdWUgPSB0ZXh0O1xyXG4gICAgfSxcclxuICAgIHNldEVsZW1lbnRUZXh0OiAoZWwsIHRleHQpID0+IHtcclxuICAgICAgICBlbC50ZXh0Q29udGVudCA9IHRleHQ7XHJcbiAgICB9LFxyXG4gICAgcGFyZW50Tm9kZTogbm9kZSA9PiBub2RlLnBhcmVudE5vZGUsXHJcbiAgICBuZXh0U2libGluZzogbm9kZSA9PiBub2RlLm5leHRTaWJsaW5nLFxyXG4gICAgcXVlcnlTZWxlY3Rvcjogc2VsZWN0b3IgPT4gZG9jLnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3IpLFxyXG4gICAgc2V0U2NvcGVJZChlbCwgaWQpIHtcclxuICAgICAgICBlbC5zZXRBdHRyaWJ1dGUoaWQsICcnKTtcclxuICAgIH0sXHJcbiAgICBjbG9uZU5vZGUoZWwpIHtcclxuICAgICAgICBjb25zdCBjbG9uZWQgPSBlbC5jbG9uZU5vZGUodHJ1ZSk7XHJcbiAgICAgICAgLy8gIzMwNzJcclxuICAgICAgICAvLyAtIGluIGBwYXRjaERPTVByb3BgLCB3ZSBzdG9yZSB0aGUgYWN0dWFsIHZhbHVlIGluIHRoZSBgZWwuX3ZhbHVlYCBwcm9wZXJ0eS5cclxuICAgICAgICAvLyAtIG5vcm1hbGx5LCBlbGVtZW50cyB1c2luZyBgOnZhbHVlYCBiaW5kaW5ncyB3aWxsIG5vdCBiZSBob2lzdGVkLCBidXQgaWZcclxuICAgICAgICAvLyAgIHRoZSBib3VuZCB2YWx1ZSBpcyBhIGNvbnN0YW50LCBlLmcuIGA6dmFsdWU9XCJ0cnVlXCJgIC0gdGhleSBkbyBnZXRcclxuICAgICAgICAvLyAgIGhvaXN0ZWQuXHJcbiAgICAgICAgLy8gLSBpbiBwcm9kdWN0aW9uLCBob2lzdGVkIG5vZGVzIGFyZSBjbG9uZWQgd2hlbiBzdWJzZXF1ZW50IGluc2VydHMsIGJ1dFxyXG4gICAgICAgIC8vICAgY2xvbmVOb2RlKCkgZG9lcyBub3QgY29weSB0aGUgY3VzdG9tIHByb3BlcnR5IHdlIGF0dGFjaGVkLlxyXG4gICAgICAgIC8vIC0gVGhpcyBtYXkgbmVlZCB0byBhY2NvdW50IGZvciBvdGhlciBjdXN0b20gRE9NIHByb3BlcnRpZXMgd2UgYXR0YWNoIHRvXHJcbiAgICAgICAgLy8gICBlbGVtZW50cyBpbiBhZGRpdGlvbiB0byBgX3ZhbHVlYCBpbiB0aGUgZnV0dXJlLlxyXG4gICAgICAgIGlmIChgX3ZhbHVlYCBpbiBlbCkge1xyXG4gICAgICAgICAgICBjbG9uZWQuX3ZhbHVlID0gZWwuX3ZhbHVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gY2xvbmVkO1xyXG4gICAgfSxcclxuICAgIC8vIF9fVU5TQUZFX19cclxuICAgIC8vIFJlYXNvbjogaW5uZXJIVE1MLlxyXG4gICAgLy8gU3RhdGljIGNvbnRlbnQgaGVyZSBjYW4gb25seSBjb21lIGZyb20gY29tcGlsZWQgdGVtcGxhdGVzLlxyXG4gICAgLy8gQXMgbG9uZyBhcyB0aGUgdXNlciBvbmx5IHVzZXMgdHJ1c3RlZCB0ZW1wbGF0ZXMsIHRoaXMgaXMgc2FmZS5cclxuICAgIGluc2VydFN0YXRpY0NvbnRlbnQoY29udGVudCwgcGFyZW50LCBhbmNob3IsIGlzU1ZHKSB7XHJcbiAgICAgICAgLy8gPHBhcmVudD4gYmVmb3JlIHwgZmlyc3QgLi4uIGxhc3QgfCBhbmNob3IgPC9wYXJlbnQ+XHJcbiAgICAgICAgY29uc3QgYmVmb3JlID0gYW5jaG9yID8gYW5jaG9yLnByZXZpb3VzU2libGluZyA6IHBhcmVudC5sYXN0Q2hpbGQ7XHJcbiAgICAgICAgbGV0IHRlbXBsYXRlID0gc3RhdGljVGVtcGxhdGVDYWNoZS5nZXQoY29udGVudCk7XHJcbiAgICAgICAgaWYgKCF0ZW1wbGF0ZSkge1xyXG4gICAgICAgICAgICBjb25zdCB0ID0gZG9jLmNyZWF0ZUVsZW1lbnQoJ3RlbXBsYXRlJyk7XHJcbiAgICAgICAgICAgIHQuaW5uZXJIVE1MID0gaXNTVkcgPyBgPHN2Zz4ke2NvbnRlbnR9PC9zdmc+YCA6IGNvbnRlbnQ7XHJcbiAgICAgICAgICAgIHRlbXBsYXRlID0gdC5jb250ZW50O1xyXG4gICAgICAgICAgICBpZiAoaXNTVkcpIHtcclxuICAgICAgICAgICAgICAgIC8vIHJlbW92ZSBvdXRlciBzdmcgd3JhcHBlclxyXG4gICAgICAgICAgICAgICAgY29uc3Qgd3JhcHBlciA9IHRlbXBsYXRlLmZpcnN0Q2hpbGQ7XHJcbiAgICAgICAgICAgICAgICB3aGlsZSAod3JhcHBlci5maXJzdENoaWxkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGVtcGxhdGUuYXBwZW5kQ2hpbGQod3JhcHBlci5maXJzdENoaWxkKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHRlbXBsYXRlLnJlbW92ZUNoaWxkKHdyYXBwZXIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHN0YXRpY1RlbXBsYXRlQ2FjaGUuc2V0KGNvbnRlbnQsIHRlbXBsYXRlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcGFyZW50Lmluc2VydEJlZm9yZSh0ZW1wbGF0ZS5jbG9uZU5vZGUodHJ1ZSksIGFuY2hvcik7XHJcbiAgICAgICAgcmV0dXJuIFtcclxuICAgICAgICAgICAgLy8gZmlyc3RcclxuICAgICAgICAgICAgYmVmb3JlID8gYmVmb3JlLm5leHRTaWJsaW5nIDogcGFyZW50LmZpcnN0Q2hpbGQsXHJcbiAgICAgICAgICAgIC8vIGxhc3RcclxuICAgICAgICAgICAgYW5jaG9yID8gYW5jaG9yLnByZXZpb3VzU2libGluZyA6IHBhcmVudC5sYXN0Q2hpbGRcclxuICAgICAgICBdO1xyXG4gICAgfVxyXG59O1xuXG4vLyBjb21waWxlciBzaG91bGQgbm9ybWFsaXplIGNsYXNzICsgOmNsYXNzIGJpbmRpbmdzIG9uIHRoZSBzYW1lIGVsZW1lbnRcclxuLy8gaW50byBhIHNpbmdsZSBiaW5kaW5nIFsnc3RhdGljQ2xhc3MnLCBkeW5hbWljXVxyXG5mdW5jdGlvbiBwYXRjaENsYXNzKGVsLCB2YWx1ZSwgaXNTVkcpIHtcclxuICAgIC8vIGRpcmVjdGx5IHNldHRpbmcgY2xhc3NOYW1lIHNob3VsZCBiZSBmYXN0ZXIgdGhhbiBzZXRBdHRyaWJ1dGUgaW4gdGhlb3J5XHJcbiAgICAvLyBpZiB0aGlzIGlzIGFuIGVsZW1lbnQgZHVyaW5nIGEgdHJhbnNpdGlvbiwgdGFrZSB0aGUgdGVtcG9yYXJ5IHRyYW5zaXRpb25cclxuICAgIC8vIGNsYXNzZXMgaW50byBhY2NvdW50LlxyXG4gICAgY29uc3QgdHJhbnNpdGlvbkNsYXNzZXMgPSBlbC5fdnRjO1xyXG4gICAgaWYgKHRyYW5zaXRpb25DbGFzc2VzKSB7XHJcbiAgICAgICAgdmFsdWUgPSAodmFsdWUgPyBbdmFsdWUsIC4uLnRyYW5zaXRpb25DbGFzc2VzXSA6IFsuLi50cmFuc2l0aW9uQ2xhc3Nlc10pLmpvaW4oJyAnKTtcclxuICAgIH1cclxuICAgIGlmICh2YWx1ZSA9PSBudWxsKSB7XHJcbiAgICAgICAgZWwucmVtb3ZlQXR0cmlidXRlKCdjbGFzcycpO1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZiAoaXNTVkcpIHtcclxuICAgICAgICBlbC5zZXRBdHRyaWJ1dGUoJ2NsYXNzJywgdmFsdWUpO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgZWwuY2xhc3NOYW1lID0gdmFsdWU7XHJcbiAgICB9XHJcbn1cblxuZnVuY3Rpb24gcGF0Y2hTdHlsZShlbCwgcHJldiwgbmV4dCkge1xyXG4gICAgY29uc3Qgc3R5bGUgPSBlbC5zdHlsZTtcclxuICAgIGNvbnN0IGlzQ3NzU3RyaW5nID0gaXNTdHJpbmcobmV4dCk7XHJcbiAgICBpZiAobmV4dCAmJiAhaXNDc3NTdHJpbmcpIHtcclxuICAgICAgICBmb3IgKGNvbnN0IGtleSBpbiBuZXh0KSB7XHJcbiAgICAgICAgICAgIHNldFN0eWxlKHN0eWxlLCBrZXksIG5leHRba2V5XSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChwcmV2ICYmICFpc1N0cmluZyhwcmV2KSkge1xyXG4gICAgICAgICAgICBmb3IgKGNvbnN0IGtleSBpbiBwcmV2KSB7XHJcbiAgICAgICAgICAgICAgICBpZiAobmV4dFtrZXldID09IG51bGwpIHtcclxuICAgICAgICAgICAgICAgICAgICBzZXRTdHlsZShzdHlsZSwga2V5LCAnJyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgICBjb25zdCBjdXJyZW50RGlzcGxheSA9IHN0eWxlLmRpc3BsYXk7XHJcbiAgICAgICAgaWYgKGlzQ3NzU3RyaW5nKSB7XHJcbiAgICAgICAgICAgIGlmIChwcmV2ICE9PSBuZXh0KSB7XHJcbiAgICAgICAgICAgICAgICBzdHlsZS5jc3NUZXh0ID0gbmV4dDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChwcmV2KSB7XHJcbiAgICAgICAgICAgIGVsLnJlbW92ZUF0dHJpYnV0ZSgnc3R5bGUnKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gaW5kaWNhdGVzIHRoYXQgdGhlIGBkaXNwbGF5YCBvZiB0aGUgZWxlbWVudCBpcyBjb250cm9sbGVkIGJ5IGB2LXNob3dgLFxyXG4gICAgICAgIC8vIHNvIHdlIGFsd2F5cyBrZWVwIHRoZSBjdXJyZW50IGBkaXNwbGF5YCB2YWx1ZSByZWdhcmRsZXNzIG9mIHRoZSBgc3R5bGVgXHJcbiAgICAgICAgLy8gdmFsdWUsIHRodXMgaGFuZGluZyBvdmVyIGNvbnRyb2wgdG8gYHYtc2hvd2AuXHJcbiAgICAgICAgaWYgKCdfdm9kJyBpbiBlbCkge1xyXG4gICAgICAgICAgICBzdHlsZS5kaXNwbGF5ID0gY3VycmVudERpc3BsYXk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbmNvbnN0IGltcG9ydGFudFJFID0gL1xccyohaW1wb3J0YW50JC87XHJcbmZ1bmN0aW9uIHNldFN0eWxlKHN0eWxlLCBuYW1lLCB2YWwpIHtcclxuICAgIGlmIChpc0FycmF5KHZhbCkpIHtcclxuICAgICAgICB2YWwuZm9yRWFjaCh2ID0+IHNldFN0eWxlKHN0eWxlLCBuYW1lLCB2KSk7XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgICBpZiAobmFtZS5zdGFydHNXaXRoKCctLScpKSB7XHJcbiAgICAgICAgICAgIC8vIGN1c3RvbSBwcm9wZXJ0eSBkZWZpbml0aW9uXHJcbiAgICAgICAgICAgIHN0eWxlLnNldFByb3BlcnR5KG5hbWUsIHZhbCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBjb25zdCBwcmVmaXhlZCA9IGF1dG9QcmVmaXgoc3R5bGUsIG5hbWUpO1xyXG4gICAgICAgICAgICBpZiAoaW1wb3J0YW50UkUudGVzdCh2YWwpKSB7XHJcbiAgICAgICAgICAgICAgICAvLyAhaW1wb3J0YW50XHJcbiAgICAgICAgICAgICAgICBzdHlsZS5zZXRQcm9wZXJ0eShoeXBoZW5hdGUocHJlZml4ZWQpLCB2YWwucmVwbGFjZShpbXBvcnRhbnRSRSwgJycpLCAnaW1wb3J0YW50Jyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBzdHlsZVtwcmVmaXhlZF0gPSB2YWw7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuY29uc3QgcHJlZml4ZXMgPSBbJ1dlYmtpdCcsICdNb3onLCAnbXMnXTtcclxuY29uc3QgcHJlZml4Q2FjaGUgPSB7fTtcclxuZnVuY3Rpb24gYXV0b1ByZWZpeChzdHlsZSwgcmF3TmFtZSkge1xyXG4gICAgY29uc3QgY2FjaGVkID0gcHJlZml4Q2FjaGVbcmF3TmFtZV07XHJcbiAgICBpZiAoY2FjaGVkKSB7XHJcbiAgICAgICAgcmV0dXJuIGNhY2hlZDtcclxuICAgIH1cclxuICAgIGxldCBuYW1lID0gY2FtZWxpemUocmF3TmFtZSk7XHJcbiAgICBpZiAobmFtZSAhPT0gJ2ZpbHRlcicgJiYgbmFtZSBpbiBzdHlsZSkge1xyXG4gICAgICAgIHJldHVybiAocHJlZml4Q2FjaGVbcmF3TmFtZV0gPSBuYW1lKTtcclxuICAgIH1cclxuICAgIG5hbWUgPSBjYXBpdGFsaXplKG5hbWUpO1xyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBwcmVmaXhlcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgIGNvbnN0IHByZWZpeGVkID0gcHJlZml4ZXNbaV0gKyBuYW1lO1xyXG4gICAgICAgIGlmIChwcmVmaXhlZCBpbiBzdHlsZSkge1xyXG4gICAgICAgICAgICByZXR1cm4gKHByZWZpeENhY2hlW3Jhd05hbWVdID0gcHJlZml4ZWQpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiByYXdOYW1lO1xyXG59XG5cbmNvbnN0IHhsaW5rTlMgPSAnaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayc7XHJcbmZ1bmN0aW9uIHBhdGNoQXR0cihlbCwga2V5LCB2YWx1ZSwgaXNTVkcsIGluc3RhbmNlKSB7XHJcbiAgICBpZiAoaXNTVkcgJiYga2V5LnN0YXJ0c1dpdGgoJ3hsaW5rOicpKSB7XHJcbiAgICAgICAgaWYgKHZhbHVlID09IG51bGwpIHtcclxuICAgICAgICAgICAgZWwucmVtb3ZlQXR0cmlidXRlTlMoeGxpbmtOUywga2V5LnNsaWNlKDYsIGtleS5sZW5ndGgpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGVsLnNldEF0dHJpYnV0ZU5TKHhsaW5rTlMsIGtleSwgdmFsdWUpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICAgIC8vIG5vdGUgd2UgYXJlIG9ubHkgY2hlY2tpbmcgYm9vbGVhbiBhdHRyaWJ1dGVzIHRoYXQgZG9uJ3QgaGF2ZSBhXHJcbiAgICAgICAgLy8gY29ycmVzcG9uZGluZyBkb20gcHJvcCBvZiB0aGUgc2FtZSBuYW1lIGhlcmUuXHJcbiAgICAgICAgY29uc3QgaXNCb29sZWFuID0gaXNTcGVjaWFsQm9vbGVhbkF0dHIoa2V5KTtcclxuICAgICAgICBpZiAodmFsdWUgPT0gbnVsbCB8fCAoaXNCb29sZWFuICYmICFpbmNsdWRlQm9vbGVhbkF0dHIodmFsdWUpKSkge1xyXG4gICAgICAgICAgICBlbC5yZW1vdmVBdHRyaWJ1dGUoa2V5KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGVsLnNldEF0dHJpYnV0ZShrZXksIGlzQm9vbGVhbiA/ICcnIDogdmFsdWUpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxuXG4vLyBfX1VOU0FGRV9fXHJcbi8vIGZ1bmN0aW9ucy4gVGhlIHVzZXIgaXMgcmVzcG9uc2libGUgZm9yIHVzaW5nIHRoZW0gd2l0aCBvbmx5IHRydXN0ZWQgY29udGVudC5cclxuZnVuY3Rpb24gcGF0Y2hET01Qcm9wKGVsLCBrZXksIHZhbHVlLCBcclxuLy8gdGhlIGZvbGxvd2luZyBhcmdzIGFyZSBwYXNzZWQgb25seSBkdWUgdG8gcG90ZW50aWFsIGlubmVySFRNTC90ZXh0Q29udGVudFxyXG4vLyBvdmVycmlkaW5nIGV4aXN0aW5nIFZOb2RlcywgaW4gd2hpY2ggY2FzZSB0aGUgb2xkIHRyZWUgbXVzdCBiZSBwcm9wZXJseVxyXG4vLyB1bm1vdW50ZWQuXHJcbnByZXZDaGlsZHJlbiwgcGFyZW50Q29tcG9uZW50LCBwYXJlbnRTdXNwZW5zZSwgdW5tb3VudENoaWxkcmVuKSB7XHJcbiAgICBpZiAoa2V5ID09PSAnaW5uZXJIVE1MJyB8fCBrZXkgPT09ICd0ZXh0Q29udGVudCcpIHtcclxuICAgICAgICBpZiAocHJldkNoaWxkcmVuKSB7XHJcbiAgICAgICAgICAgIHVubW91bnRDaGlsZHJlbihwcmV2Q2hpbGRyZW4sIHBhcmVudENvbXBvbmVudCwgcGFyZW50U3VzcGVuc2UpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbFtrZXldID0gdmFsdWUgPT0gbnVsbCA/ICcnIDogdmFsdWU7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgaWYgKGtleSA9PT0gJ3ZhbHVlJyAmJlxyXG4gICAgICAgIGVsLnRhZ05hbWUgIT09ICdQUk9HUkVTUycgJiZcclxuICAgICAgICAvLyBjdXN0b20gZWxlbWVudHMgbWF5IHVzZSBfdmFsdWUgaW50ZXJuYWxseVxyXG4gICAgICAgICFlbC50YWdOYW1lLmluY2x1ZGVzKCctJykpIHtcclxuICAgICAgICAvLyBzdG9yZSB2YWx1ZSBhcyBfdmFsdWUgYXMgd2VsbCBzaW5jZVxyXG4gICAgICAgIC8vIG5vbi1zdHJpbmcgdmFsdWVzIHdpbGwgYmUgc3RyaW5naWZpZWQuXHJcbiAgICAgICAgZWwuX3ZhbHVlID0gdmFsdWU7XHJcbiAgICAgICAgY29uc3QgbmV3VmFsdWUgPSB2YWx1ZSA9PSBudWxsID8gJycgOiB2YWx1ZTtcclxuICAgICAgICBpZiAoZWwudmFsdWUgIT09IG5ld1ZhbHVlIHx8XHJcbiAgICAgICAgICAgIC8vICM0OTU2OiBhbHdheXMgc2V0IGZvciBPUFRJT04gZWxlbWVudHMgYmVjYXVzZSBpdHMgdmFsdWUgZmFsbHMgYmFjayB0b1xyXG4gICAgICAgICAgICAvLyB0ZXh0Q29udGVudCBpZiBubyB2YWx1ZSBhdHRyaWJ1dGUgaXMgcHJlc2VudC4gQW5kIHNldHRpbmcgLnZhbHVlIGZvclxyXG4gICAgICAgICAgICAvLyBPUFRJT04gaGFzIG5vIHNpZGUgZWZmZWN0XHJcbiAgICAgICAgICAgIGVsLnRhZ05hbWUgPT09ICdPUFRJT04nKSB7XHJcbiAgICAgICAgICAgIGVsLnZhbHVlID0gbmV3VmFsdWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh2YWx1ZSA9PSBudWxsKSB7XHJcbiAgICAgICAgICAgIGVsLnJlbW92ZUF0dHJpYnV0ZShrZXkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICBpZiAodmFsdWUgPT09ICcnIHx8IHZhbHVlID09IG51bGwpIHtcclxuICAgICAgICBjb25zdCB0eXBlID0gdHlwZW9mIGVsW2tleV07XHJcbiAgICAgICAgaWYgKHR5cGUgPT09ICdib29sZWFuJykge1xyXG4gICAgICAgICAgICAvLyBlLmcuIDxzZWxlY3QgbXVsdGlwbGU+IGNvbXBpbGVzIHRvIHsgbXVsdGlwbGU6ICcnIH1cclxuICAgICAgICAgICAgZWxba2V5XSA9IGluY2x1ZGVCb29sZWFuQXR0cih2YWx1ZSk7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAodmFsdWUgPT0gbnVsbCAmJiB0eXBlID09PSAnc3RyaW5nJykge1xyXG4gICAgICAgICAgICAvLyBlLmcuIDxkaXYgOmlkPVwibnVsbFwiPlxyXG4gICAgICAgICAgICBlbFtrZXldID0gJyc7XHJcbiAgICAgICAgICAgIGVsLnJlbW92ZUF0dHJpYnV0ZShrZXkpO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKHR5cGUgPT09ICdudW1iZXInKSB7XHJcbiAgICAgICAgICAgIC8vIGUuZy4gPGltZyA6d2lkdGg9XCJudWxsXCI+XHJcbiAgICAgICAgICAgIC8vIHRoZSB2YWx1ZSBvZiBzb21lIElETCBhdHRyIG11c3QgYmUgZ3JlYXRlciB0aGFuIDAsIGUuZy4gaW5wdXQuc2l6ZSA9IDAgLT4gZXJyb3JcclxuICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgIGVsW2tleV0gPSAwO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNhdGNoIChfYSkgeyB9XHJcbiAgICAgICAgICAgIGVsLnJlbW92ZUF0dHJpYnV0ZShrZXkpO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgLy8gc29tZSBwcm9wZXJ0aWVzIHBlcmZvcm0gdmFsdWUgdmFsaWRhdGlvbiBhbmQgdGhyb3dcclxuICAgIHRyeSB7XHJcbiAgICAgICAgZWxba2V5XSA9IHZhbHVlO1xyXG4gICAgfVxyXG4gICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpKSB7XHJcbiAgICAgICAgICAgIHdhcm4oYEZhaWxlZCBzZXR0aW5nIHByb3AgXCIke2tleX1cIiBvbiA8JHtlbC50YWdOYW1lLnRvTG93ZXJDYXNlKCl9PjogYCArXHJcbiAgICAgICAgICAgICAgICBgdmFsdWUgJHt2YWx1ZX0gaXMgaW52YWxpZC5gLCBlKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cblxuLy8gQXN5bmMgZWRnZSBjYXNlIGZpeCByZXF1aXJlcyBzdG9yaW5nIGFuIGV2ZW50IGxpc3RlbmVyJ3MgYXR0YWNoIHRpbWVzdGFtcC5cclxubGV0IF9nZXROb3cgPSBEYXRlLm5vdztcclxubGV0IHNraXBUaW1lc3RhbXBDaGVjayA9IGZhbHNlO1xyXG5pZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgIC8vIERldGVybWluZSB3aGF0IGV2ZW50IHRpbWVzdGFtcCB0aGUgYnJvd3NlciBpcyB1c2luZy4gQW5ub3lpbmdseSwgdGhlXHJcbiAgICAvLyB0aW1lc3RhbXAgY2FuIGVpdGhlciBiZSBoaS1yZXMgKHJlbGF0aXZlIHRvIHBhZ2UgbG9hZCkgb3IgbG93LXJlc1xyXG4gICAgLy8gKHJlbGF0aXZlIHRvIFVOSVggZXBvY2gpLCBzbyBpbiBvcmRlciB0byBjb21wYXJlIHRpbWUgd2UgaGF2ZSB0byB1c2UgdGhlXHJcbiAgICAvLyBzYW1lIHRpbWVzdGFtcCB0eXBlIHdoZW4gc2F2aW5nIHRoZSBmbHVzaCB0aW1lc3RhbXAuXHJcbiAgICBpZiAoX2dldE5vdygpID4gZG9jdW1lbnQuY3JlYXRlRXZlbnQoJ0V2ZW50JykudGltZVN0YW1wKSB7XHJcbiAgICAgICAgLy8gaWYgdGhlIGxvdy1yZXMgdGltZXN0YW1wIHdoaWNoIGlzIGJpZ2dlciB0aGFuIHRoZSBldmVudCB0aW1lc3RhbXBcclxuICAgICAgICAvLyAod2hpY2ggaXMgZXZhbHVhdGVkIEFGVEVSKSBpdCBtZWFucyB0aGUgZXZlbnQgaXMgdXNpbmcgYSBoaS1yZXMgdGltZXN0YW1wLFxyXG4gICAgICAgIC8vIGFuZCB3ZSBuZWVkIHRvIHVzZSB0aGUgaGktcmVzIHZlcnNpb24gZm9yIGV2ZW50IGxpc3RlbmVycyBhcyB3ZWxsLlxyXG4gICAgICAgIF9nZXROb3cgPSAoKSA9PiBwZXJmb3JtYW5jZS5ub3coKTtcclxuICAgIH1cclxuICAgIC8vICMzNDg1OiBGaXJlZm94IDw9IDUzIGhhcyBpbmNvcnJlY3QgRXZlbnQudGltZVN0YW1wIGltcGxlbWVudGF0aW9uXHJcbiAgICAvLyBhbmQgZG9lcyBub3QgZmlyZSBtaWNyb3Rhc2tzIGluIGJldHdlZW4gZXZlbnQgcHJvcGFnYXRpb24sIHNvIHNhZmUgdG8gZXhjbHVkZS5cclxuICAgIGNvbnN0IGZmTWF0Y2ggPSBuYXZpZ2F0b3IudXNlckFnZW50Lm1hdGNoKC9maXJlZm94XFwvKFxcZCspL2kpO1xyXG4gICAgc2tpcFRpbWVzdGFtcENoZWNrID0gISEoZmZNYXRjaCAmJiBOdW1iZXIoZmZNYXRjaFsxXSkgPD0gNTMpO1xyXG59XHJcbi8vIFRvIGF2b2lkIHRoZSBvdmVyaGVhZCBvZiByZXBlYXRlZGx5IGNhbGxpbmcgcGVyZm9ybWFuY2Uubm93KCksIHdlIGNhY2hlXHJcbi8vIGFuZCB1c2UgdGhlIHNhbWUgdGltZXN0YW1wIGZvciBhbGwgZXZlbnQgbGlzdGVuZXJzIGF0dGFjaGVkIGluIHRoZSBzYW1lIHRpY2suXHJcbmxldCBjYWNoZWROb3cgPSAwO1xyXG5jb25zdCBwID0gUHJvbWlzZS5yZXNvbHZlKCk7XHJcbmNvbnN0IHJlc2V0ID0gKCkgPT4ge1xyXG4gICAgY2FjaGVkTm93ID0gMDtcclxufTtcclxuY29uc3QgZ2V0Tm93ID0gKCkgPT4gY2FjaGVkTm93IHx8IChwLnRoZW4ocmVzZXQpLCAoY2FjaGVkTm93ID0gX2dldE5vdygpKSk7XHJcbmZ1bmN0aW9uIGFkZEV2ZW50TGlzdGVuZXIoZWwsIGV2ZW50LCBoYW5kbGVyLCBvcHRpb25zKSB7XHJcbiAgICBlbC5hZGRFdmVudExpc3RlbmVyKGV2ZW50LCBoYW5kbGVyLCBvcHRpb25zKTtcclxufVxyXG5mdW5jdGlvbiByZW1vdmVFdmVudExpc3RlbmVyKGVsLCBldmVudCwgaGFuZGxlciwgb3B0aW9ucykge1xyXG4gICAgZWwucmVtb3ZlRXZlbnRMaXN0ZW5lcihldmVudCwgaGFuZGxlciwgb3B0aW9ucyk7XHJcbn1cclxuZnVuY3Rpb24gcGF0Y2hFdmVudChlbCwgcmF3TmFtZSwgcHJldlZhbHVlLCBuZXh0VmFsdWUsIGluc3RhbmNlID0gbnVsbCkge1xyXG4gICAgLy8gdmVpID0gdnVlIGV2ZW50IGludm9rZXJzXHJcbiAgICBjb25zdCBpbnZva2VycyA9IGVsLl92ZWkgfHwgKGVsLl92ZWkgPSB7fSk7XHJcbiAgICBjb25zdCBleGlzdGluZ0ludm9rZXIgPSBpbnZva2Vyc1tyYXdOYW1lXTtcclxuICAgIGlmIChuZXh0VmFsdWUgJiYgZXhpc3RpbmdJbnZva2VyKSB7XHJcbiAgICAgICAgLy8gcGF0Y2hcclxuICAgICAgICBleGlzdGluZ0ludm9rZXIudmFsdWUgPSBuZXh0VmFsdWU7XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgICBjb25zdCBbbmFtZSwgb3B0aW9uc10gPSBwYXJzZU5hbWUocmF3TmFtZSk7XHJcbiAgICAgICAgaWYgKG5leHRWYWx1ZSkge1xyXG4gICAgICAgICAgICAvLyBhZGRcclxuICAgICAgICAgICAgY29uc3QgaW52b2tlciA9IChpbnZva2Vyc1tyYXdOYW1lXSA9IGNyZWF0ZUludm9rZXIobmV4dFZhbHVlLCBpbnN0YW5jZSkpO1xyXG4gICAgICAgICAgICBhZGRFdmVudExpc3RlbmVyKGVsLCBuYW1lLCBpbnZva2VyLCBvcHRpb25zKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoZXhpc3RpbmdJbnZva2VyKSB7XHJcbiAgICAgICAgICAgIC8vIHJlbW92ZVxyXG4gICAgICAgICAgICByZW1vdmVFdmVudExpc3RlbmVyKGVsLCBuYW1lLCBleGlzdGluZ0ludm9rZXIsIG9wdGlvbnMpO1xyXG4gICAgICAgICAgICBpbnZva2Vyc1tyYXdOYW1lXSA9IHVuZGVmaW5lZDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuY29uc3Qgb3B0aW9uc01vZGlmaWVyUkUgPSAvKD86T25jZXxQYXNzaXZlfENhcHR1cmUpJC87XHJcbmZ1bmN0aW9uIHBhcnNlTmFtZShuYW1lKSB7XHJcbiAgICBsZXQgb3B0aW9ucztcclxuICAgIGlmIChvcHRpb25zTW9kaWZpZXJSRS50ZXN0KG5hbWUpKSB7XHJcbiAgICAgICAgb3B0aW9ucyA9IHt9O1xyXG4gICAgICAgIGxldCBtO1xyXG4gICAgICAgIHdoaWxlICgobSA9IG5hbWUubWF0Y2gob3B0aW9uc01vZGlmaWVyUkUpKSkge1xyXG4gICAgICAgICAgICBuYW1lID0gbmFtZS5zbGljZSgwLCBuYW1lLmxlbmd0aCAtIG1bMF0ubGVuZ3RoKTtcclxuICAgICAgICAgICAgb3B0aW9uc1ttWzBdLnRvTG93ZXJDYXNlKCldID0gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gW2h5cGhlbmF0ZShuYW1lLnNsaWNlKDIpKSwgb3B0aW9uc107XHJcbn1cclxuZnVuY3Rpb24gY3JlYXRlSW52b2tlcihpbml0aWFsVmFsdWUsIGluc3RhbmNlKSB7XHJcbiAgICBjb25zdCBpbnZva2VyID0gKGUpID0+IHtcclxuICAgICAgICAvLyBhc3luYyBlZGdlIGNhc2UgIzY1NjY6IGlubmVyIGNsaWNrIGV2ZW50IHRyaWdnZXJzIHBhdGNoLCBldmVudCBoYW5kbGVyXHJcbiAgICAgICAgLy8gYXR0YWNoZWQgdG8gb3V0ZXIgZWxlbWVudCBkdXJpbmcgcGF0Y2gsIGFuZCB0cmlnZ2VyZWQgYWdhaW4uIFRoaXNcclxuICAgICAgICAvLyBoYXBwZW5zIGJlY2F1c2UgYnJvd3NlcnMgZmlyZSBtaWNyb3Rhc2sgdGlja3MgYmV0d2VlbiBldmVudCBwcm9wYWdhdGlvbi5cclxuICAgICAgICAvLyB0aGUgc29sdXRpb24gaXMgc2ltcGxlOiB3ZSBzYXZlIHRoZSB0aW1lc3RhbXAgd2hlbiBhIGhhbmRsZXIgaXMgYXR0YWNoZWQsXHJcbiAgICAgICAgLy8gYW5kIHRoZSBoYW5kbGVyIHdvdWxkIG9ubHkgZmlyZSBpZiB0aGUgZXZlbnQgcGFzc2VkIHRvIGl0IHdhcyBmaXJlZFxyXG4gICAgICAgIC8vIEFGVEVSIGl0IHdhcyBhdHRhY2hlZC5cclxuICAgICAgICBjb25zdCB0aW1lU3RhbXAgPSBlLnRpbWVTdGFtcCB8fCBfZ2V0Tm93KCk7XHJcbiAgICAgICAgaWYgKHNraXBUaW1lc3RhbXBDaGVjayB8fCB0aW1lU3RhbXAgPj0gaW52b2tlci5hdHRhY2hlZCAtIDEpIHtcclxuICAgICAgICAgICAgY2FsbFdpdGhBc3luY0Vycm9ySGFuZGxpbmcocGF0Y2hTdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oZSwgaW52b2tlci52YWx1ZSksIGluc3RhbmNlLCA1IC8qIE5BVElWRV9FVkVOVF9IQU5ETEVSICovLCBbZV0pO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBpbnZva2VyLnZhbHVlID0gaW5pdGlhbFZhbHVlO1xyXG4gICAgaW52b2tlci5hdHRhY2hlZCA9IGdldE5vdygpO1xyXG4gICAgcmV0dXJuIGludm9rZXI7XHJcbn1cclxuZnVuY3Rpb24gcGF0Y2hTdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oZSwgdmFsdWUpIHtcclxuICAgIGlmIChpc0FycmF5KHZhbHVlKSkge1xyXG4gICAgICAgIGNvbnN0IG9yaWdpbmFsU3RvcCA9IGUuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uO1xyXG4gICAgICAgIGUuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uID0gKCkgPT4ge1xyXG4gICAgICAgICAgICBvcmlnaW5hbFN0b3AuY2FsbChlKTtcclxuICAgICAgICAgICAgZS5fc3RvcHBlZCA9IHRydWU7XHJcbiAgICAgICAgfTtcclxuICAgICAgICByZXR1cm4gdmFsdWUubWFwKGZuID0+IChlKSA9PiAhZS5fc3RvcHBlZCAmJiBmbihlKSk7XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgICByZXR1cm4gdmFsdWU7XHJcbiAgICB9XHJcbn1cblxuY29uc3QgbmF0aXZlT25SRSA9IC9eb25bYS16XS87XHJcbmNvbnN0IHBhdGNoUHJvcCA9IChlbCwga2V5LCBwcmV2VmFsdWUsIG5leHRWYWx1ZSwgaXNTVkcgPSBmYWxzZSwgcHJldkNoaWxkcmVuLCBwYXJlbnRDb21wb25lbnQsIHBhcmVudFN1c3BlbnNlLCB1bm1vdW50Q2hpbGRyZW4pID0+IHtcclxuICAgIGlmIChrZXkgPT09ICdjbGFzcycpIHtcclxuICAgICAgICBwYXRjaENsYXNzKGVsLCBuZXh0VmFsdWUsIGlzU1ZHKTtcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKGtleSA9PT0gJ3N0eWxlJykge1xyXG4gICAgICAgIHBhdGNoU3R5bGUoZWwsIHByZXZWYWx1ZSwgbmV4dFZhbHVlKTtcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKGlzT24oa2V5KSkge1xyXG4gICAgICAgIC8vIGlnbm9yZSB2LW1vZGVsIGxpc3RlbmVyc1xyXG4gICAgICAgIGlmICghaXNNb2RlbExpc3RlbmVyKGtleSkpIHtcclxuICAgICAgICAgICAgcGF0Y2hFdmVudChlbCwga2V5LCBwcmV2VmFsdWUsIG5leHRWYWx1ZSwgcGFyZW50Q29tcG9uZW50KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmIChrZXlbMF0gPT09ICcuJ1xyXG4gICAgICAgID8gKChrZXkgPSBrZXkuc2xpY2UoMSkpLCB0cnVlKVxyXG4gICAgICAgIDoga2V5WzBdID09PSAnXidcclxuICAgICAgICAgICAgPyAoKGtleSA9IGtleS5zbGljZSgxKSksIGZhbHNlKVxyXG4gICAgICAgICAgICA6IHNob3VsZFNldEFzUHJvcChlbCwga2V5LCBuZXh0VmFsdWUsIGlzU1ZHKSkge1xyXG4gICAgICAgIHBhdGNoRE9NUHJvcChlbCwga2V5LCBuZXh0VmFsdWUsIHByZXZDaGlsZHJlbiwgcGFyZW50Q29tcG9uZW50LCBwYXJlbnRTdXNwZW5zZSwgdW5tb3VudENoaWxkcmVuKTtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICAgIC8vIHNwZWNpYWwgY2FzZSBmb3IgPGlucHV0IHYtbW9kZWwgdHlwZT1cImNoZWNrYm94XCI+IHdpdGhcclxuICAgICAgICAvLyA6dHJ1ZS12YWx1ZSAmIDpmYWxzZS12YWx1ZVxyXG4gICAgICAgIC8vIHN0b3JlIHZhbHVlIGFzIGRvbSBwcm9wZXJ0aWVzIHNpbmNlIG5vbi1zdHJpbmcgdmFsdWVzIHdpbGwgYmVcclxuICAgICAgICAvLyBzdHJpbmdpZmllZC5cclxuICAgICAgICBpZiAoa2V5ID09PSAndHJ1ZS12YWx1ZScpIHtcclxuICAgICAgICAgICAgZWwuX3RydWVWYWx1ZSA9IG5leHRWYWx1ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoa2V5ID09PSAnZmFsc2UtdmFsdWUnKSB7XHJcbiAgICAgICAgICAgIGVsLl9mYWxzZVZhbHVlID0gbmV4dFZhbHVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBwYXRjaEF0dHIoZWwsIGtleSwgbmV4dFZhbHVlLCBpc1NWRyk7XHJcbiAgICB9XHJcbn07XHJcbmZ1bmN0aW9uIHNob3VsZFNldEFzUHJvcChlbCwga2V5LCB2YWx1ZSwgaXNTVkcpIHtcclxuICAgIGlmIChpc1NWRykge1xyXG4gICAgICAgIC8vIG1vc3Qga2V5cyBtdXN0IGJlIHNldCBhcyBhdHRyaWJ1dGUgb24gc3ZnIGVsZW1lbnRzIHRvIHdvcmtcclxuICAgICAgICAvLyAuLi5leGNlcHQgaW5uZXJIVE1MICYgdGV4dENvbnRlbnRcclxuICAgICAgICBpZiAoa2V5ID09PSAnaW5uZXJIVE1MJyB8fCBrZXkgPT09ICd0ZXh0Q29udGVudCcpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIG9yIG5hdGl2ZSBvbmNsaWNrIHdpdGggZnVuY3Rpb24gdmFsdWVzXHJcbiAgICAgICAgaWYgKGtleSBpbiBlbCAmJiBuYXRpdmVPblJFLnRlc3Qoa2V5KSAmJiBpc0Z1bmN0aW9uKHZhbHVlKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG4gICAgLy8gc3BlbGxjaGVjayBhbmQgZHJhZ2dhYmxlIGFyZSBudW1lcmF0ZWQgYXR0cnMsIGhvd2V2ZXIgdGhlaXJcclxuICAgIC8vIGNvcnJlc3BvbmRpbmcgRE9NIHByb3BlcnRpZXMgYXJlIGFjdHVhbGx5IGJvb2xlYW5zIC0gdGhpcyBsZWFkcyB0b1xyXG4gICAgLy8gc2V0dGluZyBpdCB3aXRoIGEgc3RyaW5nIFwiZmFsc2VcIiB2YWx1ZSBsZWFkaW5nIGl0IHRvIGJlIGNvZXJjZWQgdG9cclxuICAgIC8vIGB0cnVlYCwgc28gd2UgbmVlZCB0byBhbHdheXMgdHJlYXQgdGhlbSBhcyBhdHRyaWJ1dGVzLlxyXG4gICAgLy8gTm90ZSB0aGF0IGBjb250ZW50RWRpdGFibGVgIGRvZXNuJ3QgaGF2ZSB0aGlzIHByb2JsZW06IGl0cyBET01cclxuICAgIC8vIHByb3BlcnR5IGlzIGFsc28gZW51bWVyYXRlZCBzdHJpbmcgdmFsdWVzLlxyXG4gICAgaWYgKGtleSA9PT0gJ3NwZWxsY2hlY2snIHx8IGtleSA9PT0gJ2RyYWdnYWJsZScpIHtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbiAgICAvLyAjMTc4NywgIzI4NDAgZm9ybSBwcm9wZXJ0eSBvbiBmb3JtIGVsZW1lbnRzIGlzIHJlYWRvbmx5IGFuZCBtdXN0IGJlIHNldCBhc1xyXG4gICAgLy8gYXR0cmlidXRlLlxyXG4gICAgaWYgKGtleSA9PT0gJ2Zvcm0nKSB7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG4gICAgLy8gIzE1MjYgPGlucHV0IGxpc3Q+IG11c3QgYmUgc2V0IGFzIGF0dHJpYnV0ZVxyXG4gICAgaWYgKGtleSA9PT0gJ2xpc3QnICYmIGVsLnRhZ05hbWUgPT09ICdJTlBVVCcpIHtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbiAgICAvLyAjMjc2NiA8dGV4dGFyZWEgdHlwZT4gbXVzdCBiZSBzZXQgYXMgYXR0cmlidXRlXHJcbiAgICBpZiAoa2V5ID09PSAndHlwZScgJiYgZWwudGFnTmFtZSA9PT0gJ1RFWFRBUkVBJykge1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuICAgIC8vIG5hdGl2ZSBvbmNsaWNrIHdpdGggc3RyaW5nIHZhbHVlLCBtdXN0IGJlIHNldCBhcyBhdHRyaWJ1dGVcclxuICAgIGlmIChuYXRpdmVPblJFLnRlc3Qoa2V5KSAmJiBpc1N0cmluZyh2YWx1ZSkpIHtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbiAgICByZXR1cm4ga2V5IGluIGVsO1xyXG59XG5cbmZ1bmN0aW9uIGRlZmluZUN1c3RvbUVsZW1lbnQob3B0aW9ucywgaHlkYXRlKSB7XHJcbiAgICBjb25zdCBDb21wID0gZGVmaW5lQ29tcG9uZW50KG9wdGlvbnMpO1xyXG4gICAgY2xhc3MgVnVlQ3VzdG9tRWxlbWVudCBleHRlbmRzIFZ1ZUVsZW1lbnQge1xyXG4gICAgICAgIGNvbnN0cnVjdG9yKGluaXRpYWxQcm9wcykge1xyXG4gICAgICAgICAgICBzdXBlcihDb21wLCBpbml0aWFsUHJvcHMsIGh5ZGF0ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgVnVlQ3VzdG9tRWxlbWVudC5kZWYgPSBDb21wO1xyXG4gICAgcmV0dXJuIFZ1ZUN1c3RvbUVsZW1lbnQ7XHJcbn1cclxuY29uc3QgZGVmaW5lU1NSQ3VzdG9tRWxlbWVudCA9ICgob3B0aW9ucykgPT4ge1xyXG4gICAgLy8gQHRzLWlnbm9yZVxyXG4gICAgcmV0dXJuIGRlZmluZUN1c3RvbUVsZW1lbnQob3B0aW9ucywgaHlkcmF0ZSk7XHJcbn0pO1xyXG5jb25zdCBCYXNlQ2xhc3MgPSAodHlwZW9mIEhUTUxFbGVtZW50ICE9PSAndW5kZWZpbmVkJyA/IEhUTUxFbGVtZW50IDogY2xhc3Mge1xyXG59KTtcclxuY2xhc3MgVnVlRWxlbWVudCBleHRlbmRzIEJhc2VDbGFzcyB7XHJcbiAgICBjb25zdHJ1Y3RvcihfZGVmLCBfcHJvcHMgPSB7fSwgaHlkcmF0ZSkge1xyXG4gICAgICAgIHN1cGVyKCk7XHJcbiAgICAgICAgdGhpcy5fZGVmID0gX2RlZjtcclxuICAgICAgICB0aGlzLl9wcm9wcyA9IF9wcm9wcztcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBAaW50ZXJuYWxcclxuICAgICAgICAgKi9cclxuICAgICAgICB0aGlzLl9pbnN0YW5jZSA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5fY29ubmVjdGVkID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5fcmVzb2x2ZWQgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLl9udW1iZXJQcm9wcyA9IG51bGw7XHJcbiAgICAgICAgaWYgKHRoaXMuc2hhZG93Um9vdCAmJiBoeWRyYXRlKSB7XHJcbiAgICAgICAgICAgIGh5ZHJhdGUodGhpcy5fY3JlYXRlVk5vZGUoKSwgdGhpcy5zaGFkb3dSb290KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgJiYgdGhpcy5zaGFkb3dSb290KSB7XHJcbiAgICAgICAgICAgICAgICB3YXJuKGBDdXN0b20gZWxlbWVudCBoYXMgcHJlLXJlbmRlcmVkIGRlY2xhcmF0aXZlIHNoYWRvdyByb290IGJ1dCBpcyBub3QgYCArXHJcbiAgICAgICAgICAgICAgICAgICAgYGRlZmluZWQgYXMgaHlkcmF0YWJsZS4gVXNlIFxcYGRlZmluZVNTUkN1c3RvbUVsZW1lbnRcXGAuYCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5hdHRhY2hTaGFkb3coeyBtb2RlOiAnb3BlbicgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgY29ubmVjdGVkQ2FsbGJhY2soKSB7XHJcbiAgICAgICAgdGhpcy5fY29ubmVjdGVkID0gdHJ1ZTtcclxuICAgICAgICBpZiAoIXRoaXMuX2luc3RhbmNlKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX3Jlc29sdmVEZWYoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBkaXNjb25uZWN0ZWRDYWxsYmFjaygpIHtcclxuICAgICAgICB0aGlzLl9jb25uZWN0ZWQgPSBmYWxzZTtcclxuICAgICAgICBuZXh0VGljaygoKSA9PiB7XHJcbiAgICAgICAgICAgIGlmICghdGhpcy5fY29ubmVjdGVkKSB7XHJcbiAgICAgICAgICAgICAgICByZW5kZXIobnVsbCwgdGhpcy5zaGFkb3dSb290KTtcclxuICAgICAgICAgICAgICAgIHRoaXMuX2luc3RhbmNlID0gbnVsbDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiByZXNvbHZlIGlubmVyIGNvbXBvbmVudCBkZWZpbml0aW9uIChoYW5kbGUgcG9zc2libGUgYXN5bmMgY29tcG9uZW50KVxyXG4gICAgICovXHJcbiAgICBfcmVzb2x2ZURlZigpIHtcclxuICAgICAgICBpZiAodGhpcy5fcmVzb2x2ZWQpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLl9yZXNvbHZlZCA9IHRydWU7XHJcbiAgICAgICAgLy8gc2V0IGluaXRpYWwgYXR0cnNcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuYXR0cmlidXRlcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICB0aGlzLl9zZXRBdHRyKHRoaXMuYXR0cmlidXRlc1tpXS5uYW1lKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gd2F0Y2ggZnV0dXJlIGF0dHIgY2hhbmdlc1xyXG4gICAgICAgIG5ldyBNdXRhdGlvbk9ic2VydmVyKG11dGF0aW9ucyA9PiB7XHJcbiAgICAgICAgICAgIGZvciAoY29uc3QgbSBvZiBtdXRhdGlvbnMpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX3NldEF0dHIobS5hdHRyaWJ1dGVOYW1lKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pLm9ic2VydmUodGhpcywgeyBhdHRyaWJ1dGVzOiB0cnVlIH0pO1xyXG4gICAgICAgIGNvbnN0IHJlc29sdmUgPSAoZGVmKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IHsgcHJvcHMsIHN0eWxlcyB9ID0gZGVmO1xyXG4gICAgICAgICAgICBjb25zdCBoYXNPcHRpb25zID0gIWlzQXJyYXkocHJvcHMpO1xyXG4gICAgICAgICAgICBjb25zdCByYXdLZXlzID0gcHJvcHMgPyAoaGFzT3B0aW9ucyA/IE9iamVjdC5rZXlzKHByb3BzKSA6IHByb3BzKSA6IFtdO1xyXG4gICAgICAgICAgICAvLyBjYXN0IE51bWJlci10eXBlIHByb3BzIHNldCBiZWZvcmUgcmVzb2x2ZVxyXG4gICAgICAgICAgICBsZXQgbnVtYmVyUHJvcHM7XHJcbiAgICAgICAgICAgIGlmIChoYXNPcHRpb25zKSB7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGtleSBpbiB0aGlzLl9wcm9wcykge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG9wdCA9IHByb3BzW2tleV07XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wdCA9PT0gTnVtYmVyIHx8IChvcHQgJiYgb3B0LnR5cGUgPT09IE51bWJlcikpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fcHJvcHNba2V5XSA9IHRvTnVtYmVyKHRoaXMuX3Byb3BzW2tleV0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAobnVtYmVyUHJvcHMgfHwgKG51bWJlclByb3BzID0gT2JqZWN0LmNyZWF0ZShudWxsKSkpW2tleV0gPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLl9udW1iZXJQcm9wcyA9IG51bWJlclByb3BzO1xyXG4gICAgICAgICAgICAvLyBjaGVjayBpZiB0aGVyZSBhcmUgcHJvcHMgc2V0IHByZS11cGdyYWRlIG9yIGNvbm5lY3RcclxuICAgICAgICAgICAgZm9yIChjb25zdCBrZXkgb2YgT2JqZWN0LmtleXModGhpcykpIHtcclxuICAgICAgICAgICAgICAgIGlmIChrZXlbMF0gIT09ICdfJykge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX3NldFByb3Aoa2V5LCB0aGlzW2tleV0sIHRydWUsIGZhbHNlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyBkZWZpbmluZyBnZXR0ZXIvc2V0dGVycyBvbiBwcm90b3R5cGVcclxuICAgICAgICAgICAgZm9yIChjb25zdCBrZXkgb2YgcmF3S2V5cy5tYXAoY2FtZWxpemUkMSkpIHtcclxuICAgICAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBrZXksIHtcclxuICAgICAgICAgICAgICAgICAgICBnZXQoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9nZXRQcm9wKGtleSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICBzZXQodmFsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX3NldFByb3Aoa2V5LCB2YWwpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vIGFwcGx5IENTU1xyXG4gICAgICAgICAgICB0aGlzLl9hcHBseVN0eWxlcyhzdHlsZXMpO1xyXG4gICAgICAgICAgICAvLyBpbml0aWFsIHJlbmRlclxyXG4gICAgICAgICAgICB0aGlzLl91cGRhdGUoKTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIGNvbnN0IGFzeW5jRGVmID0gdGhpcy5fZGVmLl9fYXN5bmNMb2FkZXI7XHJcbiAgICAgICAgaWYgKGFzeW5jRGVmKSB7XHJcbiAgICAgICAgICAgIGFzeW5jRGVmKCkudGhlbihyZXNvbHZlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHJlc29sdmUodGhpcy5fZGVmKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBfc2V0QXR0cihrZXkpIHtcclxuICAgICAgICBsZXQgdmFsdWUgPSB0aGlzLmdldEF0dHJpYnV0ZShrZXkpO1xyXG4gICAgICAgIGlmICh0aGlzLl9udW1iZXJQcm9wcyAmJiB0aGlzLl9udW1iZXJQcm9wc1trZXldKSB7XHJcbiAgICAgICAgICAgIHZhbHVlID0gdG9OdW1iZXIodmFsdWUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLl9zZXRQcm9wKGNhbWVsaXplJDEoa2V5KSwgdmFsdWUsIGZhbHNlKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogQGludGVybmFsXHJcbiAgICAgKi9cclxuICAgIF9nZXRQcm9wKGtleSkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9wcm9wc1trZXldO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBAaW50ZXJuYWxcclxuICAgICAqL1xyXG4gICAgX3NldFByb3Aoa2V5LCB2YWwsIHNob3VsZFJlZmxlY3QgPSB0cnVlLCBzaG91bGRVcGRhdGUgPSB0cnVlKSB7XHJcbiAgICAgICAgaWYgKHZhbCAhPT0gdGhpcy5fcHJvcHNba2V5XSkge1xyXG4gICAgICAgICAgICB0aGlzLl9wcm9wc1trZXldID0gdmFsO1xyXG4gICAgICAgICAgICBpZiAoc2hvdWxkVXBkYXRlICYmIHRoaXMuX2luc3RhbmNlKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl91cGRhdGUoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyByZWZsZWN0XHJcbiAgICAgICAgICAgIGlmIChzaG91bGRSZWZsZWN0KSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodmFsID09PSB0cnVlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRBdHRyaWJ1dGUoaHlwaGVuYXRlKGtleSksICcnKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKHR5cGVvZiB2YWwgPT09ICdzdHJpbmcnIHx8IHR5cGVvZiB2YWwgPT09ICdudW1iZXInKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRBdHRyaWJ1dGUoaHlwaGVuYXRlKGtleSksIHZhbCArICcnKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKCF2YWwpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbW92ZUF0dHJpYnV0ZShoeXBoZW5hdGUoa2V5KSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBfdXBkYXRlKCkge1xyXG4gICAgICAgIHJlbmRlcih0aGlzLl9jcmVhdGVWTm9kZSgpLCB0aGlzLnNoYWRvd1Jvb3QpO1xyXG4gICAgfVxyXG4gICAgX2NyZWF0ZVZOb2RlKCkge1xyXG4gICAgICAgIGNvbnN0IHZub2RlID0gY3JlYXRlVk5vZGUodGhpcy5fZGVmLCBleHRlbmQoe30sIHRoaXMuX3Byb3BzKSk7XHJcbiAgICAgICAgaWYgKCF0aGlzLl9pbnN0YW5jZSkge1xyXG4gICAgICAgICAgICB2bm9kZS5jZSA9IGluc3RhbmNlID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX2luc3RhbmNlID0gaW5zdGFuY2U7XHJcbiAgICAgICAgICAgICAgICBpbnN0YW5jZS5pc0NFID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIC8vIEhNUlxyXG4gICAgICAgICAgICAgICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGluc3RhbmNlLmNlUmVsb2FkID0gbmV3U3R5bGVzID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gYWx3YXlzIHJlc2V0IHN0eWxlc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5fc3R5bGVzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9zdHlsZXMuZm9yRWFjaChzID0+IHRoaXMuc2hhZG93Um9vdC5yZW1vdmVDaGlsZChzKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9zdHlsZXMubGVuZ3RoID0gMDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9hcHBseVN0eWxlcyhuZXdTdHlsZXMpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBpZiB0aGlzIGlzIGFuIGFzeW5jIGNvbXBvbmVudCwgY2VSZWxvYWQgaXMgY2FsbGVkIGZyb20gdGhlIGlubmVyXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNvbXBvbmVudCBzbyBubyBuZWVkIHRvIHJlbG9hZCB0aGUgYXN5bmMgd3JhcHBlclxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXRoaXMuX2RlZi5fX2FzeW5jTG9hZGVyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyByZWxvYWRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX2luc3RhbmNlID0gbnVsbDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX3VwZGF0ZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIC8vIGludGVyY2VwdCBlbWl0XHJcbiAgICAgICAgICAgICAgICBpbnN0YW5jZS5lbWl0ID0gKGV2ZW50LCAuLi5hcmdzKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KG5ldyBDdXN0b21FdmVudChldmVudCwge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkZXRhaWw6IGFyZ3NcclxuICAgICAgICAgICAgICAgICAgICB9KSk7XHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgLy8gbG9jYXRlIG5lYXJlc3QgVnVlIGN1c3RvbSBlbGVtZW50IHBhcmVudCBmb3IgcHJvdmlkZS9pbmplY3RcclxuICAgICAgICAgICAgICAgIGxldCBwYXJlbnQgPSB0aGlzO1xyXG4gICAgICAgICAgICAgICAgd2hpbGUgKChwYXJlbnQgPVxyXG4gICAgICAgICAgICAgICAgICAgIHBhcmVudCAmJiAocGFyZW50LnBhcmVudE5vZGUgfHwgcGFyZW50Lmhvc3QpKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChwYXJlbnQgaW5zdGFuY2VvZiBWdWVFbGVtZW50KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGluc3RhbmNlLnBhcmVudCA9IHBhcmVudC5faW5zdGFuY2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHZub2RlO1xyXG4gICAgfVxyXG4gICAgX2FwcGx5U3R5bGVzKHN0eWxlcykge1xyXG4gICAgICAgIGlmIChzdHlsZXMpIHtcclxuICAgICAgICAgICAgc3R5bGVzLmZvckVhY2goY3NzID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzdHlsZScpO1xyXG4gICAgICAgICAgICAgICAgcy50ZXh0Q29udGVudCA9IGNzcztcclxuICAgICAgICAgICAgICAgIHRoaXMuc2hhZG93Um9vdC5hcHBlbmRDaGlsZChzKTtcclxuICAgICAgICAgICAgICAgIC8vIHJlY29yZCBmb3IgSE1SXHJcbiAgICAgICAgICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgKHRoaXMuX3N0eWxlcyB8fCAodGhpcy5fc3R5bGVzID0gW10pKS5wdXNoKHMpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cblxuZnVuY3Rpb24gdXNlQ3NzTW9kdWxlKG5hbWUgPSAnJHN0eWxlJykge1xyXG4gICAgLyogaXN0YW5idWwgaWdub3JlIGVsc2UgKi9cclxuICAgIHtcclxuICAgICAgICBjb25zdCBpbnN0YW5jZSA9IGdldEN1cnJlbnRJbnN0YW5jZSgpO1xyXG4gICAgICAgIGlmICghaW5zdGFuY2UpIHtcclxuICAgICAgICAgICAgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmIHdhcm4oYHVzZUNzc01vZHVsZSBtdXN0IGJlIGNhbGxlZCBpbnNpZGUgc2V0dXAoKWApO1xyXG4gICAgICAgICAgICByZXR1cm4gRU1QVFlfT0JKO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCBtb2R1bGVzID0gaW5zdGFuY2UudHlwZS5fX2Nzc01vZHVsZXM7XHJcbiAgICAgICAgaWYgKCFtb2R1bGVzKSB7XHJcbiAgICAgICAgICAgIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSAmJiB3YXJuKGBDdXJyZW50IGluc3RhbmNlIGRvZXMgbm90IGhhdmUgQ1NTIG1vZHVsZXMgaW5qZWN0ZWQuYCk7XHJcbiAgICAgICAgICAgIHJldHVybiBFTVBUWV9PQko7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IG1vZCA9IG1vZHVsZXNbbmFtZV07XHJcbiAgICAgICAgaWYgKCFtb2QpIHtcclxuICAgICAgICAgICAgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmXHJcbiAgICAgICAgICAgICAgICB3YXJuKGBDdXJyZW50IGluc3RhbmNlIGRvZXMgbm90IGhhdmUgQ1NTIG1vZHVsZSBuYW1lZCBcIiR7bmFtZX1cIi5gKTtcclxuICAgICAgICAgICAgcmV0dXJuIEVNUFRZX09CSjtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG1vZDtcclxuICAgIH1cclxufVxuXG4vKipcclxuICogUnVudGltZSBoZWxwZXIgZm9yIFNGQydzIENTUyB2YXJpYWJsZSBpbmplY3Rpb24gZmVhdHVyZS5cclxuICogQHByaXZhdGVcclxuICovXHJcbmZ1bmN0aW9uIHVzZUNzc1ZhcnMoZ2V0dGVyKSB7XHJcbiAgICBjb25zdCBpbnN0YW5jZSA9IGdldEN1cnJlbnRJbnN0YW5jZSgpO1xyXG4gICAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cclxuICAgIGlmICghaW5zdGFuY2UpIHtcclxuICAgICAgICAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgJiZcclxuICAgICAgICAgICAgd2FybihgdXNlQ3NzVmFycyBpcyBjYWxsZWQgd2l0aG91dCBjdXJyZW50IGFjdGl2ZSBjb21wb25lbnQgaW5zdGFuY2UuYCk7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgY29uc3Qgc2V0VmFycyA9ICgpID0+IHNldFZhcnNPblZOb2RlKGluc3RhbmNlLnN1YlRyZWUsIGdldHRlcihpbnN0YW5jZS5wcm94eSkpO1xyXG4gICAgd2F0Y2hQb3N0RWZmZWN0KHNldFZhcnMpO1xyXG4gICAgb25Nb3VudGVkKCgpID0+IHtcclxuICAgICAgICBjb25zdCBvYiA9IG5ldyBNdXRhdGlvbk9ic2VydmVyKHNldFZhcnMpO1xyXG4gICAgICAgIG9iLm9ic2VydmUoaW5zdGFuY2Uuc3ViVHJlZS5lbC5wYXJlbnROb2RlLCB7IGNoaWxkTGlzdDogdHJ1ZSB9KTtcclxuICAgICAgICBvblVubW91bnRlZCgoKSA9PiBvYi5kaXNjb25uZWN0KCkpO1xyXG4gICAgfSk7XHJcbn1cclxuZnVuY3Rpb24gc2V0VmFyc09uVk5vZGUodm5vZGUsIHZhcnMpIHtcclxuICAgIGlmICh2bm9kZS5zaGFwZUZsYWcgJiAxMjggLyogU1VTUEVOU0UgKi8pIHtcclxuICAgICAgICBjb25zdCBzdXNwZW5zZSA9IHZub2RlLnN1c3BlbnNlO1xyXG4gICAgICAgIHZub2RlID0gc3VzcGVuc2UuYWN0aXZlQnJhbmNoO1xyXG4gICAgICAgIGlmIChzdXNwZW5zZS5wZW5kaW5nQnJhbmNoICYmICFzdXNwZW5zZS5pc0h5ZHJhdGluZykge1xyXG4gICAgICAgICAgICBzdXNwZW5zZS5lZmZlY3RzLnB1c2goKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgc2V0VmFyc09uVk5vZGUoc3VzcGVuc2UuYWN0aXZlQnJhbmNoLCB2YXJzKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgLy8gZHJpbGwgZG93biBIT0NzIHVudGlsIGl0J3MgYSBub24tY29tcG9uZW50IHZub2RlXHJcbiAgICB3aGlsZSAodm5vZGUuY29tcG9uZW50KSB7XHJcbiAgICAgICAgdm5vZGUgPSB2bm9kZS5jb21wb25lbnQuc3ViVHJlZTtcclxuICAgIH1cclxuICAgIGlmICh2bm9kZS5zaGFwZUZsYWcgJiAxIC8qIEVMRU1FTlQgKi8gJiYgdm5vZGUuZWwpIHtcclxuICAgICAgICBzZXRWYXJzT25Ob2RlKHZub2RlLmVsLCB2YXJzKTtcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKHZub2RlLnR5cGUgPT09IEZyYWdtZW50KSB7XHJcbiAgICAgICAgdm5vZGUuY2hpbGRyZW4uZm9yRWFjaChjID0+IHNldFZhcnNPblZOb2RlKGMsIHZhcnMpKTtcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKHZub2RlLnR5cGUgPT09IFN0YXRpYykge1xyXG4gICAgICAgIGxldCB7IGVsLCBhbmNob3IgfSA9IHZub2RlO1xyXG4gICAgICAgIHdoaWxlIChlbCkge1xyXG4gICAgICAgICAgICBzZXRWYXJzT25Ob2RlKGVsLCB2YXJzKTtcclxuICAgICAgICAgICAgaWYgKGVsID09PSBhbmNob3IpXHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgZWwgPSBlbC5uZXh0U2libGluZztcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuZnVuY3Rpb24gc2V0VmFyc09uTm9kZShlbCwgdmFycykge1xyXG4gICAgaWYgKGVsLm5vZGVUeXBlID09PSAxKSB7XHJcbiAgICAgICAgY29uc3Qgc3R5bGUgPSBlbC5zdHlsZTtcclxuICAgICAgICBmb3IgKGNvbnN0IGtleSBpbiB2YXJzKSB7XHJcbiAgICAgICAgICAgIHN0eWxlLnNldFByb3BlcnR5KGAtLSR7a2V5fWAsIHZhcnNba2V5XSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XG5cbmNvbnN0IFRSQU5TSVRJT04gPSAndHJhbnNpdGlvbic7XHJcbmNvbnN0IEFOSU1BVElPTiA9ICdhbmltYXRpb24nO1xyXG4vLyBET00gVHJhbnNpdGlvbiBpcyBhIGhpZ2hlci1vcmRlci1jb21wb25lbnQgYmFzZWQgb24gdGhlIHBsYXRmb3JtLWFnbm9zdGljXHJcbi8vIGJhc2UgVHJhbnNpdGlvbiBjb21wb25lbnQsIHdpdGggRE9NLXNwZWNpZmljIGxvZ2ljLlxyXG5jb25zdCBUcmFuc2l0aW9uID0gKHByb3BzLCB7IHNsb3RzIH0pID0+IGgoQmFzZVRyYW5zaXRpb24sIHJlc29sdmVUcmFuc2l0aW9uUHJvcHMocHJvcHMpLCBzbG90cyk7XHJcblRyYW5zaXRpb24uZGlzcGxheU5hbWUgPSAnVHJhbnNpdGlvbic7XHJcbmNvbnN0IERPTVRyYW5zaXRpb25Qcm9wc1ZhbGlkYXRvcnMgPSB7XHJcbiAgICBuYW1lOiBTdHJpbmcsXHJcbiAgICB0eXBlOiBTdHJpbmcsXHJcbiAgICBjc3M6IHtcclxuICAgICAgICB0eXBlOiBCb29sZWFuLFxyXG4gICAgICAgIGRlZmF1bHQ6IHRydWVcclxuICAgIH0sXHJcbiAgICBkdXJhdGlvbjogW1N0cmluZywgTnVtYmVyLCBPYmplY3RdLFxyXG4gICAgZW50ZXJGcm9tQ2xhc3M6IFN0cmluZyxcclxuICAgIGVudGVyQWN0aXZlQ2xhc3M6IFN0cmluZyxcclxuICAgIGVudGVyVG9DbGFzczogU3RyaW5nLFxyXG4gICAgYXBwZWFyRnJvbUNsYXNzOiBTdHJpbmcsXHJcbiAgICBhcHBlYXJBY3RpdmVDbGFzczogU3RyaW5nLFxyXG4gICAgYXBwZWFyVG9DbGFzczogU3RyaW5nLFxyXG4gICAgbGVhdmVGcm9tQ2xhc3M6IFN0cmluZyxcclxuICAgIGxlYXZlQWN0aXZlQ2xhc3M6IFN0cmluZyxcclxuICAgIGxlYXZlVG9DbGFzczogU3RyaW5nXHJcbn07XHJcbmNvbnN0IFRyYW5zaXRpb25Qcm9wc1ZhbGlkYXRvcnMgPSAoVHJhbnNpdGlvbi5wcm9wcyA9XHJcbiAgICAvKiNfX1BVUkVfXyovIGV4dGVuZCh7fSwgQmFzZVRyYW5zaXRpb24ucHJvcHMsIERPTVRyYW5zaXRpb25Qcm9wc1ZhbGlkYXRvcnMpKTtcclxuLyoqXHJcbiAqICMzMjI3IEluY29taW5nIGhvb2tzIG1heSBiZSBtZXJnZWQgaW50byBhcnJheXMgd2hlbiB3cmFwcGluZyBUcmFuc2l0aW9uXHJcbiAqIHdpdGggY3VzdG9tIEhPQ3MuXHJcbiAqL1xyXG5jb25zdCBjYWxsSG9vayA9IChob29rLCBhcmdzID0gW10pID0+IHtcclxuICAgIGlmIChpc0FycmF5KGhvb2spKSB7XHJcbiAgICAgICAgaG9vay5mb3JFYWNoKGggPT4gaCguLi5hcmdzKSk7XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmIChob29rKSB7XHJcbiAgICAgICAgaG9vayguLi5hcmdzKTtcclxuICAgIH1cclxufTtcclxuLyoqXHJcbiAqIENoZWNrIGlmIGEgaG9vayBleHBlY3RzIGEgY2FsbGJhY2sgKDJuZCBhcmcpLCB3aGljaCBtZWFucyB0aGUgdXNlclxyXG4gKiBpbnRlbmRzIHRvIGV4cGxpY2l0bHkgY29udHJvbCB0aGUgZW5kIG9mIHRoZSB0cmFuc2l0aW9uLlxyXG4gKi9cclxuY29uc3QgaGFzRXhwbGljaXRDYWxsYmFjayA9IChob29rKSA9PiB7XHJcbiAgICByZXR1cm4gaG9va1xyXG4gICAgICAgID8gaXNBcnJheShob29rKVxyXG4gICAgICAgICAgICA/IGhvb2suc29tZShoID0+IGgubGVuZ3RoID4gMSlcclxuICAgICAgICAgICAgOiBob29rLmxlbmd0aCA+IDFcclxuICAgICAgICA6IGZhbHNlO1xyXG59O1xyXG5mdW5jdGlvbiByZXNvbHZlVHJhbnNpdGlvblByb3BzKHJhd1Byb3BzKSB7XHJcbiAgICBjb25zdCBiYXNlUHJvcHMgPSB7fTtcclxuICAgIGZvciAoY29uc3Qga2V5IGluIHJhd1Byb3BzKSB7XHJcbiAgICAgICAgaWYgKCEoa2V5IGluIERPTVRyYW5zaXRpb25Qcm9wc1ZhbGlkYXRvcnMpKSB7XHJcbiAgICAgICAgICAgIGJhc2VQcm9wc1trZXldID0gcmF3UHJvcHNba2V5XTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBpZiAocmF3UHJvcHMuY3NzID09PSBmYWxzZSkge1xyXG4gICAgICAgIHJldHVybiBiYXNlUHJvcHM7XHJcbiAgICB9XHJcbiAgICBjb25zdCB7IG5hbWUgPSAndicsIHR5cGUsIGR1cmF0aW9uLCBlbnRlckZyb21DbGFzcyA9IGAke25hbWV9LWVudGVyLWZyb21gLCBlbnRlckFjdGl2ZUNsYXNzID0gYCR7bmFtZX0tZW50ZXItYWN0aXZlYCwgZW50ZXJUb0NsYXNzID0gYCR7bmFtZX0tZW50ZXItdG9gLCBhcHBlYXJGcm9tQ2xhc3MgPSBlbnRlckZyb21DbGFzcywgYXBwZWFyQWN0aXZlQ2xhc3MgPSBlbnRlckFjdGl2ZUNsYXNzLCBhcHBlYXJUb0NsYXNzID0gZW50ZXJUb0NsYXNzLCBsZWF2ZUZyb21DbGFzcyA9IGAke25hbWV9LWxlYXZlLWZyb21gLCBsZWF2ZUFjdGl2ZUNsYXNzID0gYCR7bmFtZX0tbGVhdmUtYWN0aXZlYCwgbGVhdmVUb0NsYXNzID0gYCR7bmFtZX0tbGVhdmUtdG9gIH0gPSByYXdQcm9wcztcclxuICAgIGNvbnN0IGR1cmF0aW9ucyA9IG5vcm1hbGl6ZUR1cmF0aW9uKGR1cmF0aW9uKTtcclxuICAgIGNvbnN0IGVudGVyRHVyYXRpb24gPSBkdXJhdGlvbnMgJiYgZHVyYXRpb25zWzBdO1xyXG4gICAgY29uc3QgbGVhdmVEdXJhdGlvbiA9IGR1cmF0aW9ucyAmJiBkdXJhdGlvbnNbMV07XHJcbiAgICBjb25zdCB7IG9uQmVmb3JlRW50ZXIsIG9uRW50ZXIsIG9uRW50ZXJDYW5jZWxsZWQsIG9uTGVhdmUsIG9uTGVhdmVDYW5jZWxsZWQsIG9uQmVmb3JlQXBwZWFyID0gb25CZWZvcmVFbnRlciwgb25BcHBlYXIgPSBvbkVudGVyLCBvbkFwcGVhckNhbmNlbGxlZCA9IG9uRW50ZXJDYW5jZWxsZWQgfSA9IGJhc2VQcm9wcztcclxuICAgIGNvbnN0IGZpbmlzaEVudGVyID0gKGVsLCBpc0FwcGVhciwgZG9uZSkgPT4ge1xyXG4gICAgICAgIHJlbW92ZVRyYW5zaXRpb25DbGFzcyhlbCwgaXNBcHBlYXIgPyBhcHBlYXJUb0NsYXNzIDogZW50ZXJUb0NsYXNzKTtcclxuICAgICAgICByZW1vdmVUcmFuc2l0aW9uQ2xhc3MoZWwsIGlzQXBwZWFyID8gYXBwZWFyQWN0aXZlQ2xhc3MgOiBlbnRlckFjdGl2ZUNsYXNzKTtcclxuICAgICAgICBkb25lICYmIGRvbmUoKTtcclxuICAgIH07XHJcbiAgICBjb25zdCBmaW5pc2hMZWF2ZSA9IChlbCwgZG9uZSkgPT4ge1xyXG4gICAgICAgIHJlbW92ZVRyYW5zaXRpb25DbGFzcyhlbCwgbGVhdmVUb0NsYXNzKTtcclxuICAgICAgICByZW1vdmVUcmFuc2l0aW9uQ2xhc3MoZWwsIGxlYXZlQWN0aXZlQ2xhc3MpO1xyXG4gICAgICAgIGRvbmUgJiYgZG9uZSgpO1xyXG4gICAgfTtcclxuICAgIGNvbnN0IG1ha2VFbnRlckhvb2sgPSAoaXNBcHBlYXIpID0+IHtcclxuICAgICAgICByZXR1cm4gKGVsLCBkb25lKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGhvb2sgPSBpc0FwcGVhciA/IG9uQXBwZWFyIDogb25FbnRlcjtcclxuICAgICAgICAgICAgY29uc3QgcmVzb2x2ZSA9ICgpID0+IGZpbmlzaEVudGVyKGVsLCBpc0FwcGVhciwgZG9uZSk7XHJcbiAgICAgICAgICAgIGNhbGxIb29rKGhvb2ssIFtlbCwgcmVzb2x2ZV0pO1xyXG4gICAgICAgICAgICBuZXh0RnJhbWUoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgcmVtb3ZlVHJhbnNpdGlvbkNsYXNzKGVsLCBpc0FwcGVhciA/IGFwcGVhckZyb21DbGFzcyA6IGVudGVyRnJvbUNsYXNzKTtcclxuICAgICAgICAgICAgICAgIGFkZFRyYW5zaXRpb25DbGFzcyhlbCwgaXNBcHBlYXIgPyBhcHBlYXJUb0NsYXNzIDogZW50ZXJUb0NsYXNzKTtcclxuICAgICAgICAgICAgICAgIGlmICghaGFzRXhwbGljaXRDYWxsYmFjayhob29rKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHdoZW5UcmFuc2l0aW9uRW5kcyhlbCwgdHlwZSwgZW50ZXJEdXJhdGlvbiwgcmVzb2x2ZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH07XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIGV4dGVuZChiYXNlUHJvcHMsIHtcclxuICAgICAgICBvbkJlZm9yZUVudGVyKGVsKSB7XHJcbiAgICAgICAgICAgIGNhbGxIb29rKG9uQmVmb3JlRW50ZXIsIFtlbF0pO1xyXG4gICAgICAgICAgICBhZGRUcmFuc2l0aW9uQ2xhc3MoZWwsIGVudGVyRnJvbUNsYXNzKTtcclxuICAgICAgICAgICAgYWRkVHJhbnNpdGlvbkNsYXNzKGVsLCBlbnRlckFjdGl2ZUNsYXNzKTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIG9uQmVmb3JlQXBwZWFyKGVsKSB7XHJcbiAgICAgICAgICAgIGNhbGxIb29rKG9uQmVmb3JlQXBwZWFyLCBbZWxdKTtcclxuICAgICAgICAgICAgYWRkVHJhbnNpdGlvbkNsYXNzKGVsLCBhcHBlYXJGcm9tQ2xhc3MpO1xyXG4gICAgICAgICAgICBhZGRUcmFuc2l0aW9uQ2xhc3MoZWwsIGFwcGVhckFjdGl2ZUNsYXNzKTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIG9uRW50ZXI6IG1ha2VFbnRlckhvb2soZmFsc2UpLFxyXG4gICAgICAgIG9uQXBwZWFyOiBtYWtlRW50ZXJIb29rKHRydWUpLFxyXG4gICAgICAgIG9uTGVhdmUoZWwsIGRvbmUpIHtcclxuICAgICAgICAgICAgY29uc3QgcmVzb2x2ZSA9ICgpID0+IGZpbmlzaExlYXZlKGVsLCBkb25lKTtcclxuICAgICAgICAgICAgYWRkVHJhbnNpdGlvbkNsYXNzKGVsLCBsZWF2ZUZyb21DbGFzcyk7XHJcbiAgICAgICAgICAgIC8vIGZvcmNlIHJlZmxvdyBzbyAqLWxlYXZlLWZyb20gY2xhc3NlcyBpbW1lZGlhdGVseSB0YWtlIGVmZmVjdCAoIzI1OTMpXHJcbiAgICAgICAgICAgIGZvcmNlUmVmbG93KCk7XHJcbiAgICAgICAgICAgIGFkZFRyYW5zaXRpb25DbGFzcyhlbCwgbGVhdmVBY3RpdmVDbGFzcyk7XHJcbiAgICAgICAgICAgIG5leHRGcmFtZSgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICByZW1vdmVUcmFuc2l0aW9uQ2xhc3MoZWwsIGxlYXZlRnJvbUNsYXNzKTtcclxuICAgICAgICAgICAgICAgIGFkZFRyYW5zaXRpb25DbGFzcyhlbCwgbGVhdmVUb0NsYXNzKTtcclxuICAgICAgICAgICAgICAgIGlmICghaGFzRXhwbGljaXRDYWxsYmFjayhvbkxlYXZlKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHdoZW5UcmFuc2l0aW9uRW5kcyhlbCwgdHlwZSwgbGVhdmVEdXJhdGlvbiwgcmVzb2x2ZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBjYWxsSG9vayhvbkxlYXZlLCBbZWwsIHJlc29sdmVdKTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIG9uRW50ZXJDYW5jZWxsZWQoZWwpIHtcclxuICAgICAgICAgICAgZmluaXNoRW50ZXIoZWwsIGZhbHNlKTtcclxuICAgICAgICAgICAgY2FsbEhvb2sob25FbnRlckNhbmNlbGxlZCwgW2VsXSk7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBvbkFwcGVhckNhbmNlbGxlZChlbCkge1xyXG4gICAgICAgICAgICBmaW5pc2hFbnRlcihlbCwgdHJ1ZSk7XHJcbiAgICAgICAgICAgIGNhbGxIb29rKG9uQXBwZWFyQ2FuY2VsbGVkLCBbZWxdKTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIG9uTGVhdmVDYW5jZWxsZWQoZWwpIHtcclxuICAgICAgICAgICAgZmluaXNoTGVhdmUoZWwpO1xyXG4gICAgICAgICAgICBjYWxsSG9vayhvbkxlYXZlQ2FuY2VsbGVkLCBbZWxdKTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxufVxyXG5mdW5jdGlvbiBub3JtYWxpemVEdXJhdGlvbihkdXJhdGlvbikge1xyXG4gICAgaWYgKGR1cmF0aW9uID09IG51bGwpIHtcclxuICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKGlzT2JqZWN0KGR1cmF0aW9uKSkge1xyXG4gICAgICAgIHJldHVybiBbTnVtYmVyT2YoZHVyYXRpb24uZW50ZXIpLCBOdW1iZXJPZihkdXJhdGlvbi5sZWF2ZSldO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgY29uc3QgbiA9IE51bWJlck9mKGR1cmF0aW9uKTtcclxuICAgICAgICByZXR1cm4gW24sIG5dO1xyXG4gICAgfVxyXG59XHJcbmZ1bmN0aW9uIE51bWJlck9mKHZhbCkge1xyXG4gICAgY29uc3QgcmVzID0gdG9OdW1iZXIodmFsKTtcclxuICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykpXHJcbiAgICAgICAgdmFsaWRhdGVEdXJhdGlvbihyZXMpO1xyXG4gICAgcmV0dXJuIHJlcztcclxufVxyXG5mdW5jdGlvbiB2YWxpZGF0ZUR1cmF0aW9uKHZhbCkge1xyXG4gICAgaWYgKHR5cGVvZiB2YWwgIT09ICdudW1iZXInKSB7XHJcbiAgICAgICAgd2FybihgPHRyYW5zaXRpb24+IGV4cGxpY2l0IGR1cmF0aW9uIGlzIG5vdCBhIHZhbGlkIG51bWJlciAtIGAgK1xyXG4gICAgICAgICAgICBgZ290ICR7SlNPTi5zdHJpbmdpZnkodmFsKX0uYCk7XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmIChpc05hTih2YWwpKSB7XHJcbiAgICAgICAgd2FybihgPHRyYW5zaXRpb24+IGV4cGxpY2l0IGR1cmF0aW9uIGlzIE5hTiAtIGAgK1xyXG4gICAgICAgICAgICAndGhlIGR1cmF0aW9uIGV4cHJlc3Npb24gbWlnaHQgYmUgaW5jb3JyZWN0LicpO1xyXG4gICAgfVxyXG59XHJcbmZ1bmN0aW9uIGFkZFRyYW5zaXRpb25DbGFzcyhlbCwgY2xzKSB7XHJcbiAgICBjbHMuc3BsaXQoL1xccysvKS5mb3JFYWNoKGMgPT4gYyAmJiBlbC5jbGFzc0xpc3QuYWRkKGMpKTtcclxuICAgIChlbC5fdnRjIHx8XHJcbiAgICAgICAgKGVsLl92dGMgPSBuZXcgU2V0KCkpKS5hZGQoY2xzKTtcclxufVxyXG5mdW5jdGlvbiByZW1vdmVUcmFuc2l0aW9uQ2xhc3MoZWwsIGNscykge1xyXG4gICAgY2xzLnNwbGl0KC9cXHMrLykuZm9yRWFjaChjID0+IGMgJiYgZWwuY2xhc3NMaXN0LnJlbW92ZShjKSk7XHJcbiAgICBjb25zdCB7IF92dGMgfSA9IGVsO1xyXG4gICAgaWYgKF92dGMpIHtcclxuICAgICAgICBfdnRjLmRlbGV0ZShjbHMpO1xyXG4gICAgICAgIGlmICghX3Z0Yy5zaXplKSB7XHJcbiAgICAgICAgICAgIGVsLl92dGMgPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbmZ1bmN0aW9uIG5leHRGcmFtZShjYikge1xyXG4gICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHtcclxuICAgICAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoY2IpO1xyXG4gICAgfSk7XHJcbn1cclxubGV0IGVuZElkID0gMDtcclxuZnVuY3Rpb24gd2hlblRyYW5zaXRpb25FbmRzKGVsLCBleHBlY3RlZFR5cGUsIGV4cGxpY2l0VGltZW91dCwgcmVzb2x2ZSkge1xyXG4gICAgY29uc3QgaWQgPSAoZWwuX2VuZElkID0gKytlbmRJZCk7XHJcbiAgICBjb25zdCByZXNvbHZlSWZOb3RTdGFsZSA9ICgpID0+IHtcclxuICAgICAgICBpZiAoaWQgPT09IGVsLl9lbmRJZCkge1xyXG4gICAgICAgICAgICByZXNvbHZlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIGlmIChleHBsaWNpdFRpbWVvdXQpIHtcclxuICAgICAgICByZXR1cm4gc2V0VGltZW91dChyZXNvbHZlSWZOb3RTdGFsZSwgZXhwbGljaXRUaW1lb3V0KTtcclxuICAgIH1cclxuICAgIGNvbnN0IHsgdHlwZSwgdGltZW91dCwgcHJvcENvdW50IH0gPSBnZXRUcmFuc2l0aW9uSW5mbyhlbCwgZXhwZWN0ZWRUeXBlKTtcclxuICAgIGlmICghdHlwZSkge1xyXG4gICAgICAgIHJldHVybiByZXNvbHZlKCk7XHJcbiAgICB9XHJcbiAgICBjb25zdCBlbmRFdmVudCA9IHR5cGUgKyAnZW5kJztcclxuICAgIGxldCBlbmRlZCA9IDA7XHJcbiAgICBjb25zdCBlbmQgPSAoKSA9PiB7XHJcbiAgICAgICAgZWwucmVtb3ZlRXZlbnRMaXN0ZW5lcihlbmRFdmVudCwgb25FbmQpO1xyXG4gICAgICAgIHJlc29sdmVJZk5vdFN0YWxlKCk7XHJcbiAgICB9O1xyXG4gICAgY29uc3Qgb25FbmQgPSAoZSkgPT4ge1xyXG4gICAgICAgIGlmIChlLnRhcmdldCA9PT0gZWwgJiYgKytlbmRlZCA+PSBwcm9wQ291bnQpIHtcclxuICAgICAgICAgICAgZW5kKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgIGlmIChlbmRlZCA8IHByb3BDb3VudCkge1xyXG4gICAgICAgICAgICBlbmQoKTtcclxuICAgICAgICB9XHJcbiAgICB9LCB0aW1lb3V0ICsgMSk7XHJcbiAgICBlbC5hZGRFdmVudExpc3RlbmVyKGVuZEV2ZW50LCBvbkVuZCk7XHJcbn1cclxuZnVuY3Rpb24gZ2V0VHJhbnNpdGlvbkluZm8oZWwsIGV4cGVjdGVkVHlwZSkge1xyXG4gICAgY29uc3Qgc3R5bGVzID0gd2luZG93LmdldENvbXB1dGVkU3R5bGUoZWwpO1xyXG4gICAgLy8gSlNET00gbWF5IHJldHVybiB1bmRlZmluZWQgZm9yIHRyYW5zaXRpb24gcHJvcGVydGllc1xyXG4gICAgY29uc3QgZ2V0U3R5bGVQcm9wZXJ0aWVzID0gKGtleSkgPT4gKHN0eWxlc1trZXldIHx8ICcnKS5zcGxpdCgnLCAnKTtcclxuICAgIGNvbnN0IHRyYW5zaXRpb25EZWxheXMgPSBnZXRTdHlsZVByb3BlcnRpZXMoVFJBTlNJVElPTiArICdEZWxheScpO1xyXG4gICAgY29uc3QgdHJhbnNpdGlvbkR1cmF0aW9ucyA9IGdldFN0eWxlUHJvcGVydGllcyhUUkFOU0lUSU9OICsgJ0R1cmF0aW9uJyk7XHJcbiAgICBjb25zdCB0cmFuc2l0aW9uVGltZW91dCA9IGdldFRpbWVvdXQodHJhbnNpdGlvbkRlbGF5cywgdHJhbnNpdGlvbkR1cmF0aW9ucyk7XHJcbiAgICBjb25zdCBhbmltYXRpb25EZWxheXMgPSBnZXRTdHlsZVByb3BlcnRpZXMoQU5JTUFUSU9OICsgJ0RlbGF5Jyk7XHJcbiAgICBjb25zdCBhbmltYXRpb25EdXJhdGlvbnMgPSBnZXRTdHlsZVByb3BlcnRpZXMoQU5JTUFUSU9OICsgJ0R1cmF0aW9uJyk7XHJcbiAgICBjb25zdCBhbmltYXRpb25UaW1lb3V0ID0gZ2V0VGltZW91dChhbmltYXRpb25EZWxheXMsIGFuaW1hdGlvbkR1cmF0aW9ucyk7XHJcbiAgICBsZXQgdHlwZSA9IG51bGw7XHJcbiAgICBsZXQgdGltZW91dCA9IDA7XHJcbiAgICBsZXQgcHJvcENvdW50ID0gMDtcclxuICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xyXG4gICAgaWYgKGV4cGVjdGVkVHlwZSA9PT0gVFJBTlNJVElPTikge1xyXG4gICAgICAgIGlmICh0cmFuc2l0aW9uVGltZW91dCA+IDApIHtcclxuICAgICAgICAgICAgdHlwZSA9IFRSQU5TSVRJT047XHJcbiAgICAgICAgICAgIHRpbWVvdXQgPSB0cmFuc2l0aW9uVGltZW91dDtcclxuICAgICAgICAgICAgcHJvcENvdW50ID0gdHJhbnNpdGlvbkR1cmF0aW9ucy5sZW5ndGg7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgZWxzZSBpZiAoZXhwZWN0ZWRUeXBlID09PSBBTklNQVRJT04pIHtcclxuICAgICAgICBpZiAoYW5pbWF0aW9uVGltZW91dCA+IDApIHtcclxuICAgICAgICAgICAgdHlwZSA9IEFOSU1BVElPTjtcclxuICAgICAgICAgICAgdGltZW91dCA9IGFuaW1hdGlvblRpbWVvdXQ7XHJcbiAgICAgICAgICAgIHByb3BDb3VudCA9IGFuaW1hdGlvbkR1cmF0aW9ucy5sZW5ndGg7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgdGltZW91dCA9IE1hdGgubWF4KHRyYW5zaXRpb25UaW1lb3V0LCBhbmltYXRpb25UaW1lb3V0KTtcclxuICAgICAgICB0eXBlID1cclxuICAgICAgICAgICAgdGltZW91dCA+IDBcclxuICAgICAgICAgICAgICAgID8gdHJhbnNpdGlvblRpbWVvdXQgPiBhbmltYXRpb25UaW1lb3V0XHJcbiAgICAgICAgICAgICAgICAgICAgPyBUUkFOU0lUSU9OXHJcbiAgICAgICAgICAgICAgICAgICAgOiBBTklNQVRJT05cclxuICAgICAgICAgICAgICAgIDogbnVsbDtcclxuICAgICAgICBwcm9wQ291bnQgPSB0eXBlXHJcbiAgICAgICAgICAgID8gdHlwZSA9PT0gVFJBTlNJVElPTlxyXG4gICAgICAgICAgICAgICAgPyB0cmFuc2l0aW9uRHVyYXRpb25zLmxlbmd0aFxyXG4gICAgICAgICAgICAgICAgOiBhbmltYXRpb25EdXJhdGlvbnMubGVuZ3RoXHJcbiAgICAgICAgICAgIDogMDtcclxuICAgIH1cclxuICAgIGNvbnN0IGhhc1RyYW5zZm9ybSA9IHR5cGUgPT09IFRSQU5TSVRJT04gJiZcclxuICAgICAgICAvXFxiKHRyYW5zZm9ybXxhbGwpKCx8JCkvLnRlc3Qoc3R5bGVzW1RSQU5TSVRJT04gKyAnUHJvcGVydHknXSk7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIHR5cGUsXHJcbiAgICAgICAgdGltZW91dCxcclxuICAgICAgICBwcm9wQ291bnQsXHJcbiAgICAgICAgaGFzVHJhbnNmb3JtXHJcbiAgICB9O1xyXG59XHJcbmZ1bmN0aW9uIGdldFRpbWVvdXQoZGVsYXlzLCBkdXJhdGlvbnMpIHtcclxuICAgIHdoaWxlIChkZWxheXMubGVuZ3RoIDwgZHVyYXRpb25zLmxlbmd0aCkge1xyXG4gICAgICAgIGRlbGF5cyA9IGRlbGF5cy5jb25jYXQoZGVsYXlzKTtcclxuICAgIH1cclxuICAgIHJldHVybiBNYXRoLm1heCguLi5kdXJhdGlvbnMubWFwKChkLCBpKSA9PiB0b01zKGQpICsgdG9NcyhkZWxheXNbaV0pKSk7XHJcbn1cclxuLy8gT2xkIHZlcnNpb25zIG9mIENocm9taXVtIChiZWxvdyA2MS4wLjMxNjMuMTAwKSBmb3JtYXRzIGZsb2F0aW5nIHBvaW50ZXJcclxuLy8gbnVtYmVycyBpbiBhIGxvY2FsZS1kZXBlbmRlbnQgd2F5LCB1c2luZyBhIGNvbW1hIGluc3RlYWQgb2YgYSBkb3QuXHJcbi8vIElmIGNvbW1hIGlzIG5vdCByZXBsYWNlZCB3aXRoIGEgZG90LCB0aGUgaW5wdXQgd2lsbCBiZSByb3VuZGVkIGRvd25cclxuLy8gKGkuZS4gYWN0aW5nIGFzIGEgZmxvb3IgZnVuY3Rpb24pIGNhdXNpbmcgdW5leHBlY3RlZCBiZWhhdmlvcnNcclxuZnVuY3Rpb24gdG9NcyhzKSB7XHJcbiAgICByZXR1cm4gTnVtYmVyKHMuc2xpY2UoMCwgLTEpLnJlcGxhY2UoJywnLCAnLicpKSAqIDEwMDA7XHJcbn1cclxuLy8gc3luY2hyb25vdXNseSBmb3JjZSBsYXlvdXQgdG8gcHV0IGVsZW1lbnRzIGludG8gYSBjZXJ0YWluIHN0YXRlXHJcbmZ1bmN0aW9uIGZvcmNlUmVmbG93KCkge1xyXG4gICAgcmV0dXJuIGRvY3VtZW50LmJvZHkub2Zmc2V0SGVpZ2h0O1xyXG59XG5cbmNvbnN0IHBvc2l0aW9uTWFwID0gbmV3IFdlYWtNYXAoKTtcclxuY29uc3QgbmV3UG9zaXRpb25NYXAgPSBuZXcgV2Vha01hcCgpO1xyXG5jb25zdCBUcmFuc2l0aW9uR3JvdXBJbXBsID0ge1xyXG4gICAgbmFtZTogJ1RyYW5zaXRpb25Hcm91cCcsXHJcbiAgICBwcm9wczogLyojX19QVVJFX18qLyBleHRlbmQoe30sIFRyYW5zaXRpb25Qcm9wc1ZhbGlkYXRvcnMsIHtcclxuICAgICAgICB0YWc6IFN0cmluZyxcclxuICAgICAgICBtb3ZlQ2xhc3M6IFN0cmluZ1xyXG4gICAgfSksXHJcbiAgICBzZXR1cChwcm9wcywgeyBzbG90cyB9KSB7XHJcbiAgICAgICAgY29uc3QgaW5zdGFuY2UgPSBnZXRDdXJyZW50SW5zdGFuY2UoKTtcclxuICAgICAgICBjb25zdCBzdGF0ZSA9IHVzZVRyYW5zaXRpb25TdGF0ZSgpO1xyXG4gICAgICAgIGxldCBwcmV2Q2hpbGRyZW47XHJcbiAgICAgICAgbGV0IGNoaWxkcmVuO1xyXG4gICAgICAgIG9uVXBkYXRlZCgoKSA9PiB7XHJcbiAgICAgICAgICAgIC8vIGNoaWxkcmVuIGlzIGd1YXJhbnRlZWQgdG8gZXhpc3QgYWZ0ZXIgaW5pdGlhbCByZW5kZXJcclxuICAgICAgICAgICAgaWYgKCFwcmV2Q2hpbGRyZW4ubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY29uc3QgbW92ZUNsYXNzID0gcHJvcHMubW92ZUNsYXNzIHx8IGAke3Byb3BzLm5hbWUgfHwgJ3YnfS1tb3ZlYDtcclxuICAgICAgICAgICAgaWYgKCFoYXNDU1NUcmFuc2Zvcm0ocHJldkNoaWxkcmVuWzBdLmVsLCBpbnN0YW5jZS52bm9kZS5lbCwgbW92ZUNsYXNzKSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vIHdlIGRpdmlkZSB0aGUgd29yayBpbnRvIHRocmVlIGxvb3BzIHRvIGF2b2lkIG1peGluZyBET00gcmVhZHMgYW5kIHdyaXRlc1xyXG4gICAgICAgICAgICAvLyBpbiBlYWNoIGl0ZXJhdGlvbiAtIHdoaWNoIGhlbHBzIHByZXZlbnQgbGF5b3V0IHRocmFzaGluZy5cclxuICAgICAgICAgICAgcHJldkNoaWxkcmVuLmZvckVhY2goY2FsbFBlbmRpbmdDYnMpO1xyXG4gICAgICAgICAgICBwcmV2Q2hpbGRyZW4uZm9yRWFjaChyZWNvcmRQb3NpdGlvbik7XHJcbiAgICAgICAgICAgIGNvbnN0IG1vdmVkQ2hpbGRyZW4gPSBwcmV2Q2hpbGRyZW4uZmlsdGVyKGFwcGx5VHJhbnNsYXRpb24pO1xyXG4gICAgICAgICAgICAvLyBmb3JjZSByZWZsb3cgdG8gcHV0IGV2ZXJ5dGhpbmcgaW4gcG9zaXRpb25cclxuICAgICAgICAgICAgZm9yY2VSZWZsb3coKTtcclxuICAgICAgICAgICAgbW92ZWRDaGlsZHJlbi5mb3JFYWNoKGMgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgZWwgPSBjLmVsO1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgc3R5bGUgPSBlbC5zdHlsZTtcclxuICAgICAgICAgICAgICAgIGFkZFRyYW5zaXRpb25DbGFzcyhlbCwgbW92ZUNsYXNzKTtcclxuICAgICAgICAgICAgICAgIHN0eWxlLnRyYW5zZm9ybSA9IHN0eWxlLndlYmtpdFRyYW5zZm9ybSA9IHN0eWxlLnRyYW5zaXRpb25EdXJhdGlvbiA9ICcnO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgY2IgPSAoZWwuX21vdmVDYiA9IChlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGUgJiYgZS50YXJnZXQgIT09IGVsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFlIHx8IC90cmFuc2Zvcm0kLy50ZXN0KGUucHJvcGVydHlOYW1lKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbC5yZW1vdmVFdmVudExpc3RlbmVyKCd0cmFuc2l0aW9uZW5kJywgY2IpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbC5fbW92ZUNiID0gbnVsbDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVtb3ZlVHJhbnNpdGlvbkNsYXNzKGVsLCBtb3ZlQ2xhc3MpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgZWwuYWRkRXZlbnRMaXN0ZW5lcigndHJhbnNpdGlvbmVuZCcsIGNiKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcmV0dXJuICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgcmF3UHJvcHMgPSB0b1Jhdyhwcm9wcyk7XHJcbiAgICAgICAgICAgIGNvbnN0IGNzc1RyYW5zaXRpb25Qcm9wcyA9IHJlc29sdmVUcmFuc2l0aW9uUHJvcHMocmF3UHJvcHMpO1xyXG4gICAgICAgICAgICBsZXQgdGFnID0gcmF3UHJvcHMudGFnIHx8IEZyYWdtZW50O1xyXG4gICAgICAgICAgICBwcmV2Q2hpbGRyZW4gPSBjaGlsZHJlbjtcclxuICAgICAgICAgICAgY2hpbGRyZW4gPSBzbG90cy5kZWZhdWx0ID8gZ2V0VHJhbnNpdGlvblJhd0NoaWxkcmVuKHNsb3RzLmRlZmF1bHQoKSkgOiBbXTtcclxuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjaGlsZHJlbi5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgY2hpbGQgPSBjaGlsZHJlbltpXTtcclxuICAgICAgICAgICAgICAgIGlmIChjaGlsZC5rZXkgIT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHNldFRyYW5zaXRpb25Ib29rcyhjaGlsZCwgcmVzb2x2ZVRyYW5zaXRpb25Ib29rcyhjaGlsZCwgY3NzVHJhbnNpdGlvblByb3BzLCBzdGF0ZSwgaW5zdGFuY2UpKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHdhcm4oYDxUcmFuc2l0aW9uR3JvdXA+IGNoaWxkcmVuIG11c3QgYmUga2V5ZWQuYCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKHByZXZDaGlsZHJlbikge1xyXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBwcmV2Q2hpbGRyZW4ubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBjaGlsZCA9IHByZXZDaGlsZHJlbltpXTtcclxuICAgICAgICAgICAgICAgICAgICBzZXRUcmFuc2l0aW9uSG9va3MoY2hpbGQsIHJlc29sdmVUcmFuc2l0aW9uSG9va3MoY2hpbGQsIGNzc1RyYW5zaXRpb25Qcm9wcywgc3RhdGUsIGluc3RhbmNlKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgcG9zaXRpb25NYXAuc2V0KGNoaWxkLCBjaGlsZC5lbC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIGNyZWF0ZVZOb2RlKHRhZywgbnVsbCwgY2hpbGRyZW4pO1xyXG4gICAgICAgIH07XHJcbiAgICB9XHJcbn07XHJcbmNvbnN0IFRyYW5zaXRpb25Hcm91cCA9IFRyYW5zaXRpb25Hcm91cEltcGw7XHJcbmZ1bmN0aW9uIGNhbGxQZW5kaW5nQ2JzKGMpIHtcclxuICAgIGNvbnN0IGVsID0gYy5lbDtcclxuICAgIGlmIChlbC5fbW92ZUNiKSB7XHJcbiAgICAgICAgZWwuX21vdmVDYigpO1xyXG4gICAgfVxyXG4gICAgaWYgKGVsLl9lbnRlckNiKSB7XHJcbiAgICAgICAgZWwuX2VudGVyQ2IoKTtcclxuICAgIH1cclxufVxyXG5mdW5jdGlvbiByZWNvcmRQb3NpdGlvbihjKSB7XHJcbiAgICBuZXdQb3NpdGlvbk1hcC5zZXQoYywgYy5lbC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSk7XHJcbn1cclxuZnVuY3Rpb24gYXBwbHlUcmFuc2xhdGlvbihjKSB7XHJcbiAgICBjb25zdCBvbGRQb3MgPSBwb3NpdGlvbk1hcC5nZXQoYyk7XHJcbiAgICBjb25zdCBuZXdQb3MgPSBuZXdQb3NpdGlvbk1hcC5nZXQoYyk7XHJcbiAgICBjb25zdCBkeCA9IG9sZFBvcy5sZWZ0IC0gbmV3UG9zLmxlZnQ7XHJcbiAgICBjb25zdCBkeSA9IG9sZFBvcy50b3AgLSBuZXdQb3MudG9wO1xyXG4gICAgaWYgKGR4IHx8IGR5KSB7XHJcbiAgICAgICAgY29uc3QgcyA9IGMuZWwuc3R5bGU7XHJcbiAgICAgICAgcy50cmFuc2Zvcm0gPSBzLndlYmtpdFRyYW5zZm9ybSA9IGB0cmFuc2xhdGUoJHtkeH1weCwke2R5fXB4KWA7XHJcbiAgICAgICAgcy50cmFuc2l0aW9uRHVyYXRpb24gPSAnMHMnO1xyXG4gICAgICAgIHJldHVybiBjO1xyXG4gICAgfVxyXG59XHJcbmZ1bmN0aW9uIGhhc0NTU1RyYW5zZm9ybShlbCwgcm9vdCwgbW92ZUNsYXNzKSB7XHJcbiAgICAvLyBEZXRlY3Qgd2hldGhlciBhbiBlbGVtZW50IHdpdGggdGhlIG1vdmUgY2xhc3MgYXBwbGllZCBoYXNcclxuICAgIC8vIENTUyB0cmFuc2l0aW9ucy4gU2luY2UgdGhlIGVsZW1lbnQgbWF5IGJlIGluc2lkZSBhbiBlbnRlcmluZ1xyXG4gICAgLy8gdHJhbnNpdGlvbiBhdCB0aGlzIHZlcnkgbW9tZW50LCB3ZSBtYWtlIGEgY2xvbmUgb2YgaXQgYW5kIHJlbW92ZVxyXG4gICAgLy8gYWxsIG90aGVyIHRyYW5zaXRpb24gY2xhc3NlcyBhcHBsaWVkIHRvIGVuc3VyZSBvbmx5IHRoZSBtb3ZlIGNsYXNzXHJcbiAgICAvLyBpcyBhcHBsaWVkLlxyXG4gICAgY29uc3QgY2xvbmUgPSBlbC5jbG9uZU5vZGUoKTtcclxuICAgIGlmIChlbC5fdnRjKSB7XHJcbiAgICAgICAgZWwuX3Z0Yy5mb3JFYWNoKGNscyA9PiB7XHJcbiAgICAgICAgICAgIGNscy5zcGxpdCgvXFxzKy8pLmZvckVhY2goYyA9PiBjICYmIGNsb25lLmNsYXNzTGlzdC5yZW1vdmUoYykpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgbW92ZUNsYXNzLnNwbGl0KC9cXHMrLykuZm9yRWFjaChjID0+IGMgJiYgY2xvbmUuY2xhc3NMaXN0LmFkZChjKSk7XHJcbiAgICBjbG9uZS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xyXG4gICAgY29uc3QgY29udGFpbmVyID0gKHJvb3Qubm9kZVR5cGUgPT09IDEgPyByb290IDogcm9vdC5wYXJlbnROb2RlKTtcclxuICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChjbG9uZSk7XHJcbiAgICBjb25zdCB7IGhhc1RyYW5zZm9ybSB9ID0gZ2V0VHJhbnNpdGlvbkluZm8oY2xvbmUpO1xyXG4gICAgY29udGFpbmVyLnJlbW92ZUNoaWxkKGNsb25lKTtcclxuICAgIHJldHVybiBoYXNUcmFuc2Zvcm07XHJcbn1cblxuY29uc3QgZ2V0TW9kZWxBc3NpZ25lciA9ICh2bm9kZSkgPT4ge1xyXG4gICAgY29uc3QgZm4gPSB2bm9kZS5wcm9wc1snb25VcGRhdGU6bW9kZWxWYWx1ZSddO1xyXG4gICAgcmV0dXJuIGlzQXJyYXkoZm4pID8gdmFsdWUgPT4gaW52b2tlQXJyYXlGbnMoZm4sIHZhbHVlKSA6IGZuO1xyXG59O1xyXG5mdW5jdGlvbiBvbkNvbXBvc2l0aW9uU3RhcnQoZSkge1xyXG4gICAgZS50YXJnZXQuY29tcG9zaW5nID0gdHJ1ZTtcclxufVxyXG5mdW5jdGlvbiBvbkNvbXBvc2l0aW9uRW5kKGUpIHtcclxuICAgIGNvbnN0IHRhcmdldCA9IGUudGFyZ2V0O1xyXG4gICAgaWYgKHRhcmdldC5jb21wb3NpbmcpIHtcclxuICAgICAgICB0YXJnZXQuY29tcG9zaW5nID0gZmFsc2U7XHJcbiAgICAgICAgdHJpZ2dlcih0YXJnZXQsICdpbnB1dCcpO1xyXG4gICAgfVxyXG59XHJcbmZ1bmN0aW9uIHRyaWdnZXIoZWwsIHR5cGUpIHtcclxuICAgIGNvbnN0IGUgPSBkb2N1bWVudC5jcmVhdGVFdmVudCgnSFRNTEV2ZW50cycpO1xyXG4gICAgZS5pbml0RXZlbnQodHlwZSwgdHJ1ZSwgdHJ1ZSk7XHJcbiAgICBlbC5kaXNwYXRjaEV2ZW50KGUpO1xyXG59XHJcbi8vIFdlIGFyZSBleHBvcnRpbmcgdGhlIHYtbW9kZWwgcnVudGltZSBkaXJlY3RseSBhcyB2bm9kZSBob29rcyBzbyB0aGF0IGl0IGNhblxyXG4vLyBiZSB0cmVlLXNoYWtlbiBpbiBjYXNlIHYtbW9kZWwgaXMgbmV2ZXIgdXNlZC5cclxuY29uc3Qgdk1vZGVsVGV4dCA9IHtcclxuICAgIGNyZWF0ZWQoZWwsIHsgbW9kaWZpZXJzOiB7IGxhenksIHRyaW0sIG51bWJlciB9IH0sIHZub2RlKSB7XHJcbiAgICAgICAgZWwuX2Fzc2lnbiA9IGdldE1vZGVsQXNzaWduZXIodm5vZGUpO1xyXG4gICAgICAgIGNvbnN0IGNhc3RUb051bWJlciA9IG51bWJlciB8fCAodm5vZGUucHJvcHMgJiYgdm5vZGUucHJvcHMudHlwZSA9PT0gJ251bWJlcicpO1xyXG4gICAgICAgIGFkZEV2ZW50TGlzdGVuZXIoZWwsIGxhenkgPyAnY2hhbmdlJyA6ICdpbnB1dCcsIGUgPT4ge1xyXG4gICAgICAgICAgICBpZiAoZS50YXJnZXQuY29tcG9zaW5nKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICBsZXQgZG9tVmFsdWUgPSBlbC52YWx1ZTtcclxuICAgICAgICAgICAgaWYgKHRyaW0pIHtcclxuICAgICAgICAgICAgICAgIGRvbVZhbHVlID0gZG9tVmFsdWUudHJpbSgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKGNhc3RUb051bWJlcikge1xyXG4gICAgICAgICAgICAgICAgZG9tVmFsdWUgPSB0b051bWJlcihkb21WYWx1ZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWwuX2Fzc2lnbihkb21WYWx1ZSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgaWYgKHRyaW0pIHtcclxuICAgICAgICAgICAgYWRkRXZlbnRMaXN0ZW5lcihlbCwgJ2NoYW5nZScsICgpID0+IHtcclxuICAgICAgICAgICAgICAgIGVsLnZhbHVlID0gZWwudmFsdWUudHJpbSgpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKCFsYXp5KSB7XHJcbiAgICAgICAgICAgIGFkZEV2ZW50TGlzdGVuZXIoZWwsICdjb21wb3NpdGlvbnN0YXJ0Jywgb25Db21wb3NpdGlvblN0YXJ0KTtcclxuICAgICAgICAgICAgYWRkRXZlbnRMaXN0ZW5lcihlbCwgJ2NvbXBvc2l0aW9uZW5kJywgb25Db21wb3NpdGlvbkVuZCk7XHJcbiAgICAgICAgICAgIC8vIFNhZmFyaSA8IDEwLjIgJiBVSVdlYlZpZXcgZG9lc24ndCBmaXJlIGNvbXBvc2l0aW9uZW5kIHdoZW5cclxuICAgICAgICAgICAgLy8gc3dpdGNoaW5nIGZvY3VzIGJlZm9yZSBjb25maXJtaW5nIGNvbXBvc2l0aW9uIGNob2ljZVxyXG4gICAgICAgICAgICAvLyB0aGlzIGFsc28gZml4ZXMgdGhlIGlzc3VlIHdoZXJlIHNvbWUgYnJvd3NlcnMgZS5nLiBpT1MgQ2hyb21lXHJcbiAgICAgICAgICAgIC8vIGZpcmVzIFwiY2hhbmdlXCIgaW5zdGVhZCBvZiBcImlucHV0XCIgb24gYXV0b2NvbXBsZXRlLlxyXG4gICAgICAgICAgICBhZGRFdmVudExpc3RlbmVyKGVsLCAnY2hhbmdlJywgb25Db21wb3NpdGlvbkVuZCk7XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuICAgIC8vIHNldCB2YWx1ZSBvbiBtb3VudGVkIHNvIGl0J3MgYWZ0ZXIgbWluL21heCBmb3IgdHlwZT1cInJhbmdlXCJcclxuICAgIG1vdW50ZWQoZWwsIHsgdmFsdWUgfSkge1xyXG4gICAgICAgIGVsLnZhbHVlID0gdmFsdWUgPT0gbnVsbCA/ICcnIDogdmFsdWU7XHJcbiAgICB9LFxyXG4gICAgYmVmb3JlVXBkYXRlKGVsLCB7IHZhbHVlLCBtb2RpZmllcnM6IHsgbGF6eSwgdHJpbSwgbnVtYmVyIH0gfSwgdm5vZGUpIHtcclxuICAgICAgICBlbC5fYXNzaWduID0gZ2V0TW9kZWxBc3NpZ25lcih2bm9kZSk7XHJcbiAgICAgICAgLy8gYXZvaWQgY2xlYXJpbmcgdW5yZXNvbHZlZCB0ZXh0LiAjMjMwMlxyXG4gICAgICAgIGlmIChlbC5jb21wb3NpbmcpXHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICBpZiAoZG9jdW1lbnQuYWN0aXZlRWxlbWVudCA9PT0gZWwpIHtcclxuICAgICAgICAgICAgaWYgKGxhenkpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAodHJpbSAmJiBlbC52YWx1ZS50cmltKCkgPT09IHZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKChudW1iZXIgfHwgZWwudHlwZSA9PT0gJ251bWJlcicpICYmIHRvTnVtYmVyKGVsLnZhbHVlKSA9PT0gdmFsdWUpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCBuZXdWYWx1ZSA9IHZhbHVlID09IG51bGwgPyAnJyA6IHZhbHVlO1xyXG4gICAgICAgIGlmIChlbC52YWx1ZSAhPT0gbmV3VmFsdWUpIHtcclxuICAgICAgICAgICAgZWwudmFsdWUgPSBuZXdWYWx1ZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn07XHJcbmNvbnN0IHZNb2RlbENoZWNrYm94ID0ge1xyXG4gICAgLy8gIzQwOTYgYXJyYXkgY2hlY2tib3hlcyBuZWVkIHRvIGJlIGRlZXAgdHJhdmVyc2VkXHJcbiAgICBkZWVwOiB0cnVlLFxyXG4gICAgY3JlYXRlZChlbCwgXywgdm5vZGUpIHtcclxuICAgICAgICBlbC5fYXNzaWduID0gZ2V0TW9kZWxBc3NpZ25lcih2bm9kZSk7XHJcbiAgICAgICAgYWRkRXZlbnRMaXN0ZW5lcihlbCwgJ2NoYW5nZScsICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgbW9kZWxWYWx1ZSA9IGVsLl9tb2RlbFZhbHVlO1xyXG4gICAgICAgICAgICBjb25zdCBlbGVtZW50VmFsdWUgPSBnZXRWYWx1ZShlbCk7XHJcbiAgICAgICAgICAgIGNvbnN0IGNoZWNrZWQgPSBlbC5jaGVja2VkO1xyXG4gICAgICAgICAgICBjb25zdCBhc3NpZ24gPSBlbC5fYXNzaWduO1xyXG4gICAgICAgICAgICBpZiAoaXNBcnJheShtb2RlbFZhbHVlKSkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgaW5kZXggPSBsb29zZUluZGV4T2YobW9kZWxWYWx1ZSwgZWxlbWVudFZhbHVlKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGZvdW5kID0gaW5kZXggIT09IC0xO1xyXG4gICAgICAgICAgICAgICAgaWYgKGNoZWNrZWQgJiYgIWZvdW5kKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYXNzaWduKG1vZGVsVmFsdWUuY29uY2F0KGVsZW1lbnRWYWx1ZSkpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoIWNoZWNrZWQgJiYgZm91bmQpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBmaWx0ZXJlZCA9IFsuLi5tb2RlbFZhbHVlXTtcclxuICAgICAgICAgICAgICAgICAgICBmaWx0ZXJlZC5zcGxpY2UoaW5kZXgsIDEpO1xyXG4gICAgICAgICAgICAgICAgICAgIGFzc2lnbihmaWx0ZXJlZCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSBpZiAoaXNTZXQobW9kZWxWYWx1ZSkpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGNsb25lZCA9IG5ldyBTZXQobW9kZWxWYWx1ZSk7XHJcbiAgICAgICAgICAgICAgICBpZiAoY2hlY2tlZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNsb25lZC5hZGQoZWxlbWVudFZhbHVlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGNsb25lZC5kZWxldGUoZWxlbWVudFZhbHVlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGFzc2lnbihjbG9uZWQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgYXNzaWduKGdldENoZWNrYm94VmFsdWUoZWwsIGNoZWNrZWQpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfSxcclxuICAgIC8vIHNldCBpbml0aWFsIGNoZWNrZWQgb24gbW91bnQgdG8gd2FpdCBmb3IgdHJ1ZS12YWx1ZS9mYWxzZS12YWx1ZVxyXG4gICAgbW91bnRlZDogc2V0Q2hlY2tlZCxcclxuICAgIGJlZm9yZVVwZGF0ZShlbCwgYmluZGluZywgdm5vZGUpIHtcclxuICAgICAgICBlbC5fYXNzaWduID0gZ2V0TW9kZWxBc3NpZ25lcih2bm9kZSk7XHJcbiAgICAgICAgc2V0Q2hlY2tlZChlbCwgYmluZGluZywgdm5vZGUpO1xyXG4gICAgfVxyXG59O1xyXG5mdW5jdGlvbiBzZXRDaGVja2VkKGVsLCB7IHZhbHVlLCBvbGRWYWx1ZSB9LCB2bm9kZSkge1xyXG4gICAgZWwuX21vZGVsVmFsdWUgPSB2YWx1ZTtcclxuICAgIGlmIChpc0FycmF5KHZhbHVlKSkge1xyXG4gICAgICAgIGVsLmNoZWNrZWQgPSBsb29zZUluZGV4T2YodmFsdWUsIHZub2RlLnByb3BzLnZhbHVlKSA+IC0xO1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZiAoaXNTZXQodmFsdWUpKSB7XHJcbiAgICAgICAgZWwuY2hlY2tlZCA9IHZhbHVlLmhhcyh2bm9kZS5wcm9wcy52YWx1ZSk7XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmICh2YWx1ZSAhPT0gb2xkVmFsdWUpIHtcclxuICAgICAgICBlbC5jaGVja2VkID0gbG9vc2VFcXVhbCh2YWx1ZSwgZ2V0Q2hlY2tib3hWYWx1ZShlbCwgdHJ1ZSkpO1xyXG4gICAgfVxyXG59XHJcbmNvbnN0IHZNb2RlbFJhZGlvID0ge1xyXG4gICAgY3JlYXRlZChlbCwgeyB2YWx1ZSB9LCB2bm9kZSkge1xyXG4gICAgICAgIGVsLmNoZWNrZWQgPSBsb29zZUVxdWFsKHZhbHVlLCB2bm9kZS5wcm9wcy52YWx1ZSk7XHJcbiAgICAgICAgZWwuX2Fzc2lnbiA9IGdldE1vZGVsQXNzaWduZXIodm5vZGUpO1xyXG4gICAgICAgIGFkZEV2ZW50TGlzdGVuZXIoZWwsICdjaGFuZ2UnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGVsLl9hc3NpZ24oZ2V0VmFsdWUoZWwpKTtcclxuICAgICAgICB9KTtcclxuICAgIH0sXHJcbiAgICBiZWZvcmVVcGRhdGUoZWwsIHsgdmFsdWUsIG9sZFZhbHVlIH0sIHZub2RlKSB7XHJcbiAgICAgICAgZWwuX2Fzc2lnbiA9IGdldE1vZGVsQXNzaWduZXIodm5vZGUpO1xyXG4gICAgICAgIGlmICh2YWx1ZSAhPT0gb2xkVmFsdWUpIHtcclxuICAgICAgICAgICAgZWwuY2hlY2tlZCA9IGxvb3NlRXF1YWwodmFsdWUsIHZub2RlLnByb3BzLnZhbHVlKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn07XHJcbmNvbnN0IHZNb2RlbFNlbGVjdCA9IHtcclxuICAgIC8vIDxzZWxlY3QgbXVsdGlwbGU+IHZhbHVlIG5lZWQgdG8gYmUgZGVlcCB0cmF2ZXJzZWRcclxuICAgIGRlZXA6IHRydWUsXHJcbiAgICBjcmVhdGVkKGVsLCB7IHZhbHVlLCBtb2RpZmllcnM6IHsgbnVtYmVyIH0gfSwgdm5vZGUpIHtcclxuICAgICAgICBjb25zdCBpc1NldE1vZGVsID0gaXNTZXQodmFsdWUpO1xyXG4gICAgICAgIGFkZEV2ZW50TGlzdGVuZXIoZWwsICdjaGFuZ2UnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IHNlbGVjdGVkVmFsID0gQXJyYXkucHJvdG90eXBlLmZpbHRlclxyXG4gICAgICAgICAgICAgICAgLmNhbGwoZWwub3B0aW9ucywgKG8pID0+IG8uc2VsZWN0ZWQpXHJcbiAgICAgICAgICAgICAgICAubWFwKChvKSA9PiBudW1iZXIgPyB0b051bWJlcihnZXRWYWx1ZShvKSkgOiBnZXRWYWx1ZShvKSk7XHJcbiAgICAgICAgICAgIGVsLl9hc3NpZ24oZWwubXVsdGlwbGVcclxuICAgICAgICAgICAgICAgID8gaXNTZXRNb2RlbFxyXG4gICAgICAgICAgICAgICAgICAgID8gbmV3IFNldChzZWxlY3RlZFZhbClcclxuICAgICAgICAgICAgICAgICAgICA6IHNlbGVjdGVkVmFsXHJcbiAgICAgICAgICAgICAgICA6IHNlbGVjdGVkVmFsWzBdKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICBlbC5fYXNzaWduID0gZ2V0TW9kZWxBc3NpZ25lcih2bm9kZSk7XHJcbiAgICB9LFxyXG4gICAgLy8gc2V0IHZhbHVlIGluIG1vdW50ZWQgJiB1cGRhdGVkIGJlY2F1c2UgPHNlbGVjdD4gcmVsaWVzIG9uIGl0cyBjaGlsZHJlblxyXG4gICAgLy8gPG9wdGlvbj5zLlxyXG4gICAgbW91bnRlZChlbCwgeyB2YWx1ZSB9KSB7XHJcbiAgICAgICAgc2V0U2VsZWN0ZWQoZWwsIHZhbHVlKTtcclxuICAgIH0sXHJcbiAgICBiZWZvcmVVcGRhdGUoZWwsIF9iaW5kaW5nLCB2bm9kZSkge1xyXG4gICAgICAgIGVsLl9hc3NpZ24gPSBnZXRNb2RlbEFzc2lnbmVyKHZub2RlKTtcclxuICAgIH0sXHJcbiAgICB1cGRhdGVkKGVsLCB7IHZhbHVlIH0pIHtcclxuICAgICAgICBzZXRTZWxlY3RlZChlbCwgdmFsdWUpO1xyXG4gICAgfVxyXG59O1xyXG5mdW5jdGlvbiBzZXRTZWxlY3RlZChlbCwgdmFsdWUpIHtcclxuICAgIGNvbnN0IGlzTXVsdGlwbGUgPSBlbC5tdWx0aXBsZTtcclxuICAgIGlmIChpc011bHRpcGxlICYmICFpc0FycmF5KHZhbHVlKSAmJiAhaXNTZXQodmFsdWUpKSB7XHJcbiAgICAgICAgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmXHJcbiAgICAgICAgICAgIHdhcm4oYDxzZWxlY3QgbXVsdGlwbGUgdi1tb2RlbD4gZXhwZWN0cyBhbiBBcnJheSBvciBTZXQgdmFsdWUgZm9yIGl0cyBiaW5kaW5nLCBgICtcclxuICAgICAgICAgICAgICAgIGBidXQgZ290ICR7T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHZhbHVlKS5zbGljZSg4LCAtMSl9LmApO1xyXG4gICAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIGZvciAobGV0IGkgPSAwLCBsID0gZWwub3B0aW9ucy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcclxuICAgICAgICBjb25zdCBvcHRpb24gPSBlbC5vcHRpb25zW2ldO1xyXG4gICAgICAgIGNvbnN0IG9wdGlvblZhbHVlID0gZ2V0VmFsdWUob3B0aW9uKTtcclxuICAgICAgICBpZiAoaXNNdWx0aXBsZSkge1xyXG4gICAgICAgICAgICBpZiAoaXNBcnJheSh2YWx1ZSkpIHtcclxuICAgICAgICAgICAgICAgIG9wdGlvbi5zZWxlY3RlZCA9IGxvb3NlSW5kZXhPZih2YWx1ZSwgb3B0aW9uVmFsdWUpID4gLTE7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBvcHRpb24uc2VsZWN0ZWQgPSB2YWx1ZS5oYXMob3B0aW9uVmFsdWUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBpZiAobG9vc2VFcXVhbChnZXRWYWx1ZShvcHRpb24pLCB2YWx1ZSkpIHtcclxuICAgICAgICAgICAgICAgIGlmIChlbC5zZWxlY3RlZEluZGV4ICE9PSBpKVxyXG4gICAgICAgICAgICAgICAgICAgIGVsLnNlbGVjdGVkSW5kZXggPSBpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgaWYgKCFpc011bHRpcGxlICYmIGVsLnNlbGVjdGVkSW5kZXggIT09IC0xKSB7XHJcbiAgICAgICAgZWwuc2VsZWN0ZWRJbmRleCA9IC0xO1xyXG4gICAgfVxyXG59XHJcbi8vIHJldHJpZXZlIHJhdyB2YWx1ZSBzZXQgdmlhIDp2YWx1ZSBiaW5kaW5nc1xyXG5mdW5jdGlvbiBnZXRWYWx1ZShlbCkge1xyXG4gICAgcmV0dXJuICdfdmFsdWUnIGluIGVsID8gZWwuX3ZhbHVlIDogZWwudmFsdWU7XHJcbn1cclxuLy8gcmV0cmlldmUgcmF3IHZhbHVlIGZvciB0cnVlLXZhbHVlIGFuZCBmYWxzZS12YWx1ZSBzZXQgdmlhIDp0cnVlLXZhbHVlIG9yIDpmYWxzZS12YWx1ZSBiaW5kaW5nc1xyXG5mdW5jdGlvbiBnZXRDaGVja2JveFZhbHVlKGVsLCBjaGVja2VkKSB7XHJcbiAgICBjb25zdCBrZXkgPSBjaGVja2VkID8gJ190cnVlVmFsdWUnIDogJ19mYWxzZVZhbHVlJztcclxuICAgIHJldHVybiBrZXkgaW4gZWwgPyBlbFtrZXldIDogY2hlY2tlZDtcclxufVxyXG5jb25zdCB2TW9kZWxEeW5hbWljID0ge1xyXG4gICAgY3JlYXRlZChlbCwgYmluZGluZywgdm5vZGUpIHtcclxuICAgICAgICBjYWxsTW9kZWxIb29rKGVsLCBiaW5kaW5nLCB2bm9kZSwgbnVsbCwgJ2NyZWF0ZWQnKTtcclxuICAgIH0sXHJcbiAgICBtb3VudGVkKGVsLCBiaW5kaW5nLCB2bm9kZSkge1xyXG4gICAgICAgIGNhbGxNb2RlbEhvb2soZWwsIGJpbmRpbmcsIHZub2RlLCBudWxsLCAnbW91bnRlZCcpO1xyXG4gICAgfSxcclxuICAgIGJlZm9yZVVwZGF0ZShlbCwgYmluZGluZywgdm5vZGUsIHByZXZWTm9kZSkge1xyXG4gICAgICAgIGNhbGxNb2RlbEhvb2soZWwsIGJpbmRpbmcsIHZub2RlLCBwcmV2Vk5vZGUsICdiZWZvcmVVcGRhdGUnKTtcclxuICAgIH0sXHJcbiAgICB1cGRhdGVkKGVsLCBiaW5kaW5nLCB2bm9kZSwgcHJldlZOb2RlKSB7XHJcbiAgICAgICAgY2FsbE1vZGVsSG9vayhlbCwgYmluZGluZywgdm5vZGUsIHByZXZWTm9kZSwgJ3VwZGF0ZWQnKTtcclxuICAgIH1cclxufTtcclxuZnVuY3Rpb24gY2FsbE1vZGVsSG9vayhlbCwgYmluZGluZywgdm5vZGUsIHByZXZWTm9kZSwgaG9vaykge1xyXG4gICAgbGV0IG1vZGVsVG9Vc2U7XHJcbiAgICBzd2l0Y2ggKGVsLnRhZ05hbWUpIHtcclxuICAgICAgICBjYXNlICdTRUxFQ1QnOlxyXG4gICAgICAgICAgICBtb2RlbFRvVXNlID0gdk1vZGVsU2VsZWN0O1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlICdURVhUQVJFQSc6XHJcbiAgICAgICAgICAgIG1vZGVsVG9Vc2UgPSB2TW9kZWxUZXh0O1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICBzd2l0Y2ggKHZub2RlLnByb3BzICYmIHZub2RlLnByb3BzLnR5cGUpIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgJ2NoZWNrYm94JzpcclxuICAgICAgICAgICAgICAgICAgICBtb2RlbFRvVXNlID0gdk1vZGVsQ2hlY2tib3g7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlICdyYWRpbyc6XHJcbiAgICAgICAgICAgICAgICAgICAgbW9kZWxUb1VzZSA9IHZNb2RlbFJhZGlvO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgICAgICBtb2RlbFRvVXNlID0gdk1vZGVsVGV4dDtcclxuICAgICAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgY29uc3QgZm4gPSBtb2RlbFRvVXNlW2hvb2tdO1xyXG4gICAgZm4gJiYgZm4oZWwsIGJpbmRpbmcsIHZub2RlLCBwcmV2Vk5vZGUpO1xyXG59XHJcbi8vIFNTUiB2bm9kZSB0cmFuc2Zvcm1zLCBvbmx5IHVzZWQgd2hlbiB1c2VyIGluY2x1ZGVzIGNsaWVudC1vcmllbnRlZCByZW5kZXJcclxuLy8gZnVuY3Rpb24gaW4gU1NSXHJcbmZ1bmN0aW9uIGluaXRWTW9kZWxGb3JTU1IoKSB7XHJcbiAgICB2TW9kZWxUZXh0LmdldFNTUlByb3BzID0gKHsgdmFsdWUgfSkgPT4gKHsgdmFsdWUgfSk7XHJcbiAgICB2TW9kZWxSYWRpby5nZXRTU1JQcm9wcyA9ICh7IHZhbHVlIH0sIHZub2RlKSA9PiB7XHJcbiAgICAgICAgaWYgKHZub2RlLnByb3BzICYmIGxvb3NlRXF1YWwodm5vZGUucHJvcHMudmFsdWUsIHZhbHVlKSkge1xyXG4gICAgICAgICAgICByZXR1cm4geyBjaGVja2VkOiB0cnVlIH07XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIHZNb2RlbENoZWNrYm94LmdldFNTUlByb3BzID0gKHsgdmFsdWUgfSwgdm5vZGUpID0+IHtcclxuICAgICAgICBpZiAoaXNBcnJheSh2YWx1ZSkpIHtcclxuICAgICAgICAgICAgaWYgKHZub2RlLnByb3BzICYmIGxvb3NlSW5kZXhPZih2YWx1ZSwgdm5vZGUucHJvcHMudmFsdWUpID4gLTEpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB7IGNoZWNrZWQ6IHRydWUgfTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChpc1NldCh2YWx1ZSkpIHtcclxuICAgICAgICAgICAgaWYgKHZub2RlLnByb3BzICYmIHZhbHVlLmhhcyh2bm9kZS5wcm9wcy52YWx1ZSkpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB7IGNoZWNrZWQ6IHRydWUgfTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmICh2YWx1ZSkge1xyXG4gICAgICAgICAgICByZXR1cm4geyBjaGVja2VkOiB0cnVlIH07XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxufVxuXG5jb25zdCBzeXN0ZW1Nb2RpZmllcnMgPSBbJ2N0cmwnLCAnc2hpZnQnLCAnYWx0JywgJ21ldGEnXTtcclxuY29uc3QgbW9kaWZpZXJHdWFyZHMgPSB7XHJcbiAgICBzdG9wOiBlID0+IGUuc3RvcFByb3BhZ2F0aW9uKCksXHJcbiAgICBwcmV2ZW50OiBlID0+IGUucHJldmVudERlZmF1bHQoKSxcclxuICAgIHNlbGY6IGUgPT4gZS50YXJnZXQgIT09IGUuY3VycmVudFRhcmdldCxcclxuICAgIGN0cmw6IGUgPT4gIWUuY3RybEtleSxcclxuICAgIHNoaWZ0OiBlID0+ICFlLnNoaWZ0S2V5LFxyXG4gICAgYWx0OiBlID0+ICFlLmFsdEtleSxcclxuICAgIG1ldGE6IGUgPT4gIWUubWV0YUtleSxcclxuICAgIGxlZnQ6IGUgPT4gJ2J1dHRvbicgaW4gZSAmJiBlLmJ1dHRvbiAhPT0gMCxcclxuICAgIG1pZGRsZTogZSA9PiAnYnV0dG9uJyBpbiBlICYmIGUuYnV0dG9uICE9PSAxLFxyXG4gICAgcmlnaHQ6IGUgPT4gJ2J1dHRvbicgaW4gZSAmJiBlLmJ1dHRvbiAhPT0gMixcclxuICAgIGV4YWN0OiAoZSwgbW9kaWZpZXJzKSA9PiBzeXN0ZW1Nb2RpZmllcnMuc29tZShtID0+IGVbYCR7bX1LZXlgXSAmJiAhbW9kaWZpZXJzLmluY2x1ZGVzKG0pKVxyXG59O1xyXG4vKipcclxuICogQHByaXZhdGVcclxuICovXHJcbmNvbnN0IHdpdGhNb2RpZmllcnMgPSAoZm4sIG1vZGlmaWVycykgPT4ge1xyXG4gICAgcmV0dXJuIChldmVudCwgLi4uYXJncykgPT4ge1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbW9kaWZpZXJzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGd1YXJkID0gbW9kaWZpZXJHdWFyZHNbbW9kaWZpZXJzW2ldXTtcclxuICAgICAgICAgICAgaWYgKGd1YXJkICYmIGd1YXJkKGV2ZW50LCBtb2RpZmllcnMpKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gZm4oZXZlbnQsIC4uLmFyZ3MpO1xyXG4gICAgfTtcclxufTtcclxuLy8gS2VwdCBmb3IgMi54IGNvbXBhdC5cclxuLy8gTm90ZTogSUUxMSBjb21wYXQgZm9yIGBzcGFjZWJhcmAgYW5kIGBkZWxgIGlzIHJlbW92ZWQgZm9yIG5vdy5cclxuY29uc3Qga2V5TmFtZXMgPSB7XHJcbiAgICBlc2M6ICdlc2NhcGUnLFxyXG4gICAgc3BhY2U6ICcgJyxcclxuICAgIHVwOiAnYXJyb3ctdXAnLFxyXG4gICAgbGVmdDogJ2Fycm93LWxlZnQnLFxyXG4gICAgcmlnaHQ6ICdhcnJvdy1yaWdodCcsXHJcbiAgICBkb3duOiAnYXJyb3ctZG93bicsXHJcbiAgICBkZWxldGU6ICdiYWNrc3BhY2UnXHJcbn07XHJcbi8qKlxyXG4gKiBAcHJpdmF0ZVxyXG4gKi9cclxuY29uc3Qgd2l0aEtleXMgPSAoZm4sIG1vZGlmaWVycykgPT4ge1xyXG4gICAgcmV0dXJuIChldmVudCkgPT4ge1xyXG4gICAgICAgIGlmICghKCdrZXknIGluIGV2ZW50KSkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IGV2ZW50S2V5ID0gaHlwaGVuYXRlKGV2ZW50LmtleSk7XHJcbiAgICAgICAgaWYgKG1vZGlmaWVycy5zb21lKGsgPT4gayA9PT0gZXZlbnRLZXkgfHwga2V5TmFtZXNba10gPT09IGV2ZW50S2V5KSkge1xyXG4gICAgICAgICAgICByZXR1cm4gZm4oZXZlbnQpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbn07XG5cbmNvbnN0IHZTaG93ID0ge1xyXG4gICAgYmVmb3JlTW91bnQoZWwsIHsgdmFsdWUgfSwgeyB0cmFuc2l0aW9uIH0pIHtcclxuICAgICAgICBlbC5fdm9kID0gZWwuc3R5bGUuZGlzcGxheSA9PT0gJ25vbmUnID8gJycgOiBlbC5zdHlsZS5kaXNwbGF5O1xyXG4gICAgICAgIGlmICh0cmFuc2l0aW9uICYmIHZhbHVlKSB7XHJcbiAgICAgICAgICAgIHRyYW5zaXRpb24uYmVmb3JlRW50ZXIoZWwpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgc2V0RGlzcGxheShlbCwgdmFsdWUpO1xyXG4gICAgICAgIH1cclxuICAgIH0sXHJcbiAgICBtb3VudGVkKGVsLCB7IHZhbHVlIH0sIHsgdHJhbnNpdGlvbiB9KSB7XHJcbiAgICAgICAgaWYgKHRyYW5zaXRpb24gJiYgdmFsdWUpIHtcclxuICAgICAgICAgICAgdHJhbnNpdGlvbi5lbnRlcihlbCk7XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuICAgIHVwZGF0ZWQoZWwsIHsgdmFsdWUsIG9sZFZhbHVlIH0sIHsgdHJhbnNpdGlvbiB9KSB7XHJcbiAgICAgICAgaWYgKCF2YWx1ZSA9PT0gIW9sZFZhbHVlKVxyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgaWYgKHRyYW5zaXRpb24pIHtcclxuICAgICAgICAgICAgaWYgKHZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICB0cmFuc2l0aW9uLmJlZm9yZUVudGVyKGVsKTtcclxuICAgICAgICAgICAgICAgIHNldERpc3BsYXkoZWwsIHRydWUpO1xyXG4gICAgICAgICAgICAgICAgdHJhbnNpdGlvbi5lbnRlcihlbCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0cmFuc2l0aW9uLmxlYXZlKGVsLCAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2V0RGlzcGxheShlbCwgZmFsc2UpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHNldERpc3BsYXkoZWwsIHZhbHVlKTtcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG4gICAgYmVmb3JlVW5tb3VudChlbCwgeyB2YWx1ZSB9KSB7XHJcbiAgICAgICAgc2V0RGlzcGxheShlbCwgdmFsdWUpO1xyXG4gICAgfVxyXG59O1xyXG5mdW5jdGlvbiBzZXREaXNwbGF5KGVsLCB2YWx1ZSkge1xyXG4gICAgZWwuc3R5bGUuZGlzcGxheSA9IHZhbHVlID8gZWwuX3ZvZCA6ICdub25lJztcclxufVxyXG4vLyBTU1Igdm5vZGUgdHJhbnNmb3Jtcywgb25seSB1c2VkIHdoZW4gdXNlciBpbmNsdWRlcyBjbGllbnQtb3JpZW50ZWQgcmVuZGVyXHJcbi8vIGZ1bmN0aW9uIGluIFNTUlxyXG5mdW5jdGlvbiBpbml0VlNob3dGb3JTU1IoKSB7XHJcbiAgICB2U2hvdy5nZXRTU1JQcm9wcyA9ICh7IHZhbHVlIH0pID0+IHtcclxuICAgICAgICBpZiAoIXZhbHVlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB7IHN0eWxlOiB7IGRpc3BsYXk6ICdub25lJyB9IH07XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxufVxuXG5jb25zdCByZW5kZXJlck9wdGlvbnMgPSBleHRlbmQoeyBwYXRjaFByb3AgfSwgbm9kZU9wcyk7XHJcbi8vIGxhenkgY3JlYXRlIHRoZSByZW5kZXJlciAtIHRoaXMgbWFrZXMgY29yZSByZW5kZXJlciBsb2dpYyB0cmVlLXNoYWthYmxlXHJcbi8vIGluIGNhc2UgdGhlIHVzZXIgb25seSBpbXBvcnRzIHJlYWN0aXZpdHkgdXRpbGl0aWVzIGZyb20gVnVlLlxyXG5sZXQgcmVuZGVyZXI7XHJcbmxldCBlbmFibGVkSHlkcmF0aW9uID0gZmFsc2U7XHJcbmZ1bmN0aW9uIGVuc3VyZVJlbmRlcmVyKCkge1xyXG4gICAgcmV0dXJuIChyZW5kZXJlciB8fFxyXG4gICAgICAgIChyZW5kZXJlciA9IGNyZWF0ZVJlbmRlcmVyKHJlbmRlcmVyT3B0aW9ucykpKTtcclxufVxyXG5mdW5jdGlvbiBlbnN1cmVIeWRyYXRpb25SZW5kZXJlcigpIHtcclxuICAgIHJlbmRlcmVyID0gZW5hYmxlZEh5ZHJhdGlvblxyXG4gICAgICAgID8gcmVuZGVyZXJcclxuICAgICAgICA6IGNyZWF0ZUh5ZHJhdGlvblJlbmRlcmVyKHJlbmRlcmVyT3B0aW9ucyk7XHJcbiAgICBlbmFibGVkSHlkcmF0aW9uID0gdHJ1ZTtcclxuICAgIHJldHVybiByZW5kZXJlcjtcclxufVxyXG4vLyB1c2UgZXhwbGljaXQgdHlwZSBjYXN0cyBoZXJlIHRvIGF2b2lkIGltcG9ydCgpIGNhbGxzIGluIHJvbGxlZC11cCBkLnRzXHJcbmNvbnN0IHJlbmRlciA9ICgoLi4uYXJncykgPT4ge1xyXG4gICAgZW5zdXJlUmVuZGVyZXIoKS5yZW5kZXIoLi4uYXJncyk7XHJcbn0pO1xyXG5jb25zdCBoeWRyYXRlID0gKCguLi5hcmdzKSA9PiB7XHJcbiAgICBlbnN1cmVIeWRyYXRpb25SZW5kZXJlcigpLmh5ZHJhdGUoLi4uYXJncyk7XHJcbn0pO1xyXG5jb25zdCBjcmVhdGVBcHAgPSAoKC4uLmFyZ3MpID0+IHtcclxuICAgIGNvbnN0IGFwcCA9IGVuc3VyZVJlbmRlcmVyKCkuY3JlYXRlQXBwKC4uLmFyZ3MpO1xyXG4gICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSkge1xyXG4gICAgICAgIGluamVjdE5hdGl2ZVRhZ0NoZWNrKGFwcCk7XHJcbiAgICAgICAgaW5qZWN0Q29tcGlsZXJPcHRpb25zQ2hlY2soYXBwKTtcclxuICAgIH1cclxuICAgIGNvbnN0IHsgbW91bnQgfSA9IGFwcDtcclxuICAgIGFwcC5tb3VudCA9IChjb250YWluZXJPclNlbGVjdG9yKSA9PiB7XHJcbiAgICAgICAgY29uc3QgY29udGFpbmVyID0gbm9ybWFsaXplQ29udGFpbmVyKGNvbnRhaW5lck9yU2VsZWN0b3IpO1xyXG4gICAgICAgIGlmICghY29udGFpbmVyKVxyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgY29uc3QgY29tcG9uZW50ID0gYXBwLl9jb21wb25lbnQ7XHJcbiAgICAgICAgaWYgKCFpc0Z1bmN0aW9uKGNvbXBvbmVudCkgJiYgIWNvbXBvbmVudC5yZW5kZXIgJiYgIWNvbXBvbmVudC50ZW1wbGF0ZSkge1xyXG4gICAgICAgICAgICAvLyBfX1VOU0FGRV9fXHJcbiAgICAgICAgICAgIC8vIFJlYXNvbjogcG90ZW50aWFsIGV4ZWN1dGlvbiBvZiBKUyBleHByZXNzaW9ucyBpbiBpbi1ET00gdGVtcGxhdGUuXHJcbiAgICAgICAgICAgIC8vIFRoZSB1c2VyIG11c3QgbWFrZSBzdXJlIHRoZSBpbi1ET00gdGVtcGxhdGUgaXMgdHJ1c3RlZC4gSWYgaXQnc1xyXG4gICAgICAgICAgICAvLyByZW5kZXJlZCBieSB0aGUgc2VydmVyLCB0aGUgdGVtcGxhdGUgc2hvdWxkIG5vdCBjb250YWluIGFueSB1c2VyIGRhdGEuXHJcbiAgICAgICAgICAgIGNvbXBvbmVudC50ZW1wbGF0ZSA9IGNvbnRhaW5lci5pbm5lckhUTUw7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIGNsZWFyIGNvbnRlbnQgYmVmb3JlIG1vdW50aW5nXHJcbiAgICAgICAgY29udGFpbmVyLmlubmVySFRNTCA9ICcnO1xyXG4gICAgICAgIGNvbnN0IHByb3h5ID0gbW91bnQoY29udGFpbmVyLCBmYWxzZSwgY29udGFpbmVyIGluc3RhbmNlb2YgU1ZHRWxlbWVudCk7XHJcbiAgICAgICAgaWYgKGNvbnRhaW5lciBpbnN0YW5jZW9mIEVsZW1lbnQpIHtcclxuICAgICAgICAgICAgY29udGFpbmVyLnJlbW92ZUF0dHJpYnV0ZSgndi1jbG9haycpO1xyXG4gICAgICAgICAgICBjb250YWluZXIuc2V0QXR0cmlidXRlKCdkYXRhLXYtYXBwJywgJycpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gcHJveHk7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIGFwcDtcclxufSk7XHJcbmNvbnN0IGNyZWF0ZVNTUkFwcCA9ICgoLi4uYXJncykgPT4ge1xyXG4gICAgY29uc3QgYXBwID0gZW5zdXJlSHlkcmF0aW9uUmVuZGVyZXIoKS5jcmVhdGVBcHAoLi4uYXJncyk7XHJcbiAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpKSB7XHJcbiAgICAgICAgaW5qZWN0TmF0aXZlVGFnQ2hlY2soYXBwKTtcclxuICAgICAgICBpbmplY3RDb21waWxlck9wdGlvbnNDaGVjayhhcHApO1xyXG4gICAgfVxyXG4gICAgY29uc3QgeyBtb3VudCB9ID0gYXBwO1xyXG4gICAgYXBwLm1vdW50ID0gKGNvbnRhaW5lck9yU2VsZWN0b3IpID0+IHtcclxuICAgICAgICBjb25zdCBjb250YWluZXIgPSBub3JtYWxpemVDb250YWluZXIoY29udGFpbmVyT3JTZWxlY3Rvcik7XHJcbiAgICAgICAgaWYgKGNvbnRhaW5lcikge1xyXG4gICAgICAgICAgICByZXR1cm4gbW91bnQoY29udGFpbmVyLCB0cnVlLCBjb250YWluZXIgaW5zdGFuY2VvZiBTVkdFbGVtZW50KTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIGFwcDtcclxufSk7XHJcbmZ1bmN0aW9uIGluamVjdE5hdGl2ZVRhZ0NoZWNrKGFwcCkge1xyXG4gICAgLy8gSW5qZWN0IGBpc05hdGl2ZVRhZ2BcclxuICAgIC8vIHRoaXMgaXMgdXNlZCBmb3IgY29tcG9uZW50IG5hbWUgdmFsaWRhdGlvbiAoZGV2IG9ubHkpXHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoYXBwLmNvbmZpZywgJ2lzTmF0aXZlVGFnJywge1xyXG4gICAgICAgIHZhbHVlOiAodGFnKSA9PiBpc0hUTUxUYWcodGFnKSB8fCBpc1NWR1RhZyh0YWcpLFxyXG4gICAgICAgIHdyaXRhYmxlOiBmYWxzZVxyXG4gICAgfSk7XHJcbn1cclxuLy8gZGV2IG9ubHlcclxuZnVuY3Rpb24gaW5qZWN0Q29tcGlsZXJPcHRpb25zQ2hlY2soYXBwKSB7XHJcbiAgICBpZiAoaXNSdW50aW1lT25seSgpKSB7XHJcbiAgICAgICAgY29uc3QgaXNDdXN0b21FbGVtZW50ID0gYXBwLmNvbmZpZy5pc0N1c3RvbUVsZW1lbnQ7XHJcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGFwcC5jb25maWcsICdpc0N1c3RvbUVsZW1lbnQnLCB7XHJcbiAgICAgICAgICAgIGdldCgpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBpc0N1c3RvbUVsZW1lbnQ7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHNldCgpIHtcclxuICAgICAgICAgICAgICAgIHdhcm4oYFRoZSBcXGBpc0N1c3RvbUVsZW1lbnRcXGAgY29uZmlnIG9wdGlvbiBpcyBkZXByZWNhdGVkLiBVc2UgYCArXHJcbiAgICAgICAgICAgICAgICAgICAgYFxcYGNvbXBpbGVyT3B0aW9ucy5pc0N1c3RvbUVsZW1lbnRcXGAgaW5zdGVhZC5gKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGNvbnN0IGNvbXBpbGVyT3B0aW9ucyA9IGFwcC5jb25maWcuY29tcGlsZXJPcHRpb25zO1xyXG4gICAgICAgIGNvbnN0IG1zZyA9IGBUaGUgXFxgY29tcGlsZXJPcHRpb25zXFxgIGNvbmZpZyBvcHRpb24gaXMgb25seSByZXNwZWN0ZWQgd2hlbiB1c2luZyBgICtcclxuICAgICAgICAgICAgYGEgYnVpbGQgb2YgVnVlLmpzIHRoYXQgaW5jbHVkZXMgdGhlIHJ1bnRpbWUgY29tcGlsZXIgKGFrYSBcImZ1bGwgYnVpbGRcIikuIGAgK1xyXG4gICAgICAgICAgICBgU2luY2UgeW91IGFyZSB1c2luZyB0aGUgcnVudGltZS1vbmx5IGJ1aWxkLCBcXGBjb21waWxlck9wdGlvbnNcXGAgYCArXHJcbiAgICAgICAgICAgIGBtdXN0IGJlIHBhc3NlZCB0byBcXGBAdnVlL2NvbXBpbGVyLWRvbVxcYCBpbiB0aGUgYnVpbGQgc2V0dXAgaW5zdGVhZC5cXG5gICtcclxuICAgICAgICAgICAgYC0gRm9yIHZ1ZS1sb2FkZXI6IHBhc3MgaXQgdmlhIHZ1ZS1sb2FkZXIncyBcXGBjb21waWxlck9wdGlvbnNcXGAgbG9hZGVyIG9wdGlvbi5cXG5gICtcclxuICAgICAgICAgICAgYC0gRm9yIHZ1ZS1jbGk6IHNlZSBodHRwczovL2NsaS52dWVqcy5vcmcvZ3VpZGUvd2VicGFjay5odG1sI21vZGlmeWluZy1vcHRpb25zLW9mLWEtbG9hZGVyXFxuYCArXHJcbiAgICAgICAgICAgIGAtIEZvciB2aXRlOiBwYXNzIGl0IHZpYSBAdml0ZWpzL3BsdWdpbi12dWUgb3B0aW9ucy4gU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS92aXRlanMvdml0ZS90cmVlL21haW4vcGFja2FnZXMvcGx1Z2luLXZ1ZSNleGFtcGxlLWZvci1wYXNzaW5nLW9wdGlvbnMtdG8tdnVlY29tcGlsZXItZG9tYDtcclxuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoYXBwLmNvbmZpZywgJ2NvbXBpbGVyT3B0aW9ucycsIHtcclxuICAgICAgICAgICAgZ2V0KCkge1xyXG4gICAgICAgICAgICAgICAgd2Fybihtc2cpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGNvbXBpbGVyT3B0aW9ucztcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgc2V0KCkge1xyXG4gICAgICAgICAgICAgICAgd2Fybihtc2cpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbn1cclxuZnVuY3Rpb24gbm9ybWFsaXplQ29udGFpbmVyKGNvbnRhaW5lcikge1xyXG4gICAgaWYgKGlzU3RyaW5nKGNvbnRhaW5lcikpIHtcclxuICAgICAgICBjb25zdCByZXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGNvbnRhaW5lcik7XHJcbiAgICAgICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSAmJiAhcmVzKSB7XHJcbiAgICAgICAgICAgIHdhcm4oYEZhaWxlZCB0byBtb3VudCBhcHA6IG1vdW50IHRhcmdldCBzZWxlY3RvciBcIiR7Y29udGFpbmVyfVwiIHJldHVybmVkIG51bGwuYCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiByZXM7XHJcbiAgICB9XHJcbiAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmXHJcbiAgICAgICAgd2luZG93LlNoYWRvd1Jvb3QgJiZcclxuICAgICAgICBjb250YWluZXIgaW5zdGFuY2VvZiB3aW5kb3cuU2hhZG93Um9vdCAmJlxyXG4gICAgICAgIGNvbnRhaW5lci5tb2RlID09PSAnY2xvc2VkJykge1xyXG4gICAgICAgIHdhcm4oYG1vdW50aW5nIG9uIGEgU2hhZG93Um9vdCB3aXRoIFxcYHttb2RlOiBcImNsb3NlZFwifVxcYCBtYXkgbGVhZCB0byB1bnByZWRpY3RhYmxlIGJ1Z3NgKTtcclxuICAgIH1cclxuICAgIHJldHVybiBjb250YWluZXI7XHJcbn1cclxubGV0IHNzckRpcmVjdGl2ZUluaXRpYWxpemVkID0gZmFsc2U7XHJcbi8qKlxyXG4gKiBAaW50ZXJuYWxcclxuICovXHJcbmNvbnN0IGluaXREaXJlY3RpdmVzRm9yU1NSID0gKCkgPT4ge1xyXG4gICAgICAgIGlmICghc3NyRGlyZWN0aXZlSW5pdGlhbGl6ZWQpIHtcclxuICAgICAgICAgICAgc3NyRGlyZWN0aXZlSW5pdGlhbGl6ZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICBpbml0Vk1vZGVsRm9yU1NSKCk7XHJcbiAgICAgICAgICAgIGluaXRWU2hvd0ZvclNTUigpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIDtcblxuZXhwb3J0IHsgVHJhbnNpdGlvbiwgVHJhbnNpdGlvbkdyb3VwLCBWdWVFbGVtZW50LCBjcmVhdGVBcHAsIGNyZWF0ZVNTUkFwcCwgZGVmaW5lQ3VzdG9tRWxlbWVudCwgZGVmaW5lU1NSQ3VzdG9tRWxlbWVudCwgaHlkcmF0ZSwgaW5pdERpcmVjdGl2ZXNGb3JTU1IsIHJlbmRlciwgdXNlQ3NzTW9kdWxlLCB1c2VDc3NWYXJzLCB2TW9kZWxDaGVja2JveCwgdk1vZGVsRHluYW1pYywgdk1vZGVsUmFkaW8sIHZNb2RlbFNlbGVjdCwgdk1vZGVsVGV4dCwgdlNob3csIHdpdGhLZXlzLCB3aXRoTW9kaWZpZXJzIH07XG4iLCJcbmNvbnNvbGUuYXNzZXJ0ID0gKGNvbmRpdGlvbiwgbXNnKSA9PiB7XG4gIGlmKCFjb25kaXRpb24pIHtcbiAgICAvLyBjb25zb2xlLmxvZyguLi5tc2cpO1xuICAgIGNvbnNvbGUubG9nKG5ldyBFcnJvcihtc2cpKTtcbiAgfVxufVxuXG5jb25zdCBubyA9IG8gPT4gbyAmJiBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KG8pKTsgLy8gbm9ybWFsaXplIChhbmQgZnJlZXplKSBvYmplY3QgZm9yIGNvbnNvbGUgb3V0cHV0IChjYW4ndCBoYW5kbGUgY3ljbGljIG9iamVjdHMpXG5cbmZ1bmN0aW9uIGxhc3QoYXJyKSB7XG4gIHJldHVybiBhcnJbYXJyLmxlbmd0aCAtIDFdO1xufVxuXG4vLyAtLS0tLS0tLS0tLS0tLS0tLSBpZCAtLS0tLS0tLS0tLS0tLS0tLS1cblxuY29uc3Qgc3ltYm9scyA9ICcwOTg3NjU0MzIxYWJjZGVmZ2hpamtsbW5vcHJzdHV2eXonO1xuXG5leHBvcnQgZnVuY3Rpb24gcmFuZG9tSUQobj00KSB7XG4gIGNvbnN0IGwgPSBzeW1ib2xzLmxlbmd0aDtcbiAgY29uc3QgayA9IE1hdGgucG93KGwsIG4pO1xuICAvLyBsZXQgciA9IHJhbmRJbnQoaylcbiAgbGV0IHIgPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBrKTtcbiAgY29uc3QgaWQgPSBbXTtcbiAgZm9yKGxldCBpPTA7IGk8bjsgaSs9MSkge1xuICAgIGlkLnB1c2goc3ltYm9sc1tyICUgbF0pXG4gICAgciA9IE1hdGguZmxvb3IociAvIGwpXG4gIH1cbiAgcmV0dXJuIGlkLmpvaW4oJycpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gbmV3SUQocGFyZW50SUQpIHtcbiAgcmV0dXJuIHJhbmRvbUlEKCk7XG59XG5cbi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8gRE9NIG9ubHkgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG5cbi8vIHBhcnNlIGdlbmVyYWwgRE9NIChleHRyYWN0IHBhcmFncmFwaHMgYW5kIHNwYW5zIHdpdGggZm9ybWF0dGluZ1xuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlVmFuaWxsYURPTShyb290Tm9kZSwgY3NzUnVsZXMpIHtcblxuICBsZXQgdW5kZXJsaW5lQ2xhc3NlcyA9IFtdO1xuXG4gIGlmKGNzc1J1bGVzKSB7XG4gICAgZm9yKGNvbnN0IHJ1bGUgb2YgY3NzUnVsZXMpIHtcbiAgICAgIGlmKHJ1bGUuc2VsZWN0b3JUZXh0LnNlYXJjaCgvWyM6XFxbXFxdPl0vZykgIT09IC0xKSB7XG4gICAgICAgIC8vIHNraXAgcnVsZXMgd2l0aCBpZCBzZWxlY3RvciBvciBvdGhlciBjb21wbGV4IHNlbGVjdG9yc1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cbiAgICAgIC8vIGNvbnNvbGUubG9nKHJ1bGUuY3NzVGV4dCk7XG4gICAgICAvLyBjb25zb2xlLmxvZyhydWxlLnNlbGVjdG9yVGV4dCk7XG4gICAgICAvLyBjb25zb2xlLmxvZyhydWxlLnN0eWxlLmNzc1RleHQpO1xuICAgICAgLy8gY29uc29sZS5sb2cocnVsZS5zdHlsZS50ZXh0RGVjb3JhdGlvbkxpbmUpO1xuICAgICAgLy8gY29uc29sZS5sb2cocnVsZSlcbiAgICAgIGlmKHJ1bGUuc3R5bGUudGV4dERlY29yYXRpb25MaW5lID09PSAndW5kZXJsaW5lJykge1xuICAgICAgICBjb25zdCBzZWxlY3RvcnMgPSBydWxlLnNlbGVjdG9yVGV4dC5zcGxpdCgnLCcpO1xuICAgICAgICBmb3IoY29uc3Qgc2VsZWN0b3Igb2Ygc2VsZWN0b3JzKSB7XG4gICAgICAgICAgY29uc3QgcGFydHMgPSBzZWxlY3Rvci5zcGxpdCgnOicpWzBdLnNwbGl0KCcuJyk7XG4gICAgICAgICAgY29uc3QgdGFnID0gcGFydHMuc2hpZnQoKTtcbiAgICAgICAgICB1bmRlcmxpbmVDbGFzc2VzID0gcGFydHM7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvLyBjb25zb2xlLmxvZygndW5kZXJsaW5lJywgdW5kZXJsaW5lQ2xhc3NlcylcblxuICBjb25zdCBzdGFjayA9IFtdO1xuICBjb25zdCBwYXJhZ3JhcGhzID0gW107XG4gIGxldCBmbXQgPSB7fTtcbiAgbGV0IHBhcmFncmFwaCA9IHVuZGVmaW5lZDtcblxuICBsZXQgbm9kZSA9IHJvb3ROb2RlOyAgLy8gcm9vdCBub2RlIGl0c2VsZiBpcyBub3QgXCJwYXJzZWRcIlxuXG4gIGxldCBuLCBpID0gMDtcbiAgd2hpbGUobm9kZSkge1xuICAgIGNvbnN0IGNoaWxkTm9kZXMgPSBub2RlLmNoaWxkTm9kZXM7XG4gICAgbiA9IGNoaWxkTm9kZXMubGVuZ3RoO1xuICAgIGZvcig7IGk8bjsgaSsrKSB7XG4gICAgICBjb25zdCBjaGlsZCA9IGNoaWxkTm9kZXNbaV07XG5cbiAgICAgIC8vIGNvbnNvbGUubG9nKCdDSElMRCcsIGNoaWxkLm5vZGVUeXBlLCBjaGlsZC5ub2RlTmFtZSwgY2hpbGQubm9kZVZhbHVlLCBjaGlsZC5jaGlsZE5vZGVzKTtcblxuICAgICAgaWYoY2hpbGQubm9kZVR5cGUgPT09IE5vZGUuVEVYVF9OT0RFICYmIGNoaWxkLm5vZGVWYWx1ZS5sZW5ndGggPiAwKSB7XG5cbiAgICAgICAgaWYoY2hpbGQubm9kZVZhbHVlLnRyaW0oKS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmKCFwYXJhZ3JhcGgpIHtcbiAgICAgICAgICAvLyBjb25zb2xlLmxvZygnTkVXIFBBUkEnKVxuICAgICAgICAgIHBhcmFncmFwaCA9IHsgc3BhbnM6IFtdLCBpZDogbmV3SUQoKSB9O1xuICAgICAgICAgIHBhcmFncmFwaHMucHVzaChwYXJhZ3JhcGgpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gY29uc29sZS5sb2coJ1NUT1JFIFNQQU4nLCB7IHRleHQ6IGNoaWxkLm5vZGVWYWx1ZSwgZm9ybWF0OiBPYmplY3QuYXNzaWduKHt9LCBmbXQpLCBpZDogbmV3SUQoKSB9KVxuICAgICAgICBwYXJhZ3JhcGguc3BhbnMucHVzaCh7IHRleHQ6IGNoaWxkLm5vZGVWYWx1ZSwgZm9ybWF0OiBPYmplY3QuYXNzaWduKHt9LCBmbXQpLCBpZDogbmV3SUQoKSB9KTtcblxuICAgICAgfSBlbHNlIGlmKGNoaWxkLm5vZGVUeXBlID09PSBOb2RlLkVMRU1FTlRfTk9ERSkge1xuXG4gICAgICAgIGNvbnN0IGNoaWxkRm10ID0gT2JqZWN0LmFzc2lnbih7fSwgZm10KTtcbiAgICAgICAgY29uc3Qgbm9kZUZtdCA9IE9iamVjdC5hc3NpZ24oe30sIGZtdCk7XG5cbiAgICAgICAgLy8gY2hlY2sgdGFnIG5hbWVcbiAgICAgICAgaWYoY2hpbGQubm9kZU5hbWUgPT09ICdCJyB8fCBjaGlsZC5ub2RlTmFtZSA9PT0gJ1NUUk9ORycpIHtcbiAgICAgICAgICBmbXQuYm9sZCA9IHRydWU7XG4gICAgICAgIH0gZWxzZSBpZihjaGlsZC5ub2RlTmFtZSA9PT0gJ0knIHx8IGNoaWxkLm5vZGVOYW1lID09PSAnRU0nKSB7XG4gICAgICAgICAgZm10Lml0YWxpYyA9IHRydWU7XG4gICAgICAgIH0gZWxzZSBpZihjaGlsZC5ub2RlTmFtZSA9PT0gJ1UnKSB7XG4gICAgICAgICAgZm10LnVuZGVybGluZSA9IHRydWU7XG4gICAgICAgIH0gZWxzZSBpZihjaGlsZC5ub2RlTmFtZSA9PT0gJ1NVUCcpIHtcbiAgICAgICAgICBmbXQuc3VwZXJzY3JpcHQgPSB0cnVlO1xuICAgICAgICB9IGVsc2UgaWYoY2hpbGQubm9kZU5hbWUgPT09ICdTVUInKSB7XG4gICAgICAgICAgZm10LnN1YnNjcmlwdCA9IHRydWU7XG4gICAgICAgIH0gZWxzZSBpZihjaGlsZC5ub2RlTmFtZSA9PT0gJ1NQQU4nKSB7XG4gICAgICAgICAgZm9yKGNvbnN0IGNscyBvZiBjaGlsZC5jbGFzc0xpc3QpIHtcbiAgICAgICAgICAgIGlmKHVuZGVybGluZUNsYXNzZXMuaW5kZXhPZihjbHMpICE9PSAtMSkge1xuICAgICAgICAgICAgICBmbXQudW5kZXJsaW5lID0gdHJ1ZTtcbiAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYoY2hpbGQubm9kZU5hbWUgPT09ICdQJykge1xuICAgICAgICAgIHBhcmFncmFwaCA9IHsgc3BhbnM6IFtdLCBpZDogbmV3SUQoKSB9O1xuICAgICAgICAgIHBhcmFncmFwaHMucHVzaChwYXJhZ3JhcGgpO1xuICAgICAgICB9IGVsc2UgaWYoY2hpbGQubm9kZU5hbWUgPT09ICdMSScpIHtcbiAgICAgICAgICBwYXJhZ3JhcGggPSB7IHNwYW5zOiBbXSwgaWQ6IG5ld0lEKCksIGJ1bGxldDogdHJ1ZSB9O1xuICAgICAgICAgIHBhcmFncmFwaHMucHVzaChwYXJhZ3JhcGgpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gZGVhbCB3aXRoIGNoaWxkcmVuXG4gICAgICAgIGlmKG5vZGUuY2hpbGROb2RlcyAmJiBub2RlLmNoaWxkTm9kZXMubGVuZ3RoID4gMCkge1xuICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCdQVVNIJywgaSwgbm9kZSwgbm9kZUZtdCwgJ2NvbnRpbnVlIHdpdGgnLCBPYmplY3QuYXNzaWduKHt9LCBmbXQpKVxuICAgICAgICAgIHN0YWNrLnB1c2goeyBub2RlLCBpOiBpKzEsIGZtdDogT2JqZWN0LmFzc2lnbih7fSwgbm9kZUZtdCkgfSlcbiAgICAgICAgICBpID0gMDtcbiAgICAgICAgICBub2RlID0gY2hpbGQ7XG4gICAgICAgICAgbiA9IG5vZGUuY2hpbGROb2Rlcy5sZW5ndGg7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgaWYoaSA+PSBuKSB7XG4gICAgICBpZihzdGFjay5sZW5ndGggPiAwKSB7XG4gICAgICAgIGlmKG5vZGUubm9kZU5hbWUgPT09ICdQJyB8fCBub2RlLm5vZGVOYW1lID09PSAnTEknKSB7XG4gICAgICAgICAgcGFyYWdyYXBoID0gdW5kZWZpbmVkO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGl0ZW0gPSBzdGFjay5wb3AoKTtcbiAgICAgICAgLy8gY29uc29sZS5sb2coJ1BPUCcsIGl0ZW0pXG4gICAgICAgIGkgPSBpdGVtLmk7XG4gICAgICAgIG5vZGUgPSBpdGVtLm5vZGU7XG4gICAgICAgIGZtdCA9IGl0ZW0uZm10O1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbm9kZSA9IG51bGw7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiBwYXJhZ3JhcGhzO1xufVxuXG4vLyBwYXJzZSBlZGl0b3IgRE9NXG5leHBvcnQgZnVuY3Rpb24gcGFyc2VET00ocm9vdE5vZGUpIHtcblxuXG4gIGNvbnN0IGF0dHJWYWx1ZSA9IChhdHRyLCB0cmFuc2Zvcm0pID0+IHtcbiAgICBsZXQgdmFsdWUgPSBhdHRyO1xuICAgIGlmKHZhbHVlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIHZhbHVlID0gdmFsdWUubm9kZVZhbHVlO1xuICAgIH1cbiAgICBpZih2YWx1ZSAhPT0gdW5kZWZpbmVkICYmIHRyYW5zZm9ybSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICB2YWx1ZSA9IHRyYW5zZm9ybSh2YWx1ZSk7XG4gICAgfVxuICAgIHJldHVybiB2YWx1ZVxuICB9O1xuXG4gIGNvbnN0IHBhcmFncmFwaHMgPSBbXTtcblxuICAvLyBwbGFpbnRleHQxPGJyLz5wbGFpbnRleHQyPGRpdiBwYXJhPnBhcmFoZWFkPHNwYW4+c3Bhbjwvc3Bhbj5wYXJhZm9vdDwvZGl2IHBhcmE+cGxhaW50ZXh0M1xuICAvLyBtYXBwb2phcyB1elxuICAvLyBbXG4gIC8vICA8cGFyYT5wbGFpbnRleHQxPC9wYXJhPlxuICAvLyAgPHBhcmE+cGxhaW50ZXh0MjwvcGFyYT5cbiAgLy8gIDxwYXJhPjxzcGFuPnBhcmFoZWFkc3BhbnBhcmFmb290PC9zcGFuPjxwYXJhPlxuICAvLyAgPHBhcmE+cGxhaW50ZXh0MzwvcGFyYT5cbiAgLy8gXVxuXG4gIC8vIGNvbnNvbGUubG9nKCdIVE1MJywgcm9vdE5vZGUuaW5uZXJIVE1MKTtcblxuICBsZXQgbGFzdFBsYWludGV4dFBhcmEgPSBmYWxzZTtcbiAgbGV0IGZtdCA9IHt9O1xuXG4gIGZvcihjb25zdCBub2RlIG9mIHJvb3ROb2RlLmNoaWxkTm9kZXMpIHtcbiAgICBpZihub2RlLm5vZGVUeXBlID09PSBOb2RlLkVMRU1FTlRfTk9ERSkge1xuICAgICAgaWYobm9kZS5ub2RlTmFtZSA9PT0gJ0RJVicgJiYgbm9kZS5hdHRyaWJ1dGVzWydkYXRhLWlkJ10pIHtcbiAgICAgICAgLy8gY29uc29sZS5sb2coJ2RpdicsIG5vZGUpO1xuICAgICAgICBsYXN0UGxhaW50ZXh0UGFyYSA9IHRydWU7XG4gICAgICAgIGZtdCA9IHt9O1xuICAgICAgICBjb25zdCBpZCA9IG5vZGUuYXR0cmlidXRlc1snZGF0YS1pZCddLm5vZGVWYWx1ZTtcbiAgICAgICAgY29uc3Qgc3BhbnMgPSBbXTtcbiAgICAgICAgY29uc3QgcGFyYWdyYXBoID0geyBpZCwgc3BhbnMgfTtcbiAgICAgICAgcGFyYWdyYXBocy5wdXNoKHBhcmFncmFwaCk7XG4gICAgICAgIGxldCBwcmVwZW5kVGV4dDtcbiAgICAgICAgLy8gYWRkKG5vZGUuaW5uZXJUZXh0LCB1aWQpO1xuICAgICAgICAvLyBwYXJzZSBzcGFuc1xuICAgICAgICBjb25zdCBwYXJhZ3JhcGhOb2RlID0gbm9kZTtcbiAgICAgICAge1xuICAgICAgICAgIGZvcihjb25zdCBub2RlIG9mIHBhcmFncmFwaE5vZGUuY2hpbGROb2Rlcykge1xuICAgICAgICAgICAgaWYobm9kZS5ub2RlVHlwZSA9PT0gTm9kZS5FTEVNRU5UX05PREUpIHtcbiAgICAgICAgICAgICAgaWYobm9kZS5ub2RlTmFtZSA9PT0gJ1NQQU4nICYmIG5vZGUuYXR0cmlidXRlc1snZGF0YS1pZCddKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgaWQgPSBub2RlLmF0dHJpYnV0ZXNbJ2RhdGEtaWQnXS5ub2RlVmFsdWU7XG4gICAgICAgICAgICAgICAgbGV0IHRleHQgPSBub2RlLmlubmVyVGV4dDtcbiAgICAgICAgICAgICAgICBpZihwcmVwZW5kVGV4dCAmJiBwcmVwZW5kVGV4dC5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICB0ZXh0ID0gcHJlcGVuZFRleHQgKyB0ZXh0O1xuICAgICAgICAgICAgICAgICAgcHJlcGVuZFRleHQgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNvbnN0IHRpbWUgPSBhdHRyVmFsdWUobm9kZS5hdHRyaWJ1dGVzWydkYXRhLXRpbWUnXSwgcGFyc2VJbnQpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGR1cmF0aW9uID0gYXR0clZhbHVlKG5vZGUuYXR0cmlidXRlc1snZGF0YS1kdXJhdGlvbiddLCBwYXJzZUludCk7XG4gICAgICAgICAgICAgICAgY29uc3QgY29uZmlkZW5jZSA9IGF0dHJWYWx1ZShub2RlLmF0dHJpYnV0ZXNbJ2RhdGEtY29uZmlkZW5jZSddLCBwYXJzZUZsb2F0KTtcbiAgICAgICAgICAgICAgICBzcGFucy5wdXNoKHsgaWQsIHRleHQsIHRpbWUsIGR1cmF0aW9uLCBjb25maWRlbmNlIH0pO1xuICAgICAgICAgICAgICAgIC8vIGFkZChub2RlLmlubmVyVGV4dCwgdWlkKTtcbiAgICAgICAgICAgICAgICAvLyBwYXJzZSBzcGFuc1xuXG4gICAgICAgICAgICAgIH0gZWxzZSBpZihub2RlLm5vZGVOYW1lID09PSAnQlInKSB7XG4gICAgICAgICAgICAgICAgLy8gYWRkKCdcXG4nKTtcbiAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyBhZGQobm9kZS5pbm5lclRleHQpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2UgaWYobm9kZS5ub2RlVHlwZSA9PT0gTm9kZS5URVhUX05PREUpIHtcbiAgICAgICAgICAgICAgLy8gYWRkKG5vZGUubm9kZVZhbHVlKTtcbiAgICAgICAgICAgICAgLy8gd2UgaGF2ZSBwbGFpbiB0ZXh0LCBhcHBlbmQgaXQgc29tZXdoZXJlXG4gICAgICAgICAgICAgIGlmKG5vZGUubm9kZVZhbHVlLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICBpZihzcGFucy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICBzcGFuc1tzcGFucy5sZW5ndGggLSAxXS50ZXh0ICs9IG5vZGUubm9kZVZhbHVlLmxlbmd0aDtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgcHJlcGVuZFRleHQgPSBub2RlLm5vZGVWYWx1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJ1RFWFQgTk9ERScsIG5vZGUubm9kZVZhbHVlLCBub2RlLm5vZGVWYWx1ZS5sZW5ndGgpXG4gICAgICAgICAgICAgIG5vZGUubm9kZVZhbHVlID0gJyc7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYoc3BhbnMubGVuZ3RoID09PSAwICYmIHByZXBlbmRUZXh0ICYmIHByZXBlbmRUZXh0Lmxlbmd0aCA+IDApIHtcbiAgICAgICAgICBzcGFucy5wdXNoKG5ld1NwYW4ocHJlcGVuZFRleHQpKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmKG5vZGUubm9kZU5hbWUgPT09ICdCUicpIHtcbiAgICAgICAgY29uc29sZS5sb2coJ2JyJywgbm9kZSk7XG4gICAgICAgIGxhc3RQbGFpbnRleHRQYXJhID0gZmFsc2U7XG4gICAgICAgIG5vZGUucmVtb3ZlKCk7XG4gICAgICAgIC8vIGFkZCgnXFxuJyk7XG4gICAgICAvLyB9IGVsc2UgaWYobm9kZS5ub2RlTmFtZSA9PT0gJ1NUUk9ORycgfHwgbm9kZS5ub2RlTmFtZSA9PT0gJ0InKSB7XG4gICAgICAvLyAgIGZtdC5ib2xkID0gdHJ1ZTtcbiAgICAgIC8vIH0gZWxzZSBpZihub2RlLm5vZGVOYW1lID09PSAnRU0nIHx8IG5vZGUubm9kZU5hbWUgPT09ICdJJykge1xuICAgICAgLy8gICBmbXQuaXRhbGljID0gdHJ1ZTtcbiAgICAgIC8vIH0gZWxzZSBpZihub2RlLm5vZGVOYW1lID09PSAnVScpIHtcbiAgICAgIC8vICAgZm10LnVuZGVybGluZSA9IHRydWU7XG4gICAgICAvLyB9IGVsc2UgaWYobm9kZS5ub2RlTmFtZSA9PT0gJ1NVQicpIHtcbiAgICAgIC8vICAgZm10LnN1YnNjcmlwdCA9IHRydWU7XG4gICAgICAvLyB9IGVsc2UgaWYobm9kZS5ub2RlTmFtZSA9PT0gJ1NVUCcpIHtcbiAgICAgIC8vICAgZm10LnN1cGVyc2NyaXB0ID0gdHJ1ZTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIGNvbnNvbGUubG9nKCdvdGhlciBlbGVtZW50Jywgbm9kZSk7XG4gICAgICAgIG5vZGUucmVtb3ZlKCk7XG4gICAgICAgIC8vIFRPRE86IG1hcCBmb3JtYXR0aW5nXG4gICAgICAgIC8vIGFkZChub2RlLmlubmVyVGV4dCk7XG4gICAgICB9XG4gICAgfSBlbHNlIGlmKG5vZGUubm9kZVR5cGUgPT09IE5vZGUuVEVYVF9OT0RFICYmIG5vZGUubm9kZVZhbHVlLmxlbmd0aCA+IDApIHtcbiAgICAgIC8vIGNvbnNvbGUubG9nKCd0ZXh0IG5vZGUnLCBub2RlLCBgPiR7bm9kZS5ub2RlVmFsdWV9PGApO1xuICAgICAgbGV0IHBhcmFncmFwaCA9IHBhcmFncmFwaHMubGVuZ3RoID4gMCAmJiBsYXN0UGxhaW50ZXh0UGFyYSAmJiBwYXJhZ3JhcGhzW3BhcmFncmFwaHMubGVuZ3RoIC0gMV07XG4gICAgICBpZighcGFyYWdyYXBoKSB7XG4gICAgICAgIHBhcmFncmFwaCA9IHsgaWQ6IG5ld0lEKCksIHNwYW5zOiBbXSB9O1xuICAgICAgICBwYXJhZ3JhcGhzLnB1c2gocGFyYWdyYXBoKTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IHNwYW5zID0gcGFyYWdyYXBoLnNwYW5zO1xuICAgICAgc3BhbnMucHVzaCh7IGlkOiBuZXdJRCgpLCB0ZXh0OiBub2RlLm5vZGVWYWx1ZSB9KTtcbiAgICAgICAgbm9kZS5yZW1vdmUoKTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gcGFyYWdyYXBocztcbn1cblxuZnVuY3Rpb24gaXNET01TZWxlY3Rpb25CYWNrd2FyZHMoc2VsZWN0aW9uKSB7XG4gIGlmKHNlbGVjdGlvbi5pc0NvbGxhcHNlZCkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICBpZihzZWxlY3Rpb24uYW5jaG9yTm9kZSA9PT0gc2VsZWN0aW9uLmZvY3VzTm9kZSkge1xuICAgIGlmKHNlbGVjdGlvbi5hbmNob3JPZmZzZXQgPiBzZWxlY3Rpb24uZm9jdXNPZmZzZXQpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgLy8gZ2V0IGxpc3Qgb2YgcGFyZW50cyBzdGFydGluZyBmcm9tIGFuY2hvck5vZGVcbiAgY29uc3QgcGFyZW50Tm9kZXMgPSBbc2VsZWN0aW9uLmFuY2hvck5vZGVdO1xuICBsZXQgbm9kZSA9IHNlbGVjdGlvbi5hbmNob3JOb2RlO1xuICB3aGlsZShub2RlICYmIG5vZGUgIT0gZG9jdW1lbnQuYm9keSkge1xuICAgIG5vZGUgPSBub2RlLnBhcmVudE5vZGU7XG4gICAgcGFyZW50Tm9kZXMucHVzaChub2RlKTtcbiAgfVxuICAvLyBpdGVyYXRlIGZyb20gZm9jdXNOb2RlIHRvIHBhcmVudCBub2Rlc1xuICBub2RlID0gc2VsZWN0aW9uLmZvY3VzTm9kZTtcbiAgd2hpbGUobm9kZSAmJiBub2RlICE9IGRvY3VtZW50LmJvZHkpIHtcbiAgICBjb25zdCBmb2N1c05vZGUgPSBub2RlO1xuICAgIG5vZGUgPSBub2RlLnBhcmVudE5vZGU7XG4gICAgbGV0IGFuY2hvck5vZGU7XG4gICAgLy8gY2hlY2sgZWFjaCBub2RlIG1hdGNoIGluc2lkZSBwcmV2aW91c2x5IGJ1aWx0IHBhcmVudCBub2RlIGxpc3RcbiAgICBmb3IoY29uc3QgcGFyZW50IG9mIHBhcmVudE5vZGVzKSB7XG4gICAgICBpZihub2RlID09PSBwYXJlbnQpIHtcbiAgICAgICAgLy8gY29uc29sZS5sb2coJ1BBUkVOVDonLCBwYXJlbnQsICdBTkNIT1I6JywgYW5jaG9yTm9kZSwgJ0ZPQ1VTOicsIGZvY3VzTm9kZSlcbiAgICAgICAgLy8gd2UgaGF2ZSBjb21tYW5kIHBhcmVudCBub2RlLCBsZXQncyBjaGVjayB3aGljaCBjaGlsZCBub2RlIGNvbWVzIGZpcnN0OiBmcm9tIGFuY2hvciBicmFuY2ggb3IgZm9jdXMgYnJhbmNoXG4gICAgICAgIGZvcihjb25zdCBjaGlsZE5vZGUgb2YgcGFyZW50LmNoaWxkTm9kZXMpIHtcbiAgICAgICAgICBpZihjaGlsZE5vZGUgPT09IGFuY2hvck5vZGUpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICB9IGVsc2UgaWYoY2hpbGROb2RlID09PSBmb2N1c05vZGUpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgYW5jaG9yTm9kZSA9IHBhcmVudDtcbiAgICB9XG4gIH1cbiAgLy8gTk9URTogYWx0ZXJuYXRpdmUgYXBwcm9hY2ggaW52b2x2ZXMgY2hlY2tpbmcgaWYgc29tZSBwb2ludCBpcyBpbnNpZGUgdGhlIHJhbmdlLCBvciBvdXRzaWRlIHRvIHRoZSBsZWZ0IG9yIHJpZ2h0XG4gIC8vIGlmKHNlbGVjdGlvbi5yYW5nZUNvdW50ID09IDApIHtcbiAgLy8gICByZXR1cm4gZmFsc2U7XG4gIC8vIH1cbiAgLy8gY29uc3QgcmFuZ2UgPSBzZWxlY3Rpb24uZ2V0UmFuZ2VBdCgwKTtcbiAgLy8gcmFuZ2UuY29tcGFyZVBvaW50KG5vZGUsIG9mZnNldCkgPT4gLTEsIDAsIDFcbn1cblxuXG5leHBvcnQgZnVuY3Rpb24gbm9ybWFsaXplZERPTVNlbGVjdGlvbihzZWxlY3Rpb24pIHtcbiAgaWYoIXNlbGVjdGlvbikge1xuICAgIHNlbGVjdGlvbiA9IGRvY3VtZW50LmdldFNlbGVjdGlvbigpO1xuICB9XG4gIGlmKCEoc2VsZWN0aW9uIGluc3RhbmNlb2YgU2VsZWN0aW9uKSkge1xuICAgIHJldHVybiBzZWxlY3Rpb247XG4gIH1cbiAgaWYoc2VsZWN0aW9uLmlzQ29sbGFwc2VkKSB7XG4gICAgY29uc3Qgc3RhcnROb2RlID0gc2VsZWN0aW9uLmFuY2hvck5vZGU7XG4gICAgY29uc3Qgc3RhcnRPZmZzZXQgPSBzZWxlY3Rpb24uYW5jaG9yT2Zmc2V0O1xuICAgIGNvbnN0IHN0YXJ0ID0geyBub2RlOiBzdGFydE5vZGUsIG9mZnNldDogc3RhcnRPZmZzZXQgfTtcbiAgICAvLyByZXR1cm4geyBzdGFydE5vZGUsIHN0YXJ0T2Zmc2V0LCBlbmROb2RlOiBzdGFydE5vZGUsIGVuZE9mZnNldDogc3RhcnRPZmZzZXQsIGJhY2t3YXJkczogZmFsc2UsIGNvbGxhcHNlZDogdHJ1ZSB9O1xuICAgIHJldHVybiB7IHN0YXJ0LCBlbmQ6IHN0YXJ0LCBiYWNrd2FyZHM6IGZhbHNlLCBjb2xsYXBzZWQ6IHRydWUsIHNlbGVjdGlvbiB9O1xuICB9XG4gIGNvbnN0IGJhY2t3YXJkcyA9IGlzRE9NU2VsZWN0aW9uQmFja3dhcmRzKHNlbGVjdGlvbik7XG4gIGNvbnN0IHN0YXJ0Tm9kZSA9IGJhY2t3YXJkcyA/IHNlbGVjdGlvbi5mb2N1c05vZGUgOiBzZWxlY3Rpb24uYW5jaG9yTm9kZTtcbiAgY29uc3Qgc3RhcnRPZmZzZXQgPSBiYWNrd2FyZHMgPyBzZWxlY3Rpb24uZm9jdXNPZmZzZXQgOiBzZWxlY3Rpb24uYW5jaG9yT2Zmc2V0O1xuICBjb25zdCBlbmROb2RlID0gYmFja3dhcmRzID8gc2VsZWN0aW9uLmFuY2hvck5vZGUgOiBzZWxlY3Rpb24uZm9jdXNOb2RlO1xuICBjb25zdCBlbmRPZmZzZXQgPSBiYWNrd2FyZHMgPyBzZWxlY3Rpb24uYW5jaG9yT2Zmc2V0IDogc2VsZWN0aW9uLmZvY3VzT2Zmc2V0O1xuICAvLyByZXR1cm4geyBzdGFydE5vZGUsIHN0YXJ0T2Zmc2V0LCBlbmROb2RlLCBlbmRPZmZzZXQsIGJhY2t3YXJkcywgY29sbGFwc2VkOiBmYWxzZSB9O1xuICByZXR1cm4geyBzdGFydDogeyBub2RlOiBzdGFydE5vZGUsIG9mZnNldDogc3RhcnRPZmZzZXQgfSwgZW5kOiB7IG5vZGU6IGVuZE5vZGUsIG9mZnNldDogZW5kT2Zmc2V0IH0sIGJhY2t3YXJkcywgY29sbGFwc2VkOiBmYWxzZSwgc2VsZWN0aW9uIH07XG59XG5cbi8vIERPTSB0ZXh0IHBvaW50ZXIgLT4gdGV4dCBub2RlICsgb2Zmc2V0XG5cbi8vIGZ1bmN0aW9uIG5vcm1hbGl6ZVBvaW50ZXIocG9pbnRlcikge1xuLy8gICAvLyBleHBlY3RlZCBhdHRyaWJ1dGVzOiBub2RlLCBvZmZzZXQsIHBhcmFncmFwaElELCBzcGFuSUQsIHBhcmFncmFwaEluZGV4LCBzcGFuSW5kZXhcbi8vIH1cblxuLy8gZ2V0IG5vZGUgd2l0aCBzcGVjaWZpZWQgdGFnIGFuZCBleHRyYWN0IHNwZWNpZmllZCBkYXRhLSBhdHRyaWJ1dGVzXG5leHBvcnQgZnVuY3Rpb24gZ2V0RE9NRWxlbWVudERhdGFBdHRyaWJ1dGVzKG5vZGUsIHRhZywgcmVzb2x2ZUF0dHJzID0gW10pIHtcbiAgaWYobm9kZSAmJiBub2RlLm5vZGVUeXBlID09IE5vZGUuVEVYVF9OT0RFKSB7XG4gICAgbm9kZSA9IG5vZGUucGFyZW50Tm9kZTtcbiAgfVxuICBpZihub2RlICYmIG5vZGUubm9kZVR5cGUgPT0gTm9kZS5FTEVNRU5UX05PREUpIHtcbiAgICBpZighdGFnIHx8IG5vZGUubm9kZU5hbWUgPT09IHRhZykge1xuICAgICAgY29uc3QgYXR0cnMgPSB7fTtcbiAgICAgIGZvcihjb25zdCBuYW1lIG9mIHJlc29sdmVBdHRycykge1xuICAgICAgICBjb25zdCBhdHRyID0gbm9kZS5hdHRyaWJ1dGVzWydkYXRhLScgKyBuYW1lXTtcbiAgICAgICAgaWYoYXR0cikge1xuICAgICAgICAgIGF0dHJzW25hbWVdID0gYXR0ci5ub2RlVmFsdWU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiB7IG5vZGUsIGF0dHJzIH07XG4gICAgfVxuICB9XG4gIHJldHVybiB7fTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGRhdGFET01Ob2Rlc0F0Tm9kZShub2RlKSB7XG4gIGxldCBpbnB1dE5vZGUgPSBub2RlO1xuICBsZXQgc3BhbkF0dHJzLCBwYXJhZ3JhcGhBdHRycywgc3Bhbk5vZGUsIHBhcmFncmFwaE5vZGU7XG4gIHdoaWxlKGlucHV0Tm9kZSAmJiAhcGFyYWdyYXBoQXR0cnMpIHtcbiAgICBjb25zdCB7IG5vZGUsIGF0dHJzIH0gPSBnZXRET01FbGVtZW50RGF0YUF0dHJpYnV0ZXMoaW5wdXROb2RlLCB1bmRlZmluZWQsIFsnaWQnLCAndGltZScsICdkdXJhdGlvbicsICdjb25maWRlbmNlJ10pOyAgLy8gdHJ5IHNwYW4gbm9kZVxuICAgIGlmKCFwYXJhZ3JhcGhBdHRycyAmJiAhc3BhbkF0dHJzICYmIG5vZGUgJiYgbm9kZS5ub2RlTmFtZSA9PT0gJ1NQQU4nICYmIGF0dHJzLmlkKSB7XG4gICAgICBzcGFuQXR0cnMgPSBhdHRycztcbiAgICAgIHNwYW5Ob2RlID0gbm9kZTtcbiAgICB9IGVsc2UgaWYoIXBhcmFncmFwaEF0dHJzICYmIG5vZGUgJiYgbm9kZS5ub2RlTmFtZSA9PT0gJ0RJVicgJiYgYXR0cnMuaWQpIHtcbiAgICAgIHBhcmFncmFwaEF0dHJzID0gYXR0cnM7XG4gICAgICBwYXJhZ3JhcGhOb2RlID0gbm9kZTtcbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgICBpZihub2RlKSB7XG4gICAgICBpbnB1dE5vZGUgPSBub2RlO1xuICAgIH1cbiAgICBpbnB1dE5vZGUgPSBpbnB1dE5vZGUucGFyZW50Tm9kZTtcbiAgfVxuICByZXR1cm4geyBzcGFuTm9kZSwgc3BhbkF0dHJzLCBwYXJhZ3JhcGhOb2RlLCBwYXJhZ3JhcGhBdHRycyB9O1xufVxuXG5mdW5jdGlvbiB0ZXh0Tm9kZShub2RlKSB7XG4gIGlmKG5vZGUubm9kZVR5cGUgPT09IE5vZGUuRUxFTUVOVF9OT0RFKSB7XG4gICAgaWYobm9kZS5jaGlsZE5vZGVzLmxlbmd0aCA+IDApIHtcbiAgICAgIHJldHVybiBub2RlLmNoaWxkTm9kZXNbMF07XG4gICAgfVxuICAgIHJldHVybiBub2RlO1xuICB9IGVsc2UgaWYobm9kZS5ub2RlVHlwZSA9PT0gTm9kZS5URVhUX05PREUpIHtcbiAgICByZXR1cm4gbm9kZTtcbiAgfVxuICByZXR1cm47XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBkYXRhUG9pbnRlckRPTU5vZGUocG9pbnRlciwgY29udGFpbmVyTm9kZSkge1xuICBjb25zdCBub2RlID0gY29udGFpbmVyTm9kZS5xdWVyeVNlbGVjdG9yKGBkaXZbZGF0YS1pZD1cIiR7cG9pbnRlci5wYXJhZ3JhcGhJRH1cIl1gICsgKHBvaW50ZXIuc3BhbklEID8gYCA+IHNwYW5bZGF0YS1pZD1cIiR7cG9pbnRlci5zcGFuSUR9XCJdYCA6ICcnKSApO1xuICBwb2ludGVyLm5vZGUgPSBub2RlO1xuICAvLyBpZihkb1NlbGVjdFRleHQgJiYgZWxlbWVudC5jaGlsZE5vZGVzLmxlbmd0aCA+IDApIHtcbiAgLy8gICByZXR1cm4gZWxlbWVudC5jaGlsZE5vZGVzWzBdO1xuICAvLyB9XG4gIHJldHVybiBwb2ludGVyO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gcmVzdG9yZURPTVNlbGVjdGlvbihjb250YWluZXJOb2RlLCBzdGFydCwgZW5kKSB7XG5cbiAgY29uc3Qgc3RhcnROb2RlID0gdGV4dE5vZGUoc3RhcnQubm9kZSB8fCBkYXRhUG9pbnRlckRPTU5vZGUoc3RhcnQsIGNvbnRhaW5lck5vZGUpLm5vZGUpO1xuICBjb25zdCBlbmROb2RlID0gZW5kICYmIHRleHROb2RlKGVuZC5ub2RlIHx8IGRhdGFQb2ludGVyRE9NTm9kZShlbmQsIGNvbnRhaW5lck5vZGUpLm5vZGUpO1xuXG4gIC8vIGNvbnNvbGUubG9nKCdzZWxlY3Qgc3RhcnQgZWxlbWVudCcsIHN0YXJ0ZWxlbWVudCwgJ3N0YXJ0b2Zmc2V0Jywgc3RhcnQub2Zmc2V0LCAnZW5kIGVsZW1lbnQnLCBlbmRlbGVtZW50LCAnZW5kb2ZmZnNldCcsIGVuZCAmJiBlbmQub2Zmc2V0KTtcblxuICBjb25zdCBzZWxlY3Rpb24gPSBkb2N1bWVudC5nZXRTZWxlY3Rpb24oKTtcbiAgc2VsZWN0aW9uLmVtcHR5KCk7XG4gIGNvbnN0IHJhbmdlID0gbmV3IFJhbmdlKCk7XG4gIHJhbmdlLnNldFN0YXJ0KHN0YXJ0Tm9kZSwgc3RhcnQub2Zmc2V0KTtcbiAgaWYoIWVuZCkge1xuICAgIC8vIHJhbmdlLnNldEVuZChzdGFydE5vZGUsIHN0YXJ0Lm9mZnNldCk7XG4gICAgcmFuZ2UuY29sbGFwc2UodHJ1ZSk7XG4gIH0gZWxzZSB7XG4gICAgcmFuZ2Uuc2V0RW5kKGVuZE5vZGUsIGVuZC5vZmZzZXQpO1xuICB9XG4gIHNlbGVjdGlvbi5hZGRSYW5nZShyYW5nZSk7XG59XG5cbi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vIGRhdGEgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuXG5mdW5jdGlvbiBkYXRhUGFyYWdyYXBocyhkYXRhKSB7XG4gIHJldHVybiBkYXRhO1xufVxuXG5mdW5jdGlvbiBwYXJhZ3JhcGhTcGFucyhwYXJhZ3JhcGgpIHtcbiAgcmV0dXJuIHBhcmFncmFwaC5zcGFucztcbn1cblxuZnVuY3Rpb24gc2V0UGFyYWdyYXBoU3BhbnMocGFyYWdyYXBoLCBzcGFucykge1xuICByZXR1cm4gcGFyYWdyYXBoLnNwYW5zID0gc3BhbnM7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBuZXdTcGFuKHRleHQgPSAnJykge1xuICByZXR1cm4geyBpZDogbmV3SUQoKSwgdGV4dCwgZm9ybWF0OiB7fSB9O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gbmV3UGFyYWdyYXBoKHNwYW5zKSB7XG4gIHJldHVybiB7IGlkOiBuZXdJRCgpLCBzcGFuczogdHlwZW9mIHNwYW5zID09PSAnbnVtYmVyJyA/IEFycmF5LmZyb20oQXJyYXkoc3BhbnMpLCAoKSA9PiBuZXdTcGFuKCkpIDogKHNwYW5zIHx8IFtdKSB9O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gY29weVNwYW4oc3BhbiwgLi4ubmV3UHJvcHMpIHtcbiAgcmV0dXJuIE9iamVjdC5hc3NpZ24oe30sIHNwYW4sIHsgZm9ybWF0OiBPYmplY3QuYXNzaWduKHt9LCBzcGFuLmZvcm1hdCB8fCB7fSkgfSwgLi4ubmV3UHJvcHMpXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBzcGxpdFNwYW4oc3Bhbiwgb2Zmc2V0LCB7IG5ld2lkLCBzcGxpdFRpbWUgfSA9IHsgbmV3aWQ6IG5ld0lELCBzcGxpdFRpbWU6IGZhbHNlIH0pIHtcbiAgY29uc3QgbGVmdCA9IHsgaWQ6IG5ld2lkKHNwYW4uaWQpLCB0ZXh0OiBzcGFuLnRleHQuc3Vic3RyKDAsIG9mZnNldCksIGZvcm1hdDogT2JqZWN0LmFzc2lnbih7fSwgc3Bhbi5mb3JtYXQpIC8qc3Bhbi5pZCArICctbCcqLyB9OyAvLyBnZW5lcmF0ZSBuZXcgcmFuZG9tIGlkXG4gIGNvbnN0IHJpZ2h0ID0geyBpZDogbmV3aWQoc3Bhbi5pZCksIHRleHQ6IHNwYW4udGV4dC5zdWJzdHIob2Zmc2V0KSwgZm9ybWF0OiBPYmplY3QuYXNzaWduKHt9LCBzcGFuLmZvcm1hdCkgLypzcGFuLmlkICsgJy1yJyovIH07IC8vIGdlbmVyYXRlIG5ldyByYW5kb20gaWRcbiAgaWYoc3BsaXRUaW1lKSB7XG4gICAgY29uc3QgdG90YWwgPSBzcGFuLnRleHQucmVwbGFjZSgvXFxzKi9nLCAnJykubGVuZ3RoO1xuICAgIGlmKHNwYW4uZHVyYXRpb24gPiAwKSB7XG4gICAgICBsZWZ0LmR1cmF0aW9uID0gbGVmdC50ZXh0LnJlcGxhY2UoL1xccyovZywgJycpLmxlbmd0aCAqIHNwYW4uZHVyYXRpb24gLyB0b3RhbDtcbiAgICAgIHJpZ2h0LmR1cmF0aW9uID0gcmlnaHQudGV4dC5yZXBsYWNlKC9cXHMqL2csICcnKS5sZW5ndGggKiBzcGFuLmR1cmF0aW9uIC8gdG90YWw7XG4gICAgICBpZihzcGFuLnRpbWUgPj0gMCkge1xuICAgICAgICBsZWZ0LnRpbWUgPSBzcGFuLnRpbWU7XG4gICAgICAgIHJpZ2h0LnRpbWUgPSBzcGFuLnRpbWUgKyBsZWZ0LmR1cmF0aW9uO1xuICAgICAgICAvLyByaWdodC50aW1lID0gc3Bhbi50aW1lICsgcGFyc2VJbnQobGVmdC5kdXJhdGlvbiAqIDEwMDApO1xuICAgICAgfVxuICAgICAgLy8gVE9ETzogbWF5IG5lZWQgdG8ga2VlcCBvcmlnaW5hbCB0aW1lL2R1cmF0aW9uIGFzIGJhY2t1cCB2YWx1ZXNcbiAgICB9XG4gICAgLy8gVE9ETzogZm4gdG8gZml4IGdyb3Vwc1xuICB9IGVsc2Uge1xuICAgIGxlZnQudGltZSA9IHNwYW4udGltZTtcbiAgICByaWdodC50aW1lID0gc3Bhbi50aW1lO1xuICAgIGxlZnQuZHVyYXRpb24gPSBzcGFuLmR1cmF0aW9uO1xuICAgIHJpZ2h0LmR1cmF0aW9uID0gc3Bhbi5kdXJhdGlvbjtcbiAgICBpZihzcGFuLmdyb3VwICYmIHNwYW4uZ3JvdXAubGVuZ3RoID4gMCkge1xuICAgICAgLy8gc2FtZSBncm91cFxuICAgICAgbGVmdC5ncm91cCA9IHNwYW4uZ3JvdXA7XG4gICAgICByaWdodC5ncm91cCA9IHNwYW4uZ3JvdXA7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIHNwYXduIGEgZ3JvdXBcbiAgICAgIGxlZnQuZ3JvdXAgPSBzcGFuLmlkO1xuICAgICAgcmlnaHQuZ3JvdXAgPSBzcGFuLmlkO1xuICAgIH1cbiAgfVxuICByZXR1cm4geyBsZWZ0LCByaWdodCB9O1xufVxuXG5cbmV4cG9ydCBmdW5jdGlvbiBpZFRvSW5kZXgoZGF0YSwgcGFyYWdyYXBoSUQsIHNwYW5JRCkge1xuICBjb25zb2xlLmFzc2VydChkYXRhICE9PSB1bmRlZmluZWQsICdkYXRhIG5vdCBzcGVjaWZpZWQnKTtcbiAgY29uc29sZS5hc3NlcnQocGFyYWdyYXBoSUQgIT09IHVuZGVmaW5lZCwgJ3BhcmFncmFwaElEIG5vdCBzcGVjaWZpZWQnKTtcblxuICBjb25zdCBub3JtSW5kZXggPSAoaW5kZXgpID0+IGluZGV4ID09PSAtMSA/IHVuZGVmaW5lZCA6IGluZGV4O1xuICBjb25zdCBwYXJhZ3JhcGhzID0gZGF0YVBhcmFncmFwaHMoZGF0YSk7XG4gIGNvbnNvbGUuYXNzZXJ0KHBhcmFncmFwaHMgIT09IHVuZGVmaW5lZCwgJ25vIHBhcmFncmFwaHMnKTtcbiAgY29uc3QgcGFyYWdyYXBoSW5kZXggPSBub3JtSW5kZXgocGFyYWdyYXBocy5maW5kSW5kZXgocGFyYWdyYXBoID0+IHBhcmFncmFwaC5pZCA9PT0gcGFyYWdyYXBoSUQpKTtcbiAgY29uc3QgcGFyYWdyYXBoID0gcGFyYWdyYXBoSW5kZXggIT09IHVuZGVmaW5lZCAmJiBwYXJhZ3JhcGhJbmRleCAhPT0gLTEgJiYgcGFyYWdyYXBoc1twYXJhZ3JhcGhJbmRleF0gfHwgdW5kZWZpbmVkO1xuICBjb25zdCBzcGFuSW5kZXggPSBwYXJhZ3JhcGggJiYgbm9ybUluZGV4KHBhcmFncmFwaFNwYW5zKHBhcmFncmFwaCkuZmluZEluZGV4KHNwYW4gPT4gc3Bhbi5pZCA9PT0gc3BhbklEKSk7XG4gIGNvbnN0IHNwYW4gPSBzcGFuSW5kZXggIT09IHVuZGVmaW5lZCAmJiBzcGFuSW5kZXggIT09IC0xICYmIHBhcmFncmFwaFNwYW5zKHBhcmFncmFwaClbc3BhbkluZGV4XSB8fCB1bmRlZmluZWQ7XG4gIHJldHVybiB7IHBhcmFncmFwaCwgcGFyYWdyYXBoSW5kZXgsIHNwYW4sIHNwYW5JbmRleCB9O1xufVxuXG5mdW5jdGlvbiBkYXRhQXRJbmRleChkYXRhLCBwYXJhZ3JhcGhJbmRleCwgc3BhbkluZGV4KSB7XG4gIGNvbnN0IHBhcmFncmFwaHMgPSBkYXRhUGFyYWdyYXBocyhkYXRhKTtcbiAgY29uc3QgcGFyYWdyYXBoID0gcGFyYWdyYXBoSW5kZXggPj0gMCAmJiBwYXJhZ3JhcGhzW3BhcmFncmFwaEluZGV4XSB8fCB1bmRlZmluZWQ7XG4gIGNvbnN0IHNwYW5zID0gcGFyYWdyYXBoICYmIHBhcmFncmFwaFNwYW5zKHBhcmFncmFwaCk7XG4gIGNvbnN0IHNwYW4gPSBzcGFucyAmJiBzcGFuSW5kZXggIT09IHVuZGVmaW5lZCAvKiA+PSAwICovICYmIHNwYW5zW3NwYW5JbmRleCA9PT0gLTEgPyBzcGFucy5sZW5ndGggLSAxIDogKHNwYW5JbmRleCA+PSBzcGFucy5sZW5ndGggPyBzcGFucy5sZW5ndGggLSAxIDogc3BhbkluZGV4KV0gfHwgdW5kZWZpbmVkO1xuICByZXR1cm4geyBwYXJhZ3JhcGgsIHNwYW4gfTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGRhdGFQb2ludGVyRnJvbURPTVBvaW50ZXIoZGF0YSwgcG9pbnRlcikge1xuICBjb25zb2xlLmFzc2VydChkYXRhICE9PSB1bmRlZmluZWQsICdkYXRhIG5vdCBzcGVjaWZpZWQnKTtcbiAgY29uc29sZS5hc3NlcnQocG9pbnRlciAhPT0gdW5kZWZpbmVkLCAncG9pbnRlciBub3Qgc3BlY2lmaWVkJyk7XG5cbiAgY29uc3QgeyBzcGFuQXR0cnMsIHBhcmFncmFwaEF0dHJzIH0gPSBkYXRhRE9NTm9kZXNBdE5vZGUocG9pbnRlci5ub2RlKTtcbiAgLy8gY29uc3QgeyBzcGFuQXR0cnMsIHBhcmFncmFwaEF0dHJzIH0gPSBleHRyYWN0SW5mb0Zyb21ET01Qb2ludGVyKHBvaW50ZXIpO1xuXG4gIGNvbnN0IHBhcmFncmFwaElEID0gcGFyYWdyYXBoQXR0cnMgJiYgcGFyYWdyYXBoQXR0cnMuaWQ7XG4gIGNvbnN0IHNwYW5JRCA9IHNwYW5BdHRycyAmJiBzcGFuQXR0cnMuaWQ7XG5cbiAgY29uc3QgcGFyYWdyYXBocyA9IGRhdGFQYXJhZ3JhcGhzKGRhdGEpO1xuICBjb25zdCB7IHBhcmFncmFwaEluZGV4LCBwYXJhZ3JhcGgsIHNwYW5JbmRleCwgc3BhbiB9ID0gcGFyYWdyYXBocyAmJiBpZFRvSW5kZXgoZGF0YSwgcGFyYWdyYXBoSUQsIHNwYW5JRCkgfHwge307XG5cbiAgcmV0dXJuIHsgbm9kZTogcG9pbnRlci5ub2RlLCBzcGFuQXR0cnMsIHBhcmFncmFwaEF0dHJzLCBwYXJhZ3JhcGhJRCwgc3BhbklELCBwYXJhZ3JhcGhJbmRleCwgcGFyYWdyYXBoLCBzcGFuSW5kZXgsIHNwYW4sIG9mZnNldDogcG9pbnRlci5vZmZzZXQgfTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHNlbGVjdFBvaW50ZXJUZXh0T2Zmc2V0Q29udGFpbmVyKHJvb3RDb250YWluZXIsIHBvaW50ZXIpIHtcblxuICBpZihwb2ludGVyLnNwYW5JRCAmJiBwb2ludGVyLnBhcmFncmFwaElEKSB7XG5cbiAgICByZXR1cm4gcG9pbnRlci5ub2RlO1xuXG4gIH0gZWxzZSBpZihwb2ludGVyLnBhcmFncmFwaElEKSB7XG5cbiAgICBjb25zdCB7IG5vZGUgfSA9IGdldERPTUVsZW1lbnREYXRhQXR0cmlidXRlcyhwb2ludGVyLm5vZGUsICdESVYnLCBbJ2lkJ10pOyAgLy8gdHJ5IHBhcmFncmFwaCBub2RlXG5cbiAgICByZXR1cm4gbm9kZTtcbiAgfVxuICByZXR1cm4gcm9vdENvbnRhaW5lcjtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHBvaW50ZXJUZXh0T2Zmc2V0SW5Db250YWluZXIoY29udGFpbmVyLCBwb2ludGVyKSB7XG4gIGNvbnN0IG9mZnNldENvbnRhaW5lciA9IHNlbGVjdFBvaW50ZXJUZXh0T2Zmc2V0Q29udGFpbmVyKGNvbnRhaW5lciwgcG9pbnRlcilcblxuICBsZXQgeyBub2RlLCBvZmZzZXQgfSA9IHBvaW50ZXI7XG5cbiAgaWYobm9kZS5ub2RlVHlwZSA9PT0gTm9kZS5FTEVNRU5UX05PREUpIHtcbiAgICBvZmZzZXQgPSAwO1xuICAgIGZvcihsZXQgaT1wb2ludGVyLm9mZnNldC0xOyBpID49IDAgJiYgaTxub2RlLmNoaWxkTm9kZXMubGVuZ3RoOyBpLS0pIHtcbiAgICAgIG9mZnNldCArPSBub2RlLmNoaWxkTm9kZXMudGV4dENvbnRlbnQgJiYgbm9kZS5jaGlsZE5vZGVzW2ldLnRleHRDb25lbnQubGVuZ3RoIHx8IDA7XG4gICAgfVxuICB9XG5cbiAgbGV0IHNwYW5JRCwgcGFyYWdyYXBoSUQsIGxlZnRTcGFuSUQsIGxlZnRQYXJhZ3JhcGhJRDtcblxuICB3aGlsZShub2RlICYmIG5vZGUgIT0gY29udGFpbmVyKSB7XG4gICAgaWYobm9kZS5ub2RlVHlwZSA9PT0gTm9kZS5FTEVNRU5UX05PREUpIHtcbiAgICAgIGlmKG5vZGUubm9kZU5hbWUgPT09ICdTUEFOJykge1xuICAgICAgICBjb25zdCBpZEF0dHIgPSBub2RlLmF0dHJpYnV0ZXNbJ2RhdGEtaWQnXTtcbiAgICAgICAgc3BhbklEID0gaWRBdHRyLm5vZGVWYWx1ZTtcbiAgICAgIH1cbiAgICAgIGlmKG5vZGUubm9kZU5hbWUgPT09ICdESVYnKSB7XG4gICAgICAgIGNvbnN0IGlkQXR0ciA9IG5vZGUuYXR0cmlidXRlc1snZGF0YS1pZCddO1xuICAgICAgICBwYXJhZ3JhcGhJRCA9IGlkQXR0ci5ub2RlVmFsdWU7XG4gICAgICB9XG4gICAgfVxuICAgIGxldCBuID0gbm9kZTtcbiAgICB3aGlsZShuID0gbi5wcmV2aW91c1NpYmxpbmcpIHtcbiAgICAgIGlmKCFsZWZ0U3BhbklEICYmIG4ubm9kZU5hbWUgPT09ICdTUEFOJykge1xuICAgICAgICBjb25zdCBpZEF0dHIgPSBuLmF0dHJpYnV0ZXNbJ2RhdGEtaWQnXTtcbiAgICAgICAgbGVmdFNwYW5JRCA9IGlkQXR0ci5ub2RlVmFsdWU7XG4gICAgICAgIGlmKCFzcGFuSUQgJiYgIXBhcmFncmFwaElEKSB7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmKCFsZWZ0UGFyYWdyYXBoSUQgJiYgbi5ub2RlTmFtZSA9PT0gJ0RJVicpIHtcbiAgICAgICAgY29uc3QgaWRBdHRyID0gbi5hdHRyaWJ1dGVzWydkYXRhLWlkJ107XG4gICAgICAgIGxlZnRQYXJhZ3JhcGhJRCA9IGlkQXR0ci5ub2RlVmFsdWU7XG4gICAgICAgIGlmKCFzcGFuSUQgJiYgIXBhcmFncmFwaElEKSB7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmKCFzcGFuSUQgJiYgIXBhcmFncmFwaElEKSB7XG4gICAgICAgICAgaWYobi50ZXh0Q29uZW50KSB7XG4gICAgICAgICAgICBvZmZzZXQgKz0gbi50ZXh0Q29uZW50Lmxlbmd0aDtcbiAgICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIG5vZGUgPSBub2RlLnBhcmVudE5vZGU7XG4gIH1cblxuICBwb2ludGVyLnNwYW5JRCA9IHNwYW5JRDtcbiAgcG9pbnRlci5wYXJhZ3JhcGhJRCA9IHBhcmFncmFwaElEO1xuICBwb2ludGVyLm9mZnNldCA9IG9mZnNldDtcbiAgcG9pbnRlci5sZWZ0U3BhbklEID0gbGVmdFNwYW5JRDtcbiAgcG9pbnRlci5sZWZ0UGFyYWdyYXBoSUQgPSBsZWZ0UGFyYWdyYXBoSUQ7XG5cbiAgcmV0dXJuIHBvaW50ZXI7XG59XG5cbi8vIGZyb20gcGFydGlhbCB0byBmdWxsXG5leHBvcnQgZnVuY3Rpb24gZGF0YVBvaW50ZXIoZGF0YSwgcG9pbnRlcikge1xuICBjb25zb2xlLmFzc2VydChkYXRhICE9PSB1bmRlZmluZWQsICdkYXRhIG5vdCBzcGVjaWZpZWQnKTtcbiAgY29uc29sZS5hc3NlcnQocG9pbnRlciAhPT0gdW5kZWZpbmVkLCAncG9pbnRlciBub3Qgc3BlY2lmaWVkJyk7XG5cbiAgLy8gcGFyYWdyYXBoXG4gIGlmKHBvaW50ZXIucGFyYWdyYXBoSUQgPT09IHVuZGVmaW5lZCAmJiAocG9pbnRlci5wYXJhZ3JhcGhJbmRleCA9PT0gdW5kZWZpbmVkIHx8IHBvaW50ZXIucGFyYWdyYXBoSW5kZXggPT09IC0xKSkge1xuICAgIC8vIG5vIHBhcmFncmFwaCwgaGF2ZSB0byBjaGVjayBmb3Igbm9kZVxuICAgIGNvbnNvbGUuYXNzZXJ0KHBvaW50ZXIubm9kZSAhPT0gdW5kZWZpbmVkLCAnaW52YWxpZCBwb2ludGVyLCBubyBwYXJhZ3JhcGggaW5mbyBhbmQgbm8gbm9kZScpXG4gICAgcmV0dXJuIE9iamVjdC5hc3NpZ24ocG9pbnRlciwgZGF0YVBvaW50ZXJGcm9tRE9NUG9pbnRlcihkYXRhLCBwb2ludGVyKSk7XG4gIH0gZWxzZSBpZihwb2ludGVyLnBhcmFncmFwaElEICE9PSB1bmRlZmluZWQgJiYgKHBvaW50ZXIucGFyYWdyYXBoSW5kZXggPT09IHVuZGVmaW5lZCB8fCBwb2ludGVyLnBhcmFncmFwaEluZGV4ID09PSAtMSkpIHtcbiAgICAvLyBoYXMgcGFyYWdyYXBoIGlkLCBwYXJhZ3JhcGggaW5kZXggaXMgbWlzc2luZ1xuICAgIGNvbnN0IHsgcGFyYWdyYXBoSW5kZXgsIHBhcmFncmFwaCwgc3BhbkluZGV4LCBzcGFuIH0gPSBpZFRvSW5kZXgoZGF0YSwgcG9pbnRlci5wYXJhZ3JhcGhJRCwgcG9pbnRlci5zcGFuSUQpO1xuXG4gICAgY29uc29sZS5hc3NlcnQocGFyYWdyYXBoLCAncGFyYWdyYXBoIG5vdCByZXNvbHZlZCcpO1xuICAgIGNvbnNvbGUuYXNzZXJ0KHBvaW50ZXIuc3BhbklEICYmIHNwYW4gfHwgcG9pbnRlci5zcGFuSUQgPT09IHVuZGVmaW5lZCwgJ3NwYW4gbm90IHJlc29sdmVkLCBidXQgc3BhbiBpZCBpcyBzZXQnKTtcblxuICAgIE9iamVjdC5hc3NpZ24ocG9pbnRlciwgeyBwYXJhZ3JhcGhJbmRleCwgcGFyYWdyYXBoIH0pO1xuICAgIC8vIGlmKHBvaW50ZXIuc3BhbklEICE9PSB1bmRlZmluZWQgJiYgKHNwYW5JbmRleCA9PT0gdW5kZWZpbmVkIHx8IHNwYW5JbmRleCA9PT0gLTEpKSB7XG4gICAgLy8gICBwb2ludGVyLnNwYW5JbmRleCA9IHNwYW5JbmRleDtcbiAgICAvLyB9XG4gICAgaWYocG9pbnRlci5zcGFuICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIHBvaW50ZXIuc3BhbiA9IHNwYW47XG4gICAgfVxuICB9IGVsc2UgaWYocG9pbnRlci5wYXJhZ3JhcGhJRCA9PT0gdW5kZWZpbmVkICYmIChwb2ludGVyLnBhcmFncmFwaEluZGV4ICE9PSB1bmRlZmluZWQgfHwgcG9pbnRlci5wYXJhZ3JhcGhJbmRleCAhPT0gLTEpKSB7XG4gICAgLy8gcGFyYWdyYXBoIGlkIGlzIG1pc3NpbmcsIGhhcyBwYXJhZ3JhcGggaW5kZXhcbiAgICBjb25zdCB7IHBhcmFncmFwaCwgc3BhbiB9ID0gZGF0YUF0SW5kZXgoZGF0YSwgcG9pbnRlci5wYXJhZ3JhcGhJbmRleCwgcG9pbnRlci5zcGFuSW5kZXgpO1xuXG4gICAgY29uc29sZS5hc3NlcnQocGFyYWdyYXBoLCAncGFyYWdyYXBoIG5vdCByZXNvbHZlZCcpO1xuICAgIGNvbnNvbGUuYXNzZXJ0KHBvaW50ZXIuc3BhbkluZGV4ICE9PSB1bmRlZmluZWQgJiYgLyogcG9pbnRlci5zcGFuSW5kZXggIT09IC0xICYmICovIHNwYW4gfHwgcG9pbnRlci5zcGFuSW5kZXggPT09IHVuZGVmaW5lZCAvLyB8fCBwb2ludGVyLnNwYW5JbmRleCA9PT0gLTFcbiAgICAgIHx8IHBhcmFncmFwaFNwYW5zKGRhdGFQYXJhZ3JhcGhzKGRhdGEpW3BvaW50ZXIucGFyYWdyYXBoSW5kZXhdKS5sZW5ndGggPT09IDAsXG4gICAgICAnc3BhbiBub3QgcmVzb2x2ZWQsIGJ1dCBzcGFuIGluZGV4IGlzIHNldFonKTtcblxuICAgIE9iamVjdC5hc3NpZ24ocG9pbnRlciwgeyBwYXJhZ3JhcGgsIHBhcmFncmFwaElEOiBwYXJhZ3JhcGguaWQgfSk7XG4gICAgaWYoc3BhbiAmJiAocG9pbnRlci5zcGFuID09PSB1bmRlZmluZWQgfHwgcG9pbnRlci5zcGFuSUQgPT09IHVuZGVmaW5lZCkpIHtcbiAgICAgIE9iamVjdC5hc3NpZ24ocG9pbnRlciwgeyBzcGFuLCBzcGFuSUQ6IHNwYW4uaWQgfSk7XG4gICAgfVxuICB9XG5cbiAgaWYocG9pbnRlci5zcGFuSUQgPT09IHVuZGVmaW5lZCAmJiAocG9pbnRlci5zcGFuSW5kZXggPT09IHVuZGVmaW5lZCAvKiB8fCBwb2ludGVyLnNwYW5JbmRleCA9PT0gLTEgKi8pKSB7XG4gICAgLy8gbm8gc3BhbiwgaGF2ZSB0byBjaGVjayBmb3Igbm9kZVxuICAgIC8vIGNvbnNvbGUuYXNzZXJ0KHBvaW50ZXIubm9kZSAhPT0gdW5kZWZpbmVkLCAnaW52YWxpZCBwb2ludGVyLCBubyBzcGFuIGluZm8gYW5kIG5vIG5vZGUnKVxuICAgIGlmKHBvaW50ZXIubm9kZSkge1xuICAgICAgcmV0dXJuIE9iamVjdC5hc3NpZ24ocG9pbnRlciwgZGF0YVBvaW50ZXJGcm9tRE9NUG9pbnRlcihkYXRhLCBwb2ludGVyKSk7XG4gICAgfVxuICB9IGVsc2UgaWYocG9pbnRlci5zcGFuSUQgIT09IHVuZGVmaW5lZCAmJiAocG9pbnRlci5zcGFuSW5kZXggPT09IHVuZGVmaW5lZCAvKiB8fCBwb2ludGVyLnNwYW5JbmRleCA9PT0gLTEgKi8pKSB7XG4gICAgT2JqZWN0LmFzc2lnbihwb2ludGVyLCBpZFRvSW5kZXgoZGF0YSwgcG9pbnRlci5wYXJhZ3JhcGhJRCwgcG9pbnRlci5zcGFuSUQpKTtcblxuICAgIGNvbnNvbGUuYXNzZXJ0KHBvaW50ZXIucGFyYWdyYXBoLCAncGFyYWdyYXBoIG5vdCByZXNvbHZlZCcpO1xuICAgIGNvbnNvbGUuYXNzZXJ0KC8qcG9pbnRlci5zcGFuSUQgIT09IHVuZGVmaW5lZCAmJiovIC8qIHBvaW50ZXIuc3BhbkluZGV4ICE9PSAtMSAmJiAqLyBwb2ludGVyLnNwYW5JbmRleCAhPT0gdW5kZWZpbmVkICYmIHBvaW50ZXIuc3BhbixcbiAgICAgICdzcGFuIG5vdCByZXNvbHZlZCwgYnV0IHNwYW4gaWQgaXMgc2V0WScpO1xuXG4gIH0gZWxzZSBpZihwb2ludGVyLnNwYW5JRCA9PT0gdW5kZWZpbmVkICYmIChwb2ludGVyLnNwYW5JbmRleCAhPT0gdW5kZWZpbmVkIC8qICYmIHBvaW50ZXIuc3BhbkluZGV4ICE9PSAtMSAqLykpIHtcbiAgICBjb25zdCB7IHBhcmFncmFwaCwgc3BhbiB9ID0gZGF0YUF0SW5kZXgoZGF0YSwgcG9pbnRlci5wYXJhZ3JhcGhJbmRleCwgcG9pbnRlci5zcGFuSW5kZXgpO1xuICAgIGNvbnN0IHNwYW5zID0gcGFyYWdyYXBoU3BhbnMocGFyYWdyYXBoKTtcbiAgICBpZihwb2ludGVyLnNwYW5JbmRleCA+PSBzcGFucy5sZW5ndGggJiYgc3BhbnMubGVuZ3RoID4gMCkge1xuICAgICAgLy8gaWYgcG9pbnRlciBpcyBwYXN0IHRoZSBlbmQgb2YgcGFyYWdyYXBoLCBwb2ludCBpdCB0byB0aGUgZW5kIG9mIHBhcmFncmFwaFxuICAgICAgcG9pbnRlci5zcGFuSW5kZXggPSBzcGFucy5sZW5ndGggLSAxO1xuICAgICAgcG9pbnRlci5vZmZzZXQgPSBzcGFuc1tzcGFucy5sZW5ndGggLSAxXS50ZXh0Lmxlbmd0aDtcbiAgICB9XG5cbiAgICBjb25zb2xlLmFzc2VydChwb2ludGVyLnBhcmFncmFwaCwgJ3BhcmFncmFwaCBub3QgcmVzb2x2ZWQnKTtcbiAgICBjb25zb2xlLmFzc2VydCgvKnBvaW50ZXIuc3BhbkluZGV4ICE9PSAtMSAmJiBwb2ludGVyLnNwYW5JbmRleCAhPT0gdW5kZWZpbmVkICYmKi8gc3BhbiB8fCBwYXJhZ3JhcGhTcGFucyhkYXRhUGFyYWdyYXBocyhkYXRhKVtwb2ludGVyLnBhcmFncmFwaEluZGV4XSkubGVuZ3RoID09PSAwLFxuICAgICAgJ3NwYW4gbm90IHJlc29sdmVkLCBidXQgc3BhbiBpbmRleCBpcyBzZXQnKTtcblxuICAgIE9iamVjdC5hc3NpZ24ocG9pbnRlciwgeyBwYXJhZ3JhcGgsIHBhcmFncmFwaElEOiBwYXJhZ3JhcGguaWQsIHNwYW4sIHNwYW5JRDogc3BhbiAmJiBzcGFuLmlkLCBzcGFuSW5kZXg6IHNwYW4gJiYgcG9pbnRlci5zcGFuSW5kZXggfSk7XG4gIH1cblxuICBpZihwb2ludGVyLnBhcmFncmFwaEluZGV4ICE9IHVuZGVmaW5lZCAmJiBwb2ludGVyLnBhcmFncmFwaEluZGV4ICE9IC0xICYmIHBvaW50ZXIuc3BhbkluZGV4ICE9IHVuZGVmaW5lZCAvKiAmJiBwb2ludGVyLnNwYW5JbmRleCAhPSAtMSAqLykge1xuICAgIGNvbnN0IHBhcmFncmFwaHMgPSBkYXRhUGFyYWdyYXBocyhkYXRhKTtcbiAgICBjb25zdCBzcGFucyA9IHBhcmFncmFwaFNwYW5zKHBhcmFncmFwaHNbcG9pbnRlci5wYXJhZ3JhcGhJbmRleF0pO1xuICAgIGlmKHNwYW5zLmxlbmd0aCA+IDApIHtcbiAgICAgIGlmKHBvaW50ZXIuc3BhbkluZGV4ID09PSAtMSkge1xuICAgICAgICBwb2ludGVyLnNwYW5JbmRleCA9IHNwYW5zLmxlbmd0aCAtIDE7XG4gICAgICB9XG4gICAgICBpZihwb2ludGVyLm9mZnNldCA8IDApIHtcbiAgICAgICAgcG9pbnRlci5vZmZzZXQgPSBzcGFuc1twb2ludGVyLnNwYW5JbmRleF0udGV4dC5sZW5ndGggKyAxICsgcG9pbnRlci5vZmZzZXQ7IC8vIGZyb20gdGhlIGVuZCBvZiBzcGFuOiB0aGlzIGlzIGRpZmZlcmVudCB0aGFuIGluIHB5dGhvbiwgaXQncyBzaGlmdGVkIGJ5IG9uZSwgaS5lLiwgLTEgaXMgbGVuXG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHBvaW50ZXI7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBkYXRhUG9pbnRlclByZXYoZGF0YSwgcG9pbnRlciwgb2Zmc2V0KSB7XG4gIGNvbnNvbGUuYXNzZXJ0KGRhdGEgIT09IHVuZGVmaW5lZCwgJ2RhdGEgbm90IHNldCcpO1xuICBjb25zb2xlLmFzc2VydChwb2ludGVyLnBhcmFncmFwaEluZGV4ID49IDAsICdwb2ludGVyIHBhcmFncmFwaEluZGV4IG1pc3Npbmcgb3IgaW52YWxpZCcpO1xuXG4gIGNvbnN0IHBhcmFncmFwaHMgPSBkYXRhUGFyYWdyYXBocyhkYXRhKTtcblxuICBsZXQgcGFyYWdyYXBoSW5kZXggPSBwb2ludGVyLnBhcmFncmFwaEluZGV4O1xuICBsZXQgc3BhbkluZGV4ID0gcG9pbnRlci5zcGFuSW5kZXg7XG5cbiAgaWYoc3BhbkluZGV4ICE9PSB1bmRlZmluZWQgJiYgc3BhbkluZGV4ICE9PSAtMSkge1xuICAgIGlmKHNwYW5JbmRleCA+IDApIHtcbiAgICAgIHNwYW5JbmRleC0tO1xuICAgIH0gZWxzZSBpZihwYXJhZ3JhcGhJbmRleCA+IDApIHtcbiAgICAgIHBhcmFncmFwaEluZGV4LS07XG4gICAgICBpZihwYXJhZ3JhcGhTcGFucyhwYXJhZ3JhcGhzW3BhcmFncmFwaEluZGV4XSkubGVuZ3RoID4gMCkge1xuICAgICAgICBzcGFuSW5kZXggPSBwYXJhZ3JhcGhTcGFucyhwYXJhZ3JhcGhzW3BhcmFncmFwaEluZGV4XSkubGVuZ3RoIC0gMTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHNwYW5JbmRleCA9IHVuZGVmaW5lZDtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgfSBlbHNlIGlmKHBhcmFncmFwaEluZGV4ID4gMCkge1xuICAgIHBhcmFncmFwaEluZGV4LS07XG4gICAgaWYocGFyYWdyYXBoU3BhbnMocGFyYWdyYXBoc1twYXJhZ3JhcGhJbmRleF0pLmxlbmd0aCA+IDApIHtcbiAgICAgIHNwYW5JbmRleCA9IHBhcmFncmFwaFNwYW5zKHBhcmFncmFwaHNbcGFyYWdyYXBoSW5kZXhdKS5sZW5ndGggLSAxO1xuICAgIH0gZWxzZSB7XG4gICAgICBzcGFuSW5kZXggPSB1bmRlZmluZWQ7XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIGlmKG9mZnNldCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgb2Zmc2V0ID0gLTE7XG4gIH1cblxuICByZXR1cm4gZGF0YVBvaW50ZXIoZGF0YSwgeyBwYXJhZ3JhcGhJbmRleCwgc3BhbkluZGV4LCBvZmZzZXQgfSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBkYXRhUG9pbnRlck5leHQoZGF0YSwgcG9pbnRlciwgb2Zmc2V0KSB7XG4gIGNvbnNvbGUuYXNzZXJ0KGRhdGEgIT09IHVuZGVmaW5lZCwgJ2RhdGEgbm90IHNldCcpO1xuICBjb25zb2xlLmFzc2VydChwb2ludGVyLnBhcmFncmFwaEluZGV4ID49IDAsICdwb2ludGVyIHBhcmFncmFwaEluZGV4IG1pc3Npbmcgb3IgaW52YWxpZCcpO1xuXG4gIGNvbnN0IHBhcmFncmFwaHMgPSBkYXRhUGFyYWdyYXBocyhkYXRhKTtcblxuICBsZXQgcGFyYWdyYXBoSW5kZXggPSBwb2ludGVyLnBhcmFncmFwaEluZGV4O1xuICBsZXQgc3BhbkluZGV4ID0gcG9pbnRlci5zcGFuSW5kZXg7XG5cbiAgaWYoc3BhbkluZGV4ICE9PSB1bmRlZmluZWQgJiYgc3BhbkluZGV4ICE9PSAtMSkge1xuICAgIGlmKHNwYW5JbmRleCA8IHBhcmFncmFwaFNwYW5zKHBhcmFncmFwaHNbcGFyYWdyYXBoSW5kZXhdKS5sZW5ndGggLSAxKSB7XG4gICAgICBzcGFuSW5kZXgrKztcbiAgICB9IGVsc2UgaWYocGFyYWdyYXBoSW5kZXggPCBwYXJhZ3JhcGhzLmxlbmd0aCAtIDEpIHtcbiAgICAgIHBhcmFncmFwaEluZGV4Kys7XG4gICAgICBpZihwYXJhZ3JhcGhTcGFucyhwYXJhZ3JhcGhzW3BhcmFncmFwaEluZGV4XSkubGVuZ3RoID4gMCkge1xuICAgICAgICBzcGFuSW5kZXggPSAwXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzcGFuSW5kZXggPSB1bmRlZmluZWQ7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gIH0gZWxzZSBpZihwYXJhZ3JhcGhJbmRleCA8IHBhcmFncmFwaHMubGVuZ3RoIC0gMSkge1xuICAgIHBhcmFncmFwaEluZGV4Kys7XG4gICAgaWYocGFyYWdyYXBoU3BhbnMocGFyYWdyYXBoc1twYXJhZ3JhcGhJbmRleF0pLmxlbmd0aCA+IDApIHtcbiAgICAgIHNwYW5JbmRleCA9IDA7XG4gICAgfSBlbHNlIHtcbiAgICAgIHNwYW5JbmRleCA9IHVuZGVmaW5lZDtcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgaWYob2Zmc2V0ID09PSB1bmRlZmluZWQpIHtcbiAgICBvZmZzZXQgPSAwO1xuICB9XG5cbiAgcmV0dXJuIGRhdGFQb2ludGVyKGRhdGEsIHsgcGFyYWdyYXBoSW5kZXgsIHNwYW5JbmRleCwgb2Zmc2V0IH0pO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZGF0YVBvaW50ZXJQcmV2U3BhbihkYXRhLCBwb2ludGVyKSB7XG4gIGNvbnNvbGUuYXNzZXJ0KGRhdGEgIT09IHVuZGVmaW5lZCwgJ2RhdGEgbm90IHNldCcpO1xuICAvLyBjb25zb2xlLmFzc2VydChwb2ludGVyLnBhcmFncmFwaElEICE9PSB1bmRlZmluZWQsICdwb2ludGVyIHBhcmFncmFwaElEIG1pc3NpbmcnKTtcbiAgY29uc29sZS5hc3NlcnQocG9pbnRlci5wYXJhZ3JhcGhJbmRleCA+PSAwLCAncG9pbnRlciBwYXJhZ3JhcGhJbmRleCBtaXNzaW5nIG9yIGludmFsaWQnKTtcblxuICBjb25zdCBwYXJhZ3JhcGhzID0gZGF0YVBhcmFncmFwaHMoZGF0YSk7XG4gIGxldCBwYXJhZ3JhcGhJbmRleCA9IHBvaW50ZXIucGFyYWdyYXBoSW5kZXg7XG4gIGxldCBzcGFuSW5kZXggPSBwb2ludGVyLnNwYW5JbmRleCA+PSAwID8gcG9pbnRlci5zcGFuSW5kZXggOiAwO1xuICB3aGlsZShwYXJhZ3JhcGhJbmRleCA+PSAwKSB7XG4gICAgc3BhbkluZGV4LS07XG4gICAgaWYoc3BhbkluZGV4IDwgMCkge1xuICAgICAgcGFyYWdyYXBoSW5kZXgtLTtcbiAgICAgIGlmKHBhcmFncmFwaEluZGV4IDwgMCkge1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICAgIHNwYW5JbmRleCA9IHBhcmFncmFwaFNwYW5zKHBhcmFncmFwaHNbcGFyYWdyYXBoSW5kZXhdKS5sZW5ndGggLSAxO1xuICAgIH1cbiAgICBpZihzcGFuSW5kZXggPj0gMCAmJiBwYXJhZ3JhcGhJbmRleCA+PSAwKSB7XG4gICAgICByZXR1cm4gZGF0YVBvaW50ZXIoZGF0YSwgeyBwYXJhZ3JhcGhJbmRleCwgc3BhbkluZGV4IH0pO1xuICAgIH1cbiAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gZGF0YVBvaW50ZXJOZXh0U3BhbihkYXRhLCBwb2ludGVyKSB7XG4gIGNvbnNvbGUuYXNzZXJ0KGRhdGEgIT09IHVuZGVmaW5lZCwgJ2RhdGEgbm90IHNldCcpO1xuICAvLyBjb25zb2xlLmFzc2VydChwb2ludGVyLnBhcmFncmFwaElEICE9PSB1bmRlZmluZWQsICdwb2ludGVyIHBhcmFncmFwaElEIG1pc3NpbmcnKTtcbiAgY29uc29sZS5hc3NlcnQocG9pbnRlci5wYXJhZ3JhcGhJbmRleCA+PSAwLCAncG9pbnRlciBwYXJhZ3JhcGhJbmRleCBtaXNzaW5nIG9yIGludmFsaWQnKTtcblxuICBjb25zdCBwYXJhZ3JhcGhzID0gZGF0YVBhcmFncmFwaHMoZGF0YSk7XG4gIGxldCBwYXJhZ3JhcGhJbmRleCA9IHBvaW50ZXIucGFyYWdyYXBoSW5kZXg7XG4gIGxldCBzcGFuSW5kZXggPSBwb2ludGVyLnNwYW5JbmRleCA+PSAwID8gcG9pbnRlci5zcGFuSW5kZXggOiBwYXJhZ3JhcGhzW3BhcmFncmFwaEluZGV4XS5zcGFucy5sZW5ndGg7XG4gIHdoaWxlKHBhcmFncmFwaEluZGV4IDwgcGFyYWdyYXBocy5sZW5ndGgpIHtcbiAgICBzcGFuSW5kZXgrKztcbiAgICBpZihzcGFuSW5kZXggPj0gcGFyYWdyYXBoc1twYXJhZ3JhcGhJbmRleF0uc3BhbnMubGVuZ3RoKSB7XG4gICAgICBwYXJhZ3JhcGhJbmRleCsrO1xuICAgICAgaWYocGFyYWdyYXBoSW5kZXggPj0gcGFyYWdyYXBocy5sZW5ndGgpIHtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgICBzcGFuSW5kZXggPSAwO1xuICAgIH1cbiAgICBpZihwYXJhZ3JhcGhJbmRleCA8IHBhcmFncmFwaHMubGVuZ3RoICYmIHNwYW5JbmRleCA8IHBhcmFncmFwaHNbcGFyYWdyYXBoSW5kZXhdLnNwYW5zLmxlbmd0aCkge1xuICAgICAgcmV0dXJuIGRhdGFQb2ludGVyKGRhdGEsIHsgcGFyYWdyYXBoSW5kZXgsIHNwYW5JbmRleCB9KTtcbiAgICB9XG4gIH1cbn1cblxuZXhwb3J0IGNvbnN0IFNwbGljZU1vZGUgPSBPYmplY3QuZnJlZXplKHtcbiAgUmVtb3ZlOiAxLFxuICBJblBsYWNlOiAyLFxuICBDb3B5OiAzLFxufSk7XG5cbmV4cG9ydCBmdW5jdGlvbiBzcGxpY2VTcGFucyhzcGFucywgc3RhcnRJbmRleCwgc3RhcnRPZmZzZXQsIGVuZEluZGV4LCBlbmRPZmZzZXQsIG1vZGUgPSBTcGxpY2VNb2RlLlJlbW92ZSkge1xuICBpZihzdGFydEluZGV4ID09IHVuZGVmaW5lZCkge1xuICAgIHN0YXJ0SW5kZXggPSAwO1xuICB9XG4gIGlmKHN0YXJ0T2Zmc2V0ID09IHVuZGVmaW5lZCB8fCBzdGFydE9mZnNldCA8IDApIHtcbiAgICBzdGFydE9mZnNldCA9IDA7XG4gIH1cbiAgaWYoZW5kSW5kZXggPT0gdW5kZWZpbmVkIHx8IGVuZEluZGV4ID49IHNwYW5zLmxlbmd0aCkge1xuICAgIGVuZEluZGV4ID0gc3BhbnMubGVuZ3RoIC0gMTtcbiAgfVxuICBjb25zdCBlbmRTcGFuTGVuZ3RoID0gc3BhbnNbZW5kSW5kZXhdLnRleHQubGVuZ3RoXG4gIGlmKGVuZE9mZnNldCA9PT0gdW5kZWZpbmVkIHx8IGVuZE9mZnNldCA+IGVuZFNwYW5MZW5ndGgpIHtcbiAgICBlbmRPZmZzZXQgPSBlbmRTcGFuTGVuZ3RoO1xuICB9XG4gIGlmKGVuZE9mZnNldCA8IDApIHtcbiAgICBlbmRPZmZzZXQgPSAwO1xuICB9XG4gIGlmKHN0YXJ0T2Zmc2V0ID4gc3BhbnNbc3RhcnRJbmRleF0udGV4dC5sZW5ndGgpIHtcbiAgICBzdGFydE9mZnNldCA9IHNwYW5zW3N0YXJ0SW5kZXhdLnRleHQubGVuZ3RoO1xuICB9XG4gIGlmKHN0YXJ0SW5kZXggPT09IGVuZEluZGV4KSB7XG4gICAgaWYoZW5kT2Zmc2V0IDwgc3RhcnRPZmZzZXQpIHtcbiAgICAgIGVuZE9mZnNldCA9IHN0YXJ0T2Zmc2V0XG4gICAgfVxuICAgIGlmKG1vZGUgPT09IFNwbGljZU1vZGUuUmVtb3ZlKSB7XG4gICAgICBjb25zdCBzcGFuID0gc3BhbnNbc3RhcnRJbmRleF07XG4gICAgICBjb25zdCByZW1vdmVkU3BhblRleHQgPSBzcGFuLnRleHQuc3Vic3RyaW5nKHN0YXJ0T2Zmc2V0LCBlbmRPZmZzZXQpO1xuICAgICAgc3Bhbi50ZXh0ID0gc3Bhbi50ZXh0LnN1YnN0cmluZygwLCBzdGFydE9mZnNldCkgKyBzcGFuLnRleHQuc3Vic3RyaW5nKGVuZE9mZnNldCk7XG4gICAgICBjb25zdCByZW1vdmVkU3BhbnMgPSBbXTtcbiAgICAgIGlmKHJlbW92ZWRTcGFuVGV4dC5sZW5ndGggPiAwKSB7XG4gICAgICAgIHJlbW92ZWRTcGFucy5wdXNoKGNvcHlTcGFuKHNwYW4sIHsgdGV4dDogcmVtb3ZlZFNwYW5UZXh0IH0pKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB7IHNwYW5zOiByZW1vdmVkU3BhbnMsIHNwbGl0SW5kZXg6IHN0YXJ0SW5kZXgsIHNwbGl0T2Zmc2V0OiBzdGFydE9mZnNldCwgcmVtb3ZlZFNwYW5UZXh0IH07XG4gICAgfSBlbHNlIGlmKG1vZGUgPT09IFNwbGljZU1vZGUuSW5QbGFjZSkge1xuICAgICAgLy8gY29uc29sZS5sb2coYGluUGxhY2UgIHN0YXJ0SW5kZXg9JHtzdGFydEluZGV4fSAgIHN0YXJ0T2Zmc2V0PSR7c3RhcnRPZmZzZXR9ICBlbmRJbmRleD0ke2VuZEluZGV4fSAgIGVuZE9mZnNldD0ke2VuZE9mZnNldH1gKVxuICAgICAgLy8gcmVwbGFjZSBvcmlnaW5hbCBzcGFuIHdpdGggb3JpZ2luYWwgKyB0d28gbW9yZSBwYXJ0c1xuICAgICAgY29uc3Qgc3BhbiA9IHNwYW5zW3N0YXJ0SW5kZXhdO1xuICAgICAgaWYoc3RhcnRPZmZzZXQgPT09IDAgJiYgZW5kT2Zmc2V0ID49IHNwYW4udGV4dC5sZW5ndGgpIHtcbiAgICAgICAgcmV0dXJuIHsgc3BhbnM6IFtzcGFuXSwgc3BsaXRJbmRleDogc3RhcnRJbmRleCwgc3BsaXRPZmZzZXQ6IHN0YXJ0T2Zmc2V0IH07XG4gICAgICB9IGVsc2UgaWYoc3RhcnRPZmZzZXQgPT09IGVuZE9mZnNldCkge1xuICAgICAgICBpZihzdGFydE9mZnNldCA9PT0gMCkge1xuICAgICAgICAgIHJldHVybiB7IHJpZ2h0OiBzcGFuLCBzcGFuczogW10sIHNwbGl0SW5kZXg6IHN0YXJ0SW5kZXgsIHNwbGl0T2Zmc2V0OiBzdGFydE9mZnNldCB9O1xuICAgICAgICB9IGVsc2UgaWYoZW5kT2Zmc2V0ID49IHNwYW4udGV4dC5sZW5ndGgpIHtcbiAgICAgICAgICByZXR1cm4geyBsZWZ0OiBzcGFuLCBzcGFuczogW10sIHNwbGl0SW5kZXg6IHN0YXJ0SW5kZXggKyAxLCBzcGxpdE9mZnNldDogMCB9O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGxldCB7IGxlZnQsIHJpZ2h0IH0gPSBzcGxpdFNwYW4oc3Bhbiwgc3RhcnRPZmZzZXQpO1xuICAgICAgICAgIHNwYW5zLnNwbGljZShzdGFydEluZGV4LCAxLCAuLi5bbGVmdCwgcmlnaHRdLmZpbHRlcihzID0+IHMudGV4dC5sZW5ndGggPiAwKSk7XG4gICAgICAgICAgcmV0dXJuIHsgbGVmdCwgcmlnaHQsIHNwYW5zOiBbXSwgc3BsaXRJbmRleDogc3RhcnRJbmRleCArIDEsIHNwbGl0T2Zmc2V0OiAwIH07XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZihzdGFydE9mZnNldCA9PT0gMCkge1xuICAgICAgICBsZXQgeyBsZWZ0OiBtaWQsIHJpZ2h0IH0gPSBzcGxpdFNwYW4oc3BhbiwgZW5kT2Zmc2V0KTtcbiAgICAgICAgc3BhbnMuc3BsaWNlKHN0YXJ0SW5kZXgsIDEsIC4uLlttaWQsIHJpZ2h0XS5maWx0ZXIocyA9PiBzLnRleHQubGVuZ3RoID4gMCkpO1xuICAgICAgICByZXR1cm4geyByaWdodCwgc3BhbnM6IFttaWRdLCBzcGxpdEluZGV4OiBzdGFydEluZGV4LCBzcGxpdE9mZnNldDogc3RhcnRPZmZzZXQgfTtcbiAgICAgIH0gZWxzZSBpZihlbmRPZmZzZXQgPj0gc3Bhbi50ZXh0Lmxlbmd0aCkge1xuICAgICAgICBsZXQgeyBsZWZ0LCByaWdodDogbWlkIH0gPSBzcGxpdFNwYW4oc3Bhbiwgc3RhcnRPZmZzZXQpO1xuICAgICAgICBzcGFucy5zcGxpY2Uoc3RhcnRJbmRleCwgMSwgLi4uW2xlZnQsIG1pZF0uZmlsdGVyKHMgPT4gcy50ZXh0Lmxlbmd0aCA+IDApKTtcbiAgICAgICAgcmV0dXJuIHsgbGVmdCwgc3BhbnM6IFttaWRdLCBzcGxpdEluZGV4OiBzdGFydEluZGV4ICsgMSwgc3BsaXRPZmZzZXQ6IHN0YXJ0T2Zmc2V0IH07XG4gICAgICB9XG4gICAgICAvLyBpZihzdGFydE9mZnNldCA9PT0gZW5kT2Zmc2V0KSB7XG4gICAgICAvLyAgIGlmKHN0YXJ0T2Zmc2V0ID09IDAgfHwgc3RhcnRPZmZzZXQgPj0gc3Bhbi50ZXh0Lmxlbmd0aCkge1xuICAgICAgLy8gICAgIHJldHVybiB7IHNwYW5zOiBbXSwgc3BsaXRJbmRleDogc3RhcnRJbmRleCwgc3BsaXRPZmZzZXQ6IHN0YXJ0T2Zmc2V0IH07XG4gICAgICAvLyAgIH1cbiAgICAgIC8vICAgbGV0IHsgbGVmdCwgcmlnaHQgfSA9IHNwbGl0U3BhbihzcGFuLCBzdGFydE9mZnNldCk7XG4gICAgICAvLyAgIHNwYW5zLnNwbGljZShzdGFydEluZGV4LCAxLCBsZWZ0LCByaWdodCk7XG4gICAgICAvLyAgIHJldHVybiB7IHNwYW5zOiBbXSwgc3BsaXRJbmRleDogc3RhcnRJbmRleCArIDEsIHNwbGl0T2Zmc2V0OiAwIH07XG4gICAgICAvLyB9XG4gICAgICBsZXQgeyBsZWZ0LCByaWdodDogbWlkcmlnaHQgfSA9IHNwbGl0U3BhbihzcGFuLCBzdGFydE9mZnNldCk7XG4gICAgICBsZXQgeyBsZWZ0OiBtaWQsIHJpZ2h0IH0gPSBzcGxpdFNwYW4obWlkcmlnaHQsIGVuZE9mZnNldCAtIHN0YXJ0T2Zmc2V0KTtcbiAgICAgIHNwYW5zLnNwbGljZShzdGFydEluZGV4LCAxLCAuLi5bbGVmdCwgbWlkLCByaWdodF0uZmlsdGVyKHMgPT4gcy50ZXh0Lmxlbmd0aCA+IDApKTtcbiAgICAgIHJldHVybiB7IGxlZnQsIHJpZ2h0LCBzcGFuczogW21pZF0sIHNwbGl0SW5kZXg6IHN0YXJ0SW5kZXggKyAxLCBzcGxpdE9mZnNldDogMCAvKnN0YXJ0T2Zmc2V0Ki8gfTtcbiAgICB9IGVsc2UgaWYobW9kZSA9PT0gU3BsaWNlTW9kZS5Db3B5KSB7XG4gICAgICBjb25zdCBzcGFuID0gc3BhbnNbc3RhcnRJbmRleF07XG4gICAgICBjb25zdCByZW1vdmVkU3BhblRleHQgPSBzcGFuLnRleHQuc3Vic3RyaW5nKHN0YXJ0T2Zmc2V0LCBlbmRPZmZzZXQpO1xuICAgICAgLy8gc3Bhbi50ZXh0ID0gc3Bhbi50ZXh0LnN1YnN0cmluZygwLCBzdGFydE9mZnNldCkgKyBzcGFuLnRleHQuc3Vic3RyaW5nKGVuZE9mZnNldCk7XG4gICAgICBjb25zdCBjb3BpZWRTcGFucyA9IFtdO1xuICAgICAgaWYocmVtb3ZlZFNwYW5UZXh0Lmxlbmd0aCA+IDApIHtcbiAgICAgICAgY29waWVkU3BhbnMucHVzaChjb3B5U3BhbihzcGFuLCB7IHRleHQ6IHJlbW92ZWRTcGFuVGV4dCwgZ3JvdXA6IHNwYW4uaWQgfSkpOyAgLy8gVE9ETzogbmV3IGlkID8/P1xuICAgICAgfVxuICAgICAgcmV0dXJuIHsgc3BhbnM6IGNvcGllZFNwYW5zLCBzcGxpdEluZGV4OiBzdGFydEluZGV4LCBzcGxpdE9mZnNldDogc3RhcnRPZmZzZXQgfTtcbiAgICB9XG4gIH1cblxuICBpZihlbmRJbmRleCA9PT0gc3RhcnRJbmRleCArIDEgJiYgZW5kT2Zmc2V0ID09PSAwICYmIHN0YXJ0T2Zmc2V0ID49IHNwYW5zW3N0YXJ0SW5kZXhdLnRleHQubGVuZ3RoKSB7XG4gICAgLy8gY29sbGFwc2VkIHBvc2l0aW9uIG9uIHNwYW4gc3BhbiBib3JkZXIgZnJvbSBib3RoIHNpZGVzXG4gICAgcmV0dXJuIHsgc3BhbnM6IFtdLCBzcGxpdEluZGV4OiBzdGFydEluZGV4LCBzcGxpdE9mZnNldDogc3RhcnRPZmZzZXQgfTtcbiAgfVxuXG4gIGNvbnN0IHNwbGljZVN0YXJ0ID0gc3RhcnRPZmZzZXQgPT09IDAgPyBzdGFydEluZGV4IDogc3RhcnRJbmRleCArIDE7XG4gIGNvbnN0IHNwbGljZUVuZCA9IGVuZE9mZnNldCA+PSBlbmRTcGFuTGVuZ3RoID8gZW5kSW5kZXggOiBlbmRJbmRleCAtIDE7XG4gIC8vIFtzcGxpY2VTdGFydCwgc3BsaWNlRW5kXSAtIG9ubHkgd2hvbGUgKHVzdWFsbHkgaW5uZXIgb25seSkgc3BhbnNcblxuICBpZihtb2RlID09PSBTcGxpY2VNb2RlLlJlbW92ZSkge1xuXG4gICAgY29uc3QgcmVtb3ZlZFNwYW5zID0gc3BhbnMuc3BsaWNlKHNwbGljZVN0YXJ0LCBzcGxpY2VFbmQgKyAxIC0gc3BsaWNlU3RhcnQpOyAgLy8gKzEgYmVjYXVzZSBlbmQgaXMgaW5jbHVzaXZlXG4gICAgaWYoc3RhcnRJbmRleCA8IHNwbGljZVN0YXJ0KSB7XG4gICAgICBjb25zdCBzcGFuID0gc3BhbnNbc3RhcnRJbmRleF07XG4gICAgICBjb25zdCB7IGxlZnQsIHJpZ2h0IH0gPSBzcGxpdFNwYW4oc3Bhbiwgc3RhcnRPZmZzZXQpO1xuICAgICAgaWYocmlnaHQudGV4dC5sZW5ndGggPiAwKSB7XG4gICAgICAgIHJlbW92ZWRTcGFucy51bnNoaWZ0KGNvcHlTcGFuKHNwYW4sIHJpZ2h0KSk7XG4gICAgICB9XG4gICAgICBPYmplY3QuYXNzaWduKHNwYW4sIGxlZnQpO1xuICAgIH1cbiAgICBpZihzcGxpY2VFbmQgPCBlbmRJbmRleCkge1xuICAgICAgY29uc3Qgc3BhbiA9IHNwYW5zW3NwbGljZVN0YXJ0XTsgIC8vIHNwbGljZVN0YXJ0OiBzcGFucyBhcmUgYWxyZWFkeSByZW1vdmVkIC8gc3BsaWNlZCBmcm9tIHRoZSBhcnJheVxuICAgICAgY29uc3QgeyBsZWZ0LCByaWdodCB9ID0gc3BsaXRTcGFuKHNwYW4sIGVuZE9mZnNldCk7XG4gICAgICBpZihsZWZ0LnRleHQubGVuZ3RoID4gMCkge1xuICAgICAgICByZW1vdmVkU3BhbnMucHVzaChjb3B5U3BhbihzcGFuLCBsZWZ0KSk7XG4gICAgICB9XG4gICAgICBPYmplY3QuYXNzaWduKHNwYW4sIHJpZ2h0KTtcbiAgICB9XG4gICAgLy8gc3BsaWNlIGFuZCB1cGRhdGUgdGltZSBkZXBlbmRpbmcgb24gZHVyYXRpb25zIGFuZCBzcGxpdCBlbmRwb2ludHNcbiAgICByZXR1cm4geyBzcGFuczogcmVtb3ZlZFNwYW5zLCBzcGxpdEluZGV4OiBzdGFydEluZGV4LCBzcGxpdE9mZnNldDogc3RhcnRPZmZzZXQgfTtcblxuICB9IGVsc2UgaWYobW9kZSA9PT0gU3BsaWNlTW9kZS5JblBsYWNlKSB7XG5cbiAgICAvLyBjb3B5IGlubmVyIHNwYW5zXG4gICAgY29uc3Qgc2xpY2VkU3BhbnMgPSBzcGFucy5zbGljZShzcGxpY2VTdGFydCwgc3BsaWNlRW5kICsgMSk7ICAvLyArMSBiZWNhdXNlIGVuZCBpcyBpbmNsdXNpdmVcblxuICAgIC8vIGNvbnNvbGUubG9nKGBpblBsYWNlICBzdGFydEluZGV4PSR7c3RhcnRJbmRleH0gIHNwbGljZVN0YXJ0PSR7c3BsaWNlU3RhcnR9ICBzdGFydE9mZnNldD0ke3N0YXJ0T2Zmc2V0fSAgZW5kSW5kZXg9JHtlbmRJbmRleH0gIHNwbGljZUVuZD0ke3NwbGljZUVuZH0gIGVuZE9mZnNldD0ke2VuZE9mZnNldH1gKVxuICAgIC8vIGRlYWwgd2l0aCBib3JkZXIgc3BhbnNcbiAgICAvLyBzdGFydCB3aXRoIGVuZCBhcyB0aGUgaW5kZXggbWF5IGJlY29tIGludmFsaWQgYWZ0ZXIgdGhlIHN0YXJ0IGlzIHNwbGl0XG4gICAgaWYoc3BsaWNlRW5kIDwgZW5kSW5kZXgpIHtcbiAgICAgIGNvbnN0IHNwYW4gPSBzcGFuc1tlbmRJbmRleF07XG4gICAgICBpZihlbmRPZmZzZXQgPiAwICYmIGVuZE9mZnNldCA8IHNwYW4udGV4dC5sZW5ndGgpIHtcbiAgICAgICAgY29uc29sZS5sb2coJ2VuZCBvZmZzZXQgbWlkZGxlJylcbiAgICAgICAgY29uc3QgeyBsZWZ0LCByaWdodCB9ID0gc3BsaXRTcGFuKHNwYW4sIGVuZE9mZnNldCk7XG4gICAgICAgIHNwYW5zLnNwbGljZShlbmRJbmRleCwgMSwgLi4uW2xlZnQsIHJpZ2h0XS5maWx0ZXIocyA9PiBzLnRleHQubGVuZ3RoID4gMCkpO1xuICAgICAgICAvLyBpZihsZWZ0LnRleHQubGVuZ3RoID4gMCkge1xuICAgICAgICAgIHNsaWNlZFNwYW5zLnB1c2gobGVmdCk7XG4gICAgICAgIC8vIH1cbiAgICAgICAgLy8gT2JqZWN0LmFzc2lnbihzcGFuLCByaWdodCk7XG4gICAgICB9IGVsc2UgaWYoZW5kT2Zmc2V0ID4gMCkge1xuICAgICAgICBzbGljZWRTcGFucy5wdXNoKHNwYW4pO1xuICAgICAgfVxuICAgIH1cbiAgICBpZihzdGFydEluZGV4IDwgc3BsaWNlU3RhcnQpIHtcbiAgICAgIGNvbnN0IHNwYW4gPSBzcGFuc1tzdGFydEluZGV4XTtcbiAgICAgIGlmKHN0YXJ0T2Zmc2V0ID4gMCAmJiBzdGFydE9mZnNldCA8IHNwYW4udGV4dC5sZW5ndGgpIHtcbiAgICAgICAgY29uc29sZS5sb2coJ3N0YXJ0IG9mZnNldCBtaWRkbGUnKVxuICAgICAgICBjb25zdCB7IGxlZnQsIHJpZ2h0IH0gPSBzcGxpdFNwYW4oc3Bhbiwgc3RhcnRPZmZzZXQpO1xuICAgICAgICAvLyBpZihyaWdodC50ZXh0Lmxlbmd0aCA+IDApIHtcbiAgICAgICAgICBzbGljZWRTcGFucy51bnNoaWZ0KHJpZ2h0KTtcbiAgICAgICAgLy8gfVxuICAgICAgICBzcGFucy5zcGxpY2Uoc3RhcnRJbmRleCwgMSwgLi4uW2xlZnQsIHJpZ2h0XS5maWx0ZXIocyA9PiBzLnRleHQubGVuZ3RoID4gMCkpO1xuICAgICAgICAvLyBPYmplY3QuYXNzaWduKHNwYW4sIGxlZnQpO1xuICAgICAgICBzdGFydEluZGV4Kys7XG4gICAgICB9IGVsc2UgaWYoc3RhcnRPZmZzZXQgPT09IDApIHtcbiAgICAgICAgc2xpY2VkU3BhbnMudW5zaGlmdChzcGFuKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHN0YXJ0SW5kZXgrKztcbiAgICAgIH1cbiAgICB9XG4gICAgLy8gc3BsaWNlIGFuZCB1cGRhdGUgdGltZSBkZXBlbmRpbmcgb24gZHVyYXRpb25zIGFuZCBzcGxpdCBlbmRwb2ludHNcbiAgICByZXR1cm4geyBzcGFuczogc2xpY2VkU3BhbnMsIHNwbGl0SW5kZXg6IHN0YXJ0SW5kZXgsIHNwbGl0T2Zmc2V0OiBzdGFydE9mZnNldCB9O1xuXG4gIH0gZWxzZSBpZihtb2RlID09PSBTcGxpY2VNb2RlLkNvcHkpIHtcblxuICAgIGNvbnN0IHNsaWNlZFNwYW5zID0gc3BhbnMuc2xpY2Uoc3BsaWNlU3RhcnQsIHNwbGljZUVuZCArIDEpO1xuXG4gICAgaWYoc3RhcnRJbmRleCA8IHNwbGljZVN0YXJ0KSB7XG4gICAgICBjb25zdCBzcGFuID0gc3BhbnNbc3RhcnRJbmRleF07XG4gICAgICBjb25zdCB7IGxlZnQsIHJpZ2h0IH0gPSBzcGxpdFNwYW4oc3Bhbiwgc3RhcnRPZmZzZXQpO1xuICAgICAgaWYocmlnaHQudGV4dC5sZW5ndGggPiAwKSB7XG4gICAgICAgIHNsaWNlZFNwYW5zLnVuc2hpZnQoY29weVNwYW4oc3BhbiwgcmlnaHQpKTtcbiAgICAgIH1cbiAgICB9XG4gICAgaWYoc3BsaWNlRW5kIDwgZW5kSW5kZXgpIHtcbiAgICAgIGNvbnN0IHNwYW4gPSBzcGFuc1tlbmRJbmRleF07XG4gICAgICBjb25zdCB7IGxlZnQsIHJpZ2h0IH0gPSBzcGxpdFNwYW4oc3BhbiwgZW5kT2Zmc2V0KTtcbiAgICAgIGlmKGxlZnQudGV4dC5sZW5ndGggPiAwKSB7XG4gICAgICAgIHNsaWNlZFNwYW5zLnB1c2goY29weVNwYW4oc3BhbiwgbGVmdCkpO1xuICAgICAgfVxuICAgIH1cbiAgICAvLyBzcGxpY2UgYW5kIHVwZGF0ZSB0aW1lIGRlcGVuZGluZyBvbiBkdXJhdGlvbnMgYW5kIHNwbGl0IGVuZHBvaW50c1xuICAgIHJldHVybiB7IHNwYW5zOiBzbGljZWRTcGFucywgc3BsaXRJbmRleDogc3RhcnRJbmRleCwgc3BsaXRPZmZzZXQ6IHN0YXJ0T2Zmc2V0IH07XG5cbiAgfVxuICByZXR1cm47XG59XG5cblxuXG5cbmV4cG9ydCBmdW5jdGlvbiBkYXRhU3BsaWNlKGRhdGEsIHN0YXJ0LCBlbmQsIG1vZGUgPSBTcGxpY2VNb2RlLlJlbW92ZSkge1xuICAvLyBtb2RlOiByZW1vdmUsIGlucGxhY2UsIGNvcHlcbiAgY29uc3QgcGFyYWdyYXBocyA9IGRhdGFQYXJhZ3JhcGhzKGRhdGEpO1xuICBjb25zdCByZW1vdmVkID0gW107XG4gIGxldCBzdGFydFBhcmFncmFwaDtcbiAgZm9yKGxldCBpPXN0YXJ0LnBhcmFncmFwaEluZGV4OyBpPHBhcmFncmFwaHMubGVuZ3RoICYmIGkgPD0gZW5kLnBhcmFncmFwaEluZGV4Oykge1xuICAgIGNvbnN0IHBhcmFncmFwaCA9IHBhcmFncmFwaHNbaV07XG4gICAgaWYocGFyYWdyYXBoLmlkID09PSBzdGFydC5wYXJhZ3JhcGhJRCkge1xuICAgICAgc3RhcnRQYXJhZ3JhcGggPSBwYXJhZ3JhcGg7XG4gICAgfVxuICAgIGlmKHBhcmFncmFwaC5pZCA9PT0gc3RhcnQucGFyYWdyYXBoSUQgJiYgcGFyYWdyYXBoLmlkID09PSBlbmQucGFyYWdyYXBoSUQpIHtcbiAgICAgIC8vIHNpbmdsZSBwYXJhZ3JhcGhcbiAgICAgIGlmKHBhcmFncmFwaFNwYW5zKHBhcmFncmFwaCkubGVuZ3RoID4gMCkge1xuICAgICAgICAvLyBub24tZW1wdHkgcGFyYWdyYXBoXG4gICAgICAgIGlmKG1vZGUgPT09IFNwbGljZU1vZGUuUmVtb3ZlKSB7XG4gICAgICAgICAgY29uc3QgcmVtb3ZlZFNwYW5zID0gc3BsaWNlU3BhbnMocGFyYWdyYXBoU3BhbnMocGFyYWdyYXBoKSwgc3RhcnQuc3BhbkluZGV4LCBzdGFydC5vZmZzZXQsIGVuZC5zcGFuSW5kZXgsIGVuZC5vZmZzZXQsIG1vZGUpO1xuICAgICAgICAgIGlmKHJlbW92ZWRTcGFucy5zcGFucy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICByZW1vdmVkLnB1c2goe1xuICAgICAgICAgICAgICBpZDogcGFyYWdyYXBoLmlkLFxuICAgICAgICAgICAgICBzcGFuczogcmVtb3ZlZFNwYW5zLnNwYW5zLFxuICAgICAgICAgICAgICBwYXJ0aWFsOiBzdGFydC5zcGFuSW5kZXggPiAwIHx8IHN0YXJ0Lm9mZnNldCA+IDAgfHwgZW5kLnNwYW5JbmRleCA8IHBhcmFncmFwaFNwYW5zKHBhcmFncmFwaCkubGVuZ3RoIC0gMVxuICAgICAgICAgICAgICAgICAgICAgIHx8IHBhcmFncmFwaFNwYW5zKHBhcmFncmFwaCkubGVuZ3RoID4gMCAmJiBlbmQub2Zmc2V0IDwgbGFzdChwYXJhZ3JhcGhTcGFucyhwYXJhZ3JhcGgpKS50ZXh0Lmxlbmd0aFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYobW9kZSA9PT0gU3BsaWNlTW9kZS5Db3B5KSB7XG4gICAgICAgICAgY29uc3QgcmVtb3ZlZFNwYW5zID0gc3BsaWNlU3BhbnMocGFyYWdyYXBoU3BhbnMocGFyYWdyYXBoKSwgc3RhcnQuc3BhbkluZGV4LCBzdGFydC5vZmZzZXQsIGVuZC5zcGFuSW5kZXgsIGVuZC5vZmZzZXQsIG1vZGUpO1xuICAgICAgICAgIGlmKHJlbW92ZWRTcGFucy5zcGFucy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICByZW1vdmVkLnB1c2goe1xuICAgICAgICAgICAgICBpZDogcGFyYWdyYXBoLmlkLFxuICAgICAgICAgICAgICBzcGFuczogcmVtb3ZlZFNwYW5zLnNwYW5zLFxuICAgICAgICAgICAgICBwYXJ0aWFsOiBzdGFydC5zcGFuSW5kZXggPiAwIHx8IHN0YXJ0Lm9mZnNldCA+IDAgfHwgZW5kLnNwYW5JbmRleCA8IHBhcmFncmFwaFNwYW5zKHBhcmFncmFwaCkubGVuZ3RoIC0gMVxuICAgICAgICAgICAgICAgICAgICAgIHx8IGVuZC5vZmZzZXQgPCBsYXN0KHBhcmFncmFwaFNwYW5zKHBhcmFncmFwaCkpLnRleHQubGVuZ3RoXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZihtb2RlID09PSBTcGxpY2VNb2RlLkluUGxhY2UpIHtcbiAgICAgICAgICBjb25zdCByZW1vdmVkU3BhbnMgPSBzcGxpY2VTcGFucyhwYXJhZ3JhcGhTcGFucyhwYXJhZ3JhcGgpLCBzdGFydC5zcGFuSW5kZXgsIHN0YXJ0Lm9mZnNldCwgZW5kLnNwYW5JbmRleCwgZW5kLm9mZnNldCwgbW9kZSk7XG4gICAgICAgICAgaWYocmVtb3ZlZFNwYW5zLnNwYW5zLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIHJlbW92ZWQucHVzaCh7XG4gICAgICAgICAgICAgIGlkOiBwYXJhZ3JhcGguaWQsXG4gICAgICAgICAgICAgIHNwYW5zOiByZW1vdmVkU3BhbnMuc3BhbnMsXG4gICAgICAgICAgICAgIHBhcnRpYWw6IHN0YXJ0LnNwYW5JbmRleCA+IDAgfHwgc3RhcnQub2Zmc2V0ID4gMCB8fCBlbmQuc3BhbkluZGV4IDwgcGFyYWdyYXBoU3BhbnMocGFyYWdyYXBoKS5sZW5ndGggLSAxXG4gICAgICAgICAgICAgICAgICAgICAgfHwgZW5kLm9mZnNldCA8IGxhc3QocGFyYWdyYXBoU3BhbnMocGFyYWdyYXBoKSkudGV4dC5sZW5ndGhcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gZW1wdHkgcGFyYWdyYXBoXG4gICAgICAgIGlmKG1vZGUgPT09IFNwbGljZU1vZGUuUmVtb3ZlKSB7XG4gICAgICAgICAgcGFyYWdyYXBocy5zcGxpY2UoaSwgMSk7IC8vIHJlbW92ZSBwYXJhZ3JhcGhcbiAgICAgICAgICByZW1vdmVkLnB1c2goT2JqZWN0LmFzc2lnbih7fSwgcGFyYWdyYXBoLCB7IHBhcnRpYWw6IGZhbHNlIH0pKTtcbiAgICAgICAgfSBlbHNlIGlmKG1vZGUgPT09IFNwbGljZU1vZGUuQ29weSkge1xuICAgICAgICAgIHJlbW92ZWQucHVzaChPYmplY3QuYXNzaWduKHt9LCBwYXJhZ3JhcGgsIHsgcGFydGlhbDogZmFsc2UgfSkpO1xuICAgICAgICB9IGVsc2UgaWYobW9kZSA9PT0gU3BsaWNlTW9kZS5JblBsYWNlKSB7XG4gICAgICAgICAgcGFyYWdyYXBocy5zcGxpY2UoaSwgMSk7IC8vIHJlbW92ZSBwYXJhZ3JhcGhcbiAgICAgICAgICByZW1vdmVkLnB1c2gocGFyYWdyYXBoKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgYnJlYWs7XG4gICAgfSBlbHNlIGlmKHBhcmFncmFwaC5pZCA9PT0gc3RhcnQucGFyYWdyYXBoSUQgJiYgcGFyYWdyYXBoU3BhbnMocGFyYWdyYXBoKS5sZW5ndGggPiAwKSB7XG4gICAgICAvLyBzdGFydCBwYXJhZ3JhcGggb25seVxuICAgICAgY29uc3QgcmVtb3ZlZFNwYW5zID0gc3BsaWNlU3BhbnMocGFyYWdyYXBoU3BhbnMocGFyYWdyYXBoKSwgc3RhcnQuc3BhbkluZGV4LCBzdGFydC5vZmZzZXQsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCBtb2RlKTtcbiAgICAgIGlmKHBhcmFncmFwaFNwYW5zKHBhcmFncmFwaCkubGVuZ3RoID09PSAwICYmIG1vZGUgPT09IFNwbGljZU1vZGUuUmVtb3ZlKSB7XG4gICAgICAgIHBhcmFncmFwaHMuc3BsaWNlKGksIDEpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaSsrO1xuICAgICAgfVxuICAgICAgaWYocmVtb3ZlZFNwYW5zLnNwYW5zLmxlbmd0aCA+IDApIHtcbiAgICAgICAgcmVtb3ZlZC5wdXNoKHsgaWQ6IHBhcmFncmFwaC5pZCwgc3BhbnM6IHJlbW92ZWRTcGFucy5zcGFucywgcGFydGlhbDogcGFyYWdyYXBoU3BhbnMocGFyYWdyYXBoKS5sZW5ndGggPiAwIH0pO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZihwYXJhZ3JhcGguaWQgPT09IGVuZC5wYXJhZ3JhcGhJRCAmJiBwYXJhZ3JhcGhTcGFucyhwYXJhZ3JhcGgpLmxlbmd0aCA+IDApIHtcbiAgICAgIC8vIGVuZCBwYXJhZ3JhcGhcbiAgICAgIGNvbnN0IHJlbW92ZWRTcGFucyA9IHNwbGljZVNwYW5zKHBhcmFncmFwaFNwYW5zKHBhcmFncmFwaCksIDAsIDAsIGVuZC5zcGFuSW5kZXgsIGVuZC5vZmZzZXQsIG1vZGUpO1xuICAgICAgaWYocmVtb3ZlZFNwYW5zLnNwYW5zLmxlbmd0aCA+IDApIHtcbiAgICAgICAgcmVtb3ZlZC5wdXNoKHsgaWQ6IHBhcmFncmFwaC5pZCwgc3BhbnM6IHJlbW92ZWRTcGFucy5zcGFucywgcGFydGlhbDogcGFyYWdyYXBoU3BhbnMocGFyYWdyYXBoKS5sZW5ndGggPiAwIH0pO1xuICAgICAgfVxuICAgICAgLy8gY2hlY2sgaWYgc3RhcnQgcGFyYWdyYXBoIHdhcyBub24tZW1wdHkgKGFuZCB0aHVzIG5vdCByZW1vdmVkKVxuICAgICAgaWYocGFyYWdyYXBoU3BhbnMoc3RhcnRQYXJhZ3JhcGgpLmxlbmd0aCA+IDApIHtcbiAgICAgICAgLy8gam9pbiBmaXJzdCBhbmQgbGFzdCBwYXJhZ3JhcGhzLCBpLmUuLCBhcHBlbmQgcmVzdCBvZiB0aGUgbGFzdCB0byB0aGUgZmlyc3QgcGFyYWdyYXBoXG4gICAgICAgIGlmKG1vZGUgPT09IFNwbGljZU1vZGUuUmVtb3ZlKSB7XG4gICAgICAgICAgcGFyYWdyYXBoU3BhbnMoc3RhcnRQYXJhZ3JhcGgpLnNwbGljZShwYXJhZ3JhcGhTcGFucyhzdGFydFBhcmFncmFwaCkubGVuZ3RoLCAwLCAuLi5wYXJhZ3JhcGhTcGFucyhwYXJhZ3JhcGgpKTtcbiAgICAgICAgICBwYXJhZ3JhcGhzLnNwbGljZShpLCAxKTsgIC8vIHBhcmFncmFwaCBsZWZ0b3ZlciBzcGFucyBhcmUgYWRkZWQgdG8gc3RhcnQgcGFyYWdyYXBoXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGJyZWFrO1xuICAgIH0gZWxzZSBpZihwYXJhZ3JhcGguaWQgPT09IGVuZC5wYXJhZ3JhcGhJRCkge1xuICAgICAgLy8gZW1wdHkgZW5kIHBhcmFncmFwaCwgcmVtb3ZlIGl0XG4gICAgICBpZihtb2RlID09PSBTcGxpY2VNb2RlLlJlbW92ZSkge1xuICAgICAgICBwYXJhZ3JhcGhzLnNwbGljZShpLCAxKTtcbiAgICAgIH1cbiAgICAgIHJlbW92ZWQucHVzaChPYmplY3QuYXNzaWduKHt9LCBwYXJhZ3JhcGgsIHsgcGFydGlhbDogZmFsc2UgfSkpO1xuICAgICAgYnJlYWs7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIHJlbW92ZSBpbm5lciBwYXJhZ3JhcGggb2YgdGhlIHJhbmdlLCByZW1vdmUgaXRcbiAgICAgIGlmKG1vZGUgPT09IFNwbGljZU1vZGUuUmVtb3ZlKSB7XG4gICAgICAgIHBhcmFncmFwaHMuc3BsaWNlKGksIDEpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaSsrO1xuICAgICAgfVxuICAgICAgcmVtb3ZlZC5wdXNoKE9iamVjdC5hc3NpZ24oe30sIHBhcmFncmFwaCwgeyBwYXJ0aWFsOiBmYWxzZSB9KSk7XG4gICAgfVxuICB9XG4gIHJldHVybiByZW1vdmVkO1xufVxuXG5mdW5jdGlvbiBkYXRhQ29weVNwYW5zKHNwYW5zLCBzdGFydEluZGV4LCBzdGFydE9mZnNldCwgZW5kSW5kZXgsIGVuZE9mZnNldCkge1xuICBpZihzdGFydEluZGV4ID09PSB1bmRlZmluZWQpIHtcbiAgICBzdGFydEluZGV4ID0gMDtcbiAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gZGF0YUNvcHkoZGF0YSwgc3RhcnQsIGVuZCkge1xuICBjb25zdCBwYXJhZ3JhcGhzID0gZGF0YVBhcmFncmFwaHMoZGF0YSk7XG4gIGNvbnN0IGNvcGllZCA9IFtdO1xuICBmb3IobGV0IGk9c3RhcnQucGFyYWdyYXBoSW5kZXg7IGk8cGFyYWdyYXBocy5sZW5ndGggJiYgaSA8PSBlbmQucGFyYWdyYXBoSW5kZXg7IGkrKykge1xuICAgIGNvbnN0IHBhcmFncmFwaCA9IHBhcmFncmFwaHNbaV07XG4gICAgY29uc3Qgc3BhbnMgPSBwYXJhZ3JhcGhTcGFucyhwYXJhZ3JhcGgpO1xuICAgIGlmKHNwYW5zLmxlbmd0aCA9PT0gMCkge1xuICAgICAgY29waWVkLnB1c2gocGFyYWdyYXBoKTtcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cbiAgICBpZihpID09PSBzdGFydC5wYXJhZ3JhcGhJbmRleCAmJiBpID09PSBlbmQucGFyYWdyYXBoSW5kZXgpIHtcbiAgICAgIGlmKHN0YXJ0LnNwYW5JbmRleCA9PT0gdW5kZWZpbmVkIHx8IHN0YXJ0LnNwYW5JbmRleCA9PT0gLTEgfHwgZW5kLnNwYW5JbmRleCA9PT0gdW5kZWZpbmVkIHx8IGVuZC5zcGFuSW5kZXggPT09IC0xKSB7XG4gICAgICAgIGNvcGllZC5wdXNoKHBhcmFncmFwaCk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYoc3RhcnQub2Zmc2V0ID09PSB1bmRlZmluZWQgJiYgZW5kLm9mZnNldCA9PT0gdW5kZWZpbmVkKSB7XG5cbiAgICAgICAgfSBlbHNlIGlmKHN0YXJ0Lm9mZnNldCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIH0gZWxzZSBpZihlbmQub2Zmc2V0ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyBjaGVjayBwb3NpdGlvbnMgYm90aFxuICAgICAgICB9XG4gICAgICB9XG4gICAgICAvLyBsZXQgc2xpY2VTdGFydCA9IHN0YXJ0LlxuICAgIH0gZWxzZSBpZihpID09PSBzdGFydC5wYXJhZ3JhcGhJbmRleCkge1xuICAgIH0gZWxzZSBpZihpID09PSBlbmQucGFyYWdyYXBoSW5kZXgpIHtcbiAgICB9XG5cbiAgICBjb3BpZWRQYXJhZ3JhcGggPSBPYmplY3QuYXNzaWduKHt9LCBwYXJhZ3JhcGgsIHsgc3BhbnM6IFtdIH0pO1xuICAgIC8vIGZvcihsZXQgaz1zdGFydC5zcGFuSW5kZXgpXG4gICAgLy8gaWYoc3RhcnQuKVxuXG4gIH1cbiAgcmV0dXJuIGNvcGllZDtcblxuXG5cbiAgY29uc3QgcmVtb3ZlZCA9IFtdO1xuICBsZXQgc3RhcnRQYXJhZ3JhcGg7XG4gIGZvcihsZXQgaT1zdGFydC5wYXJhZ3JhcGhJbmRleDsgaTxwYXJhZ3JhcGhzLmxlbmd0aCAmJiBpIDw9IGVuZC5wYXJhZ3JhcGhJbmRleDspIHtcbiAgICBjb25zdCBwYXJhZ3JhcGggPSBwYXJhZ3JhcGhzW2ldO1xuICAgIGlmKHBhcmFncmFwaC5pZCA9PT0gc3RhcnQucGFyYWdyYXBoSUQpIHtcbiAgICAgIHN0YXJ0UGFyYWdyYXBoID0gcGFyYWdyYXBoO1xuICAgIH1cbiAgICBpZihwYXJhZ3JhcGguaWQgPT09IHN0YXJ0LnBhcmFncmFwaElEICYmIHBhcmFncmFwaC5pZCA9PT0gZW5kLnBhcmFncmFwaElEKSB7XG4gICAgICBpZihwYXJhZ3JhcGhTcGFucyhwYXJhZ3JhcGgpLmxlbmd0aCA+IDApIHtcbiAgICAgICAgLy8gbm9uLWVtcHR5IHBhcmFncmFwaFxuICAgICAgICBjb25zdCByZW1vdmVkU3BhbnMgPSBzcGxpY2VTcGFucyhwYXJhZ3JhcGhTcGFucyhwYXJhZ3JhcGgpLCBzdGFydC5zcGFuSW5kZXgsIHN0YXJ0Lm9mZnNldCwgZW5kLnNwYW5JbmRleCwgZW5kLm9mZnNldCk7XG4gICAgICAgIGlmKHJlbW92ZWRTcGFucy5zcGFucy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgcmVtb3ZlZC5wdXNoKHsgaWQ6IHBhcmFncmFwaC5pZCwgc3BhbnM6IHJlbW92ZWRTcGFucy5zcGFucyxcbiAgICAgICAgICAgIHBhcnRpYWw6IHN0YXJ0LnNwYW5JbmRleCA+IDAgfHwgc3RhcnQub2Zmc2V0ID4gMCB8fCBlbmQuc3BhbkluZGV4IDwgcGFyYWdyYXBoU3BhbnMocGFyYWdyYXBoKS5sZW5ndGggLSAxIHx8IGVuZC5vZmZzZXQgPCBsYXN0KHBhcmFncmFwaFNwYW5zKHBhcmFncmFwaCkpLnRleHQubGVuZ3RoIH0pO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBlbXB0eSBwYXJhZ3JhcGgsIHJlbW92ZSBpdFxuICAgICAgICBwYXJhZ3JhcGhzLnNwbGljZShpLCAxKTtcbiAgICAgICAgcmVtb3ZlZC5wdXNoKE9iamVjdC5hc3NpZ24oe30sIHBhcmFncmFwaCwgeyBwYXJ0aWFsOiBmYWxzZSB9KSk7XG4gICAgICB9XG4gICAgICBicmVhaztcbiAgICB9IGVsc2UgaWYocGFyYWdyYXBoLmlkID09PSBzdGFydC5wYXJhZ3JhcGhJRCAmJiBwYXJhZ3JhcGhTcGFucyhwYXJhZ3JhcGgpLmxlbmd0aCA+IDApIHtcbiAgICAgIC8vIHN0YXJ0IHBhcmFncmFwaCBvbmx5XG4gICAgICBjb25zdCByZW1vdmVkU3BhbnMgPSBzcGxpY2VTcGFucyhwYXJhZ3JhcGhTcGFucyhwYXJhZ3JhcGgpLCBzdGFydC5zcGFuSW5kZXgsIHN0YXJ0Lm9mZnNldCk7XG4gICAgICBpZihwYXJhZ3JhcGhTcGFucyhwYXJhZ3JhcGgpLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICBwYXJhZ3JhcGhzLnNwbGljZShpLCAxKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGkrKztcbiAgICAgIH1cbiAgICAgIGlmKHJlbW92ZWRTcGFucy5zcGFucy5sZW5ndGggPiAwKSB7XG4gICAgICAgIHJlbW92ZWQucHVzaCh7IGlkOiBwYXJhZ3JhcGguaWQsIHNwYW5zOiByZW1vdmVkU3BhbnMuc3BhbnMsIHBhcnRpYWw6IHBhcmFncmFwaFNwYW5zKHBhcmFncmFwaCkubGVuZ3RoID4gMCB9KTtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYocGFyYWdyYXBoLmlkID09PSBlbmQucGFyYWdyYXBoSUQgJiYgcGFyYWdyYXBoU3BhbnMocGFyYWdyYXBoKS5sZW5ndGggPiAwKSB7XG4gICAgICAvLyBlbmQgcGFyYWdyYXBoXG4gICAgICBjb25zdCByZW1vdmVkU3BhbnMgPSBzcGxpY2VTcGFucyhwYXJhZ3JhcGhTcGFucyhwYXJhZ3JhcGgpLCAwLCAwLCBlbmQuc3BhbkluZGV4LCBlbmQub2Zmc2V0KTtcbiAgICAgIGlmKHJlbW92ZWRTcGFucy5zcGFucy5sZW5ndGggPiAwKSB7XG4gICAgICAgIHJlbW92ZWQucHVzaCh7IGlkOiBwYXJhZ3JhcGguaWQsIHNwYW5zOiByZW1vdmVkU3BhbnMuc3BhbnMsIHBhcnRpYWw6IHBhcmFncmFwaFNwYW5zKHBhcmFncmFwaCkubGVuZ3RoID4gMCB9KTtcbiAgICAgIH1cbiAgICAgIC8vIGNoZWNrIGlmIHN0YXJ0IHBhcmFncmFwaCB3YXMgbm9uLWVtcHR5IChhbmQgdGh1cyBub3QgcmVtb3ZlZClcbiAgICAgIGlmKHBhcmFncmFwaFNwYW5zKHN0YXJ0UGFyYWdyYXBoKS5sZW5ndGggPiAwKSB7XG4gICAgICAgIC8vIGpvaW4gZmlyc3QgYW5kIGxhc3QgcGFyYWdyYXBocywgaS5lLiwgYXBwZW5kIHJlc3Qgb2YgdGhlIGxhc3QgdG8gdGhlIGZpcnN0IHBhcmFncmFwaFxuICAgICAgICBwYXJhZ3JhcGhTcGFucyhzdGFydFBhcmFncmFwaCkuc3BsaWNlKHBhcmFncmFwaFNwYW5zKHN0YXJ0UGFyYWdyYXBoKS5sZW5ndGgsIDAsIC4uLnBhcmFncmFwaFNwYW5zKHBhcmFncmFwaCkpO1xuICAgICAgICBwYXJhZ3JhcGhzLnNwbGljZShpLCAxKTsgIC8vIHBhcmFncmFwaCBsZWZ0b3ZlciBzcGFucyBhcmUgYWRkZWQgdG8gc3RhcnQgcGFyYWdyYXBoXG4gICAgICB9XG4gICAgICBicmVhaztcbiAgICB9IGVsc2UgaWYocGFyYWdyYXBoLmlkID09PSBlbmQucGFyYWdyYXBoSUQpIHtcbiAgICAgIC8vIGVtcHR5IGVuZCBwYXJhZ3JhcGgsIHJlbW92ZSBpdFxuICAgICAgcGFyYWdyYXBocy5zcGxpY2UoaSwgMSk7XG4gICAgICByZW1vdmVkLnB1c2goT2JqZWN0LmFzc2lnbih7fSwgcGFyYWdyYXBoLCB7IHBhcnRpYWw6IGZhbHNlIH0pKTtcbiAgICAgIGJyZWFrO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyByZW1vdmUgaW5uZXIgcGFyYWdyYXBoIG9mIHRoZSByYW5nZSwgcmVtb3ZlIGl0XG4gICAgICBwYXJhZ3JhcGhzLnNwbGljZShpLCAxKTtcbiAgICAgIHJlbW92ZWQucHVzaChPYmplY3QuYXNzaWduKHt9LCBwYXJhZ3JhcGgsIHsgcGFydGlhbDogZmFsc2UgfSkpO1xuICAgIH1cbiAgfVxuICByZXR1cm4gcmVtb3ZlZDtcbn1cblxuXG5leHBvcnQgZnVuY3Rpb24gZGF0YUluc2VydChkYXRhLCBzdGFydCwgbmV3RGF0YSkge1xuICBjb25zdCBwYXJhZ3JhcGhzID0gZGF0YVBhcmFncmFwaHMoZGF0YSk7XG4gIGNvbnN0IG5ld1BhcmFncmFwaHMgPSBkYXRhUGFyYWdyYXBocyhuZXdEYXRhKTtcbiAgaWYobmV3UGFyYWdyYXBocy5sZW5ndGggPT09IDApIHtcbiAgICByZXR1cm47XG4gIH1cblxuICBpZihwYXJhZ3JhcGhzLmxlbmd0aCA9PT0gMCkge1xuICAgIHBhcmFncmFwaHMuc3BsaWNlKDAsIDAsIC4uLm5ld0RhdGEpO1xuICAgIGNvbnN0IGxhc3RQYXJhZ3JhcGggPSBsYXN0KG5ld0RhdGEpO1xuICAgIHJldHVybiB7IHN0YXJ0OiBkYXRhUG9pbnRlcihkYXRhLCB7IHBhcmFncmFwaEluZGV4OiAwLCBzcGFuSW5kZXg6IDAsIG9mZnNldDogMCB9KSxcbiAgICAgIGVuZDogZGF0YVBvaW50ZXIoZGF0YSwgeyBwYXJhZ3JhcGhJbmRleDogbmV3RGF0YS5sZW5ndGggLSAxLCBzcGFuSW5kZXg6IGxhc3RQYXJhZ3JhcGguc3BhbnMubGVuZ3RoIC0gMSwgb2Zmc2V0OiBsYXN0KGxhc3RQYXJhZ3JhcGguc3BhbnMpLnRleHQubGVuZ3RoIH0pIH07XG4gIH1cblxuICBpZihuZXdQYXJhZ3JhcGhzLmxlbmd0aCA9PT0gMSkge1xuICAgIC8vIHNpbmdsZSBwYXJhZ3JhcGggdG8gYmUgaW5zZXJ0ZWRcblxuICAgIGNvbnN0IG5ld1NwYW5zID0gcGFyYWdyYXBoU3BhbnMobmV3UGFyYWdyYXBoc1swXSk7XG4gICAgY29uc3QgcGFyYWdyYXBoID0gcGFyYWdyYXBoc1tzdGFydC5wYXJhZ3JhcGhJbmRleF07XG5cbiAgICAvLyBsZXQgZW5kO1xuXG4gICAgbGV0IGluc2VydGVkU3RhcnQsIGluc2VydGVkRW5kO1xuXG4gICAgaWYoc3RhcnQub2Zmc2V0ID09PSAwKSB7XG4gICAgICAvLyBzcGFuIGJlbG9uZ3MgdG8gcmlnaHQgc2V0XG4gICAgICBwYXJhZ3JhcGhTcGFucyhwYXJhZ3JhcGgpLnNwbGljZShzdGFydC5zcGFuSW5kZXgsIDAsIC4uLm5ld1NwYW5zKTtcblxuICAgICAgaW5zZXJ0ZWRTdGFydCA9IGRhdGFQb2ludGVyKGRhdGEsIHsgcGFyYWdyYXBoSUQ6IHN0YXJ0LnBhcmFncmFwaElELCBzcGFuSW5kZXg6IHN0YXJ0LnNwYW5JbmRleCwgb2Zmc2V0OiAwIH0pO1xuICAgICAgaW5zZXJ0ZWRFbmQgPSBkYXRhUG9pbnRlcihkYXRhLCB7IHBhcmFncmFwaElEOiBzdGFydC5wYXJhZ3JhcGhJRCwgc3BhbkluZGV4OiBzdGFydC5zcGFuSW5kZXggKyBuZXdTcGFucy5sZW5ndGggLSAxLCBvZmZzZXQ6IC0xIH0pO1xuXG4gICAgfSBlbHNlIGlmKHN0YXJ0Lm9mZnNldCA9PT0gcGFyYWdyYXBoU3BhbnMocGFyYWdyYXBoKVtzdGFydC5zcGFuSW5kZXhdLnRleHQubGVuZ3RoKSB7XG4gICAgICAvLyBzcGFuIGJlbG9uZ3MgdG8gbGVmdCBzZXRcbiAgICAgIHBhcmFncmFwaFNwYW5zKHBhcmFncmFwaCkuc3BsaWNlKHN0YXJ0LnNwYW5JbmRleCsxLCAwLCAuLi5uZXdTcGFucyk7XG5cbiAgICAgIGluc2VydGVkU3RhcnQgPSBkYXRhUG9pbnRlcihkYXRhLCB7IHBhcmFncmFwaElEOiBzdGFydC5wYXJhZ3JhcGhJRCwgc3BhbkluZGV4OiBzdGFydC5zcGFuSW5kZXggKyAxLCBvZmZzZXQ6IDAgfSk7XG4gICAgICBpbnNlcnRlZEVuZCA9IGRhdGFQb2ludGVyKGRhdGEsIHsgcGFyYWdyYXBoSUQ6IHN0YXJ0LnBhcmFncmFwaElELCBzcGFuSW5kZXg6IHN0YXJ0LnNwYW5JbmRleCArIDEgKyBuZXdTcGFucy5sZW5ndGggLSAxLCBvZmZzZXQ6IC0xIH0pO1xuXG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIHNwYW4gbXVzdCBiZSBjdXQgaW4gaGFsZlxuICAgICAgY29uc3QgeyBsZWZ0LCByaWdodCB9ID0gc3BsaXRTcGFuKHBhcmFncmFwaFNwYW5zKHBhcmFncmFwaClbc3RhcnQuc3BhbkluZGV4XSwgc3RhcnQub2Zmc2V0KTtcbiAgICAgIHBhcmFncmFwaFNwYW5zKHBhcmFncmFwaCkuc3BsaWNlKHN0YXJ0LnNwYW5JbmRleCArIDEsIDAsIGNvcHlTcGFuKHBhcmFncmFwaFNwYW5zKHBhcmFncmFwaClbc3RhcnQuc3BhbkluZGV4XSwgcmlnaHQpKTtcbiAgICAgIE9iamVjdC5hc3NpZ24ocGFyYWdyYXBoU3BhbnMocGFyYWdyYXBoKVtzdGFydC5zcGFuSW5kZXhdLCBsZWZ0KTtcbiAgICAgIHBhcmFncmFwaFNwYW5zKHBhcmFncmFwaCkuc3BsaWNlKHN0YXJ0LnNwYW5JbmRleCArIDEsIDAsIC4uLm5ld1NwYW5zKTtcblxuICAgICAgaW5zZXJ0ZWRTdGFydCA9IGRhdGFQb2ludGVyKGRhdGEsIHsgcGFyYWdyYXBoSUQ6IHN0YXJ0LnBhcmFncmFwaElELCBzcGFuSW5kZXg6IHN0YXJ0LnNwYW5JbmRleCArIDEsIG9mZnNldDogMCB9KTtcbiAgICAgIGluc2VydGVkRW5kID0gZGF0YVBvaW50ZXIoZGF0YSwgeyBwYXJhZ3JhcGhJRDogc3RhcnQucGFyYWdyYXBoSUQsIHNwYW5JbmRleDogc3RhcnQuc3BhbkluZGV4ICsgMSArIG5ld1NwYW5zLmxlbmd0aCAtIDEsIG9mZnNldDogLTEgfSk7XG4gICAgfVxuXG4gICAgLy8gVE9ETzogaW50ZXJwb2xhdGUgaW5zZXJ0ZWQgc3BhbnNcbiAgICAvLyBUT0RPOiByZXF1aXJlczogcHJldiBhbmQgbmV4dCBzcGFucyBmb3IgdGltZSBpbmZvcm1hdGlvblxuXG4gICAgcmV0dXJuIHsgc3RhcnQ6IGluc2VydGVkU3RhcnQsIGVuZDogaW5zZXJ0ZWRFbmQsIHNwYW5zOiBuZXdTcGFucyB9O1xuICB9XG5cbiAgLy8gaW5zZXJ0IG11bHRpcGxlIHBhcmFncmFwaHNcblxuICBjb25zdCBzdGFydFBhcmFncmFwaCA9IHBhcmFncmFwaHNbc3RhcnQucGFyYWdyYXBoSW5kZXhdO1xuICBjb25zdCBsYXN0UGFyYWdyYXBoID0gbmV3UGFyYWdyYXBoKCk7XG4gIC8vIGxldCBlbmQ7XG5cbiAgbGV0IGluc2VydGVkU3RhcnQsIGluc2VydGVkRW5kO1xuXG4gIC8vIGZpcnN0IHBhcmFncmFwaCB0byBiZSBpbnNlcnRlZFxuICBpZihzdGFydC5zcGFuSW5kZXggIT0gdW5kZWZpbmVkICYmIHN0YXJ0LnNwYW5JbmRleCAhPSAtMSAmJiBwYXJhZ3JhcGhTcGFucyhzdGFydFBhcmFncmFwaCkubGVuZ3RoID4gMCkge1xuICAgIGlmKHN0YXJ0Lm9mZnNldCA9PT0gMCkge1xuICAgICAgLy8gc3BhbiBiZWxvbmdzIHRvIHJpZ2h0IHNldFxuICAgICAgY29uc3QgcmlnaHRTcGFucyA9IHBhcmFncmFwaFNwYW5zKHN0YXJ0UGFyYWdyYXBoKS5zcGxpY2Uoc3RhcnQuc3BhbkluZGV4KTtcbiAgICAgIHNldFBhcmFncmFwaFNwYW5zKGxhc3RQYXJhZ3JhcGgsIHJpZ2h0U3BhbnMpO1xuICAgIH0gZWxzZSBpZihzdGFydC5vZmZzZXQgPT09IHBhcmFncmFwaFNwYW5zKHN0YXJ0UGFyYWdyYXBoKVtzdGFydC5zcGFuSW5kZXhdLnRleHQubGVuZ3RoKSB7XG4gICAgICAvLyBzcGFuIGJlbG9uZ3MgdG8gbGVmdCBzZXRcbiAgICAgIGNvbnN0IHJpZ2h0U3BhbnMgPSBwYXJhZ3JhcGhTcGFucyhzdGFydFBhcmFncmFwaCkuc3BsaWNlKHN0YXJ0LnNwYW5JbmRleCsxKTtcbiAgICAgIHNldFBhcmFncmFwaFNwYW5zKGxhc3RQYXJhZ3JhcGgsIHJpZ2h0U3BhbnMpO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBzcGFuIG11c3QgYmUgY3V0IGluIGhhbGZcbiAgICAgIGNvbnN0IHJpZ2h0U3BhbnMgPSBwYXJhZ3JhcGhTcGFucyhzdGFydFBhcmFncmFwaCkuc3BsaWNlKHN0YXJ0LnNwYW5JbmRleCsxKTtcbiAgICAgIGNvbnN0IHsgbGVmdCwgcmlnaHQgfSA9IHNwbGl0U3BhbihwYXJhZ3JhcGhTcGFucyhzdGFydFBhcmFncmFwaClbc3RhcnQuc3BhbkluZGV4XSwgc3RhcnQub2Zmc2V0KTtcbiAgICAgIHNldFBhcmFncmFwaFNwYW5zKGxhc3RQYXJhZ3JhcGgsIHJpZ2h0U3BhbnMpO1xuICAgICAgcGFyYWdyYXBoU3BhbnMobGFzdFBhcmFncmFwaCkudW5zaGlmdChjb3B5U3BhbihwYXJhZ3JhcGhTcGFucyhzdGFydFBhcmFncmFwaClbc3RhcnQuc3BhbkluZGV4XSwgcmlnaHQpKTtcbiAgICAgIE9iamVjdC5hc3NpZ24ocGFyYWdyYXBoU3BhbnMoc3RhcnRQYXJhZ3JhcGgpW3N0YXJ0LnNwYW5JbmRleF0sIGxlZnQpO1xuICAgIH1cbiAgfVxuXG4gIGlmKHBhcmFncmFwaFNwYW5zKG5ld1BhcmFncmFwaHNbMF0pLmxlbmd0aCA+IDApIHtcbiAgICBpbnNlcnRlZFN0YXJ0ID0geyBwYXJhZ3JhcGhJRDogc3RhcnRQYXJhZ3JhcGguaWQsIHNwYW5JbmRleDogcGFyYWdyYXBoU3BhbnMocGFyYWdyYXBoc1tzdGFydC5wYXJhZ3JhcGhJbmRleF0pLmxlbmd0aCwgb2Zmc2V0OiAwIH07XG4gIH1cblxuICAvLyBhcHBlbmQgc3BhbnMgdG8gc3RhcnQgcGFyYWdyYXBoXG4gIHBhcmFncmFwaFNwYW5zKHBhcmFncmFwaHNbc3RhcnQucGFyYWdyYXBoSW5kZXhdKS5zcGxpY2UocGFyYWdyYXBoU3BhbnMocGFyYWdyYXBoc1tzdGFydC5wYXJhZ3JhcGhJbmRleF0pLmxlbmd0aCwgMCwgLi4ucGFyYWdyYXBoU3BhbnMobmV3UGFyYWdyYXBoc1swXSkpXG5cbiAgLy8gbWlkZGxlIHBhcmFncmFwaHNcbiAgbGV0IHBhcmFncmFwaEluZGV4ID0gc3RhcnQucGFyYWdyYXBoSW5kZXggKyAxO1xuICBpZihuZXdQYXJhZ3JhcGhzLmxlbmd0aCA+IDIpIHtcbiAgICBwYXJhZ3JhcGhzLnNwbGljZShwYXJhZ3JhcGhJbmRleCwgMCwgLi4ubmV3UGFyYWdyYXBocy5zbGljZSgxLCBuZXdQYXJhZ3JhcGhzLmxlbmd0aCAtIDEpKTsgIC8vIGdldFNwYW5zID8hP1xuICAgIHBhcmFncmFwaEluZGV4ICs9IG5ld1BhcmFncmFwaHMubGVuZ3RoIC0gMjtcbiAgfVxuXG4gIHBhcmFncmFwaFNwYW5zKGxhc3RQYXJhZ3JhcGgpLnNwbGljZSgwLCAwLCAuLi5wYXJhZ3JhcGhTcGFucyhuZXdQYXJhZ3JhcGhzW25ld1BhcmFncmFwaHMubGVuZ3RoIC0gMV0pKTtcbiAgcGFyYWdyYXBocy5zcGxpY2UocGFyYWdyYXBoSW5kZXgsIDAsIGxhc3RQYXJhZ3JhcGgpO1xuXG5cbiAgaWYoIWluc2VydGVkU3RhcnQpIHtcbiAgICBpbnNlcnRlZFN0YXJ0ID0geyBwYXJhZ3JhcGhJbmRleDogc3RhcnQucGFyYWdyYXBoSW5kZXggKyAxLCBzcGFuSW5kZXg6IDAsIG9mZnNldDogMCB9O1xuICB9XG5cbiAgaW5zZXJ0ZWRFbmQgPSBkYXRhUG9pbnRlcihkYXRhLCB7IHBhcmFncmFwaElEOiBsYXN0UGFyYWdyYXBoLmlkLCBzcGFuSW5kZXg6IHBhcmFncmFwaFNwYW5zKG5ld1BhcmFncmFwaHNbbmV3UGFyYWdyYXBocy5sZW5ndGggLSAxXSkubGVuZ3RoIC0gMSwgb2Zmc2V0OiAtMSB9KTtcblxuICBpbnNlcnRlZFN0YXJ0ID0gZGF0YVBvaW50ZXIoZGF0YSwgaW5zZXJ0ZWRTdGFydCk7XG5cbiAgLy8gVE9ETzogaW50ZXJwb2xhdGUgaW5zZXJ0ZWQgc3BhbnNcbiAgLy8gVE9ETzogcmVxdWlyZXM6IHByZXYgYW5kIG5leHQgc3BhbnMgZm9yIHRpbWUgaW5mb3JtYXRpb25cblxuICBjb25zdCBuZXdTcGFucyA9IGRhdGFQYXJhZ3JhcGhzKG5ld0RhdGEpLnJlZHVjZSgoc3BhbnMsIHBhcmFncmFwaCkgPT4gc3BhbnMuY29uY2F0KHBhcmFncmFwaFNwYW5zKHBhcmFncmFwaCkpLCBbXSk7XG5cbiAgcmV0dXJuIHsgc3RhcnQ6IGluc2VydGVkU3RhcnQsIGVuZDogaW5zZXJ0ZWRFbmQsIHNwYW5zOiBuZXdTcGFucyB9O1xufVxuXG5cbmZ1bmN0aW9uIGRhdGFNZXJnZVNwYW5zKHNwYW5zLCBzb3VyY2VTcGFucykge1xuICBsZXQgc291cmNlU3BhbjtcbiAgbGV0IGsgPSAwO1xuICBmb3IoY29uc3Qgc291cmNlU3BhbiBvZiBzb3VyY2VTcGFucykge1xuICAgIGlmKGsgPCBzcGFucy5sZW5ndGggJiYgc3BhbnNba10uaWQgPT09IHNvdXJjZVNwYW4uaWQpIHtcbiAgICAgIHNwYW5zW2tdLnRleHQgPSBzb3VyY2VTcGFuLnRleHQ7XG4gICAgICAvLyBkYXRhTWVyZ2VTcGFucyhzcGFuU3BhbnMoc3BhbnNba10pLCBzcGFuU3BhbnMoc291cmNlU3BhbikpO1xuICAgICAgaysrO1xuICAgIH0gZWxzZSB7XG4gICAgICBsZXQgZm91bmQgPSBmYWxzZTtcbiAgICAgIGZvcihsZXQgaj1rOyBqPHNwYW5zLmxlbmd0aDsgaisrKSB7XG4gICAgICAgIGlmKHNwYW5zW2pdLmlkID09PSBzb3VyY2VTcGFuLmlkKSB7XG4gICAgICAgICAgc3BhbnMuc3BsaWNlKGssIGotayk7XG4gICAgICAgICAgc3BhbnNba10udGV4dCA9IHNvdXJjZVNwYW4udGV4dDtcbiAgICAgICAgICBrKys7XG4gICAgICAgICAgZm91bmQgPSB0cnVlO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZighZm91bmQpIHtcbiAgICAgICAgc3BhbnMuc3BsaWNlKGssIDAsIHNvdXJjZVNwYW4pO1xuICAgICAgICBrKys7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIC8vIGNvbnNvbGUubG9nKCdzcGFucycsIHNwYW5zLmxlbmd0aCwgayk7XG4gIGlmKHNwYW5zLmxlbmd0aCA+IGspIHtcbiAgICBzcGFucy5zcGxpY2Uoayk7XG4gIH1cbiAgcmV0dXJuIHNwYW5zO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZGF0YU1lcmdlUGFyYWdyYXBocyhwYXJhZ3JhcGhzLCBzb3VyY2VQYXJhZ3JhcGhzKSB7XG4gIGxldCBzb3VyY2VQYXJhZ3JhcGg7XG4gIGxldCBrID0gMDtcbiAgZm9yKGNvbnN0IHNvdXJjZVBhcmFncmFwaCBvZiBzb3VyY2VQYXJhZ3JhcGhzKSB7XG4gICAgaWYoayA8IHBhcmFncmFwaHMubGVuZ3RoICYmIHBhcmFncmFwaHNba10uaWQgPT09IHNvdXJjZVBhcmFncmFwaC5pZCkge1xuICAgICAgLy8gY29uc29sZS5sb2coJ21lcmdpbmcgc3BhbnMnLCBwYXJhZ3JhcGhTcGFucyhwYXJhZ3JhcGhzW2tdKSwgcGFyYWdyYXBoU3BhbnMoc291cmNlUGFyYWdyYXBoKSlcbiAgICAgICAgZGF0YU1lcmdlU3BhbnMocGFyYWdyYXBoU3BhbnMocGFyYWdyYXBoc1trXSksIHBhcmFncmFwaFNwYW5zKHNvdXJjZVBhcmFncmFwaCkpO1xuICAgICAgICBrKys7XG4gICAgfSBlbHNlIHtcbiAgICAgIGxldCBmb3VuZCA9IGZhbHNlO1xuICAgICAgZm9yKGxldCBqPWs7IGo8cGFyYWdyYXBocy5sZW5ndGg7IGorKykge1xuICAgICAgICBpZihwYXJhZ3JhcGhzW2pdLmlkID09PSBzb3VyY2VQYXJhZ3JhcGguaWQpIHtcbiAgICAgICAgICBwYXJhZ3JhcGhzLnNwbGljZShrLCBqLWspO1xuICAgICAgICAgIHBhcmFncmFwaHNba10udGV4dCA9IHNvdXJjZVBhcmFncmFwaC50ZXh0O1xuICAgICAgICAgIGsrKztcbiAgICAgICAgICBmb3VuZCA9IHRydWU7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmKCFmb3VuZCkge1xuICAgICAgICBwYXJhZ3JhcGhzLnNwbGljZShrLCAwLCBzb3VyY2VQYXJhZ3JhcGgpO1xuICAgICAgICBrKys7XG4gICAgICB9XG4gICAgICAvLyBwYXJhZ3JhcGhzLnNwbGljZShrLCAwLCBzb3VyY2VQYXJhZ3JhcGgpO1xuICAgICAgLy8gaysrO1xuICAgIH1cbiAgfVxuICAvLyBjb25zb2xlLmxvZygncGFyYWdyYXBocycsIHBhcmFncmFwaHMubGVuZ3RoLCBrKTtcbiAgaWYocGFyYWdyYXBocy5sZW5ndGggPiBrKSB7XG4gICAgcGFyYWdyYXBocy5zcGxpY2Uoayk7XG4gIH1cblxuICByZXR1cm4gcGFyYWdyYXBocztcbn1cblxuXG5leHBvcnQgZnVuY3Rpb24gZGF0YVNlbGVjdGlvblRvT2Zmc2V0cyhkYXRhLCBzZWxlY3Rpb24pIHtcbiAgLy8gZ2V0IGxlZnQgYW5kIHJpZ2h0IHNwYW4vcGFyYWdyYXBoXG4gIC8vIGlmKHNlbGVjdGlvbi5wYXJhZ3JhcGhJRCAmJiBzZWxlY3Rpb24ucGFyYWdyYXBoSW5kZXggPT09IHVuZGVmaW5lZCB8fCAoc2VsZWN0aW9uLnNwYW5JRCAmJiBzZWxlY3Rpb24uc3BhbkluZGV4ID09PSB1bmRlZmluZWQpKSB7XG4gIC8vICAgc2VsZWN0aW9uXG4gIC8vIH1cbiAgZGF0YVBvaW50ZXIoZGF0YSwgc2VsZWN0aW9uLnN0YXJ0KTtcbiAgZGF0YVBvaW50ZXIoZGF0YSwgc2VsZWN0aW9uLmVuZCk7XG4gIHNlbGVjdGlvbi5zdGFydC5vZmZzZXRMZWZ0ID0gc2VsZWN0aW9uLnN0YXJ0Lm9mZnNldDtcbiAgaWYoc2VsZWN0aW9uLnN0YXJ0LnNwYW5JbmRleCA9PT0gMCkge1xuICAgIC8vIHNlbGVjdGlvbi5zdGFydC5vZmZzZXRGcm9tUGFyYWdyYXBoTGVmdCA9IHNlbGVjdGlvbi5zdGFydC5vZmZzZXQ7XG4gIH0gZWxzZSBpZihzZWxlY3Rpb24uc3RhcnQuc3BhbkluZGV4ID4gMCkge1xuICAgIHNlbGVjdGlvbi5zdGFydC5sZWZ0U3BhbkluZGV4ID0gc2VsZWN0aW9uLnN0YXJ0LnNwYW5JbmRleCAtIDE7XG4gICAgc2VsZWN0aW9uLnN0YXJ0LmxlZnRTcGFuSUQgPSBwYXJhZ3JhcGhTcGFucyhzZWxlY3Rpb24uc3RhcnQucGFyYWdyYXBoKVtzZWxlY3Rpb24uc3RhcnQuc3BhbkluZGV4IC0gMV0uaWQ7XG4gICAgLy8gc2VsZWN0aW9uLnN0YXJ0Lm9mZnNldEZyb21MZWZ0U3BhbiA9IHNlbGVjdGlvbi5zdGFydC5vZmZzZXQ7XG4gIH1cbiAgc2VsZWN0aW9uLmVuZC5vZmZzZXRSaWdodCA9IHNlbGVjdGlvbi5lbmQuc3Bhbi50ZXh0Lmxlbmd0aCAtIHNlbGVjdGlvbi5lbmQub2Zmc2V0O1xuICBpZihzZWxlY3Rpb24uZW5kLnNwYW5JbmRleCA+PSBwYXJhZ3JhcGhTcGFucyhzZWxlY3Rpb24uZW5kLnBhcmFncmFwaCkubGVuZ3RoKSB7XG4gICAgLy8gc2VsZWN0aW9uLnN0YXJ0Lm9mZnNldEZyb21QYXJhZ3JhcGhSaWdodCA9IHNlbGVjdGlvbi5lbmQuc3Bhbi50ZXh0Lmxlbmd0aCAtIHNlbGVjdGlvbi5lbmQub2Zmc2V0O1xuICB9IGVsc2UgaWYoc2VsZWN0aW9uLmVuZC5zcGFuSW5kZXggPCBwYXJhZ3JhcGhTcGFucyhzZWxlY3Rpb24uZW5kLnBhcmFncmFwaCkubGVuZ3RoIC0gMSkge1xuICAgIHNlbGVjdGlvbi5lbmQucmlnaHRTcGFuSW5kZXggPSBzZWxlY3Rpb24uZW5kLnNwYW5JbmRleCArIDE7XG4gICAgc2VsZWN0aW9uLmVuZC5yaWdodFNwYW5JRCA9IHBhcmFncmFwaFNwYW5zKHNlbGVjdGlvbi5lbmQucGFyYWdyYXBoKVtzZWxlY3Rpb24uZW5kLnNwYW5JbmRleCArIDFdLmlkO1xuICAgIC8vIHNlbGVjdGlvbi5lbmQub2Zmc2V0RnJvbVJpZ2h0U3BhbiA9IHNlbGVjdGlvbi5lbmQuc3Bhbi50ZXh0Lmxlbmd0aCAtIHNlbGVjdGlvbi5lbmQub2Zmc2V0O1xuICB9XG5cbiAgcmV0dXJuIHNlbGVjdGlvbjtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGRhdGFTZWxlY3Rpb25SZXN0b3JlRnJvbU9mZnNldHMoZGF0YSwgc2VsZWN0aW9uKSB7XG4gIGlmKHNlbGVjdGlvbi5zdGFydC5vZmZzZXRMZWZ0ICE9PSB1bmRlZmluZWQpIHtcbiAgICBsZXQgb2Zmc2V0ID0gMDtcbiAgICBjb25zdCBzcGFucyA9IHBhcmFncmFwaFNwYW5zKHNlbGVjdGlvbi5zdGFydC5wYXJhZ3JhcGgpO1xuICAgIGZvcihsZXQgaT1zZWxlY3Rpb24uc3RhcnQubGVmdFNwYW5JbmRleCA9PT0gdW5kZWZpbmVkID8gMCA6IHNlbGVjdGlvbi5zdGFydC5sZWZ0U3BhbkluZGV4KzE7IGk8c3BhbnMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGNvbnN0IHNwYW4gPSBzcGFuc1tpXTtcbiAgICAgIGlmKHNlbGVjdGlvbi5zdGFydC5vZmZzZXRMZWZ0ID49IG9mZnNldCAmJiBzZWxlY3Rpb24uc3RhcnQub2Zmc2V0TGVmdCA8PSBvZmZzZXQgKyBzcGFuLnRleHQubGVuZ3RoKSB7XG4gICAgICAgIHNlbGVjdGlvbi5zdGFydC5zcGFuSW5kZXggPSBpO1xuICAgICAgICBzZWxlY3Rpb24uc3RhcnQuc3BhbiA9IHNwYW47XG4gICAgICAgIHNlbGVjdGlvbi5zdGFydC5zcGFuSUQgPSBzcGFuLmlkO1xuICAgICAgICBzZWxlY3Rpb24uc3RhcnQub2Zmc2V0ID0gc2VsZWN0aW9uLnN0YXJ0Lm9mZnNldExlZnQgLSBvZmZzZXQ7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgICAgb2Zmc2V0ICs9IHNwYW4udGV4dC5sZW5ndGg7XG4gICAgfVxuICAgIGRlbGV0ZSBzZWxlY3Rpb24uc3RhcnQub2Zmc2V0TGVmdDtcbiAgICBkZWxldGUgc2VsZWN0aW9uLnN0YXJ0LmxlZnRTcGFuSW5kZXg7XG4gICAgZGVsZXRlIHNlbGVjdGlvbi5zdGFydC5sZWZ0U3BhbklEO1xuICB9XG4gIGlmKHNlbGVjdGlvbi5lbmQub2Zmc2V0UmlnaHQgIT09IHVuZGVmaW5lZCkge1xuICAgIGxldCBvZmZzZXQgPSAwO1xuICAgIGNvbnN0IHNwYW5zID0gcGFyYWdyYXBoU3BhbnMoc2VsZWN0aW9uLmVuZC5wYXJhZ3JhcGgpO1xuICAgIGZvcihsZXQgaT1zZWxlY3Rpb24uZW5kLnJpZ2h0U3BhbkluZGV4ID09PSB1bmRlZmluZWQgPyBzcGFucy5sZW5ndGgtMSA6IHNlbGVjdGlvbi5lbmQucmlnaHRTcGFuSW5kZXgtMTsgaSA+PSAwOyBpLS0pIHtcbiAgICAgIGNvbnN0IHNwYW4gPSBzcGFuc1tpXTtcbiAgICAgIGlmKHNlbGVjdGlvbi5lbmQub2Zmc2V0UmlnaHQgPj0gb2Zmc2V0ICYmIHNlbGVjdGlvbi5lbmQub2Zmc2V0UmlnaHQgPD0gb2Zmc2V0ICsgc3Bhbi50ZXh0Lmxlbmd0aCkge1xuICAgICAgICBzZWxlY3Rpb24uZW5kLnNwYW5JbmRleCA9IGk7XG4gICAgICAgIHNlbGVjdGlvbi5lbmQuc3BhbiA9IHNwYW47XG4gICAgICAgIHNlbGVjdGlvbi5lbmQuc3BhbklEID0gc3Bhbi5pZDtcbiAgICAgICAgc2VsZWN0aW9uLmVuZC5vZmZzZXQgPSBzcGFuLnRleHQubGVuZ3RoIC0gKHNlbGVjdGlvbi5lbmQub2Zmc2V0UmlnaHQgLSBvZmZzZXQpO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICAgIG9mZnNldCArPSBzcGFuLnRleHQubGVuZ3RoO1xuICAgIH1cbiAgICBkZWxldGUgc2VsZWN0aW9uLmVuZC5vZmZzZXRSaWdodDtcbiAgICBkZWxldGUgc2VsZWN0aW9uLnN0YXJ0LnJpZ2h0U3BhbkluZGV4O1xuICAgIGRlbGV0ZSBzZWxlY3Rpb24uc3RhcnQucmlnaHRTcGFuSUQ7XG4gIH1cbiAgcmV0dXJuIHNlbGVjdGlvbjtcbn1cblxuXG5cblxuZnVuY3Rpb24qIHBhcmFncmFwaFNwYW5JdGVyYXRvcihzcGFucywgc3RhcnRJRCwgZW5kSUQpIHtcbiAgbGV0IHN0YXJ0ZWQgPSBzdGFydElEID09PSB1bmRlZmluZWQ7XG4gIGZvcihjb25zdCBzcGFuIG9mIHNwYW5zKSB7XG4gICAgaWYoIXN0YXJ0ZWQgJiYgc3Bhbi5pZCA9PT0gc3RhcnRJRCkge1xuICAgICAgc3RhcnRlZCA9IHRydWU7XG4gICAgfVxuICAgIGlmKCFzdGFydGVkKSB7XG4gICAgICBjb250aW51ZTtcbiAgICB9XG4gICAgeWllbGQgc3BhbjtcbiAgICBpZihlbmRJRCAhPT0gdW5kZWZpbmVkICYmIHNwYW4uaWQgPT09IGVuZElEKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiogZGF0YVNwYW5JdGVyYXRvcihkYXRhLCBzdGFydCwgZW5kKSB7XG4gIGNvbnN0IHBhcmFncmFwaHMgPSBkYXRhO1xuICBsZXQgc3RhcnRlZCA9IGZhbHNlO1xuICBmb3IoY29uc3QgcGFyYWdyYXBoIG9mIHBhcmFncmFwaHMpIHtcbiAgICBpZighc3RhcnQpIHtcbiAgICAgIHN0YXJ0ZWQgPSB0cnVlO1xuICAgIH1cbiAgICBpZihzdGFydCAmJiBwYXJhZ3JhcGguaWQgPT09IHN0YXJ0LnBhcmFncmFwaElEICYmIGVuZCAmJiBwYXJhZ3JhcGguaWQgPT09IGVuZC5wYXJhZ3JhcGhJRCkge1xuICAgICAgeWllbGQqIHBhcmFncmFwaFNwYW5JdGVyYXRvcihwYXJhZ3JhcGguc3BhbnMsIHN0YXJ0LnNwYW5JRCwgZW5kLnNwYW5JRCk7XG4gICAgICByZXR1cm47XG4gICAgfSBlbHNlIGlmKHN0YXJ0ICYmIHBhcmFncmFwaC5pZCA9PT0gc3RhcnQucGFyYWdyYXBoSUQpIHtcbiAgICAgIHN0YXJ0ZWQgPSB0cnVlO1xuICAgICAgeWllbGQqIHBhcmFncmFwaFNwYW5JdGVyYXRvcihwYXJhZ3JhcGguc3BhbnMsIHN0YXJ0LnNwYW5JRCk7XG4gICAgfSBlbHNlIGlmKGVuZCAmJiBwYXJhZ3JhcGguaWQgPT09IGVuZC5wYXJhZ3JhcGhJRCkge1xuICAgICAgaWYoc3RhcnRlZCkge1xuICAgICAgICB5aWVsZCogcGFyYWdyYXBoU3Bhbkl0ZXJhdG9yKHBhcmFncmFwaC5zcGFucywgdW5kZWZpbmVkLCBlbmQuc3BhbklEKTtcbiAgICAgIH1cbiAgICAgIHJldHVybjtcbiAgICB9IGVsc2UgaWYoc3RhcnRlZCkge1xuICAgICAgeWllbGQqIHBhcmFncmFwaC5zcGFucztcbiAgICB9XG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uKiBkYXRhSXRlcmF0b3IoZGF0YSwgc3RhcnQsIGVuZCkge1xuICBjb25zdCBwYXJhZ3JhcGhzID0gZGF0YTtcbiAgbGV0IHN0YXJ0ZWQgPSBmYWxzZTtcbiAgZm9yKGNvbnN0IHBhcmFncmFwaCBvZiBwYXJhZ3JhcGhzKSB7XG4gICAgaWYoIXN0YXJ0KSB7XG4gICAgICBzdGFydGVkID0gdHJ1ZTtcbiAgICB9XG4gICAgaWYoc3RhcnQgJiYgcGFyYWdyYXBoLmlkID09PSBzdGFydC5wYXJhZ3JhcGhJRCAmJiBlbmQgJiYgcGFyYWdyYXBoLmlkID09PSBlbmQucGFyYWdyYXBoSUQpIHtcbiAgICAgIC8vIHlpZWxkKiBwYXJhZ3JhcGhTcGFuSXRlcmF0b3IocGFyYWdyYXBoLnNwYW5zLCBzdGFydC5zcGFuSUQsIGVuZC5zcGFuSUQpO1xuICAgICAgeWllbGQgeyBwYXJhZ3JhcGgsIHNwYW5zOiBBcnJheS5mcm9tKHBhcmFncmFwaFNwYW5JdGVyYXRvcihwYXJhZ3JhcGguc3BhbnMsIHN0YXJ0LnNwYW5JRCwgZW5kLnNwYW5JRCkpIH07XG4gICAgICByZXR1cm47XG4gICAgfSBlbHNlIGlmKHN0YXJ0ICYmIHBhcmFncmFwaC5pZCA9PT0gc3RhcnQucGFyYWdyYXBoSUQpIHtcbiAgICAgIHN0YXJ0ZWQgPSB0cnVlO1xuICAgICAgLy8geWllbGQqIHBhcmFncmFwaFNwYW5JdGVyYXRvcihwYXJhZ3JhcGguc3BhbnMsIHN0YXJ0LnNwYW5JRCk7XG4gICAgICB5aWVsZCB7IHBhcmFncmFwaCwgc3BhbnM6IEFycmF5LmZyb20ocGFyYWdyYXBoU3Bhbkl0ZXJhdG9yKHBhcmFncmFwaC5zcGFucywgc3RhcnQuc3BhbklEKSkgfTtcbiAgICB9IGVsc2UgaWYoZW5kICYmIHBhcmFncmFwaC5pZCA9PT0gZW5kLnBhcmFncmFwaElEKSB7XG4gICAgICBpZihzdGFydGVkKSB7XG4gICAgICAgIC8vIHlpZWxkKiBwYXJhZ3JhcGhTcGFuSXRlcmF0b3IocGFyYWdyYXBoLnNwYW5zLCB1bmRlZmluZWQsIGVuZC5zcGFuSUQpO1xuICAgICAgICB5aWVsZCB7IHBhcmFncmFwaCwgc3BhbnM6IEFycmF5LmZyb20ocGFyYWdyYXBoU3Bhbkl0ZXJhdG9yKHBhcmFncmFwaC5zcGFucywgdW5kZWZpbmVkLCBlbmQuc3BhbklEKSkgfTtcbiAgICAgIH1cbiAgICAgIHJldHVybjtcbiAgICB9IGVsc2UgaWYoc3RhcnRlZCkge1xuICAgICAgLy8geWllbGQqIHBhcmFncmFwaC5zcGFucztcbiAgICAgIHlpZWxkIHsgcGFyYWdyYXBoLCBzcGFuczogQXJyYXkuZnJvbShwYXJhZ3JhcGguc3BhbnMpIH07XG4gICAgfVxuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBuZXh0KGRhdGEsIHBvaW50ZXIpIHtcbiAgY29uc3QgcGFyYWdyYXBocyA9IGRhdGE7XG4gIGxldCB7IHBhcmFncmFwaEluZGV4LCBzcGFuSW5kZXgsIHBhcmFncmFwaCB9ID0gaWRUb0luZGV4KGRhdGEsIHBvaW50ZXIucGFyYWdyYXBoSUQsIHBvaW50ZXIuc3BhbklEKTtcbiAgaWYoc3BhbkluZGV4IDwgcGFyYWdyYXBoLnNwYW5zLmxlbmd0aCAtIDEpIHtcbiAgICBzcGFuSW5kZXggKz0gMTtcbiAgICByZXR1cm4gT2JqZWN0LmFzc2lnbih7IHBhcmFncmFwaElEOiBwYXJhZ3JhcGguaWQsIHNwYW5JRDogcGFyYWdyYXBoLnNwYW5zW3NwYW5JbmRleF0uaWQgfSwgaWRUb0luZGV4KGRhdGEsIHBhcmFncmFwaC5pZCwgcGFyYWdyYXBoLnNwYW5zW3NwYW5JbmRleF0pKTtcbiAgfSBlbHNlIGlmKHBhcmFncmFwaEluZGV4IDwgcGFyYWdyYXBocy5sZW5ndGgtMSkge1xuICAgIHBhcmFncmFwaEluZGV4ICs9IDE7XG4gICAgc3BhbkluZGV4ID0gMDtcbiAgICBmb3IoOyBwYXJhZ3JhcGhJbmRleCA8IHBhcmFncmFwaHMubGVuZ3RoOyBwYXJhZ3JhcGhJbmRleCsrKSB7XG4gICAgICBwYXJhZ3JhcGggPSBwYXJhZ3JhcGhzW3BhcmFncmFwaEluZGV4XTtcbiAgICAgIGlmKHBhcmFncmFwaC5zcGFucy5sZW5ndGggPiAwKSB7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH1cbiAgICBpZihwYXJhZ3JhcGguc3BhbnMubGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHJldHVybiBwb2ludGVyUmVzb2x2ZShkYXRhLCBPYmplY3QuYXNzaWduKHsgcGFyYWdyYXBoSUQ6IHBhcmFncmFwaC5pZCwgc3BhbklEOiBwYXJhZ3JhcGguc3BhbnNbc3BhbkluZGV4XS5pZCB9LCBpZFRvSW5kZXgoZGF0YSwgcGFyYWdyYXBoLmlkLCBwYXJhZ3JhcGguc3BhbnNbc3BhbkluZGV4XSkpKTtcbiAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gcHJldihkYXRhLCBwb2ludGVyKSB7XG4gIGNvbnN0IHBhcmFncmFwaHMgPSBkYXRhO1xuICBsZXQgeyBwYXJhZ3JhcGhJbmRleCwgc3BhbkluZGV4LCBwYXJhZ3JhcGggfSA9IGlkVG9JbmRleChkYXRhLCBwb2ludGVyLnBhcmFncmFwaElELCBwb2ludGVyLnNwYW5JRCk7XG4gIGlmKHNwYW5JbmRleCA+IDApIHtcbiAgICBzcGFuSW5kZXggLT0gMTtcbiAgICByZXR1cm4gT2JqZWN0LmFzc2lnbih7IHBhcmFncmFwaElEOiBwYXJhZ3JhcGguaWQsIHNwYW5JRDogcGFyYWdyYXBoLnNwYW5zW3NwYW5JbmRleF0uaWQgfSwgaWRUb0luZGV4KGRhdGEsIHBhcmFncmFwaC5pZCwgcGFyYWdyYXBoLnNwYW5zW3NwYW5JbmRleF0pKTtcbiAgfSBlbHNlIGlmKHBhcmFncmFwaEluZGV4ID4gMCkge1xuICAgIHBhcmFncmFwaEluZGV4IC09IDE7XG4gICAgc3BhbkluZGV4ID0gMDtcbiAgICBmb3IoOyBwYXJhZ3JhcGhJbmRleCA+PSAwOyBwYXJhZ3JhcGhJbmRleC0tKSB7XG4gICAgICBwYXJhZ3JhcGggPSBwYXJhZ3JhcGhzW3BhcmFncmFwaEluZGV4XTtcbiAgICAgIGlmKHBhcmFncmFwaC5zcGFucy5sZW5ndGggPiAwKSB7XG4gICAgICAgIHNwYW5JbmRleCA9IHBhcmFncmFwaC5zcGFucy5sZW5ndGgtMTtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuICAgIGlmKHBhcmFncmFwaC5zcGFucy5sZW5ndGggPT09IDApIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgcmV0dXJuIHBvaW50ZXJSZXNvbHZlKGRhdGEsIE9iamVjdC5hc3NpZ24oeyBwYXJhZ3JhcGhJRDogcGFyYWdyYXBoLmlkLCBzcGFuSUQ6IHBhcmFncmFwaC5zcGFuc1tzcGFuSW5kZXhdLmlkIH0sIGlkVG9JbmRleChkYXRhLCBwYXJhZ3JhcGguaWQsIHBhcmFncmFwaC5zcGFuc1tzcGFuSW5kZXhdKSkpO1xuICB9XG59XG4iLCI8dGVtcGxhdGU+XG4gIDxkaXYgc3R5bGU9XCJib3JkZXI6IDFweCBzb2xpZCAjY2NjXCIgOmNvbnRlbnRlZGl0YWJsZT1cInRoaXMuZWRpdGFibGVcIiBzcGVsbGNoZWNrPVwiZmFsc2VcIiB2X2lmPVwiZW5hYmxlZFwiIDprZXk9XCJra1wiXG4gICAgQGlucHV0PVwib25JbnB1dFwiIEBrZXlkb3duPVwib25LZXlkb3duXCIgQHBhc3RlPVwib25QYXN0ZVwiIEBjdXQ9XCJvbkN1dFwiIEBjb3B5PVwib25Db3B5XCJcbiAgICBAc2VsZWN0c3RhcnQ9XCJzZWxlY3RTdGFydFwiIEBtb3VzZXVwPVwic2VsZWN0RW5kXCIgQGRyYWdzdGFydD1cIm9uRHJhZ1N0YXJ0XCJcbiAgICByZWY9XCJjb250YWluZXJcIiBjbGFzcz1cInRyYW5zY3JpcHRcIj5cbiAgICA8ZGl2IHYtZm9yPVwiKHBhcmFncmFwaCwgaW5kZXgpIGluIHBhcmFncmFwaHNcIiA6ZGF0YS1pZD1cInBhcmFncmFwaC5pZFwiIDprZXk9XCJwYXJhZ3JhcGguaWRcIiA6Y29udGVudGVkaXRhYmxlPVwidGhpcy5lZGl0YWJsZVwiXG4gICAgICA6Y2xhc3M9XCJ7ICdsaXN0LWl0ZW0nOiBwYXJhZ3JhcGguYnVsbGV0IH1cIiBjbGFzcz1cInBhcmFncmFwaFwiPlxuICAgICAgPCEtLSA8c3Ryb25nIGNsYXNzPVwicGFyYWdyYXBoLW51bWJlciBub3NlbGVjdFwiIGNvbnRlbnRlZGl0YWJsZT1cImZhbHNlXCIgc3R5bGU9XCJ3aWR0aDogNDZweDsgZGlzcGxheTogaW5saW5lLWJsb2NrOyB0ZXh0LWFsaWduOiByaWdodDtcIj57e2luZGV4ICsgMX19LiZuYnNwOyZuYnNwOyZuYnNwOzwvc3Ryb25nPjxzdHJvbmcgY2xhc3M9XCJub3NlbGVjdFwiIGNvbnRlbnRlZGl0YWJsZT1cImZhbHNlXCI+JiM4MjAzOzwvc3Ryb25nPiAtLT5cbiAgICAgIDxzcGFuIHYtZm9yPVwiKHNwYW4sIGluZGV4KSBpbiBwYXJhZ3JhcGguc3BhbnNcIiA6a2V5PVwic3Bhbi5pZFwiIDpkYXRhLWZpcnN0PVwiaW5kZXggPT0gMFwiIDpkYXRhLWxhc3Q9XCJpbmRleCA+PSBwYXJhZ3JhcGguc3BhbnMubGVuZ3RoLTFcIiA6Y29udGVudGVkaXRhYmxlPVwidGhpcy5lZGl0YWJsZVwiXG4gICAgICB2X3RleHQ9XCJzcGFuLnRleHRcIiB2X2lmPVwicGFyYWdyYXBoICYmIHBhcmFncmFwaC5zcGFucy5sZW5ndGggPiAwXCJcbiAgICAgICAgICAgIDpkYXRhLWlkPVwic3Bhbi5pZFwiIDpkYXRhLXRpbWU9XCJzcGFuLnRpbWVcIiA6ZGF0YS1kdXJhdGlvbj1cInNwYW4uZHVyYXRpb25cIiA6ZGF0YS1jb25maWRlbmNlPVwic3Bhbi5jb25maWRlbmNlXCIgY2xhc3M9XCJzcGFuIHRva2VuXCJcbiAgICAgICAgICAgIDpjbGFzcz1cIntcbiAgICAgICAgICAgICAgc2VsZWN0ZWQ6IHNwYW4udGltZSA8PSB0aW1lICYmIHRpbWUgPCBzcGFuLnRpbWUgKyBzcGFuLmR1cmF0aW9uLFxuICAgICAgICAgICAgICBwYXN0OiBzcGFuLnRpbWUgKyBzcGFuLmR1cmF0aW9uIDw9IHRpbWUsIGhpZ2hsaWdodGVkOiBzcGFuLmhpZ2hsaWdodGVkLFxuICAgICAgICAgICAgICBib2xkOiBzcGFuLmZvcm1hdCAmJiBzcGFuLmZvcm1hdC5ib2xkLCBpdGFsaWM6IHNwYW4uZm9ybWF0ICYmIHNwYW4uZm9ybWF0Lml0YWxpYywgdW5kZXJsaW5lOiBzcGFuLmZvcm1hdCAmJiBzcGFuLmZvcm1hdC51bmRlcmxpbmUsXG4gICAgICAgICAgICAgIHN1cGVyc2NyaXB0OiBzcGFuLmZvcm1hdCAmJiBzcGFuLmZvcm1hdC5zdXBlcnNjcmlwdCwgc3Vic2NyaXB0OiBzcGFuLmZvcm1hdCAmJiBzcGFuLmZvcm1hdC5zdWJzY3JpcHQsXG4gICAgICAgICAgICB9XCJcbiAgICAgICAgICAgIEBjbGljaz1cInNwYW5TZWxlY3RlZChzcGFuLCAkZXZlbnQpXCJcbiAgICAgICAgICAgIDpzdHlsZT1cInRoaXMuc2hvd0NvbmZpZGVuY2UgPyBgb3BhY2l0eTogJHtNYXRoLnBvdyhzcGFuLmNvbmZpZGVuY2UsIDAuNSkgLyAyICsgLjV9O2AgOiAnJ1wiXG4gICAgICAgICAgICA6dGl0bGU9XCJ0aGlzLnNob3dDb25maWRlbmNlID8gYENvbmZpZGVuY2U6ICR7c3Bhbi5jb25maWRlbmNlfWAgOiAnJ1wiXG4gICAgICA+XG4gICAgICAgIHt7c3Bhbi50ZXh0fX1cbiAgICAgIDwvc3Bhbj5cbiAgICAgIDwhLS0gPGJyIHYtZWxzZSAvPiAtLT5cbiAgICAgIDwhLS0gVE9ETzoga2V5ZG93bjogaW5zZXJ0IHNwYW4gaW50byBwYXJhZ3JhcGggZGF0YSBzdHJ1Y3R1cmUgLS0+XG4gICAgICA8IS0tIDxzcGFuIHYtaWY9XCIhcGFyYWdyYXBoLnNwYW5zIHx8IHBhcmFncmFwaC5zcGFucy5sZW5ndGggPT0gMFwiIGNsYXNzPVwic3BhbiB0b2tlbiAtcHNldWRvIC1ub3NlbGVjdFwiIDprZXk9XCJwYXJhZ3JhcGguaWQgKyAnLS0tJ1wiPiYjODIwMzs8L3NwYW4+IC0tPlxuICAgICAgPCEtLSA8c3BhbiB2LWlmPVwiIXBhcmFncmFwaC5zcGFucyB8fCBwYXJhZ3JhcGguc3BhbnMubGVuZ3RoID09IDBcIiBjb250ZW50ZWRpdGFibGU9XCJmYWxzZVwiIGNsYXNzPVwibm9zZWxlY3RcIj4mIzgyMDM7PC9zcGFuPiAtLT5cbiAgICA8L2Rpdj5cbiAgPC9kaXY+XG48L3RlbXBsYXRlPlxuXG48c2NyaXB0PlxuXG4vLyBodHRwczovL2xldmVsdXAuZ2l0Y29ubmVjdGVkLmNvbS9kZWJvdW5jZS1pbi1qYXZhc2NyaXB0LWltcHJvdmUteW91ci1hcHBsaWNhdGlvbnMtcGVyZm9ybWFuY2UtNWIwMTg1NWUwODZcbi8vIGh0dHBzOi8vZGF2aWR3YWxzaC5uYW1lL2phdmFzY3JpcHQtZGVib3VuY2UtZnVuY3Rpb25cbi8vIFJldHVybnMgYSBmdW5jdGlvbiwgdGhhdCwgYXMgbG9uZyBhcyBpdCBjb250aW51ZXMgdG8gYmUgaW52b2tlZCwgd2lsbCBub3Rcbi8vIGJlIHRyaWdnZXJlZC4gVGhlIGZ1bmN0aW9uIHdpbGwgYmUgY2FsbGVkIGFmdGVyIGl0IHN0b3BzIGJlaW5nIGNhbGxlZCBmb3Jcbi8vIE4gbWlsbGlzZWNvbmRzLiBJZiBgaW1tZWRpYXRlYCBpcyBwYXNzZWQsIHRyaWdnZXIgdGhlIGZ1bmN0aW9uIG9uIHRoZVxuLy8gbGVhZGluZyBlZGdlLCBpbnN0ZWFkIG9mIHRoZSB0cmFpbGluZy5cbmNvbnN0IGRlYm91bmNlID0gKGZ1bmMsIHdhaXQsIGltbWVkaWF0ZSkgPT4ge1xuICBsZXQgdGltZW91dDtcblxuICByZXR1cm4gZnVuY3Rpb24gZXhlY3V0ZWRGdW5jdGlvbiguLi5hcmdzKSB7XG4gICAgY29uc3QgbGF0ZXIgPSAoKSA9PiB7XG4gICAgICB0aW1lb3V0ID0gbnVsbDtcbiAgICAgIGlmKCFpbW1lZGlhdGUpIGZ1bmMuYXBwbHkodGhpcywgYXJncyk7XG4gICAgfTtcbiAgICBjb25zdCBjYWxsTm93ID0gaW1tZWRpYXRlICYmICF0aW1lb3V0O1xuICAgIGNsZWFyVGltZW91dCh0aW1lb3V0KTtcbiAgICB0aW1lb3V0ID0gc2V0VGltZW91dChsYXRlciwgd2FpdCk7XG4gICAgaWYoY2FsbE5vdykgZnVuYy5hcHBseSh0aGlzLCBhcmdzKTtcbiAgfTtcbn07XG5cbmZ1bmN0aW9uIGRlYm91bmNlZChmdW5jLCB3YWl0LCBpbW1lZGlhdGUpIHtcbiAgbGV0IHRpbWVvdXQ7XG5cbiAgcmV0dXJuIHtcblxuICAgIG5vdyhzZWxmLCAuLi5hcmdzKSB7XG4gICAgICB0aW1lb3V0ID0gbnVsbDtcbiAgICAgIGlmKCFpbW1lZGlhdGUpIHJldHVybiBmdW5jLmFwcGx5KHNlbGYsIGFyZ3MpO1xuICAgIH0sXG5cbiAgICBkZWJvdW5jZWQoc2VsZiwgLi4uYXJncykge1xuICAgICAgY29uc3QgY2FsbE5vdyA9IGltbWVkaWF0ZSAmJiAhdGltZW91dDtcbiAgICAgIGNsZWFyVGltZW91dCh0aW1lb3V0KTtcbiAgICAgIHRpbWVvdXQgPSBzZXRUaW1lb3V0KCgpID0+IHsgdGhpcy5ub3coc2VsZiwgLi4uYXJncyk7IH0sIHdhaXQpO1xuICAgICAgaWYoY2FsbE5vdykgZnVuYy5hcHBseShzZWxmLCBhcmdzKTtcbiAgICB9LFxuICB9O1xufVxuXG5cblxuaW1wb3J0IHtcbiAgcGFyc2VET00sXG4gIHBhcnNlVmFuaWxsYURPTSxcbiAgZGF0YU1lcmdlUGFyYWdyYXBocyxcbiAgbmV3UGFyYWdyYXBoLFxuICBkYXRhUG9pbnRlcixcbiAgZGF0YVNwbGljZSxcbiAgZGF0YUluc2VydCxcbiAgbm9ybWFsaXplZERPTVNlbGVjdGlvbixcbiAgcmVzdG9yZURPTVNlbGVjdGlvbixcbiAgZGF0YVBvaW50ZXJET01Ob2RlLFxuICBkYXRhUG9pbnRlclByZXYsXG4gIGRhdGFQb2ludGVyTmV4dCxcbiAgZ2V0RE9NRWxlbWVudERhdGFBdHRyaWJ1dGVzLFxuICBkYXRhRE9NTm9kZXNBdE5vZGUsXG4gIG5ld1NwYW4sXG4gIGlkVG9JbmRleCxcbiAgZGF0YUl0ZXJhdG9yLFxuICBTcGxpY2VNb2RlLFxuICBuZXdJRCxcbiAgZGF0YVBvaW50ZXJGcm9tRE9NUG9pbnRlcixcbiAgcG9pbnRlclRleHRPZmZzZXRJbkNvbnRhaW5lcixcbiAgZGF0YVNlbGVjdGlvblRvT2Zmc2V0cyxcbiAgZGF0YVNlbGVjdGlvblJlc3RvcmVGcm9tT2Zmc2V0cyxcbn0gZnJvbSAnLi9lZGl0b3IuanMnO1xuaW1wb3J0IHsgY3JlYXRlVk5vZGUsIENvbW1lbnQsIGNsb25lVk5vZGUgfSBmcm9tICd2dWUnO1xuXG5leHBvcnQgZGVmYXVsdCB7XG5cbiAgcHJvcHM6IHtcbiAgICBtb2RlbFZhbHVlOiBPYmplY3QsXG4gICAgLy8gdHJhbnNjcmlwdDogT2JqZWN0LFxuICAgIHRpbWU6IE51bWJlcixcbiAgICBlZGl0YWJsZToge3R5cGU6IEJvb2xlYW4sIGRlZmF1bHQ6IHRydWV9LFxuICAgIHNob3dDb25maWRlbmNlOiB7dHlwZTogQm9vbGVhbiwgZGVmYXVsdDogZmFsc2V9LFxuICB9LFxuXG4gIGRhdGEoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHBhcmFncmFwaHM6IFtdLFxuICAgICAgZW5hYmxlZDogdHJ1ZSxcbiAgICAgIGtrOiAxLFxuICAgIH07XG4gIH0sXG5cbiAgbW91bnRlZCgpIHtcbiAgICAvLyA1MDAgbWF5IGJlIHRvbyBzbG93IC0gdXNlciBjYW4gdXBkYXRlIHRleHQgYW5kIHByZXNzIHNvbWUgaG90a2V5IGJlZm9yZSB2ZXJzaW9uIGNoYW5nZSBoYXMgYmVlbiByZWdpc3RlcmVkXG4gICAgY29uc3QgZGQgPSBkZWJvdW5jZWQodGhpcy5hcHBseVZpZXdDaGFuZ2VzTm93LCAyMDApO1xuICAgIHRoaXMuYXBwbHlWaWV3Q2hhbmdlc05vdyA9ICguLi5hcmdzKSA9PiBkZC5ub3codGhpcywgLi4uYXJncyk7XG4gICAgdGhpcy5hcHBseVZpZXdDaGFuZ2VzID0gKC4uLmFyZ3MpID0+IGRkLmRlYm91bmNlZCh0aGlzLCAuLi5hcmdzKTtcbiAgICAvLyBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdzZWxlY3Rpb25jaGFuZ2UnLCAoKSA9PiB7XG4gICAgLy8gICBjb25zb2xlLmRlYnVnKGRvY3VtZW50LmdldFNlbGVjdGlvbigpKTtcbiAgICAvLyB9KTtcbiAgICB0aGlzLiRvcHRpb25zLndhdGNoLm1vZGVsVmFsdWUuY2FsbCh0aGlzLCB0aGlzLm1vZGVsVmFsdWUpO1xuICB9LFxuXG4gIHdhdGNoOiB7XG4gICAgbW9kZWxWYWx1ZSh2YWx1ZSkge1xuICAgICAgdGhpcy5wYXJhZ3JhcGhzID0gdmFsdWUucGFyYWdyYXBocyB8fCBbXTtcbiAgICB9LFxuICAgIHRpbWUodmFsdWUpIHtcbiAgICAgIC8vIGNvbnNvbGUuZGVidWcoJ3RpbWUgdXBkYXRlZCB0bycsIHRoaXMudGltZSk7XG4gICAgfSxcbiAgfSxcblxuICBiZWZvcmVNb3VudChlbCwgYmluZGluZywgdm5vZGUsIHByZXZWbm9kZSkge1xuICAvLyBjb25zb2xlLmRlYnVnKCdiZWZvcmVNb3VudCcsIGVsLCBiaW5kaW5nLCB2bm9kZSwgcHJldlZub2RlKVxuICAvLyBjb25zb2xlLmRlYnVnKHRoaXMuXylcbiAgICAvLyB0aGlzLnh4ID0gY2xvbmVWTm9kZSh0aGlzLl8uc3ViVHJlZSk7XG4gIH0sXG5cbiAgbWV0aG9kczoge1xuICAgIC8vIHh4OiBkZWJvdW5jZWQoZnVuY3Rpb24gKHJlc3RvcmVTZWxlY3Rpb24gPSB0cnVlKSB7IGNvbnNvbGUuZGVidWcoJ1hYJyk7IH0sIDEwMCksXG5cbiAgICByZXNldCgpIHtcbiAgICAgIGNvbnNvbGUuZGVidWcoJ3Jlc2V0dGluZycpO1xuICAgICAgLy8gdGhpcy5fLnN1YlRyZWUgPSBjcmVhdGVWTm9kZShDb21tZW50KTtcbiAgICAgIC8vIHRoaXMuZW5hYmxlZCA9IGZhbHNlO1xuICAgICAgLy8gY29uc3QgcGFyYWdyYXBocyA9IHRoaXMucGFyYWdyYXBocztcbiAgICAgIC8vIHRoaXMucGFyYWdyYXBocyA9IFtdXG4gICAgICAvLyB0aGlzLl8uc3ViVHJlZSA9IHRoaXMueHg7XG4gICAgICB0aGlzLl8uc3ViVHJlZSA9IG51bGw7XG4gICAgICAvLyB0aGlzLiRyZWZzLmNvbnRhaW5lci5pbm5lckhUTUwgPSAnJztcbiAgICAgIHRoaXMuJG5leHRUaWNrKCgpID0+IHtcbiAgICAgICAgLy8gdGhpcy5lbmFibGVkID0gdHJ1ZTtcbiAgICAgIC8vICAgdGhpcy5wYXJhZ3JhcGhzID0gcGFyYWdyYXBocztcbiAgICAgIC8vICAgdGhpcy4kZm9yY2VVcGRhdGUoKTtcbiAgICAgIH0pXG4gICAgfSxcblxuICAgIHNhdmUoKSB7XG4gICAgICAvLyBjb25zb2xlLmRlYnVnKCd1cGRhdGluZyBzb3VyY2UnKVxuICAgICAgdGhpcy4kZW1pdCgndXBkYXRlOm1vZGVsVmFsdWUnLCBPYmplY3QuYXNzaWduKHt9LCB0aGlzLm1vZGVsVmFsdWUsIHsgcGFyYWdyYXBoczogdGhpcy5wYXJhZ3JhcGhzIH0pKTtcbiAgICB9LFxuXG4gICAgZG93bmxvYWQoZmlsZW5hbWUsIHRleHQsIHR5cGUgPSAndGV4dC9wbGFpbicpIHtcbiAgICAgIC8vIGh0dHBzOi8vb3VyY29kZXdvcmxkLmNvbS9hcnRpY2xlcy9yZWFkLzE4OS9ob3ctdG8tY3JlYXRlLWEtZmlsZS1hbmQtZ2VuZXJhdGUtYS1kb3dubG9hZC13aXRoLWphdmFzY3JpcHQtaW4tdGhlLWJyb3dzZXItd2l0aG91dC1hLXNlcnZlclxuICAgICAgbGV0IGVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7XG4gICAgICBlbGVtZW50LnNldEF0dHJpYnV0ZSgnaHJlZicsIGBkYXRhOiR7dHlwZX07Y2hhcnNldD11dGYtOCxgICsgZW5jb2RlVVJJQ29tcG9uZW50KHRleHQpKTtcbiAgICAgIGVsZW1lbnQuc2V0QXR0cmlidXRlKCdkb3dubG9hZCcsIGZpbGVuYW1lKTtcbiAgICAgIGVsZW1lbnQuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoZWxlbWVudCk7XG4gICAgICBlbGVtZW50LmNsaWNrKCk7XG4gICAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKGVsZW1lbnQpO1xuICAgIH0sXG5cbiAgICBhc0hUTUwoc291cmNlKSB7XG4gICAgICBpZighc291cmNlKSB7XG4gICAgICAgIHNvdXJjZSA9IHRoaXMucGFyYWdyYXBocztcbiAgICAgIH1cbiAgICAgIGNvbnN0IHBhcmFncmFwaHMgPSBbXTtcbiAgICAgIGZvcihjb25zdCBwYXJhZ3JhcGggb2Ygc291cmNlKSB7XG4gICAgICAgIGxldCBzZW50ZW5jZSA9IFtdO1xuICAgICAgICBmb3IoY29uc3Qgc3BhbiBvZiBwYXJhZ3JhcGguc3BhbnMpIHtcbiAgICAgICAgICBsZXQgdGFnID0gJ3NwYW4nO1xuICAgICAgICAgIGlmKHNwYW4uZm9ybWF0KSB7XG4gICAgICAgICAgICBpZihzcGFuLmZvcm1hdC5ib2xkKSB7XG4gICAgICAgICAgICAgIHRhZyA9ICdzdHJvbmcnO1xuICAgICAgICAgICAgfSBlbHNlIGlmKHNwYW4uZm9ybWF0Lml0YWxpYykge1xuICAgICAgICAgICAgICB0YWcgPSAnZW0nO1xuICAgICAgICAgICAgfSBlbHNlIGlmKHNwYW4uZm9ybWF0LnVuZGVybGluZSkge1xuICAgICAgICAgICAgICB0YWcgPSAndSc7XG4gICAgICAgICAgICB9IGVsc2UgaWYoc3Bhbi5mb3JtYXQuc3Vic2NyaXB0KSB7XG4gICAgICAgICAgICAgIHRhZyA9ICdzdWInO1xuICAgICAgICAgICAgfSBlbHNlIGlmKHNwYW4uZm9ybWF0LnN1cGVyc2NyaXB0KSB7XG4gICAgICAgICAgICAgIHRhZyA9ICdzdXAnO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBzZW50ZW5jZS5wdXNoKGA8JHt0YWd9PiR7c3Bhbi50ZXh0fTwvJHt0YWd9PmApO1xuICAgICAgICB9XG4gICAgICAgIHNlbnRlbmNlID0gc2VudGVuY2Uuam9pbignJyk7XG4gICAgICAgIGlmKHBhcmFncmFwaC5idWxsZXQpIHtcbiAgICAgICAgICBwYXJhZ3JhcGhzLnB1c2goYDxsaT4ke3NlbnRlbmNlfTwvbGk+YClcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBwYXJhZ3JhcGhzLnB1c2goYDxwPiR7c2VudGVuY2V9PC9wPmApXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiBwYXJhZ3JhcGhzLmpvaW4oJ1xcbicpO1xuICAgIH0sXG5cbiAgICBleHBvcnRXb3JkKG5hbWU9J2RvY3VtZW50LmRvYycpIHtcblxuICAgICAgY29uc3QgcGFyYWdyYXBocyA9IHRoaXMuYXNIVE1MKCk7XG5cbiAgICAgIGNvbnN0IHRpdGxlID0gJ1JVVEEgZXhwb3J0ZWQgZG9jdW1lbnQnO1xuXG4gICAgICBjb25zdCBodG1sID0gYDxodG1sIHhtbG5zOm89XCJ1cm46c2NoZW1hcy1taWNyb3NvZnQtY29tOm9mZmljZTpvZmZpY2VcIiB4bWxuczp3PVwidXJuOnNjaGVtYXMtbWljcm9zb2Z0LWNvbTpvZmZpY2U6d29yZFwiIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvVFIvUkVDLWh0bWw0MFwiPlxuICAgICAgPGhlYWQ+PG1ldGEgY2hhcnNldD0ndXRmLTgnPjx0aXRsZT4ke3RpdGxlfTwvdGl0bGU+PC9oZWFkPlxuICAgICAgPGJvZHk+JHtwYXJhZ3JhcGhzfTwvYm9keT5cbiAgICAgIDwvaHRtbD5gO1xuXG5cbiAgICAgIC8vIGxldCBzb3VyY2VIVE1MID0gaGVhZGVyK3RoaXMuJHJlZnMuY29udGFpbmVyLmlubmVySFRNTCtmb290ZXI7XG4gICAgICB0aGlzLmRvd25sb2FkKG5hbWUsIGh0bWwsICdhcHBsaWNhdGlvbi92bmQubXMtd29yZCcpO1xuICAgICAgLy8gbGV0IHNvdXJjZSA9ICdkYXRhOmFwcGxpY2F0aW9uL3ZuZC5tcy13b3JkO2NoYXJzZXQ9dXRmLTgsJyArIGVuY29kZVVSSUNvbXBvbmVudChzb3VyY2VIVE1MKTtcbiAgICAgIC8vIGxldCBmaWxlRG93bmxvYWQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYVwiKTtcbiAgICAgIC8vIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoZmlsZURvd25sb2FkKTtcbiAgICAgIC8vIGZpbGVEb3dubG9hZC5ocmVmID0gc291cmNlO1xuICAgICAgLy8gZmlsZURvd25sb2FkLmRvd25sb2FkID0gJ2RvY3VtZW50LmRvYyc7XG4gICAgICAvLyBmaWxlRG93bmxvYWQuY2xpY2soKTtcbiAgICAgIC8vIGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQoZmlsZURvd25sb2FkKTtcbiAgICB9LFxuXG4gICAgc3BhblNlbGVjdGVkKHNwYW4sIGV2ZW50KSB7XG4gICAgICBpZihkb2N1bWVudC5nZXRTZWxlY3Rpb24oKS5pc0NvbGxhcHNlZCkge1xuICAgICAgICBjb25zb2xlLmRlYnVnKCdzcGFuIHNlbGVjdGVkJywgc3Bhbik7XG4gICAgICAgIHRoaXMuJGVtaXQoJ3VwZGF0ZTp0aW1lJywgc3Bhbi50aW1lKTtcbiAgICAgIH1cbiAgICB9LFxuXG4gICAgc2VsZWN0U3RhcnQoZXZlbnQpIHtcbiAgICAgIGNvbnNvbGUuZGVidWcoJ3NlbGVjdCBzdGFydCcsIGV2ZW50KTtcbiAgICB9LFxuXG4gICAgc2VsZWN0RW5kKGV2ZW50KSB7XG4gICAgICB7XG4gICAgICAgIGNvbnN0IGRhdGEgPSB0aGlzLnBhcmFncmFwaHM7XG4gICAgICAgIGNvbnN0IHNlbGVjdGlvbiA9IG5vcm1hbGl6ZWRET01TZWxlY3Rpb24oKTtcbiAgICAgICAgY29uc3Qgc3RhcnQgPSBzZWxlY3Rpb24uc3RhcnQ7XG4gICAgICAgIGRhdGFQb2ludGVyKGRhdGEsIHN0YXJ0KTtcbiAgICAgICAgY29uc3QgZW5kID0gc2VsZWN0aW9uLmVuZDtcbiAgICAgICAgZGF0YVBvaW50ZXIoZGF0YSwgZW5kKTtcbiAgICAgICAgLy8gY29uc29sZS5kZWJ1ZygnU0VMRUNURUQnLCBzdGFydCwgZW5kLCBkYXRhKVxuICAgICAgICBpZighc2VsZWN0aW9uLmNvbGxhcHNlZCkge1xuICAgICAgICAgIGNvbnN0IHN0YXJ0ID0gc2VsZWN0aW9uLnN0YXJ0LnNwYW4udGltZTtcbiAgICAgICAgICBjb25zdCBlbmQgPSBzZWxlY3Rpb24uZW5kLnNwYW4udGltZSAhPT0gdW5kZWZpbmVkID8gKHNlbGVjdGlvbi5lbmQuc3Bhbi50aW1lICsgc2VsZWN0aW9uLmVuZC5zcGFuLmR1cmF0aW9uIHx8IDApIDogdW5kZWZpbmVkO1xuICAgICAgICAgIHRoaXMuJGVtaXQoJ3NlbGVjdGVkJywge3N0YXJ0LCBlbmR9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aGlzLiRlbWl0KCdzZWxlY3RlZCcpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICB9LFxuXG4gICAgZ2V0U3BhblNlbGVjdGlvbihzZWxlY3Rpb24pIHtcbiAgICAgIGNvbnN0IGRhdGEgPSB0aGlzLnBhcmFncmFwaHM7XG4gICAgICBzZWxlY3Rpb24gPSBub3JtYWxpemVkRE9NU2VsZWN0aW9uKHNlbGVjdGlvbik7XG4gICAgICBkYXRhUG9pbnRlcihkYXRhLCBzZWxlY3Rpb24uc3RhcnQpO1xuICAgICAgZGF0YVBvaW50ZXIoZGF0YSwgc2VsZWN0aW9uLmVuZCk7XG4gICAgICAvLyBjb25zb2xlLmRlYnVnKHNlbGVjdGlvbiwgQXJyYXkuZnJvbShkYXRhSXRlcmF0b3IodGhpcy5wYXJhZ3JhcGhzLCBzZWxlY3Rpb24uc3RhcnQsIHNlbGVjdGlvbi5lbmQpKSk7XG4gICAgICByZXR1cm4gQXJyYXkuZnJvbShkYXRhSXRlcmF0b3IodGhpcy5wYXJhZ3JhcGhzLCBzZWxlY3Rpb24uc3RhcnQsIHNlbGVjdGlvbi5lbmQpKTtcbiAgICB9LFxuXG4gICAgdG9nZ2xlU3R5bGUobmFtZSwgc2VsZWN0aW9uKSB7XG5cbiAgICAgIGNvbnN0IGRhdGEgPSB0aGlzLnBhcmFncmFwaHM7XG4gICAgICBpZighc2VsZWN0aW9uKSB7XG4gICAgICAgIHNlbGVjdGlvbiA9IG5vcm1hbGl6ZWRET01TZWxlY3Rpb24oKTtcbiAgICAgIH1cbiAgICAgIGlmKHNlbGVjdGlvbi5pc0NvbGxhcHNlZCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBjb25zdCBzdGFydCA9IHNlbGVjdGlvbi5zdGFydDtcbiAgICAgIGRhdGFQb2ludGVyKGRhdGEsIHN0YXJ0KTtcbiAgICAgIGNvbnN0IGVuZCA9IHNlbGVjdGlvbi5lbmQ7XG4gICAgICBkYXRhUG9pbnRlcihkYXRhLCBlbmQpO1xuXG4gICAgICBjb25zdCByID0gZGF0YVNwbGljZShkYXRhLCBzdGFydCwgZW5kLCBTcGxpY2VNb2RlLkluUGxhY2UpO1xuXG4gICAgICAvLyBnZXQgY3VycmVudCB2YWx1ZSBhY3Jvc3MgdGhlIHJhbmdlLCByZXZlcnQgdG8gZmFsc2UgaWYgdHJ1ZSBhdCB0aGUgd2hvbGUgcmFuZ2VcbiAgICAgIGxldCB2YWx1ZSA9IHRydWU7XG4gICAgICBmb3IoY29uc3QgcCBvZiByKSB7XG4gICAgICAgIGZvcihjb25zdCBzcGFuIG9mIHAuc3BhbnMpIHtcbiAgICAgICAgICBpZihzcGFuLmZvcm1hdCAmJiBzcGFuLmZvcm1hdFtuYW1lXSkge1xuICAgICAgICAgICAgdmFsdWUgPSBmYWxzZTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgLy8gb25lIGRpc2FibGVzIHRoZSBvdGhlclxuICAgICAgbGV0IG5hbWUyLCB2YWx1ZTI7XG4gICAgICBpZihuYW1lID09PSAnc3Vic2NyaXB0Jykge1xuICAgICAgICBuYW1lMiA9ICdzdXBlcnNjcmlwdCc7XG4gICAgICAgIHZhbHVlMiA9IGZhbHNlO1xuICAgICAgfSBlbHNlIGlmKG5hbWUgPT09ICdzdXBlcnNjcmlwdCcpIHtcbiAgICAgICAgbmFtZTIgPSAnc3Vic2NyaXB0JztcbiAgICAgICAgdmFsdWUyID0gZmFsc2U7XG4gICAgICB9XG4gICAgICAvLyBhcHBseSB0aGUgbmV3IHN0eWxlXG4gICAgICBmb3IoY29uc3QgcCBvZiByKSB7XG4gICAgICAgIGZvcihjb25zdCBzcGFuIG9mIHAuc3BhbnMpIHtcbiAgICAgICAgICBPYmplY3QuYXNzaWduKHNwYW4sIHsgZm9ybWF0OiBPYmplY3QuYXNzaWduKHNwYW4uZm9ybWF0IHx8IHt9LCB7IFtuYW1lXTogdmFsdWUgfSwgbmFtZTIgJiYgeyBbbmFtZTJdOiB2YWx1ZTIgfSB8fCB7fSksIGlkOiBuZXdJRCgpIH0pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSxcblxuICAgIHRvZ2dsZUJ1bGxldCgpIHtcbiAgICAgIGNvbnN0IHNlbGVjdGlvbiA9IGRvY3VtZW50LmdldFNlbGVjdGlvbigpO1xuICAgICAgY29uc3Qgc3BhblNlbGVjdGlvbiA9IHRoaXMuZ2V0U3BhblNlbGVjdGlvbihzZWxlY3Rpb24pO1xuICAgICAgbGV0IGJ1bGxldCA9IHRydWU7XG4gICAgICBmb3IoY29uc3QgcyBvZiBzcGFuU2VsZWN0aW9uKSB7XG4gICAgICAgIGlmKHMucGFyYWdyYXBoLmJ1bGxldCkge1xuICAgICAgICAgIGJ1bGxldCA9IGZhbHNlO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBmb3IoY29uc3QgcyBvZiBzcGFuU2VsZWN0aW9uKSB7XG4gICAgICAgIHMucGFyYWdyYXBoLmJ1bGxldCA9IGJ1bGxldDtcbiAgICAgIH1cbiAgICB9LFxuXG4gICAgbWFwQ29udGFpbmVyT2Zmc2V0UG9pbnRlclRvRGF0YShkYXRhLCBwb2ludGVyKSB7XG4gICAgICAvLyBtYXAgb3V0IG9mIGJvdW5kIG9mZnNldCB0byBkYXRhLCB1c2VzIG9mZnNldCBnZW5lcmF0ZWQgYnkgcG9pbnRlclRleHRPZmZzZXRJbkNvbnRhaW5lcigpXG4gICAgICAvLyBjb25zb2xlLmRlYnVnKCdNQVAnLCBKU09OLnN0cmluZ2lmeShkYXRhLCB1bmRlZmluZWQsICAyKSwgJ1BPSU5URVInLCBwb2ludGVyLCAgSlNPTi5zdHJpbmdpZnkocG9pbnRlciwgdW5kZWZpbmVkLCAyKSlcbiAgICAgIGlmKCFwb2ludGVyLnBhcmFncmFwaElEKSB7XG4gICAgICAgIC8vIHN0YXJ0IGZyb20gYmVnaW5uaW5nIC8gbGVmdCBwYXJhZ3JhcGhcbiAgICAgICAgbGV0IG9mZnNldCA9IDA7XG4gICAgICAgIGZvcihjb25zdCBwYXJhZ3JhcGggb2YgZGF0YSkge1xuICAgICAgICAvLyBjb25zb2xlLmRlYnVnKCdwYXJhZ3JhcGgnLCBwYXJhZ3JhcGgsICdsZWZ0IHBhcmEgaWQnLCBwb2ludGVyLmxlZnRQYXJhZ3JhcGhJRClcbiAgICAgICAgICBpZihwb2ludGVyLmxlZnRQYXJhZ3JhcGhJRCAmJiBwYXJhZ3JhcGguaWQgPT09IHBvaW50ZXIubGVmdFBhcmFncmFwaElEKSB7XG4gICAgICAgICAgICBvZmZzZXQgPSAwO1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgfVxuICAgICAgICAgIGZvcihjb25zdCBzcGFuIG9mIHBhcmFncmFwaC5zcGFucykge1xuICAgICAgICAgIC8vIGNvbnNvbGUuZGVidWcoJ3NwYW4nLCBzcGFuLmlkLCAnb2Zmc2V0Jywgb2Zmc2V0LCAncG9pbnRlci5vZmZzZXQnLCBwb2ludGVyLm9mZnNldClcbiAgICAgICAgICAgIGlmKG9mZnNldCA8PSBwb2ludGVyLm9mZnNldCAmJiBwb2ludGVyLm9mZnNldCA8IG9mZnNldCArIHNwYW4udGV4dC5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgcG9pbnRlci5wYXJhZ3JhcGhJRCA9IHBhcmFncmFwaC5pZDtcbiAgICAgICAgICAgICAgcG9pbnRlci5wYXJhZ3JhcGggPSBwYXJhZ3JhcGg7XG4gICAgICAgICAgICAgIHBvaW50ZXIuc3BhbklEID0gc3Bhbi5pZDtcbiAgICAgICAgICAgICAgcG9pbnRlci5zcGFuID0gc3BhbjtcbiAgICAgICAgICAgICAgcG9pbnRlci5vZmZzZXQgLT0gb2Zmc2V0O1xuICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIG9mZnNldCArPSBzcGFuLnRleHQubGVuZ3RoO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZihwb2ludGVyLm9mZnNldCA9PT0gb2Zmc2V0ICYmIHBhcmFncmFwaC5zcGFucy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBwb2ludGVyLnBhcmFncmFwaElEID0gcGFyYWdyYXBoLmlkO1xuICAgICAgICAgICAgY29uc3Qgc3BhbiA9IHBhcmFncmFwaC5zcGFuc1twYXJhZ3JhcGguc3BhbnMubGVuZ3RoLTFdXG4gICAgICAgICAgICBwb2ludGVyLnNwYW5JRCA9IHNwYW4uaWQ7XG4gICAgICAgICAgICBwb2ludGVyLnNwYW4gPSBzcGFuO1xuICAgICAgICAgICAgcG9pbnRlci5vZmZzZXQgPSBzcGFuLnRleHQubGVuZ3RoOztcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYocG9pbnRlci5wYXJhZ3JhcGhJRCkge1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZihwb2ludGVyLnBhcmFncmFwaElEICYmICFwb2ludGVyLnNwYW5JRCkge1xuICAgICAgICAvLyBzdGFydCBmcm9tIHBhcmFncmFwaCAvIGxlZnQgc3BhblxuICAgICAgICAvLyBjb25zb2xlLmRlYnVnKCdnZXR0aW5nIHNwYW4gaWQnKVxuICAgICAgICBmb3IoY29uc3QgcGFyYWdyYXBoIG9mIGRhdGEpIHtcbiAgICAgICAgICAvLyBjb25zb2xlLmRlYnVnKCdwYXJhZ3JhcGggaWQnLCBwYXJhZ3JhcGguaWQsICdwb2ludGVyIHBhcmEgaWQnLCBwb2ludGVyLnBhcmFncmFwaElEKVxuICAgICAgICAgIGlmKHBhcmFncmFwaC5pZCAhPT0gcG9pbnRlci5wYXJhZ3JhcGhJRCkge1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgfVxuICAgICAgICAgIC8vIGNvbnNvbGUuZGVidWcoJ3BhcmFncmFwaCcsIHBhcmFncmFwaC5pZClcbiAgICAgICAgICBsZXQgb2Zmc2V0ID0gMDtcbiAgICAgICAgICBmb3IoY29uc3Qgc3BhbiBvZiBwYXJhZ3JhcGguc3BhbnMpIHtcbiAgICAgICAgICAvLyBjb25zb2xlLmRlYnVnKCdzcGFuLmlkJywgc3Bhbi5pZCwgb2Zmc2V0LCBzcGFuLnRleHQubGVuZ3RoLCBwb2ludGVyLm9mZnNldClcbiAgICAgICAgICAgIGlmKHBvaW50ZXIubGVmdFNwYW5JRCAmJiBzcGFuLmlkID09PSBwb2ludGVyLmxlZnRTcGFuSUQpIHtcbiAgICAgICAgICAgICAgb2Zmc2V0ID0gMDtcbiAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZihvZmZzZXQgPD0gcG9pbnRlci5vZmZzZXQgJiYgcG9pbnRlci5vZmZzZXQgPCBvZmZzZXQgKyBzcGFuLnRleHQubGVuZ3RoKSB7XG4gICAgICAgICAgICAgIHBvaW50ZXIuc3BhbklEID0gc3Bhbi5pZDtcbiAgICAgICAgICAgICAgcG9pbnRlci5zcGFuID0gc3BhbjtcbiAgICAgICAgICAgICAgcG9pbnRlci5vZmZzZXQgLT0gb2Zmc2V0O1xuICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIG9mZnNldCArPSBzcGFuLnRleHQubGVuZ3RoO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZihwb2ludGVyLm9mZnNldCA9PT0gb2Zmc2V0ICYmIHBhcmFncmFwaC5zcGFucy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBjb25zdCBzcGFuID0gcGFyYWdyYXBoLnNwYW5zW3BhcmFncmFwaC5zcGFucy5sZW5ndGgtMV1cbiAgICAgICAgICAgIHBvaW50ZXIuc3BhbklEID0gc3Bhbi5pZDtcbiAgICAgICAgICAgIHBvaW50ZXIuc3BhbiA9IHNwYW47XG4gICAgICAgICAgICBwb2ludGVyLm9mZnNldCA9IHNwYW4udGV4dC5sZW5ndGg7O1xuICAgICAgICAgIH1cbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcG9pbnRlci5ub2RlID0gdW5kZWZpbmVkO1xuICAgICAgZGF0YVBvaW50ZXIoZGF0YSwgcG9pbnRlcik7XG4gICAgICByZXR1cm4gcG9pbnRlcjtcbiAgICB9LFxuXG4gICAgcGFyc2VET00ocmVzdG9yZVNlbGVjdGlvbikge1xuICAgICAgbGV0IGRhdGEgPSB0aGlzLnBhcmFncmFwaHM7XG4gICAgICBjb25zdCBzZWxlY3Rpb24gPSBub3JtYWxpemVkRE9NU2VsZWN0aW9uKCk7XG4gICAgICBjb25zdCBzdGFydCA9IGRhdGFQb2ludGVyRnJvbURPTVBvaW50ZXIoZGF0YSwgc2VsZWN0aW9uLnN0YXJ0KTtcbiAgICAgIGNvbnN0IGVuZCA9IGRhdGFQb2ludGVyRnJvbURPTVBvaW50ZXIoZGF0YSwgc2VsZWN0aW9uLmVuZCk7XG4gICAgICAvLyBjb25zb2xlLmRlYnVnKCdzdGFydCAnLCBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHN0YXJ0KSkpXG4gICAgICAvLyBjb25zb2xlLmRlYnVnKCdTRUxFQ1RJT04nLCBzZWxlY3Rpb24sIEpTT04uc3RyaW5naWZ5KHNlbGVjdGlvbiwgdW5kZWZpbmVkLCAyKSlcbiAgICAgIC8vIGNvbnNvbGUuZGVidWcoJ1NUQVJUJywgc2VsZWN0aW9uLnN0YXJ0LCBKU09OLnN0cmluZ2lmeShzZWxlY3Rpb24uc3RhcnQsIHVuZGVmaW5lZCwgMikpXG4gICAgICAvLyBjb25zb2xlLmRlYnVnKCdFTkQnLCBzZWxlY3Rpb24uZW5kLCBKU09OLnN0cmluZ2lmeShzZWxlY3Rpb24uZW5kLCB1bmRlZmluZWQsIDIpKVxuICAgICAgLy8gcG9pbnRlci5wYXJhZ3JhcGggPSB1bmRlZmluZWQ7XG4gICAgICAvLyBwb2ludGVyLnNwYW4gPSB1bmRlZmluZWQ7XG4gICAgICAvLyBjb25zb2xlLmRlYnVnKCdQT0lOVEVSJywgcG9pbnRlciwgSlNPTi5zdHJpbmdpZnkocG9pbnRlciwgdW5kZWZpbmVkLCAyKSlcbiAgICAgIGlmKCFzdGFydC5zcGFuSUQgfHwgIXN0YXJ0LnBhcmFncmFwaElEKSB7XG4gICAgICAgIHBvaW50ZXJUZXh0T2Zmc2V0SW5Db250YWluZXIodGhpcy4kcmVmcy5jb250YWluZXIsIHN0YXJ0KTtcbiAgICAgIH1cbiAgICAgIGlmKCFlbmQuc3BhbklEIHx8ICFlbmQucGFyYWdyYXBoSUQpIHtcbiAgICAgICAgcG9pbnRlclRleHRPZmZzZXRJbkNvbnRhaW5lcih0aGlzLiRyZWZzLmNvbnRhaW5lciwgZW5kKTtcbiAgICAgIH1cbiAgICAgIC8vIGNvbnNvbGUuZGVidWcoJy0tU1RBUlQnLCBzZWxlY3Rpb24uc3RhcnQsIEpTT04uc3RyaW5naWZ5KHNlbGVjdGlvbi5zdGFydCwgdW5kZWZpbmVkLCAyKSlcbiAgICAgIC8vIGNvbnNvbGUuZGVidWcoJy0tRU5EJywgc2VsZWN0aW9uLmVuZCwgSlNPTi5zdHJpbmdpZnkoc2VsZWN0aW9uLmVuZCwgdW5kZWZpbmVkLCAyKSlcbiAgICAgIGNvbnN0IHBhcnNlZCA9IHBhcnNlRE9NKHRoaXMuJHJlZnMuY29udGFpbmVyKVxuICAgICAgLy8gVE9ETzogZGV0ZWN0IGN1cnNvciBwb3NpdGlvbiBcbiAgICAgIC8vIGNvbnN0IHBhcmFncmFwaHMgPSBwYXJzZURPTSh0aGlzLiRyZWZzLmNvbnRhaW5lcik7XG5cbiAgICAgIC8vIGNvbnN0IHBhcnNlZCA9IHBhcnNlRE9NKHRoaXMuJHJlZnMuY29udGFpbmVyKVxuICAgICAgLy8gY29uc29sZS5kZWJ1ZygnRE9NJywgSlNPTi5zdHJpbmdpZnkocGFyc2VET00odGhpcy4kcmVmcy5jb250YWluZXIpLCB1bmRlZmluZWQsIDIpKVxuICAgICAgLy8gY29uc29sZS5kZWJ1ZygnRE9NJywgSlNPTi5zdHJpbmdpZnkocGFyc2VkLCB1bmRlZmluZWQsIDIpKVxuICAgICAgLy8gY29uc29sZS5kZWJ1ZygnREFUQScsIEpTT04uc3RyaW5naWZ5KHRoaXMucGFyYWdyYXBocywgdW5kZWZpbmVkLCAyKSk7XG4gICAgICAvLyBjb25zdCBwYXJhZ3JhcGhzID0gZGF0YU1lcmdlUGFyYWdyYXBocyh0aGlzLnBhcmFncmFwaHMsIHBhcnNlRE9NKHRoaXMuJHJlZnMuY29udGFpbmVyKSk7XG4gICAgICBjb25zdCBwYXJhZ3JhcGhzID0gZGF0YU1lcmdlUGFyYWdyYXBocyh0aGlzLnBhcmFncmFwaHMgfHwgW10sIHBhcnNlZCk7XG4gICAgICAvLyBjb25zb2xlLmRlYnVnKCdNRVJHRUQnLCBKU09OLnN0cmluZ2lmeShwYXJhZ3JhcGhzLCB1bmRlZmluZWQsIDIpKTtcbiAgICAgIHRoaXMucGFyYWdyYXBocyA9IHBhcmFncmFwaHM7XG4gICAgICBkYXRhID0gcGFyYWdyYXBocztcblxuICAgICAgLy8gVE9ETzogcmUtbWFwIG91dCBvZiBib3VuZCBvZmZzZXQgdG8gZGF0YVxuICAgICAgdGhpcy5tYXBDb250YWluZXJPZmZzZXRQb2ludGVyVG9EYXRhKGRhdGEsIHN0YXJ0KTtcbiAgICAgIHRoaXMubWFwQ29udGFpbmVyT2Zmc2V0UG9pbnRlclRvRGF0YShkYXRhLCBlbmQpO1xuICAgICAgLy8gcG9pbnRlci5ub2RlID0gdW5kZWZpbmVkO1xuICAgICAgLy8gZGF0YVBvaW50ZXIoZGF0YSwgcG9pbnRlcik7XG4gICAgICAvLyBjb25zb2xlLmRlYnVnKCdQT0lOVEVSMicsIHBvaW50ZXIsIEpTT04uc3RyaW5naWZ5KHBvaW50ZXIsIHVuZGVmaW5lZCwgMikpXG4gICAgICAvLyByZXR1cm4gdGhpcy5wYXJhZ3JhcGhzO1xuXG4gICAgICBpZihyZXN0b3JlU2VsZWN0aW9uKSB7XG4gICAgICAgIHRoaXMuJG5leHRUaWNrKCgpID0+IHtcbiAgICAgICAgICAvLyBjb25zb2xlLmRlYnVnKCdSRVNUT1JFIERBVEEnLCBkYXRhLCBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KGRhdGEpKSlcbiAgICAgICAgICAvLyBjb25zb2xlLmRlYnVnKCdSRVNUT1JFIFNUQVJUJywgZGF0YVBvaW50ZXIoZGF0YSwgc3RhcnQpLCAnUkVTVE9SRSBFTkQnICwgc2VsZWN0aW9uLmNvbGxhcHNlZCA/IG51bGwgOiBkYXRhUG9pbnRlcihkYXRhLCBlbmQpKTtcbiAgICAgICAgICByZXN0b3JlRE9NU2VsZWN0aW9uKHRoaXMuJHJlZnMuY29udGFpbmVyLCBkYXRhUG9pbnRlcihkYXRhLCBzdGFydCksIHNlbGVjdGlvbi5jb2xsYXBzZWQgPyBudWxsIDogZGF0YVBvaW50ZXIoZGF0YSwgZW5kKSk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICAvLyBwb2ludGVyIGlzIHBvaW50aW5nIHRvIGRhdGEsIGZvciBmdWxsIERPTSBwb2ludGVyIG11c3QgYmUgYXVnbWVudGVkIGFmdGVyIG5leHQgRE9NIHVwZGF0ZVxuICAgICAgcmV0dXJuIHsgcGFyYWdyYXBocywgc3RhcnQsIGVuZCwgY29sbGFwc2VkOiBzZWxlY3Rpb24uY29sbGFwc2VkIH07XG4gICAgfSxcblxuICAgIGFwcGx5Vmlld0NoYW5nZXNOb3cocmVzdG9yZVNlbGVjdGlvbiA9IHRydWUpIHtcblxuICAgICAgY29uc3QgeyBwYXJhZ3JhcGhzLCBzdGFydCwgZW5kLCBjb2xsYXBzZWQgfSA9IHRoaXMucGFyc2VET00ocmVzdG9yZVNlbGVjdGlvbik7ICAvLyBET00gLT4gZGF0YSwgcG9pbnRlciBpbiBkYXRhXG5cbiAgICAgIHRoaXMucGFyYWdyYXBocyA9IHBhcmFncmFwaHM7XG4gICAgICAvLyB0aGlzLnBhcnNlRE9NKCk7XG4gICAgICAvLyBjb25zdCBwYXJhZ3JhcGhzID0gZGF0YU1lcmdlUGFyYWdyYXBocyh0aGlzLnBhcmFncmFwaHMsIHBhcnNlRE9NKHRoaXMuJHJlZnMuY29udGFpbmVyKSk7XG4gICAgICAvLyBjb25zdCBwYXJhZ3JhcGhzID0gcGFyc2VET00odGhpcy4kcmVmcy5jb250YWluZXIpO1xuICAgICAgLy8gVE9ETzogYXBweSBzcGFuIHRleHQgY2hhbmdlcyB0byB0aGlzLnNwYW4gYW5kIGVtaXQgZXZlbnRcbiAgICAgIC8vIGNvbnNvbGUuZGVidWcoJ2RlYm91bmNlZCcsIHRoaXMucGFyYWdyYXBocyk7XG4gICAgICBjb25zb2xlLmRlYnVnKCdkZWJvdW5jZWQnLCBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHRoaXMucGFyYWdyYXBocykpKTtcbiAgICAgIC8vIGNvbnNvbGUuZGVidWcoJ2RlYm91bmNlZCcsIEpTT04uc3RyaW5naWZ5KHRoaXMucGFyYWdyYXBocywgdW5kZWZpbmVkLCAyKSk7XG4gICAgICAvLyB0aGlzLnBhcmFncmFwaHMgPSBwYXJhZ3JhcGhzO1xuICAgICAgdGhpcy5zYXZlKCk7XG5cbiAgICAgIHJldHVybiB7IHN0YXJ0LCBlbmQsIGNvbGxhcHNlZCB9O1xuICAgIH0sXG5cbiAgICAvLyBhcHBseVZpZXdDaGFuZ2VzOiBkZWJvdW5jZShmdW5jdGlvbiAoKSB7XG4gICAgLy8gICB0aGlzLmFwcGx5Vmlld0NoYW5nZXNOb3coKTtcbiAgICAvLyB9LCA1MDApLFxuXG5cbiAgICBvbklucHV0KGUpIHtcbiAgICAgIHRoaXMuYXBwbHlWaWV3Q2hhbmdlcygpO1xuICAgIH0sXG5cbiAgICBvbktleXByZXNzKGUpIHtcbiAgICAgIC8vIGNvbnNvbGUuZGVidWcoJ2VkaXRhYmxlLXNwYW5zIGtleXByZXNzOicsIGUpO1xuICAgICAgLy8gaWYoZS5rZXkgPT0gJ0VudGVyJykge1xuICAgICAgLy8gICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAvLyAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAvL1xuICAgICAgLy8gICBjb25zdCBzZWxlY3Rpb24gPSBkb2N1bWVudC5nZXRTZWxlY3Rpb24oKTtcbiAgICAgIC8vICAgY29uc3QgcmFuZ2UgPSBzZWxlY3Rpb24uZ2V0UmFuZ2VBdCgwKTtcbiAgICAgIC8vXG4gICAgICAvLyAgIC8vIGNvbnN0IGdldE5vZGVJbmRleCA9IChub2RlKSA9PiB7IGZvcih2YXIgaT0wOyAobm9kZT1ub2RlLnByZXZpb3VzU2libGluZyk7IGkrKyk7IHJldHVybiBpOyB9OyAgLy8gaHR0cHM6Ly9zdGFja292ZXJmbG93LmNvbS9xLzU5MTM5MjdcbiAgICAgIC8vXG4gICAgICAvLyAgIHJhbmdlLmluc2VydE5vZGUoZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnInKSk7IC8vIGluc2VydCA8YnIvPiBlbGVtZW50XG4gICAgICAvLyAgIHJhbmdlLmNvbGxhcHNlKCk7IC8vIHdpdGhvdXQgdGhpcyB0aGUgbmV3bGluZSB3aWxsIHJlbWFpbiBzZWxlY3RlZCBhbmQgbmV3IHRleHQgaW5wdXQgd2lsbCByZXBsYWNlIHRoZSBuZXdsaW5lXG4gICAgICAvL1xuICAgICAgLy8gICAvLyBTYWZhcmkgcmVxdWlyZXMgdGhhdCByYW5nZSBtdXN0IGJlIHJlLWFkZGVkXG4gICAgICAvLyAgIHNlbGVjdGlvbi5yZW1vdmVBbGxSYW5nZXMoKTtcbiAgICAgIC8vICAgc2VsZWN0aW9uLmFkZFJhbmdlKHJhbmdlKTtcbiAgICAgIC8vXG4gICAgICAvLyAgIC8vIHRoaXMub25JbnB1dChlKTsgLy8gdG8gcmVnaXN0ZXIgY2hhbmdlcywgYnV0IGl0IGFwcGVhcnMgdGhhdCB0aGlzIHdpbGwgYmUgY2FsbGVkIGFueXdheSBieSB0aGUgYnJvd3NlclxuICAgICAgLy8gICAvLyB0aGlzLmlucHV0KCk7XG4gICAgICAvLyB9IGVsc2UgaWYoIWUuY3RybEtleSAmJiAhZS5hbHRLZXkgJiYgIWUubWV0YUtleSBbIyYmICFlLnNoaWZ0S2V5I10pIHtcbiAgICAgIC8vIH1cbiAgICAgIC8vIGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vcXVlc3Rpb25zLzE3ODkwNTY4L2NvbnRlbnRlZGl0YWJsZS1kaXYtYmFja3NwYWNlLWFuZC1kZWxldGluZy10ZXh0LW5vZGUtcHJvYmxlbXNcbiAgICB9LFxuXG4gICAgZXJyb3JDYXB0dXJlZChlcnIsIHZtLCBpbmZvKSB7XG4gICAgICBjb25zb2xlLmRlYnVnKCdFUlJPUiBjYXB0dXJlZDonLCBlcnIsIHZtLCBpbmZvKTtcbiAgICB9LFxuXG4gICAgYXN5bmMgb25LZXlkb3duKGUpIHtcbiAgICAgIGNvbnNvbGUuZGVidWcoJ2VkaXRhYmxlLXNwYW5zIGtleWRvd246JywgZSk7XG4gICAgICBpZigoZS5tZXRhS2V5IHx8IGUuY3RybEtleSkgJiYgKGUua2V5ID09PSAneicpKSB7XG4gICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgaWYoKGUubWV0YUtleSB8fCBlLmN0cmxLZXkpICYmIChlLmtleSA9PT0gJ2MnIHx8IGUua2V5ID09PSAndicgfHwgZS5rZXkgPT09ICd4JyB8fCBlLmtleSA9PT0gJ3InIHx8IGUua2V5ID09PSAnTWV0YScgfHwgZS5rZXkgPT09ICdDb250cm9sJykpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICAvLyBpZ25vcmUgY29udHJvbCBjaGFyc1xuICAgICAgaWYgKGUuY29kZSA9PT0gJ0VzY2FwZScgfHwgZS5jb2RlID09PSAnVGFiJykge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIC8vIGRvIG5vdCBwcm9jZXNzIHNlbGVjdCBhY3Rpb24ga2V5c3Ryb2tlc1xuICAgICAgaWYoLyogZS5zaGlmdEtleSAmJiAqLyAoZS5rZXkgPT09ICdBcnJvd0xlZnQnIHx8IGUua2V5ID09PSAnQXJyb3dSaWdodCcgfHwgZS5rZXkgPT09ICdBcnJvd1VwJyB8fCBlLmtleSA9PT0gJ0Fycm93RG93bicpKSB7XG4gICAgICAgIGlmKCFlLnNoaWZ0S2V5KSB7XG4gICAgICAgICAgLy8gVE9ETzogcG90ZW50aW9uYWxseSBjb3JyZWN0IGN1cnNvciBwb3NpdGlvbiBpbiBzb21lIGNhc2VzIChzZWUgY29kZSBmcmFnbWVudHMgYmVsb3cpXG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICAvLyBlLmtleSA9PT0gJ0RlYWQnIC8vIGNvZGUgPT09ICdRdW90ZSdcbiAgICAgIGlmKGUua2V5ID09PSAnRGVhZCcpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBsZXQgc2VsZWN0aW9uID0gZG9jdW1lbnQuZ2V0U2VsZWN0aW9uKCk7XG4gICAgICBpZighc2VsZWN0aW9uLmlzQ29sbGFwc2VkICYmICFlLmN0cmxLZXkgJiYgIWUubWV0YUtleSAmJiBlLmtleSAhPSAnQWx0JyAmJiBlLmtleSAhPSAnU2hpZnQnKSB7XG4gICAgICAgIC8vIFRPRE86IGJlY2F1c2UgdGhlcmUgaXMgbm8gd2F5IHRvIHNlbmQga2V5Ym9hcmQgZXZlbnRzIHRvIHRoZSBicm93c2VyIGZyb20gamF2YXNjcmlwdDpcbiAgICAgICAgLy8gYSkgdGhlIGN1cnJlbnQga2V5Ym9hcmQgZXZlbnQgKHRoYXQgcmVtb3ZlcyBjdXJyZW50IHNlbGVjdGlvbiBmaXJzdCkgbXVzdCBiZSBwcm9jZXNzZWRcbiAgICAgICAgLy8gYikgdGhlIGN1cnJlbnQga2V5Ym9hcmQgZXZlbnQgbXVzdCBiZSBwYXNzZWQgdGhyb3VnaCBmb3Igc2VsZWN0ZWQga2V5c3Ryb2tlcyAoZS5nLiB1c3VhbCB0ZXh0IGlucHV0KVxuICAgICAgICAvLyAgICBhZnRlciB0aGUgZGF0YSBzcGxpY2Ugb3BlcmF0aW9uIGJlbG93XG4gICAgICAgIGlmKGUua2V5ID09PSAnRGVsZXRlJyB8fCBlLmtleSA9PT0gJ0JhY2tzcGFjZScgfHwgZS5rZXkgPT09ICdFbnRlcicpIHtcbiAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBkYXRhID0gdGhpcy5wYXJhZ3JhcGhzO1xuICAgICAgICBzZWxlY3Rpb24gPSBub3JtYWxpemVkRE9NU2VsZWN0aW9uKHNlbGVjdGlvbik7XG4gICAgICAgIGNvbnN0IHN0YXJ0ID0gc2VsZWN0aW9uLnN0YXJ0O1xuICAgICAgICBkYXRhUG9pbnRlcihkYXRhLCBzdGFydCk7XG4gICAgICAgIGNvbnN0IGVuZCA9IHNlbGVjdGlvbi5lbmQ7XG4gICAgICAgIGRhdGFQb2ludGVyKGRhdGEsIGVuZCk7XG4gICAgICAgIC8vIGNvbnNvbGUuZGVidWcoJ0RFTEVURScsIHN0YXJ0LCBlbmQsIGRhdGEpXG4gICAgICAgIC8vIGNvbnNvbGUuZGVidWcoJ0RFTEVURScsIHsgcGFyYWdyYXBoSW5kZXg6IHN0YXJ0LnBhcmFncmFwaEluZGV4LCBzcGFuSW5kZXg6IHN0YXJ0LnNwYW5JbmRleCwgb2Zmc2V0OiBzdGFydC5vZmZzZXQgfSwgeyBwYXJhZ3JhcGhJbmRleDogZW5kLnBhcmFncmFwaEluZGV4LCBzcGFuSW5kZXg6IGVuZC5zcGFuSW5kZXgsIG9mZnNldDogZW5kLm9mZnNldCB9LCBkYXRhKVxuICAgICAgICBjb25zdCByID0gZGF0YVNwbGljZShkYXRhLCBzdGFydCwgZW5kKTtcbiAgICAgICAgLy8gY29uc29sZS5kZWJ1ZygnREVMRVRFRCcsIHIpXG5cbiAgICAgICAgaWYoZS5rZXkgPT09ICdFbnRlcicpIHtcbiAgICAgICAgICBjb25zdCByID0gZGF0YUluc2VydChkYXRhLCBzdGFydCwgW25ld1BhcmFncmFwaCgpLCBuZXdQYXJhZ3JhcGgoKV0pO1xuICAgICAgICAgIHRoaXMuJG5leHRUaWNrKCgpID0+IHtcbiAgICAgICAgICAgIHJlc3RvcmVET01TZWxlY3Rpb24odGhpcy4kcmVmcy5jb250YWluZXIsIGRhdGFQb2ludGVyRE9NTm9kZShkYXRhUG9pbnRlck5leHQoZGF0YSwgc3RhcnQpLCB0aGlzLiRyZWZzLmNvbnRhaW5lcikpO1xuICAgICAgICAgIH0pO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICAvLyBUT0RPOiBkbyB3ZSBuZWVkIHRoaXM/XG4gICAgICAgIC8vIGlmKHN0YXJ0LnBhcmFncmFwaC5zcGFucy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgLy8gICBzdGFydC5wYXJhZ3JhcGguc3BhbnMuc3BsaWNlKDAsIDAsIG5ld1NwYW4oKSk7XG4gICAgICAgIC8vIH1cbiAgICAgICAgLy8gaWYoZW5kLnBhcmFncmFwaC5zcGFucy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgLy8gICBlbmQucGFyYWdyYXBoLnNwYW5zLnNwbGljZSgwLCAwLCBuZXdTcGFuKCkpO1xuICAgICAgICAvLyB9XG4gICAgICAgIHRoaXMuJG5leHRUaWNrKCgpID0+IHtcbiAgICAgICAgICBzdGFydC5zcGFuSUQgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgc3RhcnQubm9kZSA9IHVuZGVmaW5lZDtcbiAgICAgICAgICByZXN0b3JlRE9NU2VsZWN0aW9uKHRoaXMuJHJlZnMuY29udGFpbmVyLCBkYXRhUG9pbnRlcihkYXRhLCBzdGFydCkpO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICAvLyBodHRwczovL3N0YWNrb3ZlcmZsb3cuY29tL3F1ZXN0aW9ucy83MjA3MjkxL2lzLWl0LXBvc3NpYmxlLXRvLWRpc2FibGUtb3ItY29udHJvbC1jb21tYW5kcy1pbi1jb250ZW50ZWRpdGFibGUtZWxlbWVudHNcbiAgICAgIGlmKGUuY29kZSA9PT0gJ0tleUwnICYmIChlLm1ldGFLZXkgPT09IHRydWUgfHwgZS5jdHJsS2V5ID09PSB0cnVlKSkge1xuICAgICAgICAvLyBsaXN0XG4gICAgICAgIHRoaXMudG9nZ2xlQnVsbGV0KCk7XG4gICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfSBlbHNlIGlmKChlLmNvZGUgPT09ICdLZXlMJ1xuICAgICAgICB8fCBlLmNvZGUgPT09ICdLZXlCJ1xuICAgICAgICB8fCBlLmNvZGUgPT09ICdLZXlJJ1xuICAgICAgICB8fCBlLmNvZGUgPT09ICdLZXlVJ1xuICAgICAgICB8fCAoZS5jb2RlID09PSAnRGlnaXQ2JyAmJiBlLnNoaWZ0S2V5ID09PSB0cnVlKVxuICAgICAgICB8fCAoZS5jb2RlID09PSAnTWludXMnICYmIGUuc2hpZnRLZXkgPT09IHRydWUpKSAmJiAoZS5jdHJsS2V5ID09PSB0cnVlIHx8IGUubWV0YUtleSA9PT0gdHJ1ZSkpIHtcblxuICAgICAgICBsZXQgc3R5bGU7XG4gICAgICAgIGlmKGUuY29kZSA9PT0gJ0tleUInKSB7XG4gICAgICAgICAgc3R5bGUgPSAnYm9sZCc7XG4gICAgICAgIH0gZWxzZSBpZihlLmNvZGUgPT09ICdLZXlJJykge1xuICAgICAgICAgIHN0eWxlID0gJ2l0YWxpYyc7XG4gICAgICAgIH0gZWxzZSBpZihlLmNvZGUgPT09ICdLZXlVJykge1xuICAgICAgICAgIHN0eWxlID0gJ3VuZGVybGluZSc7XG4gICAgICAgIH0gZWxzZSBpZihlLmNvZGUgPT09ICdEaWdpdDYnKSB7XG4gICAgICAgICAgc3R5bGUgPSAnc3VwZXJzY3JpcHQnO1xuICAgICAgICB9IGVsc2UgaWYoZS5jb2RlID09PSAnTWludXMnKSB7XG4gICAgICAgICAgc3R5bGUgPSAnc3Vic2NyaXB0JztcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHNlbGVjdGlvbiA9IG5vcm1hbGl6ZWRET01TZWxlY3Rpb24oKTtcbiAgICAgICAgaWYoIXNlbGVjdGlvbi5jb2xsYXBzZWQpIHtcbiAgICAgICAgICBjb25zdCBkYXRhID0gdGhpcy5wYXJhZ3JhcGhzO1xuICAgICAgICAgIGRhdGFTZWxlY3Rpb25Ub09mZnNldHMoZGF0YSwgc2VsZWN0aW9uKTtcbiAgICAgICAgICB0aGlzLnRvZ2dsZVN0eWxlKHN0eWxlLCBzZWxlY3Rpb24pO1xuICAgICAgICAgIC8vIHJlc2V0IERPTSBub2RlcyBhcyB0aGV5IGFyZSBtb3N0IGxpa2VseSBnb25lIGFmdGVyIGRhdGEgbW9kaWZpY2F0aW9uc1xuICAgICAgICAgIHNlbGVjdGlvbi5zdGFydC5ub2RlID0gdW5kZWZpbmVkO1xuICAgICAgICAgIHNlbGVjdGlvbi5lbmQubm9kZSA9IHVuZGVmaW5lZDtcbiAgICAgICAgICBkYXRhU2VsZWN0aW9uUmVzdG9yZUZyb21PZmZzZXRzKGRhdGEsIHNlbGVjdGlvbik7XG4gICAgICAgICAgdGhpcy4kbmV4dFRpY2soKCkgPT4ge1xuICAgICAgICAgICAgcmVzdG9yZURPTVNlbGVjdGlvbih0aGlzLiRyZWZzLmNvbnRhaW5lciwgc2VsZWN0aW9uLnN0YXJ0LCBzZWxlY3Rpb24uZW5kKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIHJldHVybiBmYWxzZTtcblxuICAgICAgfSBlbHNlIGlmKGUua2V5ID09PSAnRW50ZXInKSB7XG4gICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcblxuICAgICAgICB0aGlzLmFwcGx5Vmlld0NoYW5nZXNOb3coKTtcblxuICAgICAgICBpZighdGhpcy5wYXJhZ3JhcGhzKSB7XG4gICAgICAgICAgdGhpcy5wYXJhZ3JhcGhzID0gW25ld1BhcmFncmFwaCgpLCBuZXdQYXJhZ3JhcGgoKV07XG4gICAgICAgICAgdGhpcy5hcHBseVZpZXdDaGFuZ2VzTm93KGZhbHNlKTtcbiAgICAgICAgICB0aGlzLiRuZXh0VGljaygoKSA9PiB7XG4gICAgICAgICAgICByZXN0b3JlRE9NU2VsZWN0aW9uKHRoaXMuJHJlZnMuY29udGFpbmVyLCBkYXRhUG9pbnRlckRPTU5vZGUoZGF0YVBvaW50ZXIodGhpcy5wYXJhZ3JhcGhzLCB7IHBhcmFncmFwaEluZGV4OiAxLCBvZmZzZXQ6IDAgfSksIHRoaXMuJHJlZnMuY29udGFpbmVyKSk7XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy4kbmV4dFRpY2soKCkgPT4ge1xuXG4gICAgICAgICAgY29uc3QgZGF0YSA9IHRoaXMucGFyYWdyYXBocztcbiAgICAgICAgICBjb25zdCBzZWxlY3Rpb24gPSBub3JtYWxpemVkRE9NU2VsZWN0aW9uKCk7XG5cbiAgICAgICAgICBpZihzZWxlY3Rpb24uY29sbGFwc2VkKSB7XG4gICAgICAgICAgICBkYXRhUG9pbnRlcihkYXRhLCBzZWxlY3Rpb24uc3RhcnQpO1xuICAgICAgICAgICAgY29uc3QgciA9IGRhdGFJbnNlcnQoZGF0YSwgc2VsZWN0aW9uLnN0YXJ0LCBbbmV3UGFyYWdyYXBoKCksIG5ld1BhcmFncmFwaCgpXSk7XG4gICAgICAgICAgICB0aGlzLiRuZXh0VGljaygoKSA9PiB7XG4gICAgICAgICAgICAgIHJlc3RvcmVET01TZWxlY3Rpb24odGhpcy4kcmVmcy5jb250YWluZXIsIGRhdGFQb2ludGVyRE9NTm9kZShkYXRhUG9pbnRlck5leHQoZGF0YSwgc2VsZWN0aW9uLnN0YXJ0KSwgdGhpcy4kcmVmcy5jb250YWluZXIpKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cblxuICAgICAgICB9KTtcblxuICAgICAgfSBlbHNlIGlmKGUua2V5ID09PSAnQmFja3NwYWNlJykge1xuXG4gICAgICAgIGNvbnN0IHsgc3RhcnQsIGVuZCwgY29sbGFwc2VkIH0gPSB0aGlzLmFwcGx5Vmlld0NoYW5nZXNOb3coKTtcblxuICAgICAgICBpZighY29sbGFwc2VkKSB7XG4gICAgICAgICAgY29uc29sZS5kZWJ1Zygnd2FybmluZzogcmFuZ2UgYmFja3NwYWNlIGhhZCB0byBiZSBoYW5kbGVyIGVsc2V3aGVyZScpO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmKHN0YXJ0Lm9mZnNldCA+IDAgfHwgc3RhcnQuc3BhbkluZGV4ID4gMCkge1xuICAgICAgICAgIHJldHVybjsgLy8gcmVzdW1lIHdpdGggbm9ybWFsIGJhY2tzcGFjZSBvcGVyYXRpb25cbiAgICAgICAgfVxuXG4gICAgICAgICAgLypcbiAgICAgICAgICBjb25zdCB7IHNwYW5Ob2RlLCBzcGFuQXR0cnMsIHBhcmFncmFwaE5vZGUsIHBhcmFncmFwaEF0dHJzIH0gPSBkYXRhRE9NTm9kZXNBdE5vZGUoc3RhcnQubm9kZSk7XG4gICAgICAgICAgLy8gZGV0ZXJtaW5lIGlmIHRoZXJlIGlzIHRleHQgYmVmb3JlXG4gICAgICAgICAgaWYoc3Bhbk5vZGUpIHtcbiAgICAgICAgICAgIGNvbnN0IHByZXYgPSBzcGFuTm9kZS5wcmV2aW91c1NpYmxpbmc7XG4gICAgICAgICAgICBpZihwcmV2Lm5vZGVUeXBlID09PSBOb2RlLlRFWFRfTk9ERSAmJiBwcmV2LnRleHRDb250ZW50Lmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfSBlbHNlIGlmKHByZXYubm9kZVR5cGUgPT09IE5vZGUuRUxFTUVOVF9OT0RFICYmIHByZXYudGV4dENvbnRlbnQubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICAqL1xuXG4gICAgICAgICAgLypcbiAgICAgICAgICBjb25zdCB7IG5vZGUsIGF0dHJzIH0gPSBnZXRET01FbGVtZW50RGF0YUF0dHJpYnV0ZXMoc3RhcnQubm9kZSwgJ1NQQU4nLCBbJ2lkJywgJ2ZpcnN0JywgJ2xhc3QnXSk7XG5cbiAgICAgICAgICAvLyBUT0RPOiBub2RlIG1heSBiZSBudWxsLCBoYW5kbGUgdGhpc1xuXG4gICAgICAgICAgY29uc3Qgc2libGluZ3MgPSBub2RlLnBhcmVudE5vZGUuY2hpbGRyZW47XG4gICAgICAgICAgZm9yKGxldCBpPTA7IGk8c2libGluZ3MubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGNvbnN0IHNpYmxpbmcgPSBzaWJsaW5nc1tpXTtcbiAgICAgICAgICAgIGlmKHNpYmxpbmcubm9kZU5hbWUgPT09ICdTUEFOJykge1xuICAgICAgICAgICAgICBpZihzaWJsaW5nLmNsYXNzTGlzdC5jb250YWlucygndG9rZW4nKSkge1xuICAgICAgICAgICAgICAgIGlmKHNpYmxpbmcgIT09IG5vZGUpIHtcbiAgICAgICAgICAgICAgICAgIHJldHVybjsgLy8gbm90IGZpcnN0IHRva2VuXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGJyZWFrOyAvLyBmaXJzdCB0b2tlblxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgICovXG5cbiAgICAgICAgICAvLyBOT1RFOiBhdHRycy5maXJzdCA9PT0gJ3RydWUnIGNvdWxkIG5vdCBrZWVwIHVwIHRvIHRoZSB0YXNrLCBpLmUuLCBhdCB0aGF0IHBvaW50IHRoZSBzcGFuIG1pZ2h0IGJlIGFscmVhZHkgZ29uZVxuXG4gICAgICAgIC8vIGJlY2F1c2Ugb2YgZGVib3VuY2UgYXBwbHlWaWV3Q2hhbmdlcyB3aWxsIG5vdCBrZWVwIHVwIHRvIHRoZSB0YXNrLCBwcmV2ZW50IGRlbGV0aW5nIHBhcmFncmFwaCBET00gdGFncyBieSB0aGUgYnJvd3NlciBhdXRvbWF0aWNhbGx5XG4gICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcblxuICAgICAgICB0aGlzLiRuZXh0VGljaygoKSA9PiB7XG5cbiAgICAgICAgICBjb25zdCBkYXRhID0gdGhpcy5wYXJhZ3JhcGhzO1xuICAgICAgICAgIGNvbnN0IHBhcmFncmFwaHMgPSB0aGlzLnBhcmFncmFwaHM7XG5cbiAgICAgICAgICBjb25zdCBzZWxlY3Rpb24gPSBub3JtYWxpemVkRE9NU2VsZWN0aW9uKCk7XG5cbiAgICAgICAgICBjb25zdCBzdGFydCA9IHNlbGVjdGlvbi5zdGFydDtcblxuICAgICAgICAgIC8vIGNvbnN0IG9iaiA9IChvKSA9PiBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KG8pKTtcblxuICAgICAgICAgIGRhdGFQb2ludGVyKGRhdGEsIHN0YXJ0KTsgLy8gdmVyaWZ5IGJ5IGFsaWduaW5nIHdpdGggZGF0YSBtb2RlbFxuXG4gICAgICAgICAgLy8gc3RhcnQgbWF5IG5vdCBwb2ludCB0byB0aGUgYmVnaW5uaW5nIG9mIHBhcmFncmFwaCwgZXZlbiBpZiB0aGUgY3Vyc29yIHRydWx5IGlzLCBzbyBjb25zdHJ1Y3RcbiAgICAgICAgICBjb25zdCBzdGFydE9mUGFyYWdyYXBoID0gZGF0YVBvaW50ZXIoZGF0YSwgeyBwYXJhZ3JhcGhJbmRleDogc3RhcnQucGFyYWdyYXBoSW5kZXgsIHNwYW5JbmRleDogMCwgb2Zmc2V0OiAwIH0pO1xuXG4gICAgICAgICAgaWYoc3RhcnQucGFyYWdyYXBoSW5kZXggPiAwKSB7XG5cbiAgICAgICAgICAgIC8vIHRoaXMucGFyc2VET00oKTtcbiAgICAgICAgICAgIGNvbnN0IGRhdGEgPSB0aGlzLnBhcmFncmFwaHM7XG5cbiAgICAgICAgICAgIC8vIHdlIGFyZSBhdCB0aGUgYmVnaW5uaW5nIG9mIHBhcmFncmFwaCwgZGVsZXRlIGl0IGJ5IGpvaW5pbmcgdGhlIHJlc3Qgb2YgaXQgd2l0aCB0aGUgcHJldmlvdXMgcGFyYWdyYXBoXG5cbiAgICAgICAgICAgIC8vIGNvbnN0IHBwID0gZGF0YVBvaW50ZXIoZGF0YSwgZGF0YVBvaW50ZXIoZGF0YSwgeyBwYXJhZ3JhcGhJbmRleDogc3RhcnQucGFyYWdyYXBoSW5kZXggLSAxLCBzcGFuSW5kZXg6IHBhcmFncmFwaHNbc3RhcnQucGFyYWdyYXBoSW5kZXggLSAxXS5zcGFucy5sZW5ndGggLSAxLCBvZmZzZXQ6IC0xIH0pKTtcbiAgICAgICAgICAgIGNvbnN0IHBwID0gZGF0YVBvaW50ZXJQcmV2KGRhdGEsIHN0YXJ0T2ZQYXJhZ3JhcGgpOyAgLy8gcHJldmlvdXMgcG9zaXRpb24gKG1pZ2h0IG5vdCBjb250YWluIGEgcmVhbCBzcGFuKVxuICAgICAgICAgICAgLy8gY29uc29sZS5kZWJ1ZygnYmVmb3JlIHNwbGljZScsICdzdGFydCBvZiBwYXJhJywgc3RhcnRPZlBhcmFncmFwaCwgJ3N0YXJ0Jywgc3RhcnQsICctLT4nLCBwcClcbiAgICAgICAgICAgIGNvbnN0IHIgPSBkYXRhU3BsaWNlKGRhdGEsIHBwLCBzdGFydCk7XG4gICAgICAgICAgICAvLyBpZihwcC5wYXJhZ3JhcGguc3BhbnMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAvLyAgIHBwLnBhcmFncmFwaC5zcGFucy5zcGxpY2UoMCwgMCwgbmV3U3BhbigpKTtcbiAgICAgICAgICAgIC8vIH1cbiAgICAgICAgICAgIC8vIGNvbnNvbGUuZGVidWcoSlNPTi5zdHJpbmdpZnkociwgdW5kZWZpbmVkLCAyKSk7XG5cbiAgICAgICAgICAgIGNvbnN0IGMgPSByLmxlbmd0aCA+IDAgJiYgclswXS5pZCA9PT0gcHAucGFyYWdyYXBoSUQgPyBzdGFydCA6IHBwO1xuXG4gICAgICAgICAgICAvLyBhdCBuZXh0IERPTSB1cGRhdGUgKGF0IHRoaXMgcG9pbnQgb25seSB0aGUgZGF0YSBtb2RlbCBoYXMgY2hhbmdlcywgdGhlIERPTSBjb250YWlucyBvbGQgY29udGVudCksIHNldCBjdXJzb3IgdG8gdGhlIGNvcnJlY3QgcG9zaXRpb25cbiAgICAgICAgICAgIHRoaXMuJG5leHRUaWNrKCgpID0+IHtcblxuXG5cbiAgICAgICAgICAgICAgLy8gaGF2ZSB0byByZXNldCB0aGVzZVxuICAgICAgICAgICAgICAvLyBjLnNwYW5JRCA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgYy5ub2RlID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAvLyBwcC5zcGFuSW5kZXggPSAwO1xuICAgICAgICAgICAgICAvLyBwcC5vZmZzZXQgPSAwO1xuICAgICAgICAgICAgICAvLyBwdXQgdGV4dCBjdXJzb3IgYXQgdGhlIGV4cGVjdGVkIHBvc2l0aW9uXG4gICAgICAgICAgICAgIC8vIGRhdGFQb2ludGVyKGRhdGEsIHBwKTtcbiAgICAgICAgICAgICAgLy8gY29uc29sZS5kZWJ1ZygnREFUQScsIEpTT04uc3RyaW5naWZ5KGRhdGEsIHVuZGVmaW5lZCwgMikpO1xuICAgICAgICAgICAgICAvLyBjb25zb2xlLmRlYnVnKCdyZXN0b3JpbmcxJywgSlNPTi5zdHJpbmdpZnkocHAsIHVuZGVmaW5lZCwgMikpO1xuICAgICAgICAgICAgICAvLyBjb25zb2xlLmRlYnVnKCdyZXN0b3JpbmcxJywgYyk7XG4gICAgICAgICAgICAgIC8vIGRhdGFQb2ludGVyKGRhdGEsIHBwKTtcbiAgICAgICAgICAgICAgLy8gY29uc29sZS5kZWJ1ZygncmVzdG9yaW5nMicsIHBwKTtcbiAgICAgICAgICAgICAgLy8gY29uc29sZS5kZWJ1ZygncmVzdG9yaW5nMicsIEpTT04uc3RyaW5naWZ5KHBwLCB1bmRlZmluZWQsIDIpKTtcbiAgICAgICAgICAgICAgcmVzdG9yZURPTVNlbGVjdGlvbih0aGlzLiRyZWZzLmNvbnRhaW5lciwgYyk7XG4gICAgICAgICAgICAgIC8vIHJlc3RvcmVET01TZWxlY3Rpb24odGhpcy4kcmVmcy5jb250YWluZXIsIGRhdGFQb2ludGVyKGRhdGEsIHBwKSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICB9IGVsc2UgaWYoZS5rZXkgPT09ICdEZWxldGUnKSB7XG5cbiAgICAgICAgY29uc3QgeyBzdGFydCwgZW5kLCBjb2xsYXBzZWQgfSA9IHRoaXMuYXBwbHlWaWV3Q2hhbmdlc05vdygpO1xuXG4gICAgICAgIGlmKCFjb2xsYXBzZWQpIHtcbiAgICAgICAgICBjb25zb2xlLmRlYnVnKCd3YXJuaW5nOiByYW5nZSBkZWxldGVzIG11c3QgYmUgaGFuZGxlZCBlbHNld2hlcmUnKTtcbiAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICAvLyBjb25zb2xlLmRlYnVnKCdERUxFVEUgS0VZJywgc3RhcnQsIGVuZClcblxuICAgICAgICBpZighc3RhcnQgfHwgc3RhcnQuc3BhbkluZGV4IDwgc3RhcnQucGFyYWdyYXBoLnNwYW5zLmxlbmd0aCAtIDEgfHwgc3RhcnQuc3BhbiAmJiBzdGFydC5vZmZzZXQgPCBzdGFydC5zcGFuLnRleHQubGVuZ3RoXG4gICAgICAgICAgLyogfHwgc3RhcnQucGFyYWdyYXBoLnNwYW5zLmxlbmd0aCA+IDAgKi8pIHtcbiAgICAgICAgICAvLyBub3QgZW5kIG9mIHBhcmFncmFwaCBwb3NpdGlvblxuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcblxuICAgICAgICB0aGlzLiRuZXh0VGljaygoKSA9PiB7XG5cbiAgICAgICAgY29uc3QgZGF0YSA9IHRoaXMucGFyYWdyYXBocztcbiAgICAgICAgY29uc3QgcGFyYWdyYXBocyA9IHRoaXMucGFyYWdyYXBocztcblxuICAgICAgICAvLyBjb25zdCBzZWxlY3Rpb24gPSBub3JtYWxpemVkRE9NU2VsZWN0aW9uKCk7XG5cbiAgICAgICAgaWYoLyogc2VsZWN0aW9uLiAqL2NvbGxhcHNlZCkge1xuXG4gICAgICAgICAgLy8gbGV0IHN0YXJ0ID0gc2VsZWN0aW9uLnN0YXJ0O1xuICAgICAgICAgIC8vIGxldCBzdGFydCA9IHBvaW50ZXI7XG5cbiAgICAgICAgICAvLyDFoWVpdCBub3Nha2EsIHZhaSBwYXJhZ3LEgWZhIGJlaWdhcyBwxJNjIERPTStkYXRhIG1hcHBpbmdhLFxuICAgICAgICAgIC8vIHRvbcSTciDFoWlzIGlyIGrEgWRhcmEgcGlybXMgZGF0aSBzYXNpbmhyb25pesSTdGkgYXIgZGF0aWVtXG4gICAgICAgICAgLy8gdW4gbMSrZHogYXIgdG8gcGFyYWdyxIFmYSBiZWlnYXMgdmFyIG5vdGVpa3QgdGlrYWkgcMSTYyBET01cbiAgICAgICAgICAvKlxuICAgICAgICAgIGNvbnN0IHsgbm9kZSwgYXR0cnMgfSA9IGdldERPTUVsZW1lbnREYXRhQXR0cmlidXRlcyhzdGFydC5ub2RlLCAnU1BBTicsIFsnaWQnLCAnZmlyc3QnLCAnbGFzdCddKTtcbiAgICAgICAgICBcbiAgICAgICAgICBpZihub2RlICYmIHN0YXJ0Lm5vZGUubm9kZVR5cGUgPT09IE5vZGUuVEVYVF9OT0RFICYmIHN0YXJ0Lm9mZnNldCA9PT0gc3RhcnQubm9kZS5ub2RlVmFsdWUubGVuZ3RoXG4gICAgICAgICAgICAmJiAoYXR0cnMubGFzdCA9PT0gJ3RydWUnIFsjIG9ubHkgaWYgd2UgaGF2ZSBjdXJzb3IgaW4gdGhlIGxhc3Qgc3BhbiBvZiB0aGUgcGFyYWdyYXBoICNdXG4gICAgICAgICAgICB8fCBub2RlLnBhcmVudE5vZGUuY2hpbGRyZW5bbm9kZS5wYXJlbnROb2RlLmNoaWxkcmVuLmxlbmd0aCAtIDFdID09PSBub2RlIFsjIHRoaXMgaXMgbW9yZSBjb21tb24gLSBoYXZlIHRvIGNoZWNrIGlmIHRoZXJlIGFyZSBhbnkgbW9yZSBub2RlcyBhdCB0aGUgcmlnaHQgI10pKSB7XG4gICAgICAgICAgICAvLyBiZWNhdXNlIG9mIGRlYm91bmNlIGFwcGx5Vmlld0NoYW5nZXMgd2lsbCBub3Qga2VlcCB1cCB0byB0aGUgdGFzaywgcHJldmVudCBkZWxldGluZyBwYXJhZ3JhcGggRE9NIHRhZ3MgYnkgdGhlIGJyb3dzZXIgYXV0b21hdGljYWxseVxuICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH1cbiAgICAgICAgICAqL1xuXG4gICAgICAgICAgLy8gZGF0YVBvaW50ZXIoZGF0YSwgc3RhcnQpO1xuICAgICAgICAgIGNvbnN0IHN0YXJ0UGFyYWdyYXBoU3BhbnMgPSBwYXJhZ3JhcGhzW3N0YXJ0LnBhcmFncmFwaEluZGV4XS5zcGFucztcbiAgICAgICAgICBjb25zdCBlbmRPZlBhcmFncmFwaCA9IGRhdGFQb2ludGVyKGRhdGEsIHsgcGFyYWdyYXBoSW5kZXg6IHN0YXJ0LnBhcmFncmFwaEluZGV4LCBzcGFuSW5kZXg6IHN0YXJ0UGFyYWdyYXBoU3BhbnMubGVuZ3RoLTEsIG9mZnNldDogLTEgfSlcbiAgICAgICAgICAvLyBjb25zb2xlLmRlYnVnKCdERUxFVEUnLCBzdGFydCwgc3RhcnRQYXJhZ3JhcGhTcGFucywgc3RhcnRQYXJhZ3JhcGhTcGFuc1tzdGFydC5zcGFuSW5kZXhdKVxuXG4gICAgICAgICAgaWYoc3RhcnQucGFyYWdyYXBoSW5kZXggPCBwYXJhZ3JhcGhzLmxlbmd0aCAtIDEgLyomJiBzdGFydC5zcGFuSW5kZXggPT09IHN0YXJ0UGFyYWdyYXBoU3BhbnMubGVuZ3RoIC0gMSAmJiBzdGFydC5vZmZzZXQgPj0gc3RhcnRQYXJhZ3JhcGhTcGFuc1tzdGFydC5zcGFuSW5kZXhdLnRleHQudHJpbUVuZCgpLmxlbmd0aCovKSB7XG4gICAgICAgICAgICAvLyBhdCB0aGlzIHBvaW50IHdlIGFscmVhZHkga25vdyB0aGF0IHRoZSBkZWZhdWx0IGJlaGF2aW9yIGlzIG5vdCB3aGF0IHdlIG5lZWRcbiAgICAgICAgICAgIC8vIGFscmVhZHkgYXBwbGllZCBiZWZvcmVcbiAgICAgICAgICAgIC8vIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgICAgICAvLyBlLnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICAgICAgICAgIC8vIHdlIGFyZSBhdCB0aGUgZW5kIG9mIHRoZSBjdXJyZW50IHBhcmFncmFwaCwgZGVsZXRlIG5leHQgcGFyYWdyYXBoIGl0IGJ5IGpvaW5pbmcgaXQgdG8gdGhlIGN1cnJlbnQgcGFyYWdyYXBoXG5cbiAgICAgICAgICAgIC8vIHRoaXMucGFyc2VET00oKTtcbiAgICAgICAgICAgIGNvbnN0IGRhdGEgPSB0aGlzLnBhcmFncmFwaHM7XG5cbiAgICAgICAgICAgIGlmKHN0YXJ0LnBhcmFncmFwaC5zcGFucy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgLy8gcmVtb3ZlIGN1cnJlbnQgZW1wdHkgcGFyYWdyYXBoIG9ubHlcbiAgICAgICAgICAgICAgZGF0YS5zcGxpY2Uoc3RhcnQucGFyYWdyYXBoSW5kZXgsIDEpO1xuICAgICAgICAgICAgICBzdGFydC5zcGFuSW5kZXggPSAwO1xuICAgICAgICAgICAgICBzdGFydC5wYXJhZ3JhcGhJRCA9IDA7XG4gICAgICAgICAgICB9IGVsc2Uge1xuXG4gICAgICAgICAgICAvLyBkYXRhU3BsaWNlKGRhdGEsIHN0YXJ0LCBkYXRhUG9pbnRlcihkYXRhLCBkYXRhUG9pbnRlcihkYXRhLCB7IHBhcmFncmFwaEluZGV4OiBzdGFydC5wYXJhZ3JhcGhJbmRleCArIDEsIHNwYW5JbmRleDogMCwgb2Zmc2V0OiAwIH0pKSk7XG4gICAgICAgICAgICAvLyBjb25zb2xlLmRlYnVnKCdzdGFydCBwYXJhIHNwYW5zJywgc3RhcnRQYXJhZ3JhcGhTcGFucylcbiAgICAgICAgICAgIC8vIGNvbnNvbGUuZGVidWcoJ2VuZG9mIHBhcmEnLCBlbmRPZlBhcmFncmFwaClcbiAgICAgICAgICAgIC8vIGNvbnNvbGUuZGVidWcoJ3BvaW50ZXIgbmV4dCcsIGRhdGFQb2ludGVyTmV4dChkYXRhLCBlbmRPZlBhcmFncmFwaCkpXG4gICAgICAgICAgICAvLyAgIGNvbnNvbGUuZGVidWcoJ0RBVEEwJywgSlNPTi5zdHJpbmdpZnkoZGF0YSwgdW5kZWZpbmVkLCAyKSk7XG4gICAgICAgICAgICBjb25zdCByID0gZGF0YVNwbGljZShkYXRhLCBzdGFydCwgZGF0YVBvaW50ZXJOZXh0KGRhdGEsIGVuZE9mUGFyYWdyYXBoKSk7XG4gICAgICAgICAgICAgIC8vIGNvbnNvbGUuZGVidWcoJ0RBVEExJywgSlNPTi5zdHJpbmdpZnkoZGF0YSwgdW5kZWZpbmVkLCAyKSk7XG4gICAgICAgICAgICAgIC8vIGNvbnNvbGUuZGVidWcoJ1NMSUNFRCcsIEpTT04uc3RyaW5naWZ5KHIsIHVuZGVmaW5lZCwgMikpO1xuICAgICAgICAgICAgICBpZihzdGFydC5zcGFuSW5kZXggPT09IHVuZGVmaW5lZCAmJiBzdGFydC5zcGFuSUQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICBzdGFydC5zcGFuSW5kZXggPSAwO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIGF0IG5leHQgRE9NIHVwZGF0ZSAoYXQgdGhpcyBwb2ludCBvbmx5IHRoZSBkYXRhIG1vZGVsIGhhcyBjaGFuZ2VzLCB0aGUgRE9NIGNvbnRhaW5zIG9sZCBjb250ZW50KSwgc2V0IGN1cnNvciB0byB0aGUgY29ycmVjdCBwb3NpdGlvblxuICAgICAgICAgICAgdGhpcy4kbmV4dFRpY2soKCkgPT4ge1xuICAgICAgICAgICAgICAvLyBoYXZlIHRvIHJlc2V0IHRoZXNlXG4gICAgICAgICAgICAgIC8vIHN0YXJ0LnNwYW5JRCA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgc3RhcnQubm9kZSA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgLy8gcHV0IHRleHQgY3Vyc29yIGF0IHRoZSBleHBlY3RlZCBwb3NpdGlvblxuICAgICAgICAgICAgICBkYXRhUG9pbnRlcihkYXRhLCBzdGFydClcbiAgICAgICAgICAgICAgLy8gY29uc29sZS5kZWJ1ZygnUkVTdG9SRScsIHN0YXJ0KVxuICAgICAgICAgICAgICByZXN0b3JlRE9NU2VsZWN0aW9uKHRoaXMuJHJlZnMuY29udGFpbmVyLCBzdGFydCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9IGVsc2UgaWYoKGUuY3RybEtleSB8fCBlLm1ldGFLZXkpICYmIGUuc2hpZnRLZXkgJiYgZS5jb2RlID09PSAnS2V5SCcpIHtcbiAgICAgICAgY29uc3Qgc2VsZWN0ZWRTcGFucyA9IHRoaXMuZ2V0U3BhblNlbGVjdGlvbigpO1xuICAgICAgICBjb25zb2xlLmRlYnVnKCdyZW1vdmUgaGlnaGxpZ2h0aW5nIGZyb20gc3BhbnMnLCBzZWxlY3RlZFNwYW5zKTtcbiAgICAgICAgZm9yKGNvbnN0IHMgb2Ygc2VsZWN0ZWRTcGFucykge1xuICAgICAgICAgIGZvcihjb25zdCBzcGFuIG9mIHMuc3BhbnMpIHtcbiAgICAgICAgICAgIHNwYW4uaGlnaGxpZ2h0ZWQgPSBmYWxzZTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgfSBlbHNlIGlmKChlLmN0cmxLZXkgfHwgZS5tZXRhS2V5KSAmJiBlLmNvZGUgPT09ICdLZXlIJykge1xuICAgICAgICBjb25zdCBzZWxlY3RlZFNwYW5zID0gdGhpcy5nZXRTcGFuU2VsZWN0aW9uKCk7XG4gICAgICAgIGNvbnNvbGUuZGVidWcoJ2hpZ2hsaWdodCBzcGFucycsIHNlbGVjdGVkU3BhbnMpO1xuICAgICAgICBmb3IoY29uc3QgcyBvZiBzZWxlY3RlZFNwYW5zKSB7XG4gICAgICAgICAgZm9yKGNvbnN0IHNwYW4gb2Ygcy5zcGFucykge1xuICAgICAgICAgICAgc3Bhbi5oaWdobGlnaHRlZCA9IHRydWU7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgIH0gZWxzZSBpZighc2VsZWN0aW9uLmlzQ29sbGFwc2VkKSB7XG4gICAgICAgIGNvbnNvbGUuZGVidWcoJ1BSRVZFTlQgUkFOR0UgUkVQTEFDRScpO1xuICAgICAgICAvLyBUT0RPIGJsb2NrcyBjbWQrcyBpZiB0ZXh0IGlzIHNlbGVjdGVkXG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIGNvbnNvbGUuZGVidWcoJ0VORCcpXG4gICAgICB9XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9LFxuXG4gICAgb25EcmFnU3RhcnQoZSkge1xuICAgICAgLy8gcHJldmVudCB0ZXh0IGRyYWdnaW5nXG4gICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIH0sXG5cbiAgICBvblBhc3RlKGUpIHtcbiAgICAgIGNvbnNvbGUuZGVidWcoJ2VkaXRhYmxlLXNwYW5zIHBhc3RlJywgZSk7XG4gICAgICAvLyB0aGlzIHByZXZlbnRzIHBhc3RlIHdpdGggc2VsZWN0aW5nIHBhc3RlIG1lbnUgaXRlbSwga2V5Ym9hcmQgc2hvcnRjdXRzIGdldCBwcmV2ZW50ZWQgaW4ga2V5ZG93biBldmVudCBoYW5kbGVyXG5cbiAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICAgIGNvbnN0IHsgc3RhcnQsIGVuZCwgY29sbGFwc2VkIH0gPSB0aGlzLmFwcGx5Vmlld0NoYW5nZXNOb3coKTtcblxuICAgICAgY29uc29sZS5kZWJ1ZygnUEFTVEUgfCBEQVRBJywgdGhpcy5wYXJhZ3JhcGhzKTtcblxuICAgICAgY29uc3QgbmF0aXZlRGF0YSA9IGUuY2xpcGJvYXJkRGF0YS5nZXREYXRhKCdhcHBsaWNhdGlvbi9ydXRhJyk7XG4gICAgICBjb25zdCBodG1sRGF0YSA9IGUuY2xpcGJvYXJkRGF0YS5nZXREYXRhKCd0ZXh0L2h0bWwnKTtcbiAgICAgIGNvbnN0IHRleHREYXRhID0gZS5jbGlwYm9hcmREYXRhLmdldERhdGEoJ3RleHQvcGxhaW4nKTtcblxuICAgICAgaWYobmF0aXZlRGF0YS5sZW5ndGggPT09IDAgJiYgaHRtbERhdGEubGVuZ3RoID09PSAwICYmIHRleHREYXRhLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAvLyBjbGlwYm9hcmQgZW1wdHkgb3IgaW5jb21wYXRpYmxlIGZvcm1hdFxuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIC8vIGlmIHJhbmdlIGlzIGFscmVhZHkgc2VsZWN0ZWQsIGRlbGV0ZSBpdFxuICAgICAgLy8gY29uc3Qgc2VsZWN0aW9uID0gbm9ybWFsaXplZERPTVNlbGVjdGlvbigpO1xuICAgICAgY29uc3QgZGF0YSA9IHRoaXMucGFyYWdyYXBocztcbiAgICAgIC8vIGNvbnN0IHN0YXJ0ID0gc2VsZWN0aW9uLnN0YXJ0O1xuICAgICAgZGF0YVBvaW50ZXIoZGF0YSwgc3RhcnQpO1xuICAgICAgLy8gaWYoIXNlbGVjdGlvbi5pc0NvbGxhcHNlZCkge1xuICAgICAgLy8gaWYoIXNlbGVjdGlvbi5jb2xsYXBzZWQpIHtcbiAgICAgIGlmKCFjb2xsYXBzZWQpIHtcbiAgICAgICAgY29uc3QgZGF0YSA9IHRoaXMucGFyYWdyYXBocztcbiAgICAgICAgLy8gY29uc3Qgc2VsZWN0aW9uID0gbm9ybWFsaXplZERPTVNlbGVjdGlvbigpO1xuICAgICAgICAvLyBjb25zdCBzdGFydCA9IHNlbGVjdGlvbi5zdGFydDtcbiAgICAgICAgZGF0YVBvaW50ZXIoZGF0YSwgc3RhcnQpO1xuICAgICAgICAvLyBjb25zdCBlbmQgPSBzZWxlY3Rpb24uZW5kO1xuICAgICAgICBkYXRhUG9pbnRlcihkYXRhLCBlbmQpO1xuICAgICAgICBjb25zdCByID0gZGF0YVNwbGljZShkYXRhLCBzdGFydCwgZW5kKTtcbiAgICAgIH1cblxuXG4gICAgICAvLyBpZihlLmNsaXBib2FyZERhdGEudHlwZXMpXG5cbiAgICAgIC8vIGNvbnNvbGUuZGVidWcoJ0NMSVAnLCBlLmNsaXBib2FyZERhdGEudHlwZXMpXG4gICAgICAvLyBjb25zb2xlLmRpcihlLmNsaXBib2FyZERhdGEudHlwZXMpXG4gICAgICAvLyBjb25zb2xlLmRlYnVnKCdQQVNURSBIVE1MJywgZS5jbGlwYm9hcmREYXRhLmdldERhdGEoJ3RleHQvaHRtbCcpKTtcbiAgICAgIC8vIGNvbnNvbGUuZGVidWcoJ1BBU1RFIFJURicsIGUuY2xpcGJvYXJkRGF0YS5nZXREYXRhKCd0ZXh0L3J0ZicpKTtcbiAgICAgIC8vIGNvbnN0IGNsaXBib2FyZERhdGEgPSBlLmNsaXBib2FyZERhdGEuZ2V0RGF0YSgnYXBwbGljYXRpb24vcnV0YScpO1xuICAgICAgaWYobmF0aXZlRGF0YS5sZW5ndGggPiAwKSB7XG4gICAgICAgIC8qXG4gICAgICAgIGNvbnN0IHNlbGVjdGlvbiA9IG5vcm1hbGl6ZWRET01TZWxlY3Rpb24oKTtcbiAgICAgICAgY29uc3QgZGF0YSA9IHRoaXMucGFyYWdyYXBocztcbiAgICAgICAgY29uc3Qgc3RhcnQgPSBzZWxlY3Rpb24uc3RhcnQ7XG4gICAgICAgIGRhdGFQb2ludGVyKGRhdGEsIHN0YXJ0KTtcbiAgICAgICAgLy8gaWYoIXNlbGVjdGlvbi5pc0NvbGxhcHNlZCkge1xuICAgICAgICBpZighc2VsZWN0aW9uLmNvbGxhcHNlZCkge1xuICAgICAgICAgIGNvbnN0IGRhdGEgPSB0aGlzLnBhcmFncmFwaHM7XG4gICAgICAgICAgY29uc3Qgc2VsZWN0aW9uID0gbm9ybWFsaXplZERPTVNlbGVjdGlvbigpO1xuICAgICAgICAgIGNvbnN0IHN0YXJ0ID0gc2VsZWN0aW9uLnN0YXJ0O1xuICAgICAgICAgIGRhdGFQb2ludGVyKGRhdGEsIHN0YXJ0KTtcbiAgICAgICAgICBjb25zdCBlbmQgPSBzZWxlY3Rpb24uZW5kO1xuICAgICAgICAgIGRhdGFQb2ludGVyKGRhdGEsIGVuZCk7XG4gICAgICAgICAgY29uc3QgciA9IGRhdGFTcGxpY2UoZGF0YSwgc3RhcnQsIGVuZCk7XG4gICAgICAgIH1cbiAgICAgICAgKi9cbiAgICAgICAgY29uc3QgbmV3RGF0YSA9IEpTT04ucGFyc2UobmF0aXZlRGF0YSk7ICAvLyB0aGlzIG5hdHVyYWxseSBnaXZlcyBjb3B5XG4gICAgICAgIC8vIGdlbmVyYXRlIG5ldyB1bmlxdWUgaWQnc1xuICAgICAgICBmb3IoY29uc3QgcCBvZiBuZXdEYXRhKSB7XG4gICAgICAgICAgcC5pZCA9IG5ld0lEKCk7XG4gICAgICAgICAgZm9yKGNvbnN0IHMgb2YgcC5zcGFucykge1xuICAgICAgICAgICAgcy5pZCA9IG5ld0lEKCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8vIGNvbnN0IHN0YXJ0ID0gc2VsZWN0aW9uLnN0YXJ0O1xuICAgICAgICAvLyBjb25zdCBkYXRhID0gdGhpcy5wYXJhZ3JhcGhzO1xuICAgICAgICAvLyBkYXRhUG9pbnRlcihkYXRhLCBzdGFydCk7XG4gICAgICAgIGNvbnN0IHIgPSBkYXRhSW5zZXJ0KGRhdGEsIHN0YXJ0LCBuZXdEYXRhKTtcbiAgICAgICAgLy8gcHV0IGN1cnNvciBhZnRlciBwYXN0ZWQgdGV4dFxuICAgICAgICAvLyBjb25zb2xlLmRlYnVnKCdSUlJSUicsIHIpXG4gICAgICAgIHRoaXMuJG5leHRUaWNrKCgpID0+IHtcbiAgICAgICAgICByZXN0b3JlRE9NU2VsZWN0aW9uKHRoaXMuJHJlZnMuY29udGFpbmVyLCByLmVuZCk7XG4gICAgICAgIH0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gY29uc3QgY2xpcGJvYXJkRGF0YSA9IGUuY2xpcGJvYXJkRGF0YS5nZXREYXRhKCd0ZXh0L2h0bWwnKTtcbiAgICAgICAgaWYoaHRtbERhdGEubGVuZ3RoID4gMCkge1xuICAgICAgICAgIGNvbnN0IGh0bWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdodG1sJylcbiAgICAgICAgICBodG1sLmlubmVySFRNTCA9IGh0bWxEYXRhO1xuXG4gICAgICAgICAgY29uc29sZS5kZWJ1ZyhodG1sRGF0YSlcblxuICAgICAgICAgIGNvbnN0IHN0eWxlID0gaHRtbC5xdWVyeVNlbGVjdG9yKCdoZWFkID4gc3R5bGUnKTtcbiAgICAgICAgICAvLyBjb25zdCBzdHlsZVRleHQgPSBzdHlsZS50ZXh0Q29udGVudDtcbiAgICAgICAgICAvLyBjb25zb2xlLmRlYnVnKHN0eWxlVGV4dClcbiAgICAgICAgICAvLyBjb25zb2xlLmRpcihodG1sLnF1ZXJ5U2VsZWN0b3IoJ2hlYWQgPiBzdHlsZScpKVxuXG4gICAgICAgICAgLy8gcGFyc2Ugc3R5bGVcbiAgICAgICAgICBpZihzdHlsZSkge1xuICAgICAgICAgICAgbGV0IGRvYyA9IGRvY3VtZW50LmltcGxlbWVudGF0aW9uLmNyZWF0ZUhUTUxEb2N1bWVudChcIlwiKTtcbiAgICAgICAgICAgIGRvYy5ib2R5LmFwcGVuZENoaWxkKHN0eWxlKTtcbiAgICAgICAgICAgIC8vIGNvbnNvbGUuZGVidWcoJ1NIRUVUJywgc3R5bGUuc2hlZXQpXG4gICAgICAgICAgfVxuXG4gICAgICAgICAgY29uc3QgYm9keSA9IGh0bWwucXVlcnlTZWxlY3RvcignYm9keScpO1xuXG4gICAgICAgICAgY29uc29sZS5kZWJ1Zyhib2R5KVxuXG4gICAgICAgICAgLy8gVE9ETzogcGFyc2UgRE9NIGhlcmUgd2l0aCBmb3JtYXR0aW5nXG4gICAgICAgICAgY29uc3QgbmV3RGF0YSA9IHBhcnNlVmFuaWxsYURPTShib2R5LCBzdHlsZSAmJiBzdHlsZS5zaGVldC5jc3NSdWxlcyk7XG5cbiAgICAgICAgICBjb25zb2xlLmRlYnVnKEpTT04uc3RyaW5naWZ5KG5ld0RhdGEsIHVuZGVmaW5lZCwgMikpXG5cbiAgICAgICAgICBjb25zdCBzZWxlY3Rpb24gPSBub3JtYWxpemVkRE9NU2VsZWN0aW9uKCk7XG4gICAgICAgICAgY29uc3QgZGF0YSA9IHRoaXMucGFyYWdyYXBocztcbiAgICAgICAgICBjb25zdCBzdGFydCA9IHNlbGVjdGlvbi5zdGFydDtcbiAgICAgICAgICBkYXRhUG9pbnRlcihkYXRhLCBzdGFydCk7XG4gICAgICAgICAgaWYoIXNlbGVjdGlvbi5jb2xsYXBzZWQpIHtcbiAgICAgICAgICAgIGNvbnN0IGRhdGEgPSB0aGlzLnBhcmFncmFwaHM7XG4gICAgICAgICAgICBjb25zdCBzZWxlY3Rpb24gPSBub3JtYWxpemVkRE9NU2VsZWN0aW9uKCk7XG4gICAgICAgICAgICBjb25zdCBzdGFydCA9IHNlbGVjdGlvbi5zdGFydDtcbiAgICAgICAgICAgIGRhdGFQb2ludGVyKGRhdGEsIHN0YXJ0KTtcbiAgICAgICAgICAgIGNvbnN0IGVuZCA9IHNlbGVjdGlvbi5lbmQ7XG4gICAgICAgICAgICBkYXRhUG9pbnRlcihkYXRhLCBlbmQpO1xuICAgICAgICAgICAgY29uc3QgciA9IGRhdGFTcGxpY2UoZGF0YSwgc3RhcnQsIGVuZCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIC8vIGNvbnN0IG5ld0RhdGEgPSBKU09OLnBhcnNlKGNsaXBib2FyZERhdGEpOyAgLy8gdGhpcyBuYXR1cmFsbHkgZ2l2ZXMgY29weVxuICAgICAgICAgIC8vIGdlbmVyYXRlIG5ldyB1bmlxdWUgaWQnc1xuICAgICAgICAgIGZvcihjb25zdCBwIG9mIG5ld0RhdGEpIHtcbiAgICAgICAgICAgIHAuaWQgPSBuZXdJRCgpO1xuICAgICAgICAgICAgZm9yKGNvbnN0IHMgb2YgcC5zcGFucykge1xuICAgICAgICAgICAgICBzLmlkID0gbmV3SUQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgLy8gY29uc3Qgc3RhcnQgPSBzZWxlY3Rpb24uc3RhcnQ7XG4gICAgICAgICAgLy8gY29uc3QgZGF0YSA9IHRoaXMucGFyYWdyYXBocztcbiAgICAgICAgICAvLyBkYXRhUG9pbnRlcihkYXRhLCBzdGFydCk7XG4gICAgICAgICAgY29uc29sZS5kZWJ1ZyhkYXRhLCBzdGFydCwgbmV3RGF0YSlcbiAgICAgICAgICBjb25zdCByID0gZGF0YUluc2VydChkYXRhLCBzdGFydCwgbmV3RGF0YSk7XG5cblxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIGNvbnN0IGNsaXBib2FyZERhdGEgPSBlLmNsaXBib2FyZERhdGEuZ2V0RGF0YSgndGV4dC9wbGFpbicpO1xuICAgICAgICAgIGlmKHRleHREYXRhLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIGRvY3VtZW50LmV4ZWNDb21tYW5kKFwiaW5zZXJ0SFRNTFwiLCBmYWxzZSwgdGV4dERhdGEpOyAgIC8vIFRPRE86IGhvdyB0byBzcGxpdCBpbnRvIHByb3BlciBwYXJhZ3JhcGhzIGF0IG5ld2xpbmVzP1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sXG5cbiAgICBvbkN1dChlKSB7XG4gICAgICAvLyBjb25zb2xlLmRlYnVnKCdlZGl0YWJsZS1zcGFucyBjdXQnLCBlKTtcbiAgICAgIC8vIHRoaXMgcHJldmVudHMgY3V0dGluZyB3aXRoIHNlbGVjdGluZyBjdXQgbWVudSBpdGVtLCBrZXlib2FyZCBzaG9ydGN1dHMgZ2V0IHByZXZlbnRlZCBpbiBrZXlkb3duIGV2ZW50IGhhbmRsZXJcbiAgICAgIHRoaXMub25Db3B5KGUpO1xuICAgICAgLy8gZGVsZXRlIHNlbGVjdGlvblxuICAgICAgY29uc3Qgc2VsZWN0aW9uID0gZG9jdW1lbnQuZ2V0U2VsZWN0aW9uKCk7XG4gICAgICBpZighc2VsZWN0aW9uLmlzQ29sbGFwc2VkKSB7XG4gICAgICAgIGNvbnN0IGRhdGEgPSB0aGlzLnBhcmFncmFwaHM7XG4gICAgICAgIGNvbnN0IHNlbGVjdGlvbiA9IG5vcm1hbGl6ZWRET01TZWxlY3Rpb24oKTtcbiAgICAgICAgY29uc3Qgc3RhcnQgPSBzZWxlY3Rpb24uc3RhcnQ7XG4gICAgICAgIGRhdGFQb2ludGVyKGRhdGEsIHN0YXJ0KTtcbiAgICAgICAgY29uc3QgZW5kID0gc2VsZWN0aW9uLmVuZDtcbiAgICAgICAgZGF0YVBvaW50ZXIoZGF0YSwgZW5kKTtcbiAgICAgICAgY29uc3QgciA9IGRhdGFTcGxpY2UoZGF0YSwgc3RhcnQsIGVuZCk7XG4gICAgICB9XG4gICAgfSxcblxuICAgIG9uQ29weShlKSB7XG4gICAgICAvLyBjb25zb2xlLmRlYnVnKCdlZGl0YWJsZS1zcGFucyBjb3B5JywgZSk7XG4gICAgICBjb25zdCBkYXRhID0gdGhpcy5wYXJhZ3JhcGhzO1xuICAgICAgY29uc3Qgc2VsZWN0aW9uID0gbm9ybWFsaXplZERPTVNlbGVjdGlvbigpO1xuICAgICAgaWYoIXNlbGVjdGlvbi5pc0NvbGxhcHNlZCkge1xuXG4gICAgICAgIGNvbnN0IHN0YXJ0ID0gc2VsZWN0aW9uLnN0YXJ0O1xuICAgICAgICBkYXRhUG9pbnRlcihkYXRhLCBzdGFydCk7XG4gICAgICAgIGNvbnN0IGVuZCA9IHNlbGVjdGlvbi5lbmQ7XG4gICAgICAgIGRhdGFQb2ludGVyKGRhdGEsIGVuZCk7XG5cblxuICAgICAgICBjb25zdCByID0gZGF0YVNwbGljZShkYXRhLCBzdGFydCwgZW5kLCBTcGxpY2VNb2RlLkNvcHkpO1xuXG4gICAgICAgIC8vIGNvcHkgYXMgcnV0YSBpbnRlcm5hbCBmb3JtYXRcbiAgICAgICAgZS5jbGlwYm9hcmREYXRhLnNldERhdGEoJ2FwcGxpY2F0aW9uL3J1dGEnLCBKU09OLnN0cmluZ2lmeShyKSk7XG4gICAgICAgIC8vIGUuY2xpcGJvYXJkRGF0YS5zZXREYXRhKCdhcHBsaWNhdGlvbi9ydXRhJywgSlNPTi5zdHJpbmdpZnkociwgdW5kZWZpbmVkLCAyKSk7XG5cbiAgICAgICAgLy8gY29weSBwbGFpbnRleHRcbiAgICAgICAgY29uc3QgcGFyYWdyYXBocyA9IFtdO1xuICAgICAgICBmb3IoY29uc3QgcCBvZiByKSB7XG4gICAgICAgICAgY29uc3Qgc3BhbnMgPSBbXTtcbiAgICAgICAgICBmb3IoY29uc3QgcyBvZiBwLnNwYW5zKSB7XG4gICAgICAgICAgICBzcGFucy5wdXNoKHMudGV4dCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHBhcmFncmFwaHMucHVzaChzcGFucy5qb2luKCcnKSk7XG4gICAgICAgIH1cbiAgICAgICAgZS5jbGlwYm9hcmREYXRhLnNldERhdGEoJ3RleHQvcGxhaW4nLCBwYXJhZ3JhcGhzLmpvaW4oJ1xcbicpKTtcblxuICAgICAgICAvLyBjb3B5IGFzIEhUTUxcbiAgICAgICAgY29uc29sZS5kZWJ1ZygnQ09QWSBIVE1MJywgdGhpcy5hc0hUTUwocikpO1xuICAgICAgICBlLmNsaXBib2FyZERhdGEuc2V0RGF0YSgndGV4dC9odG1sJywgdGhpcy5hc0hUTUwocikpO1xuICAgICAgfVxuXG4gICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgLy8gdGhpcyBwcmV2ZW50cyBjdXR0aW5nIHdpdGggc2VsZWN0aW5nIGN1dCBtZW51IGl0ZW0sIGtleWJvYXJkIHNob3J0Y3V0cyBnZXQgcHJldmVudGVkIGluIGtleWRvd24gZXZlbnQgaGFuZGxlclxuICAgIH0sXG4gIH0sXG5cbiAgZXJyb3JDYXB0dXJlZChlcnIsIGluc3RhbmNlLCBpbmZvKSB7XG4gICAgY29uc29sZS5kZWJ1ZygnRURJVE9SIEVSUk9SIENBUFRVUkVEJywgZXJyLCBpbnN0YW5jZSwgaW5mbyk7XG4gICAgcmV0dXJuIHRydWU7XG4gIH0sXG59O1xuPC9zY3JpcHQ+XG5cblxuPHN0eWxlIHNjb3BlZD5cbi50cmFuc2NyaXB0IHtcbiAgZm9udC1zaXplOiAyMHB4O1xuICBjb2xvcjogIzc3Nztcbn1cbnNwYW4uc2VsZWN0ZWQge1xuICBjb2xvcjogIzAwMDtcbiAgYmFja2dyb3VuZC1jb2xvcjogcmdiYSgyNTMsIDI0OSwgMTIsIDAuNTApO1xufVxuc3Bhbi5oaWdobGlnaHRlZCB7XG4gIGJhY2tncm91bmQtY29sb3I6IHllbGxvdztcbn1cbnNwYW4ucGFzdCB7XG4gIGNvbG9yOiAjMjIyO1xufVxuLm5vc2VsZWN0IHtcbiAgLXdlYmtpdC10b3VjaC1jYWxsb3V0OiBub25lOyAvKiBpT1MgU2FmYXJpICovXG4gICAgLXdlYmtpdC11c2VyLXNlbGVjdDogbm9uZTsgLyogU2FmYXJpICovXG4gICAgIC1raHRtbC11c2VyLXNlbGVjdDogbm9uZTsgLyogS29ucXVlcm9yIEhUTUwgKi9cbiAgICAgICAtbW96LXVzZXItc2VsZWN0OiBub25lOyAvKiBPbGQgdmVyc2lvbnMgb2YgRmlyZWZveCAqL1xuICAgICAgICAtbXMtdXNlci1zZWxlY3Q6IG5vbmU7IC8qIEludGVybmV0IEV4cGxvcmVyL0VkZ2UgKi9cbiAgICAgICAgICAgIHVzZXItc2VsZWN0OiBub25lOyAvKiBOb24tcHJlZml4ZWQgdmVyc2lvbiwgY3VycmVudGx5XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3VwcG9ydGVkIGJ5IENocm9tZSwgRWRnZSwgT3BlcmEgYW5kIEZpcmVmb3ggKi9cbn1cbi5saXN0LWl0ZW06OmJlZm9yZSB7XG4gIGNvbnRlbnQ6IFwiXFwyMDIyXCI7ICAvKiBBZGQgY29udGVudDogXFwyMDIyIGlzIHRoZSBDU1MgQ29kZS91bmljb2RlIGZvciBhIGJ1bGxldCAqL1xuICBjb2xvcjogYmxhY2s7IC8qIENoYW5nZSB0aGUgY29sb3IgKi9cbiAgZm9udC13ZWlnaHQ6IGJvbGQ7IC8qIElmIHlvdSB3YW50IGl0IHRvIGJlIGJvbGQgKi9cbiAgZGlzcGxheTogaW5saW5lLWJsb2NrOyAvKiBOZWVkZWQgdG8gYWRkIHNwYWNlIGJldHdlZW4gdGhlIGJ1bGxldCBhbmQgdGhlIHRleHQgKi9cbiAgd2lkdGg6IDFlbTsgLyogQWxzbyBuZWVkZWQgZm9yIHNwYWNlICh0d2VhayBpZiBuZWVkZWQpICovXG4gIG1hcmdpbi1sZWZ0OiAtMWVtOyAvKiBBbHNvIG5lZWRlZCBmb3Igc3BhY2UgKHR3ZWFrIGlmIG5lZWRlZCkgKi9cbiAgbWFyZ2luLWxlZnQ6IDIwcHg7XG4gIC8qIGJvcmRlcjogMXB4IHNvbGlkIGdyZWVuOyAqL1xufVxuLnBhcmFncmFwaCB7XG4gIHBhZGRpbmctYm90dG9tOiAxMHB4O1xuICBtaW4taGVpZ2h0OiA0MHB4O1xufVxuLnBhcmFncmFwaC1udW1iZXIge1xuICBmbG9hdDogbGVmdDtcbn1cbnNwYW4uYm9sZCB7XG4gIGZvbnQtd2VpZ2h0OiBib2xkO1xufVxuc3Bhbi5pdGFsaWMge1xuICBmb250LXN0eWxlOiBpdGFsaWM7XG59XG5zcGFuLnVuZGVybGluZSB7XG4gIHRleHQtZGVjb3JhdGlvbjogdW5kZXJsaW5lO1xufVxuLyogaHR0cHM6Ly9jc3MtdHJpY2tzLmNvbS9zbmlwcGV0cy9jc3MvcHJldmVudC1zdXBlcnNjcmlwdHMtYW5kLXN1YnNjcmlwdHMtZnJvbS1hZmZlY3RpbmctbGluZS1oZWlnaHQvICovXG5zcGFuLnN1cGVyc2NyaXB0IHtcbiAgdmVydGljYWwtYWxpZ246IHN1cGVyO1xuICBmb250LXNpemU6IDgwJTtcblxuICB2ZXJ0aWNhbC1hbGlnbjogYmFzZWxpbmU7XG4gIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgdG9wOiAtMC40ZW07XG4gIGxpbmUtaGVpZ2h0OiAwO1xufVxuc3Bhbi5zdWJzY3JpcHQge1xuICB2ZXJ0aWNhbC1hbGlnbjogc3ViO1xuICBmb250LXNpemU6IDgwJTtcblxuICB2ZXJ0aWNhbC1hbGlnbjogYmFzZWxpbmU7XG4gIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgdG9wOiAwLjRlbTtcbiAgbGluZS1oZWlnaHQ6IDA7XG59XG5zcGFuLnRva2VuLnBzZXVkbzo6YWZ0ZXIge1xuICBjb250ZW50OiBcIlxcMGEwXCI7XG4gIGRpc3BsYXk6IGlubGluZTtcbn1cbjwvc3R5bGU+XG4iLCJ2YXIgbm9vcCA9IHt2YWx1ZTogKCkgPT4ge319O1xuXG5mdW5jdGlvbiBkaXNwYXRjaCgpIHtcbiAgZm9yICh2YXIgaSA9IDAsIG4gPSBhcmd1bWVudHMubGVuZ3RoLCBfID0ge30sIHQ7IGkgPCBuOyArK2kpIHtcbiAgICBpZiAoISh0ID0gYXJndW1lbnRzW2ldICsgXCJcIikgfHwgKHQgaW4gXykgfHwgL1tcXHMuXS8udGVzdCh0KSkgdGhyb3cgbmV3IEVycm9yKFwiaWxsZWdhbCB0eXBlOiBcIiArIHQpO1xuICAgIF9bdF0gPSBbXTtcbiAgfVxuICByZXR1cm4gbmV3IERpc3BhdGNoKF8pO1xufVxuXG5mdW5jdGlvbiBEaXNwYXRjaChfKSB7XG4gIHRoaXMuXyA9IF87XG59XG5cbmZ1bmN0aW9uIHBhcnNlVHlwZW5hbWVzKHR5cGVuYW1lcywgdHlwZXMpIHtcbiAgcmV0dXJuIHR5cGVuYW1lcy50cmltKCkuc3BsaXQoL158XFxzKy8pLm1hcChmdW5jdGlvbih0KSB7XG4gICAgdmFyIG5hbWUgPSBcIlwiLCBpID0gdC5pbmRleE9mKFwiLlwiKTtcbiAgICBpZiAoaSA+PSAwKSBuYW1lID0gdC5zbGljZShpICsgMSksIHQgPSB0LnNsaWNlKDAsIGkpO1xuICAgIGlmICh0ICYmICF0eXBlcy5oYXNPd25Qcm9wZXJ0eSh0KSkgdGhyb3cgbmV3IEVycm9yKFwidW5rbm93biB0eXBlOiBcIiArIHQpO1xuICAgIHJldHVybiB7dHlwZTogdCwgbmFtZTogbmFtZX07XG4gIH0pO1xufVxuXG5EaXNwYXRjaC5wcm90b3R5cGUgPSBkaXNwYXRjaC5wcm90b3R5cGUgPSB7XG4gIGNvbnN0cnVjdG9yOiBEaXNwYXRjaCxcbiAgb246IGZ1bmN0aW9uKHR5cGVuYW1lLCBjYWxsYmFjaykge1xuICAgIHZhciBfID0gdGhpcy5fLFxuICAgICAgICBUID0gcGFyc2VUeXBlbmFtZXModHlwZW5hbWUgKyBcIlwiLCBfKSxcbiAgICAgICAgdCxcbiAgICAgICAgaSA9IC0xLFxuICAgICAgICBuID0gVC5sZW5ndGg7XG5cbiAgICAvLyBJZiBubyBjYWxsYmFjayB3YXMgc3BlY2lmaWVkLCByZXR1cm4gdGhlIGNhbGxiYWNrIG9mIHRoZSBnaXZlbiB0eXBlIGFuZCBuYW1lLlxuICAgIGlmIChhcmd1bWVudHMubGVuZ3RoIDwgMikge1xuICAgICAgd2hpbGUgKCsraSA8IG4pIGlmICgodCA9ICh0eXBlbmFtZSA9IFRbaV0pLnR5cGUpICYmICh0ID0gZ2V0KF9bdF0sIHR5cGVuYW1lLm5hbWUpKSkgcmV0dXJuIHQ7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gSWYgYSB0eXBlIHdhcyBzcGVjaWZpZWQsIHNldCB0aGUgY2FsbGJhY2sgZm9yIHRoZSBnaXZlbiB0eXBlIGFuZCBuYW1lLlxuICAgIC8vIE90aGVyd2lzZSwgaWYgYSBudWxsIGNhbGxiYWNrIHdhcyBzcGVjaWZpZWQsIHJlbW92ZSBjYWxsYmFja3Mgb2YgdGhlIGdpdmVuIG5hbWUuXG4gICAgaWYgKGNhbGxiYWNrICE9IG51bGwgJiYgdHlwZW9mIGNhbGxiYWNrICE9PSBcImZ1bmN0aW9uXCIpIHRocm93IG5ldyBFcnJvcihcImludmFsaWQgY2FsbGJhY2s6IFwiICsgY2FsbGJhY2spO1xuICAgIHdoaWxlICgrK2kgPCBuKSB7XG4gICAgICBpZiAodCA9ICh0eXBlbmFtZSA9IFRbaV0pLnR5cGUpIF9bdF0gPSBzZXQoX1t0XSwgdHlwZW5hbWUubmFtZSwgY2FsbGJhY2spO1xuICAgICAgZWxzZSBpZiAoY2FsbGJhY2sgPT0gbnVsbCkgZm9yICh0IGluIF8pIF9bdF0gPSBzZXQoX1t0XSwgdHlwZW5hbWUubmFtZSwgbnVsbCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXM7XG4gIH0sXG4gIGNvcHk6IGZ1bmN0aW9uKCkge1xuICAgIHZhciBjb3B5ID0ge30sIF8gPSB0aGlzLl87XG4gICAgZm9yICh2YXIgdCBpbiBfKSBjb3B5W3RdID0gX1t0XS5zbGljZSgpO1xuICAgIHJldHVybiBuZXcgRGlzcGF0Y2goY29weSk7XG4gIH0sXG4gIGNhbGw6IGZ1bmN0aW9uKHR5cGUsIHRoYXQpIHtcbiAgICBpZiAoKG4gPSBhcmd1bWVudHMubGVuZ3RoIC0gMikgPiAwKSBmb3IgKHZhciBhcmdzID0gbmV3IEFycmF5KG4pLCBpID0gMCwgbiwgdDsgaSA8IG47ICsraSkgYXJnc1tpXSA9IGFyZ3VtZW50c1tpICsgMl07XG4gICAgaWYgKCF0aGlzLl8uaGFzT3duUHJvcGVydHkodHlwZSkpIHRocm93IG5ldyBFcnJvcihcInVua25vd24gdHlwZTogXCIgKyB0eXBlKTtcbiAgICBmb3IgKHQgPSB0aGlzLl9bdHlwZV0sIGkgPSAwLCBuID0gdC5sZW5ndGg7IGkgPCBuOyArK2kpIHRbaV0udmFsdWUuYXBwbHkodGhhdCwgYXJncyk7XG4gIH0sXG4gIGFwcGx5OiBmdW5jdGlvbih0eXBlLCB0aGF0LCBhcmdzKSB7XG4gICAgaWYgKCF0aGlzLl8uaGFzT3duUHJvcGVydHkodHlwZSkpIHRocm93IG5ldyBFcnJvcihcInVua25vd24gdHlwZTogXCIgKyB0eXBlKTtcbiAgICBmb3IgKHZhciB0ID0gdGhpcy5fW3R5cGVdLCBpID0gMCwgbiA9IHQubGVuZ3RoOyBpIDwgbjsgKytpKSB0W2ldLnZhbHVlLmFwcGx5KHRoYXQsIGFyZ3MpO1xuICB9XG59O1xuXG5mdW5jdGlvbiBnZXQodHlwZSwgbmFtZSkge1xuICBmb3IgKHZhciBpID0gMCwgbiA9IHR5cGUubGVuZ3RoLCBjOyBpIDwgbjsgKytpKSB7XG4gICAgaWYgKChjID0gdHlwZVtpXSkubmFtZSA9PT0gbmFtZSkge1xuICAgICAgcmV0dXJuIGMudmFsdWU7XG4gICAgfVxuICB9XG59XG5cbmZ1bmN0aW9uIHNldCh0eXBlLCBuYW1lLCBjYWxsYmFjaykge1xuICBmb3IgKHZhciBpID0gMCwgbiA9IHR5cGUubGVuZ3RoOyBpIDwgbjsgKytpKSB7XG4gICAgaWYgKHR5cGVbaV0ubmFtZSA9PT0gbmFtZSkge1xuICAgICAgdHlwZVtpXSA9IG5vb3AsIHR5cGUgPSB0eXBlLnNsaWNlKDAsIGkpLmNvbmNhdCh0eXBlLnNsaWNlKGkgKyAxKSk7XG4gICAgICBicmVhaztcbiAgICB9XG4gIH1cbiAgaWYgKGNhbGxiYWNrICE9IG51bGwpIHR5cGUucHVzaCh7bmFtZTogbmFtZSwgdmFsdWU6IGNhbGxiYWNrfSk7XG4gIHJldHVybiB0eXBlO1xufVxuXG5leHBvcnQgZGVmYXVsdCBkaXNwYXRjaDtcbiIsImV4cG9ydCB2YXIgeGh0bWwgPSBcImh0dHA6Ly93d3cudzMub3JnLzE5OTkveGh0bWxcIjtcblxuZXhwb3J0IGRlZmF1bHQge1xuICBzdmc6IFwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIixcbiAgeGh0bWw6IHhodG1sLFxuICB4bGluazogXCJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rXCIsXG4gIHhtbDogXCJodHRwOi8vd3d3LnczLm9yZy9YTUwvMTk5OC9uYW1lc3BhY2VcIixcbiAgeG1sbnM6IFwiaHR0cDovL3d3dy53My5vcmcvMjAwMC94bWxucy9cIlxufTtcbiIsImltcG9ydCBuYW1lc3BhY2VzIGZyb20gXCIuL25hbWVzcGFjZXMuanNcIjtcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24obmFtZSkge1xuICB2YXIgcHJlZml4ID0gbmFtZSArPSBcIlwiLCBpID0gcHJlZml4LmluZGV4T2YoXCI6XCIpO1xuICBpZiAoaSA+PSAwICYmIChwcmVmaXggPSBuYW1lLnNsaWNlKDAsIGkpKSAhPT0gXCJ4bWxuc1wiKSBuYW1lID0gbmFtZS5zbGljZShpICsgMSk7XG4gIHJldHVybiBuYW1lc3BhY2VzLmhhc093blByb3BlcnR5KHByZWZpeCkgPyB7c3BhY2U6IG5hbWVzcGFjZXNbcHJlZml4XSwgbG9jYWw6IG5hbWV9IDogbmFtZTsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby1wcm90b3R5cGUtYnVpbHRpbnNcbn1cbiIsImltcG9ydCBuYW1lc3BhY2UgZnJvbSBcIi4vbmFtZXNwYWNlLmpzXCI7XG5pbXBvcnQge3hodG1sfSBmcm9tIFwiLi9uYW1lc3BhY2VzLmpzXCI7XG5cbmZ1bmN0aW9uIGNyZWF0b3JJbmhlcml0KG5hbWUpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgIHZhciBkb2N1bWVudCA9IHRoaXMub3duZXJEb2N1bWVudCxcbiAgICAgICAgdXJpID0gdGhpcy5uYW1lc3BhY2VVUkk7XG4gICAgcmV0dXJuIHVyaSA9PT0geGh0bWwgJiYgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50Lm5hbWVzcGFjZVVSSSA9PT0geGh0bWxcbiAgICAgICAgPyBkb2N1bWVudC5jcmVhdGVFbGVtZW50KG5hbWUpXG4gICAgICAgIDogZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKHVyaSwgbmFtZSk7XG4gIH07XG59XG5cbmZ1bmN0aW9uIGNyZWF0b3JGaXhlZChmdWxsbmFtZSkge1xuICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMub3duZXJEb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoZnVsbG5hbWUuc3BhY2UsIGZ1bGxuYW1lLmxvY2FsKTtcbiAgfTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24obmFtZSkge1xuICB2YXIgZnVsbG5hbWUgPSBuYW1lc3BhY2UobmFtZSk7XG4gIHJldHVybiAoZnVsbG5hbWUubG9jYWxcbiAgICAgID8gY3JlYXRvckZpeGVkXG4gICAgICA6IGNyZWF0b3JJbmhlcml0KShmdWxsbmFtZSk7XG59XG4iLCJmdW5jdGlvbiBub25lKCkge31cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24oc2VsZWN0b3IpIHtcbiAgcmV0dXJuIHNlbGVjdG9yID09IG51bGwgPyBub25lIDogZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMucXVlcnlTZWxlY3RvcihzZWxlY3Rvcik7XG4gIH07XG59XG4iLCIvLyBHaXZlbiBzb21ldGhpbmcgYXJyYXkgbGlrZSAob3IgbnVsbCksIHJldHVybnMgc29tZXRoaW5nIHRoYXQgaXMgc3RyaWN0bHkgYW5cbi8vIGFycmF5LiBUaGlzIGlzIHVzZWQgdG8gZW5zdXJlIHRoYXQgYXJyYXktbGlrZSBvYmplY3RzIHBhc3NlZCB0byBkMy5zZWxlY3RBbGxcbi8vIG9yIHNlbGVjdGlvbi5zZWxlY3RBbGwgYXJlIGNvbnZlcnRlZCBpbnRvIHByb3BlciBhcnJheXMgd2hlbiBjcmVhdGluZyBhXG4vLyBzZWxlY3Rpb247IHdlIGRvbuKAmXQgZXZlciB3YW50IHRvIGNyZWF0ZSBhIHNlbGVjdGlvbiBiYWNrZWQgYnkgYSBsaXZlXG4vLyBIVE1MQ29sbGVjdGlvbiBvciBOb2RlTGlzdC4gSG93ZXZlciwgbm90ZSB0aGF0IHNlbGVjdGlvbi5zZWxlY3RBbGwgd2lsbCB1c2UgYVxuLy8gc3RhdGljIE5vZGVMaXN0IGFzIGEgZ3JvdXAsIHNpbmNlIGl0IHNhZmVseSBkZXJpdmVkIGZyb20gcXVlcnlTZWxlY3RvckFsbC5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGFycmF5KHgpIHtcbiAgcmV0dXJuIHggPT0gbnVsbCA/IFtdIDogQXJyYXkuaXNBcnJheSh4KSA/IHggOiBBcnJheS5mcm9tKHgpO1xufVxuIiwiZnVuY3Rpb24gZW1wdHkoKSB7XG4gIHJldHVybiBbXTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24oc2VsZWN0b3IpIHtcbiAgcmV0dXJuIHNlbGVjdG9yID09IG51bGwgPyBlbXB0eSA6IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLnF1ZXJ5U2VsZWN0b3JBbGwoc2VsZWN0b3IpO1xuICB9O1xufVxuIiwiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24oc2VsZWN0b3IpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLm1hdGNoZXMoc2VsZWN0b3IpO1xuICB9O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gY2hpbGRNYXRjaGVyKHNlbGVjdG9yKSB7XG4gIHJldHVybiBmdW5jdGlvbihub2RlKSB7XG4gICAgcmV0dXJuIG5vZGUubWF0Y2hlcyhzZWxlY3Rvcik7XG4gIH07XG59XG5cbiIsImltcG9ydCB7Y2hpbGRNYXRjaGVyfSBmcm9tIFwiLi4vbWF0Y2hlci5qc1wiO1xuXG52YXIgZmluZCA9IEFycmF5LnByb3RvdHlwZS5maW5kO1xuXG5mdW5jdGlvbiBjaGlsZEZpbmQobWF0Y2gpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBmaW5kLmNhbGwodGhpcy5jaGlsZHJlbiwgbWF0Y2gpO1xuICB9O1xufVxuXG5mdW5jdGlvbiBjaGlsZEZpcnN0KCkge1xuICByZXR1cm4gdGhpcy5maXJzdEVsZW1lbnRDaGlsZDtcbn1cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24obWF0Y2gpIHtcbiAgcmV0dXJuIHRoaXMuc2VsZWN0KG1hdGNoID09IG51bGwgPyBjaGlsZEZpcnN0XG4gICAgICA6IGNoaWxkRmluZCh0eXBlb2YgbWF0Y2ggPT09IFwiZnVuY3Rpb25cIiA/IG1hdGNoIDogY2hpbGRNYXRjaGVyKG1hdGNoKSkpO1xufVxuIiwiaW1wb3J0IHtjaGlsZE1hdGNoZXJ9IGZyb20gXCIuLi9tYXRjaGVyLmpzXCI7XG5cbnZhciBmaWx0ZXIgPSBBcnJheS5wcm90b3R5cGUuZmlsdGVyO1xuXG5mdW5jdGlvbiBjaGlsZHJlbigpIHtcbiAgcmV0dXJuIEFycmF5LmZyb20odGhpcy5jaGlsZHJlbik7XG59XG5cbmZ1bmN0aW9uIGNoaWxkcmVuRmlsdGVyKG1hdGNoKSB7XG4gIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gZmlsdGVyLmNhbGwodGhpcy5jaGlsZHJlbiwgbWF0Y2gpO1xuICB9O1xufVxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbihtYXRjaCkge1xuICByZXR1cm4gdGhpcy5zZWxlY3RBbGwobWF0Y2ggPT0gbnVsbCA/IGNoaWxkcmVuXG4gICAgICA6IGNoaWxkcmVuRmlsdGVyKHR5cGVvZiBtYXRjaCA9PT0gXCJmdW5jdGlvblwiID8gbWF0Y2ggOiBjaGlsZE1hdGNoZXIobWF0Y2gpKSk7XG59XG4iLCJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbih1cGRhdGUpIHtcbiAgcmV0dXJuIG5ldyBBcnJheSh1cGRhdGUubGVuZ3RoKTtcbn1cbiIsImltcG9ydCBzcGFyc2UgZnJvbSBcIi4vc3BhcnNlLmpzXCI7XG5pbXBvcnQge1NlbGVjdGlvbn0gZnJvbSBcIi4vaW5kZXguanNcIjtcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24oKSB7XG4gIHJldHVybiBuZXcgU2VsZWN0aW9uKHRoaXMuX2VudGVyIHx8IHRoaXMuX2dyb3Vwcy5tYXAoc3BhcnNlKSwgdGhpcy5fcGFyZW50cyk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBFbnRlck5vZGUocGFyZW50LCBkYXR1bSkge1xuICB0aGlzLm93bmVyRG9jdW1lbnQgPSBwYXJlbnQub3duZXJEb2N1bWVudDtcbiAgdGhpcy5uYW1lc3BhY2VVUkkgPSBwYXJlbnQubmFtZXNwYWNlVVJJO1xuICB0aGlzLl9uZXh0ID0gbnVsbDtcbiAgdGhpcy5fcGFyZW50ID0gcGFyZW50O1xuICB0aGlzLl9fZGF0YV9fID0gZGF0dW07XG59XG5cbkVudGVyTm9kZS5wcm90b3R5cGUgPSB7XG4gIGNvbnN0cnVjdG9yOiBFbnRlck5vZGUsXG4gIGFwcGVuZENoaWxkOiBmdW5jdGlvbihjaGlsZCkgeyByZXR1cm4gdGhpcy5fcGFyZW50Lmluc2VydEJlZm9yZShjaGlsZCwgdGhpcy5fbmV4dCk7IH0sXG4gIGluc2VydEJlZm9yZTogZnVuY3Rpb24oY2hpbGQsIG5leHQpIHsgcmV0dXJuIHRoaXMuX3BhcmVudC5pbnNlcnRCZWZvcmUoY2hpbGQsIG5leHQpOyB9LFxuICBxdWVyeVNlbGVjdG9yOiBmdW5jdGlvbihzZWxlY3RvcikgeyByZXR1cm4gdGhpcy5fcGFyZW50LnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3IpOyB9LFxuICBxdWVyeVNlbGVjdG9yQWxsOiBmdW5jdGlvbihzZWxlY3RvcikgeyByZXR1cm4gdGhpcy5fcGFyZW50LnF1ZXJ5U2VsZWN0b3JBbGwoc2VsZWN0b3IpOyB9XG59O1xuIiwiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24oeCkge1xuICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHg7XG4gIH07XG59XG4iLCJpbXBvcnQge1NlbGVjdGlvbn0gZnJvbSBcIi4vaW5kZXguanNcIjtcbmltcG9ydCB7RW50ZXJOb2RlfSBmcm9tIFwiLi9lbnRlci5qc1wiO1xuaW1wb3J0IGNvbnN0YW50IGZyb20gXCIuLi9jb25zdGFudC5qc1wiO1xuXG5mdW5jdGlvbiBiaW5kSW5kZXgocGFyZW50LCBncm91cCwgZW50ZXIsIHVwZGF0ZSwgZXhpdCwgZGF0YSkge1xuICB2YXIgaSA9IDAsXG4gICAgICBub2RlLFxuICAgICAgZ3JvdXBMZW5ndGggPSBncm91cC5sZW5ndGgsXG4gICAgICBkYXRhTGVuZ3RoID0gZGF0YS5sZW5ndGg7XG5cbiAgLy8gUHV0IGFueSBub24tbnVsbCBub2RlcyB0aGF0IGZpdCBpbnRvIHVwZGF0ZS5cbiAgLy8gUHV0IGFueSBudWxsIG5vZGVzIGludG8gZW50ZXIuXG4gIC8vIFB1dCBhbnkgcmVtYWluaW5nIGRhdGEgaW50byBlbnRlci5cbiAgZm9yICg7IGkgPCBkYXRhTGVuZ3RoOyArK2kpIHtcbiAgICBpZiAobm9kZSA9IGdyb3VwW2ldKSB7XG4gICAgICBub2RlLl9fZGF0YV9fID0gZGF0YVtpXTtcbiAgICAgIHVwZGF0ZVtpXSA9IG5vZGU7XG4gICAgfSBlbHNlIHtcbiAgICAgIGVudGVyW2ldID0gbmV3IEVudGVyTm9kZShwYXJlbnQsIGRhdGFbaV0pO1xuICAgIH1cbiAgfVxuXG4gIC8vIFB1dCBhbnkgbm9uLW51bGwgbm9kZXMgdGhhdCBkb27igJl0IGZpdCBpbnRvIGV4aXQuXG4gIGZvciAoOyBpIDwgZ3JvdXBMZW5ndGg7ICsraSkge1xuICAgIGlmIChub2RlID0gZ3JvdXBbaV0pIHtcbiAgICAgIGV4aXRbaV0gPSBub2RlO1xuICAgIH1cbiAgfVxufVxuXG5mdW5jdGlvbiBiaW5kS2V5KHBhcmVudCwgZ3JvdXAsIGVudGVyLCB1cGRhdGUsIGV4aXQsIGRhdGEsIGtleSkge1xuICB2YXIgaSxcbiAgICAgIG5vZGUsXG4gICAgICBub2RlQnlLZXlWYWx1ZSA9IG5ldyBNYXAsXG4gICAgICBncm91cExlbmd0aCA9IGdyb3VwLmxlbmd0aCxcbiAgICAgIGRhdGFMZW5ndGggPSBkYXRhLmxlbmd0aCxcbiAgICAgIGtleVZhbHVlcyA9IG5ldyBBcnJheShncm91cExlbmd0aCksXG4gICAgICBrZXlWYWx1ZTtcblxuICAvLyBDb21wdXRlIHRoZSBrZXkgZm9yIGVhY2ggbm9kZS5cbiAgLy8gSWYgbXVsdGlwbGUgbm9kZXMgaGF2ZSB0aGUgc2FtZSBrZXksIHRoZSBkdXBsaWNhdGVzIGFyZSBhZGRlZCB0byBleGl0LlxuICBmb3IgKGkgPSAwOyBpIDwgZ3JvdXBMZW5ndGg7ICsraSkge1xuICAgIGlmIChub2RlID0gZ3JvdXBbaV0pIHtcbiAgICAgIGtleVZhbHVlc1tpXSA9IGtleVZhbHVlID0ga2V5LmNhbGwobm9kZSwgbm9kZS5fX2RhdGFfXywgaSwgZ3JvdXApICsgXCJcIjtcbiAgICAgIGlmIChub2RlQnlLZXlWYWx1ZS5oYXMoa2V5VmFsdWUpKSB7XG4gICAgICAgIGV4aXRbaV0gPSBub2RlO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbm9kZUJ5S2V5VmFsdWUuc2V0KGtleVZhbHVlLCBub2RlKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvLyBDb21wdXRlIHRoZSBrZXkgZm9yIGVhY2ggZGF0dW0uXG4gIC8vIElmIHRoZXJlIGEgbm9kZSBhc3NvY2lhdGVkIHdpdGggdGhpcyBrZXksIGpvaW4gYW5kIGFkZCBpdCB0byB1cGRhdGUuXG4gIC8vIElmIHRoZXJlIGlzIG5vdCAob3IgdGhlIGtleSBpcyBhIGR1cGxpY2F0ZSksIGFkZCBpdCB0byBlbnRlci5cbiAgZm9yIChpID0gMDsgaSA8IGRhdGFMZW5ndGg7ICsraSkge1xuICAgIGtleVZhbHVlID0ga2V5LmNhbGwocGFyZW50LCBkYXRhW2ldLCBpLCBkYXRhKSArIFwiXCI7XG4gICAgaWYgKG5vZGUgPSBub2RlQnlLZXlWYWx1ZS5nZXQoa2V5VmFsdWUpKSB7XG4gICAgICB1cGRhdGVbaV0gPSBub2RlO1xuICAgICAgbm9kZS5fX2RhdGFfXyA9IGRhdGFbaV07XG4gICAgICBub2RlQnlLZXlWYWx1ZS5kZWxldGUoa2V5VmFsdWUpO1xuICAgIH0gZWxzZSB7XG4gICAgICBlbnRlcltpXSA9IG5ldyBFbnRlck5vZGUocGFyZW50LCBkYXRhW2ldKTtcbiAgICB9XG4gIH1cblxuICAvLyBBZGQgYW55IHJlbWFpbmluZyBub2RlcyB0aGF0IHdlcmUgbm90IGJvdW5kIHRvIGRhdGEgdG8gZXhpdC5cbiAgZm9yIChpID0gMDsgaSA8IGdyb3VwTGVuZ3RoOyArK2kpIHtcbiAgICBpZiAoKG5vZGUgPSBncm91cFtpXSkgJiYgKG5vZGVCeUtleVZhbHVlLmdldChrZXlWYWx1ZXNbaV0pID09PSBub2RlKSkge1xuICAgICAgZXhpdFtpXSA9IG5vZGU7XG4gICAgfVxuICB9XG59XG5cbmZ1bmN0aW9uIGRhdHVtKG5vZGUpIHtcbiAgcmV0dXJuIG5vZGUuX19kYXRhX187XG59XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKHZhbHVlLCBrZXkpIHtcbiAgaWYgKCFhcmd1bWVudHMubGVuZ3RoKSByZXR1cm4gQXJyYXkuZnJvbSh0aGlzLCBkYXR1bSk7XG5cbiAgdmFyIGJpbmQgPSBrZXkgPyBiaW5kS2V5IDogYmluZEluZGV4LFxuICAgICAgcGFyZW50cyA9IHRoaXMuX3BhcmVudHMsXG4gICAgICBncm91cHMgPSB0aGlzLl9ncm91cHM7XG5cbiAgaWYgKHR5cGVvZiB2YWx1ZSAhPT0gXCJmdW5jdGlvblwiKSB2YWx1ZSA9IGNvbnN0YW50KHZhbHVlKTtcblxuICBmb3IgKHZhciBtID0gZ3JvdXBzLmxlbmd0aCwgdXBkYXRlID0gbmV3IEFycmF5KG0pLCBlbnRlciA9IG5ldyBBcnJheShtKSwgZXhpdCA9IG5ldyBBcnJheShtKSwgaiA9IDA7IGogPCBtOyArK2opIHtcbiAgICB2YXIgcGFyZW50ID0gcGFyZW50c1tqXSxcbiAgICAgICAgZ3JvdXAgPSBncm91cHNbal0sXG4gICAgICAgIGdyb3VwTGVuZ3RoID0gZ3JvdXAubGVuZ3RoLFxuICAgICAgICBkYXRhID0gYXJyYXlsaWtlKHZhbHVlLmNhbGwocGFyZW50LCBwYXJlbnQgJiYgcGFyZW50Ll9fZGF0YV9fLCBqLCBwYXJlbnRzKSksXG4gICAgICAgIGRhdGFMZW5ndGggPSBkYXRhLmxlbmd0aCxcbiAgICAgICAgZW50ZXJHcm91cCA9IGVudGVyW2pdID0gbmV3IEFycmF5KGRhdGFMZW5ndGgpLFxuICAgICAgICB1cGRhdGVHcm91cCA9IHVwZGF0ZVtqXSA9IG5ldyBBcnJheShkYXRhTGVuZ3RoKSxcbiAgICAgICAgZXhpdEdyb3VwID0gZXhpdFtqXSA9IG5ldyBBcnJheShncm91cExlbmd0aCk7XG5cbiAgICBiaW5kKHBhcmVudCwgZ3JvdXAsIGVudGVyR3JvdXAsIHVwZGF0ZUdyb3VwLCBleGl0R3JvdXAsIGRhdGEsIGtleSk7XG5cbiAgICAvLyBOb3cgY29ubmVjdCB0aGUgZW50ZXIgbm9kZXMgdG8gdGhlaXIgZm9sbG93aW5nIHVwZGF0ZSBub2RlLCBzdWNoIHRoYXRcbiAgICAvLyBhcHBlbmRDaGlsZCBjYW4gaW5zZXJ0IHRoZSBtYXRlcmlhbGl6ZWQgZW50ZXIgbm9kZSBiZWZvcmUgdGhpcyBub2RlLFxuICAgIC8vIHJhdGhlciB0aGFuIGF0IHRoZSBlbmQgb2YgdGhlIHBhcmVudCBub2RlLlxuICAgIGZvciAodmFyIGkwID0gMCwgaTEgPSAwLCBwcmV2aW91cywgbmV4dDsgaTAgPCBkYXRhTGVuZ3RoOyArK2kwKSB7XG4gICAgICBpZiAocHJldmlvdXMgPSBlbnRlckdyb3VwW2kwXSkge1xuICAgICAgICBpZiAoaTAgPj0gaTEpIGkxID0gaTAgKyAxO1xuICAgICAgICB3aGlsZSAoIShuZXh0ID0gdXBkYXRlR3JvdXBbaTFdKSAmJiArK2kxIDwgZGF0YUxlbmd0aCk7XG4gICAgICAgIHByZXZpb3VzLl9uZXh0ID0gbmV4dCB8fCBudWxsO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHVwZGF0ZSA9IG5ldyBTZWxlY3Rpb24odXBkYXRlLCBwYXJlbnRzKTtcbiAgdXBkYXRlLl9lbnRlciA9IGVudGVyO1xuICB1cGRhdGUuX2V4aXQgPSBleGl0O1xuICByZXR1cm4gdXBkYXRlO1xufVxuXG4vLyBHaXZlbiBzb21lIGRhdGEsIHRoaXMgcmV0dXJucyBhbiBhcnJheS1saWtlIHZpZXcgb2YgaXQ6IGFuIG9iamVjdCB0aGF0XG4vLyBleHBvc2VzIGEgbGVuZ3RoIHByb3BlcnR5IGFuZCBhbGxvd3MgbnVtZXJpYyBpbmRleGluZy4gTm90ZSB0aGF0IHVubGlrZVxuLy8gc2VsZWN0QWxsLCB0aGlzIGlzbuKAmXQgd29ycmllZCBhYm91dCDigJxsaXZl4oCdIGNvbGxlY3Rpb25zIGJlY2F1c2UgdGhlIHJlc3VsdGluZ1xuLy8gYXJyYXkgd2lsbCBvbmx5IGJlIHVzZWQgYnJpZWZseSB3aGlsZSBkYXRhIGlzIGJlaW5nIGJvdW5kLiAoSXQgaXMgcG9zc2libGUgdG9cbi8vIGNhdXNlIHRoZSBkYXRhIHRvIGNoYW5nZSB3aGlsZSBpdGVyYXRpbmcgYnkgdXNpbmcgYSBrZXkgZnVuY3Rpb24sIGJ1dCBwbGVhc2Vcbi8vIGRvbuKAmXQ7IHdl4oCZZCByYXRoZXIgYXZvaWQgYSBncmF0dWl0b3VzIGNvcHkuKVxuZnVuY3Rpb24gYXJyYXlsaWtlKGRhdGEpIHtcbiAgcmV0dXJuIHR5cGVvZiBkYXRhID09PSBcIm9iamVjdFwiICYmIFwibGVuZ3RoXCIgaW4gZGF0YVxuICAgID8gZGF0YSAvLyBBcnJheSwgVHlwZWRBcnJheSwgTm9kZUxpc3QsIGFycmF5LWxpa2VcbiAgICA6IEFycmF5LmZyb20oZGF0YSk7IC8vIE1hcCwgU2V0LCBpdGVyYWJsZSwgc3RyaW5nLCBvciBhbnl0aGluZyBlbHNlXG59XG4iLCJpbXBvcnQge1NlbGVjdGlvbn0gZnJvbSBcIi4vaW5kZXguanNcIjtcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24oY29tcGFyZSkge1xuICBpZiAoIWNvbXBhcmUpIGNvbXBhcmUgPSBhc2NlbmRpbmc7XG5cbiAgZnVuY3Rpb24gY29tcGFyZU5vZGUoYSwgYikge1xuICAgIHJldHVybiBhICYmIGIgPyBjb21wYXJlKGEuX19kYXRhX18sIGIuX19kYXRhX18pIDogIWEgLSAhYjtcbiAgfVxuXG4gIGZvciAodmFyIGdyb3VwcyA9IHRoaXMuX2dyb3VwcywgbSA9IGdyb3Vwcy5sZW5ndGgsIHNvcnRncm91cHMgPSBuZXcgQXJyYXkobSksIGogPSAwOyBqIDwgbTsgKytqKSB7XG4gICAgZm9yICh2YXIgZ3JvdXAgPSBncm91cHNbal0sIG4gPSBncm91cC5sZW5ndGgsIHNvcnRncm91cCA9IHNvcnRncm91cHNbal0gPSBuZXcgQXJyYXkobiksIG5vZGUsIGkgPSAwOyBpIDwgbjsgKytpKSB7XG4gICAgICBpZiAobm9kZSA9IGdyb3VwW2ldKSB7XG4gICAgICAgIHNvcnRncm91cFtpXSA9IG5vZGU7XG4gICAgICB9XG4gICAgfVxuICAgIHNvcnRncm91cC5zb3J0KGNvbXBhcmVOb2RlKTtcbiAgfVxuXG4gIHJldHVybiBuZXcgU2VsZWN0aW9uKHNvcnRncm91cHMsIHRoaXMuX3BhcmVudHMpLm9yZGVyKCk7XG59XG5cbmZ1bmN0aW9uIGFzY2VuZGluZyhhLCBiKSB7XG4gIHJldHVybiBhIDwgYiA/IC0xIDogYSA+IGIgPyAxIDogYSA+PSBiID8gMCA6IE5hTjtcbn1cbiIsImltcG9ydCBuYW1lc3BhY2UgZnJvbSBcIi4uL25hbWVzcGFjZS5qc1wiO1xuXG5mdW5jdGlvbiBhdHRyUmVtb3ZlKG5hbWUpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgIHRoaXMucmVtb3ZlQXR0cmlidXRlKG5hbWUpO1xuICB9O1xufVxuXG5mdW5jdGlvbiBhdHRyUmVtb3ZlTlMoZnVsbG5hbWUpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgIHRoaXMucmVtb3ZlQXR0cmlidXRlTlMoZnVsbG5hbWUuc3BhY2UsIGZ1bGxuYW1lLmxvY2FsKTtcbiAgfTtcbn1cblxuZnVuY3Rpb24gYXR0ckNvbnN0YW50KG5hbWUsIHZhbHVlKSB7XG4gIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICB0aGlzLnNldEF0dHJpYnV0ZShuYW1lLCB2YWx1ZSk7XG4gIH07XG59XG5cbmZ1bmN0aW9uIGF0dHJDb25zdGFudE5TKGZ1bGxuYW1lLCB2YWx1ZSkge1xuICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgdGhpcy5zZXRBdHRyaWJ1dGVOUyhmdWxsbmFtZS5zcGFjZSwgZnVsbG5hbWUubG9jYWwsIHZhbHVlKTtcbiAgfTtcbn1cblxuZnVuY3Rpb24gYXR0ckZ1bmN0aW9uKG5hbWUsIHZhbHVlKSB7XG4gIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICB2YXIgdiA9IHZhbHVlLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgaWYgKHYgPT0gbnVsbCkgdGhpcy5yZW1vdmVBdHRyaWJ1dGUobmFtZSk7XG4gICAgZWxzZSB0aGlzLnNldEF0dHJpYnV0ZShuYW1lLCB2KTtcbiAgfTtcbn1cblxuZnVuY3Rpb24gYXR0ckZ1bmN0aW9uTlMoZnVsbG5hbWUsIHZhbHVlKSB7XG4gIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICB2YXIgdiA9IHZhbHVlLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgaWYgKHYgPT0gbnVsbCkgdGhpcy5yZW1vdmVBdHRyaWJ1dGVOUyhmdWxsbmFtZS5zcGFjZSwgZnVsbG5hbWUubG9jYWwpO1xuICAgIGVsc2UgdGhpcy5zZXRBdHRyaWJ1dGVOUyhmdWxsbmFtZS5zcGFjZSwgZnVsbG5hbWUubG9jYWwsIHYpO1xuICB9O1xufVxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbihuYW1lLCB2YWx1ZSkge1xuICB2YXIgZnVsbG5hbWUgPSBuYW1lc3BhY2UobmFtZSk7XG5cbiAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPCAyKSB7XG4gICAgdmFyIG5vZGUgPSB0aGlzLm5vZGUoKTtcbiAgICByZXR1cm4gZnVsbG5hbWUubG9jYWxcbiAgICAgICAgPyBub2RlLmdldEF0dHJpYnV0ZU5TKGZ1bGxuYW1lLnNwYWNlLCBmdWxsbmFtZS5sb2NhbClcbiAgICAgICAgOiBub2RlLmdldEF0dHJpYnV0ZShmdWxsbmFtZSk7XG4gIH1cblxuICByZXR1cm4gdGhpcy5lYWNoKCh2YWx1ZSA9PSBudWxsXG4gICAgICA/IChmdWxsbmFtZS5sb2NhbCA/IGF0dHJSZW1vdmVOUyA6IGF0dHJSZW1vdmUpIDogKHR5cGVvZiB2YWx1ZSA9PT0gXCJmdW5jdGlvblwiXG4gICAgICA/IChmdWxsbmFtZS5sb2NhbCA/IGF0dHJGdW5jdGlvbk5TIDogYXR0ckZ1bmN0aW9uKVxuICAgICAgOiAoZnVsbG5hbWUubG9jYWwgPyBhdHRyQ29uc3RhbnROUyA6IGF0dHJDb25zdGFudCkpKShmdWxsbmFtZSwgdmFsdWUpKTtcbn1cbiIsImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKG5vZGUpIHtcbiAgcmV0dXJuIChub2RlLm93bmVyRG9jdW1lbnQgJiYgbm9kZS5vd25lckRvY3VtZW50LmRlZmF1bHRWaWV3KSAvLyBub2RlIGlzIGEgTm9kZVxuICAgICAgfHwgKG5vZGUuZG9jdW1lbnQgJiYgbm9kZSkgLy8gbm9kZSBpcyBhIFdpbmRvd1xuICAgICAgfHwgbm9kZS5kZWZhdWx0VmlldzsgLy8gbm9kZSBpcyBhIERvY3VtZW50XG59XG4iLCJpbXBvcnQgZGVmYXVsdFZpZXcgZnJvbSBcIi4uL3dpbmRvdy5qc1wiO1xuXG5mdW5jdGlvbiBzdHlsZVJlbW92ZShuYW1lKSB7XG4gIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICB0aGlzLnN0eWxlLnJlbW92ZVByb3BlcnR5KG5hbWUpO1xuICB9O1xufVxuXG5mdW5jdGlvbiBzdHlsZUNvbnN0YW50KG5hbWUsIHZhbHVlLCBwcmlvcml0eSkge1xuICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgdGhpcy5zdHlsZS5zZXRQcm9wZXJ0eShuYW1lLCB2YWx1ZSwgcHJpb3JpdHkpO1xuICB9O1xufVxuXG5mdW5jdGlvbiBzdHlsZUZ1bmN0aW9uKG5hbWUsIHZhbHVlLCBwcmlvcml0eSkge1xuICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgdmFyIHYgPSB2YWx1ZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgIGlmICh2ID09IG51bGwpIHRoaXMuc3R5bGUucmVtb3ZlUHJvcGVydHkobmFtZSk7XG4gICAgZWxzZSB0aGlzLnN0eWxlLnNldFByb3BlcnR5KG5hbWUsIHYsIHByaW9yaXR5KTtcbiAgfTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24obmFtZSwgdmFsdWUsIHByaW9yaXR5KSB7XG4gIHJldHVybiBhcmd1bWVudHMubGVuZ3RoID4gMVxuICAgICAgPyB0aGlzLmVhY2goKHZhbHVlID09IG51bGxcbiAgICAgICAgICAgID8gc3R5bGVSZW1vdmUgOiB0eXBlb2YgdmFsdWUgPT09IFwiZnVuY3Rpb25cIlxuICAgICAgICAgICAgPyBzdHlsZUZ1bmN0aW9uXG4gICAgICAgICAgICA6IHN0eWxlQ29uc3RhbnQpKG5hbWUsIHZhbHVlLCBwcmlvcml0eSA9PSBudWxsID8gXCJcIiA6IHByaW9yaXR5KSlcbiAgICAgIDogc3R5bGVWYWx1ZSh0aGlzLm5vZGUoKSwgbmFtZSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBzdHlsZVZhbHVlKG5vZGUsIG5hbWUpIHtcbiAgcmV0dXJuIG5vZGUuc3R5bGUuZ2V0UHJvcGVydHlWYWx1ZShuYW1lKVxuICAgICAgfHwgZGVmYXVsdFZpZXcobm9kZSkuZ2V0Q29tcHV0ZWRTdHlsZShub2RlLCBudWxsKS5nZXRQcm9wZXJ0eVZhbHVlKG5hbWUpO1xufVxuIiwiZnVuY3Rpb24gcHJvcGVydHlSZW1vdmUobmFtZSkge1xuICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgZGVsZXRlIHRoaXNbbmFtZV07XG4gIH07XG59XG5cbmZ1bmN0aW9uIHByb3BlcnR5Q29uc3RhbnQobmFtZSwgdmFsdWUpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgIHRoaXNbbmFtZV0gPSB2YWx1ZTtcbiAgfTtcbn1cblxuZnVuY3Rpb24gcHJvcGVydHlGdW5jdGlvbihuYW1lLCB2YWx1ZSkge1xuICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgdmFyIHYgPSB2YWx1ZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgIGlmICh2ID09IG51bGwpIGRlbGV0ZSB0aGlzW25hbWVdO1xuICAgIGVsc2UgdGhpc1tuYW1lXSA9IHY7XG4gIH07XG59XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKG5hbWUsIHZhbHVlKSB7XG4gIHJldHVybiBhcmd1bWVudHMubGVuZ3RoID4gMVxuICAgICAgPyB0aGlzLmVhY2goKHZhbHVlID09IG51bGxcbiAgICAgICAgICA/IHByb3BlcnR5UmVtb3ZlIDogdHlwZW9mIHZhbHVlID09PSBcImZ1bmN0aW9uXCJcbiAgICAgICAgICA/IHByb3BlcnR5RnVuY3Rpb25cbiAgICAgICAgICA6IHByb3BlcnR5Q29uc3RhbnQpKG5hbWUsIHZhbHVlKSlcbiAgICAgIDogdGhpcy5ub2RlKClbbmFtZV07XG59XG4iLCJmdW5jdGlvbiBjbGFzc0FycmF5KHN0cmluZykge1xuICByZXR1cm4gc3RyaW5nLnRyaW0oKS5zcGxpdCgvXnxcXHMrLyk7XG59XG5cbmZ1bmN0aW9uIGNsYXNzTGlzdChub2RlKSB7XG4gIHJldHVybiBub2RlLmNsYXNzTGlzdCB8fCBuZXcgQ2xhc3NMaXN0KG5vZGUpO1xufVxuXG5mdW5jdGlvbiBDbGFzc0xpc3Qobm9kZSkge1xuICB0aGlzLl9ub2RlID0gbm9kZTtcbiAgdGhpcy5fbmFtZXMgPSBjbGFzc0FycmF5KG5vZGUuZ2V0QXR0cmlidXRlKFwiY2xhc3NcIikgfHwgXCJcIik7XG59XG5cbkNsYXNzTGlzdC5wcm90b3R5cGUgPSB7XG4gIGFkZDogZnVuY3Rpb24obmFtZSkge1xuICAgIHZhciBpID0gdGhpcy5fbmFtZXMuaW5kZXhPZihuYW1lKTtcbiAgICBpZiAoaSA8IDApIHtcbiAgICAgIHRoaXMuX25hbWVzLnB1c2gobmFtZSk7XG4gICAgICB0aGlzLl9ub2RlLnNldEF0dHJpYnV0ZShcImNsYXNzXCIsIHRoaXMuX25hbWVzLmpvaW4oXCIgXCIpKTtcbiAgICB9XG4gIH0sXG4gIHJlbW92ZTogZnVuY3Rpb24obmFtZSkge1xuICAgIHZhciBpID0gdGhpcy5fbmFtZXMuaW5kZXhPZihuYW1lKTtcbiAgICBpZiAoaSA+PSAwKSB7XG4gICAgICB0aGlzLl9uYW1lcy5zcGxpY2UoaSwgMSk7XG4gICAgICB0aGlzLl9ub2RlLnNldEF0dHJpYnV0ZShcImNsYXNzXCIsIHRoaXMuX25hbWVzLmpvaW4oXCIgXCIpKTtcbiAgICB9XG4gIH0sXG4gIGNvbnRhaW5zOiBmdW5jdGlvbihuYW1lKSB7XG4gICAgcmV0dXJuIHRoaXMuX25hbWVzLmluZGV4T2YobmFtZSkgPj0gMDtcbiAgfVxufTtcblxuZnVuY3Rpb24gY2xhc3NlZEFkZChub2RlLCBuYW1lcykge1xuICB2YXIgbGlzdCA9IGNsYXNzTGlzdChub2RlKSwgaSA9IC0xLCBuID0gbmFtZXMubGVuZ3RoO1xuICB3aGlsZSAoKytpIDwgbikgbGlzdC5hZGQobmFtZXNbaV0pO1xufVxuXG5mdW5jdGlvbiBjbGFzc2VkUmVtb3ZlKG5vZGUsIG5hbWVzKSB7XG4gIHZhciBsaXN0ID0gY2xhc3NMaXN0KG5vZGUpLCBpID0gLTEsIG4gPSBuYW1lcy5sZW5ndGg7XG4gIHdoaWxlICgrK2kgPCBuKSBsaXN0LnJlbW92ZShuYW1lc1tpXSk7XG59XG5cbmZ1bmN0aW9uIGNsYXNzZWRUcnVlKG5hbWVzKSB7XG4gIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICBjbGFzc2VkQWRkKHRoaXMsIG5hbWVzKTtcbiAgfTtcbn1cblxuZnVuY3Rpb24gY2xhc3NlZEZhbHNlKG5hbWVzKSB7XG4gIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICBjbGFzc2VkUmVtb3ZlKHRoaXMsIG5hbWVzKTtcbiAgfTtcbn1cblxuZnVuY3Rpb24gY2xhc3NlZEZ1bmN0aW9uKG5hbWVzLCB2YWx1ZSkge1xuICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgKHZhbHVlLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgPyBjbGFzc2VkQWRkIDogY2xhc3NlZFJlbW92ZSkodGhpcywgbmFtZXMpO1xuICB9O1xufVxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbihuYW1lLCB2YWx1ZSkge1xuICB2YXIgbmFtZXMgPSBjbGFzc0FycmF5KG5hbWUgKyBcIlwiKTtcblxuICBpZiAoYXJndW1lbnRzLmxlbmd0aCA8IDIpIHtcbiAgICB2YXIgbGlzdCA9IGNsYXNzTGlzdCh0aGlzLm5vZGUoKSksIGkgPSAtMSwgbiA9IG5hbWVzLmxlbmd0aDtcbiAgICB3aGlsZSAoKytpIDwgbikgaWYgKCFsaXN0LmNvbnRhaW5zKG5hbWVzW2ldKSkgcmV0dXJuIGZhbHNlO1xuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgcmV0dXJuIHRoaXMuZWFjaCgodHlwZW9mIHZhbHVlID09PSBcImZ1bmN0aW9uXCJcbiAgICAgID8gY2xhc3NlZEZ1bmN0aW9uIDogdmFsdWVcbiAgICAgID8gY2xhc3NlZFRydWVcbiAgICAgIDogY2xhc3NlZEZhbHNlKShuYW1lcywgdmFsdWUpKTtcbn1cbiIsImZ1bmN0aW9uIHRleHRSZW1vdmUoKSB7XG4gIHRoaXMudGV4dENvbnRlbnQgPSBcIlwiO1xufVxuXG5mdW5jdGlvbiB0ZXh0Q29uc3RhbnQodmFsdWUpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgIHRoaXMudGV4dENvbnRlbnQgPSB2YWx1ZTtcbiAgfTtcbn1cblxuZnVuY3Rpb24gdGV4dEZ1bmN0aW9uKHZhbHVlKSB7XG4gIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICB2YXIgdiA9IHZhbHVlLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgdGhpcy50ZXh0Q29udGVudCA9IHYgPT0gbnVsbCA/IFwiXCIgOiB2O1xuICB9O1xufVxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbih2YWx1ZSkge1xuICByZXR1cm4gYXJndW1lbnRzLmxlbmd0aFxuICAgICAgPyB0aGlzLmVhY2godmFsdWUgPT0gbnVsbFxuICAgICAgICAgID8gdGV4dFJlbW92ZSA6ICh0eXBlb2YgdmFsdWUgPT09IFwiZnVuY3Rpb25cIlxuICAgICAgICAgID8gdGV4dEZ1bmN0aW9uXG4gICAgICAgICAgOiB0ZXh0Q29uc3RhbnQpKHZhbHVlKSlcbiAgICAgIDogdGhpcy5ub2RlKCkudGV4dENvbnRlbnQ7XG59XG4iLCJmdW5jdGlvbiBodG1sUmVtb3ZlKCkge1xuICB0aGlzLmlubmVySFRNTCA9IFwiXCI7XG59XG5cbmZ1bmN0aW9uIGh0bWxDb25zdGFudCh2YWx1ZSkge1xuICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgdGhpcy5pbm5lckhUTUwgPSB2YWx1ZTtcbiAgfTtcbn1cblxuZnVuY3Rpb24gaHRtbEZ1bmN0aW9uKHZhbHVlKSB7XG4gIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICB2YXIgdiA9IHZhbHVlLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgdGhpcy5pbm5lckhUTUwgPSB2ID09IG51bGwgPyBcIlwiIDogdjtcbiAgfTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24odmFsdWUpIHtcbiAgcmV0dXJuIGFyZ3VtZW50cy5sZW5ndGhcbiAgICAgID8gdGhpcy5lYWNoKHZhbHVlID09IG51bGxcbiAgICAgICAgICA/IGh0bWxSZW1vdmUgOiAodHlwZW9mIHZhbHVlID09PSBcImZ1bmN0aW9uXCJcbiAgICAgICAgICA/IGh0bWxGdW5jdGlvblxuICAgICAgICAgIDogaHRtbENvbnN0YW50KSh2YWx1ZSkpXG4gICAgICA6IHRoaXMubm9kZSgpLmlubmVySFRNTDtcbn1cbiIsImZ1bmN0aW9uIHJhaXNlKCkge1xuICBpZiAodGhpcy5uZXh0U2libGluZykgdGhpcy5wYXJlbnROb2RlLmFwcGVuZENoaWxkKHRoaXMpO1xufVxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbigpIHtcbiAgcmV0dXJuIHRoaXMuZWFjaChyYWlzZSk7XG59XG4iLCJmdW5jdGlvbiBsb3dlcigpIHtcbiAgaWYgKHRoaXMucHJldmlvdXNTaWJsaW5nKSB0aGlzLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKHRoaXMsIHRoaXMucGFyZW50Tm9kZS5maXJzdENoaWxkKTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24oKSB7XG4gIHJldHVybiB0aGlzLmVhY2gobG93ZXIpO1xufVxuIiwiaW1wb3J0IGNyZWF0b3IgZnJvbSBcIi4uL2NyZWF0b3IuanNcIjtcbmltcG9ydCBzZWxlY3RvciBmcm9tIFwiLi4vc2VsZWN0b3IuanNcIjtcblxuZnVuY3Rpb24gY29uc3RhbnROdWxsKCkge1xuICByZXR1cm4gbnVsbDtcbn1cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24obmFtZSwgYmVmb3JlKSB7XG4gIHZhciBjcmVhdGUgPSB0eXBlb2YgbmFtZSA9PT0gXCJmdW5jdGlvblwiID8gbmFtZSA6IGNyZWF0b3IobmFtZSksXG4gICAgICBzZWxlY3QgPSBiZWZvcmUgPT0gbnVsbCA/IGNvbnN0YW50TnVsbCA6IHR5cGVvZiBiZWZvcmUgPT09IFwiZnVuY3Rpb25cIiA/IGJlZm9yZSA6IHNlbGVjdG9yKGJlZm9yZSk7XG4gIHJldHVybiB0aGlzLnNlbGVjdChmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5pbnNlcnRCZWZvcmUoY3JlYXRlLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyksIHNlbGVjdC5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IG51bGwpO1xuICB9KTtcbn1cbiIsImZ1bmN0aW9uIHJlbW92ZSgpIHtcbiAgdmFyIHBhcmVudCA9IHRoaXMucGFyZW50Tm9kZTtcbiAgaWYgKHBhcmVudCkgcGFyZW50LnJlbW92ZUNoaWxkKHRoaXMpO1xufVxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbigpIHtcbiAgcmV0dXJuIHRoaXMuZWFjaChyZW1vdmUpO1xufVxuIiwiZnVuY3Rpb24gc2VsZWN0aW9uX2Nsb25lU2hhbGxvdygpIHtcbiAgdmFyIGNsb25lID0gdGhpcy5jbG9uZU5vZGUoZmFsc2UpLCBwYXJlbnQgPSB0aGlzLnBhcmVudE5vZGU7XG4gIHJldHVybiBwYXJlbnQgPyBwYXJlbnQuaW5zZXJ0QmVmb3JlKGNsb25lLCB0aGlzLm5leHRTaWJsaW5nKSA6IGNsb25lO1xufVxuXG5mdW5jdGlvbiBzZWxlY3Rpb25fY2xvbmVEZWVwKCkge1xuICB2YXIgY2xvbmUgPSB0aGlzLmNsb25lTm9kZSh0cnVlKSwgcGFyZW50ID0gdGhpcy5wYXJlbnROb2RlO1xuICByZXR1cm4gcGFyZW50ID8gcGFyZW50Lmluc2VydEJlZm9yZShjbG9uZSwgdGhpcy5uZXh0U2libGluZykgOiBjbG9uZTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24oZGVlcCkge1xuICByZXR1cm4gdGhpcy5zZWxlY3QoZGVlcCA/IHNlbGVjdGlvbl9jbG9uZURlZXAgOiBzZWxlY3Rpb25fY2xvbmVTaGFsbG93KTtcbn1cbiIsImZ1bmN0aW9uIGNvbnRleHRMaXN0ZW5lcihsaXN0ZW5lcikge1xuICByZXR1cm4gZnVuY3Rpb24oZXZlbnQpIHtcbiAgICBsaXN0ZW5lci5jYWxsKHRoaXMsIGV2ZW50LCB0aGlzLl9fZGF0YV9fKTtcbiAgfTtcbn1cblxuZnVuY3Rpb24gcGFyc2VUeXBlbmFtZXModHlwZW5hbWVzKSB7XG4gIHJldHVybiB0eXBlbmFtZXMudHJpbSgpLnNwbGl0KC9efFxccysvKS5tYXAoZnVuY3Rpb24odCkge1xuICAgIHZhciBuYW1lID0gXCJcIiwgaSA9IHQuaW5kZXhPZihcIi5cIik7XG4gICAgaWYgKGkgPj0gMCkgbmFtZSA9IHQuc2xpY2UoaSArIDEpLCB0ID0gdC5zbGljZSgwLCBpKTtcbiAgICByZXR1cm4ge3R5cGU6IHQsIG5hbWU6IG5hbWV9O1xuICB9KTtcbn1cblxuZnVuY3Rpb24gb25SZW1vdmUodHlwZW5hbWUpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgIHZhciBvbiA9IHRoaXMuX19vbjtcbiAgICBpZiAoIW9uKSByZXR1cm47XG4gICAgZm9yICh2YXIgaiA9IDAsIGkgPSAtMSwgbSA9IG9uLmxlbmd0aCwgbzsgaiA8IG07ICsraikge1xuICAgICAgaWYgKG8gPSBvbltqXSwgKCF0eXBlbmFtZS50eXBlIHx8IG8udHlwZSA9PT0gdHlwZW5hbWUudHlwZSkgJiYgby5uYW1lID09PSB0eXBlbmFtZS5uYW1lKSB7XG4gICAgICAgIHRoaXMucmVtb3ZlRXZlbnRMaXN0ZW5lcihvLnR5cGUsIG8ubGlzdGVuZXIsIG8ub3B0aW9ucyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBvblsrK2ldID0gbztcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKCsraSkgb24ubGVuZ3RoID0gaTtcbiAgICBlbHNlIGRlbGV0ZSB0aGlzLl9fb247XG4gIH07XG59XG5cbmZ1bmN0aW9uIG9uQWRkKHR5cGVuYW1lLCB2YWx1ZSwgb3B0aW9ucykge1xuICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgdmFyIG9uID0gdGhpcy5fX29uLCBvLCBsaXN0ZW5lciA9IGNvbnRleHRMaXN0ZW5lcih2YWx1ZSk7XG4gICAgaWYgKG9uKSBmb3IgKHZhciBqID0gMCwgbSA9IG9uLmxlbmd0aDsgaiA8IG07ICsraikge1xuICAgICAgaWYgKChvID0gb25bal0pLnR5cGUgPT09IHR5cGVuYW1lLnR5cGUgJiYgby5uYW1lID09PSB0eXBlbmFtZS5uYW1lKSB7XG4gICAgICAgIHRoaXMucmVtb3ZlRXZlbnRMaXN0ZW5lcihvLnR5cGUsIG8ubGlzdGVuZXIsIG8ub3B0aW9ucyk7XG4gICAgICAgIHRoaXMuYWRkRXZlbnRMaXN0ZW5lcihvLnR5cGUsIG8ubGlzdGVuZXIgPSBsaXN0ZW5lciwgby5vcHRpb25zID0gb3B0aW9ucyk7XG4gICAgICAgIG8udmFsdWUgPSB2YWx1ZTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgIH1cbiAgICB0aGlzLmFkZEV2ZW50TGlzdGVuZXIodHlwZW5hbWUudHlwZSwgbGlzdGVuZXIsIG9wdGlvbnMpO1xuICAgIG8gPSB7dHlwZTogdHlwZW5hbWUudHlwZSwgbmFtZTogdHlwZW5hbWUubmFtZSwgdmFsdWU6IHZhbHVlLCBsaXN0ZW5lcjogbGlzdGVuZXIsIG9wdGlvbnM6IG9wdGlvbnN9O1xuICAgIGlmICghb24pIHRoaXMuX19vbiA9IFtvXTtcbiAgICBlbHNlIG9uLnB1c2gobyk7XG4gIH07XG59XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKHR5cGVuYW1lLCB2YWx1ZSwgb3B0aW9ucykge1xuICB2YXIgdHlwZW5hbWVzID0gcGFyc2VUeXBlbmFtZXModHlwZW5hbWUgKyBcIlwiKSwgaSwgbiA9IHR5cGVuYW1lcy5sZW5ndGgsIHQ7XG5cbiAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPCAyKSB7XG4gICAgdmFyIG9uID0gdGhpcy5ub2RlKCkuX19vbjtcbiAgICBpZiAob24pIGZvciAodmFyIGogPSAwLCBtID0gb24ubGVuZ3RoLCBvOyBqIDwgbTsgKytqKSB7XG4gICAgICBmb3IgKGkgPSAwLCBvID0gb25bal07IGkgPCBuOyArK2kpIHtcbiAgICAgICAgaWYgKCh0ID0gdHlwZW5hbWVzW2ldKS50eXBlID09PSBvLnR5cGUgJiYgdC5uYW1lID09PSBvLm5hbWUpIHtcbiAgICAgICAgICByZXR1cm4gby52YWx1ZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm47XG4gIH1cblxuICBvbiA9IHZhbHVlID8gb25BZGQgOiBvblJlbW92ZTtcbiAgZm9yIChpID0gMDsgaSA8IG47ICsraSkgdGhpcy5lYWNoKG9uKHR5cGVuYW1lc1tpXSwgdmFsdWUsIG9wdGlvbnMpKTtcbiAgcmV0dXJuIHRoaXM7XG59XG4iLCJpbXBvcnQgZGVmYXVsdFZpZXcgZnJvbSBcIi4uL3dpbmRvdy5qc1wiO1xuXG5mdW5jdGlvbiBkaXNwYXRjaEV2ZW50KG5vZGUsIHR5cGUsIHBhcmFtcykge1xuICB2YXIgd2luZG93ID0gZGVmYXVsdFZpZXcobm9kZSksXG4gICAgICBldmVudCA9IHdpbmRvdy5DdXN0b21FdmVudDtcblxuICBpZiAodHlwZW9mIGV2ZW50ID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICBldmVudCA9IG5ldyBldmVudCh0eXBlLCBwYXJhbXMpO1xuICB9IGVsc2Uge1xuICAgIGV2ZW50ID0gd2luZG93LmRvY3VtZW50LmNyZWF0ZUV2ZW50KFwiRXZlbnRcIik7XG4gICAgaWYgKHBhcmFtcykgZXZlbnQuaW5pdEV2ZW50KHR5cGUsIHBhcmFtcy5idWJibGVzLCBwYXJhbXMuY2FuY2VsYWJsZSksIGV2ZW50LmRldGFpbCA9IHBhcmFtcy5kZXRhaWw7XG4gICAgZWxzZSBldmVudC5pbml0RXZlbnQodHlwZSwgZmFsc2UsIGZhbHNlKTtcbiAgfVxuXG4gIG5vZGUuZGlzcGF0Y2hFdmVudChldmVudCk7XG59XG5cbmZ1bmN0aW9uIGRpc3BhdGNoQ29uc3RhbnQodHlwZSwgcGFyYW1zKSB7XG4gIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gZGlzcGF0Y2hFdmVudCh0aGlzLCB0eXBlLCBwYXJhbXMpO1xuICB9O1xufVxuXG5mdW5jdGlvbiBkaXNwYXRjaEZ1bmN0aW9uKHR5cGUsIHBhcmFtcykge1xuICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIGRpc3BhdGNoRXZlbnQodGhpcywgdHlwZSwgcGFyYW1zLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykpO1xuICB9O1xufVxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbih0eXBlLCBwYXJhbXMpIHtcbiAgcmV0dXJuIHRoaXMuZWFjaCgodHlwZW9mIHBhcmFtcyA9PT0gXCJmdW5jdGlvblwiXG4gICAgICA/IGRpc3BhdGNoRnVuY3Rpb25cbiAgICAgIDogZGlzcGF0Y2hDb25zdGFudCkodHlwZSwgcGFyYW1zKSk7XG59XG4iLCJpbXBvcnQgc2VsZWN0aW9uX3NlbGVjdCBmcm9tIFwiLi9zZWxlY3QuanNcIjtcbmltcG9ydCBzZWxlY3Rpb25fc2VsZWN0QWxsIGZyb20gXCIuL3NlbGVjdEFsbC5qc1wiO1xuaW1wb3J0IHNlbGVjdGlvbl9zZWxlY3RDaGlsZCBmcm9tIFwiLi9zZWxlY3RDaGlsZC5qc1wiO1xuaW1wb3J0IHNlbGVjdGlvbl9zZWxlY3RDaGlsZHJlbiBmcm9tIFwiLi9zZWxlY3RDaGlsZHJlbi5qc1wiO1xuaW1wb3J0IHNlbGVjdGlvbl9maWx0ZXIgZnJvbSBcIi4vZmlsdGVyLmpzXCI7XG5pbXBvcnQgc2VsZWN0aW9uX2RhdGEgZnJvbSBcIi4vZGF0YS5qc1wiO1xuaW1wb3J0IHNlbGVjdGlvbl9lbnRlciBmcm9tIFwiLi9lbnRlci5qc1wiO1xuaW1wb3J0IHNlbGVjdGlvbl9leGl0IGZyb20gXCIuL2V4aXQuanNcIjtcbmltcG9ydCBzZWxlY3Rpb25fam9pbiBmcm9tIFwiLi9qb2luLmpzXCI7XG5pbXBvcnQgc2VsZWN0aW9uX21lcmdlIGZyb20gXCIuL21lcmdlLmpzXCI7XG5pbXBvcnQgc2VsZWN0aW9uX29yZGVyIGZyb20gXCIuL29yZGVyLmpzXCI7XG5pbXBvcnQgc2VsZWN0aW9uX3NvcnQgZnJvbSBcIi4vc29ydC5qc1wiO1xuaW1wb3J0IHNlbGVjdGlvbl9jYWxsIGZyb20gXCIuL2NhbGwuanNcIjtcbmltcG9ydCBzZWxlY3Rpb25fbm9kZXMgZnJvbSBcIi4vbm9kZXMuanNcIjtcbmltcG9ydCBzZWxlY3Rpb25fbm9kZSBmcm9tIFwiLi9ub2RlLmpzXCI7XG5pbXBvcnQgc2VsZWN0aW9uX3NpemUgZnJvbSBcIi4vc2l6ZS5qc1wiO1xuaW1wb3J0IHNlbGVjdGlvbl9lbXB0eSBmcm9tIFwiLi9lbXB0eS5qc1wiO1xuaW1wb3J0IHNlbGVjdGlvbl9lYWNoIGZyb20gXCIuL2VhY2guanNcIjtcbmltcG9ydCBzZWxlY3Rpb25fYXR0ciBmcm9tIFwiLi9hdHRyLmpzXCI7XG5pbXBvcnQgc2VsZWN0aW9uX3N0eWxlIGZyb20gXCIuL3N0eWxlLmpzXCI7XG5pbXBvcnQgc2VsZWN0aW9uX3Byb3BlcnR5IGZyb20gXCIuL3Byb3BlcnR5LmpzXCI7XG5pbXBvcnQgc2VsZWN0aW9uX2NsYXNzZWQgZnJvbSBcIi4vY2xhc3NlZC5qc1wiO1xuaW1wb3J0IHNlbGVjdGlvbl90ZXh0IGZyb20gXCIuL3RleHQuanNcIjtcbmltcG9ydCBzZWxlY3Rpb25faHRtbCBmcm9tIFwiLi9odG1sLmpzXCI7XG5pbXBvcnQgc2VsZWN0aW9uX3JhaXNlIGZyb20gXCIuL3JhaXNlLmpzXCI7XG5pbXBvcnQgc2VsZWN0aW9uX2xvd2VyIGZyb20gXCIuL2xvd2VyLmpzXCI7XG5pbXBvcnQgc2VsZWN0aW9uX2FwcGVuZCBmcm9tIFwiLi9hcHBlbmQuanNcIjtcbmltcG9ydCBzZWxlY3Rpb25faW5zZXJ0IGZyb20gXCIuL2luc2VydC5qc1wiO1xuaW1wb3J0IHNlbGVjdGlvbl9yZW1vdmUgZnJvbSBcIi4vcmVtb3ZlLmpzXCI7XG5pbXBvcnQgc2VsZWN0aW9uX2Nsb25lIGZyb20gXCIuL2Nsb25lLmpzXCI7XG5pbXBvcnQgc2VsZWN0aW9uX2RhdHVtIGZyb20gXCIuL2RhdHVtLmpzXCI7XG5pbXBvcnQgc2VsZWN0aW9uX29uIGZyb20gXCIuL29uLmpzXCI7XG5pbXBvcnQgc2VsZWN0aW9uX2Rpc3BhdGNoIGZyb20gXCIuL2Rpc3BhdGNoLmpzXCI7XG5pbXBvcnQgc2VsZWN0aW9uX2l0ZXJhdG9yIGZyb20gXCIuL2l0ZXJhdG9yLmpzXCI7XG5cbmV4cG9ydCB2YXIgcm9vdCA9IFtudWxsXTtcblxuZXhwb3J0IGZ1bmN0aW9uIFNlbGVjdGlvbihncm91cHMsIHBhcmVudHMpIHtcbiAgdGhpcy5fZ3JvdXBzID0gZ3JvdXBzO1xuICB0aGlzLl9wYXJlbnRzID0gcGFyZW50cztcbn1cblxuZnVuY3Rpb24gc2VsZWN0aW9uKCkge1xuICByZXR1cm4gbmV3IFNlbGVjdGlvbihbW2RvY3VtZW50LmRvY3VtZW50RWxlbWVudF1dLCByb290KTtcbn1cblxuZnVuY3Rpb24gc2VsZWN0aW9uX3NlbGVjdGlvbigpIHtcbiAgcmV0dXJuIHRoaXM7XG59XG5cblNlbGVjdGlvbi5wcm90b3R5cGUgPSBzZWxlY3Rpb24ucHJvdG90eXBlID0ge1xuICBjb25zdHJ1Y3RvcjogU2VsZWN0aW9uLFxuICBzZWxlY3Q6IHNlbGVjdGlvbl9zZWxlY3QsXG4gIHNlbGVjdEFsbDogc2VsZWN0aW9uX3NlbGVjdEFsbCxcbiAgc2VsZWN0Q2hpbGQ6IHNlbGVjdGlvbl9zZWxlY3RDaGlsZCxcbiAgc2VsZWN0Q2hpbGRyZW46IHNlbGVjdGlvbl9zZWxlY3RDaGlsZHJlbixcbiAgZmlsdGVyOiBzZWxlY3Rpb25fZmlsdGVyLFxuICBkYXRhOiBzZWxlY3Rpb25fZGF0YSxcbiAgZW50ZXI6IHNlbGVjdGlvbl9lbnRlcixcbiAgZXhpdDogc2VsZWN0aW9uX2V4aXQsXG4gIGpvaW46IHNlbGVjdGlvbl9qb2luLFxuICBtZXJnZTogc2VsZWN0aW9uX21lcmdlLFxuICBzZWxlY3Rpb246IHNlbGVjdGlvbl9zZWxlY3Rpb24sXG4gIG9yZGVyOiBzZWxlY3Rpb25fb3JkZXIsXG4gIHNvcnQ6IHNlbGVjdGlvbl9zb3J0LFxuICBjYWxsOiBzZWxlY3Rpb25fY2FsbCxcbiAgbm9kZXM6IHNlbGVjdGlvbl9ub2RlcyxcbiAgbm9kZTogc2VsZWN0aW9uX25vZGUsXG4gIHNpemU6IHNlbGVjdGlvbl9zaXplLFxuICBlbXB0eTogc2VsZWN0aW9uX2VtcHR5LFxuICBlYWNoOiBzZWxlY3Rpb25fZWFjaCxcbiAgYXR0cjogc2VsZWN0aW9uX2F0dHIsXG4gIHN0eWxlOiBzZWxlY3Rpb25fc3R5bGUsXG4gIHByb3BlcnR5OiBzZWxlY3Rpb25fcHJvcGVydHksXG4gIGNsYXNzZWQ6IHNlbGVjdGlvbl9jbGFzc2VkLFxuICB0ZXh0OiBzZWxlY3Rpb25fdGV4dCxcbiAgaHRtbDogc2VsZWN0aW9uX2h0bWwsXG4gIHJhaXNlOiBzZWxlY3Rpb25fcmFpc2UsXG4gIGxvd2VyOiBzZWxlY3Rpb25fbG93ZXIsXG4gIGFwcGVuZDogc2VsZWN0aW9uX2FwcGVuZCxcbiAgaW5zZXJ0OiBzZWxlY3Rpb25faW5zZXJ0LFxuICByZW1vdmU6IHNlbGVjdGlvbl9yZW1vdmUsXG4gIGNsb25lOiBzZWxlY3Rpb25fY2xvbmUsXG4gIGRhdHVtOiBzZWxlY3Rpb25fZGF0dW0sXG4gIG9uOiBzZWxlY3Rpb25fb24sXG4gIGRpc3BhdGNoOiBzZWxlY3Rpb25fZGlzcGF0Y2gsXG4gIFtTeW1ib2wuaXRlcmF0b3JdOiBzZWxlY3Rpb25faXRlcmF0b3Jcbn07XG5cbmV4cG9ydCBkZWZhdWx0IHNlbGVjdGlvbjtcbiIsImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKGNvbnN0cnVjdG9yLCBmYWN0b3J5LCBwcm90b3R5cGUpIHtcbiAgY29uc3RydWN0b3IucHJvdG90eXBlID0gZmFjdG9yeS5wcm90b3R5cGUgPSBwcm90b3R5cGU7XG4gIHByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IGNvbnN0cnVjdG9yO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZXh0ZW5kKHBhcmVudCwgZGVmaW5pdGlvbikge1xuICB2YXIgcHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShwYXJlbnQucHJvdG90eXBlKTtcbiAgZm9yICh2YXIga2V5IGluIGRlZmluaXRpb24pIHByb3RvdHlwZVtrZXldID0gZGVmaW5pdGlvbltrZXldO1xuICByZXR1cm4gcHJvdG90eXBlO1xufVxuIiwiaW1wb3J0IGRlZmluZSwge2V4dGVuZH0gZnJvbSBcIi4vZGVmaW5lLmpzXCI7XG5cbmV4cG9ydCBmdW5jdGlvbiBDb2xvcigpIHt9XG5cbmV4cG9ydCB2YXIgZGFya2VyID0gMC43O1xuZXhwb3J0IHZhciBicmlnaHRlciA9IDEgLyBkYXJrZXI7XG5cbnZhciByZUkgPSBcIlxcXFxzKihbKy1dP1xcXFxkKylcXFxccypcIixcbiAgICByZU4gPSBcIlxcXFxzKihbKy1dP1xcXFxkKlxcXFwuP1xcXFxkKyg/OltlRV1bKy1dP1xcXFxkKyk/KVxcXFxzKlwiLFxuICAgIHJlUCA9IFwiXFxcXHMqKFsrLV0/XFxcXGQqXFxcXC4/XFxcXGQrKD86W2VFXVsrLV0/XFxcXGQrKT8pJVxcXFxzKlwiLFxuICAgIHJlSGV4ID0gL14jKFswLTlhLWZdezMsOH0pJC8sXG4gICAgcmVSZ2JJbnRlZ2VyID0gbmV3IFJlZ0V4cChcIl5yZ2JcXFxcKFwiICsgW3JlSSwgcmVJLCByZUldICsgXCJcXFxcKSRcIiksXG4gICAgcmVSZ2JQZXJjZW50ID0gbmV3IFJlZ0V4cChcIl5yZ2JcXFxcKFwiICsgW3JlUCwgcmVQLCByZVBdICsgXCJcXFxcKSRcIiksXG4gICAgcmVSZ2JhSW50ZWdlciA9IG5ldyBSZWdFeHAoXCJecmdiYVxcXFwoXCIgKyBbcmVJLCByZUksIHJlSSwgcmVOXSArIFwiXFxcXCkkXCIpLFxuICAgIHJlUmdiYVBlcmNlbnQgPSBuZXcgUmVnRXhwKFwiXnJnYmFcXFxcKFwiICsgW3JlUCwgcmVQLCByZVAsIHJlTl0gKyBcIlxcXFwpJFwiKSxcbiAgICByZUhzbFBlcmNlbnQgPSBuZXcgUmVnRXhwKFwiXmhzbFxcXFwoXCIgKyBbcmVOLCByZVAsIHJlUF0gKyBcIlxcXFwpJFwiKSxcbiAgICByZUhzbGFQZXJjZW50ID0gbmV3IFJlZ0V4cChcIl5oc2xhXFxcXChcIiArIFtyZU4sIHJlUCwgcmVQLCByZU5dICsgXCJcXFxcKSRcIik7XG5cbnZhciBuYW1lZCA9IHtcbiAgYWxpY2VibHVlOiAweGYwZjhmZixcbiAgYW50aXF1ZXdoaXRlOiAweGZhZWJkNyxcbiAgYXF1YTogMHgwMGZmZmYsXG4gIGFxdWFtYXJpbmU6IDB4N2ZmZmQ0LFxuICBhenVyZTogMHhmMGZmZmYsXG4gIGJlaWdlOiAweGY1ZjVkYyxcbiAgYmlzcXVlOiAweGZmZTRjNCxcbiAgYmxhY2s6IDB4MDAwMDAwLFxuICBibGFuY2hlZGFsbW9uZDogMHhmZmViY2QsXG4gIGJsdWU6IDB4MDAwMGZmLFxuICBibHVldmlvbGV0OiAweDhhMmJlMixcbiAgYnJvd246IDB4YTUyYTJhLFxuICBidXJseXdvb2Q6IDB4ZGViODg3LFxuICBjYWRldGJsdWU6IDB4NWY5ZWEwLFxuICBjaGFydHJldXNlOiAweDdmZmYwMCxcbiAgY2hvY29sYXRlOiAweGQyNjkxZSxcbiAgY29yYWw6IDB4ZmY3ZjUwLFxuICBjb3JuZmxvd2VyYmx1ZTogMHg2NDk1ZWQsXG4gIGNvcm5zaWxrOiAweGZmZjhkYyxcbiAgY3JpbXNvbjogMHhkYzE0M2MsXG4gIGN5YW46IDB4MDBmZmZmLFxuICBkYXJrYmx1ZTogMHgwMDAwOGIsXG4gIGRhcmtjeWFuOiAweDAwOGI4YixcbiAgZGFya2dvbGRlbnJvZDogMHhiODg2MGIsXG4gIGRhcmtncmF5OiAweGE5YTlhOSxcbiAgZGFya2dyZWVuOiAweDAwNjQwMCxcbiAgZGFya2dyZXk6IDB4YTlhOWE5LFxuICBkYXJra2hha2k6IDB4YmRiNzZiLFxuICBkYXJrbWFnZW50YTogMHg4YjAwOGIsXG4gIGRhcmtvbGl2ZWdyZWVuOiAweDU1NmIyZixcbiAgZGFya29yYW5nZTogMHhmZjhjMDAsXG4gIGRhcmtvcmNoaWQ6IDB4OTkzMmNjLFxuICBkYXJrcmVkOiAweDhiMDAwMCxcbiAgZGFya3NhbG1vbjogMHhlOTk2N2EsXG4gIGRhcmtzZWFncmVlbjogMHg4ZmJjOGYsXG4gIGRhcmtzbGF0ZWJsdWU6IDB4NDgzZDhiLFxuICBkYXJrc2xhdGVncmF5OiAweDJmNGY0ZixcbiAgZGFya3NsYXRlZ3JleTogMHgyZjRmNGYsXG4gIGRhcmt0dXJxdW9pc2U6IDB4MDBjZWQxLFxuICBkYXJrdmlvbGV0OiAweDk0MDBkMyxcbiAgZGVlcHBpbms6IDB4ZmYxNDkzLFxuICBkZWVwc2t5Ymx1ZTogMHgwMGJmZmYsXG4gIGRpbWdyYXk6IDB4Njk2OTY5LFxuICBkaW1ncmV5OiAweDY5Njk2OSxcbiAgZG9kZ2VyYmx1ZTogMHgxZTkwZmYsXG4gIGZpcmVicmljazogMHhiMjIyMjIsXG4gIGZsb3JhbHdoaXRlOiAweGZmZmFmMCxcbiAgZm9yZXN0Z3JlZW46IDB4MjI4YjIyLFxuICBmdWNoc2lhOiAweGZmMDBmZixcbiAgZ2FpbnNib3JvOiAweGRjZGNkYyxcbiAgZ2hvc3R3aGl0ZTogMHhmOGY4ZmYsXG4gIGdvbGQ6IDB4ZmZkNzAwLFxuICBnb2xkZW5yb2Q6IDB4ZGFhNTIwLFxuICBncmF5OiAweDgwODA4MCxcbiAgZ3JlZW46IDB4MDA4MDAwLFxuICBncmVlbnllbGxvdzogMHhhZGZmMmYsXG4gIGdyZXk6IDB4ODA4MDgwLFxuICBob25leWRldzogMHhmMGZmZjAsXG4gIGhvdHBpbms6IDB4ZmY2OWI0LFxuICBpbmRpYW5yZWQ6IDB4Y2Q1YzVjLFxuICBpbmRpZ286IDB4NGIwMDgyLFxuICBpdm9yeTogMHhmZmZmZjAsXG4gIGtoYWtpOiAweGYwZTY4YyxcbiAgbGF2ZW5kZXI6IDB4ZTZlNmZhLFxuICBsYXZlbmRlcmJsdXNoOiAweGZmZjBmNSxcbiAgbGF3bmdyZWVuOiAweDdjZmMwMCxcbiAgbGVtb25jaGlmZm9uOiAweGZmZmFjZCxcbiAgbGlnaHRibHVlOiAweGFkZDhlNixcbiAgbGlnaHRjb3JhbDogMHhmMDgwODAsXG4gIGxpZ2h0Y3lhbjogMHhlMGZmZmYsXG4gIGxpZ2h0Z29sZGVucm9keWVsbG93OiAweGZhZmFkMixcbiAgbGlnaHRncmF5OiAweGQzZDNkMyxcbiAgbGlnaHRncmVlbjogMHg5MGVlOTAsXG4gIGxpZ2h0Z3JleTogMHhkM2QzZDMsXG4gIGxpZ2h0cGluazogMHhmZmI2YzEsXG4gIGxpZ2h0c2FsbW9uOiAweGZmYTA3YSxcbiAgbGlnaHRzZWFncmVlbjogMHgyMGIyYWEsXG4gIGxpZ2h0c2t5Ymx1ZTogMHg4N2NlZmEsXG4gIGxpZ2h0c2xhdGVncmF5OiAweDc3ODg5OSxcbiAgbGlnaHRzbGF0ZWdyZXk6IDB4Nzc4ODk5LFxuICBsaWdodHN0ZWVsYmx1ZTogMHhiMGM0ZGUsXG4gIGxpZ2h0eWVsbG93OiAweGZmZmZlMCxcbiAgbGltZTogMHgwMGZmMDAsXG4gIGxpbWVncmVlbjogMHgzMmNkMzIsXG4gIGxpbmVuOiAweGZhZjBlNixcbiAgbWFnZW50YTogMHhmZjAwZmYsXG4gIG1hcm9vbjogMHg4MDAwMDAsXG4gIG1lZGl1bWFxdWFtYXJpbmU6IDB4NjZjZGFhLFxuICBtZWRpdW1ibHVlOiAweDAwMDBjZCxcbiAgbWVkaXVtb3JjaGlkOiAweGJhNTVkMyxcbiAgbWVkaXVtcHVycGxlOiAweDkzNzBkYixcbiAgbWVkaXVtc2VhZ3JlZW46IDB4M2NiMzcxLFxuICBtZWRpdW1zbGF0ZWJsdWU6IDB4N2I2OGVlLFxuICBtZWRpdW1zcHJpbmdncmVlbjogMHgwMGZhOWEsXG4gIG1lZGl1bXR1cnF1b2lzZTogMHg0OGQxY2MsXG4gIG1lZGl1bXZpb2xldHJlZDogMHhjNzE1ODUsXG4gIG1pZG5pZ2h0Ymx1ZTogMHgxOTE5NzAsXG4gIG1pbnRjcmVhbTogMHhmNWZmZmEsXG4gIG1pc3R5cm9zZTogMHhmZmU0ZTEsXG4gIG1vY2Nhc2luOiAweGZmZTRiNSxcbiAgbmF2YWpvd2hpdGU6IDB4ZmZkZWFkLFxuICBuYXZ5OiAweDAwMDA4MCxcbiAgb2xkbGFjZTogMHhmZGY1ZTYsXG4gIG9saXZlOiAweDgwODAwMCxcbiAgb2xpdmVkcmFiOiAweDZiOGUyMyxcbiAgb3JhbmdlOiAweGZmYTUwMCxcbiAgb3JhbmdlcmVkOiAweGZmNDUwMCxcbiAgb3JjaGlkOiAweGRhNzBkNixcbiAgcGFsZWdvbGRlbnJvZDogMHhlZWU4YWEsXG4gIHBhbGVncmVlbjogMHg5OGZiOTgsXG4gIHBhbGV0dXJxdW9pc2U6IDB4YWZlZWVlLFxuICBwYWxldmlvbGV0cmVkOiAweGRiNzA5MyxcbiAgcGFwYXlhd2hpcDogMHhmZmVmZDUsXG4gIHBlYWNocHVmZjogMHhmZmRhYjksXG4gIHBlcnU6IDB4Y2Q4NTNmLFxuICBwaW5rOiAweGZmYzBjYixcbiAgcGx1bTogMHhkZGEwZGQsXG4gIHBvd2RlcmJsdWU6IDB4YjBlMGU2LFxuICBwdXJwbGU6IDB4ODAwMDgwLFxuICByZWJlY2NhcHVycGxlOiAweDY2MzM5OSxcbiAgcmVkOiAweGZmMDAwMCxcbiAgcm9zeWJyb3duOiAweGJjOGY4ZixcbiAgcm95YWxibHVlOiAweDQxNjllMSxcbiAgc2FkZGxlYnJvd246IDB4OGI0NTEzLFxuICBzYWxtb246IDB4ZmE4MDcyLFxuICBzYW5keWJyb3duOiAweGY0YTQ2MCxcbiAgc2VhZ3JlZW46IDB4MmU4YjU3LFxuICBzZWFzaGVsbDogMHhmZmY1ZWUsXG4gIHNpZW5uYTogMHhhMDUyMmQsXG4gIHNpbHZlcjogMHhjMGMwYzAsXG4gIHNreWJsdWU6IDB4ODdjZWViLFxuICBzbGF0ZWJsdWU6IDB4NmE1YWNkLFxuICBzbGF0ZWdyYXk6IDB4NzA4MDkwLFxuICBzbGF0ZWdyZXk6IDB4NzA4MDkwLFxuICBzbm93OiAweGZmZmFmYSxcbiAgc3ByaW5nZ3JlZW46IDB4MDBmZjdmLFxuICBzdGVlbGJsdWU6IDB4NDY4MmI0LFxuICB0YW46IDB4ZDJiNDhjLFxuICB0ZWFsOiAweDAwODA4MCxcbiAgdGhpc3RsZTogMHhkOGJmZDgsXG4gIHRvbWF0bzogMHhmZjYzNDcsXG4gIHR1cnF1b2lzZTogMHg0MGUwZDAsXG4gIHZpb2xldDogMHhlZTgyZWUsXG4gIHdoZWF0OiAweGY1ZGViMyxcbiAgd2hpdGU6IDB4ZmZmZmZmLFxuICB3aGl0ZXNtb2tlOiAweGY1ZjVmNSxcbiAgeWVsbG93OiAweGZmZmYwMCxcbiAgeWVsbG93Z3JlZW46IDB4OWFjZDMyXG59O1xuXG5kZWZpbmUoQ29sb3IsIGNvbG9yLCB7XG4gIGNvcHk6IGZ1bmN0aW9uKGNoYW5uZWxzKSB7XG4gICAgcmV0dXJuIE9iamVjdC5hc3NpZ24obmV3IHRoaXMuY29uc3RydWN0b3IsIHRoaXMsIGNoYW5uZWxzKTtcbiAgfSxcbiAgZGlzcGxheWFibGU6IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLnJnYigpLmRpc3BsYXlhYmxlKCk7XG4gIH0sXG4gIGhleDogY29sb3JfZm9ybWF0SGV4LCAvLyBEZXByZWNhdGVkISBVc2UgY29sb3IuZm9ybWF0SGV4LlxuICBmb3JtYXRIZXg6IGNvbG9yX2Zvcm1hdEhleCxcbiAgZm9ybWF0SHNsOiBjb2xvcl9mb3JtYXRIc2wsXG4gIGZvcm1hdFJnYjogY29sb3JfZm9ybWF0UmdiLFxuICB0b1N0cmluZzogY29sb3JfZm9ybWF0UmdiXG59KTtcblxuZnVuY3Rpb24gY29sb3JfZm9ybWF0SGV4KCkge1xuICByZXR1cm4gdGhpcy5yZ2IoKS5mb3JtYXRIZXgoKTtcbn1cblxuZnVuY3Rpb24gY29sb3JfZm9ybWF0SHNsKCkge1xuICByZXR1cm4gaHNsQ29udmVydCh0aGlzKS5mb3JtYXRIc2woKTtcbn1cblxuZnVuY3Rpb24gY29sb3JfZm9ybWF0UmdiKCkge1xuICByZXR1cm4gdGhpcy5yZ2IoKS5mb3JtYXRSZ2IoKTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gY29sb3IoZm9ybWF0KSB7XG4gIHZhciBtLCBsO1xuICBmb3JtYXQgPSAoZm9ybWF0ICsgXCJcIikudHJpbSgpLnRvTG93ZXJDYXNlKCk7XG4gIHJldHVybiAobSA9IHJlSGV4LmV4ZWMoZm9ybWF0KSkgPyAobCA9IG1bMV0ubGVuZ3RoLCBtID0gcGFyc2VJbnQobVsxXSwgMTYpLCBsID09PSA2ID8gcmdibihtKSAvLyAjZmYwMDAwXG4gICAgICA6IGwgPT09IDMgPyBuZXcgUmdiKChtID4+IDggJiAweGYpIHwgKG0gPj4gNCAmIDB4ZjApLCAobSA+PiA0ICYgMHhmKSB8IChtICYgMHhmMCksICgobSAmIDB4ZikgPDwgNCkgfCAobSAmIDB4ZiksIDEpIC8vICNmMDBcbiAgICAgIDogbCA9PT0gOCA/IHJnYmEobSA+PiAyNCAmIDB4ZmYsIG0gPj4gMTYgJiAweGZmLCBtID4+IDggJiAweGZmLCAobSAmIDB4ZmYpIC8gMHhmZikgLy8gI2ZmMDAwMDAwXG4gICAgICA6IGwgPT09IDQgPyByZ2JhKChtID4+IDEyICYgMHhmKSB8IChtID4+IDggJiAweGYwKSwgKG0gPj4gOCAmIDB4ZikgfCAobSA+PiA0ICYgMHhmMCksIChtID4+IDQgJiAweGYpIHwgKG0gJiAweGYwKSwgKCgobSAmIDB4ZikgPDwgNCkgfCAobSAmIDB4ZikpIC8gMHhmZikgLy8gI2YwMDBcbiAgICAgIDogbnVsbCkgLy8gaW52YWxpZCBoZXhcbiAgICAgIDogKG0gPSByZVJnYkludGVnZXIuZXhlYyhmb3JtYXQpKSA/IG5ldyBSZ2IobVsxXSwgbVsyXSwgbVszXSwgMSkgLy8gcmdiKDI1NSwgMCwgMClcbiAgICAgIDogKG0gPSByZVJnYlBlcmNlbnQuZXhlYyhmb3JtYXQpKSA/IG5ldyBSZ2IobVsxXSAqIDI1NSAvIDEwMCwgbVsyXSAqIDI1NSAvIDEwMCwgbVszXSAqIDI1NSAvIDEwMCwgMSkgLy8gcmdiKDEwMCUsIDAlLCAwJSlcbiAgICAgIDogKG0gPSByZVJnYmFJbnRlZ2VyLmV4ZWMoZm9ybWF0KSkgPyByZ2JhKG1bMV0sIG1bMl0sIG1bM10sIG1bNF0pIC8vIHJnYmEoMjU1LCAwLCAwLCAxKVxuICAgICAgOiAobSA9IHJlUmdiYVBlcmNlbnQuZXhlYyhmb3JtYXQpKSA/IHJnYmEobVsxXSAqIDI1NSAvIDEwMCwgbVsyXSAqIDI1NSAvIDEwMCwgbVszXSAqIDI1NSAvIDEwMCwgbVs0XSkgLy8gcmdiKDEwMCUsIDAlLCAwJSwgMSlcbiAgICAgIDogKG0gPSByZUhzbFBlcmNlbnQuZXhlYyhmb3JtYXQpKSA/IGhzbGEobVsxXSwgbVsyXSAvIDEwMCwgbVszXSAvIDEwMCwgMSkgLy8gaHNsKDEyMCwgNTAlLCA1MCUpXG4gICAgICA6IChtID0gcmVIc2xhUGVyY2VudC5leGVjKGZvcm1hdCkpID8gaHNsYShtWzFdLCBtWzJdIC8gMTAwLCBtWzNdIC8gMTAwLCBtWzRdKSAvLyBoc2xhKDEyMCwgNTAlLCA1MCUsIDEpXG4gICAgICA6IG5hbWVkLmhhc093blByb3BlcnR5KGZvcm1hdCkgPyByZ2JuKG5hbWVkW2Zvcm1hdF0pIC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tcHJvdG90eXBlLWJ1aWx0aW5zXG4gICAgICA6IGZvcm1hdCA9PT0gXCJ0cmFuc3BhcmVudFwiID8gbmV3IFJnYihOYU4sIE5hTiwgTmFOLCAwKVxuICAgICAgOiBudWxsO1xufVxuXG5mdW5jdGlvbiByZ2JuKG4pIHtcbiAgcmV0dXJuIG5ldyBSZ2IobiA+PiAxNiAmIDB4ZmYsIG4gPj4gOCAmIDB4ZmYsIG4gJiAweGZmLCAxKTtcbn1cblxuZnVuY3Rpb24gcmdiYShyLCBnLCBiLCBhKSB7XG4gIGlmIChhIDw9IDApIHIgPSBnID0gYiA9IE5hTjtcbiAgcmV0dXJuIG5ldyBSZ2IociwgZywgYiwgYSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiByZ2JDb252ZXJ0KG8pIHtcbiAgaWYgKCEobyBpbnN0YW5jZW9mIENvbG9yKSkgbyA9IGNvbG9yKG8pO1xuICBpZiAoIW8pIHJldHVybiBuZXcgUmdiO1xuICBvID0gby5yZ2IoKTtcbiAgcmV0dXJuIG5ldyBSZ2Ioby5yLCBvLmcsIG8uYiwgby5vcGFjaXR5KTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHJnYihyLCBnLCBiLCBvcGFjaXR5KSB7XG4gIHJldHVybiBhcmd1bWVudHMubGVuZ3RoID09PSAxID8gcmdiQ29udmVydChyKSA6IG5ldyBSZ2IociwgZywgYiwgb3BhY2l0eSA9PSBudWxsID8gMSA6IG9wYWNpdHkpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gUmdiKHIsIGcsIGIsIG9wYWNpdHkpIHtcbiAgdGhpcy5yID0gK3I7XG4gIHRoaXMuZyA9ICtnO1xuICB0aGlzLmIgPSArYjtcbiAgdGhpcy5vcGFjaXR5ID0gK29wYWNpdHk7XG59XG5cbmRlZmluZShSZ2IsIHJnYiwgZXh0ZW5kKENvbG9yLCB7XG4gIGJyaWdodGVyOiBmdW5jdGlvbihrKSB7XG4gICAgayA9IGsgPT0gbnVsbCA/IGJyaWdodGVyIDogTWF0aC5wb3coYnJpZ2h0ZXIsIGspO1xuICAgIHJldHVybiBuZXcgUmdiKHRoaXMuciAqIGssIHRoaXMuZyAqIGssIHRoaXMuYiAqIGssIHRoaXMub3BhY2l0eSk7XG4gIH0sXG4gIGRhcmtlcjogZnVuY3Rpb24oaykge1xuICAgIGsgPSBrID09IG51bGwgPyBkYXJrZXIgOiBNYXRoLnBvdyhkYXJrZXIsIGspO1xuICAgIHJldHVybiBuZXcgUmdiKHRoaXMuciAqIGssIHRoaXMuZyAqIGssIHRoaXMuYiAqIGssIHRoaXMub3BhY2l0eSk7XG4gIH0sXG4gIHJnYjogZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH0sXG4gIGRpc3BsYXlhYmxlOiBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gKC0wLjUgPD0gdGhpcy5yICYmIHRoaXMuciA8IDI1NS41KVxuICAgICAgICAmJiAoLTAuNSA8PSB0aGlzLmcgJiYgdGhpcy5nIDwgMjU1LjUpXG4gICAgICAgICYmICgtMC41IDw9IHRoaXMuYiAmJiB0aGlzLmIgPCAyNTUuNSlcbiAgICAgICAgJiYgKDAgPD0gdGhpcy5vcGFjaXR5ICYmIHRoaXMub3BhY2l0eSA8PSAxKTtcbiAgfSxcbiAgaGV4OiByZ2JfZm9ybWF0SGV4LCAvLyBEZXByZWNhdGVkISBVc2UgY29sb3IuZm9ybWF0SGV4LlxuICBmb3JtYXRIZXg6IHJnYl9mb3JtYXRIZXgsXG4gIGZvcm1hdFJnYjogcmdiX2Zvcm1hdFJnYixcbiAgdG9TdHJpbmc6IHJnYl9mb3JtYXRSZ2Jcbn0pKTtcblxuZnVuY3Rpb24gcmdiX2Zvcm1hdEhleCgpIHtcbiAgcmV0dXJuIFwiI1wiICsgaGV4KHRoaXMucikgKyBoZXgodGhpcy5nKSArIGhleCh0aGlzLmIpO1xufVxuXG5mdW5jdGlvbiByZ2JfZm9ybWF0UmdiKCkge1xuICB2YXIgYSA9IHRoaXMub3BhY2l0eTsgYSA9IGlzTmFOKGEpID8gMSA6IE1hdGgubWF4KDAsIE1hdGgubWluKDEsIGEpKTtcbiAgcmV0dXJuIChhID09PSAxID8gXCJyZ2IoXCIgOiBcInJnYmEoXCIpXG4gICAgICArIE1hdGgubWF4KDAsIE1hdGgubWluKDI1NSwgTWF0aC5yb3VuZCh0aGlzLnIpIHx8IDApKSArIFwiLCBcIlxuICAgICAgKyBNYXRoLm1heCgwLCBNYXRoLm1pbigyNTUsIE1hdGgucm91bmQodGhpcy5nKSB8fCAwKSkgKyBcIiwgXCJcbiAgICAgICsgTWF0aC5tYXgoMCwgTWF0aC5taW4oMjU1LCBNYXRoLnJvdW5kKHRoaXMuYikgfHwgMCkpXG4gICAgICArIChhID09PSAxID8gXCIpXCIgOiBcIiwgXCIgKyBhICsgXCIpXCIpO1xufVxuXG5mdW5jdGlvbiBoZXgodmFsdWUpIHtcbiAgdmFsdWUgPSBNYXRoLm1heCgwLCBNYXRoLm1pbigyNTUsIE1hdGgucm91bmQodmFsdWUpIHx8IDApKTtcbiAgcmV0dXJuICh2YWx1ZSA8IDE2ID8gXCIwXCIgOiBcIlwiKSArIHZhbHVlLnRvU3RyaW5nKDE2KTtcbn1cblxuZnVuY3Rpb24gaHNsYShoLCBzLCBsLCBhKSB7XG4gIGlmIChhIDw9IDApIGggPSBzID0gbCA9IE5hTjtcbiAgZWxzZSBpZiAobCA8PSAwIHx8IGwgPj0gMSkgaCA9IHMgPSBOYU47XG4gIGVsc2UgaWYgKHMgPD0gMCkgaCA9IE5hTjtcbiAgcmV0dXJuIG5ldyBIc2woaCwgcywgbCwgYSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBoc2xDb252ZXJ0KG8pIHtcbiAgaWYgKG8gaW5zdGFuY2VvZiBIc2wpIHJldHVybiBuZXcgSHNsKG8uaCwgby5zLCBvLmwsIG8ub3BhY2l0eSk7XG4gIGlmICghKG8gaW5zdGFuY2VvZiBDb2xvcikpIG8gPSBjb2xvcihvKTtcbiAgaWYgKCFvKSByZXR1cm4gbmV3IEhzbDtcbiAgaWYgKG8gaW5zdGFuY2VvZiBIc2wpIHJldHVybiBvO1xuICBvID0gby5yZ2IoKTtcbiAgdmFyIHIgPSBvLnIgLyAyNTUsXG4gICAgICBnID0gby5nIC8gMjU1LFxuICAgICAgYiA9IG8uYiAvIDI1NSxcbiAgICAgIG1pbiA9IE1hdGgubWluKHIsIGcsIGIpLFxuICAgICAgbWF4ID0gTWF0aC5tYXgociwgZywgYiksXG4gICAgICBoID0gTmFOLFxuICAgICAgcyA9IG1heCAtIG1pbixcbiAgICAgIGwgPSAobWF4ICsgbWluKSAvIDI7XG4gIGlmIChzKSB7XG4gICAgaWYgKHIgPT09IG1heCkgaCA9IChnIC0gYikgLyBzICsgKGcgPCBiKSAqIDY7XG4gICAgZWxzZSBpZiAoZyA9PT0gbWF4KSBoID0gKGIgLSByKSAvIHMgKyAyO1xuICAgIGVsc2UgaCA9IChyIC0gZykgLyBzICsgNDtcbiAgICBzIC89IGwgPCAwLjUgPyBtYXggKyBtaW4gOiAyIC0gbWF4IC0gbWluO1xuICAgIGggKj0gNjA7XG4gIH0gZWxzZSB7XG4gICAgcyA9IGwgPiAwICYmIGwgPCAxID8gMCA6IGg7XG4gIH1cbiAgcmV0dXJuIG5ldyBIc2woaCwgcywgbCwgby5vcGFjaXR5KTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGhzbChoLCBzLCBsLCBvcGFjaXR5KSB7XG4gIHJldHVybiBhcmd1bWVudHMubGVuZ3RoID09PSAxID8gaHNsQ29udmVydChoKSA6IG5ldyBIc2woaCwgcywgbCwgb3BhY2l0eSA9PSBudWxsID8gMSA6IG9wYWNpdHkpO1xufVxuXG5mdW5jdGlvbiBIc2woaCwgcywgbCwgb3BhY2l0eSkge1xuICB0aGlzLmggPSAraDtcbiAgdGhpcy5zID0gK3M7XG4gIHRoaXMubCA9ICtsO1xuICB0aGlzLm9wYWNpdHkgPSArb3BhY2l0eTtcbn1cblxuZGVmaW5lKEhzbCwgaHNsLCBleHRlbmQoQ29sb3IsIHtcbiAgYnJpZ2h0ZXI6IGZ1bmN0aW9uKGspIHtcbiAgICBrID0gayA9PSBudWxsID8gYnJpZ2h0ZXIgOiBNYXRoLnBvdyhicmlnaHRlciwgayk7XG4gICAgcmV0dXJuIG5ldyBIc2wodGhpcy5oLCB0aGlzLnMsIHRoaXMubCAqIGssIHRoaXMub3BhY2l0eSk7XG4gIH0sXG4gIGRhcmtlcjogZnVuY3Rpb24oaykge1xuICAgIGsgPSBrID09IG51bGwgPyBkYXJrZXIgOiBNYXRoLnBvdyhkYXJrZXIsIGspO1xuICAgIHJldHVybiBuZXcgSHNsKHRoaXMuaCwgdGhpcy5zLCB0aGlzLmwgKiBrLCB0aGlzLm9wYWNpdHkpO1xuICB9LFxuICByZ2I6IGZ1bmN0aW9uKCkge1xuICAgIHZhciBoID0gdGhpcy5oICUgMzYwICsgKHRoaXMuaCA8IDApICogMzYwLFxuICAgICAgICBzID0gaXNOYU4oaCkgfHwgaXNOYU4odGhpcy5zKSA/IDAgOiB0aGlzLnMsXG4gICAgICAgIGwgPSB0aGlzLmwsXG4gICAgICAgIG0yID0gbCArIChsIDwgMC41ID8gbCA6IDEgLSBsKSAqIHMsXG4gICAgICAgIG0xID0gMiAqIGwgLSBtMjtcbiAgICByZXR1cm4gbmV3IFJnYihcbiAgICAgIGhzbDJyZ2IoaCA+PSAyNDAgPyBoIC0gMjQwIDogaCArIDEyMCwgbTEsIG0yKSxcbiAgICAgIGhzbDJyZ2IoaCwgbTEsIG0yKSxcbiAgICAgIGhzbDJyZ2IoaCA8IDEyMCA/IGggKyAyNDAgOiBoIC0gMTIwLCBtMSwgbTIpLFxuICAgICAgdGhpcy5vcGFjaXR5XG4gICAgKTtcbiAgfSxcbiAgZGlzcGxheWFibGU6IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiAoMCA8PSB0aGlzLnMgJiYgdGhpcy5zIDw9IDEgfHwgaXNOYU4odGhpcy5zKSlcbiAgICAgICAgJiYgKDAgPD0gdGhpcy5sICYmIHRoaXMubCA8PSAxKVxuICAgICAgICAmJiAoMCA8PSB0aGlzLm9wYWNpdHkgJiYgdGhpcy5vcGFjaXR5IDw9IDEpO1xuICB9LFxuICBmb3JtYXRIc2w6IGZ1bmN0aW9uKCkge1xuICAgIHZhciBhID0gdGhpcy5vcGFjaXR5OyBhID0gaXNOYU4oYSkgPyAxIDogTWF0aC5tYXgoMCwgTWF0aC5taW4oMSwgYSkpO1xuICAgIHJldHVybiAoYSA9PT0gMSA/IFwiaHNsKFwiIDogXCJoc2xhKFwiKVxuICAgICAgICArICh0aGlzLmggfHwgMCkgKyBcIiwgXCJcbiAgICAgICAgKyAodGhpcy5zIHx8IDApICogMTAwICsgXCIlLCBcIlxuICAgICAgICArICh0aGlzLmwgfHwgMCkgKiAxMDAgKyBcIiVcIlxuICAgICAgICArIChhID09PSAxID8gXCIpXCIgOiBcIiwgXCIgKyBhICsgXCIpXCIpO1xuICB9XG59KSk7XG5cbi8qIEZyb20gRnZEIDEzLjM3LCBDU1MgQ29sb3IgTW9kdWxlIExldmVsIDMgKi9cbmZ1bmN0aW9uIGhzbDJyZ2IoaCwgbTEsIG0yKSB7XG4gIHJldHVybiAoaCA8IDYwID8gbTEgKyAobTIgLSBtMSkgKiBoIC8gNjBcbiAgICAgIDogaCA8IDE4MCA/IG0yXG4gICAgICA6IGggPCAyNDAgPyBtMSArIChtMiAtIG0xKSAqICgyNDAgLSBoKSAvIDYwXG4gICAgICA6IG0xKSAqIDI1NTtcbn1cbiIsImltcG9ydCB7U2VsZWN0aW9ufSBmcm9tIFwiLi9pbmRleC5qc1wiO1xuaW1wb3J0IHNlbGVjdG9yIGZyb20gXCIuLi9zZWxlY3Rvci5qc1wiO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbihzZWxlY3QpIHtcbiAgaWYgKHR5cGVvZiBzZWxlY3QgIT09IFwiZnVuY3Rpb25cIikgc2VsZWN0ID0gc2VsZWN0b3Ioc2VsZWN0KTtcblxuICBmb3IgKHZhciBncm91cHMgPSB0aGlzLl9ncm91cHMsIG0gPSBncm91cHMubGVuZ3RoLCBzdWJncm91cHMgPSBuZXcgQXJyYXkobSksIGogPSAwOyBqIDwgbTsgKytqKSB7XG4gICAgZm9yICh2YXIgZ3JvdXAgPSBncm91cHNbal0sIG4gPSBncm91cC5sZW5ndGgsIHN1Ymdyb3VwID0gc3ViZ3JvdXBzW2pdID0gbmV3IEFycmF5KG4pLCBub2RlLCBzdWJub2RlLCBpID0gMDsgaSA8IG47ICsraSkge1xuICAgICAgaWYgKChub2RlID0gZ3JvdXBbaV0pICYmIChzdWJub2RlID0gc2VsZWN0LmNhbGwobm9kZSwgbm9kZS5fX2RhdGFfXywgaSwgZ3JvdXApKSkge1xuICAgICAgICBpZiAoXCJfX2RhdGFfX1wiIGluIG5vZGUpIHN1Ym5vZGUuX19kYXRhX18gPSBub2RlLl9fZGF0YV9fO1xuICAgICAgICBzdWJncm91cFtpXSA9IHN1Ym5vZGU7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIG5ldyBTZWxlY3Rpb24oc3ViZ3JvdXBzLCB0aGlzLl9wYXJlbnRzKTtcbn1cbiIsImltcG9ydCB7U2VsZWN0aW9ufSBmcm9tIFwiLi9pbmRleC5qc1wiO1xuaW1wb3J0IGFycmF5IGZyb20gXCIuLi9hcnJheS5qc1wiO1xuaW1wb3J0IHNlbGVjdG9yQWxsIGZyb20gXCIuLi9zZWxlY3RvckFsbC5qc1wiO1xuXG5mdW5jdGlvbiBhcnJheUFsbChzZWxlY3QpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBhcnJheShzZWxlY3QuYXBwbHkodGhpcywgYXJndW1lbnRzKSk7XG4gIH07XG59XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKHNlbGVjdCkge1xuICBpZiAodHlwZW9mIHNlbGVjdCA9PT0gXCJmdW5jdGlvblwiKSBzZWxlY3QgPSBhcnJheUFsbChzZWxlY3QpO1xuICBlbHNlIHNlbGVjdCA9IHNlbGVjdG9yQWxsKHNlbGVjdCk7XG5cbiAgZm9yICh2YXIgZ3JvdXBzID0gdGhpcy5fZ3JvdXBzLCBtID0gZ3JvdXBzLmxlbmd0aCwgc3ViZ3JvdXBzID0gW10sIHBhcmVudHMgPSBbXSwgaiA9IDA7IGogPCBtOyArK2opIHtcbiAgICBmb3IgKHZhciBncm91cCA9IGdyb3Vwc1tqXSwgbiA9IGdyb3VwLmxlbmd0aCwgbm9kZSwgaSA9IDA7IGkgPCBuOyArK2kpIHtcbiAgICAgIGlmIChub2RlID0gZ3JvdXBbaV0pIHtcbiAgICAgICAgc3ViZ3JvdXBzLnB1c2goc2VsZWN0LmNhbGwobm9kZSwgbm9kZS5fX2RhdGFfXywgaSwgZ3JvdXApKTtcbiAgICAgICAgcGFyZW50cy5wdXNoKG5vZGUpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiBuZXcgU2VsZWN0aW9uKHN1Ymdyb3VwcywgcGFyZW50cyk7XG59XG4iLCJpbXBvcnQge1NlbGVjdGlvbn0gZnJvbSBcIi4vaW5kZXguanNcIjtcbmltcG9ydCBtYXRjaGVyIGZyb20gXCIuLi9tYXRjaGVyLmpzXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKG1hdGNoKSB7XG4gIGlmICh0eXBlb2YgbWF0Y2ggIT09IFwiZnVuY3Rpb25cIikgbWF0Y2ggPSBtYXRjaGVyKG1hdGNoKTtcblxuICBmb3IgKHZhciBncm91cHMgPSB0aGlzLl9ncm91cHMsIG0gPSBncm91cHMubGVuZ3RoLCBzdWJncm91cHMgPSBuZXcgQXJyYXkobSksIGogPSAwOyBqIDwgbTsgKytqKSB7XG4gICAgZm9yICh2YXIgZ3JvdXAgPSBncm91cHNbal0sIG4gPSBncm91cC5sZW5ndGgsIHN1Ymdyb3VwID0gc3ViZ3JvdXBzW2pdID0gW10sIG5vZGUsIGkgPSAwOyBpIDwgbjsgKytpKSB7XG4gICAgICBpZiAoKG5vZGUgPSBncm91cFtpXSkgJiYgbWF0Y2guY2FsbChub2RlLCBub2RlLl9fZGF0YV9fLCBpLCBncm91cCkpIHtcbiAgICAgICAgc3ViZ3JvdXAucHVzaChub2RlKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICByZXR1cm4gbmV3IFNlbGVjdGlvbihzdWJncm91cHMsIHRoaXMuX3BhcmVudHMpO1xufVxuIiwiaW1wb3J0IHNwYXJzZSBmcm9tIFwiLi9zcGFyc2UuanNcIjtcbmltcG9ydCB7U2VsZWN0aW9ufSBmcm9tIFwiLi9pbmRleC5qc1wiO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbigpIHtcbiAgcmV0dXJuIG5ldyBTZWxlY3Rpb24odGhpcy5fZXhpdCB8fCB0aGlzLl9ncm91cHMubWFwKHNwYXJzZSksIHRoaXMuX3BhcmVudHMpO1xufVxuIiwiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24ob25lbnRlciwgb251cGRhdGUsIG9uZXhpdCkge1xuICB2YXIgZW50ZXIgPSB0aGlzLmVudGVyKCksIHVwZGF0ZSA9IHRoaXMsIGV4aXQgPSB0aGlzLmV4aXQoKTtcbiAgaWYgKHR5cGVvZiBvbmVudGVyID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICBlbnRlciA9IG9uZW50ZXIoZW50ZXIpO1xuICAgIGlmIChlbnRlcikgZW50ZXIgPSBlbnRlci5zZWxlY3Rpb24oKTtcbiAgfSBlbHNlIHtcbiAgICBlbnRlciA9IGVudGVyLmFwcGVuZChvbmVudGVyICsgXCJcIik7XG4gIH1cbiAgaWYgKG9udXBkYXRlICE9IG51bGwpIHtcbiAgICB1cGRhdGUgPSBvbnVwZGF0ZSh1cGRhdGUpO1xuICAgIGlmICh1cGRhdGUpIHVwZGF0ZSA9IHVwZGF0ZS5zZWxlY3Rpb24oKTtcbiAgfVxuICBpZiAob25leGl0ID09IG51bGwpIGV4aXQucmVtb3ZlKCk7IGVsc2Ugb25leGl0KGV4aXQpO1xuICByZXR1cm4gZW50ZXIgJiYgdXBkYXRlID8gZW50ZXIubWVyZ2UodXBkYXRlKS5vcmRlcigpIDogdXBkYXRlO1xufVxuIiwiaW1wb3J0IHtTZWxlY3Rpb259IGZyb20gXCIuL2luZGV4LmpzXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKGNvbnRleHQpIHtcbiAgdmFyIHNlbGVjdGlvbiA9IGNvbnRleHQuc2VsZWN0aW9uID8gY29udGV4dC5zZWxlY3Rpb24oKSA6IGNvbnRleHQ7XG5cbiAgZm9yICh2YXIgZ3JvdXBzMCA9IHRoaXMuX2dyb3VwcywgZ3JvdXBzMSA9IHNlbGVjdGlvbi5fZ3JvdXBzLCBtMCA9IGdyb3VwczAubGVuZ3RoLCBtMSA9IGdyb3VwczEubGVuZ3RoLCBtID0gTWF0aC5taW4obTAsIG0xKSwgbWVyZ2VzID0gbmV3IEFycmF5KG0wKSwgaiA9IDA7IGogPCBtOyArK2opIHtcbiAgICBmb3IgKHZhciBncm91cDAgPSBncm91cHMwW2pdLCBncm91cDEgPSBncm91cHMxW2pdLCBuID0gZ3JvdXAwLmxlbmd0aCwgbWVyZ2UgPSBtZXJnZXNbal0gPSBuZXcgQXJyYXkobiksIG5vZGUsIGkgPSAwOyBpIDwgbjsgKytpKSB7XG4gICAgICBpZiAobm9kZSA9IGdyb3VwMFtpXSB8fCBncm91cDFbaV0pIHtcbiAgICAgICAgbWVyZ2VbaV0gPSBub2RlO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGZvciAoOyBqIDwgbTA7ICsraikge1xuICAgIG1lcmdlc1tqXSA9IGdyb3VwczBbal07XG4gIH1cblxuICByZXR1cm4gbmV3IFNlbGVjdGlvbihtZXJnZXMsIHRoaXMuX3BhcmVudHMpO1xufVxuIiwiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24oKSB7XG5cbiAgZm9yICh2YXIgZ3JvdXBzID0gdGhpcy5fZ3JvdXBzLCBqID0gLTEsIG0gPSBncm91cHMubGVuZ3RoOyArK2ogPCBtOykge1xuICAgIGZvciAodmFyIGdyb3VwID0gZ3JvdXBzW2pdLCBpID0gZ3JvdXAubGVuZ3RoIC0gMSwgbmV4dCA9IGdyb3VwW2ldLCBub2RlOyAtLWkgPj0gMDspIHtcbiAgICAgIGlmIChub2RlID0gZ3JvdXBbaV0pIHtcbiAgICAgICAgaWYgKG5leHQgJiYgbm9kZS5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbihuZXh0KSBeIDQpIG5leHQucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUobm9kZSwgbmV4dCk7XG4gICAgICAgIG5leHQgPSBub2RlO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiB0aGlzO1xufVxuIiwiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24oKSB7XG4gIHZhciBjYWxsYmFjayA9IGFyZ3VtZW50c1swXTtcbiAgYXJndW1lbnRzWzBdID0gdGhpcztcbiAgY2FsbGJhY2suYXBwbHkobnVsbCwgYXJndW1lbnRzKTtcbiAgcmV0dXJuIHRoaXM7XG59XG4iLCJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbigpIHtcbiAgcmV0dXJuIEFycmF5LmZyb20odGhpcyk7XG59XG4iLCJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbigpIHtcblxuICBmb3IgKHZhciBncm91cHMgPSB0aGlzLl9ncm91cHMsIGogPSAwLCBtID0gZ3JvdXBzLmxlbmd0aDsgaiA8IG07ICsraikge1xuICAgIGZvciAodmFyIGdyb3VwID0gZ3JvdXBzW2pdLCBpID0gMCwgbiA9IGdyb3VwLmxlbmd0aDsgaSA8IG47ICsraSkge1xuICAgICAgdmFyIG5vZGUgPSBncm91cFtpXTtcbiAgICAgIGlmIChub2RlKSByZXR1cm4gbm9kZTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gbnVsbDtcbn1cbiIsImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKCkge1xuICBsZXQgc2l6ZSA9IDA7XG4gIGZvciAoY29uc3Qgbm9kZSBvZiB0aGlzKSArK3NpemU7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tdW51c2VkLXZhcnNcbiAgcmV0dXJuIHNpemU7XG59XG4iLCJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbigpIHtcbiAgcmV0dXJuICF0aGlzLm5vZGUoKTtcbn1cbiIsImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKGNhbGxiYWNrKSB7XG5cbiAgZm9yICh2YXIgZ3JvdXBzID0gdGhpcy5fZ3JvdXBzLCBqID0gMCwgbSA9IGdyb3Vwcy5sZW5ndGg7IGogPCBtOyArK2opIHtcbiAgICBmb3IgKHZhciBncm91cCA9IGdyb3Vwc1tqXSwgaSA9IDAsIG4gPSBncm91cC5sZW5ndGgsIG5vZGU7IGkgPCBuOyArK2kpIHtcbiAgICAgIGlmIChub2RlID0gZ3JvdXBbaV0pIGNhbGxiYWNrLmNhbGwobm9kZSwgbm9kZS5fX2RhdGFfXywgaSwgZ3JvdXApO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiB0aGlzO1xufVxuIiwiaW1wb3J0IGNyZWF0b3IgZnJvbSBcIi4uL2NyZWF0b3IuanNcIjtcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24obmFtZSkge1xuICB2YXIgY3JlYXRlID0gdHlwZW9mIG5hbWUgPT09IFwiZnVuY3Rpb25cIiA/IG5hbWUgOiBjcmVhdG9yKG5hbWUpO1xuICByZXR1cm4gdGhpcy5zZWxlY3QoZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMuYXBwZW5kQ2hpbGQoY3JlYXRlLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykpO1xuICB9KTtcbn1cbiIsImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKHZhbHVlKSB7XG4gIHJldHVybiBhcmd1bWVudHMubGVuZ3RoXG4gICAgICA/IHRoaXMucHJvcGVydHkoXCJfX2RhdGFfX1wiLCB2YWx1ZSlcbiAgICAgIDogdGhpcy5ub2RlKCkuX19kYXRhX187XG59XG4iLCJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiooKSB7XG4gIGZvciAodmFyIGdyb3VwcyA9IHRoaXMuX2dyb3VwcywgaiA9IDAsIG0gPSBncm91cHMubGVuZ3RoOyBqIDwgbTsgKytqKSB7XG4gICAgZm9yICh2YXIgZ3JvdXAgPSBncm91cHNbal0sIGkgPSAwLCBuID0gZ3JvdXAubGVuZ3RoLCBub2RlOyBpIDwgbjsgKytpKSB7XG4gICAgICBpZiAobm9kZSA9IGdyb3VwW2ldKSB5aWVsZCBub2RlO1xuICAgIH1cbiAgfVxufVxuIiwiZXhwb3J0IGRlZmF1bHQgeCA9PiAoKSA9PiB4O1xuIiwiaW1wb3J0IGNvbnN0YW50IGZyb20gXCIuL2NvbnN0YW50LmpzXCI7XG5cbmZ1bmN0aW9uIGxpbmVhcihhLCBkKSB7XG4gIHJldHVybiBmdW5jdGlvbih0KSB7XG4gICAgcmV0dXJuIGEgKyB0ICogZDtcbiAgfTtcbn1cblxuZnVuY3Rpb24gZXhwb25lbnRpYWwoYSwgYiwgeSkge1xuICByZXR1cm4gYSA9IE1hdGgucG93KGEsIHkpLCBiID0gTWF0aC5wb3coYiwgeSkgLSBhLCB5ID0gMSAvIHksIGZ1bmN0aW9uKHQpIHtcbiAgICByZXR1cm4gTWF0aC5wb3coYSArIHQgKiBiLCB5KTtcbiAgfTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGh1ZShhLCBiKSB7XG4gIHZhciBkID0gYiAtIGE7XG4gIHJldHVybiBkID8gbGluZWFyKGEsIGQgPiAxODAgfHwgZCA8IC0xODAgPyBkIC0gMzYwICogTWF0aC5yb3VuZChkIC8gMzYwKSA6IGQpIDogY29uc3RhbnQoaXNOYU4oYSkgPyBiIDogYSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnYW1tYSh5KSB7XG4gIHJldHVybiAoeSA9ICt5KSA9PT0gMSA/IG5vZ2FtbWEgOiBmdW5jdGlvbihhLCBiKSB7XG4gICAgcmV0dXJuIGIgLSBhID8gZXhwb25lbnRpYWwoYSwgYiwgeSkgOiBjb25zdGFudChpc05hTihhKSA/IGIgOiBhKTtcbiAgfTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gbm9nYW1tYShhLCBiKSB7XG4gIHZhciBkID0gYiAtIGE7XG4gIHJldHVybiBkID8gbGluZWFyKGEsIGQpIDogY29uc3RhbnQoaXNOYU4oYSkgPyBiIDogYSk7XG59XG4iLCJpbXBvcnQge3JnYiBhcyBjb2xvclJnYn0gZnJvbSBcImQzLWNvbG9yXCI7XG5pbXBvcnQgYmFzaXMgZnJvbSBcIi4vYmFzaXMuanNcIjtcbmltcG9ydCBiYXNpc0Nsb3NlZCBmcm9tIFwiLi9iYXNpc0Nsb3NlZC5qc1wiO1xuaW1wb3J0IG5vZ2FtbWEsIHtnYW1tYX0gZnJvbSBcIi4vY29sb3IuanNcIjtcblxuZXhwb3J0IGRlZmF1bHQgKGZ1bmN0aW9uIHJnYkdhbW1hKHkpIHtcbiAgdmFyIGNvbG9yID0gZ2FtbWEoeSk7XG5cbiAgZnVuY3Rpb24gcmdiKHN0YXJ0LCBlbmQpIHtcbiAgICB2YXIgciA9IGNvbG9yKChzdGFydCA9IGNvbG9yUmdiKHN0YXJ0KSkuciwgKGVuZCA9IGNvbG9yUmdiKGVuZCkpLnIpLFxuICAgICAgICBnID0gY29sb3Ioc3RhcnQuZywgZW5kLmcpLFxuICAgICAgICBiID0gY29sb3Ioc3RhcnQuYiwgZW5kLmIpLFxuICAgICAgICBvcGFjaXR5ID0gbm9nYW1tYShzdGFydC5vcGFjaXR5LCBlbmQub3BhY2l0eSk7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKHQpIHtcbiAgICAgIHN0YXJ0LnIgPSByKHQpO1xuICAgICAgc3RhcnQuZyA9IGcodCk7XG4gICAgICBzdGFydC5iID0gYih0KTtcbiAgICAgIHN0YXJ0Lm9wYWNpdHkgPSBvcGFjaXR5KHQpO1xuICAgICAgcmV0dXJuIHN0YXJ0ICsgXCJcIjtcbiAgICB9O1xuICB9XG5cbiAgcmdiLmdhbW1hID0gcmdiR2FtbWE7XG5cbiAgcmV0dXJuIHJnYjtcbn0pKDEpO1xuXG5mdW5jdGlvbiByZ2JTcGxpbmUoc3BsaW5lKSB7XG4gIHJldHVybiBmdW5jdGlvbihjb2xvcnMpIHtcbiAgICB2YXIgbiA9IGNvbG9ycy5sZW5ndGgsXG4gICAgICAgIHIgPSBuZXcgQXJyYXkobiksXG4gICAgICAgIGcgPSBuZXcgQXJyYXkobiksXG4gICAgICAgIGIgPSBuZXcgQXJyYXkobiksXG4gICAgICAgIGksIGNvbG9yO1xuICAgIGZvciAoaSA9IDA7IGkgPCBuOyArK2kpIHtcbiAgICAgIGNvbG9yID0gY29sb3JSZ2IoY29sb3JzW2ldKTtcbiAgICAgIHJbaV0gPSBjb2xvci5yIHx8IDA7XG4gICAgICBnW2ldID0gY29sb3IuZyB8fCAwO1xuICAgICAgYltpXSA9IGNvbG9yLmIgfHwgMDtcbiAgICB9XG4gICAgciA9IHNwbGluZShyKTtcbiAgICBnID0gc3BsaW5lKGcpO1xuICAgIGIgPSBzcGxpbmUoYik7XG4gICAgY29sb3Iub3BhY2l0eSA9IDE7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKHQpIHtcbiAgICAgIGNvbG9yLnIgPSByKHQpO1xuICAgICAgY29sb3IuZyA9IGcodCk7XG4gICAgICBjb2xvci5iID0gYih0KTtcbiAgICAgIHJldHVybiBjb2xvciArIFwiXCI7XG4gICAgfTtcbiAgfTtcbn1cblxuZXhwb3J0IHZhciByZ2JCYXNpcyA9IHJnYlNwbGluZShiYXNpcyk7XG5leHBvcnQgdmFyIHJnYkJhc2lzQ2xvc2VkID0gcmdiU3BsaW5lKGJhc2lzQ2xvc2VkKTtcbiIsImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKGEsIGIpIHtcbiAgcmV0dXJuIGEgPSArYSwgYiA9ICtiLCBmdW5jdGlvbih0KSB7XG4gICAgcmV0dXJuIGEgKiAoMSAtIHQpICsgYiAqIHQ7XG4gIH07XG59XG4iLCJpbXBvcnQgbnVtYmVyIGZyb20gXCIuL251bWJlci5qc1wiO1xuXG52YXIgcmVBID0gL1stK10/KD86XFxkK1xcLj9cXGQqfFxcLj9cXGQrKSg/OltlRV1bLStdP1xcZCspPy9nLFxuICAgIHJlQiA9IG5ldyBSZWdFeHAocmVBLnNvdXJjZSwgXCJnXCIpO1xuXG5mdW5jdGlvbiB6ZXJvKGIpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBiO1xuICB9O1xufVxuXG5mdW5jdGlvbiBvbmUoYikge1xuICByZXR1cm4gZnVuY3Rpb24odCkge1xuICAgIHJldHVybiBiKHQpICsgXCJcIjtcbiAgfTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24oYSwgYikge1xuICB2YXIgYmkgPSByZUEubGFzdEluZGV4ID0gcmVCLmxhc3RJbmRleCA9IDAsIC8vIHNjYW4gaW5kZXggZm9yIG5leHQgbnVtYmVyIGluIGJcbiAgICAgIGFtLCAvLyBjdXJyZW50IG1hdGNoIGluIGFcbiAgICAgIGJtLCAvLyBjdXJyZW50IG1hdGNoIGluIGJcbiAgICAgIGJzLCAvLyBzdHJpbmcgcHJlY2VkaW5nIGN1cnJlbnQgbnVtYmVyIGluIGIsIGlmIGFueVxuICAgICAgaSA9IC0xLCAvLyBpbmRleCBpbiBzXG4gICAgICBzID0gW10sIC8vIHN0cmluZyBjb25zdGFudHMgYW5kIHBsYWNlaG9sZGVyc1xuICAgICAgcSA9IFtdOyAvLyBudW1iZXIgaW50ZXJwb2xhdG9yc1xuXG4gIC8vIENvZXJjZSBpbnB1dHMgdG8gc3RyaW5ncy5cbiAgYSA9IGEgKyBcIlwiLCBiID0gYiArIFwiXCI7XG5cbiAgLy8gSW50ZXJwb2xhdGUgcGFpcnMgb2YgbnVtYmVycyBpbiBhICYgYi5cbiAgd2hpbGUgKChhbSA9IHJlQS5leGVjKGEpKVxuICAgICAgJiYgKGJtID0gcmVCLmV4ZWMoYikpKSB7XG4gICAgaWYgKChicyA9IGJtLmluZGV4KSA+IGJpKSB7IC8vIGEgc3RyaW5nIHByZWNlZGVzIHRoZSBuZXh0IG51bWJlciBpbiBiXG4gICAgICBicyA9IGIuc2xpY2UoYmksIGJzKTtcbiAgICAgIGlmIChzW2ldKSBzW2ldICs9IGJzOyAvLyBjb2FsZXNjZSB3aXRoIHByZXZpb3VzIHN0cmluZ1xuICAgICAgZWxzZSBzWysraV0gPSBicztcbiAgICB9XG4gICAgaWYgKChhbSA9IGFtWzBdKSA9PT0gKGJtID0gYm1bMF0pKSB7IC8vIG51bWJlcnMgaW4gYSAmIGIgbWF0Y2hcbiAgICAgIGlmIChzW2ldKSBzW2ldICs9IGJtOyAvLyBjb2FsZXNjZSB3aXRoIHByZXZpb3VzIHN0cmluZ1xuICAgICAgZWxzZSBzWysraV0gPSBibTtcbiAgICB9IGVsc2UgeyAvLyBpbnRlcnBvbGF0ZSBub24tbWF0Y2hpbmcgbnVtYmVyc1xuICAgICAgc1srK2ldID0gbnVsbDtcbiAgICAgIHEucHVzaCh7aTogaSwgeDogbnVtYmVyKGFtLCBibSl9KTtcbiAgICB9XG4gICAgYmkgPSByZUIubGFzdEluZGV4O1xuICB9XG5cbiAgLy8gQWRkIHJlbWFpbnMgb2YgYi5cbiAgaWYgKGJpIDwgYi5sZW5ndGgpIHtcbiAgICBicyA9IGIuc2xpY2UoYmkpO1xuICAgIGlmIChzW2ldKSBzW2ldICs9IGJzOyAvLyBjb2FsZXNjZSB3aXRoIHByZXZpb3VzIHN0cmluZ1xuICAgIGVsc2Ugc1srK2ldID0gYnM7XG4gIH1cblxuICAvLyBTcGVjaWFsIG9wdGltaXphdGlvbiBmb3Igb25seSBhIHNpbmdsZSBtYXRjaC5cbiAgLy8gT3RoZXJ3aXNlLCBpbnRlcnBvbGF0ZSBlYWNoIG9mIHRoZSBudW1iZXJzIGFuZCByZWpvaW4gdGhlIHN0cmluZy5cbiAgcmV0dXJuIHMubGVuZ3RoIDwgMiA/IChxWzBdXG4gICAgICA/IG9uZShxWzBdLngpXG4gICAgICA6IHplcm8oYikpXG4gICAgICA6IChiID0gcS5sZW5ndGgsIGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbzsgaSA8IGI7ICsraSkgc1sobyA9IHFbaV0pLmldID0gby54KHQpO1xuICAgICAgICAgIHJldHVybiBzLmpvaW4oXCJcIik7XG4gICAgICAgIH0pO1xufVxuIiwidmFyIGRlZ3JlZXMgPSAxODAgLyBNYXRoLlBJO1xuXG5leHBvcnQgdmFyIGlkZW50aXR5ID0ge1xuICB0cmFuc2xhdGVYOiAwLFxuICB0cmFuc2xhdGVZOiAwLFxuICByb3RhdGU6IDAsXG4gIHNrZXdYOiAwLFxuICBzY2FsZVg6IDEsXG4gIHNjYWxlWTogMVxufTtcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24oYSwgYiwgYywgZCwgZSwgZikge1xuICB2YXIgc2NhbGVYLCBzY2FsZVksIHNrZXdYO1xuICBpZiAoc2NhbGVYID0gTWF0aC5zcXJ0KGEgKiBhICsgYiAqIGIpKSBhIC89IHNjYWxlWCwgYiAvPSBzY2FsZVg7XG4gIGlmIChza2V3WCA9IGEgKiBjICsgYiAqIGQpIGMgLT0gYSAqIHNrZXdYLCBkIC09IGIgKiBza2V3WDtcbiAgaWYgKHNjYWxlWSA9IE1hdGguc3FydChjICogYyArIGQgKiBkKSkgYyAvPSBzY2FsZVksIGQgLz0gc2NhbGVZLCBza2V3WCAvPSBzY2FsZVk7XG4gIGlmIChhICogZCA8IGIgKiBjKSBhID0gLWEsIGIgPSAtYiwgc2tld1ggPSAtc2tld1gsIHNjYWxlWCA9IC1zY2FsZVg7XG4gIHJldHVybiB7XG4gICAgdHJhbnNsYXRlWDogZSxcbiAgICB0cmFuc2xhdGVZOiBmLFxuICAgIHJvdGF0ZTogTWF0aC5hdGFuMihiLCBhKSAqIGRlZ3JlZXMsXG4gICAgc2tld1g6IE1hdGguYXRhbihza2V3WCkgKiBkZWdyZWVzLFxuICAgIHNjYWxlWDogc2NhbGVYLFxuICAgIHNjYWxlWTogc2NhbGVZXG4gIH07XG59XG4iLCJpbXBvcnQgZGVjb21wb3NlLCB7aWRlbnRpdHl9IGZyb20gXCIuL2RlY29tcG9zZS5qc1wiO1xuXG52YXIgc3ZnTm9kZTtcblxuLyogZXNsaW50LWRpc2FibGUgbm8tdW5kZWYgKi9cbmV4cG9ydCBmdW5jdGlvbiBwYXJzZUNzcyh2YWx1ZSkge1xuICBjb25zdCBtID0gbmV3ICh0eXBlb2YgRE9NTWF0cml4ID09PSBcImZ1bmN0aW9uXCIgPyBET01NYXRyaXggOiBXZWJLaXRDU1NNYXRyaXgpKHZhbHVlICsgXCJcIik7XG4gIHJldHVybiBtLmlzSWRlbnRpdHkgPyBpZGVudGl0eSA6IGRlY29tcG9zZShtLmEsIG0uYiwgbS5jLCBtLmQsIG0uZSwgbS5mKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlU3ZnKHZhbHVlKSB7XG4gIGlmICh2YWx1ZSA9PSBudWxsKSByZXR1cm4gaWRlbnRpdHk7XG4gIGlmICghc3ZnTm9kZSkgc3ZnTm9kZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUyhcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIsIFwiZ1wiKTtcbiAgc3ZnTm9kZS5zZXRBdHRyaWJ1dGUoXCJ0cmFuc2Zvcm1cIiwgdmFsdWUpO1xuICBpZiAoISh2YWx1ZSA9IHN2Z05vZGUudHJhbnNmb3JtLmJhc2VWYWwuY29uc29saWRhdGUoKSkpIHJldHVybiBpZGVudGl0eTtcbiAgdmFsdWUgPSB2YWx1ZS5tYXRyaXg7XG4gIHJldHVybiBkZWNvbXBvc2UodmFsdWUuYSwgdmFsdWUuYiwgdmFsdWUuYywgdmFsdWUuZCwgdmFsdWUuZSwgdmFsdWUuZik7XG59XG4iLCJpbXBvcnQgbnVtYmVyIGZyb20gXCIuLi9udW1iZXIuanNcIjtcbmltcG9ydCB7cGFyc2VDc3MsIHBhcnNlU3ZnfSBmcm9tIFwiLi9wYXJzZS5qc1wiO1xuXG5mdW5jdGlvbiBpbnRlcnBvbGF0ZVRyYW5zZm9ybShwYXJzZSwgcHhDb21tYSwgcHhQYXJlbiwgZGVnUGFyZW4pIHtcblxuICBmdW5jdGlvbiBwb3Aocykge1xuICAgIHJldHVybiBzLmxlbmd0aCA/IHMucG9wKCkgKyBcIiBcIiA6IFwiXCI7XG4gIH1cblxuICBmdW5jdGlvbiB0cmFuc2xhdGUoeGEsIHlhLCB4YiwgeWIsIHMsIHEpIHtcbiAgICBpZiAoeGEgIT09IHhiIHx8IHlhICE9PSB5Yikge1xuICAgICAgdmFyIGkgPSBzLnB1c2goXCJ0cmFuc2xhdGUoXCIsIG51bGwsIHB4Q29tbWEsIG51bGwsIHB4UGFyZW4pO1xuICAgICAgcS5wdXNoKHtpOiBpIC0gNCwgeDogbnVtYmVyKHhhLCB4Yil9LCB7aTogaSAtIDIsIHg6IG51bWJlcih5YSwgeWIpfSk7XG4gICAgfSBlbHNlIGlmICh4YiB8fCB5Yikge1xuICAgICAgcy5wdXNoKFwidHJhbnNsYXRlKFwiICsgeGIgKyBweENvbW1hICsgeWIgKyBweFBhcmVuKTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiByb3RhdGUoYSwgYiwgcywgcSkge1xuICAgIGlmIChhICE9PSBiKSB7XG4gICAgICBpZiAoYSAtIGIgPiAxODApIGIgKz0gMzYwOyBlbHNlIGlmIChiIC0gYSA+IDE4MCkgYSArPSAzNjA7IC8vIHNob3J0ZXN0IHBhdGhcbiAgICAgIHEucHVzaCh7aTogcy5wdXNoKHBvcChzKSArIFwicm90YXRlKFwiLCBudWxsLCBkZWdQYXJlbikgLSAyLCB4OiBudW1iZXIoYSwgYil9KTtcbiAgICB9IGVsc2UgaWYgKGIpIHtcbiAgICAgIHMucHVzaChwb3AocykgKyBcInJvdGF0ZShcIiArIGIgKyBkZWdQYXJlbik7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gc2tld1goYSwgYiwgcywgcSkge1xuICAgIGlmIChhICE9PSBiKSB7XG4gICAgICBxLnB1c2goe2k6IHMucHVzaChwb3AocykgKyBcInNrZXdYKFwiLCBudWxsLCBkZWdQYXJlbikgLSAyLCB4OiBudW1iZXIoYSwgYil9KTtcbiAgICB9IGVsc2UgaWYgKGIpIHtcbiAgICAgIHMucHVzaChwb3AocykgKyBcInNrZXdYKFwiICsgYiArIGRlZ1BhcmVuKTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBzY2FsZSh4YSwgeWEsIHhiLCB5YiwgcywgcSkge1xuICAgIGlmICh4YSAhPT0geGIgfHwgeWEgIT09IHliKSB7XG4gICAgICB2YXIgaSA9IHMucHVzaChwb3AocykgKyBcInNjYWxlKFwiLCBudWxsLCBcIixcIiwgbnVsbCwgXCIpXCIpO1xuICAgICAgcS5wdXNoKHtpOiBpIC0gNCwgeDogbnVtYmVyKHhhLCB4Yil9LCB7aTogaSAtIDIsIHg6IG51bWJlcih5YSwgeWIpfSk7XG4gICAgfSBlbHNlIGlmICh4YiAhPT0gMSB8fCB5YiAhPT0gMSkge1xuICAgICAgcy5wdXNoKHBvcChzKSArIFwic2NhbGUoXCIgKyB4YiArIFwiLFwiICsgeWIgKyBcIilcIik7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIGZ1bmN0aW9uKGEsIGIpIHtcbiAgICB2YXIgcyA9IFtdLCAvLyBzdHJpbmcgY29uc3RhbnRzIGFuZCBwbGFjZWhvbGRlcnNcbiAgICAgICAgcSA9IFtdOyAvLyBudW1iZXIgaW50ZXJwb2xhdG9yc1xuICAgIGEgPSBwYXJzZShhKSwgYiA9IHBhcnNlKGIpO1xuICAgIHRyYW5zbGF0ZShhLnRyYW5zbGF0ZVgsIGEudHJhbnNsYXRlWSwgYi50cmFuc2xhdGVYLCBiLnRyYW5zbGF0ZVksIHMsIHEpO1xuICAgIHJvdGF0ZShhLnJvdGF0ZSwgYi5yb3RhdGUsIHMsIHEpO1xuICAgIHNrZXdYKGEuc2tld1gsIGIuc2tld1gsIHMsIHEpO1xuICAgIHNjYWxlKGEuc2NhbGVYLCBhLnNjYWxlWSwgYi5zY2FsZVgsIGIuc2NhbGVZLCBzLCBxKTtcbiAgICBhID0gYiA9IG51bGw7IC8vIGdjXG4gICAgcmV0dXJuIGZ1bmN0aW9uKHQpIHtcbiAgICAgIHZhciBpID0gLTEsIG4gPSBxLmxlbmd0aCwgbztcbiAgICAgIHdoaWxlICgrK2kgPCBuKSBzWyhvID0gcVtpXSkuaV0gPSBvLngodCk7XG4gICAgICByZXR1cm4gcy5qb2luKFwiXCIpO1xuICAgIH07XG4gIH07XG59XG5cbmV4cG9ydCB2YXIgaW50ZXJwb2xhdGVUcmFuc2Zvcm1Dc3MgPSBpbnRlcnBvbGF0ZVRyYW5zZm9ybShwYXJzZUNzcywgXCJweCwgXCIsIFwicHgpXCIsIFwiZGVnKVwiKTtcbmV4cG9ydCB2YXIgaW50ZXJwb2xhdGVUcmFuc2Zvcm1TdmcgPSBpbnRlcnBvbGF0ZVRyYW5zZm9ybShwYXJzZVN2ZywgXCIsIFwiLCBcIilcIiwgXCIpXCIpO1xuIiwidmFyIGZyYW1lID0gMCwgLy8gaXMgYW4gYW5pbWF0aW9uIGZyYW1lIHBlbmRpbmc/XG4gICAgdGltZW91dCA9IDAsIC8vIGlzIGEgdGltZW91dCBwZW5kaW5nP1xuICAgIGludGVydmFsID0gMCwgLy8gYXJlIGFueSB0aW1lcnMgYWN0aXZlP1xuICAgIHBva2VEZWxheSA9IDEwMDAsIC8vIGhvdyBmcmVxdWVudGx5IHdlIGNoZWNrIGZvciBjbG9jayBza2V3XG4gICAgdGFza0hlYWQsXG4gICAgdGFza1RhaWwsXG4gICAgY2xvY2tMYXN0ID0gMCxcbiAgICBjbG9ja05vdyA9IDAsXG4gICAgY2xvY2tTa2V3ID0gMCxcbiAgICBjbG9jayA9IHR5cGVvZiBwZXJmb3JtYW5jZSA9PT0gXCJvYmplY3RcIiAmJiBwZXJmb3JtYW5jZS5ub3cgPyBwZXJmb3JtYW5jZSA6IERhdGUsXG4gICAgc2V0RnJhbWUgPSB0eXBlb2Ygd2luZG93ID09PSBcIm9iamVjdFwiICYmIHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUgPyB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lLmJpbmQod2luZG93KSA6IGZ1bmN0aW9uKGYpIHsgc2V0VGltZW91dChmLCAxNyk7IH07XG5cbmV4cG9ydCBmdW5jdGlvbiBub3coKSB7XG4gIHJldHVybiBjbG9ja05vdyB8fCAoc2V0RnJhbWUoY2xlYXJOb3cpLCBjbG9ja05vdyA9IGNsb2NrLm5vdygpICsgY2xvY2tTa2V3KTtcbn1cblxuZnVuY3Rpb24gY2xlYXJOb3coKSB7XG4gIGNsb2NrTm93ID0gMDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIFRpbWVyKCkge1xuICB0aGlzLl9jYWxsID1cbiAgdGhpcy5fdGltZSA9XG4gIHRoaXMuX25leHQgPSBudWxsO1xufVxuXG5UaW1lci5wcm90b3R5cGUgPSB0aW1lci5wcm90b3R5cGUgPSB7XG4gIGNvbnN0cnVjdG9yOiBUaW1lcixcbiAgcmVzdGFydDogZnVuY3Rpb24oY2FsbGJhY2ssIGRlbGF5LCB0aW1lKSB7XG4gICAgaWYgKHR5cGVvZiBjYWxsYmFjayAhPT0gXCJmdW5jdGlvblwiKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiY2FsbGJhY2sgaXMgbm90IGEgZnVuY3Rpb25cIik7XG4gICAgdGltZSA9ICh0aW1lID09IG51bGwgPyBub3coKSA6ICt0aW1lKSArIChkZWxheSA9PSBudWxsID8gMCA6ICtkZWxheSk7XG4gICAgaWYgKCF0aGlzLl9uZXh0ICYmIHRhc2tUYWlsICE9PSB0aGlzKSB7XG4gICAgICBpZiAodGFza1RhaWwpIHRhc2tUYWlsLl9uZXh0ID0gdGhpcztcbiAgICAgIGVsc2UgdGFza0hlYWQgPSB0aGlzO1xuICAgICAgdGFza1RhaWwgPSB0aGlzO1xuICAgIH1cbiAgICB0aGlzLl9jYWxsID0gY2FsbGJhY2s7XG4gICAgdGhpcy5fdGltZSA9IHRpbWU7XG4gICAgc2xlZXAoKTtcbiAgfSxcbiAgc3RvcDogZnVuY3Rpb24oKSB7XG4gICAgaWYgKHRoaXMuX2NhbGwpIHtcbiAgICAgIHRoaXMuX2NhbGwgPSBudWxsO1xuICAgICAgdGhpcy5fdGltZSA9IEluZmluaXR5O1xuICAgICAgc2xlZXAoKTtcbiAgICB9XG4gIH1cbn07XG5cbmV4cG9ydCBmdW5jdGlvbiB0aW1lcihjYWxsYmFjaywgZGVsYXksIHRpbWUpIHtcbiAgdmFyIHQgPSBuZXcgVGltZXI7XG4gIHQucmVzdGFydChjYWxsYmFjaywgZGVsYXksIHRpbWUpO1xuICByZXR1cm4gdDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHRpbWVyRmx1c2goKSB7XG4gIG5vdygpOyAvLyBHZXQgdGhlIGN1cnJlbnQgdGltZSwgaWYgbm90IGFscmVhZHkgc2V0LlxuICArK2ZyYW1lOyAvLyBQcmV0ZW5kIHdl4oCZdmUgc2V0IGFuIGFsYXJtLCBpZiB3ZSBoYXZlbuKAmXQgYWxyZWFkeS5cbiAgdmFyIHQgPSB0YXNrSGVhZCwgZTtcbiAgd2hpbGUgKHQpIHtcbiAgICBpZiAoKGUgPSBjbG9ja05vdyAtIHQuX3RpbWUpID49IDApIHQuX2NhbGwuY2FsbCh1bmRlZmluZWQsIGUpO1xuICAgIHQgPSB0Ll9uZXh0O1xuICB9XG4gIC0tZnJhbWU7XG59XG5cbmZ1bmN0aW9uIHdha2UoKSB7XG4gIGNsb2NrTm93ID0gKGNsb2NrTGFzdCA9IGNsb2NrLm5vdygpKSArIGNsb2NrU2tldztcbiAgZnJhbWUgPSB0aW1lb3V0ID0gMDtcbiAgdHJ5IHtcbiAgICB0aW1lckZsdXNoKCk7XG4gIH0gZmluYWxseSB7XG4gICAgZnJhbWUgPSAwO1xuICAgIG5hcCgpO1xuICAgIGNsb2NrTm93ID0gMDtcbiAgfVxufVxuXG5mdW5jdGlvbiBwb2tlKCkge1xuICB2YXIgbm93ID0gY2xvY2subm93KCksIGRlbGF5ID0gbm93IC0gY2xvY2tMYXN0O1xuICBpZiAoZGVsYXkgPiBwb2tlRGVsYXkpIGNsb2NrU2tldyAtPSBkZWxheSwgY2xvY2tMYXN0ID0gbm93O1xufVxuXG5mdW5jdGlvbiBuYXAoKSB7XG4gIHZhciB0MCwgdDEgPSB0YXNrSGVhZCwgdDIsIHRpbWUgPSBJbmZpbml0eTtcbiAgd2hpbGUgKHQxKSB7XG4gICAgaWYgKHQxLl9jYWxsKSB7XG4gICAgICBpZiAodGltZSA+IHQxLl90aW1lKSB0aW1lID0gdDEuX3RpbWU7XG4gICAgICB0MCA9IHQxLCB0MSA9IHQxLl9uZXh0O1xuICAgIH0gZWxzZSB7XG4gICAgICB0MiA9IHQxLl9uZXh0LCB0MS5fbmV4dCA9IG51bGw7XG4gICAgICB0MSA9IHQwID8gdDAuX25leHQgPSB0MiA6IHRhc2tIZWFkID0gdDI7XG4gICAgfVxuICB9XG4gIHRhc2tUYWlsID0gdDA7XG4gIHNsZWVwKHRpbWUpO1xufVxuXG5mdW5jdGlvbiBzbGVlcCh0aW1lKSB7XG4gIGlmIChmcmFtZSkgcmV0dXJuOyAvLyBTb29uZXN0IGFsYXJtIGFscmVhZHkgc2V0LCBvciB3aWxsIGJlLlxuICBpZiAodGltZW91dCkgdGltZW91dCA9IGNsZWFyVGltZW91dCh0aW1lb3V0KTtcbiAgdmFyIGRlbGF5ID0gdGltZSAtIGNsb2NrTm93OyAvLyBTdHJpY3RseSBsZXNzIHRoYW4gaWYgd2UgcmVjb21wdXRlZCBjbG9ja05vdy5cbiAgaWYgKGRlbGF5ID4gMjQpIHtcbiAgICBpZiAodGltZSA8IEluZmluaXR5KSB0aW1lb3V0ID0gc2V0VGltZW91dCh3YWtlLCB0aW1lIC0gY2xvY2subm93KCkgLSBjbG9ja1NrZXcpO1xuICAgIGlmIChpbnRlcnZhbCkgaW50ZXJ2YWwgPSBjbGVhckludGVydmFsKGludGVydmFsKTtcbiAgfSBlbHNlIHtcbiAgICBpZiAoIWludGVydmFsKSBjbG9ja0xhc3QgPSBjbG9jay5ub3coKSwgaW50ZXJ2YWwgPSBzZXRJbnRlcnZhbChwb2tlLCBwb2tlRGVsYXkpO1xuICAgIGZyYW1lID0gMSwgc2V0RnJhbWUod2FrZSk7XG4gIH1cbn1cbiIsImltcG9ydCB7VGltZXJ9IGZyb20gXCIuL3RpbWVyLmpzXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKGNhbGxiYWNrLCBkZWxheSwgdGltZSkge1xuICB2YXIgdCA9IG5ldyBUaW1lcjtcbiAgZGVsYXkgPSBkZWxheSA9PSBudWxsID8gMCA6ICtkZWxheTtcbiAgdC5yZXN0YXJ0KGVsYXBzZWQgPT4ge1xuICAgIHQuc3RvcCgpO1xuICAgIGNhbGxiYWNrKGVsYXBzZWQgKyBkZWxheSk7XG4gIH0sIGRlbGF5LCB0aW1lKTtcbiAgcmV0dXJuIHQ7XG59XG4iLCJpbXBvcnQge2Rpc3BhdGNofSBmcm9tIFwiZDMtZGlzcGF0Y2hcIjtcbmltcG9ydCB7dGltZXIsIHRpbWVvdXR9IGZyb20gXCJkMy10aW1lclwiO1xuXG52YXIgZW1wdHlPbiA9IGRpc3BhdGNoKFwic3RhcnRcIiwgXCJlbmRcIiwgXCJjYW5jZWxcIiwgXCJpbnRlcnJ1cHRcIik7XG52YXIgZW1wdHlUd2VlbiA9IFtdO1xuXG5leHBvcnQgdmFyIENSRUFURUQgPSAwO1xuZXhwb3J0IHZhciBTQ0hFRFVMRUQgPSAxO1xuZXhwb3J0IHZhciBTVEFSVElORyA9IDI7XG5leHBvcnQgdmFyIFNUQVJURUQgPSAzO1xuZXhwb3J0IHZhciBSVU5OSU5HID0gNDtcbmV4cG9ydCB2YXIgRU5ESU5HID0gNTtcbmV4cG9ydCB2YXIgRU5ERUQgPSA2O1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbihub2RlLCBuYW1lLCBpZCwgaW5kZXgsIGdyb3VwLCB0aW1pbmcpIHtcbiAgdmFyIHNjaGVkdWxlcyA9IG5vZGUuX190cmFuc2l0aW9uO1xuICBpZiAoIXNjaGVkdWxlcykgbm9kZS5fX3RyYW5zaXRpb24gPSB7fTtcbiAgZWxzZSBpZiAoaWQgaW4gc2NoZWR1bGVzKSByZXR1cm47XG4gIGNyZWF0ZShub2RlLCBpZCwge1xuICAgIG5hbWU6IG5hbWUsXG4gICAgaW5kZXg6IGluZGV4LCAvLyBGb3IgY29udGV4dCBkdXJpbmcgY2FsbGJhY2suXG4gICAgZ3JvdXA6IGdyb3VwLCAvLyBGb3IgY29udGV4dCBkdXJpbmcgY2FsbGJhY2suXG4gICAgb246IGVtcHR5T24sXG4gICAgdHdlZW46IGVtcHR5VHdlZW4sXG4gICAgdGltZTogdGltaW5nLnRpbWUsXG4gICAgZGVsYXk6IHRpbWluZy5kZWxheSxcbiAgICBkdXJhdGlvbjogdGltaW5nLmR1cmF0aW9uLFxuICAgIGVhc2U6IHRpbWluZy5lYXNlLFxuICAgIHRpbWVyOiBudWxsLFxuICAgIHN0YXRlOiBDUkVBVEVEXG4gIH0pO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaW5pdChub2RlLCBpZCkge1xuICB2YXIgc2NoZWR1bGUgPSBnZXQobm9kZSwgaWQpO1xuICBpZiAoc2NoZWR1bGUuc3RhdGUgPiBDUkVBVEVEKSB0aHJvdyBuZXcgRXJyb3IoXCJ0b28gbGF0ZTsgYWxyZWFkeSBzY2hlZHVsZWRcIik7XG4gIHJldHVybiBzY2hlZHVsZTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHNldChub2RlLCBpZCkge1xuICB2YXIgc2NoZWR1bGUgPSBnZXQobm9kZSwgaWQpO1xuICBpZiAoc2NoZWR1bGUuc3RhdGUgPiBTVEFSVEVEKSB0aHJvdyBuZXcgRXJyb3IoXCJ0b28gbGF0ZTsgYWxyZWFkeSBydW5uaW5nXCIpO1xuICByZXR1cm4gc2NoZWR1bGU7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXQobm9kZSwgaWQpIHtcbiAgdmFyIHNjaGVkdWxlID0gbm9kZS5fX3RyYW5zaXRpb247XG4gIGlmICghc2NoZWR1bGUgfHwgIShzY2hlZHVsZSA9IHNjaGVkdWxlW2lkXSkpIHRocm93IG5ldyBFcnJvcihcInRyYW5zaXRpb24gbm90IGZvdW5kXCIpO1xuICByZXR1cm4gc2NoZWR1bGU7XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZShub2RlLCBpZCwgc2VsZikge1xuICB2YXIgc2NoZWR1bGVzID0gbm9kZS5fX3RyYW5zaXRpb24sXG4gICAgICB0d2VlbjtcblxuICAvLyBJbml0aWFsaXplIHRoZSBzZWxmIHRpbWVyIHdoZW4gdGhlIHRyYW5zaXRpb24gaXMgY3JlYXRlZC5cbiAgLy8gTm90ZSB0aGUgYWN0dWFsIGRlbGF5IGlzIG5vdCBrbm93biB1bnRpbCB0aGUgZmlyc3QgY2FsbGJhY2shXG4gIHNjaGVkdWxlc1tpZF0gPSBzZWxmO1xuICBzZWxmLnRpbWVyID0gdGltZXIoc2NoZWR1bGUsIDAsIHNlbGYudGltZSk7XG5cbiAgZnVuY3Rpb24gc2NoZWR1bGUoZWxhcHNlZCkge1xuICAgIHNlbGYuc3RhdGUgPSBTQ0hFRFVMRUQ7XG4gICAgc2VsZi50aW1lci5yZXN0YXJ0KHN0YXJ0LCBzZWxmLmRlbGF5LCBzZWxmLnRpbWUpO1xuXG4gICAgLy8gSWYgdGhlIGVsYXBzZWQgZGVsYXkgaXMgbGVzcyB0aGFuIG91ciBmaXJzdCBzbGVlcCwgc3RhcnQgaW1tZWRpYXRlbHkuXG4gICAgaWYgKHNlbGYuZGVsYXkgPD0gZWxhcHNlZCkgc3RhcnQoZWxhcHNlZCAtIHNlbGYuZGVsYXkpO1xuICB9XG5cbiAgZnVuY3Rpb24gc3RhcnQoZWxhcHNlZCkge1xuICAgIHZhciBpLCBqLCBuLCBvO1xuXG4gICAgLy8gSWYgdGhlIHN0YXRlIGlzIG5vdCBTQ0hFRFVMRUQsIHRoZW4gd2UgcHJldmlvdXNseSBlcnJvcmVkIG9uIHN0YXJ0LlxuICAgIGlmIChzZWxmLnN0YXRlICE9PSBTQ0hFRFVMRUQpIHJldHVybiBzdG9wKCk7XG5cbiAgICBmb3IgKGkgaW4gc2NoZWR1bGVzKSB7XG4gICAgICBvID0gc2NoZWR1bGVzW2ldO1xuICAgICAgaWYgKG8ubmFtZSAhPT0gc2VsZi5uYW1lKSBjb250aW51ZTtcblxuICAgICAgLy8gV2hpbGUgdGhpcyBlbGVtZW50IGFscmVhZHkgaGFzIGEgc3RhcnRpbmcgdHJhbnNpdGlvbiBkdXJpbmcgdGhpcyBmcmFtZSxcbiAgICAgIC8vIGRlZmVyIHN0YXJ0aW5nIGFuIGludGVycnVwdGluZyB0cmFuc2l0aW9uIHVudGlsIHRoYXQgdHJhbnNpdGlvbiBoYXMgYVxuICAgICAgLy8gY2hhbmNlIHRvIHRpY2sgKGFuZCBwb3NzaWJseSBlbmQpOyBzZWUgZDMvZDMtdHJhbnNpdGlvbiM1NCFcbiAgICAgIGlmIChvLnN0YXRlID09PSBTVEFSVEVEKSByZXR1cm4gdGltZW91dChzdGFydCk7XG5cbiAgICAgIC8vIEludGVycnVwdCB0aGUgYWN0aXZlIHRyYW5zaXRpb24sIGlmIGFueS5cbiAgICAgIGlmIChvLnN0YXRlID09PSBSVU5OSU5HKSB7XG4gICAgICAgIG8uc3RhdGUgPSBFTkRFRDtcbiAgICAgICAgby50aW1lci5zdG9wKCk7XG4gICAgICAgIG8ub24uY2FsbChcImludGVycnVwdFwiLCBub2RlLCBub2RlLl9fZGF0YV9fLCBvLmluZGV4LCBvLmdyb3VwKTtcbiAgICAgICAgZGVsZXRlIHNjaGVkdWxlc1tpXTtcbiAgICAgIH1cblxuICAgICAgLy8gQ2FuY2VsIGFueSBwcmUtZW1wdGVkIHRyYW5zaXRpb25zLlxuICAgICAgZWxzZSBpZiAoK2kgPCBpZCkge1xuICAgICAgICBvLnN0YXRlID0gRU5ERUQ7XG4gICAgICAgIG8udGltZXIuc3RvcCgpO1xuICAgICAgICBvLm9uLmNhbGwoXCJjYW5jZWxcIiwgbm9kZSwgbm9kZS5fX2RhdGFfXywgby5pbmRleCwgby5ncm91cCk7XG4gICAgICAgIGRlbGV0ZSBzY2hlZHVsZXNbaV07XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gRGVmZXIgdGhlIGZpcnN0IHRpY2sgdG8gZW5kIG9mIHRoZSBjdXJyZW50IGZyYW1lOyBzZWUgZDMvZDMjMTU3Ni5cbiAgICAvLyBOb3RlIHRoZSB0cmFuc2l0aW9uIG1heSBiZSBjYW5jZWxlZCBhZnRlciBzdGFydCBhbmQgYmVmb3JlIHRoZSBmaXJzdCB0aWNrIVxuICAgIC8vIE5vdGUgdGhpcyBtdXN0IGJlIHNjaGVkdWxlZCBiZWZvcmUgdGhlIHN0YXJ0IGV2ZW50OyBzZWUgZDMvZDMtdHJhbnNpdGlvbiMxNiFcbiAgICAvLyBBc3N1bWluZyB0aGlzIGlzIHN1Y2Nlc3NmdWwsIHN1YnNlcXVlbnQgY2FsbGJhY2tzIGdvIHN0cmFpZ2h0IHRvIHRpY2suXG4gICAgdGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgIGlmIChzZWxmLnN0YXRlID09PSBTVEFSVEVEKSB7XG4gICAgICAgIHNlbGYuc3RhdGUgPSBSVU5OSU5HO1xuICAgICAgICBzZWxmLnRpbWVyLnJlc3RhcnQodGljaywgc2VsZi5kZWxheSwgc2VsZi50aW1lKTtcbiAgICAgICAgdGljayhlbGFwc2VkKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIC8vIERpc3BhdGNoIHRoZSBzdGFydCBldmVudC5cbiAgICAvLyBOb3RlIHRoaXMgbXVzdCBiZSBkb25lIGJlZm9yZSB0aGUgdHdlZW4gYXJlIGluaXRpYWxpemVkLlxuICAgIHNlbGYuc3RhdGUgPSBTVEFSVElORztcbiAgICBzZWxmLm9uLmNhbGwoXCJzdGFydFwiLCBub2RlLCBub2RlLl9fZGF0YV9fLCBzZWxmLmluZGV4LCBzZWxmLmdyb3VwKTtcbiAgICBpZiAoc2VsZi5zdGF0ZSAhPT0gU1RBUlRJTkcpIHJldHVybjsgLy8gaW50ZXJydXB0ZWRcbiAgICBzZWxmLnN0YXRlID0gU1RBUlRFRDtcblxuICAgIC8vIEluaXRpYWxpemUgdGhlIHR3ZWVuLCBkZWxldGluZyBudWxsIHR3ZWVuLlxuICAgIHR3ZWVuID0gbmV3IEFycmF5KG4gPSBzZWxmLnR3ZWVuLmxlbmd0aCk7XG4gICAgZm9yIChpID0gMCwgaiA9IC0xOyBpIDwgbjsgKytpKSB7XG4gICAgICBpZiAobyA9IHNlbGYudHdlZW5baV0udmFsdWUuY2FsbChub2RlLCBub2RlLl9fZGF0YV9fLCBzZWxmLmluZGV4LCBzZWxmLmdyb3VwKSkge1xuICAgICAgICB0d2VlblsrK2pdID0gbztcbiAgICAgIH1cbiAgICB9XG4gICAgdHdlZW4ubGVuZ3RoID0gaiArIDE7XG4gIH1cblxuICBmdW5jdGlvbiB0aWNrKGVsYXBzZWQpIHtcbiAgICB2YXIgdCA9IGVsYXBzZWQgPCBzZWxmLmR1cmF0aW9uID8gc2VsZi5lYXNlLmNhbGwobnVsbCwgZWxhcHNlZCAvIHNlbGYuZHVyYXRpb24pIDogKHNlbGYudGltZXIucmVzdGFydChzdG9wKSwgc2VsZi5zdGF0ZSA9IEVORElORywgMSksXG4gICAgICAgIGkgPSAtMSxcbiAgICAgICAgbiA9IHR3ZWVuLmxlbmd0aDtcblxuICAgIHdoaWxlICgrK2kgPCBuKSB7XG4gICAgICB0d2VlbltpXS5jYWxsKG5vZGUsIHQpO1xuICAgIH1cblxuICAgIC8vIERpc3BhdGNoIHRoZSBlbmQgZXZlbnQuXG4gICAgaWYgKHNlbGYuc3RhdGUgPT09IEVORElORykge1xuICAgICAgc2VsZi5vbi5jYWxsKFwiZW5kXCIsIG5vZGUsIG5vZGUuX19kYXRhX18sIHNlbGYuaW5kZXgsIHNlbGYuZ3JvdXApO1xuICAgICAgc3RvcCgpO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIHN0b3AoKSB7XG4gICAgc2VsZi5zdGF0ZSA9IEVOREVEO1xuICAgIHNlbGYudGltZXIuc3RvcCgpO1xuICAgIGRlbGV0ZSBzY2hlZHVsZXNbaWRdO1xuICAgIGZvciAodmFyIGkgaW4gc2NoZWR1bGVzKSByZXR1cm47IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tdW51c2VkLXZhcnNcbiAgICBkZWxldGUgbm9kZS5fX3RyYW5zaXRpb247XG4gIH1cbn1cbiIsImltcG9ydCB7Z2V0LCBzZXR9IGZyb20gXCIuL3NjaGVkdWxlLmpzXCI7XG5cbmZ1bmN0aW9uIHR3ZWVuUmVtb3ZlKGlkLCBuYW1lKSB7XG4gIHZhciB0d2VlbjAsIHR3ZWVuMTtcbiAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgIHZhciBzY2hlZHVsZSA9IHNldCh0aGlzLCBpZCksXG4gICAgICAgIHR3ZWVuID0gc2NoZWR1bGUudHdlZW47XG5cbiAgICAvLyBJZiB0aGlzIG5vZGUgc2hhcmVkIHR3ZWVuIHdpdGggdGhlIHByZXZpb3VzIG5vZGUsXG4gICAgLy8ganVzdCBhc3NpZ24gdGhlIHVwZGF0ZWQgc2hhcmVkIHR3ZWVuIGFuZCB3ZeKAmXJlIGRvbmUhXG4gICAgLy8gT3RoZXJ3aXNlLCBjb3B5LW9uLXdyaXRlLlxuICAgIGlmICh0d2VlbiAhPT0gdHdlZW4wKSB7XG4gICAgICB0d2VlbjEgPSB0d2VlbjAgPSB0d2VlbjtcbiAgICAgIGZvciAodmFyIGkgPSAwLCBuID0gdHdlZW4xLmxlbmd0aDsgaSA8IG47ICsraSkge1xuICAgICAgICBpZiAodHdlZW4xW2ldLm5hbWUgPT09IG5hbWUpIHtcbiAgICAgICAgICB0d2VlbjEgPSB0d2VlbjEuc2xpY2UoKTtcbiAgICAgICAgICB0d2VlbjEuc3BsaWNlKGksIDEpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgc2NoZWR1bGUudHdlZW4gPSB0d2VlbjE7XG4gIH07XG59XG5cbmZ1bmN0aW9uIHR3ZWVuRnVuY3Rpb24oaWQsIG5hbWUsIHZhbHVlKSB7XG4gIHZhciB0d2VlbjAsIHR3ZWVuMTtcbiAgaWYgKHR5cGVvZiB2YWx1ZSAhPT0gXCJmdW5jdGlvblwiKSB0aHJvdyBuZXcgRXJyb3I7XG4gIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICB2YXIgc2NoZWR1bGUgPSBzZXQodGhpcywgaWQpLFxuICAgICAgICB0d2VlbiA9IHNjaGVkdWxlLnR3ZWVuO1xuXG4gICAgLy8gSWYgdGhpcyBub2RlIHNoYXJlZCB0d2VlbiB3aXRoIHRoZSBwcmV2aW91cyBub2RlLFxuICAgIC8vIGp1c3QgYXNzaWduIHRoZSB1cGRhdGVkIHNoYXJlZCB0d2VlbiBhbmQgd2XigJlyZSBkb25lIVxuICAgIC8vIE90aGVyd2lzZSwgY29weS1vbi13cml0ZS5cbiAgICBpZiAodHdlZW4gIT09IHR3ZWVuMCkge1xuICAgICAgdHdlZW4xID0gKHR3ZWVuMCA9IHR3ZWVuKS5zbGljZSgpO1xuICAgICAgZm9yICh2YXIgdCA9IHtuYW1lOiBuYW1lLCB2YWx1ZTogdmFsdWV9LCBpID0gMCwgbiA9IHR3ZWVuMS5sZW5ndGg7IGkgPCBuOyArK2kpIHtcbiAgICAgICAgaWYgKHR3ZWVuMVtpXS5uYW1lID09PSBuYW1lKSB7XG4gICAgICAgICAgdHdlZW4xW2ldID0gdDtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKGkgPT09IG4pIHR3ZWVuMS5wdXNoKHQpO1xuICAgIH1cblxuICAgIHNjaGVkdWxlLnR3ZWVuID0gdHdlZW4xO1xuICB9O1xufVxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbihuYW1lLCB2YWx1ZSkge1xuICB2YXIgaWQgPSB0aGlzLl9pZDtcblxuICBuYW1lICs9IFwiXCI7XG5cbiAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPCAyKSB7XG4gICAgdmFyIHR3ZWVuID0gZ2V0KHRoaXMubm9kZSgpLCBpZCkudHdlZW47XG4gICAgZm9yICh2YXIgaSA9IDAsIG4gPSB0d2Vlbi5sZW5ndGgsIHQ7IGkgPCBuOyArK2kpIHtcbiAgICAgIGlmICgodCA9IHR3ZWVuW2ldKS5uYW1lID09PSBuYW1lKSB7XG4gICAgICAgIHJldHVybiB0LnZhbHVlO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIHJldHVybiB0aGlzLmVhY2goKHZhbHVlID09IG51bGwgPyB0d2VlblJlbW92ZSA6IHR3ZWVuRnVuY3Rpb24pKGlkLCBuYW1lLCB2YWx1ZSkpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gdHdlZW5WYWx1ZSh0cmFuc2l0aW9uLCBuYW1lLCB2YWx1ZSkge1xuICB2YXIgaWQgPSB0cmFuc2l0aW9uLl9pZDtcblxuICB0cmFuc2l0aW9uLmVhY2goZnVuY3Rpb24oKSB7XG4gICAgdmFyIHNjaGVkdWxlID0gc2V0KHRoaXMsIGlkKTtcbiAgICAoc2NoZWR1bGUudmFsdWUgfHwgKHNjaGVkdWxlLnZhbHVlID0ge30pKVtuYW1lXSA9IHZhbHVlLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gIH0pO1xuXG4gIHJldHVybiBmdW5jdGlvbihub2RlKSB7XG4gICAgcmV0dXJuIGdldChub2RlLCBpZCkudmFsdWVbbmFtZV07XG4gIH07XG59XG4iLCJpbXBvcnQge2NvbG9yfSBmcm9tIFwiZDMtY29sb3JcIjtcbmltcG9ydCB7aW50ZXJwb2xhdGVOdW1iZXIsIGludGVycG9sYXRlUmdiLCBpbnRlcnBvbGF0ZVN0cmluZ30gZnJvbSBcImQzLWludGVycG9sYXRlXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKGEsIGIpIHtcbiAgdmFyIGM7XG4gIHJldHVybiAodHlwZW9mIGIgPT09IFwibnVtYmVyXCIgPyBpbnRlcnBvbGF0ZU51bWJlclxuICAgICAgOiBiIGluc3RhbmNlb2YgY29sb3IgPyBpbnRlcnBvbGF0ZVJnYlxuICAgICAgOiAoYyA9IGNvbG9yKGIpKSA/IChiID0gYywgaW50ZXJwb2xhdGVSZ2IpXG4gICAgICA6IGludGVycG9sYXRlU3RyaW5nKShhLCBiKTtcbn1cbiIsImltcG9ydCB7aW50ZXJwb2xhdGVUcmFuc2Zvcm1TdmcgYXMgaW50ZXJwb2xhdGVUcmFuc2Zvcm19IGZyb20gXCJkMy1pbnRlcnBvbGF0ZVwiO1xuaW1wb3J0IHtuYW1lc3BhY2V9IGZyb20gXCJkMy1zZWxlY3Rpb25cIjtcbmltcG9ydCB7dHdlZW5WYWx1ZX0gZnJvbSBcIi4vdHdlZW4uanNcIjtcbmltcG9ydCBpbnRlcnBvbGF0ZSBmcm9tIFwiLi9pbnRlcnBvbGF0ZS5qc1wiO1xuXG5mdW5jdGlvbiBhdHRyUmVtb3ZlKG5hbWUpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgIHRoaXMucmVtb3ZlQXR0cmlidXRlKG5hbWUpO1xuICB9O1xufVxuXG5mdW5jdGlvbiBhdHRyUmVtb3ZlTlMoZnVsbG5hbWUpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgIHRoaXMucmVtb3ZlQXR0cmlidXRlTlMoZnVsbG5hbWUuc3BhY2UsIGZ1bGxuYW1lLmxvY2FsKTtcbiAgfTtcbn1cblxuZnVuY3Rpb24gYXR0ckNvbnN0YW50KG5hbWUsIGludGVycG9sYXRlLCB2YWx1ZTEpIHtcbiAgdmFyIHN0cmluZzAwLFxuICAgICAgc3RyaW5nMSA9IHZhbHVlMSArIFwiXCIsXG4gICAgICBpbnRlcnBvbGF0ZTA7XG4gIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICB2YXIgc3RyaW5nMCA9IHRoaXMuZ2V0QXR0cmlidXRlKG5hbWUpO1xuICAgIHJldHVybiBzdHJpbmcwID09PSBzdHJpbmcxID8gbnVsbFxuICAgICAgICA6IHN0cmluZzAgPT09IHN0cmluZzAwID8gaW50ZXJwb2xhdGUwXG4gICAgICAgIDogaW50ZXJwb2xhdGUwID0gaW50ZXJwb2xhdGUoc3RyaW5nMDAgPSBzdHJpbmcwLCB2YWx1ZTEpO1xuICB9O1xufVxuXG5mdW5jdGlvbiBhdHRyQ29uc3RhbnROUyhmdWxsbmFtZSwgaW50ZXJwb2xhdGUsIHZhbHVlMSkge1xuICB2YXIgc3RyaW5nMDAsXG4gICAgICBzdHJpbmcxID0gdmFsdWUxICsgXCJcIixcbiAgICAgIGludGVycG9sYXRlMDtcbiAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgIHZhciBzdHJpbmcwID0gdGhpcy5nZXRBdHRyaWJ1dGVOUyhmdWxsbmFtZS5zcGFjZSwgZnVsbG5hbWUubG9jYWwpO1xuICAgIHJldHVybiBzdHJpbmcwID09PSBzdHJpbmcxID8gbnVsbFxuICAgICAgICA6IHN0cmluZzAgPT09IHN0cmluZzAwID8gaW50ZXJwb2xhdGUwXG4gICAgICAgIDogaW50ZXJwb2xhdGUwID0gaW50ZXJwb2xhdGUoc3RyaW5nMDAgPSBzdHJpbmcwLCB2YWx1ZTEpO1xuICB9O1xufVxuXG5mdW5jdGlvbiBhdHRyRnVuY3Rpb24obmFtZSwgaW50ZXJwb2xhdGUsIHZhbHVlKSB7XG4gIHZhciBzdHJpbmcwMCxcbiAgICAgIHN0cmluZzEwLFxuICAgICAgaW50ZXJwb2xhdGUwO1xuICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgdmFyIHN0cmluZzAsIHZhbHVlMSA9IHZhbHVlKHRoaXMpLCBzdHJpbmcxO1xuICAgIGlmICh2YWx1ZTEgPT0gbnVsbCkgcmV0dXJuIHZvaWQgdGhpcy5yZW1vdmVBdHRyaWJ1dGUobmFtZSk7XG4gICAgc3RyaW5nMCA9IHRoaXMuZ2V0QXR0cmlidXRlKG5hbWUpO1xuICAgIHN0cmluZzEgPSB2YWx1ZTEgKyBcIlwiO1xuICAgIHJldHVybiBzdHJpbmcwID09PSBzdHJpbmcxID8gbnVsbFxuICAgICAgICA6IHN0cmluZzAgPT09IHN0cmluZzAwICYmIHN0cmluZzEgPT09IHN0cmluZzEwID8gaW50ZXJwb2xhdGUwXG4gICAgICAgIDogKHN0cmluZzEwID0gc3RyaW5nMSwgaW50ZXJwb2xhdGUwID0gaW50ZXJwb2xhdGUoc3RyaW5nMDAgPSBzdHJpbmcwLCB2YWx1ZTEpKTtcbiAgfTtcbn1cblxuZnVuY3Rpb24gYXR0ckZ1bmN0aW9uTlMoZnVsbG5hbWUsIGludGVycG9sYXRlLCB2YWx1ZSkge1xuICB2YXIgc3RyaW5nMDAsXG4gICAgICBzdHJpbmcxMCxcbiAgICAgIGludGVycG9sYXRlMDtcbiAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgIHZhciBzdHJpbmcwLCB2YWx1ZTEgPSB2YWx1ZSh0aGlzKSwgc3RyaW5nMTtcbiAgICBpZiAodmFsdWUxID09IG51bGwpIHJldHVybiB2b2lkIHRoaXMucmVtb3ZlQXR0cmlidXRlTlMoZnVsbG5hbWUuc3BhY2UsIGZ1bGxuYW1lLmxvY2FsKTtcbiAgICBzdHJpbmcwID0gdGhpcy5nZXRBdHRyaWJ1dGVOUyhmdWxsbmFtZS5zcGFjZSwgZnVsbG5hbWUubG9jYWwpO1xuICAgIHN0cmluZzEgPSB2YWx1ZTEgKyBcIlwiO1xuICAgIHJldHVybiBzdHJpbmcwID09PSBzdHJpbmcxID8gbnVsbFxuICAgICAgICA6IHN0cmluZzAgPT09IHN0cmluZzAwICYmIHN0cmluZzEgPT09IHN0cmluZzEwID8gaW50ZXJwb2xhdGUwXG4gICAgICAgIDogKHN0cmluZzEwID0gc3RyaW5nMSwgaW50ZXJwb2xhdGUwID0gaW50ZXJwb2xhdGUoc3RyaW5nMDAgPSBzdHJpbmcwLCB2YWx1ZTEpKTtcbiAgfTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24obmFtZSwgdmFsdWUpIHtcbiAgdmFyIGZ1bGxuYW1lID0gbmFtZXNwYWNlKG5hbWUpLCBpID0gZnVsbG5hbWUgPT09IFwidHJhbnNmb3JtXCIgPyBpbnRlcnBvbGF0ZVRyYW5zZm9ybSA6IGludGVycG9sYXRlO1xuICByZXR1cm4gdGhpcy5hdHRyVHdlZW4obmFtZSwgdHlwZW9mIHZhbHVlID09PSBcImZ1bmN0aW9uXCJcbiAgICAgID8gKGZ1bGxuYW1lLmxvY2FsID8gYXR0ckZ1bmN0aW9uTlMgOiBhdHRyRnVuY3Rpb24pKGZ1bGxuYW1lLCBpLCB0d2VlblZhbHVlKHRoaXMsIFwiYXR0ci5cIiArIG5hbWUsIHZhbHVlKSlcbiAgICAgIDogdmFsdWUgPT0gbnVsbCA/IChmdWxsbmFtZS5sb2NhbCA/IGF0dHJSZW1vdmVOUyA6IGF0dHJSZW1vdmUpKGZ1bGxuYW1lKVxuICAgICAgOiAoZnVsbG5hbWUubG9jYWwgPyBhdHRyQ29uc3RhbnROUyA6IGF0dHJDb25zdGFudCkoZnVsbG5hbWUsIGksIHZhbHVlKSk7XG59XG4iLCJpbXBvcnQge25hbWVzcGFjZX0gZnJvbSBcImQzLXNlbGVjdGlvblwiO1xuXG5mdW5jdGlvbiBhdHRySW50ZXJwb2xhdGUobmFtZSwgaSkge1xuICByZXR1cm4gZnVuY3Rpb24odCkge1xuICAgIHRoaXMuc2V0QXR0cmlidXRlKG5hbWUsIGkuY2FsbCh0aGlzLCB0KSk7XG4gIH07XG59XG5cbmZ1bmN0aW9uIGF0dHJJbnRlcnBvbGF0ZU5TKGZ1bGxuYW1lLCBpKSB7XG4gIHJldHVybiBmdW5jdGlvbih0KSB7XG4gICAgdGhpcy5zZXRBdHRyaWJ1dGVOUyhmdWxsbmFtZS5zcGFjZSwgZnVsbG5hbWUubG9jYWwsIGkuY2FsbCh0aGlzLCB0KSk7XG4gIH07XG59XG5cbmZ1bmN0aW9uIGF0dHJUd2Vlbk5TKGZ1bGxuYW1lLCB2YWx1ZSkge1xuICB2YXIgdDAsIGkwO1xuICBmdW5jdGlvbiB0d2VlbigpIHtcbiAgICB2YXIgaSA9IHZhbHVlLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgaWYgKGkgIT09IGkwKSB0MCA9IChpMCA9IGkpICYmIGF0dHJJbnRlcnBvbGF0ZU5TKGZ1bGxuYW1lLCBpKTtcbiAgICByZXR1cm4gdDA7XG4gIH1cbiAgdHdlZW4uX3ZhbHVlID0gdmFsdWU7XG4gIHJldHVybiB0d2Vlbjtcbn1cblxuZnVuY3Rpb24gYXR0clR3ZWVuKG5hbWUsIHZhbHVlKSB7XG4gIHZhciB0MCwgaTA7XG4gIGZ1bmN0aW9uIHR3ZWVuKCkge1xuICAgIHZhciBpID0gdmFsdWUuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICBpZiAoaSAhPT0gaTApIHQwID0gKGkwID0gaSkgJiYgYXR0ckludGVycG9sYXRlKG5hbWUsIGkpO1xuICAgIHJldHVybiB0MDtcbiAgfVxuICB0d2Vlbi5fdmFsdWUgPSB2YWx1ZTtcbiAgcmV0dXJuIHR3ZWVuO1xufVxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbihuYW1lLCB2YWx1ZSkge1xuICB2YXIga2V5ID0gXCJhdHRyLlwiICsgbmFtZTtcbiAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPCAyKSByZXR1cm4gKGtleSA9IHRoaXMudHdlZW4oa2V5KSkgJiYga2V5Ll92YWx1ZTtcbiAgaWYgKHZhbHVlID09IG51bGwpIHJldHVybiB0aGlzLnR3ZWVuKGtleSwgbnVsbCk7XG4gIGlmICh0eXBlb2YgdmFsdWUgIT09IFwiZnVuY3Rpb25cIikgdGhyb3cgbmV3IEVycm9yO1xuICB2YXIgZnVsbG5hbWUgPSBuYW1lc3BhY2UobmFtZSk7XG4gIHJldHVybiB0aGlzLnR3ZWVuKGtleSwgKGZ1bGxuYW1lLmxvY2FsID8gYXR0clR3ZWVuTlMgOiBhdHRyVHdlZW4pKGZ1bGxuYW1lLCB2YWx1ZSkpO1xufVxuIiwiaW1wb3J0IHtnZXQsIGluaXR9IGZyb20gXCIuL3NjaGVkdWxlLmpzXCI7XG5cbmZ1bmN0aW9uIGRlbGF5RnVuY3Rpb24oaWQsIHZhbHVlKSB7XG4gIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICBpbml0KHRoaXMsIGlkKS5kZWxheSA9ICt2YWx1ZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICB9O1xufVxuXG5mdW5jdGlvbiBkZWxheUNvbnN0YW50KGlkLCB2YWx1ZSkge1xuICByZXR1cm4gdmFsdWUgPSArdmFsdWUsIGZ1bmN0aW9uKCkge1xuICAgIGluaXQodGhpcywgaWQpLmRlbGF5ID0gdmFsdWU7XG4gIH07XG59XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKHZhbHVlKSB7XG4gIHZhciBpZCA9IHRoaXMuX2lkO1xuXG4gIHJldHVybiBhcmd1bWVudHMubGVuZ3RoXG4gICAgICA/IHRoaXMuZWFjaCgodHlwZW9mIHZhbHVlID09PSBcImZ1bmN0aW9uXCJcbiAgICAgICAgICA/IGRlbGF5RnVuY3Rpb25cbiAgICAgICAgICA6IGRlbGF5Q29uc3RhbnQpKGlkLCB2YWx1ZSkpXG4gICAgICA6IGdldCh0aGlzLm5vZGUoKSwgaWQpLmRlbGF5O1xufVxuIiwiaW1wb3J0IHtnZXQsIHNldH0gZnJvbSBcIi4vc2NoZWR1bGUuanNcIjtcblxuZnVuY3Rpb24gZHVyYXRpb25GdW5jdGlvbihpZCwgdmFsdWUpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgIHNldCh0aGlzLCBpZCkuZHVyYXRpb24gPSArdmFsdWUuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgfTtcbn1cblxuZnVuY3Rpb24gZHVyYXRpb25Db25zdGFudChpZCwgdmFsdWUpIHtcbiAgcmV0dXJuIHZhbHVlID0gK3ZhbHVlLCBmdW5jdGlvbigpIHtcbiAgICBzZXQodGhpcywgaWQpLmR1cmF0aW9uID0gdmFsdWU7XG4gIH07XG59XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKHZhbHVlKSB7XG4gIHZhciBpZCA9IHRoaXMuX2lkO1xuXG4gIHJldHVybiBhcmd1bWVudHMubGVuZ3RoXG4gICAgICA/IHRoaXMuZWFjaCgodHlwZW9mIHZhbHVlID09PSBcImZ1bmN0aW9uXCJcbiAgICAgICAgICA/IGR1cmF0aW9uRnVuY3Rpb25cbiAgICAgICAgICA6IGR1cmF0aW9uQ29uc3RhbnQpKGlkLCB2YWx1ZSkpXG4gICAgICA6IGdldCh0aGlzLm5vZGUoKSwgaWQpLmR1cmF0aW9uO1xufVxuIiwiaW1wb3J0IHtnZXQsIHNldH0gZnJvbSBcIi4vc2NoZWR1bGUuanNcIjtcblxuZnVuY3Rpb24gZWFzZUNvbnN0YW50KGlkLCB2YWx1ZSkge1xuICBpZiAodHlwZW9mIHZhbHVlICE9PSBcImZ1bmN0aW9uXCIpIHRocm93IG5ldyBFcnJvcjtcbiAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgIHNldCh0aGlzLCBpZCkuZWFzZSA9IHZhbHVlO1xuICB9O1xufVxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbih2YWx1ZSkge1xuICB2YXIgaWQgPSB0aGlzLl9pZDtcblxuICByZXR1cm4gYXJndW1lbnRzLmxlbmd0aFxuICAgICAgPyB0aGlzLmVhY2goZWFzZUNvbnN0YW50KGlkLCB2YWx1ZSkpXG4gICAgICA6IGdldCh0aGlzLm5vZGUoKSwgaWQpLmVhc2U7XG59XG4iLCJpbXBvcnQge2dldCwgc2V0LCBpbml0fSBmcm9tIFwiLi9zY2hlZHVsZS5qc1wiO1xuXG5mdW5jdGlvbiBzdGFydChuYW1lKSB7XG4gIHJldHVybiAobmFtZSArIFwiXCIpLnRyaW0oKS5zcGxpdCgvXnxcXHMrLykuZXZlcnkoZnVuY3Rpb24odCkge1xuICAgIHZhciBpID0gdC5pbmRleE9mKFwiLlwiKTtcbiAgICBpZiAoaSA+PSAwKSB0ID0gdC5zbGljZSgwLCBpKTtcbiAgICByZXR1cm4gIXQgfHwgdCA9PT0gXCJzdGFydFwiO1xuICB9KTtcbn1cblxuZnVuY3Rpb24gb25GdW5jdGlvbihpZCwgbmFtZSwgbGlzdGVuZXIpIHtcbiAgdmFyIG9uMCwgb24xLCBzaXQgPSBzdGFydChuYW1lKSA/IGluaXQgOiBzZXQ7XG4gIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICB2YXIgc2NoZWR1bGUgPSBzaXQodGhpcywgaWQpLFxuICAgICAgICBvbiA9IHNjaGVkdWxlLm9uO1xuXG4gICAgLy8gSWYgdGhpcyBub2RlIHNoYXJlZCBhIGRpc3BhdGNoIHdpdGggdGhlIHByZXZpb3VzIG5vZGUsXG4gICAgLy8ganVzdCBhc3NpZ24gdGhlIHVwZGF0ZWQgc2hhcmVkIGRpc3BhdGNoIGFuZCB3ZeKAmXJlIGRvbmUhXG4gICAgLy8gT3RoZXJ3aXNlLCBjb3B5LW9uLXdyaXRlLlxuICAgIGlmIChvbiAhPT0gb24wKSAob24xID0gKG9uMCA9IG9uKS5jb3B5KCkpLm9uKG5hbWUsIGxpc3RlbmVyKTtcblxuICAgIHNjaGVkdWxlLm9uID0gb24xO1xuICB9O1xufVxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbihuYW1lLCBsaXN0ZW5lcikge1xuICB2YXIgaWQgPSB0aGlzLl9pZDtcblxuICByZXR1cm4gYXJndW1lbnRzLmxlbmd0aCA8IDJcbiAgICAgID8gZ2V0KHRoaXMubm9kZSgpLCBpZCkub24ub24obmFtZSlcbiAgICAgIDogdGhpcy5lYWNoKG9uRnVuY3Rpb24oaWQsIG5hbWUsIGxpc3RlbmVyKSk7XG59XG4iLCJpbXBvcnQge3NlbGVjdGlvbn0gZnJvbSBcImQzLXNlbGVjdGlvblwiO1xuXG52YXIgU2VsZWN0aW9uID0gc2VsZWN0aW9uLnByb3RvdHlwZS5jb25zdHJ1Y3RvcjtcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24oKSB7XG4gIHJldHVybiBuZXcgU2VsZWN0aW9uKHRoaXMuX2dyb3VwcywgdGhpcy5fcGFyZW50cyk7XG59XG4iLCJpbXBvcnQge2ludGVycG9sYXRlVHJhbnNmb3JtQ3NzIGFzIGludGVycG9sYXRlVHJhbnNmb3JtfSBmcm9tIFwiZDMtaW50ZXJwb2xhdGVcIjtcbmltcG9ydCB7c3R5bGV9IGZyb20gXCJkMy1zZWxlY3Rpb25cIjtcbmltcG9ydCB7c2V0fSBmcm9tIFwiLi9zY2hlZHVsZS5qc1wiO1xuaW1wb3J0IHt0d2VlblZhbHVlfSBmcm9tIFwiLi90d2Vlbi5qc1wiO1xuaW1wb3J0IGludGVycG9sYXRlIGZyb20gXCIuL2ludGVycG9sYXRlLmpzXCI7XG5cbmZ1bmN0aW9uIHN0eWxlTnVsbChuYW1lLCBpbnRlcnBvbGF0ZSkge1xuICB2YXIgc3RyaW5nMDAsXG4gICAgICBzdHJpbmcxMCxcbiAgICAgIGludGVycG9sYXRlMDtcbiAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgIHZhciBzdHJpbmcwID0gc3R5bGUodGhpcywgbmFtZSksXG4gICAgICAgIHN0cmluZzEgPSAodGhpcy5zdHlsZS5yZW1vdmVQcm9wZXJ0eShuYW1lKSwgc3R5bGUodGhpcywgbmFtZSkpO1xuICAgIHJldHVybiBzdHJpbmcwID09PSBzdHJpbmcxID8gbnVsbFxuICAgICAgICA6IHN0cmluZzAgPT09IHN0cmluZzAwICYmIHN0cmluZzEgPT09IHN0cmluZzEwID8gaW50ZXJwb2xhdGUwXG4gICAgICAgIDogaW50ZXJwb2xhdGUwID0gaW50ZXJwb2xhdGUoc3RyaW5nMDAgPSBzdHJpbmcwLCBzdHJpbmcxMCA9IHN0cmluZzEpO1xuICB9O1xufVxuXG5mdW5jdGlvbiBzdHlsZVJlbW92ZShuYW1lKSB7XG4gIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICB0aGlzLnN0eWxlLnJlbW92ZVByb3BlcnR5KG5hbWUpO1xuICB9O1xufVxuXG5mdW5jdGlvbiBzdHlsZUNvbnN0YW50KG5hbWUsIGludGVycG9sYXRlLCB2YWx1ZTEpIHtcbiAgdmFyIHN0cmluZzAwLFxuICAgICAgc3RyaW5nMSA9IHZhbHVlMSArIFwiXCIsXG4gICAgICBpbnRlcnBvbGF0ZTA7XG4gIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICB2YXIgc3RyaW5nMCA9IHN0eWxlKHRoaXMsIG5hbWUpO1xuICAgIHJldHVybiBzdHJpbmcwID09PSBzdHJpbmcxID8gbnVsbFxuICAgICAgICA6IHN0cmluZzAgPT09IHN0cmluZzAwID8gaW50ZXJwb2xhdGUwXG4gICAgICAgIDogaW50ZXJwb2xhdGUwID0gaW50ZXJwb2xhdGUoc3RyaW5nMDAgPSBzdHJpbmcwLCB2YWx1ZTEpO1xuICB9O1xufVxuXG5mdW5jdGlvbiBzdHlsZUZ1bmN0aW9uKG5hbWUsIGludGVycG9sYXRlLCB2YWx1ZSkge1xuICB2YXIgc3RyaW5nMDAsXG4gICAgICBzdHJpbmcxMCxcbiAgICAgIGludGVycG9sYXRlMDtcbiAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgIHZhciBzdHJpbmcwID0gc3R5bGUodGhpcywgbmFtZSksXG4gICAgICAgIHZhbHVlMSA9IHZhbHVlKHRoaXMpLFxuICAgICAgICBzdHJpbmcxID0gdmFsdWUxICsgXCJcIjtcbiAgICBpZiAodmFsdWUxID09IG51bGwpIHN0cmluZzEgPSB2YWx1ZTEgPSAodGhpcy5zdHlsZS5yZW1vdmVQcm9wZXJ0eShuYW1lKSwgc3R5bGUodGhpcywgbmFtZSkpO1xuICAgIHJldHVybiBzdHJpbmcwID09PSBzdHJpbmcxID8gbnVsbFxuICAgICAgICA6IHN0cmluZzAgPT09IHN0cmluZzAwICYmIHN0cmluZzEgPT09IHN0cmluZzEwID8gaW50ZXJwb2xhdGUwXG4gICAgICAgIDogKHN0cmluZzEwID0gc3RyaW5nMSwgaW50ZXJwb2xhdGUwID0gaW50ZXJwb2xhdGUoc3RyaW5nMDAgPSBzdHJpbmcwLCB2YWx1ZTEpKTtcbiAgfTtcbn1cblxuZnVuY3Rpb24gc3R5bGVNYXliZVJlbW92ZShpZCwgbmFtZSkge1xuICB2YXIgb24wLCBvbjEsIGxpc3RlbmVyMCwga2V5ID0gXCJzdHlsZS5cIiArIG5hbWUsIGV2ZW50ID0gXCJlbmQuXCIgKyBrZXksIHJlbW92ZTtcbiAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgIHZhciBzY2hlZHVsZSA9IHNldCh0aGlzLCBpZCksXG4gICAgICAgIG9uID0gc2NoZWR1bGUub24sXG4gICAgICAgIGxpc3RlbmVyID0gc2NoZWR1bGUudmFsdWVba2V5XSA9PSBudWxsID8gcmVtb3ZlIHx8IChyZW1vdmUgPSBzdHlsZVJlbW92ZShuYW1lKSkgOiB1bmRlZmluZWQ7XG5cbiAgICAvLyBJZiB0aGlzIG5vZGUgc2hhcmVkIGEgZGlzcGF0Y2ggd2l0aCB0aGUgcHJldmlvdXMgbm9kZSxcbiAgICAvLyBqdXN0IGFzc2lnbiB0aGUgdXBkYXRlZCBzaGFyZWQgZGlzcGF0Y2ggYW5kIHdl4oCZcmUgZG9uZSFcbiAgICAvLyBPdGhlcndpc2UsIGNvcHktb24td3JpdGUuXG4gICAgaWYgKG9uICE9PSBvbjAgfHwgbGlzdGVuZXIwICE9PSBsaXN0ZW5lcikgKG9uMSA9IChvbjAgPSBvbikuY29weSgpKS5vbihldmVudCwgbGlzdGVuZXIwID0gbGlzdGVuZXIpO1xuXG4gICAgc2NoZWR1bGUub24gPSBvbjE7XG4gIH07XG59XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKG5hbWUsIHZhbHVlLCBwcmlvcml0eSkge1xuICB2YXIgaSA9IChuYW1lICs9IFwiXCIpID09PSBcInRyYW5zZm9ybVwiID8gaW50ZXJwb2xhdGVUcmFuc2Zvcm0gOiBpbnRlcnBvbGF0ZTtcbiAgcmV0dXJuIHZhbHVlID09IG51bGwgPyB0aGlzXG4gICAgICAuc3R5bGVUd2VlbihuYW1lLCBzdHlsZU51bGwobmFtZSwgaSkpXG4gICAgICAub24oXCJlbmQuc3R5bGUuXCIgKyBuYW1lLCBzdHlsZVJlbW92ZShuYW1lKSlcbiAgICA6IHR5cGVvZiB2YWx1ZSA9PT0gXCJmdW5jdGlvblwiID8gdGhpc1xuICAgICAgLnN0eWxlVHdlZW4obmFtZSwgc3R5bGVGdW5jdGlvbihuYW1lLCBpLCB0d2VlblZhbHVlKHRoaXMsIFwic3R5bGUuXCIgKyBuYW1lLCB2YWx1ZSkpKVxuICAgICAgLmVhY2goc3R5bGVNYXliZVJlbW92ZSh0aGlzLl9pZCwgbmFtZSkpXG4gICAgOiB0aGlzXG4gICAgICAuc3R5bGVUd2VlbihuYW1lLCBzdHlsZUNvbnN0YW50KG5hbWUsIGksIHZhbHVlKSwgcHJpb3JpdHkpXG4gICAgICAub24oXCJlbmQuc3R5bGUuXCIgKyBuYW1lLCBudWxsKTtcbn1cbiIsImZ1bmN0aW9uIHN0eWxlSW50ZXJwb2xhdGUobmFtZSwgaSwgcHJpb3JpdHkpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKHQpIHtcbiAgICB0aGlzLnN0eWxlLnNldFByb3BlcnR5KG5hbWUsIGkuY2FsbCh0aGlzLCB0KSwgcHJpb3JpdHkpO1xuICB9O1xufVxuXG5mdW5jdGlvbiBzdHlsZVR3ZWVuKG5hbWUsIHZhbHVlLCBwcmlvcml0eSkge1xuICB2YXIgdCwgaTA7XG4gIGZ1bmN0aW9uIHR3ZWVuKCkge1xuICAgIHZhciBpID0gdmFsdWUuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICBpZiAoaSAhPT0gaTApIHQgPSAoaTAgPSBpKSAmJiBzdHlsZUludGVycG9sYXRlKG5hbWUsIGksIHByaW9yaXR5KTtcbiAgICByZXR1cm4gdDtcbiAgfVxuICB0d2Vlbi5fdmFsdWUgPSB2YWx1ZTtcbiAgcmV0dXJuIHR3ZWVuO1xufVxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbihuYW1lLCB2YWx1ZSwgcHJpb3JpdHkpIHtcbiAgdmFyIGtleSA9IFwic3R5bGUuXCIgKyAobmFtZSArPSBcIlwiKTtcbiAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPCAyKSByZXR1cm4gKGtleSA9IHRoaXMudHdlZW4oa2V5KSkgJiYga2V5Ll92YWx1ZTtcbiAgaWYgKHZhbHVlID09IG51bGwpIHJldHVybiB0aGlzLnR3ZWVuKGtleSwgbnVsbCk7XG4gIGlmICh0eXBlb2YgdmFsdWUgIT09IFwiZnVuY3Rpb25cIikgdGhyb3cgbmV3IEVycm9yO1xuICByZXR1cm4gdGhpcy50d2VlbihrZXksIHN0eWxlVHdlZW4obmFtZSwgdmFsdWUsIHByaW9yaXR5ID09IG51bGwgPyBcIlwiIDogcHJpb3JpdHkpKTtcbn1cbiIsImZ1bmN0aW9uIHRleHRJbnRlcnBvbGF0ZShpKSB7XG4gIHJldHVybiBmdW5jdGlvbih0KSB7XG4gICAgdGhpcy50ZXh0Q29udGVudCA9IGkuY2FsbCh0aGlzLCB0KTtcbiAgfTtcbn1cblxuZnVuY3Rpb24gdGV4dFR3ZWVuKHZhbHVlKSB7XG4gIHZhciB0MCwgaTA7XG4gIGZ1bmN0aW9uIHR3ZWVuKCkge1xuICAgIHZhciBpID0gdmFsdWUuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICBpZiAoaSAhPT0gaTApIHQwID0gKGkwID0gaSkgJiYgdGV4dEludGVycG9sYXRlKGkpO1xuICAgIHJldHVybiB0MDtcbiAgfVxuICB0d2Vlbi5fdmFsdWUgPSB2YWx1ZTtcbiAgcmV0dXJuIHR3ZWVuO1xufVxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbih2YWx1ZSkge1xuICB2YXIga2V5ID0gXCJ0ZXh0XCI7XG4gIGlmIChhcmd1bWVudHMubGVuZ3RoIDwgMSkgcmV0dXJuIChrZXkgPSB0aGlzLnR3ZWVuKGtleSkpICYmIGtleS5fdmFsdWU7XG4gIGlmICh2YWx1ZSA9PSBudWxsKSByZXR1cm4gdGhpcy50d2VlbihrZXksIG51bGwpO1xuICBpZiAodHlwZW9mIHZhbHVlICE9PSBcImZ1bmN0aW9uXCIpIHRocm93IG5ldyBFcnJvcjtcbiAgcmV0dXJuIHRoaXMudHdlZW4oa2V5LCB0ZXh0VHdlZW4odmFsdWUpKTtcbn1cbiIsImltcG9ydCB7c2VsZWN0aW9ufSBmcm9tIFwiZDMtc2VsZWN0aW9uXCI7XG5pbXBvcnQgdHJhbnNpdGlvbl9hdHRyIGZyb20gXCIuL2F0dHIuanNcIjtcbmltcG9ydCB0cmFuc2l0aW9uX2F0dHJUd2VlbiBmcm9tIFwiLi9hdHRyVHdlZW4uanNcIjtcbmltcG9ydCB0cmFuc2l0aW9uX2RlbGF5IGZyb20gXCIuL2RlbGF5LmpzXCI7XG5pbXBvcnQgdHJhbnNpdGlvbl9kdXJhdGlvbiBmcm9tIFwiLi9kdXJhdGlvbi5qc1wiO1xuaW1wb3J0IHRyYW5zaXRpb25fZWFzZSBmcm9tIFwiLi9lYXNlLmpzXCI7XG5pbXBvcnQgdHJhbnNpdGlvbl9lYXNlVmFyeWluZyBmcm9tIFwiLi9lYXNlVmFyeWluZy5qc1wiO1xuaW1wb3J0IHRyYW5zaXRpb25fZmlsdGVyIGZyb20gXCIuL2ZpbHRlci5qc1wiO1xuaW1wb3J0IHRyYW5zaXRpb25fbWVyZ2UgZnJvbSBcIi4vbWVyZ2UuanNcIjtcbmltcG9ydCB0cmFuc2l0aW9uX29uIGZyb20gXCIuL29uLmpzXCI7XG5pbXBvcnQgdHJhbnNpdGlvbl9yZW1vdmUgZnJvbSBcIi4vcmVtb3ZlLmpzXCI7XG5pbXBvcnQgdHJhbnNpdGlvbl9zZWxlY3QgZnJvbSBcIi4vc2VsZWN0LmpzXCI7XG5pbXBvcnQgdHJhbnNpdGlvbl9zZWxlY3RBbGwgZnJvbSBcIi4vc2VsZWN0QWxsLmpzXCI7XG5pbXBvcnQgdHJhbnNpdGlvbl9zZWxlY3Rpb24gZnJvbSBcIi4vc2VsZWN0aW9uLmpzXCI7XG5pbXBvcnQgdHJhbnNpdGlvbl9zdHlsZSBmcm9tIFwiLi9zdHlsZS5qc1wiO1xuaW1wb3J0IHRyYW5zaXRpb25fc3R5bGVUd2VlbiBmcm9tIFwiLi9zdHlsZVR3ZWVuLmpzXCI7XG5pbXBvcnQgdHJhbnNpdGlvbl90ZXh0IGZyb20gXCIuL3RleHQuanNcIjtcbmltcG9ydCB0cmFuc2l0aW9uX3RleHRUd2VlbiBmcm9tIFwiLi90ZXh0VHdlZW4uanNcIjtcbmltcG9ydCB0cmFuc2l0aW9uX3RyYW5zaXRpb24gZnJvbSBcIi4vdHJhbnNpdGlvbi5qc1wiO1xuaW1wb3J0IHRyYW5zaXRpb25fdHdlZW4gZnJvbSBcIi4vdHdlZW4uanNcIjtcbmltcG9ydCB0cmFuc2l0aW9uX2VuZCBmcm9tIFwiLi9lbmQuanNcIjtcblxudmFyIGlkID0gMDtcblxuZXhwb3J0IGZ1bmN0aW9uIFRyYW5zaXRpb24oZ3JvdXBzLCBwYXJlbnRzLCBuYW1lLCBpZCkge1xuICB0aGlzLl9ncm91cHMgPSBncm91cHM7XG4gIHRoaXMuX3BhcmVudHMgPSBwYXJlbnRzO1xuICB0aGlzLl9uYW1lID0gbmFtZTtcbiAgdGhpcy5faWQgPSBpZDtcbn1cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gdHJhbnNpdGlvbihuYW1lKSB7XG4gIHJldHVybiBzZWxlY3Rpb24oKS50cmFuc2l0aW9uKG5hbWUpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gbmV3SWQoKSB7XG4gIHJldHVybiArK2lkO1xufVxuXG52YXIgc2VsZWN0aW9uX3Byb3RvdHlwZSA9IHNlbGVjdGlvbi5wcm90b3R5cGU7XG5cblRyYW5zaXRpb24ucHJvdG90eXBlID0gdHJhbnNpdGlvbi5wcm90b3R5cGUgPSB7XG4gIGNvbnN0cnVjdG9yOiBUcmFuc2l0aW9uLFxuICBzZWxlY3Q6IHRyYW5zaXRpb25fc2VsZWN0LFxuICBzZWxlY3RBbGw6IHRyYW5zaXRpb25fc2VsZWN0QWxsLFxuICBzZWxlY3RDaGlsZDogc2VsZWN0aW9uX3Byb3RvdHlwZS5zZWxlY3RDaGlsZCxcbiAgc2VsZWN0Q2hpbGRyZW46IHNlbGVjdGlvbl9wcm90b3R5cGUuc2VsZWN0Q2hpbGRyZW4sXG4gIGZpbHRlcjogdHJhbnNpdGlvbl9maWx0ZXIsXG4gIG1lcmdlOiB0cmFuc2l0aW9uX21lcmdlLFxuICBzZWxlY3Rpb246IHRyYW5zaXRpb25fc2VsZWN0aW9uLFxuICB0cmFuc2l0aW9uOiB0cmFuc2l0aW9uX3RyYW5zaXRpb24sXG4gIGNhbGw6IHNlbGVjdGlvbl9wcm90b3R5cGUuY2FsbCxcbiAgbm9kZXM6IHNlbGVjdGlvbl9wcm90b3R5cGUubm9kZXMsXG4gIG5vZGU6IHNlbGVjdGlvbl9wcm90b3R5cGUubm9kZSxcbiAgc2l6ZTogc2VsZWN0aW9uX3Byb3RvdHlwZS5zaXplLFxuICBlbXB0eTogc2VsZWN0aW9uX3Byb3RvdHlwZS5lbXB0eSxcbiAgZWFjaDogc2VsZWN0aW9uX3Byb3RvdHlwZS5lYWNoLFxuICBvbjogdHJhbnNpdGlvbl9vbixcbiAgYXR0cjogdHJhbnNpdGlvbl9hdHRyLFxuICBhdHRyVHdlZW46IHRyYW5zaXRpb25fYXR0clR3ZWVuLFxuICBzdHlsZTogdHJhbnNpdGlvbl9zdHlsZSxcbiAgc3R5bGVUd2VlbjogdHJhbnNpdGlvbl9zdHlsZVR3ZWVuLFxuICB0ZXh0OiB0cmFuc2l0aW9uX3RleHQsXG4gIHRleHRUd2VlbjogdHJhbnNpdGlvbl90ZXh0VHdlZW4sXG4gIHJlbW92ZTogdHJhbnNpdGlvbl9yZW1vdmUsXG4gIHR3ZWVuOiB0cmFuc2l0aW9uX3R3ZWVuLFxuICBkZWxheTogdHJhbnNpdGlvbl9kZWxheSxcbiAgZHVyYXRpb246IHRyYW5zaXRpb25fZHVyYXRpb24sXG4gIGVhc2U6IHRyYW5zaXRpb25fZWFzZSxcbiAgZWFzZVZhcnlpbmc6IHRyYW5zaXRpb25fZWFzZVZhcnlpbmcsXG4gIGVuZDogdHJhbnNpdGlvbl9lbmQsXG4gIFtTeW1ib2wuaXRlcmF0b3JdOiBzZWxlY3Rpb25fcHJvdG90eXBlW1N5bWJvbC5pdGVyYXRvcl1cbn07XG4iLCJpbXBvcnQge3NlbGVjdG9yfSBmcm9tIFwiZDMtc2VsZWN0aW9uXCI7XG5pbXBvcnQge1RyYW5zaXRpb259IGZyb20gXCIuL2luZGV4LmpzXCI7XG5pbXBvcnQgc2NoZWR1bGUsIHtnZXR9IGZyb20gXCIuL3NjaGVkdWxlLmpzXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKHNlbGVjdCkge1xuICB2YXIgbmFtZSA9IHRoaXMuX25hbWUsXG4gICAgICBpZCA9IHRoaXMuX2lkO1xuXG4gIGlmICh0eXBlb2Ygc2VsZWN0ICE9PSBcImZ1bmN0aW9uXCIpIHNlbGVjdCA9IHNlbGVjdG9yKHNlbGVjdCk7XG5cbiAgZm9yICh2YXIgZ3JvdXBzID0gdGhpcy5fZ3JvdXBzLCBtID0gZ3JvdXBzLmxlbmd0aCwgc3ViZ3JvdXBzID0gbmV3IEFycmF5KG0pLCBqID0gMDsgaiA8IG07ICsraikge1xuICAgIGZvciAodmFyIGdyb3VwID0gZ3JvdXBzW2pdLCBuID0gZ3JvdXAubGVuZ3RoLCBzdWJncm91cCA9IHN1Ymdyb3Vwc1tqXSA9IG5ldyBBcnJheShuKSwgbm9kZSwgc3Vibm9kZSwgaSA9IDA7IGkgPCBuOyArK2kpIHtcbiAgICAgIGlmICgobm9kZSA9IGdyb3VwW2ldKSAmJiAoc3Vibm9kZSA9IHNlbGVjdC5jYWxsKG5vZGUsIG5vZGUuX19kYXRhX18sIGksIGdyb3VwKSkpIHtcbiAgICAgICAgaWYgKFwiX19kYXRhX19cIiBpbiBub2RlKSBzdWJub2RlLl9fZGF0YV9fID0gbm9kZS5fX2RhdGFfXztcbiAgICAgICAgc3ViZ3JvdXBbaV0gPSBzdWJub2RlO1xuICAgICAgICBzY2hlZHVsZShzdWJncm91cFtpXSwgbmFtZSwgaWQsIGksIHN1Ymdyb3VwLCBnZXQobm9kZSwgaWQpKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICByZXR1cm4gbmV3IFRyYW5zaXRpb24oc3ViZ3JvdXBzLCB0aGlzLl9wYXJlbnRzLCBuYW1lLCBpZCk7XG59XG4iLCJpbXBvcnQge3NlbGVjdG9yQWxsfSBmcm9tIFwiZDMtc2VsZWN0aW9uXCI7XG5pbXBvcnQge1RyYW5zaXRpb259IGZyb20gXCIuL2luZGV4LmpzXCI7XG5pbXBvcnQgc2NoZWR1bGUsIHtnZXR9IGZyb20gXCIuL3NjaGVkdWxlLmpzXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKHNlbGVjdCkge1xuICB2YXIgbmFtZSA9IHRoaXMuX25hbWUsXG4gICAgICBpZCA9IHRoaXMuX2lkO1xuXG4gIGlmICh0eXBlb2Ygc2VsZWN0ICE9PSBcImZ1bmN0aW9uXCIpIHNlbGVjdCA9IHNlbGVjdG9yQWxsKHNlbGVjdCk7XG5cbiAgZm9yICh2YXIgZ3JvdXBzID0gdGhpcy5fZ3JvdXBzLCBtID0gZ3JvdXBzLmxlbmd0aCwgc3ViZ3JvdXBzID0gW10sIHBhcmVudHMgPSBbXSwgaiA9IDA7IGogPCBtOyArK2opIHtcbiAgICBmb3IgKHZhciBncm91cCA9IGdyb3Vwc1tqXSwgbiA9IGdyb3VwLmxlbmd0aCwgbm9kZSwgaSA9IDA7IGkgPCBuOyArK2kpIHtcbiAgICAgIGlmIChub2RlID0gZ3JvdXBbaV0pIHtcbiAgICAgICAgZm9yICh2YXIgY2hpbGRyZW4gPSBzZWxlY3QuY2FsbChub2RlLCBub2RlLl9fZGF0YV9fLCBpLCBncm91cCksIGNoaWxkLCBpbmhlcml0ID0gZ2V0KG5vZGUsIGlkKSwgayA9IDAsIGwgPSBjaGlsZHJlbi5sZW5ndGg7IGsgPCBsOyArK2spIHtcbiAgICAgICAgICBpZiAoY2hpbGQgPSBjaGlsZHJlbltrXSkge1xuICAgICAgICAgICAgc2NoZWR1bGUoY2hpbGQsIG5hbWUsIGlkLCBrLCBjaGlsZHJlbiwgaW5oZXJpdCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHN1Ymdyb3Vwcy5wdXNoKGNoaWxkcmVuKTtcbiAgICAgICAgcGFyZW50cy5wdXNoKG5vZGUpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiBuZXcgVHJhbnNpdGlvbihzdWJncm91cHMsIHBhcmVudHMsIG5hbWUsIGlkKTtcbn1cbiIsImltcG9ydCB7bWF0Y2hlcn0gZnJvbSBcImQzLXNlbGVjdGlvblwiO1xuaW1wb3J0IHtUcmFuc2l0aW9ufSBmcm9tIFwiLi9pbmRleC5qc1wiO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbihtYXRjaCkge1xuICBpZiAodHlwZW9mIG1hdGNoICE9PSBcImZ1bmN0aW9uXCIpIG1hdGNoID0gbWF0Y2hlcihtYXRjaCk7XG5cbiAgZm9yICh2YXIgZ3JvdXBzID0gdGhpcy5fZ3JvdXBzLCBtID0gZ3JvdXBzLmxlbmd0aCwgc3ViZ3JvdXBzID0gbmV3IEFycmF5KG0pLCBqID0gMDsgaiA8IG07ICsraikge1xuICAgIGZvciAodmFyIGdyb3VwID0gZ3JvdXBzW2pdLCBuID0gZ3JvdXAubGVuZ3RoLCBzdWJncm91cCA9IHN1Ymdyb3Vwc1tqXSA9IFtdLCBub2RlLCBpID0gMDsgaSA8IG47ICsraSkge1xuICAgICAgaWYgKChub2RlID0gZ3JvdXBbaV0pICYmIG1hdGNoLmNhbGwobm9kZSwgbm9kZS5fX2RhdGFfXywgaSwgZ3JvdXApKSB7XG4gICAgICAgIHN1Ymdyb3VwLnB1c2gobm9kZSk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIG5ldyBUcmFuc2l0aW9uKHN1Ymdyb3VwcywgdGhpcy5fcGFyZW50cywgdGhpcy5fbmFtZSwgdGhpcy5faWQpO1xufVxuIiwiaW1wb3J0IHtUcmFuc2l0aW9ufSBmcm9tIFwiLi9pbmRleC5qc1wiO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbih0cmFuc2l0aW9uKSB7XG4gIGlmICh0cmFuc2l0aW9uLl9pZCAhPT0gdGhpcy5faWQpIHRocm93IG5ldyBFcnJvcjtcblxuICBmb3IgKHZhciBncm91cHMwID0gdGhpcy5fZ3JvdXBzLCBncm91cHMxID0gdHJhbnNpdGlvbi5fZ3JvdXBzLCBtMCA9IGdyb3VwczAubGVuZ3RoLCBtMSA9IGdyb3VwczEubGVuZ3RoLCBtID0gTWF0aC5taW4obTAsIG0xKSwgbWVyZ2VzID0gbmV3IEFycmF5KG0wKSwgaiA9IDA7IGogPCBtOyArK2opIHtcbiAgICBmb3IgKHZhciBncm91cDAgPSBncm91cHMwW2pdLCBncm91cDEgPSBncm91cHMxW2pdLCBuID0gZ3JvdXAwLmxlbmd0aCwgbWVyZ2UgPSBtZXJnZXNbal0gPSBuZXcgQXJyYXkobiksIG5vZGUsIGkgPSAwOyBpIDwgbjsgKytpKSB7XG4gICAgICBpZiAobm9kZSA9IGdyb3VwMFtpXSB8fCBncm91cDFbaV0pIHtcbiAgICAgICAgbWVyZ2VbaV0gPSBub2RlO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGZvciAoOyBqIDwgbTA7ICsraikge1xuICAgIG1lcmdlc1tqXSA9IGdyb3VwczBbal07XG4gIH1cblxuICByZXR1cm4gbmV3IFRyYW5zaXRpb24obWVyZ2VzLCB0aGlzLl9wYXJlbnRzLCB0aGlzLl9uYW1lLCB0aGlzLl9pZCk7XG59XG4iLCJpbXBvcnQge1RyYW5zaXRpb24sIG5ld0lkfSBmcm9tIFwiLi9pbmRleC5qc1wiO1xuaW1wb3J0IHNjaGVkdWxlLCB7Z2V0fSBmcm9tIFwiLi9zY2hlZHVsZS5qc1wiO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbigpIHtcbiAgdmFyIG5hbWUgPSB0aGlzLl9uYW1lLFxuICAgICAgaWQwID0gdGhpcy5faWQsXG4gICAgICBpZDEgPSBuZXdJZCgpO1xuXG4gIGZvciAodmFyIGdyb3VwcyA9IHRoaXMuX2dyb3VwcywgbSA9IGdyb3Vwcy5sZW5ndGgsIGogPSAwOyBqIDwgbTsgKytqKSB7XG4gICAgZm9yICh2YXIgZ3JvdXAgPSBncm91cHNbal0sIG4gPSBncm91cC5sZW5ndGgsIG5vZGUsIGkgPSAwOyBpIDwgbjsgKytpKSB7XG4gICAgICBpZiAobm9kZSA9IGdyb3VwW2ldKSB7XG4gICAgICAgIHZhciBpbmhlcml0ID0gZ2V0KG5vZGUsIGlkMCk7XG4gICAgICAgIHNjaGVkdWxlKG5vZGUsIG5hbWUsIGlkMSwgaSwgZ3JvdXAsIHtcbiAgICAgICAgICB0aW1lOiBpbmhlcml0LnRpbWUgKyBpbmhlcml0LmRlbGF5ICsgaW5oZXJpdC5kdXJhdGlvbixcbiAgICAgICAgICBkZWxheTogMCxcbiAgICAgICAgICBkdXJhdGlvbjogaW5oZXJpdC5kdXJhdGlvbixcbiAgICAgICAgICBlYXNlOiBpbmhlcml0LmVhc2VcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIG5ldyBUcmFuc2l0aW9uKGdyb3VwcywgdGhpcy5fcGFyZW50cywgbmFtZSwgaWQxKTtcbn1cbiIsImltcG9ydCB7dHdlZW5WYWx1ZX0gZnJvbSBcIi4vdHdlZW4uanNcIjtcblxuZnVuY3Rpb24gdGV4dENvbnN0YW50KHZhbHVlKSB7XG4gIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICB0aGlzLnRleHRDb250ZW50ID0gdmFsdWU7XG4gIH07XG59XG5cbmZ1bmN0aW9uIHRleHRGdW5jdGlvbih2YWx1ZSkge1xuICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgdmFyIHZhbHVlMSA9IHZhbHVlKHRoaXMpO1xuICAgIHRoaXMudGV4dENvbnRlbnQgPSB2YWx1ZTEgPT0gbnVsbCA/IFwiXCIgOiB2YWx1ZTE7XG4gIH07XG59XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKHZhbHVlKSB7XG4gIHJldHVybiB0aGlzLnR3ZWVuKFwidGV4dFwiLCB0eXBlb2YgdmFsdWUgPT09IFwiZnVuY3Rpb25cIlxuICAgICAgPyB0ZXh0RnVuY3Rpb24odHdlZW5WYWx1ZSh0aGlzLCBcInRleHRcIiwgdmFsdWUpKVxuICAgICAgOiB0ZXh0Q29uc3RhbnQodmFsdWUgPT0gbnVsbCA/IFwiXCIgOiB2YWx1ZSArIFwiXCIpKTtcbn1cbiIsImZ1bmN0aW9uIHJlbW92ZUZ1bmN0aW9uKGlkKSB7XG4gIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICB2YXIgcGFyZW50ID0gdGhpcy5wYXJlbnROb2RlO1xuICAgIGZvciAodmFyIGkgaW4gdGhpcy5fX3RyYW5zaXRpb24pIGlmICgraSAhPT0gaWQpIHJldHVybjtcbiAgICBpZiAocGFyZW50KSBwYXJlbnQucmVtb3ZlQ2hpbGQodGhpcyk7XG4gIH07XG59XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKCkge1xuICByZXR1cm4gdGhpcy5vbihcImVuZC5yZW1vdmVcIiwgcmVtb3ZlRnVuY3Rpb24odGhpcy5faWQpKTtcbn1cbiIsImltcG9ydCB7c2V0fSBmcm9tIFwiLi9zY2hlZHVsZS5qc1wiO1xuXG5mdW5jdGlvbiBlYXNlVmFyeWluZyhpZCwgdmFsdWUpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgIHZhciB2ID0gdmFsdWUuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICBpZiAodHlwZW9mIHYgIT09IFwiZnVuY3Rpb25cIikgdGhyb3cgbmV3IEVycm9yO1xuICAgIHNldCh0aGlzLCBpZCkuZWFzZSA9IHY7XG4gIH07XG59XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKHZhbHVlKSB7XG4gIGlmICh0eXBlb2YgdmFsdWUgIT09IFwiZnVuY3Rpb25cIikgdGhyb3cgbmV3IEVycm9yO1xuICByZXR1cm4gdGhpcy5lYWNoKGVhc2VWYXJ5aW5nKHRoaXMuX2lkLCB2YWx1ZSkpO1xufVxuIiwiaW1wb3J0IHtzZXR9IGZyb20gXCIuL3NjaGVkdWxlLmpzXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKCkge1xuICB2YXIgb24wLCBvbjEsIHRoYXQgPSB0aGlzLCBpZCA9IHRoYXQuX2lkLCBzaXplID0gdGhhdC5zaXplKCk7XG4gIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcbiAgICB2YXIgY2FuY2VsID0ge3ZhbHVlOiByZWplY3R9LFxuICAgICAgICBlbmQgPSB7dmFsdWU6IGZ1bmN0aW9uKCkgeyBpZiAoLS1zaXplID09PSAwKSByZXNvbHZlKCk7IH19O1xuXG4gICAgdGhhdC5lYWNoKGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIHNjaGVkdWxlID0gc2V0KHRoaXMsIGlkKSxcbiAgICAgICAgICBvbiA9IHNjaGVkdWxlLm9uO1xuXG4gICAgICAvLyBJZiB0aGlzIG5vZGUgc2hhcmVkIGEgZGlzcGF0Y2ggd2l0aCB0aGUgcHJldmlvdXMgbm9kZSxcbiAgICAgIC8vIGp1c3QgYXNzaWduIHRoZSB1cGRhdGVkIHNoYXJlZCBkaXNwYXRjaCBhbmQgd2XigJlyZSBkb25lIVxuICAgICAgLy8gT3RoZXJ3aXNlLCBjb3B5LW9uLXdyaXRlLlxuICAgICAgaWYgKG9uICE9PSBvbjApIHtcbiAgICAgICAgb24xID0gKG9uMCA9IG9uKS5jb3B5KCk7XG4gICAgICAgIG9uMS5fLmNhbmNlbC5wdXNoKGNhbmNlbCk7XG4gICAgICAgIG9uMS5fLmludGVycnVwdC5wdXNoKGNhbmNlbCk7XG4gICAgICAgIG9uMS5fLmVuZC5wdXNoKGVuZCk7XG4gICAgICB9XG5cbiAgICAgIHNjaGVkdWxlLm9uID0gb24xO1xuICAgIH0pO1xuXG4gICAgLy8gVGhlIHNlbGVjdGlvbiB3YXMgZW1wdHksIHJlc29sdmUgZW5kIGltbWVkaWF0ZWx5XG4gICAgaWYgKHNpemUgPT09IDApIHJlc29sdmUoKTtcbiAgfSk7XG59XG4iLCJpbXBvcnQge1RyYW5zaXRpb24sIG5ld0lkfSBmcm9tIFwiLi4vdHJhbnNpdGlvbi9pbmRleC5qc1wiO1xuaW1wb3J0IHNjaGVkdWxlIGZyb20gXCIuLi90cmFuc2l0aW9uL3NjaGVkdWxlLmpzXCI7XG5pbXBvcnQge2Vhc2VDdWJpY0luT3V0fSBmcm9tIFwiZDMtZWFzZVwiO1xuaW1wb3J0IHtub3d9IGZyb20gXCJkMy10aW1lclwiO1xuXG52YXIgZGVmYXVsdFRpbWluZyA9IHtcbiAgdGltZTogbnVsbCwgLy8gU2V0IG9uIHVzZS5cbiAgZGVsYXk6IDAsXG4gIGR1cmF0aW9uOiAyNTAsXG4gIGVhc2U6IGVhc2VDdWJpY0luT3V0XG59O1xuXG5mdW5jdGlvbiBpbmhlcml0KG5vZGUsIGlkKSB7XG4gIHZhciB0aW1pbmc7XG4gIHdoaWxlICghKHRpbWluZyA9IG5vZGUuX190cmFuc2l0aW9uKSB8fCAhKHRpbWluZyA9IHRpbWluZ1tpZF0pKSB7XG4gICAgaWYgKCEobm9kZSA9IG5vZGUucGFyZW50Tm9kZSkpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgdHJhbnNpdGlvbiAke2lkfSBub3QgZm91bmRgKTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHRpbWluZztcbn1cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24obmFtZSkge1xuICB2YXIgaWQsXG4gICAgICB0aW1pbmc7XG5cbiAgaWYgKG5hbWUgaW5zdGFuY2VvZiBUcmFuc2l0aW9uKSB7XG4gICAgaWQgPSBuYW1lLl9pZCwgbmFtZSA9IG5hbWUuX25hbWU7XG4gIH0gZWxzZSB7XG4gICAgaWQgPSBuZXdJZCgpLCAodGltaW5nID0gZGVmYXVsdFRpbWluZykudGltZSA9IG5vdygpLCBuYW1lID0gbmFtZSA9PSBudWxsID8gbnVsbCA6IG5hbWUgKyBcIlwiO1xuICB9XG5cbiAgZm9yICh2YXIgZ3JvdXBzID0gdGhpcy5fZ3JvdXBzLCBtID0gZ3JvdXBzLmxlbmd0aCwgaiA9IDA7IGogPCBtOyArK2opIHtcbiAgICBmb3IgKHZhciBncm91cCA9IGdyb3Vwc1tqXSwgbiA9IGdyb3VwLmxlbmd0aCwgbm9kZSwgaSA9IDA7IGkgPCBuOyArK2kpIHtcbiAgICAgIGlmIChub2RlID0gZ3JvdXBbaV0pIHtcbiAgICAgICAgc2NoZWR1bGUobm9kZSwgbmFtZSwgaWQsIGksIGdyb3VwLCB0aW1pbmcgfHwgaW5oZXJpdChub2RlLCBpZCkpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiBuZXcgVHJhbnNpdGlvbihncm91cHMsIHRoaXMuX3BhcmVudHMsIG5hbWUsIGlkKTtcbn1cbiIsImV4cG9ydCBmdW5jdGlvbiBjdWJpY0luKHQpIHtcbiAgcmV0dXJuIHQgKiB0ICogdDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGN1YmljT3V0KHQpIHtcbiAgcmV0dXJuIC0tdCAqIHQgKiB0ICsgMTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGN1YmljSW5PdXQodCkge1xuICByZXR1cm4gKCh0ICo9IDIpIDw9IDEgPyB0ICogdCAqIHQgOiAodCAtPSAyKSAqIHQgKiB0ICsgMikgLyAyO1xufVxuIiwiaW1wb3J0IHtzZWxlY3Rpb259IGZyb20gXCJkMy1zZWxlY3Rpb25cIjtcbmltcG9ydCBzZWxlY3Rpb25faW50ZXJydXB0IGZyb20gXCIuL2ludGVycnVwdC5qc1wiO1xuaW1wb3J0IHNlbGVjdGlvbl90cmFuc2l0aW9uIGZyb20gXCIuL3RyYW5zaXRpb24uanNcIjtcblxuc2VsZWN0aW9uLnByb3RvdHlwZS5pbnRlcnJ1cHQgPSBzZWxlY3Rpb25faW50ZXJydXB0O1xuc2VsZWN0aW9uLnByb3RvdHlwZS50cmFuc2l0aW9uID0gc2VsZWN0aW9uX3RyYW5zaXRpb247XG4iLCJpbXBvcnQgaW50ZXJydXB0IGZyb20gXCIuLi9pbnRlcnJ1cHQuanNcIjtcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24obmFtZSkge1xuICByZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCkge1xuICAgIGludGVycnVwdCh0aGlzLCBuYW1lKTtcbiAgfSk7XG59XG4iLCJpbXBvcnQge1NUQVJUSU5HLCBFTkRJTkcsIEVOREVEfSBmcm9tIFwiLi90cmFuc2l0aW9uL3NjaGVkdWxlLmpzXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKG5vZGUsIG5hbWUpIHtcbiAgdmFyIHNjaGVkdWxlcyA9IG5vZGUuX190cmFuc2l0aW9uLFxuICAgICAgc2NoZWR1bGUsXG4gICAgICBhY3RpdmUsXG4gICAgICBlbXB0eSA9IHRydWUsXG4gICAgICBpO1xuXG4gIGlmICghc2NoZWR1bGVzKSByZXR1cm47XG5cbiAgbmFtZSA9IG5hbWUgPT0gbnVsbCA/IG51bGwgOiBuYW1lICsgXCJcIjtcblxuICBmb3IgKGkgaW4gc2NoZWR1bGVzKSB7XG4gICAgaWYgKChzY2hlZHVsZSA9IHNjaGVkdWxlc1tpXSkubmFtZSAhPT0gbmFtZSkgeyBlbXB0eSA9IGZhbHNlOyBjb250aW51ZTsgfVxuICAgIGFjdGl2ZSA9IHNjaGVkdWxlLnN0YXRlID4gU1RBUlRJTkcgJiYgc2NoZWR1bGUuc3RhdGUgPCBFTkRJTkc7XG4gICAgc2NoZWR1bGUuc3RhdGUgPSBFTkRFRDtcbiAgICBzY2hlZHVsZS50aW1lci5zdG9wKCk7XG4gICAgc2NoZWR1bGUub24uY2FsbChhY3RpdmUgPyBcImludGVycnVwdFwiIDogXCJjYW5jZWxcIiwgbm9kZSwgbm9kZS5fX2RhdGFfXywgc2NoZWR1bGUuaW5kZXgsIHNjaGVkdWxlLmdyb3VwKTtcbiAgICBkZWxldGUgc2NoZWR1bGVzW2ldO1xuICB9XG5cbiAgaWYgKGVtcHR5KSBkZWxldGUgbm9kZS5fX3RyYW5zaXRpb247XG59XG4iLCI8dGVtcGxhdGU+XG4gIDwhLS0gV2F2ZWZvcm0gZ29lcyBoZXJlIC0tPlxuICA8ZGl2IEBjbGljaz1cImNsaWNrXCI+XG4gICAgPHN2ZyByZWY9XCJzdmdcIiBzdHlsZT1cIi1ib3JkZXI6IDFweCBzb2xpZCByZWQ7IHdpZHRoOiAxMDAlOyBoZWlnaHQ6IDEwMCVcIj48L3N2Zz5cbiAgICA8ZGl2IHYtaWY9XCJzZWxlY3Rpb25cIlxuICAgICAgc3R5bGU9XCJwb3NpdGlvbjogYWJzb2x1dGU7IHRvcDogMHB4OyBoZWlnaHQ6IDEwMCU7IGxlZnQ6IDBweDsgbGVmdDogMHB4OyBiYWNrZ3JvdW5kLWNvbG9yOiAjZmZmYjsgcG9pbnRlci1ldmVudHM6IG5vbmU7IGJvcmRlci1sZWZ0OiAxcHggc29saWQgYmx1ZTsgYm9yZGVyLXJpZ2h0OiAxcHggc29saWQgYmx1ZVwiXG4gICAgICA6c3R5bGU9XCJ7IGxlZnQ6IChzZWxlY3Rpb24uc3RhcnQvZHVyYXRpb24gKiAxMDApICsgJyUnLCB3aWR0aDogKChzZWxlY3Rpb24uZW5kIC0gc2VsZWN0aW9uLnN0YXJ0KS9kdXJhdGlvbiAqIDEwMCkgKyAnJScgfVwiPjwvZGl2PlxuICAgIDwhLS0gPGRpdiB2LWZvcj1cIlwiIHJlZj1cImhpZ2hsaWdodHNcIj4gLS0+XG4gICAgPCEtLSA8L2Rpdj4gLS0+XG4gICAgPGRpdiBzdHlsZT1cInBvc2l0aW9uOiBhYnNvbHV0ZTsgdG9wOiAwcHg7IGhlaWdodDogMTAwJTsgd2lkdGg6IDBweDsgYm9yZGVyOiAxcHggc29saWQgcmVkOyBsZWZ0OiAwcHhcIiByZWY9XCJoZWFkXCIgOnN0eWxlPVwieyBsZWZ0OiAodGltZS9kdXJhdGlvbikgKiAxMDAgKyAnJScgfVwiPjwvZGl2PlxuXG5cbiAgPC9kaXY+XG48L3RlbXBsYXRlPlxuXG48c2NyaXB0PlxuaW1wb3J0ICogYXMgZDMgZnJvbSAnZDMnO1xuXG5leHBvcnQgZGVmYXVsdCB7XG4gIHByb3BzOiB7XG4gICAgbW9kZWxWYWx1ZTogW0ludDE2QXJyYXksIEludDMyQXJyYXksIEFycmF5XSxcbiAgICAvLyB0cmFuc2NyaXB0OiBPYmplY3QsXG4gICAgdGltZTogTnVtYmVyLFxuICAgIGR1cmF0aW9uOiBOdW1iZXIsXG4gICAgc2VsZWN0aW9uOiBPYmplY3QsXG4gIH0sXG5cbiAgZGF0YSgpIHtcbiAgICByZXR1cm4ge1xuICAgICAgd2F2ZWZvcm06IHVuZGVmaW5lZCxcbiAgICAgIHN2ZzogdW5kZWZpbmVkLFxuICAgICAgZGF0YTogdW5kZWZpbmVkLFxuICAgIH07XG4gIH0sXG5cbiAgLy8gZW1pdHM6IFsndXBkYXRlOnRpbWUnXSxcblxuICBhc3luYyBtb3VudGVkKCkge1xuICAgIHRoaXMuJG9wdGlvbnMud2F0Y2gubW9kZWxWYWx1ZS5jYWxsKHRoaXMsIHRoaXMubW9kZWxWYWx1ZSk7XG4gICAgLy8gdGVtcG9yYXJ5IHdvcmthcm91bmQgKHJlcXVpcmVzIHByb3BlciBkaW1lbnNpb24gY2hhbmdlIGRldGVjdGlvbik6XG4gICAgLy8gcmVndWxhcmx5IChlYWNoIDIgc2Vjb25kcyBvciBzbykgY2hlY2sgZHJhd2luZyBhcmVhIGRpbWVuc2lvbnMgYW5kIHJlZHJhdyB3YXZlZm9ybSBpZiBjaGFuZ2VkXG4gICAgdGhpcy5yZXNpemVDaGVja0ludGVydmFsID0gc2V0SW50ZXJ2YWwoKCkgPT4ge1xuICAgICAgaWYodGhpcy5jdXJyZW50V2lkdGggIT0gdW5kZWZpbmVkICYmIHRoaXMuY3VycmVudEhlaWdodCAhPSB1bmRlZmluZWQgJiYgdGhpcy4kcmVmcy5zdmcgJiZcbiAgICAgICAgKHRoaXMuY3VycmVudFdpZHRoICE9IHRoaXMuJHJlZnMuc3ZnLmNsaWVudFdpZHRoIHx8IHRoaXMuY3VycmVudEhlaWdodCAhPSB0aGlzLiRyZWZzLnN2Zy5jbGllbnRIZWlnaHQpKSB7XG4gICAgICAgIHRoaXMuZHJhdygpO1xuICAgICAgfVxuICAgIH0sIDIwMDApO1xuICB9LFxuXG4gIHdhdGNoOiB7XG4gICAgbW9kZWxWYWx1ZSh2YWx1ZSkge1xuICAgICAgaWYodmFsdWUpIHtcbiAgICAgICAgaWYodmFsdWUgaW5zdGFuY2VvZiBJbnQxNkFycmF5KSB7XG4gICAgICAgICAgY29uc3QgZGF0YSA9IG5ldyBGbG9hdDMyQXJyYXkodmFsdWUpXG4gICAgICAgICAgdGhpcy5kYXRhID0gZGF0YS5tYXAoeCA9PiB4IC8gMHg4MDAwKTtcbiAgICAgICAgfSBlbHNlIGlmKHZhbHVlIGluc3RhbmNlb2YgRmxvYXQzMkFycmF5KSB7XG4gICAgICAgICAgdGhpcy5kYXRhID0gdmFsdWU7XG4gICAgICAgIH0gZWxzZSBpZih2YWx1ZSBpbnN0YW5jZW9mIEFycmF5ICYmIHZhbHVlLmxlbmd0aCA+IDAgJiYgdHlwZW9mIHZhbHVlWzBdID09PSAnbnVtYmVyJyAmJiB2YWx1ZVswXSA+PSAtMSAmJiB2YWx1ZVswXSA8PSAxKSB7XG4gICAgICAgICAgdGhpcy5kYXRhID0gdmFsdWU7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhpcy5kYXRhID0gdW5kZWZpbmVkO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLmRhdGEgPSB1bmRlZmluZWQ7XG4gICAgICB9XG4gICAgICB0aGlzLmRyYXcoKTtcbiAgICAgIC8vIGlmKHZhbHVlKSB7XG4gICAgICAvLyAgIGNvbnN0IG1pbiA9IGQzLm1pbih2YWx1ZSk7XG4gICAgICAvLyAgIGNvbnN0IGRhdGEgPSB2YWx1ZS5tYXAoKHksIHgpID0+ICh7IHgsIHkgfSkpO1xuICAgICAgLy8gICBkYXRhLnB1c2goeyB4OiBkYXRhLmxlbmd0aCwgeTogbWluIH0pO1xuICAgICAgLy8gICBkYXRhLnVuc2hpZnQoeyB4OiAwLCB5OiBtaW4gfSk7XG4gICAgICAvLyAgIHRoaXMud2F2ZWZvcm0gPSBkYXRhO1xuICAgICAgLy9cbiAgICAgIC8vICAgLy8gdGhpcy5kcmF3KCk7XG4gICAgICAvLyB9XG4gICAgfSxcbiAgICB0aW1lKHZhbHVlKSB7XG4gICAgICAvLyBjb25zb2xlLmxvZygndGltZSB1cGRhdGVkIHRvJywgdGhpcy50aW1lKTtcbiAgICAgIC8vIGNvbnN0IHdpZHRoID0gdGhpcy4kcmVmcy5zdmcuY2xpZW50V2lkdGg7XG4gICAgICAvLyBjb25zb2xlLmRpcih0aGlzLiRyZWZzLmhlYWQpO1xuICAgICAgLy8gdGhpcy4kcmVmcy5oZWFkLnN0eWxlLmxlZnQgPSBgJHt2YWx1ZS8xMDAwL3RoaXMuZHVyYXRpb24gKiAxMDB9JWA7XG4gICAgfSxcbiAgfSxcblxuICBtZXRob2RzOiB7XG5cbiAgICBjbGljayhldmVudCkge1xuICAgICAgLy8gY29uc29sZS5sb2coZXZlbnQpXG4gICAgICBjb25zdCB4ID0gZXZlbnQub2Zmc2V0WDtcbiAgICAgIGNvbnN0IHdpZHRoID0gdGhpcy4kcmVmcy5zdmcuY2xpZW50V2lkdGg7XG4gICAgICBjb25zdCB0aW1lID0geCAvIHdpZHRoICogdGhpcy5kdXJhdGlvbjtcbiAgICAgIC8vIGNvbnNvbGUubG9nKCduZXcgdGltZScsIHRpbWUpXG4gICAgICB0aGlzLiRlbWl0KCd1cGRhdGU6dGltZScsIHRpbWUpO1xuICAgIH0sXG5cbiAgICBkcmF3KHdpZHRoID0gdW5kZWZpbmVkLCBoZWlnaHQgPSB1bmRlZmluZWQpIHtcbiAgICAgIGNvbnN0IGRhdGEgPSB0aGlzLmRhdGE7XG5cbiAgICAgIHdpZHRoID0gd2lkdGggfHwgdGhpcy4kcmVmcy5zdmcuY2xpZW50V2lkdGg7XG4gICAgICBoZWlnaHQgPSBoZWlnaHQgfHwgdGhpcy4kcmVmcy5zdmcuY2xpZW50SGVpZ2h0O1xuICAgICAgdGhpcy5jdXJyZW50V2lkdGggPSB3aWR0aDtcbiAgICAgIHRoaXMuY3VycmVudEhlaWdodCA9IGhlaWdodDtcblxuICAgICAgY29uc3Qgc3ZnID0gZDMuc2VsZWN0KHRoaXMuJHJlZnMuc3ZnKTtcblxuICAgICAgaWYoIWRhdGEpIHtcbiAgICAgICAgc3ZnLnNlbGVjdEFsbCgnKicpLnJlbW92ZSgpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cblxuICAgICAgc3ZnLmF0dHIoJ2hlaWdodCcsIGhlaWdodCkuYXR0cignd2lkdGgnLCB3aWR0aCk7XG5cbiAgICAgIC8vIGNvbnNvbGUubG9nKGhlaWdodCwgd2lkdGgpXG5cbiAgICAgIC8vIGh0dHA6Ly9qb2VzdWwubGkvdmFuLzIwMTQvMDMvZHJhd2luZy13YXZlZm9ybXMvXG4gICAgICBmdW5jdGlvbiBzdW1tYXJpemUoIGRhdGEsIHBpeGVscyApIHtcbiAgICAgICAgdmFyIHBpeGVsTGVuZ3RoID0gTWF0aC5yb3VuZChkYXRhLmxlbmd0aC9waXhlbHMpO1xuICAgICAgICB2YXIgdmFscyA9IFtdO1xuXG4gICAgICAgIC8vIEZvciBlYWNoIHBpeGVsIHdlIGRpc3BsYXlcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwaXhlbHM7IGkrKykge1xuICAgICAgICAgIHZhciBwb3NTdW0gPSAwLFxuICAgICAgICAgICAgbmVnU3VtID0gMDtcblxuICAgICAgICAgIC8vIEN5Y2xlIHRocm91Z2ggdGhlIGRhdGEtcG9pbnRzIHJlbGV2YW50IHRvIHRoZSBwaXhlbFxuICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgcGl4ZWxMZW5ndGg7IGorKykge1xuICAgICAgICAgICAgdmFyIHZhbCA9IGRhdGFbIGkgKiBwaXhlbExlbmd0aCArIGogXTtcbiAgICAgICAgICAgIGlmKGkgKiBwaXhlbExlbmd0aCArIGogPj0gZGF0YS5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIEtlZXAgdHJhY2sgb2YgcG9zaXRpdmUgYW5kIG5lZ2F0aXZlIHZhbHVlcyBzZXBhcmF0ZWx5XG4gICAgICAgICAgICBpZiAodmFsID4gMCkge1xuICAgICAgICAgICAgICBwb3NTdW0gKz0gdmFsO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgbmVnU3VtICs9IHZhbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgdmFscy5wdXNoKCBbIG5lZ1N1bSAvIHBpeGVsTGVuZ3RoLCBwb3NTdW0gLyBwaXhlbExlbmd0aCBdICk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHZhbHM7XG4gICAgICB9XG5cbiAgICAgIGZ1bmN0aW9uIHN1bW1hcml6ZUZhc3RlciggZGF0YSwgcGl4ZWxzICkge1xuICAgICAgICB2YXIgcGl4ZWxMZW5ndGggPSBNYXRoLnJvdW5kKGRhdGEubGVuZ3RoL3BpeGVscyk7XG4gICAgICAgIHZhciB2YWxzID0gW107XG5cbiAgICAgICAgLy8gRGVmaW5lIGEgbWluaW11bSBzYW1wbGUgc2l6ZSBwZXIgcGl4ZWxcbiAgICAgICAgdmFyIG1heFNhbXBsZVNpemUgPSAxMDAwO1xuICAgICAgICBjb25zdCBzYW1wbGVTaXplID0gTWF0aC5taW4ocGl4ZWxMZW5ndGgsIG1heFNhbXBsZVNpemUpO1xuXG5cbiAgICAgICAgLy8gRm9yIGVhY2ggcGl4ZWwgd2UgZGlzcGxheVxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHBpeGVsczsgaSsrKSB7XG4gICAgICAgICAgdmFyIHBvc1N1bSA9IDAsXG4gICAgICAgICAgICBuZWdTdW0gPSAwO1xuXG4gICAgICAgICAgLy8gQ3ljbGUgdGhyb3VnaCB0aGUgZGF0YS1wb2ludHMgcmVsZXZhbnQgdG8gdGhlIHBpeGVsXG4gICAgICAgICAgLy8gRG9uJ3QgY3ljbGUgdGhyb3VnaCBtb3JlIHRoYW4gc2FtcGxlU2l6ZSBmcmFtZXMgcGVyIHBpeGVsLlxuICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgc2FtcGxlU2l6ZTsgaisrKSB7XG4gICAgICAgICAgICBpZihpICogcGl4ZWxMZW5ndGggKyBqID49IGRhdGEubGVuZ3RoKSB7XG4gICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIHZhbCA9IGRhdGFbIGkgKiBwaXhlbExlbmd0aCArIGogXTtcblxuICAgICAgICAgICAgLy8gS2VlcCB0cmFjayBvZiBwb3NpdGl2ZSBhbmQgbmVnYXRpdmUgdmFsdWVzIHNlcGFyYXRlbHlcbiAgICAgICAgICAgIGlmICh2YWwgPiAwKSB7XG4gICAgICAgICAgICAgIHBvc1N1bSArPSB2YWw7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBuZWdTdW0gKz0gdmFsO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICB2YWxzLnB1c2goIFsgbmVnU3VtIC8gc2FtcGxlU2l6ZSwgcG9zU3VtIC8gc2FtcGxlU2l6ZSBdICk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHZhbHM7XG4gICAgICB9XG5cbiAgICAgIC8vIGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vYS8xMzQ0MDg0MlxuICAgICAgZnVuY3Rpb24gYXJyYXlNaW4oYXJyKSB7XG4gICAgICAgIHZhciBsZW4gPSBhcnIubGVuZ3RoLCBtaW4gPSBJbmZpbml0eTtcbiAgICAgICAgd2hpbGUgKGxlbi0tKSB7XG4gICAgICAgICAgaWYgKGFycltsZW5dIDwgbWluKSB7XG4gICAgICAgICAgICBtaW4gPSBhcnJbbGVuXTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG1pbjtcbiAgICAgIH07XG5cbiAgICAgIGZ1bmN0aW9uIGFycmF5TWF4KGFycikge1xuICAgICAgICB2YXIgbGVuID0gYXJyLmxlbmd0aCwgbWF4ID0gLUluZmluaXR5O1xuICAgICAgICB3aGlsZSAobGVuLS0pIHtcbiAgICAgICAgICBpZiAoYXJyW2xlbl0gPiBtYXgpIHtcbiAgICAgICAgICAgIG1heCA9IGFycltsZW5dO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbWF4O1xuICAgICAgfTtcblxuXG4gICAgICAvLyBsZXQgZGF0YSA9IG5ldyBGbG9hdDMyQXJyYXkodGhpcy5kYXRhKVxuICAgICAgLy8gZGF0YSA9IGRhdGEubWFwKHggPT4geCAvIDB4ODAwMCk7XG5cbiAgICAgIGNvbnN0IHN1bW1hcnkgPSBzdW1tYXJpemVGYXN0ZXIoZGF0YSwgMTIwMCk7XG5cbiAgICAgIGxldCBtZWFuID0gMDtcbiAgICAgIGZvcihjb25zdCBlbCBvZiBzdW1tYXJ5KSB7XG4gICAgICAgIG1lYW4gKz0gLWVsWzBdICsgZWxbMV07XG4gICAgICB9XG4gICAgICBtZWFuID0gbWVhbiAvICgyICogc3VtbWFyeS5sZW5ndGgpO1xuICAgICAgLy8gY29uc29sZS5sb2coYXJyYXlNYXgoZGF0YSkgLSBhcnJheU1pbihkYXRhKSlcbiAgICAgIC8vIGNvbnN0IG11bHRpcGxpZXIgPSAxMC8gKGFycmF5TWF4KGRhdGEpIC0gYXJyYXlNaW4oZGF0YSkpICogaGVpZ2h0Oy8vIC8gMjtcbiAgICAgIGNvbnN0IG11bHRpcGxpZXIgPSAwLjEgKiBoZWlnaHQgLyBtZWFuOyAgLy8gbWVhbiBhdCAxMCUgb2YgaGVpZ2h0XG4gICAgICBjb25zdCB3ID0gd2lkdGggLyBzdW1tYXJ5Lmxlbmd0aDtcbiAgICAgIHN2Z1xuICAgICAgICAuc2VsZWN0QWxsKCdyZWN0JylcbiAgICAgICAgLmRhdGEoIHN1bW1hcnkgKVxuICAgICAgICAgIC5hdHRyKCd4JywgZnVuY3Rpb24oZCwgaSkge1xuICAgICAgICAgICAgcmV0dXJuIGkgLyBzdW1tYXJ5Lmxlbmd0aCAqIHdpZHRoO1xuICAgICAgICAgIH0pXG4gICAgICAgICAgLmF0dHIoJ3knLCBmdW5jdGlvbihkLCBpKSB7XG4gICAgICAgICAgICByZXR1cm4gMC41ICogaGVpZ2h0IC0gKG11bHRpcGxpZXIgKiBkWzFdICk7XG4gICAgICAgICAgfSlcbiAgICAgICAgICAuYXR0cignd2lkdGgnLCB3KVxuICAgICAgICAgIC5hdHRyKCdoZWlnaHQnLCBmdW5jdGlvbihkKSB7XG4gICAgICAgICAgICByZXR1cm4gbXVsdGlwbGllciooZFsxXSAtIGRbMF0pO1xuICAgICAgICAgIH0pXG4gICAgICAgIC5lbnRlcigpXG4gICAgICAgICAgLmFwcGVuZCgncmVjdCcpXG4gICAgICAgICAgLnN0eWxlKCdzdHJva2UnLCAnIzM0MmE0MCcpXG4gICAgICAgICAgLnN0eWxlKCdzdHJva2Utd2lkdGgnLCAnMCcpXG4gICAgICAgICAgLnN0eWxlKCdmaWxsJywgJ3JnYmEoMCwwLDAsMC4zKScpXG4gICAgICAgICAgLmF0dHIoJ3gnLCBmdW5jdGlvbihkLCBpKSB7XG4gICAgICAgICAgICByZXR1cm4gaSAvIHN1bW1hcnkubGVuZ3RoICogd2lkdGg7XG4gICAgICAgICAgfSlcbiAgICAgICAgICAuYXR0cigneScsIGZ1bmN0aW9uKGQsIGkpIHtcbiAgICAgICAgICAgIHJldHVybiAwLjUgKiBoZWlnaHQgLSAobXVsdGlwbGllciAqIGRbMV0gKTtcbiAgICAgICAgICB9KVxuICAgICAgICAgIC5hdHRyKCd3aWR0aCcsIHcpXG4gICAgICAgICAgLmF0dHIoJ2hlaWdodCcsIGZ1bmN0aW9uKGQpIHtcbiAgICAgICAgICAgIHJldHVybiBtdWx0aXBsaWVyKihkWzFdIC0gZFswXSk7XG4gICAgICAgICAgfSlcbiAgICAgICAgLmV4aXQoKS5yZW1vdmUoKVxuICAgICAgO1xuICAgIH0sXG4gIH0sXG59O1xuPC9zY3JpcHQ+XG5cbjxzdHlsZSBzY29wZWQ+XG5zdmcge1xuICBjb2xvcjogd2hpdGU7XG59XG48L3N0eWxlPlxuIiwiaW1wb3J0IHtTZWxlY3Rpb24sIHJvb3R9IGZyb20gXCIuL3NlbGVjdGlvbi9pbmRleC5qc1wiO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbihzZWxlY3Rvcikge1xuICByZXR1cm4gdHlwZW9mIHNlbGVjdG9yID09PSBcInN0cmluZ1wiXG4gICAgICA/IG5ldyBTZWxlY3Rpb24oW1tkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHNlbGVjdG9yKV1dLCBbZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50XSlcbiAgICAgIDogbmV3IFNlbGVjdGlvbihbW3NlbGVjdG9yXV0sIHJvb3QpO1xufVxuIiwiXG5leHBvcnQgY2xhc3MgQXVkaW9GaWxlRGVjb2RlciB7XG5cbiAgY29uc3RydWN0b3IoY2IpIHtcbiAgICB0aGlzLmluaXQoY2IpO1xuICB9XG5cbiAgaW5pdChjYikge1xuICAgIHRoaXMuY2xvc2UoKTtcbiAgICB0aGlzLmNvbnRleHQgPSBuZXcgQXVkaW9Db250ZXh0KCk7XG4gICAgaWYoY2IpIHtcbiAgICAgIHRoaXMuY29udGV4dC5vbnN0YXRlY2hhbmdlID0gKCkgPT4geyBjYih0aGlzKTsgfTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5jb250ZXh0Lm9uc3RhdGVjaGFuZ2UgPSAoKSA9PiB7IGNiICYmIGNiIHx8IHRoaXMub25zdGF0ZWNoYW5nZSh0aGlzKTsgfTtcbiAgICB9XG4gIH1cblxuICBjbG9zZSgpIHtcbiAgICBpZih0aGlzLmNvbnRleHQpIHtcbiAgICAgIHRoaXMuY29udGV4dC5jbG9zZSgpO1xuICAgICAgdGhpcy5jb250ZXh0ID0gdW5kZWZpbmVkO1xuICAgIH1cbiAgfVxuXG4gIHJlc3VtZSgpIHtcbiAgICB0aGlzLmNvbnRleHQucmVzdW1lKCk7XG4gIH1cblxuICBnZXQgc3VzcGVuZGVkKCkge1xuICAgIHJldHVybiB0aGlzLmNvbnRleHQuc3RhdGUgPT09ICdzdXNwZW5kZWQnO1xuICB9XG5cbiAgb25zdGF0ZWNoYW5nZShkZWNvZGVyKSB7XG4gICAgY29uc29sZS5sb2coJ2F1ZGlvIGNvbnRleHQgc3RhdGUgY2hhbmdlZDonLCBkZWNvZGVyLmNvbnRleHQuc3RhdGUpO1xuICB9XG5cbiAgYXN5bmMgZGVjb2RlQXVkaW9GaWxlRGF0YShhcnJheUJ1ZmZlcikge1xuICAgIGNvbnN0IGJ1ZmZlciA9IGF3YWl0IHRoaXMuZGVjb2RlQXVkaW9GaWxlQnVmZmVyKGFycmF5QnVmZmVyKTtcblxuICAgIGNvbnN0IGRhdGEgPSB0aGlzLmJ1ZmZlckRhdGEoYnVmZmVyKTtcblxuICAgIHJldHVybiB7IGRhdGE6IHRoaXMuRmxvYXQzMkFycmF5VG9JbnQxNkFycmF5KGRhdGEpLCBzYW1wbGVSYXRlOiBidWZmZXIuc2FtcGxlUmF0ZSwgbGVuZ3RoOiBidWZmZXIubGVuZ3RoLCBkdXJhdGlvbjogYnVmZmVyLmR1cmF0aW9uLCBudW1iZXJPZkNoYW5uZWxzOiBidWZmZXIubnVtYmVyT2ZDaGFubmVscyB9O1xuICB9XG5cbiAgYXN5bmMgZmV0Y2hBbmREZWNvZGVBdWRpb0ZpbGUodXJsKSB7XG4gICAgY29uc3QgYnVmZmVyID0gYXdhaXQgdGhpcy5mZXRjaEF1ZGlvRmlsZUFuZERlY29kZSh1cmwpO1xuXG4gICAgY29uc3QgZGF0YSA9IHRoaXMuYnVmZmVyRGF0YShidWZmZXIpO1xuXG4gICAgcmV0dXJuIHsgZGF0YTogdGhpcy5GbG9hdDMyQXJyYXlUb0ludDE2QXJyYXkoZGF0YSksIHNhbXBsZVJhdGU6IGJ1ZmZlci5zYW1wbGVSYXRlLCBsZW5ndGg6IGJ1ZmZlci5sZW5ndGgsIGR1cmF0aW9uOiBidWZmZXIuZHVyYXRpb24sIG51bWJlck9mQ2hhbm5lbHM6IGJ1ZmZlci5udW1iZXJPZkNoYW5uZWxzIH07XG4gIH1cblxuICBhc3luYyBmZXRjaEF1ZGlvRmlsZUFuZERlY29kZSh1cmwpIHtcblxuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2godXJsKTtcblxuICAgIGNvbnN0IGJ1ZmZlciA9IGF3YWl0IHRoaXMuZGVjb2RlQXVkaW9GaWxlQnVmZmVyKGF3YWl0IHJlc3BvbnNlLmFycmF5QnVmZmVyKCkpO1xuXG4gICAgcmV0dXJuIGJ1ZmZlcjtcbiAgfVxuXG4gIGFzeW5jIGRlY29kZUF1ZGlvRmlsZUJ1ZmZlcihhcnJheUJ1ZmZlcikge1xuXG4gICAgLy8gY29uc3QgY29udGV4dCA9IG5ldyBBdWRpb0NvbnRleHQoKTtcbiAgICBjb25zdCBjb250ZXh0ID0gdGhpcy5jb250ZXh0O1xuICAgIC8vIGNvbnNvbGUubG9nKCdDVFggc3RhdGUnLCBjb250ZXh0LnN0YXRlKVxuICAgIC8vIGlmKGNvbnRleHQuc3RhdGUgPT09ICdzdXNwZW5kZWQnKSB7XG4gICAgLy8gICBjb25zb2xlLmxvZygnU1VTUEVOREVEJylcbiAgICAvLyB9XG5cbiAgICAvLyBUT0RPOiBhZGQgdHJ5IHt9IGNhdGNoIHt9XG5cbiAgICBjb25zdCBidWZmZXIgPSBhd2FpdCBjb250ZXh0LmRlY29kZUF1ZGlvRGF0YShhcnJheUJ1ZmZlcik7XG5cbiAgICByZXR1cm4gYnVmZmVyO1xuICB9XG5cbiAgRmxvYXQzMkFycmF5VG9JbnQxNkFycmF5KGZsb2F0QXJyYXkpIHtcbiAgICByZXR1cm4gSW50MTZBcnJheS5mcm9tKGZsb2F0QXJyYXkubWFwKHNhbXBsZSA9PiBzYW1wbGUgKiAweDgwMDApKTtcbiAgfVxuXG4gIGJ1ZmZlckRhdGEoYnVmZmVyLCB7IGNoYW5uZWwgPSAwIH0gPSB7fSkge1xuICAgIGNvbnN0IGRhdGEgPSBidWZmZXIuZ2V0Q2hhbm5lbERhdGEoY2hhbm5lbCk7XG4gICAgLy8gcmV0dXJuIEZsb2F0MzJBcnJheVRvSW50MTZBcnJheShkYXRhKTtcbiAgICByZXR1cm4gZGF0YTtcbiAgfVxufVxuIiwiPHRlbXBsYXRlPlxuICA8ZGl2IGNsYXNzPVwiZWRpdG9yLXdyYXBwZXJcIj5cblxuICAgIDxzbG90Pjwvc2xvdD5cblxuICAgIDxkaXYgdi1pZj1cInRoaXMuZWRpdGFibGVcIiBjbGFzcz1cImhlYWRlclwiPlxuICAgICAgPGRpdiBjbGFzcz1cImJ0bi1ncm91cCBtZS0yXCIgcm9sZT1cImdyb3VwXCI+XG4gICAgICAgICAgPGJ1dHRvbiBjbGFzcz1cImJ0biBidG4tb3V0bGluZS1wcmltYXJ5XCIgQGNsaWNrPVwic2F2ZSgpXCI+XG4gICAgICAgICAgICA8ZGl2IHYtaWY9XCJzYXZpbmdcIiBjbGFzcz1cInNwaW5uZXItYm9yZGVyIHNwaW5uZXItYm9yZGVyLXNtXCIgcm9sZT1cInN0YXR1c1wiPjwvZGl2PlxuICAgICAgICAgICAgPGkgdi1lbHNlLWlmPVwic3luY2VkXCIgIGNsYXNzPVwiYmkgYmktY2hlY2stbGdcIiB0aXRsZT1cIlNhZ2xhYsSBdHNcIj48L2k+XG4gICAgICAgICAgICA8aSB2LWVsc2UgY2xhc3M9XCJiaSBiaS1hc3Rlcmlza1wiIHRpdGxlPVwiSXIgbmVzYWdsYWLEgXRhcyBpem1hacWGYXNcIj48L2k+XG4gICAgICAgICAgICBTYWdsYWLEgXRcbiAgICAgICAgICA8L2J1dHRvbj5cblxuICAgICAgICA8YnV0dG9uIDpjbGFzcz1cImBidG4gJHthdXRvc2F2ZSA/ICdidG4tcHJpbWFyeScgOiAnYnRuLW91dGxpbmUtcHJpbWFyeSd9YFwiIEBjbGljaz1cInRvZ2dsZUF1dG9TYXZlXCIgdGl0bGU9XCJBdXRvbcSBdGlza2kgc2FnYWxhYsSBdCBrYXRyYXMgNXNcIj5cbiAgICAgICAgICA8aSA6Y2xhc3M9XCJgYmkgYmktdG9nZ2xlLSR7YXV0b3NhdmUgPyAnb24nIDogJ29mZid9YFwiPjwvaT4gNXNcbiAgICAgICAgPC9idXR0b24+XG5cbiAgICAgIDwvZGl2PlxuXG4gICAgICA8ZGl2IGNsYXNzPVwiYnRuLWdyb3VwIG1lLTJcIiByb2xlPVwiZ3JvdXBcIj5cbiAgICAgICAgPGJ1dHRvbiBjbGFzcz1cImJ0biBidG4tb3V0bGluZS1wcmltYXJ5XCIgQGNsaWNrPVwiJHJlZnMudHJhbnNjcmlwdC50b2dnbGVTdHlsZSgnYm9sZCcpXCI+PGkgY2xhc3M9XCJiaSBiaS10eXBlLWJvbGRcIj48L2k+PC9idXR0b24+XG4gICAgICAgIDxidXR0b24gY2xhc3M9XCJidG4gYnRuLW91dGxpbmUtcHJpbWFyeVwiIEBjbGljaz1cIiRyZWZzLnRyYW5zY3JpcHQudG9nZ2xlU3R5bGUoJ2l0YWxpYycpXCI+PGkgY2xhc3M9XCJiaSBiaS10eXBlLWl0YWxpY1wiPjwvaT48L2J1dHRvbj5cbiAgICAgICAgPGJ1dHRvbiBjbGFzcz1cImJ0biBidG4tb3V0bGluZS1wcmltYXJ5XCIgQGNsaWNrPVwiJHJlZnMudHJhbnNjcmlwdC50b2dnbGVTdHlsZSgndW5kZXJsaW5lJylcIj48aSBjbGFzcz1cImJpIGJpLXR5cGUtdW5kZXJsaW5lXCI+PC9pPjwvYnV0dG9uPlxuICAgICAgICA8YnV0dG9uIGNsYXNzPVwiYnRuIGJ0bi1vdXRsaW5lLXByaW1hcnlcIiBAY2xpY2s9XCIkcmVmcy50cmFuc2NyaXB0LnRvZ2dsZVN0eWxlKCdzdXBlcnNjcmlwdCcpXCI+PGkgY2xhc3M9XCJiaVwiPng8c3VwPjI8L3N1cD48L2k+PC9idXR0b24+XG4gICAgICAgIDxidXR0b24gY2xhc3M9XCJidG4gYnRuLW91dGxpbmUtcHJpbWFyeVwiIEBjbGljaz1cIiRyZWZzLnRyYW5zY3JpcHQudG9nZ2xlU3R5bGUoJ3N1YnNjcmlwdCcpXCI+PGkgY2xhc3M9XCJiaVwiPng8c3ViPjI8L3N1Yj48L2k+PC9idXR0b24+XG4gICAgICAgIDxidXR0b24gY2xhc3M9XCJidG4gYnRuLW91dGxpbmUtcHJpbWFyeVwiIEBjbGljaz1cIiRyZWZzLnRyYW5zY3JpcHQudG9nZ2xlQnVsbGV0KClcIj48aSBjbGFzcz1cImJpIGJpLWxpc3QtdWxcIj48L2k+PC9idXR0b24+XG4gICAgICA8L2Rpdj5cbjwhLS0gICAgICA8ZGl2IGNsYXNzPVwiYnRuLWdyb3VwIG1lLTJcIiByb2xlPVwiZ3JvdXBcIj4tLT5cbjwhLS0gICAgICAgIDxidXR0b24gY2xhc3M9XCJidG4gYnRuLW91dGxpbmUtcHJpbWFyeVwiIEBjbGljaz1cIiRyZWZzLnRyYW5zY3JpcHQuZXhwb3J0V29yZCgpXCI+PGkgY2xhc3M9XCJiaSBiaS1maWxlLXdvcmRcIj48L2k+IGRvYzwvYnV0dG9uPi0tPlxuPCEtLSAgICAgICAgPGJ1dHRvbiBjbGFzcz1cImJ0biBidG4tb3V0bGluZS1wcmltYXJ5XCIgQGNsaWNrPVwiJHJlZnMudHJhbnNjcmlwdC5kb3dubG9hZCgnZXhwb3J0Lmpzb24nLCBKU09OLnN0cmluZ2lmeSh0cmFuc2NyaXB0LCBudWxsLCAnICAnKSwgJ2FwcGxpY2F0aW9uL2pzb24nKVwiPjxpIGNsYXNzPVwiYmkgYmktY2xvdWQtZG93bmxvYWRcIj48L2k+IGpzb248L2J1dHRvbj4tLT5cbjwhLS0gICAgICA8L2Rpdj4tLT5cbiAgICA8L2Rpdj5cblxuICAgIDxUcmFuc2NyaXB0RWRpdG9yIGNsYXNzPVwibWFpbiB0cmFuc2NyaXB0LWVkaXRvclwiXG4gICAgICByZWY9XCJ0cmFuc2NyaXB0XCIgdi1tb2RlbD1cInRyYW5zY3JpcHRcIiBAdXBkYXRlOm1vZGVsVmFsdWU9XCJ0cmFuc2NyaXB0VXBkYXRlZFwiXG4gICAgICA6dGltZT1cInBvc2l0aW9uXCIgQHVwZGF0ZTp0aW1lPVwic2V0UG9zaXRpb25cIiBAc2VsZWN0ZWQ9XCJzZWxlY3RlZCA9ICRldmVudFwiIDplZGl0YWJsZT1cImVkaXRhYmxlXCJcbiAgICAgIDpzaG93LWNvbmZpZGVuY2U9XCJ0aGlzLnNob3dDb25maWRlbmNlXCJcbiAgICA+PC9UcmFuc2NyaXB0RWRpdG9yPlxuXG4gICAgPGRpdiBjbGFzcz1cImZvb3RlclwiPlxuICAgICAgPGRpdiBjbGFzcz1cIm1lZGlhLXBhbmVsXCIgOmNsYXNzPVwieyB2aWRlbzogaXNWaWRlbyAmJiBwcmV2aWV3VmlkZW8gfVwiPlxuXG4gICAgICAgIDwhLS0gPGRpdj4gLS0+XG4gICAgICAgICAgPHZpZGVvIHBsYXlzaW5saW5lXG4gICAgICAgICAgICA6c3JjPVwiX3VybFwiIHJlZj1cInZpZGVvXCIgQHRpbWV1cGRhdGU9XCJ0aW1lVXBkYXRlXCIgQGxvYWRlZGRhdGE9XCJvbkRhdGFMb2FkZWRcIiBAbG9hZHN0YXJ0PVwib25EYXRhTG9hZGVkXCIgQGVtcHRpZWQ9XCJvbkVtcHR5XCIgQGR1cmF0aW9uY2hhbmdlPVwiZHVyYXRpb25DaGFuZ2VkXCJcbiAgICAgICAgICAgIEBwbGF5PVwib25QbGF5XCIgQHBhdXNlPVwib25QYXVzZVwiIEBlbmRlZD1cIm9uRW5kZWRcIj48L3ZpZGVvPlxuICAgICAgICA8IS0tIDwvZGl2PiAtLT5cblxuICAgICAgICA8ZGl2IGNsYXNzPVwid2F2ZWZvcm0tYW5kLWJ1dHRvbnNcIj5cblxuICAgICAgICAgIDxkaXY+XG4gICAgICAgICAgICA8V2F2ZWZvcm0gY2xhc3M9XCJ3YXZlZm9ybVwiIHYtaWY9XCJfd2F2ZWZvcm0gIT0gdW5kZWZpbmVkXCJcbiAgICAgICAgICAgICAgdi1tb2RlbD1cIl93YXZlZm9ybVwiIHYtbW9kZWw6dGltZT1cInBvc2l0aW9uXCIgQHVwZGF0ZTp0aW1lPVwic2V0UG9zaXRpb25cIiA6ZHVyYXRpb249XCJfZHVyYXRpb25cIiA6c2VsZWN0aW9uPVwic2VsZWN0ZWRcIj48L1dhdmVmb3JtPlxuXG4gICAgICAgICAgICA8IS0tXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwid2F2ZWZvcm0tbG9hZGluZ1wiIHYtZWxzZS1pZj1cImF1ZGlvRGVjb2RpbmdTdXNwZW5kZWRcIj5cbiAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz1cImJ0biBidG4tcHJpbWFyeVwiIEBjbGljaz1cImRlY29kZXIucmVzdW1lKClcIj5Mb2FkPC9idXR0b24+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIC0tPlxuXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwid2F2ZWZvcm0tbG9hZGluZ1wiIHYtZWxzZT5cbiAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInRleHQtY2VudGVyXCIgc3R5bGU9XCJwb3NpdGlvbjogcmVsYXRpdmU7IHRvcDogY2FsYyg1MCUgLSAxcmVtKVwiPlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJzcGlubmVyLWdyb3dcIiByb2xlPVwic3RhdHVzXCI+XG4gICAgICAgICAgICAgICAgICA8IS0tIDxzcGFuIGNsYXNzPVwidmlzdWFsbHktaGlkZGVuXCI+TG9hZGluZy4uLjwvc3Bhbj4gLS0+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgPGRpdiBzdHlsZT1cInBvc2l0aW9uOiByZWxhdGl2ZTsgZGlzcGxheTogaW5saW5lLWJsb2NrOyB0b3A6IC0wLjVyZW07IGxlZnQ6IDAuNXJlbVwiPlxuICAgICAgICAgICAgICAgICAgTG9hZGluZy4uLlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDwvZGl2PlxuXG4gICAgICAgICAgPGRpdiBjbGFzcz1cImNvbnRyb2xzXCI+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwiYnRuLWdyb3VwIHBlLTJcIiByb2xlPVwiZ3JvdXBcIiB2LWlmPVwibG9hZGVkXCI+XG4gICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9XCJidG4gYnRuLXByaW1hcnlcIiBAY2xpY2s9XCIkcmVmcy52aWRlby5wbGF5KClcIiB2LWlmPVwiIXBsYXlpbmdcIj48aSBjbGFzcz1cImJpIGJpLXBsYXktZmlsbFwiPjwvaT48L2J1dHRvbj5cbiAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz1cImJ0biBidG4tcHJpbWFyeVwiIEBjbGljaz1cIiRyZWZzLnZpZGVvLnBhdXNlKClcIiB2LWVsc2U+PGkgY2xhc3M9XCJiaSBiaS1wYXVzZS1maWxsXCI+PC9pPjwvYnV0dG9uPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8c3BhbiBzdHlsZT1cImZvbnQtdmFyaWFudC1udW1lcmljOiB0YWJ1bGFyLW51bXM7XCI+e3ttc1RvVGltZShwb3NpdGlvbil9fSAvIHt7IG1zVG9UaW1lKHZpZGVvX2R1cmF0aW9uKSB9fTwvc3Bhbj5cbiAgICAgICAgICA8L2Rpdj5cblxuICAgICAgICA8L2Rpdj5cblxuICAgICAgPC9kaXY+XG4gICAgPC9kaXY+XG4gIDwvZGl2PlxuPC90ZW1wbGF0ZT5cblxuXG48c2NyaXB0IGxhbmc9XCJ0c1wiPlxuaW1wb3J0IFRyYW5zY3JpcHRFZGl0b3IgZnJvbSAnLi9UcmFuc2NyaXB0RWRpdG9yLnZ1ZSc7XG5pbXBvcnQgV2F2ZWZvcm0gZnJvbSAnLi9XYXZlZm9ybS52dWUnO1xuaW1wb3J0IHttc1RvVGltZX0gZnJvbSAnLi91dGlscyc7XG5pbXBvcnQgeyBBdWRpb0ZpbGVEZWNvZGVyIH0gZnJvbSAnLi9hdWRpbyc7XG5cbmV4cG9ydCBkZWZhdWx0IHtcbiAgY29tcG9uZW50czoge1xuICAgIFRyYW5zY3JpcHRFZGl0b3IsXG4gICAgV2F2ZWZvcm0sXG4gIH0sXG4gIHByb3BzOiB7XG4gICAgdHJhbnNjcmlwdDogeyB0eXBlOiBPYmplY3QsIGRlZmF1bHQ6IHsgcGFyYWdyYXBoczoge30gfSB9LFxuICAgIGR1cmF0aW9uOiB7IHR5cGU6IE51bWJlciB9LFxuICAgIHVybDogeyB0eXBlOiBTdHJpbmcgfSxcbiAgICBuYW1lOiB7fSxcbiAgICB3YXZlZm9ybTogW0ludDE2QXJyYXksIEludDMyQXJyYXksIEFycmF5LCBTdHJpbmddLFxuICAgIHByZXZpZXdWaWRlbzogeyB0eXBlOiBCb29sZWFuLCBkZWZhdWx0OiB0cnVlIH0sXG4gICAgb25TYXZlOiB7IHR5cGU6IEZ1bmN0aW9uLCBkZWZhdWx0OiBhc3luYyAoKSA9PiBjb25zb2xlLmxvZygnb25TYXZlIG5vdCBpbXBsZW1lbnRlZCcpIH0sXG4gICAgZWRpdGFibGU6IHt0eXBlOiBCb29sZWFuLCBkZWZhdWx0OiB0cnVlfVxuICB9LFxuICBkYXRhKCkge1xuICAgIHJldHVybiB7XG4gICAgICBwb3NpdGlvbjogMCxcbiAgICAgIHNlbGVjdGVkOiB1bmRlZmluZWQsXG4gICAgICBwbGF5aW5nOiBmYWxzZSxcbiAgICAgIGxvYWRlZDogZmFsc2UsXG4gICAgICBpc1ZpZGVvOiBmYWxzZSxcblxuICAgICAgX3VybDogdW5kZWZpbmVkLFxuICAgICAgX2R1cmF0aW9uOiB1bmRlZmluZWQsXG4gICAgICBfd2F2ZWZvcm06IHVuZGVmaW5lZCxcbiAgICAgIHBlbmRpbmdfd2F2ZWZvcm06IHVuZGVmaW5lZCxcbiAgICAgIHBlbmRpbmdfZHVyYXRpb246IHVuZGVmaW5lZCxcbiAgICAgIHZpZGVvX2R1cmF0aW9uOiB1bmRlZmluZWQsXG5cbiAgICAgIHNhdmluZzogZmFsc2UsXG4gICAgICB2ZXJzaW9uOiAwLFxuICAgICAgbGFzdFNhdmVkVmVyc2lvbjogMCxcbiAgICAgIGF1dG9zYXZlOiBmYWxzZSxcblxuICAgICAgZGVjb2RlclN1c3BlbmRlZDogZmFsc2UsXG4gICAgICBkZWNvZGluZ0F1ZGlvOiBmYWxzZSxcbiAgICAgIHNob3dDb25maWRlbmNlOiBmYWxzZVxuICAgIH1cbiAgfSxcblxuICBhc3luYyBtb3VudGVkKCkge1xuICAgIHRoaXMuJG9wdGlvbnMud2F0Y2gud2F2ZWZvcm0uY2FsbCh0aGlzLCB0aGlzLndhdmVmb3JtKTtcbiAgICB3aW5kb3cuc2V0SW50ZXJ2YWwodGhpcy5zYXZlQXV0bywgNTAwMCk7XG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCB0aGlzLm9uR2xvYmFsS2V5ZG93bik7XG5cbiAgICB0aGlzLmRlY29kZXIgPSBuZXcgQXVkaW9GaWxlRGVjb2RlcigoZGVjb2RlcikgPT4geyB0aGlzLmRlY29kZXJTdXNwZW5kZWQgPSB0aGlzLmRlY29kZXIuc3VzcGVuZGVkOyBpZih0aGlzLmRlY29kZXIuc3VzcGVuZGVkKSB7IGNvbnNvbGUubG9nKCdhdWRpbyBkZWNvZGVyIHN1c3BlbmRlZCcpOyB9IH0pO1xuICAgIHRoaXMuZGVjb2RlclN1c3BlbmRlZCA9IHRoaXMuZGVjb2Rlci5zdXNwZW5kZWQ7XG4gICAgLy8gY29uc29sZS5sb2coJ2RlY29kZXIgc3VzcGVuZGVkIGFmdGVyIGluaXQ6JywgdGhpcy5kZWNvZGVyU3VzcGVuZGVkKTtcbiAgfSxcblxuICBiZWZvcmVVbm1vdW50KCkge1xuICAgIHdpbmRvdy5jbGVhckludGVydmFsKHRoaXMuc2F2ZUF1dG8pO1xuICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdrZXlkb3duJywgdGhpcy5vbkdsb2JhbEtleWRvd24pO1xuICB9LFxuXG4gIHdhdGNoOiB7XG4gICAgcG9zaXRpb24odmFsdWUpIHtcbiAgICAgIC8vIGNvbnNvbGUubG9nKCdwb3NpdGlvbiBjaGFuZ2VkOicsIHZhbHVlKTtcbiAgICB9LFxuICAgIHRyYW5zY3JpcHQ6IHtcbiAgICAgIGhhbmRsZXIodmFsdWUsIG9sZFZhbHVlKSB7XG4gICAgICAgIC8vIGlmICh0aGlzLnZlcnNpb24gPT0gMCAmJiAoIW9sZFZhbHVlIHx8IE9iamVjdC5rZXlzKG9sZFZhbHVlKS5sZW5ndGggPT09IDApKSB7XG4gICAgICAgIC8vICAgLy8gaWdub3JlIGluaXRpYWwgc2V0dXBcbiAgICAgICAgLy8gICByZXR1cm47XG4gICAgICAgIC8vIH1cbiAgICAgICAgLy8gdGhpcy52ZXJzaW9uICs9IDE7XG4gICAgICAgIC8vIGNvbnNvbGUubG9nKCduZXcnLCBKU09OLnN0cmluZ2lmeSh2YWx1ZSkpXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKCdvbGQnLCBKU09OLnN0cmluZ2lmeShvbGRWYWx1ZSkpXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKCd0cmFuc2NyaXB0IHVwZGF0ZWQnLCB0aGlzLnZlcnNpb24sIHZhbHVlKVxuICAgICAgICAvLyBjb25zb2xlLmxvZygndHJhbnNjcmlwdCB1cGRhdGVkJywgdGhpcy50cmFuc2NyaXB0KVxuICAgICAgfSxcbiAgICAgIGRlZXA6IHRydWUsXG4gICAgfSxcbiAgICBkdXJhdGlvbih2YWx1ZSkge1xuICAgICAgdGhpcy5fZHVyYXRpb24gPSB2YWx1ZTtcbiAgICB9LFxuICAgIHVybCh2YWx1ZSkge1xuICAgICAgdGhpcy5fdXJsID0gdmFsdWU7XG4gICAgfSxcbiAgICBhc3luYyB3YXZlZm9ybSh2YWx1ZSkge1xuICAgICAgaWYodHlwZW9mIHZhbHVlID09PSAnc3RyaW5nJykge1xuICAgICAgICBjb25zdCB7IGRhdGEsIGR1cmF0aW9uIH0gPSBhd2FpdCB0aGlzLmRlY29kZUF1ZGlvV2F2ZWZvcm0odmFsdWUpO1xuICAgICAgICB0aGlzLl93YXZlZm9ybSA9IGRhdGE7XG4gICAgICB9IGVsc2UgaWYodmFsdWUgaW5zdGFuY2VvZiBGaWxlKSB7XG4gICAgICAgIGNvbnN0IHsgZGF0YSwgZHVyYXRpb24gfSA9IGF3YWl0IHRoaXMuZGVjb2Rlci5kZWNvZGVBdWRpb0ZpbGVEYXRhKGF3YWl0IHZhbHVlLmFycmF5QnVmZmVyKCkpO1xuICAgICAgICB0aGlzLl93YXZlZm9ybSA9IGRhdGE7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLl93YXZlZm9ybSA9IHZhbHVlO1xuICAgICAgfVxuICAgIH0sXG4gIH0sXG5cbiAgY29tcHV0ZWQ6IHtcbiAgICBzeW5jZWQoKSB7XG4gICAgICByZXR1cm4gdGhpcy5sYXN0U2F2ZWRWZXJzaW9uID09PSB0aGlzLnZlcnNpb247XG4gICAgfVxuICB9LFxuXG4gIG1ldGhvZHM6IHtcbiAgICBtc1RvVGltZSxcblxuICAgIHRvZ2dsZUF1dG9TYXZlKCkge1xuICAgICAgdGhpcy5hdXRvc2F2ZSA9ICF0aGlzLmF1dG9zYXZlO1xuICAgIH0sXG5cbiAgICBhc3luYyBzYXZlKCkge1xuICAgICAgaWYgKHRoaXMub25TYXZlKSB7XG4gICAgICAgIGNvbnN0IHZlcnNpb24gPSB0aGlzLnZlcnNpb247XG4gICAgICAgIHRoaXMuc2F2aW5nID0gdHJ1ZTtcbiAgICAgICAgY29uc3QgciA9IGF3YWl0IHRoaXMub25TYXZlKHRoaXMudHJhbnNjcmlwdCk7XG4gICAgICAgIGNvbnNvbGUubG9nKCdzYXZlZCcsIHRoaXMudHJhbnNjcmlwdClcbiAgICAgICAgdGhpcy5sYXN0U2F2ZWRWZXJzaW9uID0gdmVyc2lvbjtcbiAgICAgICAgLy8gbWFrZSBzYXZpbmcgYSBsaXR0bGUgYml0IHNsb3dlclxuICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHt0aGlzLnNhdmluZyA9IGZhbHNlO30sIDEwMCk7XG4gICAgICB9XG4gICAgfSxcblxuICAgIHNhdmVBdXRvKCkge1xuICAgICAgaWYgKHRoaXMuYXV0b3NhdmUpIHtcbiAgICAgICAgdGhpcy5zYXZlKCk7XG4gICAgICB9XG4gICAgfSxcblxuICAgIGFzeW5jIGRlY29kZUF1ZGlvV2F2ZWZvcm0odXJsKSB7XG4gICAgICB0cnkge1xuICAgICAgICB0aGlzLmRlY29kaW5nQXVkaW8gPSB0cnVlO1xuICAgICAgICBpZih0aGlzLmRlY29kZXIuc3VzcGVuZGVkKSB7XG4gICAgICAgICAgYXdhaXQgdGhpcy5kZWNvZGVyLnJlc3VtZSgpO1xuICAgICAgICB9XG4gICAgICAgIGlmKHVybCBpbnN0YW5jZW9mIEZpbGUpIHtcbiAgICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5kZWNvZGVyLmRlY29kZUF1ZGlvRmlsZURhdGEoYXdhaXQgdXJsLmFycmF5QnVmZmVyKCkpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJldHVybiBhd2FpdCB0aGlzLmRlY29kZXIuZmV0Y2hBbmREZWNvZGVBdWRpb0ZpbGUodXJsKTtcbiAgICAgICAgfVxuICAgICAgfSBjYXRjaChlKSB7XG4gICAgICAgIHRocm93IGU7XG4gICAgICB9IGZpbmFsbHkge1xuICAgICAgICB0aGlzLmRlY29kaW5nQXVkaW8gPSBmYWxzZTtcbiAgICAgIH1cbiAgICB9LFxuXG4gICAgLy8gc2V0IGV2ZXJ5dGhpbmcgaW4gb25lIHNob3QgZm9yIHRoZSBiZXN0IHVzZXIgZXhwZXJpZW5jZVxuICAgIGFzeW5jIGxvYWQoeyB1cmwsIHdhdmVmb3JtLCBkdXJhdGlvbiB9KSB7XG4gICAgICBpZih0eXBlb2Ygd2F2ZWZvcm0gPT09ICdzdHJpbmcnIHx8IHdhdmVmb3JtIGluc3RhbmNlb2YgRmlsZSkge1xuICAgICAgICB0aGlzLnBlbmRpbmdfd2F2ZWZvcm0gPSAoYXN5bmMgKCkgPT4geyBjb25zdCB7IGRhdGEsIGR1cmF0aW9uIH0gPSBhd2FpdCB0aGlzLmRlY29kZUF1ZGlvV2F2ZWZvcm0od2F2ZWZvcm0pOyByZXR1cm4gZGF0YTsgfSkoKTtcbiAgICAgIH0gZWxzZSBpZih3YXZlZm9ybSA9PT0gbnVsbCkge1xuICAgICAgICB0aGlzLl93YXZlZm9ybSA9IFtdO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5wZW5kaW5nX3dhdmVmb3JtID0gKGFzeW5jICgpID0+IHdhdmVmb3JtKSgpO1xuICAgICAgfVxuICAgICAgaWYoZHVyYXRpb24pIHtcbiAgICAgICAgdGhpcy5wZW5kaW5nX2R1cmF0aW9uID0gZHVyYXRpb247XG4gICAgICB9XG4gICAgICB0aGlzLl91cmwgPSB1cmw7XG4gICAgICBpZighdXJsIHx8IHVybC5sZW5ndGggPT09IDApIHtcbiAgICAgICAgdGhpcy52aWRlb19kdXJhdGlvbiA9IHVuZGVmaW5lZDtcbiAgICAgIH1cbiAgICB9LFxuXG4gICAgd2F2ZWZvcm1Mb2FkaW5nKCkge1xuICAgICAgdGhpcy5fd2F2ZWZvcm0gPSB1bmRlZmluZWQ7XG4gICAgICB0aGlzLmxvYWRlZCA9IGZhbHNlO1xuICAgIH0sXG5cbiAgICBvblBsYXkoKSB7XG4gICAgICAvLyB0aGlzLnN0ZXAgPSB0aGlzLmR1cmF0aW9uIC8gdGhpcy4kcmVmcy53YXZlZm9ybS4kZWwucGFyZW50Tm9kZS5jbGllbnRXaWR0aDtcbiAgICAgIC8vIHRoaXMubmV4dENoZWNrcG9pbnQgPSB0aGlzLnBvc2l0aW9uO1xuICAgICAgdGhpcy5wbGF5aW5nID0gdHJ1ZTtcbiAgICAgIHRoaXMuYW5pbWF0aW9uRnJhbWVJRCA9IHJlcXVlc3RBbmltYXRpb25GcmFtZSh0aGlzLnVwZGF0ZVBvc2l0aW9uKTtcbiAgICB9LFxuXG4gICAgb25QYXVzZSgpIHtcbiAgICAgIHRoaXMucGxheWluZyA9IGZhbHNlO1xuICAgICAgaWYodGhpcy5hbmltYXRpb25GcmFtZUlEKSB7XG4gICAgICAgIGNhbmNlbEFuaW1hdGlvbkZyYW1lKHRoaXMuYW5pbWF0aW9uRnJhbWVJRCk7XG4gICAgICAgIHRoaXMuYW5pbWF0aW9uRnJhbWVJRCA9IHVuZGVmaW5lZDtcbiAgICAgIH1cbiAgICB9LFxuXG4gICAgb25FbmRlZCgpIHtcbiAgICAgIHRoaXMub25QYXVzZSgpO1xuICAgIH0sXG5cbiAgICB1cGRhdGVQb3NpdGlvbih0aW1lc3RhbXApIHtcbiAgICAgIHRoaXMucG9zaXRpb24gPSB0aGlzLiRyZWZzLnZpZGVvLmN1cnJlbnRUaW1lICogMTAwMDtcbiAgICAgIC8vIE5PVEU6IGluc3RlYWQgdGhlIGZvbGxvd2luZyBhcHByb2FjaCBtYXkgaGF2ZSBzb21lIGVmZmVjdCBvbiBsYXJnZXIgaW5wdXQgbWVkaWFcbiAgICAgIC8vIGNvbnN0IHBvc2l0aW9uID0gdGhpcy4kcmVmcy52aWRlby5jdXJyZW50VGltZSAqIDEwMDA7XG4gICAgICAvLyBpZihwb3NpdGlvbiA+PSB0aGlzLm5leHRDaGVja3BvaW50KSB7XG4gICAgICAvLyAgIHRoaXMucG9zaXRpb24gPSBwb3NpdGlvbjtcbiAgICAgIC8vICAgdGhpcy5uZXh0Q2hlY2twb2ludCA9IHBvc2l0aW9uICsgdGhpcy5zdGVwO1xuICAgICAgLy8gfVxuXG4gICAgICB0aGlzLmFuaW1hdGlvbkZyYW1lSUQgPSByZXF1ZXN0QW5pbWF0aW9uRnJhbWUodGhpcy51cGRhdGVQb3NpdGlvbik7XG4gICAgfSxcblxuICAgIGR1cmF0aW9uQ2hhbmdlZCgpIHtcbiAgICAgIGNvbnN0IHZpZGVvID0gdGhpcy4kcmVmcy52aWRlbztcbiAgICAgIHRoaXMuX2R1cmF0aW9uID0gdmlkZW8uZHVyYXRpb24gKiAxMDAwO1xuICAgICAgdGhpcy52aWRlb19kdXJhdGlvbiA9IHZpZGVvLmR1cmF0aW9uICogMTAwMDtcbiAgICB9LFxuXG4gICAgYXN5bmMgb25EYXRhTG9hZGVkKCkge1xuICAgICAgY29uc3QgdmlkZW8gPSB0aGlzLiRyZWZzLnZpZGVvO1xuICAgICAgaWYodmlkZW8pIHtcbiAgICAgICAgdGhpcy5pc1ZpZGVvID0gdmlkZW8udmlkZW9XaWR0aCA+IDAgJiYgdmlkZW8udmlkZW9IZWlnaHQgPiAwO1xuICAgICAgfVxuICAgICAgaWYodGhpcy5wZW5kaW5nX2R1cmF0aW9uKSB7XG4gICAgICAgIC8vIHRoaXMuX2R1cmF0aW9uID0gdGhpcy5wZW5kaW5nX2R1cmF0aW9uO1xuICAgICAgICB0aGlzLnBlbmRpbmdfZHVyYXRpb24gPSB1bmRlZmluZWQ7XG4gICAgICB9XG4gICAgICBpZih0aGlzLnBlbmRpbmdfd2F2ZWZvcm0pIHtcbiAgICAgICAgdGhpcy5fd2F2ZWZvcm0gPSBhd2FpdCB0aGlzLnBlbmRpbmdfd2F2ZWZvcm07XG4gICAgICAgIHRoaXMucGVuZGluZ193YXZlZm9ybSA9IHVuZGVmaW5lZDtcbiAgICAgIH1cbiAgICAgIHRoaXMubG9hZGVkID0gdHJ1ZTtcbiAgICB9LFxuXG4gICAgb25FbXB0eSgpIHtcbiAgICAgIHRoaXMubG9hZGVkID0gZmFsc2U7XG4gICAgICB0aGlzLmlzVmlkZW8gPSBmYWxzZTtcbiAgICB9LFxuXG4gICAgb25HbG9iYWxLZXlkb3duKGUpIHtcbiAgICAgIC8vIGN0cmwvY21kICsgc1xuICAgICAgaWYgKGUua2V5ID09PSAncycgJiYgKGUuY3RybEtleSA9PT0gdHJ1ZSB8fCBlLm1ldGFLZXkgPT09IHRydWUpKSB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKVxuICAgICAgICB0aGlzLnNhdmUoKTtcbiAgICAgIH1cblxuICAgICAgaWYoZS5jb2RlID09PSAnU3BhY2UnICYmIGUuY3RybEtleSA9PT0gdHJ1ZSB8fCBlLmNvZGUgPT0gJ0VzY2FwZScpIHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpXG4gICAgICAgIGlmKCF0aGlzLiRyZWZzLnZpZGVvLnBhdXNlZCkge1xuICAgICAgICAgIHRoaXMuJHJlZnMudmlkZW8ucGF1c2UoKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aGlzLiRyZWZzLnZpZGVvLnBsYXkoKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sXG5cbiAgICB0cmFuc2NyaXB0VXBkYXRlZCh2YWx1ZSkge1xuICAgICAgLy8gY29uc29sZS5sb2coJ3RyYW5zY3JpcHQgVVBEQVRFRCcsIHRoaXMudHJhbnNjcmlwdCwgdmFsdWUpXG4gICAgICB0aGlzLnZlcnNpb24gKz0gMTtcbiAgICB9LFxuXG4gICAgc2V0UG9zaXRpb24oZXZlbnQpIHtcbiAgICAgIC8vIGNvbnNvbGUubG9nKCdzZXQgcG9zaXRpb24nLCBldmVudCk7XG4gICAgICBpZihldmVudCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIC8vIHRoaXMucG9zaXRpb24gPSBldmVudDtcbiAgICAgIHRoaXMuJHJlZnMudmlkZW8uY3VycmVudFRpbWUgPSBldmVudCAvIDEwMDA7XG4gICAgfSxcblxuICAgIHRpbWVVcGRhdGUoZXZlbnQpIHtcbiAgICAgIC8vIGNvbnNvbGUubG9nKCd0aW1lIHVwZGF0ZWQnLCBldmVudCwgZXZlbnQudGltZVN0YW1wLCB0aGlzLiRyZWZzLnZpZGVvLmN1cnJlbnRUaW1lKTtcbiAgICAgIC8vIGNvbnNvbGUuZGlyKHRoaXMuJHJlZnMudmlkZW8pXG4gICAgICAvLyB0aGlzLnBvc2l0aW9uID0gZXZlbnQudGltZVN0YW1wO1xuICAgICAgdGhpcy5wb3NpdGlvbiA9IHRoaXMuJHJlZnMudmlkZW8uY3VycmVudFRpbWUgKiAxMDAwO1xuICAgIH0sXG5cbiAgICB0b2dnbGVTaG93Q29uZmlkZW5jZSgpIHtcbiAgICAgIHRoaXMuc2hvd0NvbmZpZGVuY2UgPSAhdGhpcy5zaG93Q29uZmlkZW5jZTtcbiAgICB9LFxuICB9LFxufTtcblxuPC9zY3JpcHQ+XG5cbjxzdHlsZSBzY29wZWQ+XG4uZWRpdG9yLXdyYXBwZXIge1xuICBkaXNwbGF5OiBmbGV4O1xuICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICAvKnRvcDogMTAwcHg7Ki9cbiAgcG9zaXRpb246IHJlbGF0aXZlO1xuICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gIHRvcDogMHB4O1xuICBib3R0b206IDBweDtcbiAgbGVmdDogMHB4O1xuICByaWdodDogMHB4O1xufVxuXG4uaGVhZGVyIHtcbn1cblxuLm1haW4ge1xuICBwYWRkaW5nOiAxMHB4O1xuICBiYWNrZ3JvdW5kOiAjZmZmO1xuICBmbGV4OiAxIDEgYXV0bztcbiAgb3ZlcmZsb3cteTogc2Nyb2xsO1xuICBtYXJnaW46IDVweCAwO1xufVxuXG4uZm9vdGVyIHtcbiAgYm90dG9tOiAwO1xuICBoZWlnaHQ6IDkwcHg7XG59XG5cbi5mb290ZXIgLmNvbnRyb2xzIHtcbiAgbWFyZ2luOiAzcHggMDtcbn1cbi5tZWRpYS1wYW5lbCB7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIGZsZXgtZGlyZWN0aW9uOiByb3c7XG4gIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgZmxleDogMSAxIGF1dG87XG59XG4ubWVkaWEtcGFuZWwgdmlkZW8ge1xuICBkaXNwbGF5OiBub25lO1xufVxuLm1lZGlhLXBhbmVsLnZpZGVvIHZpZGVvIHtcbiAgLypoZWlnaHQ6IDcwcHg7Ki9cbiAgaGVpZ2h0OiA5MHB4O1xuICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XG4gIG1hcmdpbi1yaWdodDogNnB4O1xufVxuLm1lZGlhLXBhbmVsIC53YXZlZm9ybS1hbmQtYnV0dG9ucyB7XG4gIGZsZXg6IDEgMSBhdXRvO1xufVxuLm1lZGlhLXBhbmVsIC53YXZlZm9ybSB7XG4gIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgaGVpZ2h0OiA1MHB4O1xuICB3aWR0aDogMTAwJTtcbn1cbi5tZWRpYS1wYW5lbCAud2F2ZWZvcm0tbG9hZGluZyB7XG4gIGhlaWdodDogNTBweDtcbiAgd2lkdGg6IDEwMCU7XG59XG48L3N0eWxlPlxuIiwiZXhwb3J0IGZ1bmN0aW9uIG1zVG9UaW1lKHMsIHttcz1mYWxzZSwgaG91cnM9dHJ1ZX09e30pIHtcbiAgaWYocyA9PSB1bmRlZmluZWQpIHtcbiAgICByZXR1cm4gbXMgPyAnLS06LS06LS0uLS0tJyA6ICctLTotLTotLSc7XG4gIH1cbiAgZnVuY3Rpb24gcGFkKG4sIHopIHtcbiAgICB6ID0geiB8fCAyO1xuICAgIHJldHVybiAoJzAwJyArIG4pLnNsaWNlKC16KTtcbiAgfVxuICB2YXIgX21zID0gcyAlIDEwMDA7XG4gIHMgPSAocyAtIF9tcykgLyAxMDAwO1xuICB2YXIgc2VjcyA9IHMgJSA2MDtcbiAgcyA9IChzIC0gc2VjcykgLyA2MDtcbiAgdmFyIG1pbnMgPSBzICUgNjA7XG4gIHZhciBocnMgPSAocyAtIG1pbnMpIC8gNjA7XG4gIHJldHVybiAoKGhycyB8fCBob3VycykgPyAocGFkKGhycykgKyAnOicpIDogJycpICsgcGFkKG1pbnMpICsgJzonICsgcGFkKHNlY3MpICsgKG1zID8gJy4nICsgcGFkKF9tcywgMykgOiAnJyk7XG59XG4iLCJcblxuYXN5bmMgZnVuY3Rpb24gZmV0Y2hBdWRpb0ZpbGVBbmREZWNvZGUodXJsKSB7XG5cbiAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCh1cmwpO1xuXG4gIGNvbnN0IGJ1ZmZlciA9IGF3YWl0IGRlY29kZUF1ZGlvRmlsZUJ1ZmZlcihhd2FpdCByZXNwb25zZS5hcnJheUJ1ZmZlcigpKTtcblxuICByZXR1cm4gYnVmZmVyO1xufVxuXG5hc3luYyBmdW5jdGlvbiBkZWNvZGVBdWRpb0ZpbGVCdWZmZXIoYXJyYXlCdWZmZXIpIHtcblxuICBjb25zdCBjb250ZXh0ID0gbmV3IEF1ZGlvQ29udGV4dCgpO1xuXG4gIC8vIFRPRE86IGFkZCB0cnkge30gY2F0Y2gge31cblxuICBjb25zdCBidWZmZXIgPSBhd2FpdCBjb250ZXh0LmRlY29kZUF1ZGlvRGF0YShhcnJheUJ1ZmZlcik7XG5cbiAgY29udGV4dC5jbG9zZSgpO1xuXG4gIHJldHVybiBidWZmZXI7XG59XG5cbmZ1bmN0aW9uIEZsb2F0MzJBcnJheVRvSW50MTZBcnJheShmbG9hdEFycmF5KSB7XG4gIHJldHVybiBJbnQxNkFycmF5LmZyb20oZmxvYXRBcnJheS5tYXAoc2FtcGxlID0+IHNhbXBsZSAqIDB4ODAwMCkpO1xufVxuXG5mdW5jdGlvbiBidWZmZXJEYXRhKGJ1ZmZlciwgeyBjaGFubmVsID0gMCB9ID0ge30pIHtcbiAgY29uc3QgZGF0YSA9IGJ1ZmZlci5nZXRDaGFubmVsRGF0YShjaGFubmVsKTtcbiAgLy8gcmV0dXJuIEZsb2F0MzJBcnJheVRvSW50MTZBcnJheShkYXRhKTtcbiAgcmV0dXJuIGRhdGE7XG59XG5cbmFzeW5jIGZ1bmN0aW9uIHJlc2NhbGVBdWRpb0J1ZmZlcihpbnB1dEJ1ZmZlciwgeyBudW1iZXJPZkNoYW5uZWxzID0gMSwgbGVuZ3RoLCBzYW1wbGVSYXRlID0gMTYwMDAgfSA9IHt9KSB7XG5cbiAgaWYobGVuZ3RoID09PSB1bmRlZmluZWQpIHtcbiAgICBsZW5ndGggPSBpbnB1dEJ1ZmZlci5kdXJhdGlvbiAqIHNhbXBsZVJhdGU7XG4gIH1cblxuICBjb25zdCBjb250ZXh0ID0gbmV3IE9mZmxpbmVBdWRpb0NvbnRleHQobnVtYmVyT2ZDaGFubmVscywgbGVuZ3RoLCBzYW1wbGVSYXRlKTtcblxuICBjb25zdCBzb3VyY2UgPSBjb250ZXh0LmNyZWF0ZUJ1ZmZlclNvdXJjZSgpO1xuICBzb3VyY2UuY29ubmVjdChjb250ZXh0LmRlc3RpbmF0aW9uKTtcbiAgc291cmNlLmJ1ZmZlciA9IGlucHV0QnVmZmVyO1xuICBzb3VyY2Uuc3RhcnQoKTsgLy8gQXVkaW9CdWZmZXJTb3VyY2VOb2RlLnN0YXJ0KFt3aGVuXVssIG9mZnNldF1bLCBkdXJhdGlvbl0pXG4gIGNvbnN0IGJ1ZmZlciA9IGF3YWl0IGNvbnRleHQuc3RhcnRSZW5kZXJpbmcoKTtcbiAgY29udGV4dC5jbG9zZSgpO1xuICByZXR1cm4gYnVmZmVyO1xufVxuXG5cbmFzeW5jIGZ1bmN0aW9uIHNhbXBsZVByb2Nlc3NBdWRpb0J1ZmZlcihidWZmZXIpIHtcbiAgLy8gY29uc3Qgc2FtcGxlUmF0ZSA9IGJ1ZmZlci5zYW1wbGVSYXRlO1xuICBjaHVua3MucHVzaChGbG9hdDMyQXJyYXkuZnJvbShidWZmZXIuZ2V0Q2hhbm5lbERhdGEoMCkpKTtcblxuICBjb25zdCBvdXB1dEJ1ZmZlciA9IGF3YWl0IHJlc2NhbGVBdWRpb0J1ZmZlcihidWZmZXIsIHt9KTtcblxuICBjb25zdCBkYXRhID0gYnVmZmVyRGF0YShvdXRwdXRCdWZmZXIpO1xuXG4gIHRvdGFsU2FtcGxlcyArPSBkYXRhLmxlbmd0aDtcbiAgcmVjb3JkZWRDaHVua3MucHVzaChkYXRhKTtcblxuICAvKlxuICBpZih0b3RhbFNhbXBsZXMgPj0gMTYwMDAgKiAxMCkgeyAvLyAxMHNcbiAgICAvLyBUT0RPOiBhc3luY1xuXG4gICAgY29uc3QgZGF0YSA9IFtdO1xuICAgIGZvcihjb25zdCBjaHVuayBvZiByZWNvcmRlZENodW5rcykge1xuICAgICAgZGF0YS5wdXNoKEludDE2QXJyYXkuZnJvbShjaHVuay5tYXAoc2FtcGxlID0+IHNhbXBsZSAqIDB4ODAwMCkpKTtcbiAgICAgIC8vIHNhbXBsZUNvdW50ICs9IGNodW5rLmxlbmd0aDtcbiAgICB9XG4gICAgY29uc29sZS5sb2coZGF0YSlcbiAgICBjb25zdCBibG9iID0gbmV3IEJsb2IoZGF0YSlcblxuICAgIHRvdGFsU2FtcGxlcyA9IDA7XG4gICAgcmVjb3JkZWRDaHVua3MgPSBbXTtcblxuICAgIC8vIGNvbnNvbGUubG9nKCdjYWxsaW5nIEFTUicpXG4gICAgLy8gLy8gY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBheGlvcy5wb3N0KCdodHRwOi8vdGVuc29yOjkwMDAvZGF0YScsIGJsb2IpXG4gICAgLy8gLy8gY29uc29sZS5sb2cocmVzcG9uc2Uuc3RhdHVzLCBhd2FpdCByZXNwb25zZS5kYXRhKTtcbiAgICAvLyBhc3JTb2NrZXQuc2VuZChibG9iKTtcbiAgfVxuICAqL1xufVxuXG5cbmZ1bmN0aW9uIHByb2Nlc3NBdWRpb1N0cmVhbShzdHJlYW0sIGNhbGxiYWNrLCB7IGJ1ZmZlclNpemUgPSAxMDI0LCBudW1iZXJPZklucHV0Q2hhbm5lbHMgPSAxLCBudW1iZXJPZk91dHB1dENoYW5uZWxzID0gMSwgY29udGV4dCB9ID0ge30pIHtcblxuICAvLyBUaGUgYnVmZmVyIHNpemUgaW4gdW5pdHMgb2Ygc2FtcGxlLWZyYW1lcy4gSWYgc3BlY2lmaWVkLCB0aGUgYnVmZmVyU2l6ZSBtdXN0IGJlIG9uZSBvZiB0aGUgZm9sbG93aW5nIHZhbHVlczogMjU2LCA1MTIsIDEwMjQsIDIwNDgsIDQwOTYsIDgxOTIsIDE2Mzg0LlxuICAvLyBJZiBpdCdzIG5vdCBwYXNzZWQgaW4sIG9yIGlmIHRoZSB2YWx1ZSBpcyAwLCB0aGVuIHRoZSBpbXBsZW1lbnRhdGlvbiB3aWxsIGNob29zZSB0aGUgYmVzdCBidWZmZXIgc2l6ZSBmb3IgdGhlIGdpdmVuIGVudmlyb25tZW50LFxuICAvLyB3aGljaCB3aWxsIGJlIGEgY29uc3RhbnQgcG93ZXIgb2YgMiB0aHJvdWdob3V0IHRoZSBsaWZldGltZSBvZiB0aGUgbm9kZS5cblxuICAvLyBjb25zdCBjb250ZXh0ID0gbmV3IEF1ZGlvQ29udGV4dCgpO1xuICBpZihjb250ZXh0ID09PSB1bmRlZmluZWQpIHtcbiAgICBjb250ZXh0ID0gbmV3IEF1ZGlvQ29udGV4dCgpO1xuICB9XG5cbiAgY29uc3Qgc291cmNlID0gY29udGV4dC5jcmVhdGVNZWRpYVN0cmVhbVNvdXJjZShzdHJlYW0pO1xuICBjb25zdCBwcm9jZXNzb3IgPSBjb250ZXh0LmNyZWF0ZVNjcmlwdFByb2Nlc3NvcihidWZmZXJTaXplLCBudW1iZXJPZklucHV0Q2hhbm5lbHMsIG51bWJlck9mT3V0cHV0Q2hhbm5lbHMpO1xuXG4gIHNvdXJjZS5jb25uZWN0KHByb2Nlc3Nvcik7XG4gIHByb2Nlc3Nvci5jb25uZWN0KGNvbnRleHQuZGVzdGluYXRpb24pO1xuXG4gIHByb2Nlc3Nvci5vbmF1ZGlvcHJvY2VzcyA9IGZ1bmN0aW9uKGUpIHtcbiAgICBjb25zdCBidWZmZXIgPSBlLmlucHV0QnVmZmVyO1xuICAgIGlmKGNhbGxiYWNrKSB7XG4gICAgICBjYWxsYmFjayhlLmlucHV0QnVmZmVyKTtcbiAgICB9XG4gIH07XG5cbiAgcmV0dXJuIGNvbnRleHQ7XG5cbiAgLy8gaWYoY29udGV4dC5zdGF0ZSA9PT0gJ3N1c3BlbmRlZCcpXG4gIC8vICAgY29uc29sZS5sb2coJ3Jlc3VtaW5nJylcbiAgLy8gICBjb250ZXh0LnJlc3VtZSgpO1xuICAvLyBpZihjb250ZXh0LnN0YXRlID09PSAncnVubmluZycpXG4gIC8vICAgY29uc29sZS5sb2coJ3N1c3BlbmRpbmcnKVxuXG59XG5cbi8vIGZ1bmN0aW9uIGxvYWRSYXdBdWRpb0RhdGEoKSB7XG4vLyB9XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBkZWNvZGVBdWRpb0ZpbGVEYXRhKGFycmF5QnVmZmVyKSB7XG5cbiAgY29uc3QgYnVmZmVyID0gYXdhaXQgZGVjb2RlQXVkaW9GaWxlQnVmZmVyKGFycmF5QnVmZmVyKTtcblxuICBjb25zdCBkYXRhID0gYnVmZmVyRGF0YShidWZmZXIpO1xuXG4gIHJldHVybiB7IGRhdGE6IEZsb2F0MzJBcnJheVRvSW50MTZBcnJheShkYXRhKSwgc2FtcGxlUmF0ZTogYnVmZmVyLnNhbXBsZVJhdGUsIGxlbmd0aDogYnVmZmVyLmxlbmd0aCwgZHVyYXRpb246IGJ1ZmZlci5kdXJhdGlvbiwgbnVtYmVyT2ZDaGFubmVsczogYnVmZmVyLm51bWJlck9mQ2hhbm5lbHMgfTtcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGZldGNoQW5kRGVjb2RlQXVkaW9GaWxlKHVybCkge1xuXG4gIGNvbnN0IGJ1ZmZlciA9IGF3YWl0IGZldGNoQXVkaW9GaWxlQW5kRGVjb2RlKHVybCk7XG5cbiAgY29uc3QgZGF0YSA9IGJ1ZmZlckRhdGEoYnVmZmVyKTtcblxuICByZXR1cm4geyBkYXRhOiBGbG9hdDMyQXJyYXlUb0ludDE2QXJyYXkoZGF0YSksIHNhbXBsZVJhdGU6IGJ1ZmZlci5zYW1wbGVSYXRlLCBsZW5ndGg6IGJ1ZmZlci5sZW5ndGgsIGR1cmF0aW9uOiBidWZmZXIuZHVyYXRpb24sIG51bWJlck9mQ2hhbm5lbHM6IGJ1ZmZlci5udW1iZXJPZkNoYW5uZWxzIH07XG59XG4iLCI8dGVtcGxhdGU+XG4gIDxFZGl0b3IgY2xhc3M9XCJcIiA6dHJhbnNjcmlwdD1cInRyYW5zY3JpcHRcIiA6d2F2ZWZvcm09XCJ3YXZlZm9ybVwiIDpkdXJhdGlvbj1cImR1cmF0aW9uXCIgOnVybD1cInVybFwiIDpvblNhdmU9XCJvblNhdmVcIiByZWY9XCJlZGl0b3JcIj48L0VkaXRvcj5cbjwvdGVtcGxhdGU+XG5cblxuPHNjcmlwdCBsYW5nPVwidHNcIj5cbi8vIGltcG9ydCBib290c3RyYXAgY3NzXG4vLyBpbXBvcnQgJ2Jvb3RzdHJhcC9kaXN0L2Nzcy9ib290c3RyYXAubWluLmNzcyc7XG4vLyBpbXBvcnQgJ2Jvb3RzdHJhcC1pY29ucy9mb250L2Jvb3RzdHJhcC1pY29ucy5jc3MnO1xuXG5pbXBvcnQgRWRpdG9yIGZyb20gJy4vY29tcG9uZW50cy9FZGl0b3IudnVlJztcblxuaW1wb3J0IHsgZGVjb2RlQXVkaW9GaWxlRGF0YSwgZmV0Y2hBbmREZWNvZGVBdWRpb0ZpbGUgfSBmcm9tICcuL2F1ZGlvLmpzJztcblxuZXhwb3J0IGRlZmF1bHQge1xuICBjb21wb25lbnRzOiB7XG4gICAgRWRpdG9yLFxuICB9LFxuICBwcm9wczoge1xuICB9LFxuICBkYXRhKCkge1xuICAgIHJldHVybiB7XG4gICAgICB0cmFuc2NyaXB0OiB7fSxcbiAgICAgIHdhdmVmb3JtOiBbXSwgIC8vIHJhdyBhdWRpbyBkYXRhXG4gICAgICBkdXJhdGlvbjogMCxcbiAgICAgIHVybDogdW5kZWZpbmVkLFxuICAgIH1cbiAgfSxcbiAgYXN5bmMgbW91bnRlZCgpIHtcbiAgfSxcblxuICB1bm1vdW50ZWQoKSB7XG4gICAgaWYodGhpcy51cmwgJiYgdGhpcy51cmwubGVuZ3RoID4gMCAmJiB0aGlzLnVybC5zdGFydHNXaXRoKCdibG9iOicpKSB7XG4gICAgICBVUkwucmV2b2tlT2JqZWN0VVJMKHRoaXMudXJsKTtcbiAgICB9XG4gIH0sXG5cbiAgd2F0Y2g6IHtcbiAgfSxcblxuICBtZXRob2RzOiB7XG5cbiAgICBhc3luYyBsb2FkKHsgYXVkaW8sIHRyYW5zY3JpcHQsIGZpbGUgfSkge1xuICAgICAgaWYodHlwZW9mKGF1ZGlvKSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgdGhpcy4kcmVmcy5lZGl0b3Iud2F2ZWZvcm1Mb2FkaW5nKCk7XG4gICAgICAgIGlmKHRoaXMudXJsICYmIHRoaXMudXJsLmxlbmd0aCA+IDAgJiYgdGhpcy51cmwuc3RhcnRzV2l0aCgnYmxvYjonKSkge1xuICAgICAgICAgIFVSTC5yZXZva2VPYmplY3RVUkwodGhpcy51cmwpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHVybCA9IGF1ZGlvO1xuICAgICAgICB0aGlzLiRyZWZzLmVkaXRvci5sb2FkKHsgdXJsLCB3YXZlZm9ybTogYXVkaW8gfSk7XG4gICAgICAgIC8qXG4gICAgICAgIC8vIHRoaXMudXJsID0gdXJsO1xuICAgICAgICBjb25zdCBhdWRpb0RhdGEgPSBhd2FpdCBmZXRjaEFuZERlY29kZUF1ZGlvRmlsZShhdWRpbyk7XG4gICAgICAgIC8vIHRoaXMud2F2ZWZvcm0gPSBhdWRpb0RhdGEuZGF0YTtcbiAgICAgICAgLy8gdGhpcy5kdXJhdGlvbiA9IGF1ZGlvRGF0YS5kdXJhdGlvbiAqIDEwMDA7XG4gICAgICAgIHRoaXMuJHJlZnMuZWRpdG9yLmxvYWQoeyB1cmwsIHdhdmVmb3JtOiBhdWRpb0RhdGEuZGF0YSwgZHVyYXRpb246IGF1ZGlvRGF0YS5kdXJhdGlvbiAqIDEwMDAgfSk7XG4gICAgICAgICovXG4gICAgICB9IGVsc2UgaWYoYXVkaW8gaW5zdGFuY2VvZiBGaWxlKSB7XG4gICAgICAgIHRoaXMuJHJlZnMuZWRpdG9yLndhdmVmb3JtTG9hZGluZygpO1xuICAgICAgICAvLyB0aGlzLndhdmVmb3JtID0gdW5kZWZpbmVkO1xuICAgICAgICBpZih0aGlzLnVybCAmJiB0aGlzLnVybC5sZW5ndGggPiAwICYmIHRoaXMudXJsLnN0YXJ0c1dpdGgoJ2Jsb2I6JykpIHtcbiAgICAgICAgICBVUkwucmV2b2tlT2JqZWN0VVJMKHRoaXMudXJsKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCB1cmwgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKGF1ZGlvKTtcbiAgICAgICAgdGhpcy4kcmVmcy5lZGl0b3IubG9hZCh7IHVybCwgd2F2ZWZvcm06IGF1ZGlvIH0pO1xuICAgICAgICAvKlxuICAgICAgICAvLyB0aGlzLnVybCA9IHVybDtcbiAgICAgICAgY29uc3QgYXVkaW9EYXRhID0gYXdhaXQgZGVjb2RlQXVkaW9GaWxlRGF0YShhd2FpdCBhdWRpby5hcnJheUJ1ZmZlcigpKTtcbiAgICAgICAgLy8gdGhpcy53YXZlZm9ybSA9IGF1ZGlvRGF0YS5kYXRhO1xuICAgICAgICAvLyB0aGlzLmR1cmF0aW9uID0gYXVkaW9EYXRhLmR1cmF0aW9uICogMTAwMDtcbiAgICAgICAgdGhpcy4kcmVmcy5lZGl0b3IubG9hZCh7IHVybCwgd2F2ZWZvcm06IGF1ZGlvRGF0YS5kYXRhLCBkdXJhdGlvbjogYXVkaW9EYXRhLmR1cmF0aW9uICogMTAwMCB9KTtcbiAgICAgICAgKi9cbiAgICAgIH0gZWxzZSBpZihhdWRpbyBpbnN0YW5jZW9mIEFycmF5QnVmZmVyKSB7XG4gICAgICAgIHRoaXMuJHJlZnMuZWRpdG9yLndhdmVmb3JtTG9hZGluZygpO1xuICAgICAgICBjb25zdCB1cmwgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKGZpbGUgfHwgbmV3IEJsb2IoW2F1ZGlvXSkpO1xuICAgICAgICAvLyB0aGlzLnVybCA9IHVybDtcbiAgICAgICAgY29uc3QgYXVkaW9EYXRhID0gYXdhaXQgZGVjb2RlQXVkaW9GaWxlRGF0YShhdWRpbyk7XG4gICAgICAgIC8vIHRoaXMud2F2ZWZvcm0gPSBhdWRpb0RhdGEuZGF0YTtcbiAgICAgICAgLy8gdGhpcy5kdXJhdGlvbiA9IGF1ZGlvRGF0YS5kdXJhdGlvbiAqIDEwMDA7XG4gICAgICAgIHRoaXMuJHJlZnMuZWRpdG9yLmxvYWQoeyB1cmwsIHdhdmVmb3JtOiBhdWRpb0RhdGEuZGF0YSwgZHVyYXRpb246IGF1ZGlvRGF0YS5kdXJhdGlvbiAqIDEwMDAgfSk7XG4gICAgICB9IGVsc2UgaWYoYXVkaW8gPT09IG51bGwpIHtcbiAgICAgICAgaWYodGhpcy51cmwgJiYgdGhpcy51cmwubGVuZ3RoID4gMCAmJiB0aGlzLnVybC5zdGFydHNXaXRoKCdibG9iOicpKSB7XG4gICAgICAgICAgVVJMLnJldm9rZU9iamVjdFVSTCh0aGlzLnVybCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy4kcmVmcy5lZGl0b3IubG9hZCh7IHVybDogJycsIHdhdmVmb3JtOiBudWxsLCBkdXJhdGlvbjogMCB9KTtcbiAgICAgIH1cbiAgICAgIGlmKHRyYW5zY3JpcHQpIHtcbiAgICAgICAgaWYodHlwZW9mIHRyYW5zY3JpcHQgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCh0cmFuc2NyaXB0KTtcbiAgICAgICAgICB0aGlzLnRyYW5zY3JpcHQgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG4gICAgICAgIH0gZWxzZSBpZih0cmFuc2NyaXB0IGluc3RhbmNlb2YgRmlsZSkge1xuICAgICAgICAgIHRoaXMudHJhbnNjcmlwdCA9IEpTT04ucGFyc2UoYXdhaXQgdHJhbnNjcmlwdC50ZXh0KCkpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRoaXMudHJhbnNjcmlwdCA9IHRyYW5zY3JpcHQ7XG4gICAgICAgIH1cbiAgICAgIC8vIH0gZWxzZSBpZih0aGlzLmF1ZGlvRGF0YSkge1xuICAgICAgICAvLyBUT0RPOiBjYWxsIEFTUlxuICAgICAgfVxuICAgIH0sXG5cbiAgICBhc3luYyBvblNhdmUodHJhbnNjcmlwdCkge1xuICAgICAgICBjb25zb2xlLmxvZygnb24gc2F2ZSB0cmFuc2NyaXB0OicsIHRyYW5zY3JpcHQpO1xuICAgIH0sXG5cbiAgICBhc3luYyBzYXZlKHRyYW5zY3JpcHQpIHtcbiAgICAgIGNvbnNvbGUubG9nKCdzYXZlIHRyYW5zY3JpcHQgbm90IGltcGxlbWVudGVkLCB0cmFuc2NyaXB0OicsIHRyYW5zY3JpcHQpO1xuICAgIH0sXG4gIH0sXG59O1xuXG48L3NjcmlwdD5cblxuPHN0eWxlIHNjb3BlZD5cbjwvc3R5bGU+XG4iLCJpbXBvcnQgeyBjcmVhdGVBcHAgfSBmcm9tICd2dWUnXG5pbXBvcnQgRWRpdG9yV2l0aE1lZGlhTG9hZGVyIGZyb20gJy4vRWRpdG9yV2l0aE1lZGlhTG9hZGVyLnZ1ZSdcblxuLy8gaW1wb3J0IGJvb3RzdHJhcCBjc3NcbmltcG9ydCAnYm9vdHN0cmFwL2Rpc3QvY3NzL2Jvb3RzdHJhcC5taW4uY3NzJztcbmltcG9ydCAnYm9vdHN0cmFwLWljb25zL2ZvbnQvYm9vdHN0cmFwLWljb25zLmNzcyc7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGluaXQoc2VsZWN0b3IgPSAnI2FwcCcpIHtcbiAgcmV0dXJuIGNyZWF0ZUFwcChFZGl0b3JXaXRoTWVkaWFMb2FkZXIpLm1vdW50KHNlbGVjdG9yKTtcbn1cbiJdLCJuYW1lcyI6WyJzdHIiLCJleHBlY3RzTG93ZXJDYXNlIiwibWFwIiwiT2JqZWN0IiwiY3JlYXRlIiwibGlzdCIsInNwbGl0IiwiaSIsImxlbmd0aCIsInZhbCIsInRvTG93ZXJDYXNlIiwiaXNTcGVjaWFsQm9vbGVhbkF0dHIiLCJ2YWx1ZSIsImlzQXJyYXkiLCJyZXMiLCJpdGVtIiwibm9ybWFsaXplZCIsImlzU3RyaW5nIiwicGFyc2VTdHJpbmdTdHlsZSIsIm5vcm1hbGl6ZVN0eWxlIiwia2V5IiwiaXNPYmplY3QiLCJsaXN0RGVsaW1pdGVyUkUiLCJwcm9wZXJ0eURlbGltaXRlclJFIiwiY3NzVGV4dCIsInJldCIsImZvckVhY2giLCJ0bXAiLCJ0cmltIiwibm9ybWFsaXplQ2xhc3MiLCJuYW1lIiwidG9EaXNwbGF5U3RyaW5nIiwidG9TdHJpbmciLCJvYmplY3RUb1N0cmluZyIsImlzRnVuY3Rpb24iLCJKU09OIiwic3RyaW5naWZ5IiwicmVwbGFjZXIiLCJTdHJpbmciLCJfa2V5IiwiX192X2lzUmVmIiwiaXNNYXAiLCJzaXplIiwiZW50cmllcyIsInJlZHVjZSIsInZhbDIiLCJpc1NldCIsInZhbHVlcyIsImlzUGxhaW5PYmplY3QiLCJFTVBUWV9PQkoiLCJFTVBUWV9BUlIiLCJOT09QIiwiTk8iLCJvblJFIiwiaXNPbiIsInRlc3QiLCJpc01vZGVsTGlzdGVuZXIiLCJzdGFydHNXaXRoIiwiZXh0ZW5kIiwiYXNzaWduIiwicmVtb3ZlIiwiYXJyIiwiZWwiLCJpbmRleE9mIiwic3BsaWNlIiwiaGFzT3duUHJvcGVydHkiLCJwcm90b3R5cGUiLCJoYXNPd24iLCJjYWxsIiwiQXJyYXkiLCJ0b1R5cGVTdHJpbmciLCJpc1N5bWJvbCIsImlzUHJvbWlzZSIsInRoZW4iLCJjYXRjaCIsImlzSW50ZWdlcktleSIsInBhcnNlSW50IiwiaXNSZXNlcnZlZFByb3AiLCJjYWNoZVN0cmluZ0Z1bmN0aW9uIiwiZm4iLCJjYWNoZSIsImNhbWVsaXplUkUiLCJjYW1lbGl6ZSIsInJlcGxhY2UiLCJfIiwiYyIsInRvVXBwZXJDYXNlIiwiaHlwaGVuYXRlUkUiLCJoeXBoZW5hdGUiLCJjYXBpdGFsaXplIiwiY2hhckF0Iiwic2xpY2UiLCJ0b0hhbmRsZXJLZXkiLCJoYXNDaGFuZ2VkIiwib2xkVmFsdWUiLCJpcyIsImludm9rZUFycmF5Rm5zIiwiZm5zIiwiYXJnIiwiZGVmIiwib2JqIiwiZGVmaW5lUHJvcGVydHkiLCJjb25maWd1cmFibGUiLCJlbnVtZXJhYmxlIiwidG9OdW1iZXIiLCJuIiwicGFyc2VGbG9hdCIsImlzTmFOIiwiX2dsb2JhbFRoaXMiLCJhY3RpdmVFZmZlY3RTY29wZSIsImVmZmVjdFNjb3BlU3RhY2siLCJjb25zdHJ1Y3RvciIsImRldGFjaGVkIiwiYWN0aXZlIiwiZWZmZWN0cyIsImNsZWFudXBzIiwicGFyZW50IiwiaW5kZXgiLCJzY29wZXMiLCJwdXNoIiwidGhpcyIsInJ1biIsIm9uIiwib2ZmIiwicG9wIiwic3RvcCIsImZyb21QYXJlbnQiLCJlIiwiY2xlYW51cCIsImxhc3QyIiwiY3JlYXRlRGVwIiwiZGVwIiwiU2V0IiwidyIsIndhc1RyYWNrZWQiLCJ0cmFja09wQml0IiwibmV3VHJhY2tlZCIsInRhcmdldE1hcCIsIldlYWtNYXAiLCJlZmZlY3RUcmFja0RlcHRoIiwiZWZmZWN0U3RhY2siLCJhY3RpdmVFZmZlY3QiLCJJVEVSQVRFX0tFWSIsIlN5bWJvbCIsIk1BUF9LRVlfSVRFUkFURV9LRVkiLCJzY2hlZHVsZXIiLCJzY29wZSIsImRlcHMiLCJlZmZlY3QiLCJpbmNsdWRlcyIsInNob3VsZFRyYWNrIiwicHRyIiwiZGVsZXRlIiwib25TdG9wIiwidHJhY2tTdGFjayIsInRhcmdldCIsInR5cGUiLCJpc1RyYWNraW5nIiwiZGVwc01hcCIsImdldCIsInNldCIsIk1hcCIsImRlYnVnZ2VyRXZlbnRFeHRyYUluZm8iLCJzaG91bGRUcmFjazIiLCJoYXMiLCJhZGQiLCJuZXdWYWx1ZSIsIm9sZFRhcmdldCIsImtleTIiLCJhbGxvd1JlY3Vyc2UiLCJpc05vblRyYWNrYWJsZUtleXMiLCJidWlsdEluU3ltYm9scyIsImdldE93blByb3BlcnR5TmFtZXMiLCJmaWx0ZXIiLCJzaGFsbG93R2V0IiwicmVhZG9ubHlHZXQiLCJhcnJheUluc3RydW1lbnRhdGlvbnMiLCJpbnN0cnVtZW50YXRpb25zIiwiYXJncyIsInRvUmF3IiwibCIsImFwcGx5IiwiaXNSZWFkb25seTIiLCJzaGFsbG93IiwicmVjZWl2ZXIiLCJzaGFsbG93UmVhZG9ubHlNYXAiLCJyZWFkb25seU1hcCIsInNoYWxsb3dSZWFjdGl2ZU1hcCIsInJlYWN0aXZlTWFwIiwidGFyZ2V0SXNBcnJheSIsIlJlZmxlY3QiLCJpc1JlZiIsInJlYWRvbmx5IiwicmVhY3RpdmUiLCJpc1JlYWRvbmx5IiwiaGFkS2V5IiwiTnVtYmVyIiwicmVzdWx0IiwibXV0YWJsZUhhbmRsZXJzIiwiZGVsZXRlUHJvcGVydHkiLCJvd25LZXlzIiwicmVhZG9ubHlIYW5kbGVycyIsInNoYWxsb3dSZWFjdGl2ZUhhbmRsZXJzIiwidG9TaGFsbG93IiwiZ2V0UHJvdG8iLCJ2IiwiZ2V0UHJvdG90eXBlT2YiLCJpc1NoYWxsb3ciLCJyYXdUYXJnZXQiLCJyYXdLZXkiLCJ0cmFjayIsIndyYXAiLCJ0b1JlYWRvbmx5IiwidG9SZWFjdGl2ZSIsImhhczIiLCJnZXQyIiwiaGFkSXRlbXMiLCJjbGVhciIsImNhbGxiYWNrIiwidGhpc0FyZyIsIm9ic2VydmVkIiwibWV0aG9kIiwidGFyZ2V0SXNNYXAiLCJpc1BhaXIiLCJpdGVyYXRvciIsImlzS2V5T25seSIsImlubmVySXRlcmF0b3IiLCJuZXh0IiwiZG9uZSIsIm11dGFibGVJbnN0cnVtZW50YXRpb25zMiIsImdldCQxIiwiaGFzJDEiLCJzZXQkMSIsImRlbGV0ZUVudHJ5IiwiY3JlYXRlRm9yRWFjaCIsInNoYWxsb3dJbnN0cnVtZW50YXRpb25zMiIsInJlYWRvbmx5SW5zdHJ1bWVudGF0aW9uczIiLCJjcmVhdGVSZWFkb25seU1ldGhvZCIsInNoYWxsb3dSZWFkb25seUluc3RydW1lbnRhdGlvbnMyIiwiY3JlYXRlSXRlcmFibGVNZXRob2QiLCJtdXRhYmxlSW5zdHJ1bWVudGF0aW9ucyIsInJlYWRvbmx5SW5zdHJ1bWVudGF0aW9ucyIsInNoYWxsb3dJbnN0cnVtZW50YXRpb25zIiwic2hhbGxvd1JlYWRvbmx5SW5zdHJ1bWVudGF0aW9ucyIsIm11dGFibGVDb2xsZWN0aW9uSGFuZGxlcnMiLCJzaGFsbG93Q29sbGVjdGlvbkhhbmRsZXJzIiwicmVhZG9ubHlDb2xsZWN0aW9uSGFuZGxlcnMiLCJpc0V4dGVuc2libGUiLCJyYXdUeXBlIiwidGFyZ2V0VHlwZU1hcCIsInRvUmF3VHlwZSIsImNyZWF0ZVJlYWN0aXZlT2JqZWN0IiwiYmFzZUhhbmRsZXJzIiwiY29sbGVjdGlvbkhhbmRsZXJzIiwicHJveHlNYXAiLCJleGlzdGluZ1Byb3h5IiwidGFyZ2V0VHlwZSIsImdldFRhcmdldFR5cGUiLCJwcm94eSIsIlByb3h5IiwiaXNSZWFjdGl2ZSIsInJhdyIsInIiLCJCb29sZWFuIiwic2hhbGxvd1Vud3JhcEhhbmRsZXJzIiwidW5yZWYiLCJyZWYiLCJvYmplY3RXaXRoUmVmcyIsImdldHRlciIsIl9zZXR0ZXIiLCJfZGlydHkiLCJSZWFjdGl2ZUVmZmVjdCIsInNlbGYyIiwiX3ZhbHVlIiwiZ2V0dGVyT3JPcHRpb25zIiwiZGVidWdPcHRpb25zIiwic2V0dGVyIiwib25seUdldHRlciIsIkNvbXB1dGVkUmVmSW1wbCIsImluc3RhbmNlIiwiZXZlbnQiLCJyYXdBcmdzIiwicHJvcHMiLCJ2bm9kZSIsImlzTW9kZWxMaXN0ZW5lcjIiLCJtb2RlbEFyZyIsIm1vZGlmaWVyc0tleSIsIm51bWJlciIsImEiLCJoYW5kbGVyTmFtZSIsImhhbmRsZXIiLCJvbmNlSGFuZGxlciIsImVtaXR0ZWQiLCJjb21wIiwiYXBwQ29udGV4dCIsImFzTWl4aW4iLCJlbWl0c0NhY2hlIiwiY2FjaGVkIiwiZW1pdHMiLCJoYXNFeHRlbmRzIiwiZXh0ZW5kRW1pdHMiLCJyYXcyIiwibm9ybWFsaXplZEZyb21FeHRlbmQiLCJub3JtYWxpemVFbWl0c09wdGlvbnMiLCJtaXhpbnMiLCJleHRlbmRzIiwib3B0aW9ucyIsIlByb21pc2UiLCJyZXNvbHZlIiwiY3VycmVudFJlbmRlcmluZ0luc3RhbmNlIiwiY3VycmVudFNjb3BlSWQiLCJwcmV2IiwiX19zY29wZUlkIiwiQ29tcG9uZW50Iiwid2l0aFByb3h5IiwicHJvcHNPcHRpb25zIiwic2xvdHMiLCJhdHRycyIsImVtaXQiLCJyZW5kZXIiLCJyZW5kZXJDYWNoZSIsImRhdGEiLCJzZXR1cFN0YXRlIiwiY3R4IiwiaW5oZXJpdEF0dHJzIiwiZmFsbHRocm91Z2hBdHRycyIsInNldEN1cnJlbnRSZW5kZXJpbmdJbnN0YW5jZSIsInNoYXBlRmxhZyIsInByb3h5VG9Vc2UiLCJub3JtYWxpemVWTm9kZSIsInJlbmRlcjIiLCJnZXRGdW5jdGlvbmFsRmFsbHRocm91Z2giLCJlcnIiLCJjcmVhdGVWTm9kZSIsIkNvbW1lbnQiLCJyb290MiIsImtleXMiLCJzb21lIiwiZmlsdGVyTW9kZWxMaXN0ZW5lcnMiLCJjbG9uZVZOb2RlIiwiZGlycyIsImNvbmNhdCIsInRyYW5zaXRpb24iLCJwcmV2UHJvcHMiLCJuZXh0UHJvcHMiLCJlbWl0c09wdGlvbnMiLCJuZXh0S2V5cyIsImlzRW1pdExpc3RlbmVyIiwiZGVmYXVsdFZhbHVlIiwidHJlYXREZWZhdWx0QXNGYWN0b3J5IiwiY3VycmVudEluc3RhbmNlIiwicHJvdmlkZXMiLCJhcmd1bWVudHMiLCJpc0FzeW5jV3JhcHBlciIsIl9fYXN5bmNMb2FkZXIiLCJpc0tlZXBBbGl2ZSIsIl9faXNLZWVwQWxpdmUiLCJob29rIiwid3JhcHBlZEhvb2siLCJfX3dkYyIsImN1cnJlbnQiLCJpc0RlYWN0aXZhdGVkIiwia2VlcEFsaXZlUm9vdCIsImluamVjdGVkIiwiaW5qZWN0SG9vayIsInByZXBlbmQiLCJob29rcyIsIl9fd2VoIiwiaXNVbm1vdW50ZWQiLCJjYWxsV2l0aEFzeW5jRXJyb3JIYW5kbGluZyIsInVuc2hpZnQiLCJjcmVhdGVIb29rIiwibGlmZWN5Y2xlIiwiaXNJblNTUkNvbXBvbmVudFNldHVwIiwib25CZWZvcmVNb3VudCIsIm9uTW91bnRlZCIsIm9uQmVmb3JlVXBkYXRlIiwib25VcGRhdGVkIiwib25CZWZvcmVVbm1vdW50Iiwib25Vbm1vdW50ZWQiLCJvblNlcnZlclByZWZldGNoIiwib25SZW5kZXJUcmlnZ2VyZWQiLCJvblJlbmRlclRyYWNrZWQiLCJzaG91bGRDYWNoZUFjY2VzcyIsInJlc29sdmVNZXJnZWRPcHRpb25zIiwicHVibGljVGhpcyIsImJlZm9yZUNyZWF0ZSIsImRhdGFPcHRpb25zIiwiY29tcHV0ZWQiLCJjb21wdXRlZE9wdGlvbnMiLCJtZXRob2RzIiwid2F0Y2giLCJ3YXRjaE9wdGlvbnMiLCJwcm92aWRlIiwicHJvdmlkZU9wdGlvbnMiLCJpbmplY3QiLCJpbmplY3RPcHRpb25zIiwiY3JlYXRlZCIsImJlZm9yZU1vdW50IiwibW91bnRlZCIsImJlZm9yZVVwZGF0ZSIsInVwZGF0ZWQiLCJhY3RpdmF0ZWQiLCJkZWFjdGl2YXRlZCIsImJlZm9yZURlc3Ryb3kiLCJiZWZvcmVVbm1vdW50IiwiZGVzdHJveWVkIiwidW5tb3VudGVkIiwicmVuZGVyVHJhY2tlZCIsInJlbmRlclRyaWdnZXJlZCIsImVycm9yQ2FwdHVyZWQiLCJzZXJ2ZXJQcmVmZXRjaCIsImV4cG9zZSIsImNvbXBvbmVudHMiLCJkaXJlY3RpdmVzIiwiZmlsdGVycyIsImNoZWNrRHVwbGljYXRlUHJvcGVydGllcyIsInVud3JhcFJlZiIsIm5vcm1hbGl6ZUluamVjdCIsIm9wdCIsImZyb20iLCJkZWZhdWx0IiwiY29uZmlnIiwidW53cmFwSW5qZWN0ZWRSZWYiLCJtZXRob2RIYW5kbGVyIiwiYmluZCIsInBhcmVudFByb3ZpZGVzIiwicmVnaXN0ZXIiLCJfaG9vayIsIm9uQWN0aXZhdGVkIiwib25EZWFjdGl2YXRlZCIsIm9uRXJyb3JDYXB0dXJlZCIsImV4cG9zZWQiLCJoIiwiY3JlYXRlUGF0aEdldHRlciIsImNyZWF0ZVdhdGNoZXIiLCJiYXNlIiwiZXh0ZW5kc09wdGlvbnMiLCJnbG9iYWxNaXhpbnMiLCJvcHRpb25zQ2FjaGUiLCJvcHRpb25NZXJnZVN0cmF0ZWdpZXMiLCJyZXNvbHZlZCIsIm1lcmdlT3B0aW9ucyIsIm0iLCJ0byIsInN0cmF0cyIsInN0cmF0IiwiaW50ZXJuYWxPcHRpb25NZXJnZVN0cmF0cyIsIm1lcmdlRGF0YUZuIiwibWVyZ2VPYmplY3RPcHRpb25zIiwibWVyZ2VBc0FycmF5IiwibWVyZ2VkIiwicmF3UHJvcHMiLCJpc1N0YXRlZnVsIiwiaXNTU1IiLCJJbnRlcm5hbE9iamVjdEtleSIsInByb3BzRGVmYXVsdHMiLCJuZWVkQ2FzdEtleXMiLCJyYXdDYXN0VmFsdWVzIiwiaGFzQXR0cnNDaGFuZ2VkIiwiY2FtZWxLZXkiLCJyYXdDdXJyZW50UHJvcHMiLCJjYXN0VmFsdWVzIiwicmVzb2x2ZVByb3BWYWx1ZSIsImlzQWJzZW50IiwiaGFzRGVmYXVsdCIsIkZ1bmN0aW9uIiwicHJvcHNDYWNoZSIsImV4dGVuZFByb3BzIiwibm9ybWFsaXplUHJvcHNPcHRpb25zIiwibm9ybWFsaXplZEtleSIsInZhbGlkYXRlUHJvcE5hbWUiLCJwcm9wIiwiYm9vbGVhbkluZGV4IiwiZ2V0VHlwZUluZGV4Iiwic3RyaW5nSW5kZXgiLCJjdG9yIiwibWF0Y2giLCJiIiwiZ2V0VHlwZSIsImV4cGVjdGVkVHlwZXMiLCJmaW5kSW5kZXgiLCJpc1NhbWVUeXBlIiwidCIsImlzSW50ZXJuYWxLZXkiLCJub3JtYWxpemVTbG90VmFsdWUiLCJub3JtYWxpemVTbG90IiwicmF3U2xvdCIsImlzTm9uU2NvcGVkU2xvdCIsIl9uIiwicmVuZGVyRm5XaXRoQ29udGV4dCIsIl9kIiwicHJldkluc3RhbmNlIiwiX2MiLCJ3aXRoQ3R4Iiwibm9ybWFsaXplT2JqZWN0U2xvdHMiLCJyYXdTbG90cyIsIl9jdHgiLCJub3JtYWxpemVWTm9kZVNsb3RzIiwiY2hpbGRyZW4yIiwicHJldlZOb2RlIiwiYmluZGluZ3MiLCJvbGRCaW5kaW5ncyIsImJpbmRpbmciLCJkaXIiLCJhcHAiLCJpc05hdGl2ZVRhZyIsInBlcmZvcm1hbmNlIiwiZ2xvYmFsUHJvcGVydGllcyIsImVycm9ySGFuZGxlciIsIndhcm5IYW5kbGVyIiwiY29tcGlsZXJPcHRpb25zIiwidWlkIiwiaHlkcmF0ZSIsInJvb3RDb21wb25lbnQiLCJyb290UHJvcHMiLCJjb250ZXh0IiwiY3JlYXRlQXBwQ29udGV4dCIsImluc3RhbGxlZFBsdWdpbnMiLCJpc01vdW50ZWQiLCJfdWlkIiwiX2NvbXBvbmVudCIsIl9wcm9wcyIsIl9jb250YWluZXIiLCJfY29udGV4dCIsIl9pbnN0YW5jZSIsInZlcnNpb24iLCJ1c2UiLCJwbHVnaW4iLCJpbnN0YWxsIiwibWl4aW4iLCJjb21wb25lbnQiLCJkaXJlY3RpdmUiLCJtb3VudCIsInJvb3RDb250YWluZXIiLCJpc0h5ZHJhdGUiLCJpc1NWRyIsIl9fdnVlX2FwcF9fIiwiZ2V0RXhwb3NlUHJveHkiLCJ1bm1vdW50IiwicmF3UmVmIiwib2xkUmF3UmVmIiwicGFyZW50U3VzcGVuc2UiLCJpc1VubW91bnQiLCJzZXRSZWYiLCJyZWZWYWx1ZSIsIm93bmVyIiwib2xkUmVmIiwicmVmcyIsIl9pc1N0cmluZyIsIl9pc1JlZiIsImRvU2V0IiwiZiIsImV4aXN0aW5nIiwiayIsImlkIiwicXVldWVQb3N0UmVuZGVyRWZmZWN0Iiwic3VzcGVuc2UiLCJwZW5kaW5nQnJhbmNoIiwiYWN0aXZlUG9zdEZsdXNoQ2JzIiwicGVuZGluZ1Bvc3RGbHVzaENicyIsInBvc3RGbHVzaEluZGV4IiwiY3JlYXRlSHlkcmF0aW9uRm5zIiwiZ2xvYmFsVGhpcyIsInNlbGYiLCJ3aW5kb3ciLCJnbG9iYWwiLCJfX1ZVRV9fIiwiaW5zZXJ0IiwiaG9zdEluc2VydCIsImhvc3RSZW1vdmUiLCJwYXRjaFByb3AiLCJob3N0UGF0Y2hQcm9wIiwiY3JlYXRlRWxlbWVudCIsImhvc3RDcmVhdGVFbGVtZW50IiwiY3JlYXRlVGV4dCIsImhvc3RDcmVhdGVUZXh0IiwiY3JlYXRlQ29tbWVudCIsImhvc3RDcmVhdGVDb21tZW50Iiwic2V0VGV4dCIsImhvc3RTZXRUZXh0Iiwic2V0RWxlbWVudFRleHQiLCJob3N0U2V0RWxlbWVudFRleHQiLCJwYXJlbnROb2RlIiwiaG9zdFBhcmVudE5vZGUiLCJuZXh0U2libGluZyIsImhvc3ROZXh0U2libGluZyIsInNldFNjb3BlSWQiLCJob3N0U2V0U2NvcGVJZCIsImNsb25lTm9kZSIsImhvc3RDbG9uZU5vZGUiLCJpbnNlcnRTdGF0aWNDb250ZW50IiwiaG9zdEluc2VydFN0YXRpY0NvbnRlbnQiLCJwYXRjaCIsIm4xIiwibjIiLCJjb250YWluZXIiLCJhbmNob3IiLCJwYXJlbnRDb21wb25lbnQiLCJzbG90U2NvcGVJZHMiLCJvcHRpbWl6ZWQiLCJkeW5hbWljQ2hpbGRyZW4iLCJpc1NhbWVWTm9kZVR5cGUiLCJnZXROZXh0SG9zdE5vZGUiLCJwYXRjaEZsYWciLCJUZXh0IiwiU3RhdGljIiwiRnJhZ21lbnQiLCJwcm9jZXNzIiwiaW50ZXJuYWxzIiwicHJvY2Vzc1RleHQiLCJjaGlsZHJlbiIsInByb2Nlc3NDb21tZW50Tm9kZSIsIm1vdW50U3RhdGljTm9kZSIsIm1vdmVTdGF0aWNOb2RlIiwicmVtb3ZlU3RhdGljTm9kZSIsInByb2Nlc3NFbGVtZW50IiwibW91bnRFbGVtZW50Iiwidm5vZGVIb29rIiwidW5tb3VudENoaWxkcmVuIiwib25Wbm9kZUJlZm9yZU1vdW50Iiwic2NvcGVJZCIsIm5lZWRDYWxsVHJhbnNpdGlvbkhvb2tzIiwicGVyc2lzdGVkIiwiYmVmb3JlRW50ZXIiLCJvblZub2RlTW91bnRlZCIsImludm9rZVZOb2RlSG9vayIsImVudGVyIiwiaW52b2tlRGlyZWN0aXZlSG9vayIsInN1YlRyZWUiLCJwYXJlbnRWTm9kZSIsIm1vdW50Q2hpbGRyZW4iLCJzdGFydDIiLCJjaGlsZCIsImNsb25lSWZNb3VudGVkIiwicGF0Y2hFbGVtZW50Iiwib2xkUHJvcHMiLCJuZXdQcm9wcyIsInRvZ2dsZVJlY3Vyc2UiLCJvblZub2RlQmVmb3JlVXBkYXRlIiwiYXJlQ2hpbGRyZW5TVkciLCJjbGFzcyIsInN0eWxlIiwicHJvcHNUb1VwZGF0ZSIsImR5bmFtaWNQcm9wcyIsIm9uVm5vZGVVcGRhdGVkIiwicGF0Y2hCbG9ja0NoaWxkcmVuIiwib2xkQ2hpbGRyZW4iLCJuZXdDaGlsZHJlbiIsImZhbGxiYWNrQ29udGFpbmVyIiwib2xkVk5vZGUiLCJuZXdWTm9kZSIsInBhdGNoUHJvcHMiLCJwcm9jZXNzRnJhZ21lbnQiLCJmcmFnbWVudFN0YXJ0QW5jaG9yIiwiZnJhZ21lbnRFbmRBbmNob3IiLCJmcmFnbWVudFNsb3RTY29wZUlkcyIsInByb2Nlc3NDb21wb25lbnQiLCJhY3RpdmF0ZSIsIm1vdW50Q29tcG9uZW50IiwiaW5pdGlhbFZOb2RlIiwiZW1wdHlBcHBDb250ZXh0IiwidWlkJDEiLCJyb290IiwidXBkYXRlIiwiRWZmZWN0U2NvcGUiLCJleHBvc2VQcm94eSIsImFjY2Vzc0NhY2hlIiwic2V0dXBDb250ZXh0Iiwic3VzcGVuc2VJZCIsInBlbmRpbmdJZCIsImFzeW5jRGVwIiwiYXN5bmNSZXNvbHZlZCIsImJjIiwiYm0iLCJidSIsInUiLCJ1bSIsImJ1bSIsImRhIiwicnRnIiwicnRjIiwiZWMiLCJzcCIsImVtaXQkMSIsImNlIiwiY3JlYXRlQ29tcG9uZW50SW5zdGFuY2UiLCJyZW5kZXJlciIsImlzU3RhdGVmdWxDb21wb25lbnQiLCJzZXR1cFJlc3VsdCIsIm1hcmtSYXciLCJQdWJsaWNJbnN0YW5jZVByb3h5SGFuZGxlcnMiLCJzZXR1cCIsImNyZWF0ZUF0dHJzUHJveHkiLCJjcmVhdGVTZXR1cENvbnRleHQiLCJjYWxsV2l0aEVycm9ySGFuZGxpbmciLCJ1bnNldEN1cnJlbnRJbnN0YW5jZSIsInJlc29sdmVkUmVzdWx0Iiwic2V0dXBTdGF0ZWZ1bENvbXBvbmVudCIsInJlZ2lzdGVyRGVwIiwic2V0dXBSZW5kZXJFZmZlY3QiLCJwbGFjZWhvbGRlciIsInVwZGF0ZUNvbXBvbmVudCIsIm5leHRWTm9kZSIsInByZXZDaGlsZHJlbiIsIm5leHRDaGlsZHJlbiIsIiRzdGFibGUiLCJoYXNQcm9wc0NoYW5nZWQiLCJzaG91bGRVcGRhdGVDb21wb25lbnQiLCJqb2IiLCJxdWV1ZSIsImZsdXNoSW5kZXgiLCJjb21wb25lbnRVcGRhdGVGbiIsIm9yaWdpbk5leHQiLCJuZXh0VHJlZSIsInJlbmRlckNvbXBvbmVudFJvb3QiLCJwcmV2VHJlZSIsImlzQXN5bmNXcmFwcGVyVk5vZGUiLCJoeWRyYXRlTm9kZSIsImh5ZHJhdGVTdWJUcmVlIiwic2NvcGVkSW5pdGlhbFZOb2RlIiwicXVldWVKb2IiLCJ1cGRhdGVDb21wb25lbnRQcmVSZW5kZXIiLCJyYXdQcmV2UHJvcHMiLCJrZWJhYktleSIsInNldEZ1bGxQcm9wcyIsImNhbWVsaXplZEtleSIsIm5lZWREZWxldGlvbkNoZWNrIiwiZGVsZXRpb25Db21wYXJpc29uVGFyZ2V0IiwicGF0Y2hDaGlsZHJlbiIsImMxIiwicHJldlNoYXBlRmxhZyIsImMyIiwicGF0Y2hVbmtleWVkQ2hpbGRyZW4iLCJvbGRMZW5ndGgiLCJuZXdMZW5ndGgiLCJjb21tb25MZW5ndGgiLCJNYXRoIiwibWluIiwibmV4dENoaWxkIiwicGF0Y2hLZXllZENoaWxkcmVuIiwicGFyZW50QW5jaG9yIiwibDIiLCJlMSIsImUyIiwibmV4dFBvcyIsInMxIiwiczIiLCJrZXlUb05ld0luZGV4TWFwIiwiaiIsInBhdGNoZWQiLCJ0b0JlUGF0Y2hlZCIsIm1vdmVkIiwibWF4TmV3SW5kZXhTb0ZhciIsIm5ld0luZGV4VG9PbGRJbmRleE1hcCIsInByZXZDaGlsZCIsIm5ld0luZGV4IiwiaW5jcmVhc2luZ05ld0luZGV4U2VxdWVuY2UiLCJwMiIsImxlbiIsImFyckkiLCJnZXRTZXF1ZW5jZSIsIm5leHRJbmRleCIsIm1vdmUiLCJtb3ZlVHlwZSIsImxlYXZlIiwiZGVsYXlMZWF2ZSIsImFmdGVyTGVhdmUiLCJyZW1vdmUzIiwicGVyZm9ybUxlYXZlIiwiZG9SZW1vdmUiLCJkZWFjdGl2YXRlIiwic2hvdWxkSW52b2tlRGlycyIsInNob3VsZEludm9rZVZub2RlSG9vayIsIm9uVm5vZGVCZWZvcmVVbm1vdW50Iiwib25Wbm9kZVVubW91bnRlZCIsInJlbW92ZTIiLCJwZXJmb3JtUmVtb3ZlIiwicmVtb3ZlRnJhZ21lbnQiLCJjdXIiLCJlbmQiLCJ1bm1vdW50Q29tcG9uZW50IiwiX3Zub2RlIiwicCIsIm10IiwibWMiLCJwYyIsInBiYyIsIm8iLCJjcmVhdGVBcHAiLCJjcmVhdGVBcHBBUEkiLCJiYXNlQ3JlYXRlUmVuZGVyZXIiLCJhbGxvd2VkIiwiY2gxIiwiY2gyIiwibWF5YmVTZWxmUmVmZXJlbmNlIiwid2Fybk1pc3NpbmciLCJzZWxmTmFtZSIsImRpc3BsYXlOYW1lIiwiZ2V0Q29tcG9uZW50TmFtZSIsInJlc29sdmVBc3NldCIsIk5VTExfRFlOQU1JQ19DT01QT05FTlQiLCJyZWdpc3RyeSIsImJsb2NrU3RhY2siLCJjdXJyZW50QmxvY2siLCJkaXNhYmxlVHJhY2tpbmciLCJpc0Jsb2NrVHJlZUVuYWJsZWQiLCJzZXR1cEJsb2NrIiwiY3JlYXRlQmFzZVZOb2RlIiwiX192X2lzVk5vZGUiLCJub3JtYWxpemVLZXkiLCJub3JtYWxpemVSZWYiLCJyZWZfa2V5IiwicmVmX2ZvciIsImlzQmxvY2tOb2RlIiwibmVlZEZ1bGxDaGlsZHJlbk5vcm1hbGl6YXRpb24iLCJfX3Zfc2tpcCIsInNzQ29udGVudCIsInNzRmFsbGJhY2siLCJ0YXJnZXRBbmNob3IiLCJzdGF0aWNDb3VudCIsIm5vcm1hbGl6ZSIsImlzVk5vZGUiLCJjbG9uZWQiLCJfX3ZjY09wdHMiLCJpc1Byb3h5IiwiZ3VhcmRSZWFjdGl2ZVByb3BzIiwia2xhc3MiLCJfX2lzU3VzcGVuc2UiLCJpc1N1c3BlbnNlIiwiX19pc1RlbGVwb3J0IiwiaXNUZWxlcG9ydCIsImV4dHJhUHJvcHMiLCJtZXJnZVJlZiIsIm1lcmdlZFByb3BzIiwidG9NZXJnZSIsImluY29taW5nIiwibWVyZ2VQcm9wcyIsInRleHQiLCJmbGFnIiwiYXNCbG9jayIsImNyZWF0ZUJsb2NrIiwibWVtbyIsInNsb3QiLCJzbG90RmxhZyIsImNyZWF0ZVRleHRWTm9kZSIsInNvdXJjZSIsInJlbmRlckl0ZW0iLCJmYWxsYmFjayIsIm5vU2xvdHRlZCIsImlzQ0UiLCJ2YWxpZFNsb3RDb250ZW50IiwiZW5zdXJlVmFsaWRWTm9kZSIsInJlbmRlcmVkIiwidm5vZGVzIiwiZ2V0UHVibGljSW5zdGFuY2UiLCJwdWJsaWNQcm9wZXJ0aWVzTWFwIiwiJCIsIiRlbCIsIiRkYXRhIiwiJHByb3BzIiwiJGF0dHJzIiwiJHNsb3RzIiwiJHJlZnMiLCIkcGFyZW50IiwiJHJvb3QiLCIkZW1pdCIsIiRvcHRpb25zIiwiJGZvcmNlVXBkYXRlIiwiJG5leHRUaWNrIiwibmV4dFRpY2siLCIkd2F0Y2giLCJpbnN0YW5jZVdhdGNoIiwibm9ybWFsaXplZFByb3BzIiwicHVibGljR2V0dGVyIiwiY3NzTW9kdWxlIiwiX19jc3NNb2R1bGVzIiwic2V0Q3VycmVudEluc3RhbmNlIiwiX19zc3JJbmxpbmVSZW5kZXIiLCJzc3JSZW5kZXIiLCJwcm94eVJlZnMiLCJza2lwT3B0aW9ucyIsInRocm93SW5EZXYiLCJleHBvc2VkSW5zdGFuY2UiLCJlcnJvckluZm8iLCJlcnJvckNhcHR1cmVkSG9va3MiLCJhcHBFcnJvckhhbmRsZXIiLCJjb250ZXh0Vk5vZGUiLCJlcnJvciIsImlzRmx1c2hpbmciLCJpc0ZsdXNoUGVuZGluZyIsInBlbmRpbmdQcmVGbHVzaENicyIsImFjdGl2ZVByZUZsdXNoQ2JzIiwicHJlRmx1c2hJbmRleCIsInJlc29sdmVkUHJvbWlzZSIsImN1cnJlbnRGbHVzaFByb21pc2UiLCJjdXJyZW50UHJlRmx1c2hQYXJlbnRKb2IiLCJpZDIiLCJtaWRkbGUiLCJnZXRJZCIsImZpbmRJbnNlcnRpb25JbmRleCIsImZsdXNoSm9icyIsImNiIiwiYWN0aXZlUXVldWUiLCJwZW5kaW5nUXVldWUiLCJzZWVuIiwicGFyZW50Sm9iIiwiZGVkdXBlZCIsInNvcnQiLCJJbmZpbml0eSIsIklOSVRJQUxfV0FUQ0hFUl9WQUxVRSIsImRvV2F0Y2giLCJpbW1lZGlhdGUiLCJkZWVwIiwiZmx1c2giLCJvblRyYWNrIiwib25UcmlnZ2VyIiwiZm9yY2VUcmlnZ2VyIiwiaXNNdWx0aVNvdXJjZSIsIl9zaGFsbG93IiwicyIsInRyYXZlcnNlIiwib25JbnZhbGlkYXRlIiwiYmFzZUdldHRlciIsInBhdGgiLCJzZWdtZW50cyIsImRvYyIsImRvY3VtZW50Iiwic3RhdGljVGVtcGxhdGVDYWNoZSIsIm5vZGVPcHMiLCJpbnNlcnRCZWZvcmUiLCJyZW1vdmVDaGlsZCIsInRhZyIsImNyZWF0ZUVsZW1lbnROUyIsIm11bHRpcGxlIiwic2V0QXR0cmlidXRlIiwiY3JlYXRlVGV4dE5vZGUiLCJub2RlIiwibm9kZVZhbHVlIiwidGV4dENvbnRlbnQiLCJxdWVyeVNlbGVjdG9yIiwic2VsZWN0b3IyIiwiY29udGVudCIsImJlZm9yZSIsInByZXZpb3VzU2libGluZyIsImxhc3RDaGlsZCIsInRlbXBsYXRlIiwiaW5uZXJIVE1MIiwid3JhcHBlciIsImZpcnN0Q2hpbGQiLCJhcHBlbmRDaGlsZCIsImltcG9ydGFudFJFIiwic2V0U3R5bGUiLCJzZXRQcm9wZXJ0eSIsInByZWZpeGVkIiwicmF3TmFtZSIsInByZWZpeENhY2hlIiwicHJlZml4ZXMiLCJhdXRvUHJlZml4IiwieGxpbmtOUyIsIl9nZXROb3ciLCJEYXRlIiwibm93Iiwic2tpcFRpbWVzdGFtcENoZWNrIiwiY3JlYXRlRXZlbnQiLCJ0aW1lU3RhbXAiLCJmZk1hdGNoIiwibmF2aWdhdG9yIiwidXNlckFnZW50IiwiY2FjaGVkTm93IiwicmVzZXQiLCJwcmV2VmFsdWUiLCJuZXh0VmFsdWUiLCJpbnZva2VycyIsIl92ZWkiLCJleGlzdGluZ0ludm9rZXIiLCJvcHRpb25zTW9kaWZpZXJSRSIsInBhcnNlTmFtZSIsImFkZEV2ZW50TGlzdGVuZXIiLCJpbml0aWFsVmFsdWUiLCJpbnZva2VyIiwiYXR0YWNoZWQiLCJvcmlnaW5hbFN0b3AiLCJzdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24iLCJfc3RvcHBlZCIsInBhdGNoU3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uIiwiZ2V0Tm93IiwiY3JlYXRlSW52b2tlciIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJuYXRpdmVPblJFIiwicmVuZGVyZXJPcHRpb25zIiwidHJhbnNpdGlvbkNsYXNzZXMiLCJfdnRjIiwiam9pbiIsInJlbW92ZUF0dHJpYnV0ZSIsImNsYXNzTmFtZSIsImlzQ3NzU3RyaW5nIiwiY3VycmVudERpc3BsYXkiLCJkaXNwbGF5IiwidGFnTmFtZSIsInNob3VsZFNldEFzUHJvcCIsImluY2x1ZGVCb29sZWFuQXR0ciIsIl9hIiwiX3RydWVWYWx1ZSIsIl9mYWxzZVZhbHVlIiwicmVtb3ZlQXR0cmlidXRlTlMiLCJzZXRBdHRyaWJ1dGVOUyIsImlzQm9vbGVhbiIsImNyZWF0ZVJlbmRlcmVyIiwiY29udGFpbmVyT3JTZWxlY3RvciIsIm5vcm1hbGl6ZUNvbnRhaW5lciIsIlNWR0VsZW1lbnQiLCJFbGVtZW50IiwiY29uc29sZSIsImFzc2VydCIsImNvbmRpdGlvbiIsIm1zZyIsImxvZyIsIkVycm9yIiwic3ltYm9scyIsInBhcmVudElEIiwicG93IiwiZmxvb3IiLCJyYW5kb20iLCJyYW5kb21JRCIsInNlbGVjdGlvbjIiLCJnZXRTZWxlY3Rpb24iLCJTZWxlY3Rpb24iLCJpc0NvbGxhcHNlZCIsImFuY2hvck5vZGUiLCJvZmZzZXQiLCJhbmNob3JPZmZzZXQiLCJzdGFydCIsImJhY2t3YXJkcyIsImNvbGxhcHNlZCIsInNlbGVjdGlvbiIsImZvY3VzTm9kZSIsImZvY3VzT2Zmc2V0IiwicGFyZW50Tm9kZXMiLCJib2R5IiwiY2hpbGROb2RlIiwiY2hpbGROb2RlcyIsImlzRE9NU2VsZWN0aW9uQmFja3dhcmRzIiwicmVzb2x2ZUF0dHJzIiwibm9kZVR5cGUiLCJOb2RlIiwiVEVYVF9OT0RFIiwiRUxFTUVOVF9OT0RFIiwibm9kZU5hbWUiLCJhdHRyIiwiYXR0cmlidXRlcyIsInBvaW50ZXIiLCJjb250YWluZXJOb2RlIiwicGFyYWdyYXBoSUQiLCJzcGFuSUQiLCJzdGFydE5vZGUiLCJ0ZXh0Tm9kZSIsImRhdGFQb2ludGVyRE9NTm9kZSIsImVuZE5vZGUiLCJlbXB0eSIsInJhbmdlIiwiUmFuZ2UiLCJzZXRTdGFydCIsInNldEVuZCIsImNvbGxhcHNlIiwiYWRkUmFuZ2UiLCJwYXJhZ3JhcGgiLCJzcGFucyIsIm5ld0lEIiwiZm9ybWF0IiwibmV3U3BhbiIsInNwYW4iLCJuZXdpZCIsInNwbGl0VGltZSIsImxlZnQiLCJzdWJzdHIiLCJyaWdodCIsInRvdGFsIiwiZHVyYXRpb24iLCJ0aW1lIiwiZ3JvdXAiLCJub3JtSW5kZXgiLCJwYXJhZ3JhcGhzIiwicGFyYWdyYXBoSW5kZXgiLCJwYXJhZ3JhcGgyIiwic3BhbkluZGV4IiwicGFyYWdyYXBoU3BhbnMiLCJzcGFuMiIsInNwYW5BdHRycyIsInBhcmFncmFwaEF0dHJzIiwic3Bhbk5vZGUiLCJwYXJhZ3JhcGhOb2RlIiwiaW5wdXROb2RlIiwiZ2V0RE9NRWxlbWVudERhdGFBdHRyaWJ1dGVzIiwibm9kZTIiLCJkYXRhRE9NTm9kZXNBdE5vZGUiLCJpZFRvSW5kZXgiLCJsZWZ0U3BhbklEIiwibGVmdFBhcmFncmFwaElEIiwidGV4dENvbmVudCIsImRhdGFQb2ludGVyRnJvbURPTVBvaW50ZXIiLCJkYXRhQXRJbmRleCIsImRhdGFQb2ludGVyIiwiU3BsaWNlTW9kZSIsImZyZWV6ZSIsIlJlbW92ZSIsIkluUGxhY2UiLCJDb3B5Iiwic3RhcnRJbmRleCIsInN0YXJ0T2Zmc2V0IiwiZW5kSW5kZXgiLCJlbmRPZmZzZXQiLCJtb2RlIiwiZW5kU3Bhbkxlbmd0aCIsInJlbW92ZWRTcGFuVGV4dCIsInN1YnN0cmluZyIsInJlbW92ZWRTcGFucyIsImNvcHlTcGFuIiwic3BsaXRJbmRleCIsInNwbGl0T2Zmc2V0Iiwic3BsaXRTcGFuIiwibGVmdDIiLCJyaWdodDIiLCJtaWQyIiwibWlkcmlnaHQiLCJtaWQiLCJjb3BpZWRTcGFucyIsInNwbGljZVN0YXJ0Iiwic3BsaWNlRW5kIiwic2xpY2VkU3BhbnMiLCJyZW1vdmVkIiwic3RhcnRQYXJhZ3JhcGgiLCJzcGxpY2VTcGFucyIsInBhcnRpYWwiLCJsYXN0IiwibmV3RGF0YSIsIm5ld1BhcmFncmFwaHMiLCJsYXN0UGFyYWdyYXBoMiIsIm5ld1NwYW5zMiIsImluc2VydGVkU3RhcnQyIiwiaW5zZXJ0ZWRFbmQyIiwibGFzdFBhcmFncmFwaCIsIm5ld1BhcmFncmFwaCIsImluc2VydGVkU3RhcnQiLCJpbnNlcnRlZEVuZCIsInJpZ2h0U3BhbnMiLCJzb3VyY2VTcGFucyIsInNvdXJjZVNwYW4iLCJmb3VuZCIsInN0YXJ0SUQiLCJlbmRJRCIsInN0YXJ0ZWQiLCJtb2RlbFZhbHVlIiwiZWRpdGFibGUiLCJzaG93Q29uZmlkZW5jZSIsImVuYWJsZWQiLCJrayIsImRkIiwiZnVuYyIsIndhaXQiLCJ0aW1lb3V0MiIsImRlYm91bmNlZCIsImNhbGxOb3ciLCJzZXRUaW1lb3V0IiwiYXBwbHlWaWV3Q2hhbmdlc05vdyIsImFwcGx5Vmlld0NoYW5nZXMiLCJwcmV2Vm5vZGUiLCJkZWJ1ZyIsInNhdmUiLCJkb3dubG9hZCIsImZpbGVuYW1lIiwiZWxlbWVudCIsImVuY29kZVVSSUNvbXBvbmVudCIsImNsaWNrIiwiYXNIVE1MIiwic2VudGVuY2UiLCJib2xkIiwiaXRhbGljIiwidW5kZXJsaW5lIiwic3Vic2NyaXB0Iiwic3VwZXJzY3JpcHQiLCJidWxsZXQiLCJleHBvcnRXb3JkIiwiaHRtbCIsInNwYW5TZWxlY3RlZCIsInNlbGVjdFN0YXJ0Iiwic2VsZWN0RW5kIiwibm9ybWFsaXplZERPTVNlbGVjdGlvbiIsInN0YXJ0MyIsImVuZDIiLCJnZXRTcGFuU2VsZWN0aW9uIiwicGFyYWdyYXBoU3Bhbkl0ZXJhdG9yIiwiZGF0YUl0ZXJhdG9yIiwidG9nZ2xlU3R5bGUiLCJkYXRhU3BsaWNlIiwibmFtZTIiLCJ2YWx1ZTIiLCJ0b2dnbGVCdWxsZXQiLCJzcGFuU2VsZWN0aW9uIiwibWFwQ29udGFpbmVyT2Zmc2V0UG9pbnRlclRvRGF0YSIsInBhcnNlRE9NIiwicmVzdG9yZVNlbGVjdGlvbiIsInBhcnNlZCIsInJvb3ROb2RlIiwiYXR0clZhbHVlIiwidHJhbnNmb3JtIiwibGFzdFBsYWludGV4dFBhcmEiLCJwcmVwZW5kVGV4dCIsImlkMyIsImlubmVyVGV4dCIsImNvbmZpZGVuY2UiLCJzb3VyY2VQYXJhZ3JhcGhzIiwic291cmNlUGFyYWdyYXBoIiwiZGF0YU1lcmdlUGFyYWdyYXBocyIsInBhcnNlIiwib25JbnB1dCIsIm9uS2V5cHJlc3MiLCJ2bSIsImluZm8iLCJtZXRhS2V5IiwiY3RybEtleSIsInN0b3BQcm9wYWdhdGlvbiIsInByZXZlbnREZWZhdWx0IiwiY29kZSIsInNoaWZ0S2V5IiwiZGF0YVBvaW50ZXJOZXh0Iiwic2VsZWN0aW9uMyIsIm9mZnNldExlZnQiLCJsZWZ0U3BhbkluZGV4Iiwib2Zmc2V0UmlnaHQiLCJyaWdodFNwYW5JbmRleCIsInJpZ2h0U3BhbklEIiwic3RhcnRPZlBhcmFncmFwaCIsImRhdGEyIiwicHAiLCJkYXRhUG9pbnRlclByZXYiLCJzdGFydFBhcmFncmFwaFNwYW5zIiwiZW5kT2ZQYXJhZ3JhcGgiLCJzZWxlY3RlZFNwYW5zIiwiaGlnaGxpZ2h0ZWQiLCJvbkRyYWdTdGFydCIsIm9uUGFzdGUiLCJuYXRpdmVEYXRhIiwiY2xpcGJvYXJkRGF0YSIsImdldERhdGEiLCJodG1sRGF0YSIsInRleHREYXRhIiwiZGF0YUluc2VydCIsImltcGxlbWVudGF0aW9uIiwiY3JlYXRlSFRNTERvY3VtZW50IiwiY3NzUnVsZXMiLCJ1bmRlcmxpbmVDbGFzc2VzIiwicnVsZSIsInNlbGVjdG9yVGV4dCIsInNlYXJjaCIsInRleHREZWNvcmF0aW9uTGluZSIsInNlbGVjdG9ycyIsInBhcnRzIiwic2hpZnQiLCJzdGFjayIsImZtdCIsIm5vZGVGbXQiLCJjbHMiLCJjbGFzc0xpc3QiLCJwYXJzZVZhbmlsbGFET00iLCJzaGVldCIsImRhdGEzIiwic3RhcnQ0IiwiZXhlY0NvbW1hbmQiLCJvbkN1dCIsIm9uQ29weSIsInNldERhdGEiLCJjb250ZW50ZWRpdGFibGUiLCJzcGVsbGNoZWNrIiwidl9pZiIsIl9jYWNoZSIsIm9uS2V5ZG93biIsIm9uU2VsZWN0c3RhcnQiLCJvbk1vdXNldXAiLCJvbkRyYWdzdGFydCIsIl9jcmVhdGVFbGVtZW50QmxvY2siLCJ2X3RleHQiLCJvbkNsaWNrIiwibm9vcCIsIkRpc3BhdGNoIiwidHlwZW5hbWVzIiwidHlwZXMiLCJkaXNwYXRjaCIsInR5cGVuYW1lIiwiVCIsInBhcnNlVHlwZW5hbWVzIiwiY29weSIsInRoYXQiLCJ4aHRtbCIsInN2ZyIsInhsaW5rIiwieG1sIiwieG1sbnMiLCJwcmVmaXgiLCJuYW1lc3BhY2VzIiwic3BhY2UiLCJsb2NhbCIsImRvY3VtZW50MiIsIm93bmVyRG9jdW1lbnQiLCJ1cmkiLCJuYW1lc3BhY2VVUkkiLCJkb2N1bWVudEVsZW1lbnQiLCJmdWxsbmFtZSIsIm5hbWVzcGFjZSIsImNyZWF0b3JGaXhlZCIsImNyZWF0b3JJbmhlcml0Iiwibm9uZSIsIngiLCJxdWVyeVNlbGVjdG9yQWxsIiwibWF0Y2hlcyIsImZpbmQiLCJmaXJzdEVsZW1lbnRDaGlsZCIsImRhdHVtMiIsIl9uZXh0IiwiX3BhcmVudCIsIl9fZGF0YV9fIiwiZXhpdCIsImdyb3VwTGVuZ3RoIiwiZGF0YUxlbmd0aCIsIkVudGVyTm9kZSIsImtleVZhbHVlIiwibm9kZUJ5S2V5VmFsdWUiLCJrZXlWYWx1ZXMiLCJOYU4iLCJkZWZhdWx0VmlldyIsInJlbW92ZVByb3BlcnR5IiwicHJpb3JpdHkiLCJnZXRQcm9wZXJ0eVZhbHVlIiwiZ2V0Q29tcHV0ZWRTdHlsZSIsInN0cmluZyIsIkNsYXNzTGlzdCIsIl9ub2RlIiwiX25hbWVzIiwiY2xhc3NBcnJheSIsImdldEF0dHJpYnV0ZSIsIm5hbWVzIiwiY2xhc3NlZEFkZCIsImNsYXNzZWRSZW1vdmUiLCJjbG9uZSIsIl9fb24iLCJsaXN0ZW5lciIsImNvbnRleHRMaXN0ZW5lciIsInBhcmFtcyIsIndpbmRvdzIiLCJDdXN0b21FdmVudCIsImluaXRFdmVudCIsImJ1YmJsZXMiLCJjYW5jZWxhYmxlIiwiZGV0YWlsIiwiZGlzcGF0Y2hFdmVudCIsImNvbnRhaW5zIiwiZ3JvdXBzIiwicGFyZW50cyIsIl9ncm91cHMiLCJfcGFyZW50cyIsImZhY3RvcnkiLCJkZWZpbml0aW9uIiwic2VsZWN0Iiwic2VsZWN0MiIsInNlbGVjdG9yIiwic3ViZ3JvdXBzIiwic3Vibm9kZSIsInN1Ymdyb3VwIiwic2VsZWN0QWxsIiwiYXJyYXkiLCJhcnJheUFsbCIsInNlbGVjdG9yQWxsIiwic2VsZWN0Q2hpbGQiLCJjaGlsZEZpcnN0IiwiY2hpbGRGaW5kIiwiY2hpbGRNYXRjaGVyIiwic2VsZWN0Q2hpbGRyZW4iLCJjaGlsZHJlbkZpbHRlciIsIm1hdGNoZXIiLCJkYXR1bSIsImJpbmRLZXkiLCJiaW5kSW5kZXgiLCJjb25zdGFudCIsImFycmF5bGlrZSIsImVudGVyR3JvdXAiLCJ1cGRhdGVHcm91cCIsImV4aXRHcm91cCIsInByZXZpb3VzIiwiaTAiLCJpMSIsIl9lbnRlciIsIl9leGl0Iiwic3BhcnNlIiwib25lbnRlciIsIm9udXBkYXRlIiwib25leGl0IiwiYXBwZW5kIiwibWVyZ2UiLCJvcmRlciIsImdyb3VwczAiLCJncm91cHMxIiwibTAiLCJtMSIsIm1lcmdlcyIsImdyb3VwMCIsImdyb3VwMSIsImNvbXBhcmVEb2N1bWVudFBvc2l0aW9uIiwiY29tcGFyZSIsImFzY2VuZGluZyIsInNvcnRncm91cHMiLCJzb3J0Z3JvdXAiLCJjb21wYXJlTm9kZSIsIm5vZGVzIiwic2l6ZTIiLCJlYWNoIiwiZ2V0QXR0cmlidXRlTlMiLCJhdHRyUmVtb3ZlTlMiLCJhdHRyUmVtb3ZlIiwiYXR0ckZ1bmN0aW9uTlMiLCJhdHRyRnVuY3Rpb24iLCJhdHRyQ29uc3RhbnROUyIsImF0dHJDb25zdGFudCIsInN0eWxlUmVtb3ZlIiwic3R5bGVGdW5jdGlvbiIsInN0eWxlQ29uc3RhbnQiLCJzdHlsZVZhbHVlIiwicHJvcGVydHkiLCJwcm9wZXJ0eVJlbW92ZSIsInByb3BlcnR5RnVuY3Rpb24iLCJwcm9wZXJ0eUNvbnN0YW50IiwiY2xhc3NlZCIsImNsYXNzZWRGdW5jdGlvbiIsImNsYXNzZWRUcnVlIiwiY2xhc3NlZEZhbHNlIiwidGV4dFJlbW92ZSIsInRleHRGdW5jdGlvbiIsInRleHRDb25zdGFudCIsImh0bWxSZW1vdmUiLCJodG1sRnVuY3Rpb24iLCJodG1sQ29uc3RhbnQiLCJyYWlzZSIsImxvd2VyIiwiY3JlYXRlMiIsImNyZWF0b3IiLCJjb25zdGFudE51bGwiLCJzZWxlY3Rpb25fY2xvbmVEZWVwIiwic2VsZWN0aW9uX2Nsb25lU2hhbGxvdyIsIm9uQWRkIiwib25SZW1vdmUiLCJkaXNwYXRjaEZ1bmN0aW9uIiwiZGlzcGF0Y2hDb25zdGFudCIsImJyaWdodGVyIiwicmVJIiwicmVOIiwicmVQIiwicmVIZXgiLCJyZVJnYkludGVnZXIiLCJSZWdFeHAiLCJyZVJnYlBlcmNlbnQiLCJyZVJnYmFJbnRlZ2VyIiwicmVSZ2JhUGVyY2VudCIsInJlSHNsUGVyY2VudCIsInJlSHNsYVBlcmNlbnQiLCJuYW1lZCIsImFsaWNlYmx1ZSIsImFudGlxdWV3aGl0ZSIsImFxdWEiLCJhcXVhbWFyaW5lIiwiYXp1cmUiLCJiZWlnZSIsImJpc3F1ZSIsImJsYWNrIiwiYmxhbmNoZWRhbG1vbmQiLCJibHVlIiwiYmx1ZXZpb2xldCIsImJyb3duIiwiYnVybHl3b29kIiwiY2FkZXRibHVlIiwiY2hhcnRyZXVzZSIsImNob2NvbGF0ZSIsImNvcmFsIiwiY29ybmZsb3dlcmJsdWUiLCJjb3Juc2lsayIsImNyaW1zb24iLCJjeWFuIiwiZGFya2JsdWUiLCJkYXJrY3lhbiIsImRhcmtnb2xkZW5yb2QiLCJkYXJrZ3JheSIsImRhcmtncmVlbiIsImRhcmtncmV5IiwiZGFya2toYWtpIiwiZGFya21hZ2VudGEiLCJkYXJrb2xpdmVncmVlbiIsImRhcmtvcmFuZ2UiLCJkYXJrb3JjaGlkIiwiZGFya3JlZCIsImRhcmtzYWxtb24iLCJkYXJrc2VhZ3JlZW4iLCJkYXJrc2xhdGVibHVlIiwiZGFya3NsYXRlZ3JheSIsImRhcmtzbGF0ZWdyZXkiLCJkYXJrdHVycXVvaXNlIiwiZGFya3Zpb2xldCIsImRlZXBwaW5rIiwiZGVlcHNreWJsdWUiLCJkaW1ncmF5IiwiZGltZ3JleSIsImRvZGdlcmJsdWUiLCJmaXJlYnJpY2siLCJmbG9yYWx3aGl0ZSIsImZvcmVzdGdyZWVuIiwiZnVjaHNpYSIsImdhaW5zYm9ybyIsImdob3N0d2hpdGUiLCJnb2xkIiwiZ29sZGVucm9kIiwiZ3JheSIsImdyZWVuIiwiZ3JlZW55ZWxsb3ciLCJncmV5IiwiaG9uZXlkZXciLCJob3RwaW5rIiwiaW5kaWFucmVkIiwiaW5kaWdvIiwiaXZvcnkiLCJraGFraSIsImxhdmVuZGVyIiwibGF2ZW5kZXJibHVzaCIsImxhd25ncmVlbiIsImxlbW9uY2hpZmZvbiIsImxpZ2h0Ymx1ZSIsImxpZ2h0Y29yYWwiLCJsaWdodGN5YW4iLCJsaWdodGdvbGRlbnJvZHllbGxvdyIsImxpZ2h0Z3JheSIsImxpZ2h0Z3JlZW4iLCJsaWdodGdyZXkiLCJsaWdodHBpbmsiLCJsaWdodHNhbG1vbiIsImxpZ2h0c2VhZ3JlZW4iLCJsaWdodHNreWJsdWUiLCJsaWdodHNsYXRlZ3JheSIsImxpZ2h0c2xhdGVncmV5IiwibGlnaHRzdGVlbGJsdWUiLCJsaWdodHllbGxvdyIsImxpbWUiLCJsaW1lZ3JlZW4iLCJsaW5lbiIsIm1hZ2VudGEiLCJtYXJvb24iLCJtZWRpdW1hcXVhbWFyaW5lIiwibWVkaXVtYmx1ZSIsIm1lZGl1bW9yY2hpZCIsIm1lZGl1bXB1cnBsZSIsIm1lZGl1bXNlYWdyZWVuIiwibWVkaXVtc2xhdGVibHVlIiwibWVkaXVtc3ByaW5nZ3JlZW4iLCJtZWRpdW10dXJxdW9pc2UiLCJtZWRpdW12aW9sZXRyZWQiLCJtaWRuaWdodGJsdWUiLCJtaW50Y3JlYW0iLCJtaXN0eXJvc2UiLCJtb2NjYXNpbiIsIm5hdmFqb3doaXRlIiwibmF2eSIsIm9sZGxhY2UiLCJvbGl2ZSIsIm9saXZlZHJhYiIsIm9yYW5nZSIsIm9yYW5nZXJlZCIsIm9yY2hpZCIsInBhbGVnb2xkZW5yb2QiLCJwYWxlZ3JlZW4iLCJwYWxldHVycXVvaXNlIiwicGFsZXZpb2xldHJlZCIsInBhcGF5YXdoaXAiLCJwZWFjaHB1ZmYiLCJwZXJ1IiwicGluayIsInBsdW0iLCJwb3dkZXJibHVlIiwicHVycGxlIiwicmViZWNjYXB1cnBsZSIsInJlZCIsInJvc3licm93biIsInJveWFsYmx1ZSIsInNhZGRsZWJyb3duIiwic2FsbW9uIiwic2FuZHlicm93biIsInNlYWdyZWVuIiwic2Vhc2hlbGwiLCJzaWVubmEiLCJzaWx2ZXIiLCJza3libHVlIiwic2xhdGVibHVlIiwic2xhdGVncmF5Iiwic2xhdGVncmV5Iiwic25vdyIsInNwcmluZ2dyZWVuIiwic3RlZWxibHVlIiwidGFuIiwidGVhbCIsInRoaXN0bGUiLCJ0b21hdG8iLCJ0dXJxdW9pc2UiLCJ2aW9sZXQiLCJ3aGVhdCIsIndoaXRlIiwid2hpdGVzbW9rZSIsInllbGxvdyIsInllbGxvd2dyZWVuIiwicmdiIiwiZm9ybWF0SGV4IiwiZm9ybWF0UmdiIiwiZXhlYyIsInJnYm4iLCJSZ2IiLCJyZ2JhIiwiaHNsYSIsImciLCJDb2xvciIsImNvbG9yIiwib3BhY2l0eSIsInJnYkNvbnZlcnQiLCJoZXgiLCJtYXgiLCJyb3VuZCIsIkhzbCIsIm0yIiwiZGVmaW5lIiwiY2hhbm5lbHMiLCJkaXNwbGF5YWJsZSIsImNvbG9yX2Zvcm1hdEhleCIsImZvcm1hdEhzbCIsImhzbENvbnZlcnQiLCJjb2xvcl9mb3JtYXRSZ2IiLCJkYXJrZXIiLCJyZ2JfZm9ybWF0SGV4IiwicmdiX2Zvcm1hdFJnYiIsImhzbDJyZ2IiLCJ5Iiwibm9nYW1tYSIsImV4cG9uZW50aWFsIiwiZCIsImxpbmVhciIsImNvbG9yMiIsImdhbW1hIiwiY29sb3JSZ2IiLCJyZ2JHYW1tYSIsInJlQSIsInJlQiIsImFtIiwiYnMiLCJiaSIsImxhc3RJbmRleCIsInEiLCJvbmUiLCJ6ZXJvIiwiaTIiLCJzdmdOb2RlIiwiZGVncmVlcyIsIlBJIiwiaWRlbnRpdHkiLCJ0cmFuc2xhdGVYIiwidHJhbnNsYXRlWSIsInJvdGF0ZSIsInNrZXdYIiwic2NhbGVYIiwic2NhbGVZIiwic3FydCIsImF0YW4yIiwiYXRhbiIsInB4Q29tbWEiLCJweFBhcmVuIiwiZGVnUGFyZW4iLCJ4YSIsInlhIiwieGIiLCJ5YiIsInRhc2tIZWFkIiwidGFza1RhaWwiLCJpbnRlcnBvbGF0ZVRyYW5zZm9ybUNzcyIsImludGVycG9sYXRlVHJhbnNmb3JtIiwiRE9NTWF0cml4IiwiV2ViS2l0Q1NTTWF0cml4IiwiaXNJZGVudGl0eSIsImRlY29tcG9zZSIsImludGVycG9sYXRlVHJhbnNmb3JtU3ZnIiwiYmFzZVZhbCIsImNvbnNvbGlkYXRlIiwibWF0cml4IiwiZnJhbWUiLCJ0aW1lb3V0IiwiaW50ZXJ2YWwiLCJjbG9ja0xhc3QiLCJjbG9ja05vdyIsImNsb2NrU2tldyIsImNsb2NrIiwic2V0RnJhbWUiLCJyZXF1ZXN0QW5pbWF0aW9uRnJhbWUiLCJjbGVhck5vdyIsIl9jYWxsIiwiX3RpbWUiLCJkZWxheSIsIlRpbWVyIiwicmVzdGFydCIsInQwIiwidDIiLCJ0MSIsIm5vdzIiLCJjbGVhclRpbWVvdXQiLCJ3YWtlIiwiY2xlYXJJbnRlcnZhbCIsInNldEludGVydmFsIiwicG9rZSIsImVsYXBzZWQiLCJ0aW1lciIsIlR5cGVFcnJvciIsImVtcHR5T24iLCJlbXB0eVR3ZWVuIiwidGltaW5nIiwic2NoZWR1bGVzIiwiX190cmFuc2l0aW9uIiwidHdlZW4iLCJzdGF0ZSIsInRpY2siLCJlYXNlIiwic2NoZWR1bGUyIiwidHdlZW4wIiwidHdlZW4xIiwiX2lkIiwiaW50ZXJwb2xhdGVOdW1iZXIiLCJpbnRlcnBvbGF0ZVJnYiIsImludGVycG9sYXRlU3RyaW5nIiwiaW50ZXJwb2xhdGUyIiwidmFsdWUxIiwic3RyaW5nMDAiLCJpbnRlcnBvbGF0ZTAiLCJzdHJpbmcxIiwic3RyaW5nMCIsInN0cmluZzEwIiwiYXR0ckludGVycG9sYXRlTlMiLCJhdHRySW50ZXJwb2xhdGUiLCJvbjAiLCJvbjEiLCJzaXQiLCJldmVyeSIsImluaXQiLCJzdHlsZUludGVycG9sYXRlIiwidGV4dEludGVycG9sYXRlIiwiX25hbWUiLCJzZWxlY3Rpb25fcHJvdG90eXBlIiwiVHJhbnNpdGlvbiIsImluaGVyaXQyIiwiaWQwIiwiaWQxIiwibmV3SWQiLCJvbkZ1bmN0aW9uIiwiaW50ZXJwb2xhdGUiLCJhdHRyVHdlZW4iLCJ0d2VlblZhbHVlIiwiYXR0clR3ZWVuTlMiLCJzdHlsZVR3ZWVuIiwic3R5bGVOdWxsIiwibGlzdGVuZXIwIiwic3R5bGVNYXliZVJlbW92ZSIsInRleHRUd2VlbiIsInR3ZWVuUmVtb3ZlIiwidHdlZW5GdW5jdGlvbiIsImRlbGF5RnVuY3Rpb24iLCJkZWxheUNvbnN0YW50IiwiZHVyYXRpb25GdW5jdGlvbiIsImR1cmF0aW9uQ29uc3RhbnQiLCJlYXNlQ29uc3RhbnQiLCJlYXNlVmFyeWluZyIsInJlc29sdmUyIiwicmVqZWN0IiwiY2FuY2VsIiwiaW50ZXJydXB0IiwiZGVmYXVsdFRpbWluZyIsImVtcHR5MiIsImluaGVyaXQiLCJJbnQxNkFycmF5IiwiSW50MzJBcnJheSIsIndhdmVmb3JtIiwicmVzaXplQ2hlY2tJbnRlcnZhbCIsImN1cnJlbnRXaWR0aCIsImN1cnJlbnRIZWlnaHQiLCJjbGllbnRXaWR0aCIsImNsaWVudEhlaWdodCIsImRyYXciLCJGbG9hdDMyQXJyYXkiLCJvZmZzZXRYIiwid2lkdGgiLCJoZWlnaHQiLCJzdW1tYXJ5IiwicGl4ZWxzIiwicGl4ZWxMZW5ndGgiLCJ2YWxzIiwic2FtcGxlU2l6ZSIsInBvc1N1bSIsIm5lZ1N1bSIsInN1bW1hcml6ZUZhc3RlciIsIm1lYW4iLCJtdWx0aXBsaWVyIiwiY2xvc2UiLCJBdWRpb0NvbnRleHQiLCJvbnN0YXRlY2hhbmdlIiwicmVzdW1lIiwiZGVjb2RlciIsImFycmF5QnVmZmVyIiwiYnVmZmVyIiwiZGVjb2RlQXVkaW9GaWxlQnVmZmVyIiwiYnVmZmVyRGF0YSIsIkZsb2F0MzJBcnJheVRvSW50MTZBcnJheSIsInNhbXBsZVJhdGUiLCJudW1iZXJPZkNoYW5uZWxzIiwidXJsIiwiZmV0Y2hBdWRpb0ZpbGVBbmREZWNvZGUiLCJyZXNwb25zZSIsImZldGNoIiwiZGVjb2RlQXVkaW9EYXRhIiwiZmxvYXRBcnJheSIsInNhbXBsZSIsImNoYW5uZWwiLCJnZXRDaGFubmVsRGF0YSIsIlRyYW5zY3JpcHRFZGl0b3IiLCJXYXZlZm9ybSIsInRyYW5zY3JpcHQiLCJwcmV2aWV3VmlkZW8iLCJvblNhdmUiLCJhc3luYyIsInBvc2l0aW9uIiwic2VsZWN0ZWQiLCJwbGF5aW5nIiwibG9hZGVkIiwiaXNWaWRlbyIsIl91cmwiLCJfZHVyYXRpb24iLCJfd2F2ZWZvcm0iLCJwZW5kaW5nX3dhdmVmb3JtIiwicGVuZGluZ19kdXJhdGlvbiIsInZpZGVvX2R1cmF0aW9uIiwic2F2aW5nIiwibGFzdFNhdmVkVmVyc2lvbiIsImF1dG9zYXZlIiwiZGVjb2RlclN1c3BlbmRlZCIsImRlY29kaW5nQXVkaW8iLCJzYXZlQXV0byIsIm9uR2xvYmFsS2V5ZG93biIsIkF1ZGlvRmlsZURlY29kZXIiLCJzdXNwZW5kZWQiLCJkZWNvZGVBdWRpb1dhdmVmb3JtIiwiRmlsZSIsImRlY29kZUF1ZGlvRmlsZURhdGEiLCJzeW5jZWQiLCJtc1RvVGltZSIsIm1zIiwiaG91cnMiLCJ6IiwiX21zIiwic2VjcyIsIm1pbnMiLCJocnMiLCJwYWQiLCJ0b2dnbGVBdXRvU2F2ZSIsInZlcnNpb24yIiwiZmV0Y2hBbmREZWNvZGVBdWRpb0ZpbGUiLCJ3YXZlZm9ybUxvYWRpbmciLCJvblBsYXkiLCJhbmltYXRpb25GcmFtZUlEIiwidXBkYXRlUG9zaXRpb24iLCJvblBhdXNlIiwib25FbmRlZCIsInRpbWVzdGFtcCIsInZpZGVvIiwiY3VycmVudFRpbWUiLCJkdXJhdGlvbkNoYW5nZWQiLCJ2aWRlb1dpZHRoIiwidmlkZW9IZWlnaHQiLCJvbkVtcHR5IiwicGF1c2VkIiwicGxheSIsInBhdXNlIiwidHJhbnNjcmlwdFVwZGF0ZWQiLCJzZXRQb3NpdGlvbiIsInRpbWVVcGRhdGUiLCJ0b2dnbGVTaG93Q29uZmlkZW5jZSIsIkVkaXRvciIsInJldm9rZU9iamVjdFVSTCIsImF1ZGlvIiwiZmlsZSIsImVkaXRvciIsImxvYWQiLCJVUkwiLCJjcmVhdGVPYmplY3RVUkwiLCJBcnJheUJ1ZmZlciIsIkJsb2IiLCJhdWRpb0RhdGEiLCJqc29uIiwiRWRpdG9yV2l0aE1lZGlhTG9h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
